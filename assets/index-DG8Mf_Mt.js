(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zv={exports:{}},Xu={},$v={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ua=Symbol.for("react.element"),DE=Symbol.for("react.portal"),ME=Symbol.for("react.fragment"),OE=Symbol.for("react.strict_mode"),bE=Symbol.for("react.profiler"),VE=Symbol.for("react.provider"),LE=Symbol.for("react.context"),FE=Symbol.for("react.forward_ref"),UE=Symbol.for("react.suspense"),BE=Symbol.for("react.memo"),zE=Symbol.for("react.lazy"),hm=Symbol.iterator;function $E(t){return t===null||typeof t!="object"?null:(t=hm&&t[hm]||t["@@iterator"],typeof t=="function"?t:null)}var qv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hv=Object.assign,Wv={};function no(t,e,n){this.props=t,this.context=e,this.refs=Wv,this.updater=n||qv}no.prototype.isReactComponent={};no.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};no.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kv(){}Kv.prototype=no.prototype;function Wh(t,e,n){this.props=t,this.context=e,this.refs=Wv,this.updater=n||qv}var Kh=Wh.prototype=new Kv;Kh.constructor=Wh;Hv(Kh,no.prototype);Kh.isPureReactComponent=!0;var fm=Array.isArray,Gv=Object.prototype.hasOwnProperty,Gh={current:null},Qv={key:!0,ref:!0,__self:!0,__source:!0};function Yv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Gv.call(e,r)&&!Qv.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Ua,type:t,key:i,ref:o,props:s,_owner:Gh.current}}function qE(t,e){return{$$typeof:Ua,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ua}function HE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pm=/\/+/g;function zc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HE(""+t.key):e.toString(36)}function ql(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ua:case DE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+zc(o,0):r,fm(s)?(n="",t!=null&&(n=t.replace(pm,"$&/")+"/"),ql(s,e,n,"",function(h){return h})):s!=null&&(Qh(s)&&(s=qE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(pm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",fm(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+zc(i,u);o+=ql(i,e,n,c,s)}else if(c=$E(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+zc(i,u++),o+=ql(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wl(t,e,n){if(t==null)return t;var r=[],s=0;return ql(t,r,"","",function(i){return e.call(n,i,s++)}),r}function WE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ln={current:null},Hl={transition:null},KE={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:Hl,ReactCurrentOwner:Gh};function Xv(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:wl,forEach:function(t,e,n){wl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wl(t,function(){e++}),e},toArray:function(t){return wl(t,function(e){return e})||[]},only:function(t){if(!Qh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=no;xe.Fragment=ME;xe.Profiler=bE;xe.PureComponent=Wh;xe.StrictMode=OE;xe.Suspense=UE;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KE;xe.act=Xv;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Hv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Gh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Gv.call(e,c)&&!Qv.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Ua,type:t.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:LE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VE,_context:t},t.Consumer=t};xe.createElement=Yv;xe.createFactory=function(t){var e=Yv.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:FE,render:t}};xe.isValidElement=Qh;xe.lazy=function(t){return{$$typeof:zE,_payload:{_status:-1,_result:t},_init:WE}};xe.memo=function(t,e){return{$$typeof:BE,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=Hl.transition;Hl.transition={};try{t()}finally{Hl.transition=e}};xe.unstable_act=Xv;xe.useCallback=function(t,e){return ln.current.useCallback(t,e)};xe.useContext=function(t){return ln.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return ln.current.useDeferredValue(t)};xe.useEffect=function(t,e){return ln.current.useEffect(t,e)};xe.useId=function(){return ln.current.useId()};xe.useImperativeHandle=function(t,e,n){return ln.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return ln.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return ln.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return ln.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return ln.current.useReducer(t,e,n)};xe.useRef=function(t){return ln.current.useRef(t)};xe.useState=function(t){return ln.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return ln.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return ln.current.useTransition()};xe.version="18.3.1";$v.exports=xe;var K=$v.exports;const GE=jE(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE=K,YE=Symbol.for("react.element"),XE=Symbol.for("react.fragment"),JE=Object.prototype.hasOwnProperty,ZE=QE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eT={key:!0,ref:!0,__self:!0,__source:!0};function Jv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)JE.call(e,r)&&!eT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:YE,type:t,key:i,ref:o,props:s,_owner:ZE.current}}Xu.Fragment=XE;Xu.jsx=Jv;Xu.jsxs=Jv;zv.exports=Xu;var l=zv.exports,Zv={exports:{}},kn={},ey={exports:{}},ty={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,D){var z=$.length;$.push(D);e:for(;0<z;){var q=z-1>>>1,J=$[q];if(0<s(J,D))$[q]=D,$[z]=J,z=q;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var D=$[0],z=$.pop();if(z!==D){$[0]=z;e:for(var q=0,J=$.length,ie=J>>>1;q<ie;){var Ie=2*(q+1)-1,Oe=$[Ie],be=Ie+1,at=$[be];if(0>s(Oe,z))be<J&&0>s(at,Oe)?($[q]=at,$[be]=z,q=be):($[q]=Oe,$[Ie]=z,q=Ie);else if(be<J&&0>s(at,z))$[q]=at,$[be]=z,q=be;else break e}}return D}function s($,D){var z=$.sortIndex-D.sortIndex;return z!==0?z:$.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],p=1,m=null,y=3,w=!1,N=!1,O=!1,U=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S($){for(var D=n(h);D!==null;){if(D.callback===null)r(h);else if(D.startTime<=$)r(h),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(h)}}function b($){if(O=!1,S($),!N)if(n(c)!==null)N=!0,ot(P);else{var D=n(h);D!==null&&H(b,D.startTime-$)}}function P($,D){N=!1,O&&(O=!1,x(v),v=-1),w=!0;var z=y;try{for(S(D),m=n(c);m!==null&&(!(m.expirationTime>D)||$&&!R());){var q=m.callback;if(typeof q=="function"){m.callback=null,y=m.priorityLevel;var J=q(m.expirationTime<=D);D=t.unstable_now(),typeof J=="function"?m.callback=J:m===n(c)&&r(c),S(D)}else r(c);m=n(c)}if(m!==null)var ie=!0;else{var Ie=n(h);Ie!==null&&H(b,Ie.startTime-D),ie=!1}return ie}finally{m=null,y=z,w=!1}}var M=!1,g=null,v=-1,E=5,A=-1;function R(){return!(t.unstable_now()-A<E)}function k(){if(g!==null){var $=t.unstable_now();A=$;var D=!0;try{D=g(!0,$)}finally{D?C():(M=!1,g=null)}}else M=!1}var C;if(typeof I=="function")C=function(){I(k)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,At=Je.port2;Je.port1.onmessage=k,C=function(){At.postMessage(null)}}else C=function(){U(k,0)};function ot($){g=$,M||(M=!0,C())}function H($,D){v=U(function(){$(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){N||w||(N=!0,ot(P))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(y){case 1:case 2:case 3:var D=3;break;default:D=y}var z=y;y=D;try{return $()}finally{y=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,D){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var z=y;y=$;try{return D()}finally{y=z}},t.unstable_scheduleCallback=function($,D,z){var q=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?q+z:q):z=q,$){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=z+J,$={id:p++,callback:D,priorityLevel:$,startTime:z,expirationTime:J,sortIndex:-1},z>q?($.sortIndex=z,e(h,$),n(c)===null&&$===n(h)&&(O?(x(v),v=-1):O=!0,H(b,z-q))):($.sortIndex=J,e(c,$),N||w||(N=!0,ot(P))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var D=y;return function(){var z=y;y=D;try{return $.apply(this,arguments)}finally{y=z}}}})(ty);ey.exports=ty;var tT=ey.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT=K,Rn=tT;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ny=new Set,la={};function ni(t,e){zi(t,e),zi(t+"Capture",e)}function zi(t,e){for(la[t]=e,t=0;t<e.length;t++)ny.add(e[t])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ad=Object.prototype.hasOwnProperty,rT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mm={},gm={};function sT(t){return Ad.call(gm,t)?!0:Ad.call(mm,t)?!1:rT.test(t)?gm[t]=!0:(mm[t]=!0,!1)}function iT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oT(t,e,n,r){if(e===null||typeof e>"u"||iT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ft[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ft[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ft[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ft[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ft[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ft[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ft[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ft[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ft[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yh=/[\-:]([a-z])/g;function Xh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yh,Xh);Ft[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yh,Xh);Ft[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yh,Xh);Ft[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ft[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});Ft.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ft[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jh(t,e,n,r){var s=Ft.hasOwnProperty(e)?Ft[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oT(e,n,s,r)&&(n=null),r||s===null?sT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zr=nT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,El=Symbol.for("react.element"),yi=Symbol.for("react.portal"),_i=Symbol.for("react.fragment"),Zh=Symbol.for("react.strict_mode"),xd=Symbol.for("react.profiler"),ry=Symbol.for("react.provider"),sy=Symbol.for("react.context"),ef=Symbol.for("react.forward_ref"),Cd=Symbol.for("react.suspense"),Pd=Symbol.for("react.suspense_list"),tf=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),iy=Symbol.for("react.offscreen"),vm=Symbol.iterator;function xo(t){return t===null||typeof t!="object"?null:(t=vm&&t[vm]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,$c;function Vo(t){if($c===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$c=e&&e[1]||""}return`
`+$c+t}var qc=!1;function Hc(t,e){if(!t||qc)return"";qc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{qc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vo(t):""}function aT(t){switch(t.tag){case 5:return Vo(t.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 2:case 15:return t=Hc(t.type,!1),t;case 11:return t=Hc(t.type.render,!1),t;case 1:return t=Hc(t.type,!0),t;default:return""}}function Nd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _i:return"Fragment";case yi:return"Portal";case xd:return"Profiler";case Zh:return"StrictMode";case Cd:return"Suspense";case Pd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sy:return(t.displayName||"Context")+".Consumer";case ry:return(t._context.displayName||"Context")+".Provider";case ef:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tf:return e=t.displayName||null,e!==null?e:Nd(t.type)||"Memo";case Qr:e=t._payload,t=t._init;try{return Nd(t(e))}catch{}}return null}function lT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nd(e);case 8:return e===Zh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uT(t){var e=oy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tl(t){t._valueTracker||(t._valueTracker=uT(t))}function ay(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=oy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function du(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rd(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ym(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ly(t,e){e=e.checked,e!=null&&Jh(t,"checked",e,!1)}function kd(t,e){ly(t,e);var n=vs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jd(t,e.type,n):e.hasOwnProperty("defaultValue")&&jd(t,e.type,vs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _m(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jd(t,e,n){(e!=="number"||du(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lo=Array.isArray;function ki(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Dd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Lo(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vs(n)}}function uy(t,e){var n=vs(e.value),r=vs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Em(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Md(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Il,dy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Il=Il||document.createElement("div"),Il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ua(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cT=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(t){cT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ko[e]=Ko[t]})});function hy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ko.hasOwnProperty(t)&&Ko[t]?(""+e).trim():e+"px"}function fy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var dT=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Od(t,e){if(e){if(dT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vd=null;function nf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ld=null,ji=null,Di=null;function Tm(t){if(t=$a(t)){if(typeof Ld!="function")throw Error(X(280));var e=t.stateNode;e&&(e=nc(e),Ld(t.stateNode,t.type,e))}}function py(t){ji?Di?Di.push(t):Di=[t]:ji=t}function my(){if(ji){var t=ji,e=Di;if(Di=ji=null,Tm(t),e)for(t=0;t<e.length;t++)Tm(e[t])}}function gy(t,e){return t(e)}function vy(){}var Wc=!1;function yy(t,e,n){if(Wc)return t(e,n);Wc=!0;try{return gy(t,e,n)}finally{Wc=!1,(ji!==null||Di!==null)&&(vy(),my())}}function ca(t,e){var n=t.stateNode;if(n===null)return null;var r=nc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Fd=!1;if(Dr)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){Fd=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{Fd=!1}function hT(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Go=!1,hu=null,fu=!1,Ud=null,fT={onError:function(t){Go=!0,hu=t}};function pT(t,e,n,r,s,i,o,u,c){Go=!1,hu=null,hT.apply(fT,arguments)}function mT(t,e,n,r,s,i,o,u,c){if(pT.apply(this,arguments),Go){if(Go){var h=hu;Go=!1,hu=null}else throw Error(X(198));fu||(fu=!0,Ud=h)}}function ri(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _y(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Im(t){if(ri(t)!==t)throw Error(X(188))}function gT(t){var e=t.alternate;if(!e){if(e=ri(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Im(s),t;if(i===r)return Im(s),e;i=i.sibling}throw Error(X(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function wy(t){return t=gT(t),t!==null?Ey(t):null}function Ey(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ey(t);if(e!==null)return e;t=t.sibling}return null}var Ty=Rn.unstable_scheduleCallback,Sm=Rn.unstable_cancelCallback,vT=Rn.unstable_shouldYield,yT=Rn.unstable_requestPaint,pt=Rn.unstable_now,_T=Rn.unstable_getCurrentPriorityLevel,rf=Rn.unstable_ImmediatePriority,Iy=Rn.unstable_UserBlockingPriority,pu=Rn.unstable_NormalPriority,wT=Rn.unstable_LowPriority,Sy=Rn.unstable_IdlePriority,Ju=null,ur=null;function ET(t){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(Ju,t,void 0,(t.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:ST,TT=Math.log,IT=Math.LN2;function ST(t){return t>>>=0,t===0?32:31-(TT(t)/IT|0)|0}var Sl=64,Al=4194304;function Fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Fo(u):(i&=o,i!==0&&(r=Fo(i)))}else o=n&~s,o!==0?r=Fo(o):i!==0&&(r=Fo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yn(e),s=1<<n,r|=t[n],e&=~s;return r}function AT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Yn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=AT(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Bd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ay(){var t=Sl;return Sl<<=1,!(Sl&4194240)&&(Sl=64),t}function Kc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ba(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yn(e),t[e]=n}function CT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Yn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function sf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ve=0;function xy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cy,of,Py,Ny,Ry,zd=!1,xl=[],os=null,as=null,ls=null,da=new Map,ha=new Map,Xr=[],PT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Am(t,e){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":da.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ha.delete(e.pointerId)}}function Po(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=$a(e),e!==null&&of(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function NT(t,e,n,r,s){switch(e){case"focusin":return os=Po(os,t,e,n,r,s),!0;case"dragenter":return as=Po(as,t,e,n,r,s),!0;case"mouseover":return ls=Po(ls,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return da.set(i,Po(da.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ha.set(i,Po(ha.get(i)||null,t,e,n,r,s)),!0}return!1}function ky(t){var e=Vs(t.target);if(e!==null){var n=ri(e);if(n!==null){if(e=n.tag,e===13){if(e=_y(n),e!==null){t.blockedOn=e,Ry(t.priority,function(){Py(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$d(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vd=r,n.target.dispatchEvent(r),Vd=null}else return e=$a(n),e!==null&&of(e),t.blockedOn=n,!1;e.shift()}return!0}function xm(t,e,n){Wl(t)&&n.delete(e)}function RT(){zd=!1,os!==null&&Wl(os)&&(os=null),as!==null&&Wl(as)&&(as=null),ls!==null&&Wl(ls)&&(ls=null),da.forEach(xm),ha.forEach(xm)}function No(t,e){t.blockedOn===e&&(t.blockedOn=null,zd||(zd=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,RT)))}function fa(t){function e(s){return No(s,t)}if(0<xl.length){No(xl[0],t);for(var n=1;n<xl.length;n++){var r=xl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(os!==null&&No(os,t),as!==null&&No(as,t),ls!==null&&No(ls,t),da.forEach(e),ha.forEach(e),n=0;n<Xr.length;n++)r=Xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xr.length&&(n=Xr[0],n.blockedOn===null);)ky(n),n.blockedOn===null&&Xr.shift()}var Mi=zr.ReactCurrentBatchConfig,gu=!0;function kT(t,e,n,r){var s=Ve,i=Mi.transition;Mi.transition=null;try{Ve=1,af(t,e,n,r)}finally{Ve=s,Mi.transition=i}}function jT(t,e,n,r){var s=Ve,i=Mi.transition;Mi.transition=null;try{Ve=4,af(t,e,n,r)}finally{Ve=s,Mi.transition=i}}function af(t,e,n,r){if(gu){var s=$d(t,e,n,r);if(s===null)rd(t,e,r,vu,n),Am(t,r);else if(NT(s,t,e,n,r))r.stopPropagation();else if(Am(t,r),e&4&&-1<PT.indexOf(t)){for(;s!==null;){var i=$a(s);if(i!==null&&Cy(i),i=$d(t,e,n,r),i===null&&rd(t,e,r,vu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else rd(t,e,r,null,n)}}var vu=null;function $d(t,e,n,r){if(vu=null,t=nf(r),t=Vs(t),t!==null)if(e=ri(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_y(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vu=t,null}function jy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_T()){case rf:return 1;case Iy:return 4;case pu:case wT:return 16;case Sy:return 536870912;default:return 16}default:return 16}}var rs=null,lf=null,Kl=null;function Dy(){if(Kl)return Kl;var t,e=lf,n=e.length,r,s="value"in rs?rs.value:rs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Kl=s.slice(t,1<r?1-r:void 0)}function Gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cl(){return!0}function Cm(){return!1}function jn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cl:Cm,this.isPropagationStopped=Cm,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),e}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uf=jn(ro),za=rt({},ro,{view:0,detail:0}),DT=jn(za),Gc,Qc,Ro,Zu=rt({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ro&&(Ro&&t.type==="mousemove"?(Gc=t.screenX-Ro.screenX,Qc=t.screenY-Ro.screenY):Qc=Gc=0,Ro=t),Gc)},movementY:function(t){return"movementY"in t?t.movementY:Qc}}),Pm=jn(Zu),MT=rt({},Zu,{dataTransfer:0}),OT=jn(MT),bT=rt({},za,{relatedTarget:0}),Yc=jn(bT),VT=rt({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),LT=jn(VT),FT=rt({},ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UT=jn(FT),BT=rt({},ro,{data:0}),Nm=jn(BT),zT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$T={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qT[t])?!!e[t]:!1}function cf(){return HT}var WT=rt({},za,{key:function(t){if(t.key){var e=zT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$T[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cf,charCode:function(t){return t.type==="keypress"?Gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KT=jn(WT),GT=rt({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rm=jn(GT),QT=rt({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cf}),YT=jn(QT),XT=rt({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),JT=jn(XT),ZT=rt({},Zu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eI=jn(ZT),tI=[9,13,27,32],df=Dr&&"CompositionEvent"in window,Qo=null;Dr&&"documentMode"in document&&(Qo=document.documentMode);var nI=Dr&&"TextEvent"in window&&!Qo,My=Dr&&(!df||Qo&&8<Qo&&11>=Qo),km=" ",jm=!1;function Oy(t,e){switch(t){case"keyup":return tI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function by(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wi=!1;function rI(t,e){switch(t){case"compositionend":return by(e);case"keypress":return e.which!==32?null:(jm=!0,km);case"textInput":return t=e.data,t===km&&jm?null:t;default:return null}}function sI(t,e){if(wi)return t==="compositionend"||!df&&Oy(t,e)?(t=Dy(),Kl=lf=rs=null,wi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return My&&e.locale!=="ko"?null:e.data;default:return null}}var iI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iI[t.type]:e==="textarea"}function Vy(t,e,n,r){py(r),e=yu(e,"onChange"),0<e.length&&(n=new uf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yo=null,pa=null;function oI(t){Gy(t,0)}function ec(t){var e=Ii(t);if(ay(e))return t}function aI(t,e){if(t==="change")return e}var Ly=!1;if(Dr){var Xc;if(Dr){var Jc="oninput"in document;if(!Jc){var Mm=document.createElement("div");Mm.setAttribute("oninput","return;"),Jc=typeof Mm.oninput=="function"}Xc=Jc}else Xc=!1;Ly=Xc&&(!document.documentMode||9<document.documentMode)}function Om(){Yo&&(Yo.detachEvent("onpropertychange",Fy),pa=Yo=null)}function Fy(t){if(t.propertyName==="value"&&ec(pa)){var e=[];Vy(e,pa,t,nf(t)),yy(oI,e)}}function lI(t,e,n){t==="focusin"?(Om(),Yo=e,pa=n,Yo.attachEvent("onpropertychange",Fy)):t==="focusout"&&Om()}function uI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ec(pa)}function cI(t,e){if(t==="click")return ec(e)}function dI(t,e){if(t==="input"||t==="change")return ec(e)}function hI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:hI;function ma(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ad.call(e,s)||!Jn(t[s],e[s]))return!1}return!0}function bm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vm(t,e){var n=bm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bm(n)}}function Uy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function By(){for(var t=window,e=du();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=du(t.document)}return e}function hf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fI(t){var e=By(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Uy(n.ownerDocument.documentElement,n)){if(r!==null&&hf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Vm(n,i);var o=Vm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pI=Dr&&"documentMode"in document&&11>=document.documentMode,Ei=null,qd=null,Xo=null,Hd=!1;function Lm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hd||Ei==null||Ei!==du(r)||(r=Ei,"selectionStart"in r&&hf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xo&&ma(Xo,r)||(Xo=r,r=yu(qd,"onSelect"),0<r.length&&(e=new uf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ei)))}function Pl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ti={animationend:Pl("Animation","AnimationEnd"),animationiteration:Pl("Animation","AnimationIteration"),animationstart:Pl("Animation","AnimationStart"),transitionend:Pl("Transition","TransitionEnd")},Zc={},zy={};Dr&&(zy=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function tc(t){if(Zc[t])return Zc[t];if(!Ti[t])return t;var e=Ti[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zy)return Zc[t]=e[n];return t}var $y=tc("animationend"),qy=tc("animationiteration"),Hy=tc("animationstart"),Wy=tc("transitionend"),Ky=new Map,Fm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(t,e){Ky.set(t,e),ni(e,[t])}for(var ed=0;ed<Fm.length;ed++){var td=Fm[ed],mI=td.toLowerCase(),gI=td[0].toUpperCase()+td.slice(1);Is(mI,"on"+gI)}Is($y,"onAnimationEnd");Is(qy,"onAnimationIteration");Is(Hy,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(Wy,"onTransitionEnd");zi("onMouseEnter",["mouseout","mouseover"]);zi("onMouseLeave",["mouseout","mouseover"]);zi("onPointerEnter",["pointerout","pointerover"]);zi("onPointerLeave",["pointerout","pointerover"]);ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function Um(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mT(r,e,void 0,t),t.currentTarget=null}function Gy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Um(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Um(s,u,h),i=c}}}if(fu)throw t=Ud,fu=!1,Ud=null,t}function Qe(t,e){var n=e[Yd];n===void 0&&(n=e[Yd]=new Set);var r=t+"__bubble";n.has(r)||(Qy(e,t,2,!1),n.add(r))}function nd(t,e,n){var r=0;e&&(r|=4),Qy(n,t,r,e)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function ga(t){if(!t[Nl]){t[Nl]=!0,ny.forEach(function(n){n!=="selectionchange"&&(vI.has(n)||nd(n,!1,t),nd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nl]||(e[Nl]=!0,nd("selectionchange",!1,e))}}function Qy(t,e,n,r){switch(jy(e)){case 1:var s=kT;break;case 4:s=jT;break;default:s=af}n=s.bind(null,e,n,t),s=void 0,!Fd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function rd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Vs(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}yy(function(){var h=i,p=nf(n),m=[];e:{var y=Ky.get(t);if(y!==void 0){var w=uf,N=t;switch(t){case"keypress":if(Gl(n)===0)break e;case"keydown":case"keyup":w=KT;break;case"focusin":N="focus",w=Yc;break;case"focusout":N="blur",w=Yc;break;case"beforeblur":case"afterblur":w=Yc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Pm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=OT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=YT;break;case $y:case qy:case Hy:w=LT;break;case Wy:w=JT;break;case"scroll":w=DT;break;case"wheel":w=eI;break;case"copy":case"cut":case"paste":w=UT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Rm}var O=(e&4)!==0,U=!O&&t==="scroll",x=O?y!==null?y+"Capture":null:y;O=[];for(var I=h,S;I!==null;){S=I;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,x!==null&&(b=ca(I,x),b!=null&&O.push(va(I,b,S)))),U)break;I=I.return}0<O.length&&(y=new w(y,N,null,n,p),m.push({event:y,listeners:O}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",y&&n!==Vd&&(N=n.relatedTarget||n.fromElement)&&(Vs(N)||N[Mr]))break e;if((w||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,w?(N=n.relatedTarget||n.toElement,w=h,N=N?Vs(N):null,N!==null&&(U=ri(N),N!==U||N.tag!==5&&N.tag!==6)&&(N=null)):(w=null,N=h),w!==N)){if(O=Pm,b="onMouseLeave",x="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(O=Rm,b="onPointerLeave",x="onPointerEnter",I="pointer"),U=w==null?y:Ii(w),S=N==null?y:Ii(N),y=new O(b,I+"leave",w,n,p),y.target=U,y.relatedTarget=S,b=null,Vs(p)===h&&(O=new O(x,I+"enter",N,n,p),O.target=S,O.relatedTarget=U,b=O),U=b,w&&N)t:{for(O=w,x=N,I=0,S=O;S;S=pi(S))I++;for(S=0,b=x;b;b=pi(b))S++;for(;0<I-S;)O=pi(O),I--;for(;0<S-I;)x=pi(x),S--;for(;I--;){if(O===x||x!==null&&O===x.alternate)break t;O=pi(O),x=pi(x)}O=null}else O=null;w!==null&&Bm(m,y,w,O,!1),N!==null&&U!==null&&Bm(m,U,N,O,!0)}}e:{if(y=h?Ii(h):window,w=y.nodeName&&y.nodeName.toLowerCase(),w==="select"||w==="input"&&y.type==="file")var P=aI;else if(Dm(y))if(Ly)P=dI;else{P=uI;var M=lI}else(w=y.nodeName)&&w.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(P=cI);if(P&&(P=P(t,h))){Vy(m,P,n,p);break e}M&&M(t,y,h),t==="focusout"&&(M=y._wrapperState)&&M.controlled&&y.type==="number"&&jd(y,"number",y.value)}switch(M=h?Ii(h):window,t){case"focusin":(Dm(M)||M.contentEditable==="true")&&(Ei=M,qd=h,Xo=null);break;case"focusout":Xo=qd=Ei=null;break;case"mousedown":Hd=!0;break;case"contextmenu":case"mouseup":case"dragend":Hd=!1,Lm(m,n,p);break;case"selectionchange":if(pI)break;case"keydown":case"keyup":Lm(m,n,p)}var g;if(df)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else wi?Oy(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(My&&n.locale!=="ko"&&(wi||v!=="onCompositionStart"?v==="onCompositionEnd"&&wi&&(g=Dy()):(rs=p,lf="value"in rs?rs.value:rs.textContent,wi=!0)),M=yu(h,v),0<M.length&&(v=new Nm(v,t,null,n,p),m.push({event:v,listeners:M}),g?v.data=g:(g=by(n),g!==null&&(v.data=g)))),(g=nI?rI(t,n):sI(t,n))&&(h=yu(h,"onBeforeInput"),0<h.length&&(p=new Nm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=g))}Gy(m,e)})}function va(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ca(t,n),i!=null&&r.unshift(va(t,i,s)),i=ca(t,e),i!=null&&r.push(va(t,i,s))),t=t.return}return r}function pi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=ca(n,i),c!=null&&o.unshift(va(n,c,u))):s||(c=ca(n,i),c!=null&&o.push(va(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yI=/\r\n?/g,_I=/\u0000|\uFFFD/g;function zm(t){return(typeof t=="string"?t:""+t).replace(yI,`
`).replace(_I,"")}function Rl(t,e,n){if(e=zm(e),zm(t)!==e&&n)throw Error(X(425))}function _u(){}var Wd=null,Kd=null;function Gd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qd=typeof setTimeout=="function"?setTimeout:void 0,wI=typeof clearTimeout=="function"?clearTimeout:void 0,$m=typeof Promise=="function"?Promise:void 0,EI=typeof queueMicrotask=="function"?queueMicrotask:typeof $m<"u"?function(t){return $m.resolve(null).then(t).catch(TI)}:Qd;function TI(t){setTimeout(function(){throw t})}function sd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);fa(e)}function us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var so=Math.random().toString(36).slice(2),ar="__reactFiber$"+so,ya="__reactProps$"+so,Mr="__reactContainer$"+so,Yd="__reactEvents$"+so,II="__reactListeners$"+so,SI="__reactHandles$"+so;function Vs(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qm(t);t!==null;){if(n=t[ar])return n;t=qm(t)}return e}t=n,n=t.parentNode}return null}function $a(t){return t=t[ar]||t[Mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ii(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function nc(t){return t[ya]||null}var Xd=[],Si=-1;function Ss(t){return{current:t}}function Xe(t){0>Si||(t.current=Xd[Si],Xd[Si]=null,Si--)}function qe(t,e){Si++,Xd[Si]=t.current,t.current=e}var ys={},Jt=Ss(ys),gn=Ss(!1),Hs=ys;function $i(t,e){var n=t.type.contextTypes;if(!n)return ys;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vn(t){return t=t.childContextTypes,t!=null}function wu(){Xe(gn),Xe(Jt)}function Hm(t,e,n){if(Jt.current!==ys)throw Error(X(168));qe(Jt,e),qe(gn,n)}function Yy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(X(108,lT(t)||"Unknown",s));return rt({},n,r)}function Eu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ys,Hs=Jt.current,qe(Jt,t),qe(gn,gn.current),!0}function Wm(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=Yy(t,e,Hs),r.__reactInternalMemoizedMergedChildContext=t,Xe(gn),Xe(Jt),qe(Jt,t)):Xe(gn),qe(gn,n)}var Ir=null,rc=!1,id=!1;function Xy(t){Ir===null?Ir=[t]:Ir.push(t)}function AI(t){rc=!0,Xy(t)}function As(){if(!id&&Ir!==null){id=!0;var t=0,e=Ve;try{var n=Ir;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ir=null,rc=!1}catch(s){throw Ir!==null&&(Ir=Ir.slice(t+1)),Ty(rf,As),s}finally{Ve=e,id=!1}}return null}var Ai=[],xi=0,Tu=null,Iu=0,bn=[],Vn=0,Ws=null,Sr=1,Ar="";function Ds(t,e){Ai[xi++]=Iu,Ai[xi++]=Tu,Tu=t,Iu=e}function Jy(t,e,n){bn[Vn++]=Sr,bn[Vn++]=Ar,bn[Vn++]=Ws,Ws=t;var r=Sr;t=Ar;var s=32-Yn(r)-1;r&=~(1<<s),n+=1;var i=32-Yn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Sr=1<<32-Yn(e)+s|n<<s|r,Ar=i+t}else Sr=1<<i|n<<s|r,Ar=t}function ff(t){t.return!==null&&(Ds(t,1),Jy(t,1,0))}function pf(t){for(;t===Tu;)Tu=Ai[--xi],Ai[xi]=null,Iu=Ai[--xi],Ai[xi]=null;for(;t===Ws;)Ws=bn[--Vn],bn[Vn]=null,Ar=bn[--Vn],bn[Vn]=null,Sr=bn[--Vn],bn[Vn]=null}var Pn=null,xn=null,et=!1,Qn=null;function Zy(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Km(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pn=t,xn=us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pn=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ws!==null?{id:Sr,overflow:Ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pn=t,xn=null,!0):!1;default:return!1}}function Jd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zd(t){if(et){var e=xn;if(e){var n=e;if(!Km(t,e)){if(Jd(t))throw Error(X(418));e=us(n.nextSibling);var r=Pn;e&&Km(t,e)?Zy(r,n):(t.flags=t.flags&-4097|2,et=!1,Pn=t)}}else{if(Jd(t))throw Error(X(418));t.flags=t.flags&-4097|2,et=!1,Pn=t}}}function Gm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pn=t}function kl(t){if(t!==Pn)return!1;if(!et)return Gm(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gd(t.type,t.memoizedProps)),e&&(e=xn)){if(Jd(t))throw e_(),Error(X(418));for(;e;)Zy(t,e),e=us(e.nextSibling)}if(Gm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xn=us(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=Pn?us(t.stateNode.nextSibling):null;return!0}function e_(){for(var t=xn;t;)t=us(t.nextSibling)}function qi(){xn=Pn=null,et=!1}function mf(t){Qn===null?Qn=[t]:Qn.push(t)}var xI=zr.ReactCurrentBatchConfig;function ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function jl(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qm(t){var e=t._init;return e(t._payload)}function t_(t){function e(x,I){if(t){var S=x.deletions;S===null?(x.deletions=[I],x.flags|=16):S.push(I)}}function n(x,I){if(!t)return null;for(;I!==null;)e(x,I),I=I.sibling;return null}function r(x,I){for(x=new Map;I!==null;)I.key!==null?x.set(I.key,I):x.set(I.index,I),I=I.sibling;return x}function s(x,I){return x=fs(x,I),x.index=0,x.sibling=null,x}function i(x,I,S){return x.index=S,t?(S=x.alternate,S!==null?(S=S.index,S<I?(x.flags|=2,I):S):(x.flags|=2,I)):(x.flags|=1048576,I)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function u(x,I,S,b){return I===null||I.tag!==6?(I=hd(S,x.mode,b),I.return=x,I):(I=s(I,S),I.return=x,I)}function c(x,I,S,b){var P=S.type;return P===_i?p(x,I,S.props.children,b,S.key):I!==null&&(I.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Qr&&Qm(P)===I.type)?(b=s(I,S.props),b.ref=ko(x,I,S),b.return=x,b):(b=tu(S.type,S.key,S.props,null,x.mode,b),b.ref=ko(x,I,S),b.return=x,b)}function h(x,I,S,b){return I===null||I.tag!==4||I.stateNode.containerInfo!==S.containerInfo||I.stateNode.implementation!==S.implementation?(I=fd(S,x.mode,b),I.return=x,I):(I=s(I,S.children||[]),I.return=x,I)}function p(x,I,S,b,P){return I===null||I.tag!==7?(I=$s(S,x.mode,b,P),I.return=x,I):(I=s(I,S),I.return=x,I)}function m(x,I,S){if(typeof I=="string"&&I!==""||typeof I=="number")return I=hd(""+I,x.mode,S),I.return=x,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case El:return S=tu(I.type,I.key,I.props,null,x.mode,S),S.ref=ko(x,null,I),S.return=x,S;case yi:return I=fd(I,x.mode,S),I.return=x,I;case Qr:var b=I._init;return m(x,b(I._payload),S)}if(Lo(I)||xo(I))return I=$s(I,x.mode,S,null),I.return=x,I;jl(x,I)}return null}function y(x,I,S,b){var P=I!==null?I.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return P!==null?null:u(x,I,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case El:return S.key===P?c(x,I,S,b):null;case yi:return S.key===P?h(x,I,S,b):null;case Qr:return P=S._init,y(x,I,P(S._payload),b)}if(Lo(S)||xo(S))return P!==null?null:p(x,I,S,b,null);jl(x,S)}return null}function w(x,I,S,b,P){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(S)||null,u(I,x,""+b,P);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case El:return x=x.get(b.key===null?S:b.key)||null,c(I,x,b,P);case yi:return x=x.get(b.key===null?S:b.key)||null,h(I,x,b,P);case Qr:var M=b._init;return w(x,I,S,M(b._payload),P)}if(Lo(b)||xo(b))return x=x.get(S)||null,p(I,x,b,P,null);jl(I,b)}return null}function N(x,I,S,b){for(var P=null,M=null,g=I,v=I=0,E=null;g!==null&&v<S.length;v++){g.index>v?(E=g,g=null):E=g.sibling;var A=y(x,g,S[v],b);if(A===null){g===null&&(g=E);break}t&&g&&A.alternate===null&&e(x,g),I=i(A,I,v),M===null?P=A:M.sibling=A,M=A,g=E}if(v===S.length)return n(x,g),et&&Ds(x,v),P;if(g===null){for(;v<S.length;v++)g=m(x,S[v],b),g!==null&&(I=i(g,I,v),M===null?P=g:M.sibling=g,M=g);return et&&Ds(x,v),P}for(g=r(x,g);v<S.length;v++)E=w(g,x,v,S[v],b),E!==null&&(t&&E.alternate!==null&&g.delete(E.key===null?v:E.key),I=i(E,I,v),M===null?P=E:M.sibling=E,M=E);return t&&g.forEach(function(R){return e(x,R)}),et&&Ds(x,v),P}function O(x,I,S,b){var P=xo(S);if(typeof P!="function")throw Error(X(150));if(S=P.call(S),S==null)throw Error(X(151));for(var M=P=null,g=I,v=I=0,E=null,A=S.next();g!==null&&!A.done;v++,A=S.next()){g.index>v?(E=g,g=null):E=g.sibling;var R=y(x,g,A.value,b);if(R===null){g===null&&(g=E);break}t&&g&&R.alternate===null&&e(x,g),I=i(R,I,v),M===null?P=R:M.sibling=R,M=R,g=E}if(A.done)return n(x,g),et&&Ds(x,v),P;if(g===null){for(;!A.done;v++,A=S.next())A=m(x,A.value,b),A!==null&&(I=i(A,I,v),M===null?P=A:M.sibling=A,M=A);return et&&Ds(x,v),P}for(g=r(x,g);!A.done;v++,A=S.next())A=w(g,x,v,A.value,b),A!==null&&(t&&A.alternate!==null&&g.delete(A.key===null?v:A.key),I=i(A,I,v),M===null?P=A:M.sibling=A,M=A);return t&&g.forEach(function(k){return e(x,k)}),et&&Ds(x,v),P}function U(x,I,S,b){if(typeof S=="object"&&S!==null&&S.type===_i&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case El:e:{for(var P=S.key,M=I;M!==null;){if(M.key===P){if(P=S.type,P===_i){if(M.tag===7){n(x,M.sibling),I=s(M,S.props.children),I.return=x,x=I;break e}}else if(M.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Qr&&Qm(P)===M.type){n(x,M.sibling),I=s(M,S.props),I.ref=ko(x,M,S),I.return=x,x=I;break e}n(x,M);break}else e(x,M);M=M.sibling}S.type===_i?(I=$s(S.props.children,x.mode,b,S.key),I.return=x,x=I):(b=tu(S.type,S.key,S.props,null,x.mode,b),b.ref=ko(x,I,S),b.return=x,x=b)}return o(x);case yi:e:{for(M=S.key;I!==null;){if(I.key===M)if(I.tag===4&&I.stateNode.containerInfo===S.containerInfo&&I.stateNode.implementation===S.implementation){n(x,I.sibling),I=s(I,S.children||[]),I.return=x,x=I;break e}else{n(x,I);break}else e(x,I);I=I.sibling}I=fd(S,x.mode,b),I.return=x,x=I}return o(x);case Qr:return M=S._init,U(x,I,M(S._payload),b)}if(Lo(S))return N(x,I,S,b);if(xo(S))return O(x,I,S,b);jl(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,I!==null&&I.tag===6?(n(x,I.sibling),I=s(I,S),I.return=x,x=I):(n(x,I),I=hd(S,x.mode,b),I.return=x,x=I),o(x)):n(x,I)}return U}var Hi=t_(!0),n_=t_(!1),Su=Ss(null),Au=null,Ci=null,gf=null;function vf(){gf=Ci=Au=null}function yf(t){var e=Su.current;Xe(Su),t._currentValue=e}function eh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Oi(t,e){Au=t,gf=Ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function Bn(t){var e=t._currentValue;if(gf!==t)if(t={context:t,memoizedValue:e,next:null},Ci===null){if(Au===null)throw Error(X(308));Ci=t,Au.dependencies={lanes:0,firstContext:t}}else Ci=Ci.next=t;return e}var Ls=null;function _f(t){Ls===null?Ls=[t]:Ls.push(t)}function r_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_f(e)):(n.next=s.next,s.next=n),e.interleaved=n,Or(t,r)}function Or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yr=!1;function wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Or(t,n)}return s=r.interleaved,s===null?(e.next=e,_f(r)):(e.next=s.next,s.next=e),r.interleaved=e,Or(t,n)}function Ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sf(t,n)}}function Ym(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xu(t,e,n,r){var s=t.updateQueue;Yr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==o&&(u===null?p.firstBaseUpdate=h:u.next=h,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=h=c=null,u=i;do{var y=u.lane,w=u.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:w,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=t,O=u;switch(y=e,w=n,O.tag){case 1:if(N=O.payload,typeof N=="function"){m=N.call(w,m,y);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=O.payload,y=typeof N=="function"?N.call(w,m,y):N,y==null)break e;m=rt({},m,y);break e;case 2:Yr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[u]:y.push(u))}else w={eventTime:w,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(h=p=w,c=m):p=p.next=w,o|=y;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;y=u,u=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Gs|=o,t.lanes=o,t.memoizedState=m}}function Xm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(X(191,s));s.call(r)}}}var qa={},cr=Ss(qa),_a=Ss(qa),wa=Ss(qa);function Fs(t){if(t===qa)throw Error(X(174));return t}function Ef(t,e){switch(qe(wa,e),qe(_a,t),qe(cr,qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Md(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Md(e,t)}Xe(cr),qe(cr,e)}function Wi(){Xe(cr),Xe(_a),Xe(wa)}function i_(t){Fs(wa.current);var e=Fs(cr.current),n=Md(e,t.type);e!==n&&(qe(_a,t),qe(cr,n))}function Tf(t){_a.current===t&&(Xe(cr),Xe(_a))}var tt=Ss(0);function Cu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var od=[];function If(){for(var t=0;t<od.length;t++)od[t]._workInProgressVersionPrimary=null;od.length=0}var Yl=zr.ReactCurrentDispatcher,ad=zr.ReactCurrentBatchConfig,Ks=0,nt=null,Tt=null,Rt=null,Pu=!1,Jo=!1,Ea=0,CI=0;function Ht(){throw Error(X(321))}function Sf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jn(t[n],e[n]))return!1;return!0}function Af(t,e,n,r,s,i){if(Ks=i,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=t===null||t.memoizedState===null?kI:jI,t=n(r,s),Jo){i=0;do{if(Jo=!1,Ea=0,25<=i)throw Error(X(301));i+=1,Rt=Tt=null,e.updateQueue=null,Yl.current=DI,t=n(r,s)}while(Jo)}if(Yl.current=Nu,e=Tt!==null&&Tt.next!==null,Ks=0,Rt=Tt=nt=null,Pu=!1,e)throw Error(X(300));return t}function xf(){var t=Ea!==0;return Ea=0,t}function or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?nt.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function zn(){if(Tt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=Rt===null?nt.memoizedState:Rt.next;if(e!==null)Rt=e,Tt=t;else{if(t===null)throw Error(X(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Rt===null?nt.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Ta(t,e){return typeof e=="function"?e(t):e}function ld(t){var e=zn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=Tt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var p=h.lane;if((Ks&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=m,o=r):c=c.next=m,nt.lanes|=p,Gs|=p}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,Jn(r,e.memoizedState)||(mn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,nt.lanes|=i,Gs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ud(t){var e=zn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Jn(i,e.memoizedState)||(mn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function o_(){}function a_(t,e){var n=nt,r=zn(),s=e(),i=!Jn(r.memoizedState,s);if(i&&(r.memoizedState=s,mn=!0),r=r.queue,Cf(c_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Ia(9,u_.bind(null,n,r,s,e),void 0,null),kt===null)throw Error(X(349));Ks&30||l_(n,e,s)}return s}function l_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function u_(t,e,n,r){e.value=n,e.getSnapshot=r,d_(e)&&h_(t)}function c_(t,e,n){return n(function(){d_(e)&&h_(t)})}function d_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jn(t,n)}catch{return!0}}function h_(t){var e=Or(t,1);e!==null&&Xn(e,t,1,-1)}function Jm(t){var e=or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:t},e.queue=t,t=t.dispatch=RI.bind(null,nt,t),[e.memoizedState,t]}function Ia(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function f_(){return zn().memoizedState}function Xl(t,e,n,r){var s=or();nt.flags|=t,s.memoizedState=Ia(1|e,n,void 0,r===void 0?null:r)}function sc(t,e,n,r){var s=zn();r=r===void 0?null:r;var i=void 0;if(Tt!==null){var o=Tt.memoizedState;if(i=o.destroy,r!==null&&Sf(r,o.deps)){s.memoizedState=Ia(e,n,i,r);return}}nt.flags|=t,s.memoizedState=Ia(1|e,n,i,r)}function Zm(t,e){return Xl(8390656,8,t,e)}function Cf(t,e){return sc(2048,8,t,e)}function p_(t,e){return sc(4,2,t,e)}function m_(t,e){return sc(4,4,t,e)}function g_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function v_(t,e,n){return n=n!=null?n.concat([t]):null,sc(4,4,g_.bind(null,e,t),n)}function Pf(){}function y_(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function __(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function w_(t,e,n){return Ks&21?(Jn(n,e)||(n=Ay(),nt.lanes|=n,Gs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function PI(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=ad.transition;ad.transition={};try{t(!1),e()}finally{Ve=n,ad.transition=r}}function E_(){return zn().memoizedState}function NI(t,e,n){var r=hs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},T_(t))I_(e,n);else if(n=r_(t,e,n,r),n!==null){var s=an();Xn(n,t,r,s),S_(n,e,r)}}function RI(t,e,n){var r=hs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(T_(t))I_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,Jn(u,o)){var c=e.interleaved;c===null?(s.next=s,_f(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=r_(t,e,s,r),n!==null&&(s=an(),Xn(n,t,r,s),S_(n,e,r))}}function T_(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function I_(t,e){Jo=Pu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function S_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sf(t,n)}}var Nu={readContext:Bn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},kI={readContext:Bn,useCallback:function(t,e){return or().memoizedState=[t,e===void 0?null:e],t},useContext:Bn,useEffect:Zm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xl(4194308,4,g_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xl(4,2,t,e)},useMemo:function(t,e){var n=or();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=or();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=NI.bind(null,nt,t),[r.memoizedState,t]},useRef:function(t){var e=or();return t={current:t},e.memoizedState=t},useState:Jm,useDebugValue:Pf,useDeferredValue:function(t){return or().memoizedState=t},useTransition:function(){var t=Jm(!1),e=t[0];return t=PI.bind(null,t[1]),or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=nt,s=or();if(et){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),kt===null)throw Error(X(349));Ks&30||l_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Zm(c_.bind(null,r,i,t),[t]),r.flags|=2048,Ia(9,u_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=or(),e=kt.identifierPrefix;if(et){var n=Ar,r=Sr;n=(r&~(1<<32-Yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ea++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jI={readContext:Bn,useCallback:y_,useContext:Bn,useEffect:Cf,useImperativeHandle:v_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:__,useReducer:ld,useRef:f_,useState:function(){return ld(Ta)},useDebugValue:Pf,useDeferredValue:function(t){var e=zn();return w_(e,Tt.memoizedState,t)},useTransition:function(){var t=ld(Ta)[0],e=zn().memoizedState;return[t,e]},useMutableSource:o_,useSyncExternalStore:a_,useId:E_,unstable_isNewReconciler:!1},DI={readContext:Bn,useCallback:y_,useContext:Bn,useEffect:Cf,useImperativeHandle:v_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:__,useReducer:ud,useRef:f_,useState:function(){return ud(Ta)},useDebugValue:Pf,useDeferredValue:function(t){var e=zn();return Tt===null?e.memoizedState=t:w_(e,Tt.memoizedState,t)},useTransition:function(){var t=ud(Ta)[0],e=zn().memoizedState;return[t,e]},useMutableSource:o_,useSyncExternalStore:a_,useId:E_,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function th(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ic={isMounted:function(t){return(t=t._reactInternals)?ri(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=an(),s=hs(t),i=Rr(r,s);i.payload=e,n!=null&&(i.callback=n),e=cs(t,i,s),e!==null&&(Xn(e,t,s,r),Ql(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=an(),s=hs(t),i=Rr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=cs(t,i,s),e!==null&&(Xn(e,t,s,r),Ql(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),r=hs(t),s=Rr(n,r);s.tag=2,e!=null&&(s.callback=e),e=cs(t,s,r),e!==null&&(Xn(e,t,r,n),Ql(e,t,r))}};function eg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ma(n,r)||!ma(s,i):!0}function A_(t,e,n){var r=!1,s=ys,i=e.contextType;return typeof i=="object"&&i!==null?i=Bn(i):(s=vn(e)?Hs:Jt.current,r=e.contextTypes,i=(r=r!=null)?$i(t,s):ys),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ic,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function tg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ic.enqueueReplaceState(e,e.state,null)}function nh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},wf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Bn(i):(i=vn(e)?Hs:Jt.current,s.context=$i(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(th(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ic.enqueueReplaceState(s,s.state,null),xu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ki(t,e){try{var n="",r=e;do n+=aT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function cd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var MI=typeof WeakMap=="function"?WeakMap:Map;function x_(t,e,n){n=Rr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ku||(ku=!0,fh=r),rh(t,e)},n}function C_(t,e,n){n=Rr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){rh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){rh(t,e),typeof r!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ng(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new MI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=GI.bind(null,t,e,n),e.then(t,t))}function rg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rr(-1,1),e.tag=2,cs(n,e,1))),n.lanes|=1),t)}var OI=zr.ReactCurrentOwner,mn=!1;function on(t,e,n,r){e.child=t===null?n_(e,null,n,r):Hi(e,t.child,n,r)}function ig(t,e,n,r,s){n=n.render;var i=e.ref;return Oi(e,s),r=Af(t,e,n,r,i,s),n=xf(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,br(t,e,s)):(et&&n&&ff(e),e.flags|=1,on(t,e,r,s),e.child)}function og(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!bf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,P_(t,e,i,r,s)):(t=tu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ma,n(o,r)&&t.ref===e.ref)return br(t,e,s)}return e.flags|=1,t=fs(i,r),t.ref=e.ref,t.return=e,e.child=t}function P_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ma(i,r)&&t.ref===e.ref)if(mn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,br(t,e,s)}return sh(t,e,n,r,s)}function N_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Ni,Sn),Sn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(Ni,Sn),Sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,qe(Ni,Sn),Sn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,qe(Ni,Sn),Sn|=r;return on(t,e,s,n),e.child}function R_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sh(t,e,n,r,s){var i=vn(n)?Hs:Jt.current;return i=$i(e,i),Oi(e,s),n=Af(t,e,n,r,i,s),r=xf(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,br(t,e,s)):(et&&r&&ff(e),e.flags|=1,on(t,e,n,s),e.child)}function ag(t,e,n,r,s){if(vn(n)){var i=!0;Eu(e)}else i=!1;if(Oi(e,s),e.stateNode===null)Jl(t,e),A_(e,n,r),nh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Bn(h):(h=vn(n)?Hs:Jt.current,h=$i(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&tg(e,o,r,h),Yr=!1;var y=e.memoizedState;o.state=y,xu(e,r,o,s),c=e.memoizedState,u!==r||y!==c||gn.current||Yr?(typeof p=="function"&&(th(e,n,p,r),c=e.memoizedState),(u=Yr||eg(e,n,u,r,y,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,s_(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Kn(e.type,u),o.props=h,m=e.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Bn(c):(c=vn(n)?Hs:Jt.current,c=$i(e,c));var w=n.getDerivedStateFromProps;(p=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==m||y!==c)&&tg(e,o,r,c),Yr=!1,y=e.memoizedState,o.state=y,xu(e,r,o,s);var N=e.memoizedState;u!==m||y!==N||gn.current||Yr?(typeof w=="function"&&(th(e,n,w,r),N=e.memoizedState),(h=Yr||eg(e,n,h,r,y,N,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return ih(t,e,n,r,i,s)}function ih(t,e,n,r,s,i){R_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Wm(e,n,!1),br(t,e,i);r=e.stateNode,OI.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Hi(e,t.child,null,i),e.child=Hi(e,null,u,i)):on(t,e,u,i),e.memoizedState=r.state,s&&Wm(e,n,!0),e.child}function k_(t){var e=t.stateNode;e.pendingContext?Hm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hm(t,e.context,!1),Ef(t,e.containerInfo)}function lg(t,e,n,r,s){return qi(),mf(s),e.flags|=256,on(t,e,n,r),e.child}var oh={dehydrated:null,treeContext:null,retryLane:0};function ah(t){return{baseLanes:t,cachePool:null,transitions:null}}function j_(t,e,n){var r=e.pendingProps,s=tt.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),qe(tt,s&1),t===null)return Zd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=lc(o,r,0,null),t=$s(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ah(n),e.memoizedState=oh,t):Nf(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return bI(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=fs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=fs(u,i):(i=$s(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ah(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=oh,r}return i=t.child,t=i.sibling,r=fs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Nf(t,e){return e=lc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dl(t,e,n,r){return r!==null&&mf(r),Hi(e,t.child,null,n),t=Nf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=cd(Error(X(422))),Dl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=lc({mode:"visible",children:r.children},s,0,null),i=$s(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Hi(e,t.child,null,o),e.child.memoizedState=ah(o),e.memoizedState=oh,i);if(!(e.mode&1))return Dl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(X(419)),r=cd(i,r,void 0),Dl(t,e,o,r)}if(u=(o&t.childLanes)!==0,mn||u){if(r=kt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Or(t,s),Xn(r,t,s,-1))}return Of(),r=cd(Error(X(421))),Dl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=QI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,xn=us(s.nextSibling),Pn=e,et=!0,Qn=null,t!==null&&(bn[Vn++]=Sr,bn[Vn++]=Ar,bn[Vn++]=Ws,Sr=t.id,Ar=t.overflow,Ws=e),e=Nf(e,r.children),e.flags|=4096,e)}function ug(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),eh(t.return,e,n)}function dd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function D_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(on(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ug(t,n,e);else if(t.tag===19)ug(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(qe(tt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Cu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),dd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Cu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}dd(e,!0,n,null,i);break;case"together":dd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function VI(t,e,n){switch(e.tag){case 3:k_(e),qi();break;case 5:i_(e);break;case 1:vn(e.type)&&Eu(e);break;case 4:Ef(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;qe(Su,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(qe(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?j_(t,e,n):(qe(tt,tt.current&1),t=br(t,e,n),t!==null?t.sibling:null);qe(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return D_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),qe(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,N_(t,e,n)}return br(t,e,n)}var M_,lh,O_,b_;M_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lh=function(){};O_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Fs(cr.current);var i=null;switch(n){case"input":s=Rd(t,s),r=Rd(t,r),i=[];break;case"select":s=rt({},s,{value:void 0}),r=rt({},r,{value:void 0}),i=[];break;case"textarea":s=Dd(t,s),r=Dd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_u)}Od(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(la.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(la.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Qe("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};b_=function(t,e,n,r){n!==r&&(e.flags|=4)};function jo(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LI(t,e,n){var r=e.pendingProps;switch(pf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return vn(e.type)&&wu(),Wt(e),null;case 3:return r=e.stateNode,Wi(),Xe(gn),Xe(Jt),If(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(kl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(gh(Qn),Qn=null))),lh(t,e),Wt(e),null;case 5:Tf(e);var s=Fs(wa.current);if(n=e.type,t!==null&&e.stateNode!=null)O_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Wt(e),null}if(t=Fs(cr.current),kl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ar]=e,r[ya]=i,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(s=0;s<Uo.length;s++)Qe(Uo[s],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":ym(r,i),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Qe("invalid",r);break;case"textarea":wm(r,i),Qe("invalid",r)}Od(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Rl(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Rl(r.textContent,u,t),s=["children",""+u]):la.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Qe("scroll",r)}switch(n){case"input":Tl(r),_m(r,i,!0);break;case"textarea":Tl(r),Em(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_u)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ar]=e,t[ya]=r,M_(t,e,!1,!1),e.stateNode=t;e:{switch(o=bd(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),s=r;break;case"iframe":case"object":case"embed":Qe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Uo.length;s++)Qe(Uo[s],t);s=r;break;case"source":Qe("error",t),s=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),s=r;break;case"details":Qe("toggle",t),s=r;break;case"input":ym(t,r),s=Rd(t,r),Qe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=rt({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":wm(t,r),s=Dd(t,r),Qe("invalid",t);break;default:s=r}Od(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?fy(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dy(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ua(t,c):typeof c=="number"&&ua(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(la.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Qe("scroll",t):c!=null&&Jh(t,i,c,o))}switch(n){case"input":Tl(t),_m(t,r,!1);break;case"textarea":Tl(t),Em(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ki(t,!!r.multiple,i,!1):r.defaultValue!=null&&ki(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_u)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)b_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=Fs(wa.current),Fs(cr.current),kl(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(i=r.nodeValue!==n)&&(t=Pn,t!==null))switch(t.tag){case 3:Rl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return Wt(e),null;case 13:if(Xe(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&xn!==null&&e.mode&1&&!(e.flags&128))e_(),qi(),e.flags|=98560,i=!1;else if(i=kl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[ar]=e}else qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),i=!1}else Qn!==null&&(gh(Qn),Qn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?It===0&&(It=3):Of())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return Wi(),lh(t,e),t===null&&ga(e.stateNode.containerInfo),Wt(e),null;case 10:return yf(e.type._context),Wt(e),null;case 17:return vn(e.type)&&wu(),Wt(e),null;case 19:if(Xe(tt),i=e.memoizedState,i===null)return Wt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)jo(i,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cu(t),o!==null){for(e.flags|=128,jo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qe(tt,tt.current&1|2),e.child}t=t.sibling}i.tail!==null&&pt()>Gi&&(e.flags|=128,r=!0,jo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Cu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!et)return Wt(e),null}else 2*pt()-i.renderingStartTime>Gi&&n!==1073741824&&(e.flags|=128,r=!0,jo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pt(),e.sibling=null,n=tt.current,qe(tt,r?n&1|2:n&1),e):(Wt(e),null);case 22:case 23:return Mf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Sn&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function FI(t,e){switch(pf(e),e.tag){case 1:return vn(e.type)&&wu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wi(),Xe(gn),Xe(Jt),If(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tf(e),null;case 13:if(Xe(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(tt),null;case 4:return Wi(),null;case 10:return yf(e.type._context),null;case 22:case 23:return Mf(),null;case 24:return null;default:return null}}var Ml=!1,Qt=!1,UI=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Pi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ct(t,e,r)}else n.current=null}function uh(t,e,n){try{n()}catch(r){ct(t,e,r)}}var cg=!1;function BI(t,e){if(Wd=gu,t=By(),hf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,p=0,m=t,y=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(u=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(w=m.firstChild)!==null;)y=m,m=w;for(;;){if(m===t)break t;if(y===n&&++h===s&&(u=o),y===i&&++p===r&&(c=o),(w=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=w}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kd={focusedElem:t,selectionRange:n},gu=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var O=N.memoizedProps,U=N.memoizedState,x=e.stateNode,I=x.getSnapshotBeforeUpdate(e.elementType===e.type?O:Kn(e.type,O),U);x.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(b){ct(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return N=cg,cg=!1,N}function Zo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&uh(e,n,i)}s=s.next}while(s!==r)}}function oc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ch(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function V_(t){var e=t.alternate;e!==null&&(t.alternate=null,V_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[ya],delete e[Yd],delete e[II],delete e[SI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function L_(t){return t.tag===5||t.tag===3||t.tag===4}function dg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_u));else if(r!==4&&(t=t.child,t!==null))for(dh(t,e,n),t=t.sibling;t!==null;)dh(t,e,n),t=t.sibling}function hh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hh(t,e,n),t=t.sibling;t!==null;)hh(t,e,n),t=t.sibling}var Mt=null,Gn=!1;function Kr(t,e,n){for(n=n.child;n!==null;)F_(t,e,n),n=n.sibling}function F_(t,e,n){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(Ju,n)}catch{}switch(n.tag){case 5:Qt||Pi(n,e);case 6:var r=Mt,s=Gn;Mt=null,Kr(t,e,n),Mt=r,Gn=s,Mt!==null&&(Gn?(t=Mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mt.removeChild(n.stateNode));break;case 18:Mt!==null&&(Gn?(t=Mt,n=n.stateNode,t.nodeType===8?sd(t.parentNode,n):t.nodeType===1&&sd(t,n),fa(t)):sd(Mt,n.stateNode));break;case 4:r=Mt,s=Gn,Mt=n.stateNode.containerInfo,Gn=!0,Kr(t,e,n),Mt=r,Gn=s;break;case 0:case 11:case 14:case 15:if(!Qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&uh(n,e,o),s=s.next}while(s!==r)}Kr(t,e,n);break;case 1:if(!Qt&&(Pi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){ct(n,e,u)}Kr(t,e,n);break;case 21:Kr(t,e,n);break;case 22:n.mode&1?(Qt=(r=Qt)||n.memoizedState!==null,Kr(t,e,n),Qt=r):Kr(t,e,n);break;default:Kr(t,e,n)}}function hg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UI),e.forEach(function(r){var s=YI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Mt=u.stateNode,Gn=!1;break e;case 3:Mt=u.stateNode.containerInfo,Gn=!0;break e;case 4:Mt=u.stateNode.containerInfo,Gn=!0;break e}u=u.return}if(Mt===null)throw Error(X(160));F_(i,o,s),Mt=null,Gn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){ct(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U_(e,t),e=e.sibling}function U_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),ir(t),r&4){try{Zo(3,t,t.return),oc(3,t)}catch(O){ct(t,t.return,O)}try{Zo(5,t,t.return)}catch(O){ct(t,t.return,O)}}break;case 1:Wn(e,t),ir(t),r&512&&n!==null&&Pi(n,n.return);break;case 5:if(Wn(e,t),ir(t),r&512&&n!==null&&Pi(n,n.return),t.flags&32){var s=t.stateNode;try{ua(s,"")}catch(O){ct(t,t.return,O)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&ly(s,i),bd(u,o);var h=bd(u,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?fy(s,m):p==="dangerouslySetInnerHTML"?dy(s,m):p==="children"?ua(s,m):Jh(s,p,m,h)}switch(u){case"input":kd(s,i);break;case"textarea":uy(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?ki(s,!!i.multiple,w,!1):y!==!!i.multiple&&(i.defaultValue!=null?ki(s,!!i.multiple,i.defaultValue,!0):ki(s,!!i.multiple,i.multiple?[]:"",!1))}s[ya]=i}catch(O){ct(t,t.return,O)}}break;case 6:if(Wn(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(X(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(O){ct(t,t.return,O)}}break;case 3:if(Wn(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fa(e.containerInfo)}catch(O){ct(t,t.return,O)}break;case 4:Wn(e,t),ir(t);break;case 13:Wn(e,t),ir(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(jf=pt())),r&4&&hg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(h=Qt)||p,Wn(e,t),Qt=h):Wn(e,t),ir(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(ae=t,p=t.child;p!==null;){for(m=ae=p;ae!==null;){switch(y=ae,w=y.child,y.tag){case 0:case 11:case 14:case 15:Zo(4,y,y.return);break;case 1:Pi(y,y.return);var N=y.stateNode;if(typeof N.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(O){ct(r,n,O)}}break;case 5:Pi(y,y.return);break;case 22:if(y.memoizedState!==null){pg(m);continue}}w!==null?(w.return=y,ae=w):pg(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=hy("display",o))}catch(O){ct(t,t.return,O)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(O){ct(t,t.return,O)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Wn(e,t),ir(t),r&4&&hg(t);break;case 21:break;default:Wn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(L_(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ua(s,""),r.flags&=-33);var i=dg(t);hh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=dg(t);dh(t,u,o);break;default:throw Error(X(161))}}catch(c){ct(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zI(t,e,n){ae=t,B_(t)}function B_(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var s=ae,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ml;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||Qt;u=Ml;var h=Qt;if(Ml=o,(Qt=c)&&!h)for(ae=s;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?mg(s):c!==null?(c.return=o,ae=c):mg(s);for(;i!==null;)ae=i,B_(i),i=i.sibling;ae=s,Ml=u,Qt=h}fg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ae=i):fg(t)}}function fg(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||oc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Xm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xm(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&fa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Qt||e.flags&512&&ch(e)}catch(y){ct(e,e.return,y)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function pg(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function mg(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{oc(4,e)}catch(c){ct(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ct(e,s,c)}}var i=e.return;try{ch(e)}catch(c){ct(e,i,c)}break;case 5:var o=e.return;try{ch(e)}catch(c){ct(e,o,c)}}}catch(c){ct(e,e.return,c)}if(e===t){ae=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ae=u;break}ae=e.return}}var $I=Math.ceil,Ru=zr.ReactCurrentDispatcher,Rf=zr.ReactCurrentOwner,Fn=zr.ReactCurrentBatchConfig,je=0,kt=null,_t=null,Vt=0,Sn=0,Ni=Ss(0),It=0,Sa=null,Gs=0,ac=0,kf=0,ea=null,fn=null,jf=0,Gi=1/0,Tr=null,ku=!1,fh=null,ds=null,Ol=!1,ss=null,ju=0,ta=0,ph=null,Zl=-1,eu=0;function an(){return je&6?pt():Zl!==-1?Zl:Zl=pt()}function hs(t){return t.mode&1?je&2&&Vt!==0?Vt&-Vt:xI.transition!==null?(eu===0&&(eu=Ay()),eu):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:jy(t.type)),t):1}function Xn(t,e,n,r){if(50<ta)throw ta=0,ph=null,Error(X(185));Ba(t,n,r),(!(je&2)||t!==kt)&&(t===kt&&(!(je&2)&&(ac|=n),It===4&&Jr(t,Vt)),yn(t,r),n===1&&je===0&&!(e.mode&1)&&(Gi=pt()+500,rc&&As()))}function yn(t,e){var n=t.callbackNode;xT(t,e);var r=mu(t,t===kt?Vt:0);if(r===0)n!==null&&Sm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Sm(n),e===1)t.tag===0?AI(gg.bind(null,t)):Xy(gg.bind(null,t)),EI(function(){!(je&6)&&As()}),n=null;else{switch(xy(r)){case 1:n=rf;break;case 4:n=Iy;break;case 16:n=pu;break;case 536870912:n=Sy;break;default:n=pu}n=Q_(n,z_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function z_(t,e){if(Zl=-1,eu=0,je&6)throw Error(X(327));var n=t.callbackNode;if(bi()&&t.callbackNode!==n)return null;var r=mu(t,t===kt?Vt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Du(t,r);else{e=r;var s=je;je|=2;var i=q_();(kt!==t||Vt!==e)&&(Tr=null,Gi=pt()+500,zs(t,e));do try{WI();break}catch(u){$_(t,u)}while(!0);vf(),Ru.current=i,je=s,_t!==null?e=0:(kt=null,Vt=0,e=It)}if(e!==0){if(e===2&&(s=Bd(t),s!==0&&(r=s,e=mh(t,s))),e===1)throw n=Sa,zs(t,0),Jr(t,r),yn(t,pt()),n;if(e===6)Jr(t,r);else{if(s=t.current.alternate,!(r&30)&&!qI(s)&&(e=Du(t,r),e===2&&(i=Bd(t),i!==0&&(r=i,e=mh(t,i))),e===1))throw n=Sa,zs(t,0),Jr(t,r),yn(t,pt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Ms(t,fn,Tr);break;case 3:if(Jr(t,r),(r&130023424)===r&&(e=jf+500-pt(),10<e)){if(mu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){an(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Qd(Ms.bind(null,t,fn,Tr),e);break}Ms(t,fn,Tr);break;case 4:if(Jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Yn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$I(r/1960))-r,10<r){t.timeoutHandle=Qd(Ms.bind(null,t,fn,Tr),r);break}Ms(t,fn,Tr);break;case 5:Ms(t,fn,Tr);break;default:throw Error(X(329))}}}return yn(t,pt()),t.callbackNode===n?z_.bind(null,t):null}function mh(t,e){var n=ea;return t.current.memoizedState.isDehydrated&&(zs(t,e).flags|=256),t=Du(t,e),t!==2&&(e=fn,fn=n,e!==null&&gh(e)),t}function gh(t){fn===null?fn=t:fn.push.apply(fn,t)}function qI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Jn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jr(t,e){for(e&=~kf,e&=~ac,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yn(e),r=1<<n;t[n]=-1,e&=~r}}function gg(t){if(je&6)throw Error(X(327));bi();var e=mu(t,0);if(!(e&1))return yn(t,pt()),null;var n=Du(t,e);if(t.tag!==0&&n===2){var r=Bd(t);r!==0&&(e=r,n=mh(t,r))}if(n===1)throw n=Sa,zs(t,0),Jr(t,e),yn(t,pt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ms(t,fn,Tr),yn(t,pt()),null}function Df(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(Gi=pt()+500,rc&&As())}}function Qs(t){ss!==null&&ss.tag===0&&!(je&6)&&bi();var e=je;je|=1;var n=Fn.transition,r=Ve;try{if(Fn.transition=null,Ve=1,t)return t()}finally{Ve=r,Fn.transition=n,je=e,!(je&6)&&As()}}function Mf(){Sn=Ni.current,Xe(Ni)}function zs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wI(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(pf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wu();break;case 3:Wi(),Xe(gn),Xe(Jt),If();break;case 5:Tf(r);break;case 4:Wi();break;case 13:Xe(tt);break;case 19:Xe(tt);break;case 10:yf(r.type._context);break;case 22:case 23:Mf()}n=n.return}if(kt=t,_t=t=fs(t.current,null),Vt=Sn=e,It=0,Sa=null,kf=ac=Gs=0,fn=ea=null,Ls!==null){for(e=0;e<Ls.length;e++)if(n=Ls[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ls=null}return t}function $_(t,e){do{var n=_t;try{if(vf(),Yl.current=Nu,Pu){for(var r=nt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pu=!1}if(Ks=0,Rt=Tt=nt=null,Jo=!1,Ea=0,Rf.current=null,n===null||n.return===null){It=1,Sa=e,_t=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=Vt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var w=rg(o);if(w!==null){w.flags&=-257,sg(w,o,u,i,e),w.mode&1&&ng(i,h,e),e=w,c=h;var N=e.updateQueue;if(N===null){var O=new Set;O.add(c),e.updateQueue=O}else N.add(c);break e}else{if(!(e&1)){ng(i,h,e),Of();break e}c=Error(X(426))}}else if(et&&u.mode&1){var U=rg(o);if(U!==null){!(U.flags&65536)&&(U.flags|=256),sg(U,o,u,i,e),mf(Ki(c,u));break e}}i=c=Ki(c,u),It!==4&&(It=2),ea===null?ea=[i]:ea.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=x_(i,c,e);Ym(i,x);break e;case 1:u=c;var I=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof I.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ds===null||!ds.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=C_(i,u,e);Ym(i,b);break e}}i=i.return}while(i!==null)}W_(n)}catch(P){e=P,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(!0)}function q_(){var t=Ru.current;return Ru.current=Nu,t===null?Nu:t}function Of(){(It===0||It===3||It===2)&&(It=4),kt===null||!(Gs&268435455)&&!(ac&268435455)||Jr(kt,Vt)}function Du(t,e){var n=je;je|=2;var r=q_();(kt!==t||Vt!==e)&&(Tr=null,zs(t,e));do try{HI();break}catch(s){$_(t,s)}while(!0);if(vf(),je=n,Ru.current=r,_t!==null)throw Error(X(261));return kt=null,Vt=0,It}function HI(){for(;_t!==null;)H_(_t)}function WI(){for(;_t!==null&&!vT();)H_(_t)}function H_(t){var e=G_(t.alternate,t,Sn);t.memoizedProps=t.pendingProps,e===null?W_(t):_t=e,Rf.current=null}function W_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FI(n,e),n!==null){n.flags&=32767,_t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,_t=null;return}}else if(n=LI(n,e,Sn),n!==null){_t=n;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);It===0&&(It=5)}function Ms(t,e,n){var r=Ve,s=Fn.transition;try{Fn.transition=null,Ve=1,KI(t,e,n,r)}finally{Fn.transition=s,Ve=r}return null}function KI(t,e,n,r){do bi();while(ss!==null);if(je&6)throw Error(X(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(CT(t,i),t===kt&&(_t=kt=null,Vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,Q_(pu,function(){return bi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Fn.transition,Fn.transition=null;var o=Ve;Ve=1;var u=je;je|=4,Rf.current=null,BI(t,n),U_(n,t),fI(Kd),gu=!!Wd,Kd=Wd=null,t.current=n,zI(n),yT(),je=u,Ve=o,Fn.transition=i}else t.current=n;if(Ol&&(Ol=!1,ss=t,ju=s),i=t.pendingLanes,i===0&&(ds=null),ET(n.stateNode),yn(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ku)throw ku=!1,t=fh,fh=null,t;return ju&1&&t.tag!==0&&bi(),i=t.pendingLanes,i&1?t===ph?ta++:(ta=0,ph=t):ta=0,As(),null}function bi(){if(ss!==null){var t=xy(ju),e=Fn.transition,n=Ve;try{if(Fn.transition=null,Ve=16>t?16:t,ss===null)var r=!1;else{if(t=ss,ss=null,ju=0,je&6)throw Error(X(331));var s=je;for(je|=4,ae=t.current;ae!==null;){var i=ae,o=i.child;if(ae.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(ae=h;ae!==null;){var p=ae;switch(p.tag){case 0:case 11:case 15:Zo(8,p,i)}var m=p.child;if(m!==null)m.return=p,ae=m;else for(;ae!==null;){p=ae;var y=p.sibling,w=p.return;if(V_(p),p===h){ae=null;break}if(y!==null){y.return=w,ae=y;break}ae=w}}}var N=i.alternate;if(N!==null){var O=N.child;if(O!==null){N.child=null;do{var U=O.sibling;O.sibling=null,O=U}while(O!==null)}}ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ae=o;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zo(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ae=x;break e}ae=i.return}}var I=t.current;for(ae=I;ae!==null;){o=ae;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ae=S;else e:for(o=I;ae!==null;){if(u=ae,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:oc(9,u)}}catch(P){ct(u,u.return,P)}if(u===o){ae=null;break e}var b=u.sibling;if(b!==null){b.return=u.return,ae=b;break e}ae=u.return}}if(je=s,As(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(Ju,t)}catch{}r=!0}return r}finally{Ve=n,Fn.transition=e}}return!1}function vg(t,e,n){e=Ki(n,e),e=x_(t,e,1),t=cs(t,e,1),e=an(),t!==null&&(Ba(t,1,e),yn(t,e))}function ct(t,e,n){if(t.tag===3)vg(t,t,n);else for(;e!==null;){if(e.tag===3){vg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ds===null||!ds.has(r))){t=Ki(n,t),t=C_(e,t,1),e=cs(e,t,1),t=an(),e!==null&&(Ba(e,1,t),yn(e,t));break}}e=e.return}}function GI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,kt===t&&(Vt&n)===n&&(It===4||It===3&&(Vt&130023424)===Vt&&500>pt()-jf?zs(t,0):kf|=n),yn(t,e)}function K_(t,e){e===0&&(t.mode&1?(e=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):e=1);var n=an();t=Or(t,e),t!==null&&(Ba(t,e,n),yn(t,n))}function QI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),K_(t,n)}function YI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),K_(t,n)}var G_;G_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,VI(t,e,n);mn=!!(t.flags&131072)}else mn=!1,et&&e.flags&1048576&&Jy(e,Iu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jl(t,e),t=e.pendingProps;var s=$i(e,Jt.current);Oi(e,n),s=Af(null,e,r,t,s,n);var i=xf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(r)?(i=!0,Eu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wf(e),s.updater=ic,e.stateNode=s,s._reactInternals=e,nh(e,r,t,n),e=ih(null,e,r,!0,i,n)):(e.tag=0,et&&i&&ff(e),on(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=JI(r),t=Kn(r,t),s){case 0:e=sh(null,e,r,t,n);break e;case 1:e=ag(null,e,r,t,n);break e;case 11:e=ig(null,e,r,t,n);break e;case 14:e=og(null,e,r,Kn(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),sh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),ag(t,e,r,s,n);case 3:e:{if(k_(e),t===null)throw Error(X(387));r=e.pendingProps,i=e.memoizedState,s=i.element,s_(t,e),xu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ki(Error(X(423)),e),e=lg(t,e,r,n,s);break e}else if(r!==s){s=Ki(Error(X(424)),e),e=lg(t,e,r,n,s);break e}else for(xn=us(e.stateNode.containerInfo.firstChild),Pn=e,et=!0,Qn=null,n=n_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qi(),r===s){e=br(t,e,n);break e}on(t,e,r,n)}e=e.child}return e;case 5:return i_(e),t===null&&Zd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Gd(r,s)?o=null:i!==null&&Gd(r,i)&&(e.flags|=32),R_(t,e),on(t,e,o,n),e.child;case 6:return t===null&&Zd(e),null;case 13:return j_(t,e,n);case 4:return Ef(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hi(e,null,r,n):on(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),ig(t,e,r,s,n);case 7:return on(t,e,e.pendingProps,n),e.child;case 8:return on(t,e,e.pendingProps.children,n),e.child;case 12:return on(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,qe(Su,r._currentValue),r._currentValue=o,i!==null)if(Jn(i.value,o)){if(i.children===s.children&&!gn.current){e=br(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Rr(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),eh(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),eh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}on(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Oi(e,n),s=Bn(s),r=r(s),e.flags|=1,on(t,e,r,n),e.child;case 14:return r=e.type,s=Kn(r,e.pendingProps),s=Kn(r.type,s),og(t,e,r,s,n);case 15:return P_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Jl(t,e),e.tag=1,vn(r)?(t=!0,Eu(e)):t=!1,Oi(e,n),A_(e,r,s),nh(e,r,s,n),ih(null,e,r,!0,t,n);case 19:return D_(t,e,n);case 22:return N_(t,e,n)}throw Error(X(156,e.tag))};function Q_(t,e){return Ty(t,e)}function XI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,r){return new XI(t,e,n,r)}function bf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JI(t){if(typeof t=="function")return bf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ef)return 11;if(t===tf)return 14}return 2}function fs(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")bf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _i:return $s(n.children,s,i,e);case Zh:o=8,s|=8;break;case xd:return t=Ln(12,n,e,s|2),t.elementType=xd,t.lanes=i,t;case Cd:return t=Ln(13,n,e,s),t.elementType=Cd,t.lanes=i,t;case Pd:return t=Ln(19,n,e,s),t.elementType=Pd,t.lanes=i,t;case iy:return lc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ry:o=10;break e;case sy:o=9;break e;case ef:o=11;break e;case tf:o=14;break e;case Qr:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Ln(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function $s(t,e,n,r){return t=Ln(7,t,r,e),t.lanes=n,t}function lc(t,e,n,r){return t=Ln(22,t,r,e),t.elementType=iy,t.lanes=n,t.stateNode={isHidden:!1},t}function hd(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function fd(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kc(0),this.expirationTimes=Kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vf(t,e,n,r,s,i,o,u,c){return t=new ZI(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ln(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wf(i),t}function eS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Y_(t){if(!t)return ys;t=t._reactInternals;e:{if(ri(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(vn(n))return Yy(t,n,e)}return e}function X_(t,e,n,r,s,i,o,u,c){return t=Vf(n,r,!0,t,s,i,o,u,c),t.context=Y_(null),n=t.current,r=an(),s=hs(n),i=Rr(r,s),i.callback=e??null,cs(n,i,s),t.current.lanes=s,Ba(t,s,r),yn(t,r),t}function uc(t,e,n,r){var s=e.current,i=an(),o=hs(s);return n=Y_(n),e.context===null?e.context=n:e.pendingContext=n,e=Rr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=cs(s,e,o),t!==null&&(Xn(t,s,o,i),Ql(t,s,o)),o}function Mu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lf(t,e){yg(t,e),(t=t.alternate)&&yg(t,e)}function tS(){return null}var J_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ff(t){this._internalRoot=t}cc.prototype.render=Ff.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));uc(t,e,null,null)};cc.prototype.unmount=Ff.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qs(function(){uc(null,t,null,null)}),e[Mr]=null}};function cc(t){this._internalRoot=t}cc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ny();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xr.length&&e!==0&&e<Xr[n].priority;n++);Xr.splice(n,0,t),n===0&&ky(t)}};function Uf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _g(){}function nS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Mu(o);i.call(h)}}var o=X_(e,r,t,0,null,!1,!1,"",_g);return t._reactRootContainer=o,t[Mr]=o.current,ga(t.nodeType===8?t.parentNode:t),Qs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=Mu(c);u.call(h)}}var c=Vf(t,0,!1,null,null,!1,!1,"",_g);return t._reactRootContainer=c,t[Mr]=c.current,ga(t.nodeType===8?t.parentNode:t),Qs(function(){uc(e,c,n,r)}),c}function hc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Mu(o);u.call(c)}}uc(e,o,t,s)}else o=nS(n,e,t,s,r);return Mu(o)}Cy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fo(e.pendingLanes);n!==0&&(sf(e,n|1),yn(e,pt()),!(je&6)&&(Gi=pt()+500,As()))}break;case 13:Qs(function(){var r=Or(t,1);if(r!==null){var s=an();Xn(r,t,1,s)}}),Lf(t,1)}};of=function(t){if(t.tag===13){var e=Or(t,134217728);if(e!==null){var n=an();Xn(e,t,134217728,n)}Lf(t,134217728)}};Py=function(t){if(t.tag===13){var e=hs(t),n=Or(t,e);if(n!==null){var r=an();Xn(n,t,e,r)}Lf(t,e)}};Ny=function(){return Ve};Ry=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Ld=function(t,e,n){switch(e){case"input":if(kd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=nc(r);if(!s)throw Error(X(90));ay(r),kd(r,s)}}}break;case"textarea":uy(t,n);break;case"select":e=n.value,e!=null&&ki(t,!!n.multiple,e,!1)}};gy=Df;vy=Qs;var rS={usingClientEntryPoint:!1,Events:[$a,Ii,nc,py,my,Df]},Do={findFiberByHostInstance:Vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sS={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wy(t),t===null?null:t.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||tS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{Ju=bl.inject(sS),ur=bl}catch{}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rS;kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uf(e))throw Error(X(200));return eS(t,e,null,n)};kn.createRoot=function(t,e){if(!Uf(t))throw Error(X(299));var n=!1,r="",s=J_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Vf(t,1,!1,null,null,n,!1,r,s),t[Mr]=e.current,ga(t.nodeType===8?t.parentNode:t),new Ff(e)};kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=wy(e),t=t===null?null:t.stateNode,t};kn.flushSync=function(t){return Qs(t)};kn.hydrate=function(t,e,n){if(!dc(e))throw Error(X(200));return hc(null,t,e,!0,n)};kn.hydrateRoot=function(t,e,n){if(!Uf(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=J_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=X_(e,null,t,1,n??null,s,!1,i,o),t[Mr]=e.current,ga(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new cc(e)};kn.render=function(t,e,n){if(!dc(e))throw Error(X(200));return hc(null,t,e,!1,n)};kn.unmountComponentAtNode=function(t){if(!dc(t))throw Error(X(40));return t._reactRootContainer?(Qs(function(){hc(null,null,t,!1,function(){t._reactRootContainer=null,t[Mr]=null})}),!0):!1};kn.unstable_batchedUpdates=Df;kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dc(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return hc(t,e,n,!1,r)};kn.version="18.3.1-next-f1338f8080-20240426";function Z_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z_)}catch(t){console.error(t)}}Z_(),Zv.exports=kn;var iS=Zv.exports,e0,wg=iS;e0=wg.createRoot,wg.hydrateRoot;var Eg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},oS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},n0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|u>>4;let y=(u&15)<<2|h>>6,w=h&63;c||(w=64,o||(y=64)),r.push(n[p],n[m],n[y],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(t0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||m==null)throw new aS;const y=i<<2|u>>4;if(r.push(y),h!==64){const w=u<<4&240|h>>2;if(r.push(w),m!==64){const N=h<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lS=function(t){const e=t0(t);return n0.encodeByteArray(e,!0)},r0=function(t){return lS(t).replace(/\./g,"")},s0=function(t){try{return n0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=()=>uS().__FIREBASE_DEFAULTS__,dS=()=>{if(typeof process>"u"||typeof Eg>"u")return;const t=Eg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&s0(t[1]);return e&&JSON.parse(e)},fc=()=>{try{return cS()||dS()||hS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},i0=t=>{var e,n;return(n=(e=fc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fS=t=>{const e=i0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},o0=()=>{var t;return(t=fc())===null||t===void 0?void 0:t.config},a0=t=>{var e;return(e=fc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function gS(){var t;const e=(t=fc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _S(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wS(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ES(){return!gS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TS(){try{return typeof indexedDB=="object"}catch{return!1}}function IS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="FirebaseError";class vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SS,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ha.prototype.create)}}class Ha{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?AS(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new vr(s,u,r)}}function AS(t,e){return t.replace(xS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const xS=/\{\$([^}]+)}/g;function CS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Aa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Tg(i)&&Tg(o)){if(!Aa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Tg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function zo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function PS(t,e){const n=new NS(t,e);return n.subscribe.bind(n)}class NS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");RS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=pd),s.error===void 0&&(s.error=pd),s.complete===void 0&&(s.complete=pd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DS(e))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Os){return this.instances.has(e)}getOptions(e=Os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Os){return this.component?this.component.multipleInstances?e:Os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jS(t){return t===Os?void 0:t}function DS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const OS={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},bS=Pe.INFO,VS={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},LS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=VS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bf{constructor(e){this.name=e,this._logLevel=bS,this._logHandler=LS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const FS=(t,e)=>e.some(n=>t instanceof n);let Ig,Sg;function US(){return Ig||(Ig=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BS(){return Sg||(Sg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l0=new WeakMap,vh=new WeakMap,u0=new WeakMap,md=new WeakMap,zf=new WeakMap;function zS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ps(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&l0.set(n,t)}).catch(()=>{}),zf.set(e,t),e}function $S(t){if(vh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});vh.set(t,e)}let yh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||u0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qS(t){yh=t(yh)}function HS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gd(this),e,...n);return u0.set(r,e.sort?e.sort():[e]),ps(r)}:BS().includes(t)?function(...e){return t.apply(gd(this),e),ps(l0.get(this))}:function(...e){return ps(t.apply(gd(this),e))}}function WS(t){return typeof t=="function"?HS(t):(t instanceof IDBTransaction&&$S(t),FS(t,US())?new Proxy(t,yh):t)}function ps(t){if(t instanceof IDBRequest)return zS(t);if(md.has(t))return md.get(t);const e=WS(t);return e!==t&&(md.set(t,e),zf.set(e,t)),e}const gd=t=>zf.get(t);function KS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=ps(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ps(o.result),c.oldVersion,c.newVersion,ps(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const GS=["get","getKey","getAll","getAllKeys","count"],QS=["put","add","delete","clear"],vd=new Map;function Ag(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vd.get(e))return vd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=QS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||GS.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return vd.set(e,i),i}qS(t=>({...t,get:(e,n,r)=>Ag(e,n)||t.get(e,n,r),has:(e,n)=>!!Ag(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _h="@firebase/app",xg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new Bf("@firebase/app"),JS="@firebase/app-compat",ZS="@firebase/analytics-compat",eA="@firebase/analytics",tA="@firebase/app-check-compat",nA="@firebase/app-check",rA="@firebase/auth",sA="@firebase/auth-compat",iA="@firebase/database",oA="@firebase/data-connect",aA="@firebase/database-compat",lA="@firebase/functions",uA="@firebase/functions-compat",cA="@firebase/installations",dA="@firebase/installations-compat",hA="@firebase/messaging",fA="@firebase/messaging-compat",pA="@firebase/performance",mA="@firebase/performance-compat",gA="@firebase/remote-config",vA="@firebase/remote-config-compat",yA="@firebase/storage",_A="@firebase/storage-compat",wA="@firebase/firestore",EA="@firebase/vertexai-preview",TA="@firebase/firestore-compat",IA="firebase",SA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="[DEFAULT]",AA={[_h]:"fire-core",[JS]:"fire-core-compat",[eA]:"fire-analytics",[ZS]:"fire-analytics-compat",[nA]:"fire-app-check",[tA]:"fire-app-check-compat",[rA]:"fire-auth",[sA]:"fire-auth-compat",[iA]:"fire-rtdb",[oA]:"fire-data-connect",[aA]:"fire-rtdb-compat",[lA]:"fire-fn",[uA]:"fire-fn-compat",[cA]:"fire-iid",[dA]:"fire-iid-compat",[hA]:"fire-fcm",[fA]:"fire-fcm-compat",[pA]:"fire-perf",[mA]:"fire-perf-compat",[gA]:"fire-rc",[vA]:"fire-rc-compat",[yA]:"fire-gcs",[_A]:"fire-gcs-compat",[wA]:"fire-fst",[TA]:"fire-fst-compat",[EA]:"fire-vertex","fire-js":"fire-js",[IA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou=new Map,xA=new Map,Eh=new Map;function Cg(t,e){try{t.container.addComponent(e)}catch(n){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ys(t){const e=t.name;if(Eh.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;Eh.set(e,t);for(const n of Ou.values())Cg(n,t);for(const n of xA.values())Cg(n,t);return!0}function pc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new Ha("app","Firebase",CA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=SA;function c0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ms.create("bad-app-name",{appName:String(s)});if(n||(n=o0()),!n)throw ms.create("no-options");const i=Ou.get(s);if(i){if(Aa(n,i.options)&&Aa(r,i.config))return i;throw ms.create("duplicate-app",{appName:s})}const o=new MS(s);for(const c of Eh.values())o.addComponent(c);const u=new PA(n,r,o);return Ou.set(s,u),u}function d0(t=wh){const e=Ou.get(t);if(!e&&t===wh&&o0())return c0();if(!e)throw ms.create("no-app",{appName:t});return e}function dr(t,e,n){var r;let s=(r=AA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(u.join(" "));return}Ys(new _s(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="firebase-heartbeat-database",RA=1,xa="firebase-heartbeat-store";let yd=null;function h0(){return yd||(yd=KS(NA,RA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xa)}catch(n){console.warn(n)}}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),yd}async function kA(t){try{const n=(await h0()).transaction(xa),r=await n.objectStore(xa).get(f0(t));return await n.done,r}catch(e){if(e instanceof vr)Vr.warn(e.message);else{const n=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vr.warn(n.message)}}}async function Pg(t,e){try{const r=(await h0()).transaction(xa,"readwrite");await r.objectStore(xa).put(e,f0(t)),await r.done}catch(n){if(n instanceof vr)Vr.warn(n.message);else{const r=ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vr.warn(r.message)}}}function f0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=1024,DA=30*24*60*60*1e3;class MA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ng();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=DA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Vr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ng(),{heartbeatsToSend:r,unsentEntries:s}=OA(this._heartbeatsCache.heartbeats),i=r0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Vr.warn(n),""}}}function Ng(){return new Date().toISOString().substring(0,10)}function OA(t,e=jA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Rg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TS()?IS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Pg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Pg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Rg(t){return r0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){Ys(new _s("platform-logger",e=>new YS(e),"PRIVATE")),Ys(new _s("heartbeat",e=>new MA(e),"PRIVATE")),dr(_h,xg,t),dr(_h,xg,"esm2017"),dr("fire-js","")}VA("");var LA="firebase",FA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(LA,FA,"app");var kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qs,p0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,v){function E(){}E.prototype=v.prototype,g.D=v.prototype,g.prototype=new E,g.prototype.constructor=g,g.C=function(A,R,k){for(var C=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)C[Je-2]=arguments[Je];return v.prototype[R].apply(A,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(g,v,E){E||(E=0);var A=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)A[R]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(R=0;16>R;++R)A[R]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=g.g[0],E=g.g[1],R=g.g[2];var k=g.g[3],C=v+(k^E&(R^k))+A[0]+3614090360&4294967295;v=E+(C<<7&4294967295|C>>>25),C=k+(R^v&(E^R))+A[1]+3905402710&4294967295,k=v+(C<<12&4294967295|C>>>20),C=R+(E^k&(v^E))+A[2]+606105819&4294967295,R=k+(C<<17&4294967295|C>>>15),C=E+(v^R&(k^v))+A[3]+3250441966&4294967295,E=R+(C<<22&4294967295|C>>>10),C=v+(k^E&(R^k))+A[4]+4118548399&4294967295,v=E+(C<<7&4294967295|C>>>25),C=k+(R^v&(E^R))+A[5]+1200080426&4294967295,k=v+(C<<12&4294967295|C>>>20),C=R+(E^k&(v^E))+A[6]+2821735955&4294967295,R=k+(C<<17&4294967295|C>>>15),C=E+(v^R&(k^v))+A[7]+4249261313&4294967295,E=R+(C<<22&4294967295|C>>>10),C=v+(k^E&(R^k))+A[8]+1770035416&4294967295,v=E+(C<<7&4294967295|C>>>25),C=k+(R^v&(E^R))+A[9]+2336552879&4294967295,k=v+(C<<12&4294967295|C>>>20),C=R+(E^k&(v^E))+A[10]+4294925233&4294967295,R=k+(C<<17&4294967295|C>>>15),C=E+(v^R&(k^v))+A[11]+2304563134&4294967295,E=R+(C<<22&4294967295|C>>>10),C=v+(k^E&(R^k))+A[12]+1804603682&4294967295,v=E+(C<<7&4294967295|C>>>25),C=k+(R^v&(E^R))+A[13]+4254626195&4294967295,k=v+(C<<12&4294967295|C>>>20),C=R+(E^k&(v^E))+A[14]+2792965006&4294967295,R=k+(C<<17&4294967295|C>>>15),C=E+(v^R&(k^v))+A[15]+1236535329&4294967295,E=R+(C<<22&4294967295|C>>>10),C=v+(R^k&(E^R))+A[1]+4129170786&4294967295,v=E+(C<<5&4294967295|C>>>27),C=k+(E^R&(v^E))+A[6]+3225465664&4294967295,k=v+(C<<9&4294967295|C>>>23),C=R+(v^E&(k^v))+A[11]+643717713&4294967295,R=k+(C<<14&4294967295|C>>>18),C=E+(k^v&(R^k))+A[0]+3921069994&4294967295,E=R+(C<<20&4294967295|C>>>12),C=v+(R^k&(E^R))+A[5]+3593408605&4294967295,v=E+(C<<5&4294967295|C>>>27),C=k+(E^R&(v^E))+A[10]+38016083&4294967295,k=v+(C<<9&4294967295|C>>>23),C=R+(v^E&(k^v))+A[15]+3634488961&4294967295,R=k+(C<<14&4294967295|C>>>18),C=E+(k^v&(R^k))+A[4]+3889429448&4294967295,E=R+(C<<20&4294967295|C>>>12),C=v+(R^k&(E^R))+A[9]+568446438&4294967295,v=E+(C<<5&4294967295|C>>>27),C=k+(E^R&(v^E))+A[14]+3275163606&4294967295,k=v+(C<<9&4294967295|C>>>23),C=R+(v^E&(k^v))+A[3]+4107603335&4294967295,R=k+(C<<14&4294967295|C>>>18),C=E+(k^v&(R^k))+A[8]+1163531501&4294967295,E=R+(C<<20&4294967295|C>>>12),C=v+(R^k&(E^R))+A[13]+2850285829&4294967295,v=E+(C<<5&4294967295|C>>>27),C=k+(E^R&(v^E))+A[2]+4243563512&4294967295,k=v+(C<<9&4294967295|C>>>23),C=R+(v^E&(k^v))+A[7]+1735328473&4294967295,R=k+(C<<14&4294967295|C>>>18),C=E+(k^v&(R^k))+A[12]+2368359562&4294967295,E=R+(C<<20&4294967295|C>>>12),C=v+(E^R^k)+A[5]+4294588738&4294967295,v=E+(C<<4&4294967295|C>>>28),C=k+(v^E^R)+A[8]+2272392833&4294967295,k=v+(C<<11&4294967295|C>>>21),C=R+(k^v^E)+A[11]+1839030562&4294967295,R=k+(C<<16&4294967295|C>>>16),C=E+(R^k^v)+A[14]+4259657740&4294967295,E=R+(C<<23&4294967295|C>>>9),C=v+(E^R^k)+A[1]+2763975236&4294967295,v=E+(C<<4&4294967295|C>>>28),C=k+(v^E^R)+A[4]+1272893353&4294967295,k=v+(C<<11&4294967295|C>>>21),C=R+(k^v^E)+A[7]+4139469664&4294967295,R=k+(C<<16&4294967295|C>>>16),C=E+(R^k^v)+A[10]+3200236656&4294967295,E=R+(C<<23&4294967295|C>>>9),C=v+(E^R^k)+A[13]+681279174&4294967295,v=E+(C<<4&4294967295|C>>>28),C=k+(v^E^R)+A[0]+3936430074&4294967295,k=v+(C<<11&4294967295|C>>>21),C=R+(k^v^E)+A[3]+3572445317&4294967295,R=k+(C<<16&4294967295|C>>>16),C=E+(R^k^v)+A[6]+76029189&4294967295,E=R+(C<<23&4294967295|C>>>9),C=v+(E^R^k)+A[9]+3654602809&4294967295,v=E+(C<<4&4294967295|C>>>28),C=k+(v^E^R)+A[12]+3873151461&4294967295,k=v+(C<<11&4294967295|C>>>21),C=R+(k^v^E)+A[15]+530742520&4294967295,R=k+(C<<16&4294967295|C>>>16),C=E+(R^k^v)+A[2]+3299628645&4294967295,E=R+(C<<23&4294967295|C>>>9),C=v+(R^(E|~k))+A[0]+4096336452&4294967295,v=E+(C<<6&4294967295|C>>>26),C=k+(E^(v|~R))+A[7]+1126891415&4294967295,k=v+(C<<10&4294967295|C>>>22),C=R+(v^(k|~E))+A[14]+2878612391&4294967295,R=k+(C<<15&4294967295|C>>>17),C=E+(k^(R|~v))+A[5]+4237533241&4294967295,E=R+(C<<21&4294967295|C>>>11),C=v+(R^(E|~k))+A[12]+1700485571&4294967295,v=E+(C<<6&4294967295|C>>>26),C=k+(E^(v|~R))+A[3]+2399980690&4294967295,k=v+(C<<10&4294967295|C>>>22),C=R+(v^(k|~E))+A[10]+4293915773&4294967295,R=k+(C<<15&4294967295|C>>>17),C=E+(k^(R|~v))+A[1]+2240044497&4294967295,E=R+(C<<21&4294967295|C>>>11),C=v+(R^(E|~k))+A[8]+1873313359&4294967295,v=E+(C<<6&4294967295|C>>>26),C=k+(E^(v|~R))+A[15]+4264355552&4294967295,k=v+(C<<10&4294967295|C>>>22),C=R+(v^(k|~E))+A[6]+2734768916&4294967295,R=k+(C<<15&4294967295|C>>>17),C=E+(k^(R|~v))+A[13]+1309151649&4294967295,E=R+(C<<21&4294967295|C>>>11),C=v+(R^(E|~k))+A[4]+4149444226&4294967295,v=E+(C<<6&4294967295|C>>>26),C=k+(E^(v|~R))+A[11]+3174756917&4294967295,k=v+(C<<10&4294967295|C>>>22),C=R+(v^(k|~E))+A[2]+718787259&4294967295,R=k+(C<<15&4294967295|C>>>17),C=E+(k^(R|~v))+A[9]+3951481745&4294967295,g.g[0]=g.g[0]+v&4294967295,g.g[1]=g.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,g.g[2]=g.g[2]+R&4294967295,g.g[3]=g.g[3]+k&4294967295}r.prototype.u=function(g,v){v===void 0&&(v=g.length);for(var E=v-this.blockSize,A=this.B,R=this.h,k=0;k<v;){if(R==0)for(;k<=E;)s(this,g,k),k+=this.blockSize;if(typeof g=="string"){for(;k<v;)if(A[R++]=g.charCodeAt(k++),R==this.blockSize){s(this,A),R=0;break}}else for(;k<v;)if(A[R++]=g[k++],R==this.blockSize){s(this,A),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var v=1;v<g.length-8;++v)g[v]=0;var E=8*this.o;for(v=g.length-8;v<g.length;++v)g[v]=E&255,E/=256;for(this.u(g),g=Array(16),v=E=0;4>v;++v)for(var A=0;32>A;A+=8)g[E++]=this.g[v]>>>A&255;return g};function i(g,v){var E=u;return Object.prototype.hasOwnProperty.call(E,g)?E[g]:E[g]=v(g)}function o(g,v){this.h=v;for(var E=[],A=!0,R=g.length-1;0<=R;R--){var k=g[R]|0;A&&k==v||(E[R]=k,A=!1)}this.g=E}var u={};function c(g){return-128<=g&&128>g?i(g,function(v){return new o([v|0],0>v?-1:0)}):new o([g|0],0>g?-1:0)}function h(g){if(isNaN(g)||!isFinite(g))return m;if(0>g)return U(h(-g));for(var v=[],E=1,A=0;g>=E;A++)v[A]=g/E|0,E*=4294967296;return new o(v,0)}function p(g,v){if(g.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(g.charAt(0)=="-")return U(p(g.substring(1),v));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(v,8)),A=m,R=0;R<g.length;R+=8){var k=Math.min(8,g.length-R),C=parseInt(g.substring(R,R+k),v);8>k?(k=h(Math.pow(v,k)),A=A.j(k).add(h(C))):(A=A.j(E),A=A.add(h(C)))}return A}var m=c(0),y=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(O(this))return-U(this).m();for(var g=0,v=1,E=0;E<this.g.length;E++){var A=this.i(E);g+=(0<=A?A:4294967296+A)*v,v*=4294967296}return g},t.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(N(this))return"0";if(O(this))return"-"+U(this).toString(g);for(var v=h(Math.pow(g,6)),E=this,A="";;){var R=b(E,v).g;E=x(E,R.j(v));var k=((0<E.g.length?E.g[0]:E.h)>>>0).toString(g);if(E=R,N(E))return k+A;for(;6>k.length;)k="0"+k;A=k+A}},t.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function N(g){if(g.h!=0)return!1;for(var v=0;v<g.g.length;v++)if(g.g[v]!=0)return!1;return!0}function O(g){return g.h==-1}t.l=function(g){return g=x(this,g),O(g)?-1:N(g)?0:1};function U(g){for(var v=g.g.length,E=[],A=0;A<v;A++)E[A]=~g.g[A];return new o(E,~g.h).add(y)}t.abs=function(){return O(this)?U(this):this},t.add=function(g){for(var v=Math.max(this.g.length,g.g.length),E=[],A=0,R=0;R<=v;R++){var k=A+(this.i(R)&65535)+(g.i(R)&65535),C=(k>>>16)+(this.i(R)>>>16)+(g.i(R)>>>16);A=C>>>16,k&=65535,C&=65535,E[R]=C<<16|k}return new o(E,E[E.length-1]&-2147483648?-1:0)};function x(g,v){return g.add(U(v))}t.j=function(g){if(N(this)||N(g))return m;if(O(this))return O(g)?U(this).j(U(g)):U(U(this).j(g));if(O(g))return U(this.j(U(g)));if(0>this.l(w)&&0>g.l(w))return h(this.m()*g.m());for(var v=this.g.length+g.g.length,E=[],A=0;A<2*v;A++)E[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<g.g.length;R++){var k=this.i(A)>>>16,C=this.i(A)&65535,Je=g.i(R)>>>16,At=g.i(R)&65535;E[2*A+2*R]+=C*At,I(E,2*A+2*R),E[2*A+2*R+1]+=k*At,I(E,2*A+2*R+1),E[2*A+2*R+1]+=C*Je,I(E,2*A+2*R+1),E[2*A+2*R+2]+=k*Je,I(E,2*A+2*R+2)}for(A=0;A<v;A++)E[A]=E[2*A+1]<<16|E[2*A];for(A=v;A<2*v;A++)E[A]=0;return new o(E,0)};function I(g,v){for(;(g[v]&65535)!=g[v];)g[v+1]+=g[v]>>>16,g[v]&=65535,v++}function S(g,v){this.g=g,this.h=v}function b(g,v){if(N(v))throw Error("division by zero");if(N(g))return new S(m,m);if(O(g))return v=b(U(g),v),new S(U(v.g),U(v.h));if(O(v))return v=b(g,U(v)),new S(U(v.g),v.h);if(30<g.g.length){if(O(g)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var E=y,A=v;0>=A.l(g);)E=P(E),A=P(A);var R=M(E,1),k=M(A,1);for(A=M(A,2),E=M(E,2);!N(A);){var C=k.add(A);0>=C.l(g)&&(R=R.add(E),k=C),A=M(A,1),E=M(E,1)}return v=x(g,R.j(v)),new S(R,v)}for(R=m;0<=g.l(v);){for(E=Math.max(1,Math.floor(g.m()/v.m())),A=Math.ceil(Math.log(E)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),k=h(E),C=k.j(v);O(C)||0<C.l(g);)E-=A,k=h(E),C=k.j(v);N(k)&&(k=y),R=R.add(k),g=x(g,C)}return new S(R,g)}t.A=function(g){return b(this,g).h},t.and=function(g){for(var v=Math.max(this.g.length,g.g.length),E=[],A=0;A<v;A++)E[A]=this.i(A)&g.i(A);return new o(E,this.h&g.h)},t.or=function(g){for(var v=Math.max(this.g.length,g.g.length),E=[],A=0;A<v;A++)E[A]=this.i(A)|g.i(A);return new o(E,this.h|g.h)},t.xor=function(g){for(var v=Math.max(this.g.length,g.g.length),E=[],A=0;A<v;A++)E[A]=this.i(A)^g.i(A);return new o(E,this.h^g.h)};function P(g){for(var v=g.g.length+1,E=[],A=0;A<v;A++)E[A]=g.i(A)<<1|g.i(A-1)>>>31;return new o(E,g.h)}function M(g,v){var E=v>>5;v%=32;for(var A=g.g.length-E,R=[],k=0;k<A;k++)R[k]=0<v?g.i(k+E)>>>v|g.i(k+E+1)<<32-v:g.i(k+E);return new o(R,g.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,p0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,qs=o}).apply(typeof kg<"u"?kg:typeof self<"u"?self:typeof window<"u"?window:{});var Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var m0,$o,g0,nu,Th,v0,y0,_0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vl=="object"&&Vl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var V=a[_];if(!(V in f))break e;f=f[V]}a=a[a.length-1],_=f[a],d=d(_),d!=_&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,_=!1,V={next:function(){if(!_&&f<a.length){var B=f++;return{value:d(B,a[B]),done:!1}}return _=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,_),a.apply(d,V)}}return function(){return a.apply(d,arguments)}}function y(a,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function w(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function N(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(_,V,B){for(var ee=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ee[ze-2]=arguments[ze];return d.prototype[V].apply(_,ee)}}function O(a){const d=a.length;if(0<d){const f=Array(d);for(let _=0;_<d;_++)f[_]=a[_];return f}return[]}function U(a,d){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(c(_)){const V=a.length||0,B=_.length||0;a.length=V+B;for(let ee=0;ee<B;ee++)a[V+ee]=_[ee]}else a.push(_)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function I(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var P=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(a,d,f){for(const _ in a)d.call(f,a[_],_,a)}function g(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function v(a){const d={};for(const f in a)d[f]=a[f];return d}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(a,d){let f,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(f in _)a[f]=_[f];for(let B=0;B<E.length;B++)f=E[B],Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])}}function R(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function k(a){u.setTimeout(()=>{throw a},0)}function C(){var a=D;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Je{constructor(){this.h=this.g=null}add(d,f){const _=At.get();_.set(d,f),this.h?this.h.next=_:this.g=_,this.h=_}}var At=new x(()=>new ot,a=>a.reset());class ot{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let H,$=!1,D=new Je,z=()=>{const a=u.Promise.resolve(void 0);H=()=>{a.then(q)}};var q=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){k(f)}var d=At;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}$=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,d),u.removeEventListener("test",f,d)}catch{}return a}();function Oe(a,d){if(ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(P){e:{try{b(d.nodeName);var V=!0;break e}catch{}V=!1}V||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:be[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Oe.aa.h.call(this)}}N(Oe,ie);var be={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),$n=0;function en(a,d,f,_,V){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!_,this.ha=V,this.key=++$n,this.da=this.fa=!1}function cn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function _n(a){this.src=a,this.g={},this.h=0}_n.prototype.add=function(a,d,f,_,V){var B=a.toString();a=this.g[B],a||(a=this.g[B]=[],this.h++);var ee=Dn(a,d,_,V);return-1<ee?(d=a[ee],f||(d.fa=!1)):(d=new en(d,this.src,B,!!_,V),d.fa=f,a.push(d)),d};function wn(a,d){var f=d.type;if(f in a.g){var _=a.g[f],V=Array.prototype.indexOf.call(_,d,void 0),B;(B=0<=V)&&Array.prototype.splice.call(_,V,1),B&&(cn(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Dn(a,d,f,_){for(var V=0;V<a.length;++V){var B=a[V];if(!B.da&&B.listener==d&&B.capture==!!f&&B.ha==_)return V}return-1}var ye="closure_lm_"+(1e6*Math.random()|0),He={};function Fe(a,d,f,_,V){if(Array.isArray(d)){for(var B=0;B<d.length;B++)Fe(a,d[B],f,_,V);return null}return f=T(f),a&&a[at]?a.K(d,f,h(_)?!!_.capture:!1,V):tr(a,d,f,!1,_,V)}function tr(a,d,f,_,V,B){if(!d)throw Error("Invalid event type");var ee=h(V)?!!V.capture:!!V,ze=En(a);if(ze||(a[ye]=ze=new _n(a)),f=ze.add(d,f,_,ee,B),f.proxy)return f;if(_=nr(),f.proxy=_,_.src=a,_.listener=f,a.addEventListener)Ie||(V=ee),V===void 0&&(V=!1),a.addEventListener(d.toString(),_,V);else if(a.attachEvent)a.attachEvent(qn(d.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function nr(){function a(f){return d.call(a.src,a.listener,f)}const d=We;return a}function rr(a,d,f,_,V){if(Array.isArray(d))for(var B=0;B<d.length;B++)rr(a,d[B],f,_,V);else _=h(_)?!!_.capture:!!_,f=T(f),a&&a[at]?(a=a.i,d=String(d).toString(),d in a.g&&(B=a.g[d],f=Dn(B,f,_,V),-1<f&&(cn(B[f]),Array.prototype.splice.call(B,f,1),B.length==0&&(delete a.g[d],a.h--)))):a&&(a=En(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Dn(d,f,_,V)),(f=-1<a?d[a]:null)&&yr(f))}function yr(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[at])wn(d.i,a);else{var f=a.type,_=a.proxy;d.removeEventListener?d.removeEventListener(f,_,a.capture):d.detachEvent?d.detachEvent(qn(f),_):d.addListener&&d.removeListener&&d.removeListener(_),(f=En(d))?(wn(f,a),f.h==0&&(f.src=null,d[ye]=null)):cn(a)}}}function qn(a){return a in He?He[a]:He[a]="on"+a}function We(a,d){if(a.da)a=!0;else{d=new Oe(d,this);var f=a.listener,_=a.ha||a.src;a.fa&&yr(a),a=f.call(_,d)}return a}function En(a){return a=a[ye],a instanceof _n?a:null}var mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function T(a){return typeof a=="function"?a:(a[mt]||(a[mt]=function(d){return a.handleEvent(d)}),a[mt])}function j(){J.call(this),this.i=new _n(this),this.M=this,this.F=null}N(j,J),j.prototype[at]=!0,j.prototype.removeEventListener=function(a,d,f,_){rr(this,a,d,f,_)};function L(a,d){var f,_=a.F;if(_)for(f=[];_;_=_.F)f.push(_);if(a=a.M,_=d.type||d,typeof d=="string")d=new ie(d,a);else if(d instanceof ie)d.target=d.target||a;else{var V=d;d=new ie(_,a),A(d,V)}if(V=!0,f)for(var B=f.length-1;0<=B;B--){var ee=d.g=f[B];V=F(ee,_,!0,d)&&V}if(ee=d.g=a,V=F(ee,_,!0,d)&&V,V=F(ee,_,!1,d)&&V,f)for(B=0;B<f.length;B++)ee=d.g=f[B],V=F(ee,_,!1,d)&&V}j.prototype.N=function(){if(j.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],_=0;_<f.length;_++)cn(f[_]);delete a.g[d],a.h--}}this.F=null},j.prototype.K=function(a,d,f,_){return this.i.add(String(a),d,!1,f,_)},j.prototype.L=function(a,d,f,_){return this.i.add(String(a),d,!0,f,_)};function F(a,d,f,_){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var V=!0,B=0;B<d.length;++B){var ee=d[B];if(ee&&!ee.da&&ee.capture==f){var ze=ee.listener,Dt=ee.ha||ee.src;ee.fa&&wn(a.i,ee),V=ze.call(Dt,_)!==!1&&V}}return V&&!_.defaultPrevented}function ne(a,d,f){if(typeof a=="function")f&&(a=y(a,f));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:u.setTimeout(a,d||0)}function me(a){a.g=ne(()=>{a.g=null,a.i&&(a.i=!1,me(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class he extends J{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:me(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(a){J.call(this),this.h=a,this.g={}}N(fe,J);var pe=[];function Ne(a){M(a.g,function(d,f){this.g.hasOwnProperty(f)&&yr(d)},a),a.g={}}fe.prototype.N=function(){fe.aa.N.call(this),Ne(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _e=u.JSON.stringify,Bt=u.JSON.parse,_r=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function Ae(){}Ae.prototype.h=null;function jt(a){return a.h||(a.h=a.i())}function tn(){}var sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function oe(){ie.call(this,"d")}N(oe,ie);function Q(){ie.call(this,"c")}N(Q,ie);var Y={},Se=null;function re(){return Se=Se||new j}Y.La="serverreachability";function we(a){ie.call(this,Y.La,a)}N(we,ie);function Z(a){const d=re();L(d,new we(d))}Y.STAT_EVENT="statevent";function te(a,d){ie.call(this,Y.STAT_EVENT,a),this.stat=d}N(te,ie);function ce(a){const d=re();L(d,new te(d,a))}Y.Ma="timingevent";function Ue(a,d){ie.call(this,Y.Ma,a),this.size=d}N(Ue,ie);function $e(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},d)}function xt(){this.g=!0}xt.prototype.xa=function(){this.g=!1};function dt(a,d,f,_,V,B){a.info(function(){if(a.g)if(B)for(var ee="",ze=B.split("&"),Dt=0;Dt<ze.length;Dt++){var De=ze[Dt].split("=");if(1<De.length){var $t=De[0];De=De[1];var qt=$t.split("_");ee=2<=qt.length&&qt[1]=="type"?ee+($t+"="+De+"&"):ee+($t+"=redacted&")}}else ee=null;else ee=B;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+d+`
`+f+`
`+ee})}function Tn(a,d,f,_,V,B,ee){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+d+`
`+f+`
`+B+" "+ee})}function gt(a,d,f,_){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+nn(a,f)+(_?" "+_:"")})}function Mn(a,d){a.info(function(){return"TIMEOUT: "+d})}xt.prototype.info=function(){};function nn(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var _=f[a];if(!(2>_.length)){var V=_[1];if(Array.isArray(V)&&!(1>V.length)){var B=V[0];if(B!="noop"&&B!="stop"&&B!="close")for(var ee=1;ee<V.length;ee++)V[ee]=""}}}}return _e(f)}catch{return d}}var lt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Be;function vt(){}N(vt,Ae),vt.prototype.g=function(){return new XMLHttpRequest},vt.prototype.i=function(){return{}},Be=new vt;function Ct(a,d,f,_){this.j=a,this.i=d,this.l=f,this.R=_||1,this.U=new fe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rn}function rn(){this.i=null,this.g="",this.h=!1}var On={},Ke={};function zt(a,d,f){a.L=1,a.v=dl(wr(d)),a.m=f,a.P=!0,co(a,null)}function co(a,d){a.F=Date.now(),Ns(a),a.A=wr(a.v);var f=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),qp(f.i,"t",_),a.C=0,f=a.j.J,a.h=new rn,a.g=lm(a.j,f?d:null,!a.m),0<a.O&&(a.M=new he(y(a.Y,a,a.g),a.O)),d=a.U,f=a.g,_=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(pe[0]=V.toString()),V=pe);for(var B=0;B<V.length;B++){var ee=Fe(f,V[B],_||d.handleEvent,!1,d.h||d);if(!ee)break;d.g[ee.key]=ee}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Z(),dt(a.i,a.u,a.A,a.l,a.R,a.m)}Ct.prototype.ca=function(a){a=a.target;const d=this.M;d&&Er(a)==3?d.j():this.Y(a)},Ct.prototype.Y=function(a){try{if(a==this.g)e:{const qt=Er(this.g);var d=this.g.Ba();const fi=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Xp(this.g)))){this.J||qt!=4||d==7||(d==8||0>=fi?Z(3):Z(2)),fo(this);var f=this.g.Z();this.X=f;t:if(li(this)){var _=Xp(this.g);a="";var V=_.length,B=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),$r(this);var ee="";break t}this.h.i=new u.TextDecoder}for(d=0;d<V;d++)this.h.h=!0,a+=this.h.i.decode(_[d],{stream:!(B&&d==V-1)});_.length=0,this.h.g+=a,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=f==200,Tn(this.i,this.u,this.A,this.l,this.R,qt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Dt=this.g;if((ze=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(ze)){var De=ze;break t}}De=null}if(f=De)gt(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ui(this,f);else{this.o=!1,this.s=3,ce(12),qr(this),$r(this);break e}}if(this.P){f=!0;let Hn;for(;!this.J&&this.C<ee.length;)if(Hn=bc(this,ee),Hn==Ke){qt==4&&(this.s=4,ce(14),f=!1),gt(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==On){this.s=4,ce(15),gt(this.i,this.l,ee,"[Invalid Chunk]"),f=!1;break}else gt(this.i,this.l,Hn,null),ui(this,Hn);if(li(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||ee.length!=0||this.h.h||(this.s=1,ce(16),f=!1),this.o=this.o&&f,!f)gt(this.i,this.l,ee,"[Invalid Chunked Response]"),qr(this),$r(this);else if(0<ee.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Uc($t),$t.M=!0,ce(11))}}else gt(this.i,this.l,ee,null),ui(this,ee);qt==4&&qr(this),this.o&&!this.J&&(qt==4?sm(this.j,this):(this.o=!1,Ns(this)))}else RE(this.g),f==400&&0<ee.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),qr(this),$r(this)}}}catch{}finally{}};function li(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function bc(a,d){var f=a.C,_=d.indexOf(`
`,f);return _==-1?Ke:(f=Number(d.substring(f,_)),isNaN(f)?On:(_+=1,_+f>d.length?Ke:(d=d.slice(_,_+f),a.C=_+f,d)))}Ct.prototype.cancel=function(){this.J=!0,qr(this)};function Ns(a){a.S=Date.now()+a.I,ho(a,a.I)}function ho(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=$e(y(a.ba,a),d)}function fo(a){a.B&&(u.clearTimeout(a.B),a.B=null)}Ct.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Mn(this.i,this.A),this.L!=2&&(Z(),ce(17)),qr(this),this.s=2,$r(this)):ho(this,this.S-a)};function $r(a){a.j.G==0||a.J||sm(a.j,a)}function qr(a){fo(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Ne(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function ui(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||mo(f.h,a))){if(!a.K&&mo(f.h,a)&&f.G==3){try{var _=f.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)vl(f),ml(f);else break e;Fc(f),ce(18)}}else f.za=V[1],0<f.za-f.T&&37500>V[2]&&f.F&&f.v==0&&!f.C&&(f.C=$e(y(f.Za,f),6e3));if(1>=al(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ks(f,11)}else if((a.K||f.g==a)&&vl(f),!I(d))for(V=f.Da.g.parse(d),d=0;d<V.length;d++){let De=V[d];if(f.T=De[0],De=De[1],f.G==2)if(De[0]=="c"){f.K=De[1],f.ia=De[2];const $t=De[3];$t!=null&&(f.la=$t,f.j.info("VER="+f.la));const qt=De[4];qt!=null&&(f.Aa=qt,f.j.info("SVER="+f.Aa));const fi=De[5];fi!=null&&typeof fi=="number"&&0<fi&&(_=1.5*fi,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const Hn=a.g;if(Hn){const _l=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_l){var B=_.h;B.g||_l.indexOf("spdy")==-1&&_l.indexOf("quic")==-1&&_l.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(go(B,B.h),B.h=null))}if(_.D){const Bc=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bc&&(_.ya=Bc,Ge(_.I,_.D,Bc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var ee=a;if(_.qa=am(_,_.J?_.ia:null,_.W),ee.K){ll(_.h,ee);var ze=ee,Dt=_.L;Dt&&(ze.I=Dt),ze.B&&(fo(ze),Ns(ze)),_.g=ee}else nm(_);0<f.i.length&&gl(f)}else De[0]!="stop"&&De[0]!="close"||ks(f,7);else f.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?ks(f,7):Lc(f):De[0]!="noop"&&f.l&&f.l.ta(De),f.v=0)}}Z(4)}catch{}}var po=class{constructor(a,d){this.g=a,this.map=d}};function il(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ol(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function al(a){return a.h?1:a.g?a.g.size:0}function mo(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function go(a,d){a.g?a.g.add(d):a.h=d}function ll(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}il.prototype.cancel=function(){if(this.i=Ze(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ze(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return O(a.i)}function dn(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,_=0;_<f;_++)d.push(a[_]);return d}d=[],f=0;for(_ in a)d[f++]=a[_];return d}function ci(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const _ in a)d[f++]=_;return d}}}function vo(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=ci(a),_=dn(a),V=_.length,B=0;B<V;B++)d.call(void 0,_[B],f&&f[B],a)}var yo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vE(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var _=a[f].indexOf("="),V=null;if(0<=_){var B=a[f].substring(0,_);V=a[f].substring(_+1)}else B=a[f];d(B,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Rs(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Rs){this.h=a.h,ul(this,a.j),this.o=a.o,this.g=a.g,cl(this,a.s),this.l=a.l;var d=a.i,f=new Eo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Up(this,f),this.m=a.m}else a&&(d=String(a).match(yo))?(this.h=!1,ul(this,d[1]||"",!0),this.o=_o(d[2]||""),this.g=_o(d[3]||"",!0),cl(this,d[4]),this.l=_o(d[5]||"",!0),Up(this,d[6]||"",!0),this.m=_o(d[7]||"")):(this.h=!1,this.i=new Eo(null,this.h))}Rs.prototype.toString=function(){var a=[],d=this.j;d&&a.push(wo(d,Bp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(wo(d,Bp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(wo(f,f.charAt(0)=="/"?wE:_E,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",wo(f,TE)),a.join("")};function wr(a){return new Rs(a)}function ul(a,d,f){a.j=f?_o(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function cl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Up(a,d,f){d instanceof Eo?(a.i=d,IE(a.i,a.h)):(f||(d=wo(d,EE)),a.i=new Eo(d,a.h))}function Ge(a,d,f){a.i.set(d,f)}function dl(a){return Ge(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function _o(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function wo(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,yE),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function yE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Bp=/[#\/\?@]/g,_E=/[#\?:]/g,wE=/[#\?]/g,EE=/[#\?@]/g,TE=/#/g;function Eo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Hr(a){a.g||(a.g=new Map,a.h=0,a.i&&vE(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Eo.prototype,t.add=function(a,d){Hr(this),this.i=null,a=di(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function zp(a,d){Hr(a),d=di(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function $p(a,d){return Hr(a),d=di(a,d),a.g.has(d)}t.forEach=function(a,d){Hr(this),this.g.forEach(function(f,_){f.forEach(function(V){a.call(d,V,_,this)},this)},this)},t.na=function(){Hr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let _=0;_<d.length;_++){const V=a[_];for(let B=0;B<V.length;B++)f.push(d[_])}return f},t.V=function(a){Hr(this);let d=[];if(typeof a=="string")$p(this,a)&&(d=d.concat(this.g.get(di(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Hr(this),this.i=null,a=di(this,a),$p(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function qp(a,d,f){zp(a,d),0<f.length&&(a.i=null,a.g.set(di(a,d),O(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var _=d[f];const B=encodeURIComponent(String(_)),ee=this.V(_);for(_=0;_<ee.length;_++){var V=B;ee[_]!==""&&(V+="="+encodeURIComponent(String(ee[_]))),a.push(V)}}return this.i=a.join("&")};function di(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function IE(a,d){d&&!a.j&&(Hr(a),a.i=null,a.g.forEach(function(f,_){var V=_.toLowerCase();_!=V&&(zp(this,_),qp(this,V,f))},a)),a.j=d}function SE(a,d){const f=new xt;if(u.Image){const _=new Image;_.onload=w(Wr,f,"TestLoadImage: loaded",!0,d,_),_.onerror=w(Wr,f,"TestLoadImage: error",!1,d,_),_.onabort=w(Wr,f,"TestLoadImage: abort",!1,d,_),_.ontimeout=w(Wr,f,"TestLoadImage: timeout",!1,d,_),u.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else d(!1)}function AE(a,d){const f=new xt,_=new AbortController,V=setTimeout(()=>{_.abort(),Wr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:_.signal}).then(B=>{clearTimeout(V),B.ok?Wr(f,"TestPingServer: ok",!0,d):Wr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(V),Wr(f,"TestPingServer: error",!1,d)})}function Wr(a,d,f,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(f)}catch{}}function xE(){this.g=new _r}function CE(a,d,f){const _=f||"";try{vo(a,function(V,B){let ee=V;h(V)&&(ee=_e(V)),d.push(_+B+"="+encodeURIComponent(ee))})}catch(V){throw d.push(_+"type="+encodeURIComponent("_badmap")),V}}function hl(a){this.l=a.Ub||null,this.j=a.eb||!1}N(hl,Ae),hl.prototype.g=function(){return new fl(this.l,this.j)},hl.prototype.i=function(a){return function(){return a}}({});function fl(a,d){j.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(fl,j),t=fl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Io(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||u).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,To(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?To(this):Io(this),this.readyState==3&&Hp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,To(this))},t.Qa=function(a){this.g&&(this.response=a,To(this))},t.ga=function(){this.g&&To(this)};function To(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Io(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Io(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Wp(a){let d="";return M(a,function(f,_){d+=_,d+=":",d+=f,d+=`\r
`}),d}function Vc(a,d,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=Wp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ge(a,d,f))}function ut(a){j.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(ut,j);var PE=/^https?$/i,NE=["POST","PUT"];t=ut.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Be.g(),this.v=this.o?jt(this.o):jt(Be),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(B){Kp(this,B);return}if(a=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)f.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const B of _.keys())f.set(B,_.get(B));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(B=>B.toLowerCase()=="content-type"),V=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(NE,d,void 0))||_||V||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ee]of f)this.g.setRequestHeader(B,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yp(this),this.u=!0,this.g.send(a),this.u=!1}catch(B){Kp(this,B)}};function Kp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Gp(a),pl(a)}function Gp(a){a.A||(a.A=!0,L(a,"complete"),L(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,L(this,"complete"),L(this,"abort"),pl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pl(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qp(this):this.bb())},t.bb=function(){Qp(this)};function Qp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Er(a)!=4||a.Z()!=2)){if(a.u&&Er(a)==4)ne(a.Ea,0,a);else if(L(a,"readystatechange"),Er(a)==4){a.h=!1;try{const ee=a.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var _;if(_=ee===0){var V=String(a.D).match(yo)[1]||null;!V&&u.self&&u.self.location&&(V=u.self.location.protocol.slice(0,-1)),_=!PE.test(V?V.toLowerCase():"")}f=_}if(f)L(a,"complete"),L(a,"success");else{a.m=6;try{var B=2<Er(a)?a.g.statusText:""}catch{B=""}a.l=B+" ["+a.Z()+"]",Gp(a)}}finally{pl(a)}}}}function pl(a,d){if(a.g){Yp(a);const f=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||L(a,"ready");try{f.onreadystatechange=_}catch{}}}function Yp(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Er(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Bt(d)}};function Xp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function RE(a){const d={};a=(a.g&&2<=Er(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(I(a[_]))continue;var f=R(a[_]);const V=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const B=d[V]||[];d[V]=B,B.push(f)}g(d,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function So(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Jp(a){this.Aa=0,this.i=[],this.j=new xt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=So("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=So("baseRetryDelayMs",5e3,a),this.cb=So("retryDelaySeedMs",1e4,a),this.Wa=So("forwardChannelMaxRetries",2,a),this.wa=So("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new il(a&&a.concurrentRequestLimit),this.Da=new xE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Jp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,_){ce(0),this.W=a,this.H=d||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=am(this,null,this.W),gl(this)};function Lc(a){if(Zp(a),a.G==3){var d=a.U++,f=wr(a.I);if(Ge(f,"SID",a.K),Ge(f,"RID",d),Ge(f,"TYPE","terminate"),Ao(a,f),d=new Ct(a,a.j,d),d.L=2,d.v=dl(wr(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=d.v,f=!0),f||(d.g=lm(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ns(d)}om(a)}function ml(a){a.g&&(Uc(a),a.g.cancel(),a.g=null)}function Zp(a){ml(a),a.u&&(u.clearTimeout(a.u),a.u=null),vl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function gl(a){if(!ol(a.h)&&!a.s){a.s=!0;var d=a.Ga;H||z(),$||(H(),$=!0),D.add(d,a),a.B=0}}function kE(a,d){return al(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=$e(y(a.Ga,a,d),im(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new Ct(this,this.j,a);let B=this.o;if(this.S&&(B?(B=v(B),A(B,this.S)):B=this.S),this.m!==null||this.O||(V.H=B,B=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=tm(this,V,d),f=wr(this.I),Ge(f,"RID",a),Ge(f,"CVER",22),this.D&&Ge(f,"X-HTTP-Session-Id",this.D),Ao(this,f),B&&(this.O?d="headers="+encodeURIComponent(String(Wp(B)))+"&"+d:this.m&&Vc(f,this.m,B)),go(this.h,V),this.Ua&&Ge(f,"TYPE","init"),this.P?(Ge(f,"$req",d),Ge(f,"SID","null"),V.T=!0,zt(V,f,null)):zt(V,f,d),this.G=2}}else this.G==3&&(a?em(this,a):this.i.length==0||ol(this.h)||em(this))};function em(a,d){var f;d?f=d.l:f=a.U++;const _=wr(a.I);Ge(_,"SID",a.K),Ge(_,"RID",f),Ge(_,"AID",a.T),Ao(a,_),a.m&&a.o&&Vc(_,a.m,a.o),f=new Ct(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=tm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),go(a.h,f),zt(f,_,d)}function Ao(a,d){a.H&&M(a.H,function(f,_){Ge(d,_,f)}),a.l&&vo({},function(f,_){Ge(d,_,f)})}function tm(a,d,f){f=Math.min(a.i.length,f);var _=a.l?y(a.l.Na,a.l,a):null;e:{var V=a.i;let B=-1;for(;;){const ee=["count="+f];B==-1?0<f?(B=V[0].g,ee.push("ofs="+B)):B=0:ee.push("ofs="+B);let ze=!0;for(let Dt=0;Dt<f;Dt++){let De=V[Dt].g;const $t=V[Dt].map;if(De-=B,0>De)B=Math.max(0,V[Dt].g-100),ze=!1;else try{CE($t,ee,"req"+De+"_")}catch{_&&_($t)}}if(ze){_=ee.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,_}function nm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;H||z(),$||(H(),$=!0),D.add(d,a),a.v=0}}function Fc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=$e(y(a.Fa,a),im(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,rm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=$e(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),ml(this),rm(this))};function Uc(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function rm(a){a.g=new Ct(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=wr(a.qa);Ge(d,"RID","rpc"),Ge(d,"SID",a.K),Ge(d,"AID",a.T),Ge(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ge(d,"TO",a.ja),Ge(d,"TYPE","xmlhttp"),Ao(a,d),a.m&&a.o&&Vc(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=dl(wr(d)),f.m=null,f.P=!0,co(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ml(this),Fc(this),ce(19))};function vl(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function sm(a,d){var f=null;if(a.g==d){vl(a),Uc(a),a.g=null;var _=2}else if(mo(a.h,d))f=d.D,ll(a.h,d),_=1;else return;if(a.G!=0){if(d.o)if(_==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var V=a.B;_=re(),L(_,new Ue(_,f)),gl(a)}else nm(a);else if(V=d.s,V==3||V==0&&0<d.X||!(_==1&&kE(a,d)||_==2&&Fc(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),V){case 1:ks(a,5);break;case 4:ks(a,10);break;case 3:ks(a,6);break;default:ks(a,2)}}}function im(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function ks(a,d){if(a.j.info("Error code "+d),d==2){var f=y(a.fb,a),_=a.Xa;const V=!_;_=new Rs(_||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ul(_,"https"),dl(_),V?SE(_.toString(),f):AE(_.toString(),f)}else ce(2);a.G=0,a.l&&a.l.sa(d),om(a),Zp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function om(a){if(a.G=0,a.ka=[],a.l){const d=Ze(a.h);(d.length!=0||a.i.length!=0)&&(U(a.ka,d),U(a.ka,a.i),a.h.i.length=0,O(a.i),a.i.length=0),a.l.ra()}}function am(a,d,f){var _=f instanceof Rs?wr(f):new Rs(f);if(_.g!="")d&&(_.g=d+"."+_.g),cl(_,_.s);else{var V=u.location;_=V.protocol,d=d?d+"."+V.hostname:V.hostname,V=+V.port;var B=new Rs(null);_&&ul(B,_),d&&(B.g=d),V&&cl(B,V),f&&(B.l=f),_=B}return f=a.D,d=a.ya,f&&d&&Ge(_,f,d),Ge(_,"VER",a.la),Ao(a,_),_}function lm(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new ut(new hl({eb:f})):new ut(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function um(){}t=um.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yl(){}yl.prototype.g=function(a,d){return new In(a,d)};function In(a,d){j.call(this),this.g=new Jp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!I(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!I(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new hi(this)}N(In,j),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Lc(this.g)},In.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=_e(a),a=f);d.i.push(new po(d.Ya++,a)),d.G==3&&gl(d)},In.prototype.N=function(){this.g.l=null,delete this.j,Lc(this.g),delete this.g,In.aa.N.call(this)};function cm(a){oe.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}N(cm,oe);function dm(){Q.call(this),this.status=1}N(dm,Q);function hi(a){this.g=a}N(hi,um),hi.prototype.ua=function(){L(this.g,"a")},hi.prototype.ta=function(a){L(this.g,new cm(a))},hi.prototype.sa=function(a){L(this.g,new dm)},hi.prototype.ra=function(){L(this.g,"b")},yl.prototype.createWebChannel=yl.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,_0=function(){return new yl},y0=function(){return re()},v0=Y,Th={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lt.NO_ERROR=0,lt.TIMEOUT=8,lt.HTTP_ERROR=6,nu=lt,ht.COMPLETE="complete",g0=ht,tn.EventType=sr,sr.OPEN="a",sr.CLOSE="b",sr.ERROR="c",sr.MESSAGE="d",j.prototype.listen=j.prototype.K,$o=tn,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,m0=ut}).apply(typeof Vl<"u"?Vl:typeof self<"u"?self:typeof window<"u"?window:{});const jg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Bf("@firebase/firestore");function Mo(){return Xs.logLevel}function ue(t,...e){if(Xs.logLevel<=Pe.DEBUG){const n=e.map($f);Xs.debug(`Firestore (${oo}): ${t}`,...n)}}function Lr(t,...e){if(Xs.logLevel<=Pe.ERROR){const n=e.map($f);Xs.error(`Firestore (${oo}): ${t}`,...n)}}function Ca(t,...e){if(Xs.logLevel<=Pe.WARN){const n=e.map($f);Xs.warn(`Firestore (${oo}): ${t}`,...n)}}function $f(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t="Unexpected state"){const e=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: `+t;throw Lr(e),new Error(e)}function Le(t,e){t||ve()}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class zA{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new UA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new hn(e)}}class $A{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new $A(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Le(this.o===void 0);const r=i=>{i.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new HA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=KA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Me(t,e){return t<e?-1:t>e?1:0}function Qi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new St(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new St(0,0))}static max(){return new Ee(new St(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(),r===void 0?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ye extends Pa{construct(e,n,r){return new Ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const GA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Pa{construct(e,n,r){return new bt(e,n,r)}static isValidIdentifier(e){return GA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new se(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new se(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new se(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Ye.fromString(e))}static fromName(e){return new de(Ye.fromString(e).popFirst(5))}static empty(){return new de(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Ye(e.slice()))}}function QA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ee.fromTimestamp(r===1e9?new St(n+1,0):new St(n,r));return new ws(s,de.empty(),e)}function YA(t){return new ws(t.readTime,t.key,-1)}class ws{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ws(Ee.min(),de.empty(),-1)}static max(){return new ws(Ee.max(),de.empty(),-1)}}function XA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==JA)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++u,u===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ex(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ga(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}qf.oe=-1;function mc(t){return t==null}function bu(t){return t===0&&1/t==-1/0}function tx(t){return typeof t=="number"&&Number.isInteger(t)&&!bu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function si(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function E0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){this.comparator=e,this.root=n||Ot.EMPTY}insert(e,n){return new it(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ll(this.root,e,this.comparator,!0)}}class Ll{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ot.RED,this.left=s??Ot.EMPTY,this.right=i??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ot(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ot.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mg(this.data.getIterator())}getIteratorFrom(e){return new Mg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class Mg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new Lt(bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new T0("Invalid base64 string: "+i):i}}(e);return new Ut(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const nx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(t){if(Le(!!t),typeof t=="string"){let e=0;const n=nx.exec(t);if(Le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(t.seconds),nanos:ft(t.nanos)}}function ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Js(t){return typeof t=="string"?Ut.fromBase64String(t):Ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wf(t){const e=t.mapValue.fields.__previous_value__;return Hf(e)?Wf(e):e}function Na(t){const e=Es(t.mapValue.fields.__local_write_time__.timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n,r,s,i,o,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}class Ra{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ra("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl={mapValue:{}};function Zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hf(t)?4:ix(t)?9007199254740991:sx(t)?10:11:ve()}function gr(t,e){if(t===e)return!0;const n=Zs(t);if(n!==Zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Na(t).isEqual(Na(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Es(s.timestampValue),u=Es(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Js(s.bytesValue).isEqual(Js(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ft(s.geoPointValue.latitude)===ft(i.geoPointValue.latitude)&&ft(s.geoPointValue.longitude)===ft(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ft(s.integerValue)===ft(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ft(s.doubleValue),u=ft(i.doubleValue);return o===u?bu(o)===bu(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Qi(t.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Dg(o)!==Dg(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!gr(o[c],u[c])))return!1;return!0}(t,e);default:return ve()}}function ka(t,e){return(t.values||[]).find(n=>gr(n,e))!==void 0}function Yi(t,e){if(t===e)return 0;const n=Zs(t),r=Zs(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=ft(i.integerValue||i.doubleValue),c=ft(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return Og(t.timestampValue,e.timestampValue);case 4:return Og(Na(t),Na(e));case 5:return Me(t.stringValue,e.stringValue);case 6:return function(i,o){const u=Js(i),c=Js(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const p=Me(u[h],c[h]);if(p!==0)return p}return Me(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=Me(ft(i.latitude),ft(o.latitude));return u!==0?u:Me(ft(i.longitude),ft(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return bg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,h,p;const m=i.fields||{},y=o.fields||{},w=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=(c=y.value)===null||c===void 0?void 0:c.arrayValue,O=Me(((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0,((p=N==null?void 0:N.values)===null||p===void 0?void 0:p.length)||0);return O!==0?O:bg(w,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Fl.mapValue&&o===Fl.mapValue)return 0;if(i===Fl.mapValue)return 1;if(o===Fl.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const y=Me(c[m],p[m]);if(y!==0)return y;const w=Yi(u[c[m]],h[p[m]]);if(w!==0)return w}return Me(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ve()}}function Og(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=Es(t),r=Es(e),s=Me(n.seconds,r.seconds);return s!==0?s:Me(n.nanos,r.nanos)}function bg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Yi(n[s],r[s]);if(i)return i}return Me(n.length,r.length)}function Xi(t){return Ih(t)}function Ih(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Es(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Js(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ih(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ih(n.fields[o])}`;return s+"}"}(t.mapValue):ve()}function Vg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sh(t){return!!t&&"integerValue"in t}function Kf(t){return!!t&&"arrayValue"in t}function Lg(t){return!!t&&"nullValue"in t}function Fg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ru(t){return!!t&&"mapValue"in t}function sx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function na(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return si(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=na(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=na(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ix(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ru(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=na(n)}setAll(e){let n=bt.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=na(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ru(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ru(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){si(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new pn(na(this.value))}}function I0(t){const e=[];return si(t.fields,(n,r)=>{const s=new bt([n]);if(ru(r)){const i=I0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Yt(e,0,Ee.min(),Ee.min(),Ee.min(),pn.empty(),0)}static newFoundDocument(e,n,r,s){return new Yt(e,1,n,Ee.min(),r,s,0)}static newNoDocument(e,n){return new Yt(e,2,n,Ee.min(),Ee.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,Ee.min(),Ee.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.position=e,this.inclusive=n}}function Ug(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),n.key):r=Yi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n="asc"){this.field=e,this.dir=n}}function ox(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{}class wt extends S0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lx(e,n,r):n==="array-contains"?new dx(e,r):n==="in"?new hx(e,r):n==="not-in"?new fx(e,r):n==="array-contains-any"?new px(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ux(e,r):new cx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Yi(n,this.value)):n!==null&&Zs(this.value)===Zs(n)&&this.matchesComparison(Yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends S0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zn(e,n)}matches(e){return A0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function A0(t){return t.op==="and"}function x0(t){return ax(t)&&A0(t)}function ax(t){for(const e of t.filters)if(e instanceof Zn)return!1;return!0}function Ah(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+Xi(t.value);if(x0(t))return t.filters.map(e=>Ah(e)).join(",");{const e=t.filters.map(n=>Ah(n)).join(",");return`${t.op}(${e})`}}function C0(t,e){return t instanceof wt?function(r,s){return s instanceof wt&&r.op===s.op&&r.field.isEqual(s.field)&&gr(r.value,s.value)}(t,e):t instanceof Zn?function(r,s){return s instanceof Zn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&C0(o,s.filters[u]),!0):!1}(t,e):void ve()}function P0(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${Xi(n.value)}`}(t):t instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(P0).join(" ,")+"}"}(t):"Filter"}class lx extends wt{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class ux extends wt{constructor(e,n){super(e,"in",n),this.keys=N0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cx extends wt{constructor(e,n){super(e,"not-in",n),this.keys=N0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function N0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class dx extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kf(n)&&ka(n.arrayValue,this.value)}}class hx extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ka(this.value.arrayValue,n)}}class fx extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ka(this.value.arrayValue,n)}}class px extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ka(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function zg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new mx(t,e,n,r,s,i,o)}function Gf(t){const e=Te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ah(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),mc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xi(r)).join(",")),e.ue=n}return e.ue}function Qf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ox(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!C0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bg(t.startAt,e.startAt)&&Bg(t.endAt,e.endAt)}function xh(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gx(t,e,n,r,s,i,o,u){return new Qa(t,e,n,r,s,i,o,u)}function gc(t){return new Qa(t)}function $g(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function R0(t){return t.collectionGroup!==null}function ra(t){const e=Te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Lt(bt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Lu(i,r))}),n.has(bt.keyField().canonicalString())||e.ce.push(new Lu(bt.keyField(),r))}return e.ce}function hr(t){const e=Te(t);return e.le||(e.le=vx(e,ra(t))),e.le}function vx(t,e){if(t.limitType==="F")return zg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Lu(s.field,i)});const n=t.endAt?new Vu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vu(t.startAt.position,t.startAt.inclusive):null;return zg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ch(t,e){const n=t.filters.concat([e]);return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ph(t,e,n){return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vc(t,e){return Qf(hr(t),hr(e))&&t.limitType===e.limitType}function k0(t){return`${Gf(hr(t))}|lt:${t.limitType}`}function mi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>P0(s)).join(", ")}]`),mc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Xi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Xi(s)).join(",")),`Target(${r})`}(hr(t))}; limitType=${t.limitType})`}function yc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):de.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ra(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=Ug(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,ra(r),s)||r.endAt&&!function(o,u,c){const h=Ug(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,ra(r),s))}(t,e)}function yx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function j0(t){return(e,n)=>{let r=!1;for(const s of ra(t)){const i=_x(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _x(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?Yi(c,h):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){si(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return E0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new it(de.comparator);function Fr(){return wx}const D0=new it(de.comparator);function qo(...t){let e=D0;for(const n of t)e=e.insert(n.key,n);return e}function M0(t){let e=D0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Us(){return sa()}function O0(){return sa()}function sa(){return new ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ex=new it(de.comparator),Tx=new Lt(de.comparator);function Ce(...t){let e=Tx;for(const n of t)e=e.add(n);return e}const Ix=new Lt(Me);function Sx(){return Ix}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bu(e)?"-0":e}}function b0(t){return{integerValue:""+t}}function Ax(t,e){return tx(e)?b0(e):Yf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this._=void 0}}function xx(t,e,n){return t instanceof ja?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Hf(i)&&(i=Wf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Da?L0(t,e):t instanceof Ma?F0(t,e):function(s,i){const o=V0(s,i),u=qg(o)+qg(s.Pe);return Sh(o)&&Sh(s.Pe)?b0(u):Yf(s.serializer,u)}(t,e)}function Cx(t,e,n){return t instanceof Da?L0(t,e):t instanceof Ma?F0(t,e):n}function V0(t,e){return t instanceof Fu?function(r){return Sh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ja extends _c{}class Da extends _c{constructor(e){super(),this.elements=e}}function L0(t,e){const n=U0(e);for(const r of t.elements)n.some(s=>gr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ma extends _c{constructor(e){super(),this.elements=e}}function F0(t,e){let n=U0(e);for(const r of t.elements)n=n.filter(s=>!gr(s,r));return{arrayValue:{values:n}}}class Fu extends _c{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function qg(t){return ft(t.integerValue||t.doubleValue)}function U0(t){return Kf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n){this.field=e,this.transform=n}}function Nx(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Da&&s instanceof Da||r instanceof Ma&&s instanceof Ma?Qi(r.elements,s.elements,gr):r instanceof Fu&&s instanceof Fu?gr(r.Pe,s.Pe):r instanceof ja&&s instanceof ja}(t.transform,e.transform)}class Rx{constructor(e,n){this.version=e,this.transformResults=n}}class Un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function su(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wc{}function B0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xf(t.key,Un.none()):new Ya(t.key,t.data,Un.none());{const n=t.data,r=pn.empty();let s=new Lt(bt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new xs(t.key,r,new Cn(s.toArray()),Un.none())}}function kx(t,e,n){t instanceof Ya?function(s,i,o){const u=s.value.clone(),c=Wg(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof xs?function(s,i,o){if(!su(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=Wg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(z0(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ia(t,e,n,r){return t instanceof Ya?function(i,o,u,c){if(!su(i.precondition,o))return u;const h=i.value.clone(),p=Kg(i.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof xs?function(i,o,u,c){if(!su(i.precondition,o))return u;const h=Kg(i.fieldTransforms,c,o),p=o.data;return p.setAll(z0(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,u){return su(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function jx(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=V0(r.transform,s||null);i!=null&&(n===null&&(n=pn.empty()),n.set(r.field,i))}return n||null}function Hg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Qi(r,s,(i,o)=>Nx(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ya extends wc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xs extends wc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function z0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Wg(t,e,n){const r=new Map;Le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,Cx(o,u,n[s]))}return r}function Kg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,xx(i,o,e))}return r}class Xf extends wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dx extends wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&kx(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ia(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ia(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=O0();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=B0(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Qi(this.mutations,e.mutations,(n,r)=>Hg(n,r))&&Qi(this.baseMutations,e.baseMutations,(n,r)=>Hg(n,r))}}class Jf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Le(e.mutations.length===r.length);let s=function(){return Ex}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Jf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,Re;function Vx(t){switch(t){default:return ve();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function $0(t){if(t===void 0)return Lr("GRPC error has no .code"),W.UNKNOWN;switch(t){case yt.OK:return W.OK;case yt.CANCELLED:return W.CANCELLED;case yt.UNKNOWN:return W.UNKNOWN;case yt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case yt.INTERNAL:return W.INTERNAL;case yt.UNAVAILABLE:return W.UNAVAILABLE;case yt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case yt.NOT_FOUND:return W.NOT_FOUND;case yt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case yt.ABORTED:return W.ABORTED;case yt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case yt.DATA_LOSS:return W.DATA_LOSS;default:return ve()}}(Re=yt||(yt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new qs([4294967295,4294967295],0);function Gg(t){const e=Lx().encode(t),n=new p0;return n.update(e),new Uint8Array(n.digest())}function Qg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qs([n,r],0),new qs([s,i],0)]}class Zf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ho(`Invalid padding: ${n}`);if(r<0)throw new Ho(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ho(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ho(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=qs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(qs.fromNumber(r)));return s.compare(Fx)===1&&(s=new qs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Gg(e),[r,s]=Qg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Zf(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=Gg(e),[r,s]=Qg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ho extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ec(Ee.min(),s,new it(Me),Fr(),Ce())}}class Xa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xa(r,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class q0{constructor(e,n){this.targetId=e,this.me=n}}class H0{constructor(e,n,r=Ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Yg{constructor(){this.fe=0,this.ge=Jg(),this.pe=Ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ce(),n=Ce(),r=Ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ve()}}),new Xa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Jg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ux{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fr(),this.qe=Xg(),this.Qe=new it(Me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(xh(i))if(r===0){const o=new de(i.path);this.Ue(n,o,Yt.newNoDocument(o,Ee.min()))}else Le(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=Js(r).toUint8Array()}catch(c){if(c instanceof T0)return Ca("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Zf(o,s,i)}catch(c){return Ca(c instanceof Ho?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&xh(u.target)){const c=new de(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Yt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Ce();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Ec(e,n,this.Qe,this.ke,r);return this.ke=Fr(),this.qe=Xg(),this.Qe=new it(Me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Yg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Lt(Me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Yg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Xg(){return new it(de.comparator)}function Jg(){return new it(de.comparator)}const Bx={asc:"ASCENDING",desc:"DESCENDING"},zx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$x={and:"AND",or:"OR"};class qx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nh(t,e){return t.useProto3Json||mc(e)?e:{value:e}}function Uu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Hx(t,e){return Uu(t,e.toTimestamp())}function fr(t){return Le(!!t),Ee.fromTimestamp(function(n){const r=Es(n);return new St(r.seconds,r.nanos)}(t))}function ep(t,e){return Rh(t,e).canonicalString()}function Rh(t,e){const n=function(s){return new Ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function K0(t){const e=Ye.fromString(t);return Le(J0(e)),e}function kh(t,e){return ep(t.databaseId,e.path)}function _d(t,e){const n=K0(e);if(n.get(1)!==t.databaseId.projectId)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(Q0(n))}function G0(t,e){return ep(t.databaseId,e)}function Wx(t){const e=K0(t);return e.length===4?Ye.emptyPath():Q0(e)}function jh(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Q0(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Zg(t,e,n){return{name:kh(t,e),fields:n.value.mapValue.fields}}function Kx(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(Le(p===void 0||typeof p=="string"),Ut.fromBase64String(p||"")):(Le(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Ut.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const p=h.code===void 0?W.UNKNOWN:$0(h.code);return new se(p,h.message||"")}(o);n=new H0(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_d(t,r.document.name),i=fr(r.document.updateTime),o=r.document.createTime?fr(r.document.createTime):Ee.min(),u=new pn({mapValue:{fields:r.document.fields}}),c=Yt.newFoundDocument(s,i,o,u),h=r.targetIds||[],p=r.removedTargetIds||[];n=new iu(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_d(t,r.document),i=r.readTime?fr(r.readTime):Ee.min(),o=Yt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new iu([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_d(t,r.document),i=r.removedTargetIds||[];n=new iu([],i,s,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new bx(s,i),u=r.targetId;n=new q0(u,o)}}return n}function Gx(t,e){let n;if(e instanceof Ya)n={update:Zg(t,e.key,e.value)};else if(e instanceof Xf)n={delete:kh(t,e.key)};else if(e instanceof xs)n={update:Zg(t,e.key,e.data),updateMask:rC(e.fieldMask)};else{if(!(e instanceof Dx))return ve();n={verify:kh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof ja)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Da)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ma)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Fu)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Hx(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ve()}(t,e.precondition)),n}function Qx(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?fr(s.updateTime):fr(i);return o.isEqual(Ee.min())&&(o=fr(i)),new Rx(o,s.transformResults||[])}(n,e))):[]}function Yx(t,e){return{documents:[G0(t,e.path)]}}function Xx(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=G0(t,s);const i=function(h){if(h.length!==0)return X0(Zn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:gi(y.field),direction:eC(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Nh(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function Jx(t){let e=Wx(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Le(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const y=Y0(m);return y instanceof Zn&&x0(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(N){return new Lu(vi(N.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(y))}(n.orderBy));let u=null;n.limit&&(u=function(m){let y;return y=typeof m=="object"?m.value:m,mc(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(m){const y=!!m.before,w=m.values||[];return new Vu(w,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,w=m.values||[];return new Vu(w,y)}(n.endAt)),gx(e,s,o,i,u,"F",c,h)}function Zx(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Y0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vi(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=vi(n.unaryFilter.field);return wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=vi(n.unaryFilter.field);return wt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vi(n.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):t.fieldFilter!==void 0?function(n){return wt.create(vi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(r=>Y0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve()}function eC(t){return Bx[t]}function tC(t){return zx[t]}function nC(t){return $x[t]}function gi(t){return{fieldPath:t.canonicalString()}}function vi(t){return bt.fromServerFormat(t.fieldPath)}function X0(t){return t instanceof wt?function(n){if(n.op==="=="){if(Fg(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NAN"}};if(Lg(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Fg(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NOT_NAN"}};if(Lg(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gi(n.field),op:tC(n.op),value:n.value}}}(t):t instanceof Zn?function(n){const r=n.getFilters().map(s=>X0(s));return r.length===1?r[0]:{compositeFilter:{op:nC(n.op),filters:r}}}(t):ve()}function rC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function J0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r,s,i=Ee.min(),o=Ee.min(),u=Ut.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.ct=e}}function iC(t){const e=Jx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.un=new aC}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(ws.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class aC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Lt(Ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Lt(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ji(0)}static kn(){return new Ji(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.changes=new ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ia(r.mutation,s,Cn.empty(),St.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){const s=Us();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=qo();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Fr();const o=sa(),u=function(){return sa()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof xs)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),ia(p.mutation,h,p.mutation.getFieldMask(),St.now())):o.set(h.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return u.set(h,new uC(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,n){const r=sa();let s=new it((o,u)=>o-u),i=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||Cn.empty();p=u.applyToLocalView(h,p),r.set(c,p);const m=(s.get(u.batchId)||Ce()).add(c);s=s.insert(u.batchId,m)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,p=c.value,m=O0();p.forEach(y=>{if(!i.has(y)){const w=B0(n.get(y),r.get(y));w!==null&&m.set(y,w),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):R0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(Us());let u=-1,c=i;return o.next(h=>G.forEach(h,(p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),i.get(p)?G.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{c=c.insert(p,y)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,Ce())).next(p=>({batchId:u,changes:M0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let s=qo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=qo();return this.indexManager.getCollectionParents(e,i).next(u=>G.forEach(u,c=>{const h=function(m,y){return new Qa(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Yt.newInvalidDocument(p)))});let u=qo();return o.forEach((c,h)=>{const p=i.get(c);p!==void 0&&ia(p.mutation,h,Cn.empty(),St.now()),yc(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fr(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:iC(s.bundledQuery),readTime:fr(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.overlays=new it(de.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Us();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=Us(),i=n.length+1,o=new de(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new it((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Us(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=Us(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>u.set(h,p)),!(u.size()>=s)););return G.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ox(n,r));let i=this.Ir.get(n);i===void 0&&(i=Ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this.Tr=new Lt(Nt.Er),this.dr=new Lt(Nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Nt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new de(new Ye([])),r=new Nt(n,e),s=new Nt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new de(new Ye([])),r=new Nt(n,e),s=new Nt(n,e+1);let i=Ce();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Nt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return de.comparator(e.key,n.key)||Me(e.wr,n.wr)}static Ar(e,n){return Me(e.wr,n.wr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Lt(Nt.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Mx(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new Nt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),s=new Nt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Lt(Me);return n.forEach(s=>{const i=new Nt(s,0),o=new Nt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;de.isDocumentKey(i)||(i=i.child(""));const o=new Nt(new de(i),0);let u=new Lt(Me);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.wr)),!0)},o),G.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return G.forEach(n.mutations,s=>{const i=new Nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Nt(n,0),s=this.br.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.Mr=e,this.docs=function(){return new it(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Yt.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Fr();const o=n.path,u=new de(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||XA(YA(p),r)<=0||(s.has(p.key)||yc(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ve()}Or(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new gC(this)}getSize(e){return G.resolve(this.size)}}class gC extends lC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.persistence=e,this.Nr=new ao(n=>Gf(n),Qf),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new tp,this.targetCount=0,this.kr=Ji.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ji(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new qf(0),this.Kr=!1,this.Kr=!0,this.$r=new fC,this.referenceDelegate=e(this),this.Ur=new vC(this),this.indexManager=new oC,this.remoteDocumentCache=function(s){return new mC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new sC(n),this.Gr=new dC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new pC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const s=new _C(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return G.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class _C extends ZA{constructor(e){super(),this.currentSequenceNumber=e}}class np{constructor(e){this.persistence=e,this.Jr=new tp,this.Yr=null}static Zr(e){return new np(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,r=>{const s=de.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ce(),s=Ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new rp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ES()?8:ex(Zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new wC;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Mo()<=Pe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",mi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Mo()<=Pe.DEBUG&&ue("QueryEngine","Query:",mi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Mo()<=Pe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",mi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(n))):G.resolve())}Yi(e,n){if($g(n))return G.resolve(null);let r=hr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ph(n,null,"F"),r=hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ce(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,u);return this.ns(n,h,o,c.readTime)?this.Yi(e,Ph(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return $g(n)||s.isEqual(Ee.min())?G.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?G.resolve(null):(Mo()<=Pe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mi(n)),this.rs(e,o,n,QA(s,-1)).next(u=>u))})}ts(e,n){let r=new Lt(j0(e));return n.forEach((s,i)=>{yc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Mo()<=Pe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",mi(n)),this.Ji.getDocumentsMatchingQuery(e,n,ws.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new it(Me),this._s=new ao(i=>Gf(i),Qf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function IC(t,e,n,r){return new TC(t,e,n,r)}async function Z0(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=Ce();for(const h of s){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){u.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:u}))})})}function SC(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,h,p){const m=h.batch,y=m.keys();let w=G.resolve();return y.forEach(N=>{w=w.next(()=>p.getEntry(c,N)).next(O=>{const U=h.docVersions.get(N);Le(U!==null),O.version.compareTo(U)<0&&(m.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),p.addEntry(O)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=Ce();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ew(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function AC(t,e){const n=Te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((p,m)=>{const y=s.get(m);if(!y)return;u.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let w=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(Ut.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,r)),s=s.insert(m,w),function(O,U,x){return O.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(y,w,p)&&u.push(n.Ur.updateTargetData(i,w))});let c=Fr(),h=Ce();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),u.push(xC(i,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(Ee.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(p)}return G.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function xC(t,e,n){let r=Ce(),s=Ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Fr();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(Ee.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):ue("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function CC(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function PC(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new is(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Dh(t,e,n){const r=Te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ga(o))throw o;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function ev(t,e,n){const r=Te(t);let s=Ee.min(),i=Ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=Te(c),y=m._s.get(p);return y!==void 0?G.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)}(r,o,hr(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Ee.min(),n?i:Ce())).next(u=>(NC(r,yx(e),u),{documents:u,Ts:i})))}function NC(t,e,n){let r=t.us.get(e)||Ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class tv{constructor(){this.activeTargetIds=Sx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RC{constructor(){this.so=new tv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new tv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=null;function wd(){return Ul===null?Ul=function(){return 268435456+Math.round(2147483648*Math.random())}():Ul++,"0x"+Ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class MC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=wd(),c=this.xo(n,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(p=>(ue("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw Ca("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=jC[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=wd();return new Promise((o,u)=>{const c=new m0;c.setWithCredentials(!0),c.listenOnce(g0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case nu.NO_ERROR:const p=c.getResponseJson();ue(Kt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case nu.TIMEOUT:ue(Kt,`RPC '${e}' ${i} timed out`),u(new se(W.DEADLINE_EXCEEDED,"Request time out"));break;case nu.HTTP_ERROR:const m=c.getStatus();if(ue(Kt,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y==null?void 0:y.error;if(w&&w.status&&w.message){const N=function(U){const x=U.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(x)>=0?x:W.UNKNOWN}(w.status);u(new se(N,w.message))}else u(new se(W.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new se(W.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{ue(Kt,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);ue(Kt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=wd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_0(),u=y0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");ue(Kt,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let y=!1,w=!1;const N=new DC({Io:U=>{w?ue(Kt,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(y||(ue(Kt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),ue(Kt,`RPC '${e}' stream ${s} sending:`,U),m.send(U))},To:()=>m.close()}),O=(U,x,I)=>{U.listen(x,S=>{try{I(S)}catch(b){setTimeout(()=>{throw b},0)}})};return O(m,$o.EventType.OPEN,()=>{w||(ue(Kt,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),O(m,$o.EventType.CLOSE,()=>{w||(w=!0,ue(Kt,`RPC '${e}' stream ${s} transport closed`),N.So())}),O(m,$o.EventType.ERROR,U=>{w||(w=!0,Ca(Kt,`RPC '${e}' stream ${s} transport errored:`,U),N.So(new se(W.UNAVAILABLE,"The operation could not be completed")))}),O(m,$o.EventType.MESSAGE,U=>{var x;if(!w){const I=U.data[0];Le(!!I);const S=I,b=S.error||((x=S[0])===null||x===void 0?void 0:x.error);if(b){ue(Kt,`RPC '${e}' stream ${s} received error:`,b);const P=b.status;let M=function(E){const A=yt[E];if(A!==void 0)return $0(A)}(P),g=b.message;M===void 0&&(M=W.INTERNAL,g="Unknown error status: "+P+" with message "+b.message),w=!0,N.So(new se(M,g)),m.close()}else ue(Kt,`RPC '${e}' stream ${s} received:`,I),N.bo(I)}}),O(u,v0.STAT_EVENT,U=>{U.stat===Th.PROXY?ue(Kt,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===Th.NOPROXY&&ue(Kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){return new qx(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Lr(n.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new se(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OC extends nw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Kx(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?fr(o.readTime):Ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=jh(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=xh(c)?{documents:Yx(i,c)}:{query:Xx(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=W0(i,o.resumeToken);const h=Nh(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(Ee.min())>0){u.readTime=Uu(i,o.snapshotVersion.toTimestamp());const h=Nh(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=Zx(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=jh(this.serializer),n.removeTarget=e,this.a_(n)}}class bC extends nw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Qx(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=jh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Gx(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Rh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se(W.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,Rh(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(W.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class LC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Lr(n),this.D_=!1):ue("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ii(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=Te(c);h.L_.add(4),await Ja(h),h.q_.set("Unknown"),h.L_.delete(4),await Ic(h)}(this))})}),this.q_=new LC(r,s)}}async function Ic(t){if(ii(t))for(const e of t.B_)await e(!0)}async function Ja(t){for(const e of t.B_)await e(!1)}function rw(t,e){const n=Te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ap(n)?op(n):lo(n).r_()&&ip(n,e))}function sp(t,e){const n=Te(t),r=lo(n);n.N_.delete(e),r.r_()&&sw(n,e),n.N_.size===0&&(r.r_()?r.o_():ii(n)&&n.q_.set("Unknown"))}function ip(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lo(t).A_(e)}function sw(t,e){t.Q_.xe(e),lo(t).R_(e)}function op(t){t.Q_=new Ux({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),lo(t).start(),t.q_.v_()}function ap(t){return ii(t)&&!lo(t).n_()&&t.N_.size>0}function ii(t){return Te(t).L_.size===0}function iw(t){t.Q_=void 0}async function UC(t){t.q_.set("Online")}async function BC(t){t.N_.forEach((e,n)=>{ip(t,e)})}async function zC(t,e){iw(t),ap(t)?(t.q_.M_(e),op(t)):t.q_.set("Unknown")}async function $C(t,e,n){if(t.q_.set("Online"),e instanceof H0&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bu(t,r)}else if(e instanceof iu?t.Q_.Ke(e):e instanceof q0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ee.min()))try{const r=await ew(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(Ut.EMPTY_BYTE_STRING,p.snapshotVersion)),sw(i,c);const m=new is(p.target,c,h,p.sequenceNumber);ip(i,m)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),await Bu(t,r)}}async function Bu(t,e,n){if(!Ga(e))throw e;t.L_.add(1),await Ja(t),t.q_.set("Offline"),n||(n=()=>ew(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ic(t)})}function ow(t,e){return e().catch(n=>Bu(t,n,e))}async function Sc(t){const e=Te(t),n=Ts(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qC(e);)try{const s=await CC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,HC(e,s)}catch(s){await Bu(e,s)}aw(e)&&lw(e)}function qC(t){return ii(t)&&t.O_.length<10}function HC(t,e){t.O_.push(e);const n=Ts(t);n.r_()&&n.V_&&n.m_(e.mutations)}function aw(t){return ii(t)&&!Ts(t).n_()&&t.O_.length>0}function lw(t){Ts(t).start()}async function WC(t){Ts(t).p_()}async function KC(t){const e=Ts(t);for(const n of t.O_)e.m_(n.mutations)}async function GC(t,e,n){const r=t.O_.shift(),s=Jf.from(r,e,n);await ow(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sc(t)}async function QC(t,e){e&&Ts(t).V_&&await async function(r,s){if(function(o){return Vx(o)&&o!==W.ABORTED}(s.code)){const i=r.O_.shift();Ts(r).s_(),await ow(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Sc(r)}}(t,e),aw(t)&&lw(t)}async function rv(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=ii(n);n.L_.add(3),await Ja(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ic(n)}async function YC(t,e){const n=Te(t);e?(n.L_.delete(2),await Ic(n)):e||(n.L_.add(2),await Ja(n),n.q_.set("Unknown"))}function lo(t){return t.K_||(t.K_=function(n,r,s){const i=Te(n);return i.w_(),new OC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:UC.bind(null,t),Ro:BC.bind(null,t),mo:zC.bind(null,t),d_:$C.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ap(t)?op(t):t.q_.set("Unknown")):(await t.K_.stop(),iw(t))})),t.K_}function Ts(t){return t.U_||(t.U_=function(n,r,s){const i=Te(n);return i.w_(),new bC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WC.bind(null,t),mo:QC.bind(null,t),f_:KC.bind(null,t),g_:GC.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Sc(t)):(await t.U_.stop(),t.O_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new lp(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function up(t,e){if(Lr("AsyncQueue",`${e}: ${t}`),Ga(t))return new se(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=qo(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new Vi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.W_=new it(de.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zi{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Zi(e,n,Vi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class JC{constructor(){this.queries=iv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Te(n),i=s.queries;s.queries=iv(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new se(W.ABORTED,"Firestore shutting down"))}}function iv(){return new ao(t=>k0(t),vc)}async function cp(t,e){const n=Te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new XC,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=up(o,`Initialization of query '${mi(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&hp(n)}async function dp(t,e){const n=Te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZC(t,e){const n=Te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&hp(n)}function e1(t,e,n){const r=Te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function hp(t){t.Y_.forEach(e=>{e.next()})}var Mh,ov;(ov=Mh||(Mh={})).ea="default",ov.Cache="cache";class fp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Zi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Zi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Mh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.key=e}}class cw{constructor(e){this.key=e}}class t1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ce(),this.mutatedKeys=Ce(),this.Aa=j0(e),this.Ra=new Vi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new sv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const y=s.get(p),w=yc(this.query,m)?m:null,N=!!y&&this.mutatedKeys.has(y.key),O=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let U=!1;y&&w?y.data.isEqual(w.data)?N!==O&&(r.track({type:3,doc:w}),U=!0):this.ga(y,w)||(r.track({type:2,doc:w}),U=!0,(c&&this.Aa(w,c)>0||h&&this.Aa(w,h)<0)&&(u=!0)):!y&&w?(r.track({type:0,doc:w}),U=!0):y&&!w&&(r.track({type:1,doc:y}),U=!0,(c||h)&&(u=!0)),U&&(w?(o=o.add(w),i=O?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(w,N){const O=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return O(w)-O(N)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new Zi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new cw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new uw(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Zi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class n1{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class r1{constructor(e){this.key=e,this.va=!1}}class s1{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ao(u=>k0(u),vc),this.Ma=new Map,this.xa=new Set,this.Oa=new it(de.comparator),this.Na=new Map,this.La=new tp,this.Ba={},this.ka=new Map,this.qa=Ji.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function i1(t,e,n=!0){const r=gw(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await dw(r,e,n,!0),s}async function o1(t,e){const n=gw(t);await dw(n,e,!0,!1)}async function dw(t,e,n,r){const s=await PC(t.localStore,hr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await a1(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&rw(t.remoteStore,s),u}async function a1(t,e,n,r,s){t.Ka=(m,y,w)=>async function(O,U,x,I){let S=U.view.ma(x);S.ns&&(S=await ev(O.localStore,U.query,!1).then(({documents:g})=>U.view.ma(g,S)));const b=I&&I.targetChanges.get(U.targetId),P=I&&I.targetMismatches.get(U.targetId)!=null,M=U.view.applyChanges(S,O.isPrimaryClient,b,P);return lv(O,U.targetId,M.wa),M.snapshot}(t,m,y,w);const i=await ev(t.localStore,e,!0),o=new t1(e,i.Ts),u=o.ma(i.documents),c=Xa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);lv(t,n,h.wa);const p=new n1(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function l1(t,e,n){const r=Te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!vc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Dh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sp(r.remoteStore,s.targetId),Oh(r,s.targetId)}).catch(Ka)):(Oh(r,s.targetId),await Dh(r.localStore,s.targetId,!0))}async function u1(t,e){const n=Te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sp(n.remoteStore,r.targetId))}async function c1(t,e,n){const r=v1(t);try{const s=await function(o,u){const c=Te(o),h=St.now(),p=u.reduce((w,N)=>w.add(N.key),Ce());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let N=Fr(),O=Ce();return c.cs.getEntries(w,p).next(U=>{N=U,N.forEach((x,I)=>{I.isValidDocument()||(O=O.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,N)).next(U=>{m=U;const x=[];for(const I of u){const S=jx(I,m.get(I.key).overlayedDocument);S!=null&&x.push(new xs(I.key,S,I0(S.value.mapValue),Un.exists(!0)))}return c.mutationQueue.addMutationBatch(w,h,x,u)}).next(U=>{y=U;const x=U.applyToLocalDocumentSet(m,O);return c.documentOverlayCache.saveOverlays(w,U.batchId,x)})}).then(()=>({batchId:y.batchId,changes:M0(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new it(Me)),h=h.insert(u,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Za(r,s.changes),await Sc(r.remoteStore)}catch(s){const i=up(s,"Failed to persist write");n.reject(i)}}async function hw(t,e){const n=Te(t);try{const r=await AC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Le(o.va):s.removedDocuments.size>0&&(Le(o.va),o.va=!1))}),await Za(n,r,e)}catch(r){await Ka(r)}}function av(t,e,n){const r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=Te(o);c.onlineState=u;let h=!1;c.queries.forEach((p,m)=>{for(const y of m.j_)y.Z_(u)&&(h=!0)}),h&&hp(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function d1(t,e,n){const r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new it(de.comparator);o=o.insert(i,Yt.newNoDocument(i,Ee.min()));const u=Ce().add(i),c=new Ec(Ee.min(),new Map,new it(Me),o,u);await hw(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),pp(r)}else await Dh(r.localStore,e,!1).then(()=>Oh(r,e,n)).catch(Ka)}async function h1(t,e){const n=Te(t),r=e.batch.batchId;try{const s=await SC(n.localStore,e);pw(n,r,null),fw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Za(n,s)}catch(s){await Ka(s)}}async function f1(t,e,n){const r=Te(t);try{const s=await function(o,u){const c=Te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,u).next(m=>(Le(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);pw(r,e,n),fw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Za(r,s)}catch(s){await Ka(s)}}function fw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function pw(t,e,n){const r=Te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Oh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||mw(t,r)})}function mw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),pp(t))}function lv(t,e,n){for(const r of n)r instanceof uw?(t.La.addReference(r.key,e),p1(t,r)):r instanceof cw?(ue("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||mw(t,r.key)):ve()}function p1(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ue("SyncEngine","New document in limbo: "+n),t.xa.add(r),pp(t))}function pp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new de(Ye.fromString(e)),r=t.qa.next();t.Na.set(r,new r1(n)),t.Oa=t.Oa.insert(n,r),rw(t.remoteStore,new is(hr(gc(n.path)),r,"TargetPurposeLimboResolution",qf.oe))}}async function Za(t,e,n){const r=Te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=rp.Wi(c.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const p=Te(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>G.forEach(h,y=>G.forEach(y.$i,w=>p.persistence.referenceDelegate.addReference(m,y.targetId,w)).next(()=>G.forEach(y.Ui,w=>p.persistence.referenceDelegate.removeReference(m,y.targetId,w)))))}catch(m){if(!Ga(m))throw m;ue("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const w=p.os.get(y),N=w.snapshotVersion,O=w.withLastLimboFreeSnapshotVersion(N);p.os=p.os.insert(y,O)}}}(r.localStore,i))}async function m1(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=await Z0(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new se(W.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Za(n,r.hs)}}function g1(t,e){const n=Te(t),r=n.Na.get(e);if(r&&r.va)return Ce().add(r.key);{let s=Ce();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function gw(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d1.bind(null,e),e.Ca.d_=ZC.bind(null,e.eventManager),e.Ca.$a=e1.bind(null,e.eventManager),e}function v1(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f1.bind(null,e),e}class Oa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return IC(this.persistence,new EC,e.initialUser,this.serializer)}Ga(e){return new yC(np.Zr,this.serializer)}Wa(e){return new RC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oa.provider={build:()=>new Oa};class zu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>av(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=m1.bind(null,this.syncEngine),await YC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JC}()}createDatastore(e){const n=Tc(e.databaseInfo.databaseId),r=function(i){return new MC(i)}(e.databaseInfo);return function(i,o,u,c){return new VC(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new FC(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>av(this.syncEngine,n,0),function(){return nv.D()?new nv:new kC}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,p){const m=new s1(s,i,o,u,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Te(s);ue("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ja(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}zu.provider={build:()=>new zu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=hn.UNAUTHENTICATED,this.clientId=w0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ue("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ue("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=up(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Td(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Z0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _1(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>rv(e.remoteStore,s)),t._onlineComponents=e}async function _1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await Td(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ca("Error using user provided cache. Falling back to memory cache: "+n),await Td(t,new Oa)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await Td(t,new Oa);return t._offlineComponents}async function vw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await uv(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await uv(t,new zu))),t._onlineComponents}function w1(t){return vw(t).then(e=>e.syncEngine)}async function $u(t){const e=await vw(t),n=e.eventManager;return n.onListen=i1.bind(null,e.syncEngine),n.onUnlisten=l1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=o1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=u1.bind(null,e.syncEngine),n}function E1(t,e,n={}){const r=new kr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const p=new mp({next:y=>{p.Za(),o.enqueueAndForget(()=>dp(i,m));const w=y.docs.has(u);!w&&y.fromCache?h.reject(new se(W.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&c&&c.source==="server"?h.reject(new se(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new fp(gc(u.path),p,{includeMetadataChanges:!0,_a:!0});return cp(i,m)}(await $u(t),t.asyncQueue,e,n,r)),r.promise}function T1(t,e,n={}){const r=new kr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const p=new mp({next:y=>{p.Za(),o.enqueueAndForget(()=>dp(i,m)),y.fromCache&&c.source==="server"?h.reject(new se(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new fp(u,p,{includeMetadataChanges:!0,_a:!0});return cp(i,m)}(await $u(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t,e,n){if(!n)throw new se(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function I1(t,e,n,r){if(e===!0&&r===!0)throw new se(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dv(t){if(!de.isDocumentKey(t))throw new se(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hv(t){if(de.isDocumentKey(t))throw new se(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ac(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve()}function Nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ac(t);throw new se(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}I1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BA;switch(r.type){case"firstParty":return new qA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cv.get(n);r&&(ue("ComponentProvider","Removing Datastore"),cv.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oi(this.firestore,e,this._query)}}class Xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}}class gs extends oi{constructor(e,n,r){super(e,n,gc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new de(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function Pt(t,e,...n){if(t=st(t),_w("collection","path",e),t instanceof gp){const r=Ye.fromString(e,...n);return hv(r),new gs(t,null,r)}{if(!(t instanceof Xt||t instanceof gs))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return hv(r),new gs(t.firestore,null,r)}}function Et(t,e,...n){if(t=st(t),arguments.length===1&&(e=w0.newId()),_w("doc","path",e),t instanceof gp){const r=Ye.fromString(e,...n);return dv(r),new Xt(t,null,new de(r))}{if(!(t instanceof Xt||t instanceof gs))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return dv(r),new Xt(t.firestore,t instanceof gs?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tw(this,"async_queue_retry"),this.Vu=()=>{const r=Ed();r&&ue("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ed();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new kr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ga(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw Lr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=lp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ve()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function mv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ur extends gp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new pv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pv(e),this._firestoreClient=void 0,await e}}}function S1(t,e,n){n||(n="(default)");const r=pc(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Aa(i,e))return s;throw new se(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new se(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function xc(t){if(t._terminated)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A1(t),t._firestoreClient}function A1(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,h,p){return new rx(u,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,yw(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new y1(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eo(Ut.fromBase64String(e))}catch(n){throw new se(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new eo(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=/^__.*__$/;class C1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ya(e,this.data,n,this.fieldTransforms)}}class ww{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ew(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class _p{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new _p(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return qu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ew(this.Cu)&&x1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class P1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tc(e)}Qu(e,n,r,s=!1){return new _p({Cu:e,methodName:n,qu:r,path:bt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nc(t){const e=t._freezeSettings(),n=Tc(t._databaseId);return new P1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tw(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Ep("Data must be an object, but it was:",o,r);const u=Iw(r,o);let c,h;if(i.merge)c=new Cn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=bh(e,m,n);if(!o.contains(y))throw new se(W.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Aw(p,y)||p.push(y)}c=new Cn(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new C1(new pn(u),c,h)}class Rc extends Pc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rc}}class wp extends Pc{_toFieldTransform(e){return new Px(e.path,new ja)}isEqual(e){return e instanceof wp}}function N1(t,e,n,r){const s=t.Qu(1,e,n);Ep("Data must be an object, but it was:",s,r);const i=[],o=pn.empty();si(r,(c,h)=>{const p=Tp(e,c,n);h=st(h);const m=s.Nu(p);if(h instanceof Rc)i.push(p);else{const y=el(h,m);y!=null&&(i.push(p),o.set(p,y))}});const u=new Cn(i);return new ww(o,u,s.fieldTransforms)}function R1(t,e,n,r,s,i){const o=t.Qu(1,e,n),u=[bh(e,r,n)],c=[s];if(i.length%2!=0)throw new se(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)u.push(bh(e,i[y])),c.push(i[y+1]);const h=[],p=pn.empty();for(let y=u.length-1;y>=0;--y)if(!Aw(h,u[y])){const w=u[y];let N=c[y];N=st(N);const O=o.Nu(w);if(N instanceof Rc)h.push(w);else{const U=el(N,O);U!=null&&(h.push(w),p.set(w,U))}}const m=new Cn(h);return new ww(p,m,o.fieldTransforms)}function k1(t,e,n,r=!1){return el(n,t.Qu(r?4:3,e))}function el(t,e){if(Sw(t=st(t)))return Ep("Unsupported field value:",e,t),Iw(t,e);if(t instanceof Pc)return function(r,s){if(!Ew(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=el(u,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=st(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ax(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=St.fromDate(r);return{timestampValue:Uu(s.serializer,i)}}if(r instanceof St){const i=new St(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uu(s.serializer,i)}}if(r instanceof vp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof eo)return{bytesValue:W0(s.serializer,r._byteString)};if(r instanceof Xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ep(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof yp)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return Yf(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Ac(r)}`)}(t,e)}function Iw(t,e){const n={};return E0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):si(t,(r,s)=>{const i=el(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Sw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof St||t instanceof vp||t instanceof eo||t instanceof Xt||t instanceof Pc||t instanceof yp)}function Ep(t,e,n){if(!Sw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ac(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function bh(t,e,n){if((e=st(e))instanceof Cc)return e._internalPath;if(typeof e=="string")return Tp(t,e);throw qu("Field path arguments must be of type string or ",t,!1,void 0,n)}const j1=new RegExp("[~\\*/\\[\\]]");function Tp(t,e,n){if(e.search(j1)>=0)throw qu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cc(...e.split("."))._internalPath}catch{throw qu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new se(W.INVALID_ARGUMENT,u+t+c)}function Aw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new D1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ip("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class D1 extends xw{data(){return super.data()}}function Ip(t,e){return typeof e=="string"?Tp(t,e):e instanceof Cc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sp{}class M1 extends Sp{}function Oo(t,e,...n){let r=[];e instanceof Sp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Ap).length,u=i.filter(c=>c instanceof kc).length;if(o>1||o>0&&u>0)throw new se(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class kc extends M1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new kc(e,n,r)}_apply(e){const n=this._parse(e);return Pw(e._query,n),new oi(e.firestore,e.converter,Ch(e._query,n))}_parse(e){const n=Nc(e.firestore);return function(i,o,u,c,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new se(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){vv(m,p);const w=[];for(const N of m)w.push(gv(c,i,N));y={arrayValue:{values:w}}}else y=gv(c,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||vv(m,p),y=k1(u,o,m,p==="in"||p==="not-in");return wt.create(h,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bo(t,e,n){const r=e,s=Ip("where",t);return kc._create(s,r,n)}class Ap extends Sp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ap(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)Pw(o,c),o=Ch(o,c)}(e._query,n),new oi(e.firestore,e.converter,Ch(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function gv(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new se(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R0(e)&&n.indexOf("/")!==-1)throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ye.fromString(n));if(!de.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vg(t,new de(r))}if(n instanceof Xt)return Vg(t,n._key);throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ac(n)}.`)}function vv(t,e){if(!Array.isArray(t)||t.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pw(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class O1{convertValue(e,n="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return si(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ft(o.doubleValue));return new yp(i)}convertGeoPoint(e){return new vp(ft(e.latitude),ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Na(e));default:return null}}convertTimestamp(e){const n=Es(e);return new St(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ye.fromString(e);Le(J0(r));const s=new Ra(r.get(1),r.get(3)),i=new de(r.popFirst(5));return s.isEqual(n)||Lr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rw extends xw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ip("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ou extends Rw{data(e={}){return super.data(e)}}class kw{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Wo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ou(this._firestore,this._userDataWriter,r.key,r,new Wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new ou(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Wo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new ou(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Wo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),p=o.indexOf(u.doc.key)),{type:b1(u.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function b1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t){t=Nn(t,Xt);const e=Nn(t.firestore,Ur);return E1(xc(e),t._key).then(n=>jw(e,t,n))}class xp extends O1{constructor(e){super(),this.firestore=e}convertBytes(e){return new eo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function js(t){t=Nn(t,oi);const e=Nn(t.firestore,Ur),n=xc(e),r=new xp(e);return Cw(t._query),T1(n,t._query).then(s=>new kw(e,r,t,s))}function ba(t,e,n){t=Nn(t,Xt);const r=Nn(t.firestore,Ur),s=Nw(t.converter,e,n);return jc(r,[Tw(Nc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Un.none())])}function Bs(t,e,n,...r){t=Nn(t,Xt);const s=Nn(t.firestore,Ur),i=Nc(s);let o;return o=typeof(e=st(e))=="string"||e instanceof Cc?R1(i,"updateDoc",t._key,e,n,r):N1(i,"updateDoc",t._key,e),jc(s,[o.toMutation(t._key,Un.exists(!0))])}function oa(t){return jc(Nn(t.firestore,Ur),[new Xf(t._key,Un.none())])}function Bl(t,e){const n=Nn(t.firestore,Ur),r=Et(t),s=Nw(t.converter,e);return jc(n,[Tw(Nc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}function bs(t,...e){var n,r,s;t=st(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||mv(e[o])||(i=e[o],o++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(mv(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,p;if(t instanceof Xt)h=Nn(t.firestore,Ur),p=gc(t._key.path),c={next:m=>{e[o]&&e[o](jw(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Nn(t,oi);h=Nn(m.firestore,Ur),p=m._query;const y=new xp(h);c={next:w=>{e[o]&&e[o](new kw(h,y,m,w))},error:e[o+1],complete:e[o+2]},Cw(t._query)}return function(y,w,N,O){const U=new mp(O),x=new fp(w,U,N);return y.asyncQueue.enqueueAndForget(async()=>cp(await $u(y),x)),()=>{U.Za(),y.asyncQueue.enqueueAndForget(async()=>dp(await $u(y),x))}}(xc(h),p,u,c)}function jc(t,e){return function(r,s){const i=new kr;return r.asyncQueue.enqueueAndForget(async()=>c1(await w1(r),s,i)),i.promise}(xc(t),e)}function jw(t,e,n){const r=n.docs.get(e._key),s=new xp(t);return new Rw(t,s,e._key,r,new Wo(n.hasPendingWrites,n.fromCache),e.converter)}class L1{constructor(e){this.kind="memory",this._onlineComponentProvider=zu.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Oa.provider}toJSON(){return{kind:this.kind}}}function F1(t){return new L1(t)}function yv(){return new wp("serverTimestamp")}(function(e,n=!0){(function(s){oo=s})(io),Ys(new _s("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new Ur(new zA(r.getProvider("auth-internal")),new WA(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new se(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),dr(jg,"4.7.3",e),dr(jg,"4.7.3","esm2017")})();function Cp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Dw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const U1=Dw,Mw=new Ha("auth","Firebase",Dw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new Bf("@firebase/auth");function B1(t,...e){Hu.logLevel<=Pe.WARN&&Hu.warn(`Auth (${io}): ${t}`,...e)}function au(t,...e){Hu.logLevel<=Pe.ERROR&&Hu.error(`Auth (${io}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,...e){throw Pp(t,...e)}function pr(t,...e){return Pp(t,...e)}function Ow(t,e,n){const r=Object.assign(Object.assign({},U1()),{[e]:n});return new Ha("auth","Firebase",r).create(e,{appName:t.name})}function jr(t){return Ow(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Mw.create(t,...e)}function ge(t,e,...n){if(!t)throw Pp(e,...n)}function xr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw au(e),new Error(e)}function Br(t,e){t||xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function z1(){return _v()==="http:"||_v()==="https:"}function _v(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z1()||yS()||"connection"in navigator)?navigator.onLine:!0}function q1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=mS()||_S()}get(){return $1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=new tl(3e4,6e4);function Cs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ps(t,e,n,r,s={}){return Vw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=Wa(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return vS()||(h.referrerPolicy="no-referrer"),bw.fetch()(Lw(t,t.config.apiHost,n,u),h)})}async function Vw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},H1),e);try{const s=new G1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw zl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw zl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw zl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw zl(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Ow(t,p,h);er(t,p)}}catch(s){if(s instanceof vr)throw s;er(t,"network-request-failed",{message:String(s)})}}async function nl(t,e,n,r,s={}){const i=await Ps(t,e,n,r,s);return"mfaPendingCredential"in i&&er(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Lw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Np(t.config,s):`${t.config.apiScheme}://${s}`}function K1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class G1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pr(this.auth,"network-request-failed")),W1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pr(t,e,r);return s.customData._tokenResponse=n,s}function wv(t){return t!==void 0&&t.enterprise!==void 0}class Q1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return K1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Y1(t,e){return Ps(t,"GET","/v2/recaptchaConfig",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(t,e){return Ps(t,"POST","/v1/accounts:delete",e)}async function Fw(t,e){return Ps(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function J1(t,e=!1){const n=st(t),r=await n.getIdToken(e),s=Rp(r);ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:aa(Id(s.auth_time)),issuedAtTime:aa(Id(s.iat)),expirationTime:aa(Id(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Id(t){return Number(t)*1e3}function Rp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return au("JWT malformed, contained fewer than 3 sections"),null;try{const s=s0(n);return s?JSON.parse(s):(au("Failed to decode base64 JWT payload"),null)}catch(s){return au("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ev(t){const e=Rp(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vr&&Z1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Z1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=aa(this.lastLoginAt),this.creationTime=aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Va(t,Fw(n,{idToken:r}));ge(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Uw(i.providerUserInfo):[],u=nP(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),p=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Lh(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function tP(t){const e=st(t);await Wu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nP(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Uw(t){return t.map(e=>{var{providerId:n}=e,r=Cp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(t,e){const n=await Vw(t,{},async()=>{const r=Wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Lw(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",bw.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sP(t,e){return Ps(t,"POST","/v2/accounts:revokeToken",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ev(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=Ev(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await rP(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Li;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ge(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ge(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Li,this.toJSON())}_performRefresh(){return xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Cp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Va(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return J1(this,e)}reload(){return tP(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(jr(this.auth));const e=await this.getIdToken();return await Va(this,X1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,O=(u=n.tenantId)!==null&&u!==void 0?u:void 0,U=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(h=n.createdAt)!==null&&h!==void 0?h:void 0,I=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:S,emailVerified:b,isAnonymous:P,providerData:M,stsTokenManager:g}=n;ge(S&&g,e,"internal-error");const v=Li.fromJSON(this.name,g);ge(typeof S=="string",e,"internal-error"),Gr(m,e.name),Gr(y,e.name),ge(typeof b=="boolean",e,"internal-error"),ge(typeof P=="boolean",e,"internal-error"),Gr(w,e.name),Gr(N,e.name),Gr(O,e.name),Gr(U,e.name),Gr(x,e.name),Gr(I,e.name);const E=new Cr({uid:S,auth:e,email:y,emailVerified:b,displayName:m,isAnonymous:P,photoURL:N,phoneNumber:w,tenantId:O,stsTokenManager:v,createdAt:x,lastLoginAt:I});return M&&Array.isArray(M)&&(E.providerData=M.map(A=>Object.assign({},A))),U&&(E._redirectEventId=U),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Li;s.updateFromServerResponse(n);const i=new Cr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ge(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Uw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new Li;u.updateFromIdToken(r);const c=new Cr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Lh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Map;function Pr(t){Br(t instanceof Function,"Expected a class definition");let e=Tv.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Bw.type="NONE";const Fh=Bw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t,e,n){return`firebase:${t}:${e}:${n}`}class Fi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=lu(this.userKey,s.apiKey,i),this.fullPersistenceKey=lu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fi(Pr(Fh),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Pr(Fh);const o=lu(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Cr._fromJSON(e,p);h!==i&&(u=m),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Fi(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Fi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kw(e))return"Blackberry";if(Gw(e))return"Webos";if($w(e))return"Safari";if((e.includes("chrome/")||qw(e))&&!e.includes("edge/"))return"Chrome";if(Ww(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function zw(t=Zt()){return/firefox\//i.test(t)}function $w(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qw(t=Zt()){return/crios\//i.test(t)}function Hw(t=Zt()){return/iemobile/i.test(t)}function Ww(t=Zt()){return/android/i.test(t)}function Kw(t=Zt()){return/blackberry/i.test(t)}function Gw(t=Zt()){return/webos/i.test(t)}function kp(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iP(t=Zt()){var e;return kp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oP(){return wS()&&document.documentMode===10}function Qw(t=Zt()){return kp(t)||Ww(t)||Gw(t)||Kw(t)||/windows phone/i.test(t)||Hw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e=[]){let n;switch(t){case"Browser":n=Iv(Zt());break;case"Worker":n=`${Iv(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${io}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(t,e={}){return Ps(t,"GET","/v2/passwordPolicy",Cs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=6;class cP{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sv(this),this.idTokenSubscription=new Sv(this),this.beforeStateQueue=new aP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Fi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fw(this,{idToken:e}),r=await Cr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(lr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(jr(this));const n=e?st(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lP(this),n=new cP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ha("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pr(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Fi.create(this,[Pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&B1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ai(t){return st(t)}class Sv{constructor(e){this.auth=e,this.observer=null,this.addObserver=PS(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hP(t){Dc=t}function Xw(t){return Dc.loadJS(t)}function fP(){return Dc.recaptchaEnterpriseScript}function pP(){return Dc.gapiScript}function mP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const gP="recaptcha-enterprise",vP="NO_RECAPTCHA";class yP{constructor(e){this.type=gP,this.auth=ai(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,u)=>{Y1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new Q1(c);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(c=>{u(c)})})}function s(i,o,u){const c=window.grecaptcha;wv(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(vP)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(u=>{if(!n&&wv(window.grecaptcha))s(u,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=fP();c.length!==0&&(c+=u),Xw(c).then(()=>{s(u,i,o)}).catch(h=>{o(h)})}}).catch(u=>{o(u)})})}}async function Av(t,e,n,r=!1){const s=new yP(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Uh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Av(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Av(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t,e){const n=pc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Aa(i,e??{}))return s;er(s,"already-initialized")}return n.initialize({options:e})}function wP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function EP(t,e,n){const r=ai(t);ge(r._canInitEmulator,r,"emulator-config-failed"),ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Jw(e),{host:o,port:u}=TP(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),IP()}function Jw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TP(t){const e=Jw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:xv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:xv(o)}}}function xv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,n){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}}async function SP(t,e){return Ps(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(t,e){return nl(t,"POST","/v1/accounts:signInWithPassword",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(t,e){return nl(t,"POST","/v1/accounts:signInWithEmailLink",Cs(t,e))}async function CP(t,e){return nl(t,"POST","/v1/accounts:signInWithEmailLink",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends jp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new La(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new La(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uh(e,n,"signInWithPassword",AP);case"emailLink":return xP(e,{email:this._email,oobCode:this._password});default:er(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uh(e,r,"signUpPassword",SP);case"emailLink":return CP(e,{idToken:n,email:this._email,oobCode:this._password});default:er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ui(t,e){return nl(t,"POST","/v1/accounts:signInWithIdp",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="http://localhost";class ei extends jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ei(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Cp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ei(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ui(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ui(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ui(e,n)}buildRequest(){const e={requestUri:PP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RP(t){const e=Bo(zo(t)).link,n=e?Bo(zo(e)).deep_link_id:null,r=Bo(zo(t)).deep_link_id;return(r?Bo(zo(r)).link:null)||r||n||e||t}class Dp{constructor(e){var n,r,s,i,o,u;const c=Bo(zo(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,m=NP((s=c.mode)!==null&&s!==void 0?s:null);ge(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=RP(e);try{return new Dp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.providerId=uo.PROVIDER_ID}static credential(e,n){return La._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Dp.parseLink(n);return ge(r,"argument-error"),La._fromEmailAndCode(e,r.code,r.tenantId)}}uo.PROVIDER_ID="password";uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Zw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends rl{constructor(){super("facebook.com")}static credential(e){return ei._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ei._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return es.credential(n,r)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends rl{constructor(){super("github.com")}static credential(e){return ei._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends rl{constructor(){super("twitter.com")}static credential(e,n){return ei._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ns.credential(n,r)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(t,e){return nl(t,"POST","/v1/accounts:signUp",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Cr._fromIdTokenResponse(e,r,s),o=Cv(r);return new ti({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Cv(r);return new ti({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Cv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends vr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ku.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ku(e,n,r,s)}}function eE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ku._fromErrorAndOperation(t,i,e,r):i})}async function jP(t,e,n=!1){const r=await Va(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ti._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(t,e,n=!1){const{auth:r}=t;if(lr(r.app))return Promise.reject(jr(r));const s="reauthenticate";try{const i=await Va(t,eE(r,s,e,t),n);ge(i.idToken,r,"internal-error");const o=Rp(i.idToken);ge(o,r,"internal-error");const{sub:u}=o;return ge(t.uid===u,r,"user-mismatch"),ti._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&er(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tE(t,e,n=!1){if(lr(t.app))return Promise.reject(jr(t));const r="signIn",s=await eE(t,r,e),i=await ti._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function MP(t,e){return tE(ai(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nE(t){const e=ai(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Bh(t,e,n){if(lr(t.app))return Promise.reject(jr(t));const r=ai(t),o=await Uh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kP).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&nE(t),c}),u=await ti._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(u.user),u}function $l(t,e,n){return lr(t.app)?Promise.reject(jr(t)):MP(st(t),uo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&nE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t,e){return st(t).setPersistence(e)}function bP(t,e,n,r){return st(t).onIdTokenChanged(e,n,r)}function VP(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function LP(t,e,n,r){return st(t).onAuthStateChanged(e,n,r)}function FP(t){return st(t).signOut()}const Gu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gu,"1"),this.storage.removeItem(Gu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=1e3,BP=10;class sE extends rE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);oP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,BP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},UP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sE.type="LOCAL";const zP=sE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE extends rE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iE.type="SESSION";const oE=iE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Mc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async h=>h(n.origin,i)),c=await $P(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const h=Mp("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(y.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(){return window}function HP(t){mr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){return typeof mr().WorkerGlobalScope<"u"&&typeof mr().importScripts=="function"}async function WP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function GP(){return aE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="firebaseLocalStorageDb",QP=1,Qu="firebaseLocalStorage",uE="fbase_key";class sl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Oc(t,e){return t.transaction([Qu],e?"readwrite":"readonly").objectStore(Qu)}function YP(){const t=indexedDB.deleteDatabase(lE);return new sl(t).toPromise()}function zh(){const t=indexedDB.open(lE,QP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qu,{keyPath:uE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qu)?e(r):(r.close(),await YP(),e(await zh()))})})}async function Pv(t,e,n){const r=Oc(t,!0).put({[uE]:e,value:n});return new sl(r).toPromise()}async function XP(t,e){const n=Oc(t,!1).get(e),r=await new sl(n).toPromise();return r===void 0?null:r.value}function Nv(t,e){const n=Oc(t,!0).delete(e);return new sl(n).toPromise()}const JP=800,ZP=3;class cE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ZP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mc._getInstance(GP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await WP(),!this.activeServiceWorker)return;this.sender=new qP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zh();return await Pv(e,Gu,"1"),await Nv(e,Gu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Pv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>XP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Oc(s,!1).getAll();return new sl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cE.type="LOCAL";const eN=cE;new tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t,e){return e?Pr(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends jp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ui(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ui(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ui(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nN(t){return tE(t.auth,new Op(t),t.bypassAuthState)}function rN(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),DP(n,new Op(t),t.bypassAuthState)}async function sN(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),jP(n,new Op(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nN;case"linkViaPopup":case"linkViaRedirect":return sN;case"reauthViaPopup":case"reauthViaRedirect":return rN;default:er(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=new tl(2e3,1e4);class Ri extends dE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ri.currentPopupAction&&Ri.currentPopupAction.cancel(),Ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=Mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iN.get())};e()}}Ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="pendingRedirect",uu=new Map;class aN extends dE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=uu.get(this.auth._key());if(!e){try{const r=await lN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uu.set(this.auth._key(),e)}return this.bypassAuthState||uu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lN(t,e){const n=dN(e),r=cN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function uN(t,e){uu.set(t._key(),e)}function cN(t){return Pr(t._redirectPersistence)}function dN(t){return lu(oN,t.config.apiKey,t.name)}async function hN(t,e,n=!1){if(lr(t.app))return Promise.reject(jr(t));const r=ai(t),s=tN(r,e),o=await new aN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=10*60*1e3;class pN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!hE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rv(e))}saveEventToCache(e){this.cachedEventUids.add(Rv(e)),this.lastProcessedEventTime=Date.now()}}function Rv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(t,e={}){return Ps(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yN=/^https?/;async function _N(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gN(t);for(const n of e)try{if(wN(n))return}catch{}er(t,"unauthorized-domain")}function wN(t){const e=Vh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!yN.test(n))return!1;if(vN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new tl(3e4,6e4);function kv(){const t=mr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TN(t){return new Promise((e,n)=>{var r,s,i;function o(){kv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kv(),n(pr(t,"network-request-failed"))},timeout:EN.get()})}if(!((s=(r=mr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=mr().gapi)===null||i===void 0)&&i.load)o();else{const u=mP("iframefcb");return mr()[u]=()=>{gapi.load?o():n(pr(t,"network-request-failed"))},Xw(`${pP()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw cu=null,e})}let cu=null;function IN(t){return cu=cu||TN(t),cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new tl(5e3,15e3),AN="__/auth/iframe",xN="emulator/auth/iframe",CN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NN(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Np(e,xN):`https://${t.config.authDomain}/${AN}`,r={apiKey:e.apiKey,appName:t.name,v:io},s=PN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Wa(r).slice(1)}`}async function RN(t){const e=await IN(t),n=mr().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:NN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=pr(t,"network-request-failed"),u=mr().setTimeout(()=>{i(o)},SN.get());function c(){mr().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jN=500,DN=600,MN="_blank",ON="http://localhost";class jv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bN(t,e,n,r=jN,s=DN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},kN),{width:r.toString(),height:s.toString(),top:i,left:o}),h=Zt().toLowerCase();n&&(u=qw(h)?MN:n),zw(h)&&(e=e||ON,c.scrollbars="yes");const p=Object.entries(c).reduce((y,[w,N])=>`${y}${w}=${N},`,"");if(iP(h)&&u!=="_self")return VN(e||"",u),new jv(null);const m=window.open(e||"",u,p);ge(m,t,"popup-blocked");try{m.focus()}catch{}return new jv(m)}function VN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="__/auth/handler",FN="emulator/auth/handler",UN=encodeURIComponent("fac");async function Dv(t,e,n,r,s,i){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:io,eventId:s};if(e instanceof Zw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",CS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof rl){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),h=c?`#${UN}=${encodeURIComponent(c)}`:"";return`${BN(t)}?${Wa(u).slice(1)}${h}`}function BN({config:t}){return t.emulator?Np(t,FN):`https://${t.authDomain}/${LN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="webStorageSupport";class zN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oE,this._completeRedirectFn=hN,this._overrideRedirectResult=uN}async _openPopup(e,n,r,s){var i;Br((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Dv(e,n,r,Vh(),s);return bN(e,o,Mp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Dv(e,n,r,Vh(),s);return HP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Br(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await RN(e),r=new pN(e);return n.register("authEvent",s=>(ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sd,{type:Sd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Sd];o!==void 0&&n(!!o),er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_N(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qw()||$w()||kp()}}const $N=zN;var Mv="@firebase/auth",Ov="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WN(t){Ys(new _s("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yw(t)},h=new dP(r,s,i,c);return wP(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ys(new _s("auth-internal",e=>{const n=ai(e.getProvider("auth").getImmediate());return(r=>new qN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(Mv,Ov,HN(t)),dr(Mv,Ov,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=5*60,GN=a0("authIdTokenMaxAge")||KN;let bv=null;const QN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>GN)return;const s=n==null?void 0:n.token;bv!==s&&(bv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function YN(t=d0()){const e=pc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_P(t,{popupRedirectResolver:$N,persistence:[eN,zP,oE]}),r=a0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=QN(i.toString());VP(n,o,()=>o(n.currentUser)),bP(n,u=>o(u))}}const s=i0("auth");return s&&EP(n,`http://${s}`),n}function XN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}hP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=pr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",XN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WN("Browser");const JN={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"};let to=null;try{to=c0(JN)}catch{}const le=to?S1(to,{localCache:F1(),experimentalForceLongPolling:!0,useFetchStreams:!1}):null,Gt=to?YN(to):null;if(Gt)try{OP(Gt,Fh).catch(()=>{})}catch{}const Vv=to;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="type.googleapis.com/google.protobuf.Int64Value",eR="type.googleapis.com/google.protobuf.UInt64Value";function fE(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function $h(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>$h(e));if(typeof t=="function"||typeof t=="object")return fE(t,e=>$h(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Yu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case ZN:case eR:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Yu(e)):typeof t=="function"||typeof t=="object"?fE(t,e=>Yu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bi extends vr{constructor(e,n,r){super(`${bp}/${e}`,n||""),this.details=r}}function tR(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function nR(t,e){let n=tR(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Lv[o])return new Bi("internal","internal");n=Lv[o],r=o}const u=i.message;typeof u=="string"&&(r=u),s=i.details,s!==void 0&&(s=Yu(s))}}catch{}return n==="ok"?null:new Bi(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="us-central1";function sR(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Bi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class iR{constructor(e,n,r,s,i=qh,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new rR(n,r,s),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(i);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=qh}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function oR(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function aR(t,e,n){return r=>uR(t,e,r,{})}async function lR(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function uR(t,e,n,r){const s=t._url(e);return cR(t,s,n,r)}async function cR(t,e,n,r){n=$h(n);const s={data:n},i={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const u=r.timeout||7e4,c=sR(u),h=await Promise.race([lR(e,s,i,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!h)throw new Bi("cancelled","Firebase Functions instance was deleted.");const p=nR(h.status,h.json);if(p)throw p;if(!h.json)throw new Bi("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new Bi("internal","Response is missing data field.");return{data:Yu(m)}}const Fv="@firebase/functions",Uv="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="auth-internal",hR="app-check-internal",fR="messaging-internal";function pR(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),o=r.getProvider(dR),u=r.getProvider(fR),c=r.getProvider(hR);return new iR(i,o,u,c,s,t)};Ys(new _s(bp,n,"PUBLIC").setMultipleInstances(!0)),dr(Fv,Uv,e),dr(Fv,Uv,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t=d0(),e=qh){const r=pc(st(t),bp).getImmediate({identifier:e}),s=fS("functions");return s&&gR(r,...s),r}function gR(t,e,n){oR(st(t),e,n)}function vR(t,e,n){return aR(st(t),e)}pR(fetch.bind(self));const yR={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://gerencimaneto-mkt-betaki.onrender.com",VITE_FIREBASE_API_KEY:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",VITE_FIREBASE_APP_ID:"1:992627837568:web:48019ba22070fd9af03465",VITE_FIREBASE_AUTH_DOMAIN:"mkt-betaki.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"992627837568",VITE_FIREBASE_PROJECT_ID:"mkt-betaki",VITE_FIREBASE_STORAGE_BUCKET:"mkt-betaki.firebasestorage.app"},Fa=["Pendente","Em produo","Aguardando Feedback","Aprovada","Revisar","Concluida"],Vp=["Instagram","Trfego Pago","CRM","Influencers","Site","Branding","Outros"],sn="demandas_v2",_R=t=>t==="Aberta"?"Aberta":t==="Em Progresso"?"Em Progresso":t==="Concluda"?"Concluda":t,pE=t=>_R(t),mE=t=>{const e=(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")?"st-pending":e.includes("progresso")||e.includes("produo")?"st-progress":e.includes("feedback")?"st-feedback":e.includes("revisar")?"st-review":e.includes("aprov")?"st-approved":e.includes("conclu")?"st-concluded":e.includes("atras")?"st-late":""},Lp=t=>{const e=String(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")||t==="Aberta"||t==="Pendente"},Fp=t=>{const e=String(t||"").toLowerCase();return e.includes("produo")||e.includes("progresso")||t==="Em Progresso"||t==="Em produo"},Nr=t=>{const e=String(t||"").toLowerCase();return e.includes("conclu")||e.includes("aprov")||t==="Concluda"||t==="Aprovada"},wR=t=>{const e=String(t||"").match(/@([a-zA-Z0-9_]+)/g);return e?e.map(n=>n.slice(1)):[]},Bv=t=>{if(t==null)return"";const e=Math.max(0,Math.round(t)),n=Math.floor(e/60),r=e%60;return n>0?`${n}h ${r}m`:`${r}m`},Hh=(t,e)=>{const n=t.filter(P=>String(P.status||"").toLowerCase().includes("conclu")||P.status==="Concluda"),r=n.filter(P=>(P.designer||"")===(e.designer||"")),s=n.filter(P=>(P.tipoMidia||"")===(e.tipoMidia||"")),i=n.filter(P=>(P.origem||"")===(e.origem||"")),o=n.filter(P=>(P.plataforma||"")===(e.plataforma||"")),u=(P,M)=>{const g=A=>{const[R,k,C]=String(A||"").split("-").map(Number);return R?new Date(R,k-1,C):null},v=g(P),E=g(M);return!v||!E?null:Math.max(0,Math.round((E-v)/864e5))},c=(()=>{const P=n.map(g=>u(g.dataCriacao||g.dataSolicitacao,g.dataConclusao)).filter(g=>g!=null),M=P.reduce((g,v)=>g+v,0)/(P.length||1);return Math.max(1,Math.round(M))})(),h=(()=>{const P=r.map(g=>u(g.dataCriacao||g.dataSolicitacao,g.dataConclusao)).filter(g=>g!=null),M=P.reduce((g,v)=>g+v,0)/(P.length||1);return P.length?Math.max(1,Math.round(M)):null})(),p=(()=>{const P=s.map(g=>u(g.dataCriacao||g.dataSolicitacao,g.dataConclusao)).filter(g=>g!=null),M=P.reduce((g,v)=>g+v,0)/(P.length||1);return P.length?Math.max(1,Math.round(M)):null})(),m=(()=>{const P=i.map(g=>u(g.dataCriacao||g.dataSolicitacao,g.dataConclusao)).filter(g=>g!=null),M=P.reduce((g,v)=>g+v,0)/(P.length||1);return P.length?Math.max(1,Math.round(M)):null})(),y=(()=>{const P=o.map(g=>u(g.dataCriacao||g.dataSolicitacao,g.dataConclusao)).filter(g=>g!=null),M=P.reduce((g,v)=>g+v,0)/(P.length||1);return P.length?Math.max(1,Math.round(M)):null})(),w=(()=>{const P=r.map(g=>g.revisoes||0),M=P.reduce((g,v)=>g+v,0)/(P.length||1);return Math.round(M)})(),N=t.filter(P=>(P.designer||"")===(e.designer||"")&&!/conclu/i.test(String(P.status||""))).length,U=Math.min(100,Math.round(N/4*100)),x=h??p??y??m??c,I=(U>=80?1:0)+(w>=2?1:0),S=Math.max(1,x+I),b=[];return b.push(`Estimativa: ${S} dia${S>1?"s":""} teis`),U>=80&&b.push("Alta probabilidade de atraso devido  carga acima de 80%"),S===1&&b.push("Pea deve ser concluda ainda hoje  Hoje at s 17h"),w>=2&&b.push("Revises esperadas acima da mdia para este designer"),b.join("  ")},gE={bg:"#070707",panel:"#0E0E0E",text:"#F2F2F2",muted:"#BDBDBD",border:"#ffffff1a",accent:"#BCD200",hover:"rgba(255,255,255,0.03)",btnBg:"#BCD200",btnText:"#111111",btnHoverBg:"#C7DB00",btnBorder:"#ffffff1a",shadow:"0 10px 30px rgba(0,0,0,.15)",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",chart:"#3b82f6"},An=()=>{const t=new Date,e=n=>String(n).padStart(2,"0");return`${t.getFullYear()}-${e(t.getMonth()+1)}-${e(t.getDate())}`};function ER({series:t,color:e="#BCD200"}){const s=Math.max(...t,1),i=t.length>1?120/(t.length-1):120,o=t.map((c,h)=>({x:h*i,y:30-c/s*30})),u=o.map(c=>`${c.x},${c.y}`).join(" ");return l.jsxs("svg",{width:120,height:30,className:"sparkline",viewBox:"0 0 120 30",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"sg",x1:"0",x2:"1",y1:"0",y2:"0",children:[l.jsx("stop",{offset:"0%",stopColor:e,stopOpacity:"0.6"}),l.jsx("stop",{offset:"100%",stopColor:e,stopOpacity:"1"})]})}),l.jsx("polyline",{points:u,fill:"none",stroke:"url(#sg)",strokeWidth:"2.5"}),o.map((c,h)=>l.jsx("circle",{cx:c.x,cy:c.y,r:"2.5",fill:e},h))]})}function ke({name:t,size:e=18}){const n={width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};return t==="dashboard"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"})]}):t==="demandas"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M8 3h8"}),l.jsx("path",{d:"M8 7h8"}),l.jsx("rect",{x:"5",y:"3",width:"14",height:"18",rx:"2"})]}):t==="config"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.7 1.7 0 0 0 .3 1.8l.1.1-1.5 2.6-.1.1a1.8 1.8 0 0 0-2.2.8h-.2l-3-.4h-.2a1.8 1.8 0 0 0-1.6 0h-.2l-3 .4h-.2a1.8 1.8 0 0 0-2.2-.8l-.1-.1-1.5-2.6.1-.1a1.8 1.8 0 0 0 .3-1.8v-.2l-.4-3v-.2a1.8 1.8 0 0 0 0-1.6v-.2l.4-3v-.2a1.7 1.7 0 0 0-.3-1.8l-.1-.1L4.4 4l.1-.1a1.8 1.8 0 0 0 2.2-.8h.2l3 .4h.2a1.8 1.8 0 0 0 1.6 0h.2l3-.4h.2a1.8 1.8 0 0 0 2.2.8l.1.1 1.5 2.6-.1.1a1.8 1.8 0 0 0-.3 1.8v.2l.4 3v.2a1.8 1.8 0 0 0 0 1.6v.2Z"})]}):t==="cadastros"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M4 6h16"}),l.jsx("path",{d:"M4 12h10"}),l.jsx("path",{d:"M4 18h7"})]}):t==="relatorios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 20h18"}),l.jsx("rect",{x:"6",y:"14",width:"3",height:"6"}),l.jsx("rect",{x:"11",y:"10",width:"3",height:"10"}),l.jsx("rect",{x:"16",y:"6",width:"3",height:"14"})]}):t==="usuarios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"3"}),l.jsx("path",{d:"M19 8v6"}),l.jsx("path",{d:"M22 11h-6"})]}):t==="filter"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"11",cy:"11",r:"7"}),l.jsx("path",{d:"M20 20l-3.5-3.5"})]}):t==="table"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M3 10h18"}),l.jsx("path",{d:"M10 4v16"})]}):t==="board"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"10",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"17",y:"4",width:"4",height:"16",rx:"2"})]}):t==="calendar"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M16 3v4"}),l.jsx("path",{d:"M8 3v4"}),l.jsx("path",{d:"M3 11h18"})]}):t==="close"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M18 6L6 18"}),l.jsx("path",{d:"M6 6l12 12"})]}):t==="clock"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"9"}),l.jsx("path",{d:"M12 7v5l3 3"})]}):t==="paperclip"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21.44 11.05 12.5 20a5 5 0 1 1-7.07-7.07L14.36 4a3.5 3.5 0 0 1 4.95 4.95l-9.19 9.19"})}):t==="chat"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4Z"})}):t==="check"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M20 6 9 17l-5-5"})}):t==="plus"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"})]}):t==="dot"?l.jsx("svg",{...n,children:l.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor",stroke:"none"})}):t==="trash"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 6h18"}),l.jsx("path",{d:"M8 6V4h8v2"}),l.jsx("rect",{x:"5",y:"6",width:"14",height:"14",rx:"2"})]}):t==="logout"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("path",{d:"M16 17l5-5-5-5"}),l.jsx("path",{d:"M21 12H9"})]}):t==="link"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 1 0-7.07-7.07L10 4"}),l.jsx("path",{d:"M14 11a5 5 0 0 1-7.07 0L3.39 7.46a5 5 0 1 1 7.07-7.07L14 4"})]}):t==="tag"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M20 10V4H14L4 14l6 6 10-10Z"}),l.jsx("circle",{cx:"16.5",cy:"7.5",r:"1.5"})]}):null}function TR({onNew:t,view:e,setView:n,showNew:r,user:s,onLogout:i}){return l.jsxs("div",{className:"topbar",children:[l.jsx("div",{className:"topbar-left",children:l.jsx("div",{className:"team",children:"Equipe de Marketing"})}),l.jsx("div",{className:"topbar-right",children:s?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{className:"chip",children:s.name||s.username}),l.jsxs("button",{className:"primary",onClick:i,children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"logout"})}),l.jsx("span",{children:"Sair"})]})]}):null})]})}function IR({view:t,setView:e}){return l.jsxs("div",{className:"tabs-inline",children:[l.jsxs("button",{className:`tab-btn ${t==="table"?"active":""}`,onClick:()=>e("table"),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"table"})}),l.jsx("span",{children:"Table"})]}),l.jsxs("button",{className:`tab-btn ${t==="calendar"?"active":""}`,onClick:()=>e("calendar"),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"calendar"})}),l.jsx("span",{children:"Calendar"})]})]})}function SR({onLogin:t}){const[e,n]=K.useState(""),[r,s]=K.useState(""),[i,o]=K.useState(!1),[u,c]=K.useState(""),h=async p=>{if(p.preventDefault(),!i){c(""),o(!0);try{await t(e,r)}catch(m){const w=String((m==null?void 0:m.code)||"")==="auth/operation-not-allowed"?"Domnio no autorizado no Firebase Auth. Adicione o domnio do site nas configuraes.":m&&(m.code||m.message)||"Falha ao entrar";c(String(w))}finally{o(!1)}}};return l.jsxs("div",{className:"login-wrap",children:[l.jsx("div",{className:"login-banner",children:"BANNER TELA LOGIN"}),l.jsxs("div",{className:"login-card",children:[l.jsx("div",{className:"login-title",children:"Gerenciamento Mkt!"}),l.jsxs("form",{onSubmit:h,className:"login-form",children:[l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",placeholder:"Usurio",value:e,onChange:p=>n(p.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"8",r:"4"}),l.jsx("path",{d:"M4 20c0-4 4-6 8-6s8 2 8 6"})]})})]}),l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",type:"password",placeholder:"Insira sua senha",value:r,onChange:p=>s(p.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),u?l.jsx("div",{className:"login-error",role:"alert",children:u}):null,l.jsx("div",{className:"login-links",children:l.jsx("a",{href:"#",onClick:p=>p.preventDefault(),children:"Esqueceu sua senha?"})}),l.jsx("button",{className:"primary btn-lg",type:"submit",disabled:i,children:i?"Entrando...":"Entrar"})]})]})]})}function AR({open:t,filtros:e,setFiltros:n,designers:r,onClose:s,cadStatus:i,cadTipos:o,origens:u,campanhas:c}){const h=(m,y)=>n(w=>({...w,[m]:y})),p=()=>n({designer:"",status:"",cIni:"",cFim:"",sIni:"",sFim:""});return t?l.jsx("div",{className:"modal",onClick:s,children:l.jsxs("div",{className:"modal-dialog",onClick:m=>m.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"filter"})}),l.jsx("span",{children:"Filtros"})]}),l.jsx("button",{className:"icon",onClick:s,children:l.jsx(ke,{name:"close"})})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Comparativo Mensal"}),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Produo"})}),(()=>{const m=concluidos.filter(x=>inMonth(x.dataConclusao,mesAtual)).length,y=concluidos.filter(x=>inMonth(x.dataConclusao,mesPassado)).length,w=Math.max(m,y,1),N=220,O=80,U=(x,I)=>l.jsx("rect",{x:I,y:O-x/w*O,width:"40",height:x/w*O,rx:"6"});return l.jsxs("svg",{width:N,height:O,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:U(m,40)}),l.jsx("g",{fill:"#4DA3FF",children:U(y,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Qualidade (retrabalho)"})}),(()=>{const m=concluidos.filter(S=>inMonth(S.dataConclusao,mesAtual)).map(S=>S.revisoes||0),y=concluidos.filter(S=>inMonth(S.dataConclusao,mesPassado)).map(S=>S.revisoes||0),w=+(m.reduce((S,b)=>S+b,0)/(m.length||1)).toFixed(2),N=+(y.reduce((S,b)=>S+b,0)/(y.length||1)).toFixed(2),O=Math.max(w,N,1),U=220,x=80,I=(S,b)=>l.jsx("rect",{x:b,y:x-S/O*x,width:"40",height:S/O*x,rx:"6"});return l.jsxs("svg",{width:U,height:x,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:I(w,40)}),l.jsx("g",{fill:"#FF5E5E",children:I(N,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Lead-time"})}),(()=>{const m=compMesAtual,y=compMesPassado,w=Math.max(m,y,1),N=220,O=80,U=(x,I)=>l.jsx("rect",{x:I,y:O-x/w*O,width:"40",height:x/w*O,rx:"6"});return l.jsxs("svg",{width:N,height:O,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:U(m,40)}),l.jsx("g",{fill:"#9B59B6",children:U(y,140)})]})})()]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Insights Automticos"}),l.jsx("div",{className:"insights-grid",children:(()=>{const m=(()=>{const x={};return concluidos.forEach(S=>{const b=S.designer||"",P=S.prazo&&S.dataConclusao&&S.dataConclusao<=S.prazo,M=S.prazo&&S.dataConclusao,g=x[b]||{ok:0,total:0};x[b]={ok:g.ok+(P?1:0),total:g.total+(M?1:0)}}),Object.entries(x).map(([S,b])=>({designer:S,pct:Math.round(100*(b.ok/(b.total||1)))})).sort((S,b)=>b.pct-S.pct)[0]})(),y=(()=>{const x={};return items.forEach(S=>{const b=S.origem||"Outros";x[b]=(x[b]||0)+1}),Object.entries(x).map(([S,b])=>({origem:S,q:b})).sort((S,b)=>b.q-S.q)[0]})(),w=concluidos.filter(x=>(x.revisoes||0)===0).length===concluidos.length,N=compMesAtual<=compMesPassado,O=(()=>{const x=concluidos.filter(S=>/stor/i.test(String(S.tipoMidia||""))),I=+(x.reduce((S,b)=>S+(b.revisoes||0),0)/(x.length||1)).toFixed(2);return{qtd:x.length,avg:I}})(),U=[];return m&&U.push(`O designer ${m.designer} teve o melhor SLA do ms (${m.pct}%)`),y&&U.push(`${y.origem} foi o canal mais solicitado`),w&&U.push("Nenhuma demanda apresentou retrabalho neste ms"),N&&U.push("Seu lead-time melhorou em relao ao ms anterior"),O.qtd>0&&U.push("A categoria Stories teve o maior retrabalho do ms"),U})().map((m,y)=>l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:m})]},y))})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:e.designer,onChange:m=>h("designer",m.target.value),children:[l.jsx("option",{value:"",children:"Designer"}),r.map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{className:"status-select",value:e.status,onChange:m=>h("status",m.target.value),children:[l.jsx("option",{value:"",children:"Status"}),Fa.map(m=>l.jsx("option",{value:m,children:pE(m)},m))]}),l.jsx("div",{className:"chips",children:Fa.map(m=>l.jsx("button",{className:`chip ${e.status===m?"active":""}`,onClick:()=>h("status",e.status===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("div",{className:"chips",children:o.map(m=>l.jsx("button",{className:`chip ${e.tipoMidia===m?"active":""}`,onClick:()=>h("tipoMidia",e.tipoMidia===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem"}),l.jsx("div",{className:"chips",children:(u||Vp).map(m=>l.jsx("button",{className:`chip ${e.origem===m?"active":""}`,onClick:()=>h("origem",e.origem===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsxs("select",{value:e.campanha||"",onChange:m=>h("campanha",m.target.value),children:[l.jsx("option",{value:"",children:"Campanha"}),(c||[]).map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.cIni,onChange:m=>h("cIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.cFim,onChange:m=>h("cFim",m.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.sIni,onChange:m=>h("sIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.sFim,onChange:m=>h("sFim",m.target.value)})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsxs("button",{className:"icon",onClick:p,children:[l.jsx(ke,{name:"close"}),l.jsx("span",{children:"Limpar"})]}),l.jsx("button",{className:"primary",onClick:s,children:"Aplicar"})]})]})}):null}function xR(t,e){return t.filter(n=>!(e.q&&!(n.titulo||"").toLowerCase().includes(e.q.toLowerCase())||e.designer&&n.designer!==e.designer||e.status&&n.status!==e.status||e.tipoMidia&&n.tipoMidia!==e.tipoMidia||e.plataforma&&(n.plataforma||"")!==e.plataforma||e.origem&&(n.origem||"")!==e.origem||e.campanha&&(n.campanha||"")!==e.campanha||e.cIni&&n.dataCriacao&&n.dataCriacao<e.cIni||e.cFim&&n.dataCriacao&&n.dataCriacao>e.cFim||e.sIni&&n.dataSolicitacao<e.sIni||e.sFim&&n.dataSolicitacao>e.sFim))}function CR({items:t,onEdit:e,onStatus:n,cadStatus:r,onDelete:s,onDuplicate:i,hasMore:o,showMore:u,canCollapse:c,showLess:h,shown:p,total:m,compact:y,canEdit:w,loading:N}){const[O,U]=K.useState(null),x=P=>String(P).padStart(2,"0");(P=>{const M=new Date(Date.UTC(P.getFullYear(),P.getMonth(),P.getDate())),g=M.getUTCDay()||7;M.setUTCDate(M.getUTCDate()+4-g);const v=new Date(Date.UTC(M.getUTCFullYear(),0,1)),E=Math.ceil(((M-v)/864e5+1)/7);return`${M.getUTCFullYear()}-W${x(E)}`})(new Date);const S=P=>{if(!P)return"";const[M,g,v]=String(P).split("-").map(Number),E=new Date(M,(g||1)-1,v||1),A=new Date;return A.setHours(0,0,0,0),E.setHours(0,0,0,0),Math.round((E-A)/864e5)},b=P=>{if(!P)return"";const[M,g,v]=String(P).split("-").map(Number),E=String(v).padStart(2,"0"),A=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"][Math.max(0,Math.min(11,g-1||0))];return`${E}.${A}`};return N?l.jsxs("div",{className:`table ${y?"compact":""}`,children:[l.jsx("div",{className:"skeleton row",style:{width:"60%"}}),Array.from({length:8}).map((P,M)=>l.jsx("div",{className:"skeleton row",style:{width:`${90-M*6}%`}},M))]}):l.jsxs("div",{className:`table ${y?"compact":""}`,children:[l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Data de Solicitao"}),l.jsx("th",{children:"Data de Criao"}),l.jsx("th",{children:"Prazo (dias)"}),l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Origem"}),l.jsx("th",{children:"Link"})]})}),l.jsx("tbody",{children:t.map(P=>l.jsxs("tr",{className:"row-clickable",onClick:()=>e(P),children:[l.jsx("td",{className:"name",children:P.titulo}),l.jsx("td",{children:l.jsx("div",{children:P.designer})}),l.jsx("td",{children:l.jsx("select",{className:`status-select ${mE(P.status)}`,value:P.status,onChange:M=>n(P.id,M.target.value),onClick:M=>M.stopPropagation(),disabled:!w,children:Fa.map(M=>l.jsx("option",{value:M,children:pE(M)},M))})}),l.jsx("td",{children:b(P.dataSolicitacao)}),l.jsx("td",{children:b(P.dataCriacao)}),l.jsx("td",{children:l.jsx("span",{style:{color:!Nr(P.status)&&Number(S(P.prazo))<=1?"#ef4444":"inherit"},children:S(P.prazo)})}),l.jsx("td",{children:P.tipoMidia}),l.jsx("td",{children:P.origem||""}),l.jsx("td",{children:P.link?l.jsx("a",{href:P.link,target:"_blank",rel:"noreferrer",onClick:M=>M.stopPropagation(),children:"Visualizar"}):""}),l.jsx("td",{children:Array.isArray(P.arquivos)&&P.arquivos.length?l.jsx("div",{className:"files",children:P.arquivos.slice(0,5).map(M=>l.jsx("a",{href:M.url,target:"_blank",rel:"noreferrer",title:M.name,onClick:g=>g.stopPropagation(),children:l.jsx("img",{className:"file-thumb",src:M.url,alt:M.name})},M.name))}):P.arquivoNome||""})]},P.id))})]}),l.jsxs("div",{className:"table-footer",children:[o&&l.jsx("button",{className:"primary",onClick:u,children:"Mostrar mais demandas"}),c&&l.jsx("button",{className:"primary",onClick:h,children:"Mostrar menos demandas"})]})]})}function PR({items:t,refDate:e}){const n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0),s=n.getDay(),i=r.getDate(),o={};t.forEach(c=>{const h=c.dataSolicitacao,p=new Date(h);p.getMonth()===e.getMonth()&&p.getFullYear()===e.getFullYear()&&(o[h]||(o[h]=[])).push(c)});const u=[];for(let c=0;c<s;c++)u.push(null);for(let c=1;c<=i;c++)u.push(c);return l.jsxs("div",{className:"calendar",children:[l.jsx("div",{className:"cal-head",children:l.jsx("div",{className:"month",children:e.toLocaleString("pt-BR",{month:"long",year:"numeric"})})}),l.jsxs("div",{className:"cal-grid",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(c=>l.jsx("div",{className:"cal-cell head",children:c},c)),u.map((c,h)=>{if(!c)return l.jsx("div",{className:"cal-cell"},h);const p=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(c).padStart(2,"0")}`,m=o[p]||[];return l.jsxs("div",{className:"cal-cell",children:[l.jsx("div",{className:"day",children:c}),m.map(y=>l.jsxs("div",{className:"cal-item",children:[y.titulo," (",y.designer,")"]},y.id))]},h)})]})]})}function NR({open:t,mode:e,onClose:n,onSubmit:r,initial:s,cadTipos:i,designers:o,cadPlataformas:u,onDelete:c,userLabel:h,canDelete:p,onAddComment:m,cadOrigens:y,currentUser:w}){const[N,O]=K.useState((s==null?void 0:s.designer)||w||""),[U,x]=K.useState((s==null?void 0:s.tipoMidia)||"Post"),[I,S]=K.useState((s==null?void 0:s.titulo)||""),[b,P]=K.useState((s==null?void 0:s.link)||""),[M,g]=K.useState(""),[v,E]=K.useState((s==null?void 0:s.dataSolicitacao)||An()),[A,R]=K.useState((s==null?void 0:s.plataforma)||""),[k,C]=K.useState((s==null?void 0:s.arquivos)||[]),[Je,At]=K.useState((s==null?void 0:s.dataCriacao)||""),[ot,H]=K.useState((s==null?void 0:s.dataFeedback)||""),[$,D]=K.useState((s==null?void 0:s.descricao)||""),[z,q]=K.useState((s==null?void 0:s.prazo)||""),[J,ie]=K.useState((s==null?void 0:s.comentarios)||[]),[Ie,Oe]=K.useState(""),[be,at]=K.useState((s==null?void 0:s.historico)||[]),[$n,en]=K.useState((s==null?void 0:s.origem)||""),[cn,_n]=K.useState((s==null?void 0:s.campanha)||""),[wn,Dn]=K.useState("");K.useEffect(()=>{O((s==null?void 0:s.designer)||w||""),x((s==null?void 0:s.tipoMidia)||"Post"),S((s==null?void 0:s.titulo)||""),P((s==null?void 0:s.link)||""),g(""),E((s==null?void 0:s.dataSolicitacao)??(e==="create"?An():"")),R((s==null?void 0:s.plataforma)||(u==null?void 0:u[0])||""),C((s==null?void 0:s.arquivos)||[]),At((s==null?void 0:s.dataCriacao)||""),H((s==null?void 0:s.dataFeedback)||""),D((s==null?void 0:s.descricao)||""),q((s==null?void 0:s.prazo)||""),ie((s==null?void 0:s.comentarios)||[]),Oe(""),at((s==null?void 0:s.historico)||[]),en((s==null?void 0:s.origem)||""),_n((s==null?void 0:s.campanha)||"")},[s,t,o,i,u,y]);const ye=F=>{F.preventDefault(),r({designer:N,tipoMidia:U,titulo:I,link:b,arquivoNome:M,dataSolic:v,dataCriacao:Je,dataFeedback:ot,plataforma:A,arquivos:k,descricao:$,prazo:z,comentarios:J,historico:be,origem:$n,campanha:cn})},He=()=>{const F=Ie.trim();if(!F)return;const ne=wR(F),me={texto:F,data:An(),mentions:ne,autor:h},he={tipo:"comentario",autor:h,data:me.data,texto:F,mentions:ne};ie(fe=>[me,...fe]),at(fe=>[he,...fe]),Oe("");try{m&&m(s==null?void 0:s.id,me,he)}catch{}},Fe=F=>{if(!F)return"";try{return new Date(F).toLocaleString("pt-BR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return F}},[tr,nr]=K.useState(Date.now());K.useEffect(()=>{const F=setInterval(()=>nr(Date.now()),1e3);return()=>clearInterval(F)},[]);const rr=F=>{if(!F||F<=0)return"00:00:00";const ne=Math.floor(F/1e3),me=String(Math.floor(ne/3600)).padStart(2,"0"),he=String(Math.floor(ne%3600/60)).padStart(2,"0"),fe=String(ne%60).padStart(2,"0");return`${me}:${he}:${fe}`},yr=Number((s==null?void 0:s.tempoProducaoMs)||0),qn=s!=null&&s.startedAt?Date.parse(s.startedAt):null,We=/produ|progresso/i.test(String((s==null?void 0:s.status)||"")),En=K.useRef(null);K.useEffect(()=>{!qn&&We&&!En.current&&(En.current=Date.now()),(qn||!We)&&(En.current=null)},[qn,We]);const mt=qn??En.current,T=yr+(mt?Math.max(0,tr-mt):0),[j,L]=K.useState(null);return t?l.jsx("div",{className:"modal",children:l.jsxs("div",{className:`modal-dialog ${e!=="create"?"tall":""}`,onClick:F=>F.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[e==="create"?l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}):l.jsx("div",{className:"title editable",contentEditable:!0,suppressContentEditableWarning:!0,onInput:F=>S(F.currentTarget.textContent||""),children:I||"Sem ttulo"}),l.jsx("button",{className:"icon",onClick:n,children:l.jsx(ke,{name:"close"})})]}),l.jsxs("div",{className:`status-bar ${mE((s==null?void 0:s.status)||"Aberta")}`,children:[l.jsx("div",{children:(s==null?void 0:s.status)||"Aberta"}),e!=="create"&&l.jsxs("div",{className:"timer",children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"clock"})}),l.jsx("span",{children:rr(T)})]})]}),l.jsx("form",{id:"modalForm",className:"modal-body",onSubmit:ye,children:l.jsxs("div",{className:`modal-columns ${e==="create"?"single":"cols3"}`,children:[l.jsxs("div",{className:"modal-main",children:[l.jsxs("div",{className:e==="create"?"form-grid":"form-stack",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:N,onChange:F=>O(F.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Designer"}),(o||[]).map(F=>l.jsx("option",{value:F,children:F},F))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("select",{value:U,onChange:F=>x(F.target.value),children:(i||["Post","Story","Banner","Vdeo","Outro"]).map(F=>l.jsx("option",{value:F,children:F},F))})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Titulo"}),l.jsx("input",{value:I,onChange:F=>S(F.target.value),required:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem da Demanda"}),l.jsxs("select",{value:$n,onChange:F=>en(F.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Origem"}),(y||Vp).map(F=>l.jsx("option",{value:F,children:F},F))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsx("input",{value:cn,onChange:F=>_n(F.target.value),placeholder:"Ex: Black Friday"})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link"}),l.jsx("input",{type:"url",value:b,onChange:F=>P(F.target.value),placeholder:"https://"})]}),e==="create"?l.jsxs("div",{className:"row-2",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:F=>{const me=Array.from(F.target.files||[]).filter(pe=>(pe.size||0)<=1048576).slice(0,5),he=new Date().toISOString(),fe=me.map(pe=>new Promise(Ne=>{const _e=new FileReader;_e.onload=()=>Ne({name:pe.name,url:_e.result,addedBy:h,addedAt:he}),_e.readAsDataURL(pe)}));Promise.all(fe).then(pe=>{C(pe),at(_e=>[{tipo:"arquivo",autor:h,data:An(),arquivos:pe},..._e]);const Ne=pe.map(_e=>_e.name).join(", ");ie(_e=>[{texto:`Arquivos anexados: ${Ne||pe.length}`,data:An()},..._e])})}})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:z,onChange:F=>q(F.target.value)})]})]}):l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:F=>{const me=Array.from(F.target.files||[]).filter(pe=>(pe.size||0)<=1048576).slice(0,5),he=new Date().toISOString(),fe=me.map(pe=>new Promise(Ne=>{const _e=new FileReader;_e.onload=()=>Ne({name:pe.name,url:_e.result,addedBy:h,addedAt:he}),_e.readAsDataURL(pe)}));Promise.all(fe).then(pe=>{C(pe),at(_e=>[{tipo:"arquivo",autor:h,data:An(),arquivos:pe},..._e]);const Ne=pe.map(_e=>_e.name).join(", ");ie(_e=>[{texto:`Arquivos anexados: ${Ne||pe.length}`,data:An()},..._e])})}}),Array.isArray(k)&&k.length>0&&l.jsx("div",{className:"thumbs",children:k.map((F,ne)=>l.jsxs("div",{className:"file-item",children:[l.jsx("img",{className:"file-thumb",src:F.url,alt:F.name}),l.jsxs("div",{className:"file-meta",children:[F.name,F.addedBy?`  ${F.addedBy}`:""]}),l.jsxs("div",{className:"file-actions",children:[l.jsx("a",{href:F.url,download:!0,target:"_blank",rel:"noreferrer",children:"Baixar"}),l.jsxs("label",{className:"replace-btn",children:["Substituir",l.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:me=>{var Ne;const he=(Ne=me.target.files)==null?void 0:Ne[0];if(!he)return;const fe=new FileReader,pe=new Date().toISOString();fe.onload=()=>{const _e={name:he.name,url:fe.result,addedBy:h,addedAt:pe};C(Bt=>Bt.map((_r,Ae)=>Ae===ne?_e:_r))},fe.readAsDataURL(he)}})]}),l.jsx("button",{type:"button",onClick:()=>C(me=>me.filter((he,fe)=>fe!==ne)),children:"Excluir"})]})]},F.name+ne))})]})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:8,className:"desc-input",value:$,onChange:F=>D(F.target.value)})]})]}),e!=="create"&&l.jsxs("div",{className:"modal-center",children:[l.jsxs("div",{className:"date-row",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsx("input",{type:"date",value:v,disabled:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsx("input",{type:"date",value:Je,disabled:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:z,onChange:F=>q(F.target.value)})]}),String((s==null?void 0:s.status)||"").toLowerCase().includes("feedback")&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Feedback"}),l.jsx("input",{type:"date",value:ot,onChange:F=>H(F.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:12,className:"desc-input",value:$,onChange:F=>D(F.target.value)})]})]}),e!=="create"&&l.jsx("div",{className:"modal-side",children:l.jsxs("div",{className:"activity",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Comentrios"}),l.jsx("input",{placeholder:"Escreva um comentrio use @ para mencionar",value:Ie,onChange:F=>Oe(F.target.value)}),Ie.trim().length>0&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:l.jsx("button",{className:"primary",type:"button",onClick:He,children:"Adicionar"})})]}),l.jsx("div",{className:"activity-list",children:(J||[]).length===0?l.jsx("div",{className:"empty",children:"Sem comentrios"}):(J||[]).map((F,ne)=>l.jsx("div",{className:"activity-item",children:l.jsxs("div",{className:"activity-entry",children:[l.jsx("div",{className:"avatar",children:"V"}),l.jsxs("div",{className:"entry-content",children:[l.jsx("div",{className:"entry-title",children:l.jsxs("span",{children:[l.jsx("strong",{children:F.autor||""})," comentou: ",F.texto]})}),l.jsx("div",{className:"entry-time",children:Fe(F.data)}),Array.isArray(F.mentions)&&F.mentions.length>0&&l.jsx("div",{className:"mentions-row",children:F.mentions.map(me=>l.jsxs("span",{className:`mention-pill ${String(h||"").toLowerCase()===String(me||"").toLowerCase()?"you":""}`,children:["@",me,String(h||"").toLowerCase()===String(me||"").toLowerCase()?"  Voc foi mencionado":""]},me))})]})]})},ne))}),e!=="create"&&l.jsxs("div",{className:"timeline",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Linha do tempo"})}),["Criado","Em produo","Aguardando Feedback","Revisar","Aprovada","Concluda","Postado"].map(F=>{const ne=(Ae,jt)=>{const tn=String(Ae.status_novo||Ae.para||""||"").toLowerCase();return jt==="Criado"?tn==="aberta":jt==="Em produo"?tn.includes("produ")||tn.includes("progresso"):jt==="Aguardando Feedback"?tn.includes("feedback"):jt==="Revisar"?tn.includes("revisar"):jt==="Aprovada"?tn.includes("aprov"):jt==="Concluda"?tn.includes("conclu"):!1};let he=F==="Postado"?(be||[]).filter(Ae=>Ae.tipo==="mlabs"):(be||[]).filter(Ae=>Ae.tipo==="status"&&ne(Ae,F));if(F==="Concluda"&&(!he||he.length===0)&&String((s==null?void 0:s.status)||"").toLowerCase().includes("conclu")){const Ae=(s==null?void 0:s.finishedAt)||(s!=null&&s.dataConclusao?`${s.dataConclusao}T00:00:00Z`:null);he=[{tipo:"status",autor:(s==null?void 0:s.autor)||h,data_hora_evento:Ae,data:s==null?void 0:s.dataConclusao,status_novo:"Concluda",responsavel:(s==null?void 0:s.designer)||""}]}const fe=he&&he.length?he[he.length-1]:null,pe=(fe==null?void 0:fe.duracao_em_minutos)!=null?Bv(fe.duracao_em_minutos):"",Ne=fe!=null&&fe.data_hora_evento?Fe(fe.data_hora_evento):Fe(fe==null?void 0:fe.data),_e=(fe==null?void 0:fe.responsavel)||(fe==null?void 0:fe.autor)||"",Bt=he.length,_r=j===F;return l.jsxs("div",{className:"timeline-item",onClick:()=>L(Ae=>Ae===F?null:F),children:[l.jsx("div",{className:"timeline-left",children:l.jsx("span",{className:"timeline-icon",children:""})}),l.jsxs("div",{className:"timeline-body",children:[l.jsxs("div",{className:"timeline-title",children:[F,Bt>1?`  ${Bt}`:""]}),l.jsxs("div",{className:"timeline-meta",children:[Ne,_e?`  ${_e}`:"",pe?`  ${pe}`:""]}),_r&&Bt>0&&l.jsx("div",{className:"timeline-details",children:he.map((Ae,jt)=>l.jsxs("div",{className:"timeline-detail-row",children:[l.jsx("div",{children:Ae!=null&&Ae.data_hora_evento?Fe(Ae.data_hora_evento):Fe(Ae==null?void 0:Ae.data)}),l.jsx("div",{children:(Ae==null?void 0:Ae.responsavel)||(Ae==null?void 0:Ae.autor)||""}),l.jsx("div",{children:(Ae==null?void 0:Ae.duracao_em_minutos)!=null?Bv(Ae.duracao_em_minutos):""})]},jt))})]})]},F)})]}),e!=="create"&&l.jsxs("div",{className:"ia-panel",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Previso de entrega por IA"})}),l.jsx("div",{className:"ia-text",children:(s==null?void 0:s.previsaoIA)||Hh([],s||{})})]})]})})]})}),l.jsxs("div",{className:"modal-actions",children:[e==="edit"&&p&&l.jsx("button",{className:"danger",type:"button",onClick:()=>{window.confirm("Confirmar excluso desta demanda?")&&(c(s.id),n())},children:"Excluir"}),l.jsx("button",{className:"primary",type:"submit",form:"modalForm",children:"Salvar"})]})]})}):null}function RR({cadStatus:t,setCadStatus:e,cadTipos:n,setCadTipos:r,cadPlataformas:s,setCadPlataformas:i,cadOrigens:o,setCadOrigens:u,cadStatusColors:c,setCadStatusColors:h}){const[p,m]=K.useState("tipo"),[y,w]=K.useState(""),[N,O]=K.useState("#f59e0b"),U=p==="status"?t:p==="tipo"?n:p==="plataforma"?s:o,x=P=>{p==="status"?e(P):p==="tipo"?r(P):p==="plataforma"?i(P):u(P)},I=async()=>{const P=y.trim();if(!P||U.includes(P))return;const M=[...U,P];if(x(M),w(""),p==="status"&&h(g=>({...g,[P]:N})),le){const g=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await ba(Et(le,g,P),{name:P,active:!0})}catch(v){try{window.alert(String((v==null?void 0:v.code)||(v==null?void 0:v.message)||"Falha ao gravar cadastro"))}catch{}}}},S=async P=>{const M=U.filter(g=>g!==P);if(x(M),le){const g=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await oa(Et(le,g,P))}catch(v){try{window.alert(String((v==null?void 0:v.code)||(v==null?void 0:v.message)||"Falha ao remover cadastro"))}catch{}}}},b=async P=>{if(!le)return;const M=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await ba(Et(le,M,P),{active:!1},{merge:!0})}catch(g){try{window.alert(String((g==null?void 0:g.code)||(g==null?void 0:g.message)||"Falha ao desativar cadastro"))}catch{}}};return l.jsxs("div",{className:"panel",children:[l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${p==="tipo"?"active":""}`,onClick:()=>m("tipo"),children:"Tipo"}),l.jsx("button",{className:`tab ${p==="origem"?"active":""}`,onClick:()=>m("origem"),children:"Origem"})]}),l.jsxs("div",{className:"form-row",style:{marginTop:10},children:[l.jsx("label",{children:p==="status"?"Novo Status":p==="tipo"?"Novo Tipo":"Nova Origem"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{value:y,onChange:P=>w(P.target.value)}),p==="status"&&l.jsx("input",{type:"color",value:N,onChange:P=>O(P.target.value),title:"Cor"}),l.jsx("button",{className:"primary",onClick:I,children:"Adicionar"})]})]}),l.jsx("div",{className:"form-row",style:{marginTop:10},children:l.jsx("select",{children:U.map(P=>l.jsx("option",{value:P,children:P},P))})}),l.jsx("div",{className:"list",style:{marginTop:12},children:U.length===0?l.jsx("div",{className:"empty",children:"Sem itens"}):U.map(P=>l.jsxs("div",{className:"list-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",border:"1px solid var(--border)",borderRadius:8,background:"#0b0e12",marginBottom:6},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[p==="status"&&l.jsx("span",{className:"status-dot",style:{background:c[P]||"#3b82f6"}}),l.jsx("div",{children:P})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[p==="status"&&l.jsx("input",{type:"color",value:c[P]||"#3b82f6",onChange:M=>h(g=>({...g,[P]:M.target.value}))}),l.jsx("button",{className:"icon",onClick:()=>b(P),title:"Desativar",children:l.jsx(ke,{name:"minus"})}),l.jsx("button",{className:"icon",onClick:()=>S(P),children:l.jsx(ke,{name:"trash"})})]})]},P))})]})}function kR(){var jt,tn,sr;const[t,e]=K.useState(null),[n,r]=K.useState([]),[s,i]=K.useState({}),[o,u]=K.useState(!0),[c,h]=K.useState("table"),[p,m]=K.useState(!1),[y,w]=K.useState("dashboard"),[N,O]=K.useState({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""}),[U,x]=K.useState(!1),[I,S]=K.useState(!1),[b,P]=K.useState("create"),[M,g]=K.useState(null),[v,E]=K.useState(gE),[A,R]=K.useState({autoPostMLabs:!1}),[k,C]=K.useState(["Aberta","Em Progresso","Concluda"]),[Je,At]=K.useState(["Post","Story","Banner","Vdeo","Outro"]),[ot,H]=K.useState([]),[$,D]=K.useState([]),[z,q]=K.useState([]),[J,ie]=K.useState({Aberta:"#f59e0b","Em Progresso":"#3b82f6",Concluda:"#10b981"}),Ie=K.useMemo(()=>Array.from(new Set(n.map(oe=>oe.designer).filter(Boolean))).sort(),[n]),Oe=K.useMemo(()=>z.filter(oe=>(oe.cargo||"")==="Designer").map(oe=>oe.username).filter(Boolean).sort(),[z]),be=K.useMemo(()=>Array.from(new Set([...Oe,...Ie])).sort(),[Oe,Ie]),at=K.useMemo(()=>Array.from(new Set(n.map(oe=>oe.campanha).filter(Boolean))).sort(),[n]),$n=(t==null?void 0:t.role)||"comum",en=K.useMemo(()=>xR(n,N),[n,N]),cn=K.useMemo(()=>en,[en]),_n=K.useMemo(()=>be,[be]),wn=K.useMemo(()=>en.slice().sort((oe,Q)=>{const Y=oe.dataCriacao||"",re=(Q.dataCriacao||"").localeCompare(Y);if(re!==0)return re;const we=oe.id||0;return(Q.id||0)-we}),[en]),Dn=K.useMemo(()=>be,[be]),ye=K.useMemo(()=>wn,[wn]);K.useMemo(()=>ye.filter(oe=>/revisar/i.test(String(oe.status||""))).length,[ye]),K.useMemo(()=>ye.filter(oe=>/aprovada/i.test(String(oe.status||""))).length,[ye]);const He=K.useMemo(()=>{const oe=ye,Q=Y=>String(Y||"").toLowerCase();return{Pendente:oe.filter(Y=>Lp(Y.status)).length,"Em produo":oe.filter(Y=>Fp(Y.status)).length,"Aguardando Feedback":oe.filter(Y=>Q(Y.status).includes("feedback")).length,Aprovada:oe.filter(Y=>Q(Y.status).includes("aprov")).length,Revisar:oe.filter(Y=>Q(Y.status).includes("revisar")).length,Concluida:oe.filter(Y=>Q(Y.status).includes("conclu")).length}},[ye]),[Fe,tr]=K.useState(10),[nr,rr]=K.useState(new Date),[yr,qn]=K.useState("status"),We=K.useMemo(()=>(t==null?void 0:t.name)||(t==null?void 0:t.username)||"Voc",[t]),En=["dashboard","demandas","config","cadastros","relatorios","usuarios"],mt=K.useMemo(()=>En,[]);K.useEffect(()=>{},[n,le]),K.useEffect(()=>{le||u(!1)},[le]),K.useEffect(()=>{(async()=>{try{const Q=yR&&!1||typeof window<"u"&&new URLSearchParams(window.location.search).get("purge")==="1";if(!le||!Q||typeof window<"u"&&window.__PURGED__)return;if(typeof window<"u"&&(window.__PURGED__=!0),Gt)try{await $l(Gt,"purger@betaki.bet.br","purge12345")}catch{try{await Bh(Gt,"purger@betaki.bet.br","purge12345"),await $l(Gt,"purger@betaki.bet.br","purge12345")}catch{}}const Y=["demandas_v2","demandas","cad_status","cad_tipos","cad_designers","cad_plataformas","cad_origens","historico_status","usuarios"];for(const Se of Y)try{const re=await js(Pt(le,Se)),we=[];re.forEach(Z=>we.push(oa(Et(le,Se,Z.id)))),we.length&&await Promise.all(we)}catch{}try{window.alert("Purge Firebase concludo")}catch{}}catch{}})()},[le,Gt]),K.useEffect(()=>{},[le]),K.useEffect(()=>{if(!Gt)return;const oe=LP(Gt,async Q=>{if(Q){let Y=null;const Se=Q.email||"",re=(Se.split("@")[0]||"").trim();if(le&&re)try{const Z=await V1(Et(le,"usuarios",re));Y=Z.exists()?Z.data():null}catch{}const we={username:(Y==null?void 0:Y.username)||re,name:(Y==null?void 0:Y.name)||Se,role:(Y==null?void 0:Y.role)||"comum",pages:(Y==null?void 0:Y.pages)||null,actions:(Y==null?void 0:Y.actions)||null,cargo:(Y==null?void 0:Y.cargo)||""};e(we),u(!1)}else e(null),u(!1)});return()=>{try{oe()}catch{}}},[Gt,le]),K.useEffect(()=>{Object.entries(v||{}).forEach(([oe,Q])=>{try{document.documentElement.style.setProperty(`--${oe}`,Q)}catch{}})},[v]),K.useEffect(()=>{if(!le||!t)return;const oe=bs(Pt(le,sn),Z=>{const te=[];Z.forEach(ce=>te.push({id:ce.data().id||ce.id,...ce.data()})),r(te),u(!1)}),Q=bs(Pt(le,"usuarios"),Z=>{const te=[];Z.forEach(ce=>te.push({id:ce.id,...ce.data()})),q(te)}),Y=bs(Pt(le,"cad_status"),Z=>C(Z.docs.map(te=>te.data().name||te.id))),Se=bs(Pt(le,"cad_tipos"),Z=>At(Z.docs.filter(te=>te.data().active!==!1).map(te=>te.data().name||te.id))),re=bs(Pt(le,"cad_plataformas"),Z=>H(Z.docs.filter(te=>te.data().active!==!1).map(te=>te.data().name||te.id))),we=bs(Pt(le,"cad_origens"),Z=>D(Z.docs.filter(te=>te.data().active!==!1).map(te=>te.data().name||te.id)));return()=>{try{oe()}catch{}try{Q()}catch{}try{Y()}catch{}try{Se()}catch{}try{re()}catch{}try{we()}catch{}}},[le,t]),K.useEffect(()=>{t&&!mt.includes(y)&&w(mt[0]||"dashboard"),!t&&y!=="dashboard"&&y!=="demandas"&&y!=="config"&&y!=="cadastros"&&y!=="relatorios"&&y!=="usuarios"&&w("dashboard")},[t,mt,y]);const T=async()=>{try{await FP(Gt)}catch{}e(null)},j=async(oe,Q)=>{const Y=String(oe||"").trim();if(!Y||!Q)throw new Error("Credenciais ausentes");if(!Gt)throw new Error("Firebase no configurado");const Se=/@/.test(Y)?Y:`${Y}@betaki.bet.br`;try{await $l(Gt,Se,Q)}catch{if(await Bh(Gt,Se,Q),await $l(Gt,Se,Q),le)try{await ba(Et(le,"usuarios",Y),{username:Y,email:Se,name:Y,role:"comum",cargo:"",pages:null,actions:null})}catch{}}},L=((jt=t==null?void 0:t.actions)==null?void 0:jt.criar)!==!1,F=((tn=t==null?void 0:t.actions)==null?void 0:tn.excluir)!==!1,ne=((sr=t==null?void 0:t.actions)==null?void 0:sr.visualizar)!==!1,me=()=>{!t||!L||(P("create"),g(null),S(!0))},he=oe=>{!t||!ne||(P("edit"),g(oe),S(!0))},fe=async oe=>{const Q={...oe,status:"Aberta",dataSolicitacao:An(),dataCriacao:An()};if(le)try{const Y=String(Date.now());await Bl(Pt(le,sn),{...Q,id:Y,createdAt:yv()})}catch{}},pe=async(oe,Q)=>{const Y=An();let Se=null;r(we=>we.map(Z=>{if(String(Z.id)!==String(oe))return Z;const te=Z.status!==Q,ce=String(Z.status||"").toLowerCase().includes("produ")||String(Z.status||"").toLowerCase().includes("progresso"),Ue=String(Q||"").toLowerCase().includes("produ")||String(Q||"").toLowerCase().includes("progresso"),$e=Date.now();let xt=Number(Z.tempoProducaoMs||0),dt=Z.startedAt||null,Tn=Z.finishedAt||null;const gt=String(Q||"").toLowerCase().includes("feedback"),Mn=String(Z.status||"").toLowerCase().includes("feedback");let nn=Z.slaStartAt||null,lt=Z.slaStopAt||null,ht=Number(Z.slaPauseMs||0),Be=Z.pauseStartedAt||null;if(te){if(ce&&!Ue&&dt){const Ze=Date.parse(dt);isNaN(Ze)||(xt+=Math.max(0,$e-Ze)),dt=null}if(!ce&&Ue&&!dt&&(dt=new Date($e).toISOString(),nn||(nn=dt)),!Mn&&gt&&!Be&&(Be=new Date($e).toISOString()),Mn&&!gt&&Be){const Ze=Date.parse(Be);isNaN(Ze)||(ht+=Math.max(0,$e-Ze)),Be=null}}const vt=String(Q||"").toLowerCase().includes("revisar"),Ct=te&&vt?(Z.revisoes||0)+1:Z.revisoes||0,rn=String(Q||"").toLowerCase().includes("concluida")||Q==="Concluda",On=rn?Z.dataConclusao||Y:Z.dataConclusao,Ke=rn?Z.dataCriacao||Y:Z.dataCriacao;te&&rn&&(Tn=new Date($e).toISOString(),lt=Tn);const zt=(Z.historico||[]).find(Ze=>Ze.tipo==="status"),co=zt!=null&&zt.data_hora_evento?Date.parse(zt.data_hora_evento):zt!=null&&zt.data?Date.parse(`${zt.data}T00:00:00Z`):null,li=new Date($e).toISOString(),bc=te&&co?Math.round(($e-co)/6e4):null,Ns=te?{tipo:"status",autor:We,data:Y,data_hora_evento:li,status_anterior:Z.status,status_novo:Q,duracao_em_minutos:bc,responsavel:We,id_demanda:Z.id,de:Z.status,para:Q}:null,ho=(()=>{if(!Z.prazo)return null;const[Ze,dn,ci]=String(Z.prazo).split("-").map(Number),vo=new Date(Ze,(dn||1)-1,ci||1);vo.setHours(0,0,0,0);const yo=new Date;return yo.setHours(0,0,0,0),vo-yo})(),fo=!!(Z.prazo&&!rn&&typeof ho=="number"&&ho<=864e5),$r=te&&fo?{tipo:"alerta",autor:We,data:Y,data_hora_evento:li,mensagem:"Prazo menor que 24h",id_demanda:Z.id}:null,ui=!!(te&&(String(Q||"").toLowerCase().includes("aprov")||String(Q||"").toLowerCase().includes("conclu"))&&A.autoPostMLabs)?{tipo:"mlabs",autor:We,data:Y,data_hora_evento:li,mensagem:"Postagem agendada via mLabs",id_demanda:Z.id}:null,po=Ns?[Ns,...$r?[$r]:[],...ui?[ui]:[],...Z.historico||[]]:Z.historico||[],il=te&&gt&&!Z.dataFeedback?Y:Z.dataFeedback,ol=(po||[]).filter(Ze=>Ze.tipo==="status"&&Ze.duracao_em_minutos!=null).reduce((Ze,dn)=>Ze+(dn.duracao_em_minutos||0),0),al=(()=>{const Ze={};return(po||[]).forEach(dn=>{if(dn.tipo==="status"&&dn.duracao_em_minutos!=null){const ci=dn.status_anterior||dn.de||"Aberta";Ze[ci]=(Ze[ci]||0)+(dn.duracao_em_minutos||0)}}),Ze})(),mo=(()=>{if(!nn)return 0;const Ze=lt?Date.parse(lt):$e,dn=Date.parse(nn);return isNaN(dn)||isNaN(Ze)?0:Math.max(0,Ze-dn-ht)})(),go=(()=>{if(!On||!Z.prazo)return null;try{return String(On)<=String(Z.prazo)}catch{return null}})(),ll=Hh(we,{...Z});return Se={...Z,status:Q,revisoes:Ct,dataConclusao:On,dataCriacao:Ke,dataFeedback:il,historico:po,tempoProducaoMs:xt,startedAt:dt,finishedAt:Tn,previsaoIA:ll,fxBounceAt:te?$e:Z.fxBounceAt||0,slaStartAt:nn,slaStopAt:lt,slaPauseMs:ht,pauseStartedAt:Be,slaNetMs:mo,slaOk:go,leadTotalMin:ol,leadPorFase:al},Se}));const re=Se;if(le&&re)try{const we=(re.historico||[]).find(vt=>vt.tipo==="status"),Z=we!=null&&we.data_hora_evento?Date.parse(we.data_hora_evento):we!=null&&we.data?Date.parse(`${we.data}T00:00:00Z`):null,te=new Date().toISOString(),ce=re.status!==Q&&Z?Math.round((Date.now()-Z)/6e4):null,Ue=(()=>{if(!re.prazo)return null;const[vt,Ct,rn]=String(re.prazo).split("-").map(Number),On=new Date(vt,(Ct||1)-1,rn||1);On.setHours(0,0,0,0);const Ke=new Date;return Ke.setHours(0,0,0,0),On-Ke})(),$e=!!(re.prazo&&!(String(Q||"").toLowerCase().includes("concluida")||Q==="Concluda")&&typeof Ue=="number"&&Ue<=864e5),xt={tipo:"status",autor:We,data:Y,data_hora_evento:te,status_anterior:re.status,status_novo:Q,duracao_em_minutos:ce,responsavel:We,id_demanda:re.id,de:re.status,para:Q},dt=$e?{tipo:"alerta",autor:We,data:Y,data_hora_evento:te,mensagem:"Prazo menor que 24h",id_demanda:re.id}:null,gt=!!((String(Q||"").toLowerCase().includes("aprov")||String(Q||"").toLowerCase().includes("conclu"))&&A.autoPostMLabs)?{tipo:"mlabs",autor:We,data:Y,data_hora_evento:te,mensagem:"Postagem agendada via mLabs",id_demanda:re.id}:null,Mn=[xt,...dt?[dt]:[],...gt?[gt]:[],...re.historico||[]],nn=Oo(Pt(le,sn),bo("id","==",String(oe))),lt=await js(nn),ht={...re,status:Q,dataCriacao:String(Q||"").toLowerCase().includes("concluida")||Q==="Concluda"?re.dataCriacao||Y:re.dataCriacao||null,dataConclusao:String(Q||"").toLowerCase().includes("concluida")||Q==="Concluda"?re.dataConclusao||Y:re.dataConclusao||null,dataFeedback:re.status!==Q&&String(Q||"").toLowerCase().includes("feedback")&&!re.dataFeedback?Y:re.dataFeedback??null,revisoes:(re.revisoes||0)+(re.status!==Q&&String(Q||"").toLowerCase().includes("revisar")?1:0),historico:Mn,tempoProducaoMs:re.tempoProducaoMs,startedAt:re.startedAt,finishedAt:String(Q||"").toLowerCase().includes("concluida")||Q==="Concluda"?new Date().toISOString():re.finishedAt||null,slaStartAt:re.slaStartAt,slaStopAt:String(Q||"").toLowerCase().includes("concluida")||Q==="Concluda"?new Date().toISOString():re.slaStopAt||null,slaPauseMs:re.slaPauseMs,pauseStartedAt:re.pauseStartedAt,slaNetMs:re.slaNetMs,slaOk:re.slaOk??null,leadTotalMin:re.leadTotalMin,leadPorFase:re.leadPorFase},Be=[];lt.forEach(vt=>Be.push(Bs(Et(le,sn,vt.id),ht))),Be.length&&await Promise.all(Be);try{await Bl(Pt(le,"historico_status"),xt)}catch{}}catch{}},Ne=async(oe,Q,Y)=>{r(re=>re.map(we=>{if(String(we.id)!==String(oe))return we;const Z=[Q,...we.comentarios||[]],te=Array.isArray(Q.mentions)&&Q.mentions.length>0?{tipo:"notificacao",autor:We,data:Q.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:Q.mentions,id_demanda:we.id}:null,ce=te?[te,Y,...we.historico||[]]:[Y,...we.historico||[]];return{...we,comentarios:Z,historico:ce,fxSavedAt:Date.now()}}));const Se=n.find(re=>String(re.id)===String(oe));if(le&&Se)try{const re=Array.isArray(Q.mentions)&&Q.mentions.length>0?{tipo:"notificacao",autor:We,data:Q.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:Q.mentions,id_demanda:Se.id}:null,we=re?[re,Y,...Se.historico||[]]:[Y,...Se.historico||[]],Z=Oo(Pt(le,sn),bo("id","==",String(oe))),te=await js(Z),ce=[];te.forEach(Ue=>ce.push(Bs(Et(le,sn,Ue.id),{comentarios:[Q,...Se.comentarios||[]],historico:we}))),ce.length&&await Promise.all(ce)}catch{}},_e=async oe=>{if(r(Q=>Q.map(Y=>Y.id===oe?{...Y,fxDeleting:!0}:Y)),setTimeout(()=>{r(Q=>Q.filter(Y=>Y.id!==oe))},180),le)try{const Q=Oo(Pt(le,sn),bo("id","==",String(oe))),Y=await js(Q),Se=[];Y.forEach(re=>Se.push(oa(Et(le,sn,re.id)))),Se.length&&await Promise.all(Se)}catch{}},Bt=async(oe,Q)=>{const Y=An();let Se=null;r(we=>we.map(Z=>{if(Z.id!==oe)return Z;if((Z.historico||[]).some($e=>$e.tipo==="alerta"&&$e.data===Y&&$e.mensagem===Q))return Se=Z,Z;const ce={tipo:"alerta",autor:We,data:Y,data_hora_evento:new Date().toISOString(),mensagem:Q,id_demanda:Z.id},Ue={...Z,historico:[ce,...Z.historico||[]]};return Se=Ue,Ue}));const re=Se||n.find(we=>we.id===oe);if(re&&le)try{const we={tipo:"alerta",autor:We,data:Y,data_hora_evento:new Date().toISOString(),mensagem:Q,id_demanda:re.id},Z=Oo(Pt(le,sn),bo("id","==",String(oe))),te=await js(Z),ce=[];te.forEach(Ue=>ce.push(Bs(Et(le,sn,Ue.id),{...re,historico:[we,...re.historico||[]]}))),ce.length&&await Promise.all(ce)}catch{}};K.useEffect(()=>{const oe=setInterval(()=>{An();const Q=n.filter(te=>!Nr(te.status)),Y=Q.reduce((te,ce)=>{const Ue=ce.designer||"";return te[Ue]=(te[Ue]||0)+1,te},{});Q.forEach(te=>{if(te.prazo)try{const[dt,Tn,gt]=String(te.prazo).split("-").map(Number),Mn=new Date(dt,(Tn||1)-1,gt||1);Mn.setHours(0,0,0,0);const nn=new Date;nn.setHours(0,0,0,0),Mn-nn<=864e5&&Bt(te.id,"Prazo menor que 24h")}catch{}const ce=(te.historico||[]).find(dt=>dt.tipo==="status");if(ce!=null&&ce.data_hora_evento||ce!=null&&ce.data){const dt=ce.data_hora_evento?Date.parse(ce.data_hora_evento):Date.parse(`${ce.data}T00:00:00Z`);!isNaN(dt)&&Date.now()-dt>=1728e5&&Bt(te.id,"Demanda estagnada h 48h")}const Ue=te.designer||"",$e=Y[Ue]||0,xt=Math.min(100,Math.round($e/4*100));xt>=100?Bt(te.id,`Capacidade 100% para ${Ue}  Risco mximo`):xt>=85&&Bt(te.id,`Designer ${Ue} est com ${xt}% da capacidade utilizada. Risco de atraso.`),(te.revisoes||0)>=2&&Bt(te.id,"Retrabalho acima do limite")});const Se=n.filter(te=>Nr(te.status)),re=Se.filter(te=>te.prazo&&te.dataConclusao&&te.dataConclusao<=te.prazo).length,we=Se.filter(te=>te.prazo&&te.dataConclusao).length;Math.round(100*(re/Math.max(1,we)))<80&&Q.forEach(te=>Bt(te.id,"SLA geral abaixo de 80%"))},6e4);return()=>clearInterval(oe)},[n]);const _r=async({designer:oe,tipoMidia:Q,titulo:Y,link:Se,arquivoNome:re,dataSolic:we,dataCriacao:Z,dataFeedback:te,plataforma:ce,arquivos:Ue,descricao:$e,prazo:xt,comentarios:dt,historico:Tn,origem:gt,campanha:Mn})=>{const nn=async()=>{if(!le)return;const lt=async(ht,Be)=>{if(Be)try{await ba(Et(le,ht,String(Be)),{name:Be,active:!0},{merge:!0})}catch{}};try{await lt("cad_tipos",Q)}catch{}try{await lt("cad_plataformas",ce)}catch{}try{await lt("cad_origens",gt)}catch{}try{if(Tn&&Array.isArray(Tn)){const ht=Tn[0],Be=(ht==null?void 0:ht.para)||(ht==null?void 0:ht.de)||"Aberta";await lt("cad_status",Be)}}catch{}};if(b==="edit"&&M){const lt={...M,designer:oe,tipoMidia:Q,titulo:Y,link:Se,descricao:$e,comentarios:dt??M.comentarios,historico:Tn??M.historico,arquivos:Ue&&Ue.length?Ue:M.arquivos,arquivoNome:re||M.arquivoNome,dataSolicitacao:we||M.dataSolicitacao,dataCriacao:Z||M.dataCriacao,dataFeedback:te||M.dataFeedback,plataforma:ce,prazo:xt,origem:gt,campanha:Mn},ht={...lt,fxSavedAt:Date.now()};if(r(Be=>Be.map(vt=>vt.id===M.id?ht:vt)),le)try{const Be=Oo(Pt(le,sn),bo("id","==",String(M.id))),vt=await js(Be),Ct=[];vt.forEach(rn=>Ct.push(Bs(Et(le,sn,rn.id),lt))),Ct.length&&await Promise.all(Ct)}catch{}await nn()}else{const lt=An(),ht=new Date().toISOString(),Be={tipo:"status",autor:We,data:lt,data_hora_evento:ht,status_anterior:"",status_novo:"Aberta",duracao_em_minutos:null,responsavel:We,id_demanda:null,de:"",para:"Aberta"},vt=(t==null?void 0:t.username)||oe,Ct=Hh(n,{designer:vt,tipoMidia:Q,plataforma:ce,origem:gt}),rn=`tmp-${Date.now()}`,On={id:rn,designer:vt,tipoMidia:Q,titulo:Y,link:Se,descricao:$e,comentarios:[],historico:[Be],arquivos:Ue||[],arquivoNome:re,plataforma:ce,origem:gt,campanha:Mn,dataSolicitacao:we,dataCriacao:lt,dataFeedback:void 0,status:"Aberta",prazo:xt,tempoProducaoMs:0,startedAt:null,finishedAt:null,revisoes:0,createdBy:We,previsaoIA:Ct,slaStartAt:null,slaStopAt:null,slaPauseMs:0,pauseStartedAt:null,slaNetMs:0,slaOk:null,leadTotalMin:0,leadPorFase:{}};if(r(Ke=>[On,...Ke]),le)try{const Ke={...On,id:String(rn),createdAt:yv()};Ke.dataSolicitacao===void 0&&(Ke.dataSolicitacao=null),Ke.dataFeedback===void 0&&(Ke.dataFeedback=null),Ke.arquivoNome===void 0&&(Ke.arquivoNome=null),await Bl(Pt(le,sn),Ke);const zt={...Be,id_demanda:rn};try{await Bl(Pt(le,"historico_status"),zt)}catch{}}catch(Ke){const zt=(Ke==null?void 0:Ke.code)||(Ke==null?void 0:Ke.message)||"Falha ao gravar";try{window.alert(String(zt))}catch{}}await nn()}S(!1)},Ae=async()=>{if(window.confirm("Confirmar: apagar TODAS as demandas e limpar relatrios?")){r([]);try{O({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""})}catch{}if(le)try{const oe=await js(Pt(le,sn)),Q=[];oe.forEach(Y=>Q.push(oa(Et(le,sn,Y.id)))),Q.length&&await Promise.all(Q)}catch{}}};return l.jsxs("div",{className:"layout",children:[t?l.jsx(jR,{route:y,setRoute:w,allowedRoutes:mt}):null,l.jsx("div",{className:`content ${t?"":"no-sidebar"} page`,children:l.jsxs("div",{className:"app",children:[t?l.jsx(TR,{onNew:me,view:c,setView:h,showNew:!!t,user:t,onLogout:T,setRoute:w}):null,!t&&l.jsx(SR,{onLogin:j}),t&&y==="dashboard"&&mt.includes("dashboard")&&l.jsx(bR,{demandas:n,items:cn,designers:_n,setView:h,onEdit:he,onStatus:pe,cadStatus:k,onDelete:_e,onDuplicate:fe,compact:p,calRef:nr,setCalRef:rr,loading:o}),t&&y==="demandas"&&mt.includes("demandas")&&l.jsxs("div",{className:"demandas-layout",children:[l.jsx("div",{className:"sidebar-col",children:l.jsx(OR,{filtros:N,setFiltros:O,designers:Dn,showSearch:!1,statusCounts:He})}),l.jsxs("div",{className:"content-col",children:[l.jsxs("div",{className:"top-search",children:[l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:N.q||"",onChange:oe=>O(Q=>({...Q,q:oe.target.value}))}),l.jsxs("button",{className:"primary",onClick:me,disabled:!L,children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto"},children:l.jsx(IR,{view:c,setView:h})})]}),c==="table"&&l.jsx("div",{className:"table-scroll",children:l.jsx(CR,{items:ye.slice(0,Fe),onEdit:he,onStatus:pe,cadStatus:k,onDelete:_e,onDuplicate:fe,hasMore:ye.length>Fe,showMore:()=>tr(oe=>Math.min(oe+10,ye.length)),canCollapse:Fe>10,showLess:()=>tr(10),shown:Math.min(Fe,ye.length),total:ye.length,compact:p,canEdit:!!t,loading:o})}),c==="calendar"&&l.jsx(PR,{items:ye,refDate:nr}),l.jsx(NR,{open:I,mode:b,onClose:()=>S(!1),onSubmit:_r,initial:M,cadTipos:Je,designers:Dn,cadPlataformas:ot,onDelete:_e,userLabel:We,canDelete:F,onAddComment:Ne,cadOrigens:$,currentUser:(t==null?void 0:t.username)||""}),l.jsx(AR,{open:U,filtros:N,setFiltros:O,designers:Dn,onClose:()=>x(!1),cadStatus:k,cadTipos:Je,origens:$,campanhas:at})]})]}),t&&y==="config"&&mt.includes("config")&&l.jsx(MR,{themeVars:v,setThemeVars:E,onReset:Ae,appSettings:A,setAppSettings:R}),t&&y==="cadastros"&&mt.includes("cadastros")&&l.jsx(RR,{cadStatus:k,setCadStatus:C,cadTipos:Je,setCadTipos:At,cadPlataformas:ot,setCadPlataformas:H,cadOrigens:$,setCadOrigens:D,cadStatusColors:J,setCadStatusColors:ie}),t&&y==="relatorios"&&mt.includes("relatorios")&&l.jsx(VR,{demandas:n,items:ye,designers:Dn,filtros:N,setFiltros:O,loading:o}),t&&y==="usuarios"&&mt.includes("usuarios")&&l.jsx(DR,{role:$n})]})})]})}function jR({route:t,setRoute:e,allowedRoutes:n}){return l.jsx("aside",{className:"sidebar",children:l.jsx("nav",{children:l.jsx("ul",{className:"nav-list",children:n.map(r=>l.jsx("li",{children:l.jsxs("a",{href:"#",className:`nav-link ${t===r?"active":""}`,onClick:s=>{s.preventDefault(),e(r)},children:[l.jsx("span",{className:"nav-ico",children:r==="dashboard"?l.jsx(ke,{name:"dashboard"}):r==="demandas"?l.jsx(ke,{name:"demandas"}):r==="config"?l.jsx(ke,{name:"config"}):r==="cadastros"?l.jsx(ke,{name:"cadastros"}):r==="relatorios"?l.jsx(ke,{name:"relatorios"}):l.jsx(ke,{name:"usuarios"})}),l.jsx("span",{children:r==="dashboard"?"Dashboard":r==="demandas"?"Demandas":r==="config"?"Configuraes":r==="cadastros"?"Cadastros":r==="relatorios"?"Relatrios":"Usurios"})]})},r))})})})}function DR({users:t,onCreate:e,onDelete:n,onUpdate:r,role:s}){const[i,o]=K.useState(""),[u,c]=K.useState(""),[h,p]=K.useState(""),[m,y]=K.useState(""),[w,N]=K.useState("comum"),[O,U]=K.useState("Designer"),[x,I]=K.useState([]),S=K.useMemo(()=>Vv?mR(Vv,"us-central1"):null,[]),[b,P]=K.useState({});K.useEffect(()=>{if(le){const H=bs(Pt(le,"usuarios"),$=>{const D=[];$.forEach(z=>D.push({id:z.id,...z.data()})),I(D)});return()=>{try{H()}catch{}}}else I([])},[]);const[M,g]=K.useState({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),[v,E]=K.useState({criar:!0,excluir:!0,visualizar:!0}),A=(H,$)=>H(D=>({...D,[$]:!D[$]})),R=async()=>{const H=i.trim(),$=m.trim()||`${H}@betaki.bet.br`;if(!H||!h)return;const D={username:H,name:u||H,role:w,cargo:O,pages:M,actions:v,email:$};if(le)try{try{await Bh(Gt,$,h)}catch(z){if((z==null?void 0:z.code)!=="auth/email-already-in-use")throw z}await ba(Et(le,"usuarios",H),D)}catch{}o(""),c(""),p(""),y(""),N("comum"),U("Designer"),g({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),E({criar:!0,excluir:!0,visualizar:!0})},k=async H=>{if((H.username||H.id)!=="admin"&&le)try{await oa(Et(le,"usuarios",H.username||H.id)),I($=>$.filter(D=>(D.username||D.id)!==(H.username||H.id)))}catch{}},C=async H=>{const $=String(b[H.username||H.id]||"").trim();if($&&S)try{await vR(S,"updateUserPassword")({username:H.username||H.id,password:$,email:H.email||void 0}),P(z=>({...z,[H.username||H.id]:""}));try{window.alert("Senha atualizada com sucesso!")}catch{}}catch(D){try{window.alert(String((D==null?void 0:D.code)||(D==null?void 0:D.message)||"Falha ao atualizar senha"))}catch{}}},Je=async(H,$)=>{const D=H.pages||{},z={pages:{...D,[$]:!D[$]}};if(le)try{await Bs(Et(le,"usuarios",H.username||H.id),z),I(q=>q.map(J=>J.username===H.username||J.id===H.id?{...J,...z}:J))}catch{}},At=async(H,$)=>{const D=H.actions||{},z={actions:{...D,[$]:!D[$]}};if(le)try{await Bs(Et(le,"usuarios",H.username||H.id),z),I(q=>q.map(J=>J.username===H.username||J.id===H.id?{...J,...z}:J))}catch{}},ot=async(H,$)=>{const D={cargo:$};if(le)try{await Bs(Et(le,"usuarios",H.username||H.id),D),I(z=>z.map(q=>q.username===H.username||q.id===H.id?{...q,...D}:q))}catch{}};return l.jsxs("div",{className:"panel users-panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Usurios"})}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Usurio"}),l.jsx("input",{value:i,onChange:H=>o(H.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Nome"}),l.jsx("input",{value:u,onChange:H=>c(H.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Senha"}),l.jsx("input",{type:"password",value:h,onChange:H=>p(H.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",value:m,onChange:H=>y(H.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Perfil"}),l.jsxs("select",{value:w,onChange:H=>N(H.target.value),children:[l.jsx("option",{value:"comum",children:"Comum"}),l.jsx("option",{value:"gerente",children:"Gerente"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Cargo"}),l.jsxs("select",{value:O,onChange:H=>U(H.target.value),children:[l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Pginas"}),l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(H=>l.jsxs("button",{className:`btn-md ${M[H]?"active":""}`,type:"button",onClick:()=>A(g,H),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:H==="dashboard"?"dashboard":H==="demandas"?"demandas":H==="config"?"config":H==="cadastros"?"cadastros":H==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:H==="dashboard"?"Dashboard":H==="demandas"?"Demandas":H==="config"?"Configuraes":H==="cadastros"?"Cadastros":H==="relatorios"?"Relatrios":"Usurios"})]},H))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Aes"}),l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([H,$,D])=>l.jsxs("button",{className:`btn-md ${v[H]?"active":""}`,type:"button",onClick:()=>A(E,H),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:$})}),l.jsx("span",{children:D})]},H))})]}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"primary",type:"button",onClick:R,children:"Criar usurio"})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usurio"}),l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Perfil"}),l.jsx("th",{children:"Cargo"}),l.jsx("th",{children:"Pginas"}),l.jsx("th",{children:"Aes"}),l.jsx("th",{children:"Senha"}),l.jsx("th",{children:"Gerenciar"})]})}),l.jsx("tbody",{children:(x||[]).map(H=>l.jsxs("tr",{children:[l.jsx("td",{children:H.username}),l.jsx("td",{children:H.name||H.username}),l.jsx("td",{children:H.role||"comum"}),l.jsx("td",{children:l.jsxs("select",{value:H.cargo||"",onChange:$=>ot(H,$.target.value),children:[l.jsx("option",{value:"",children:"Selecione"}),l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map($=>{var D;return l.jsxs("button",{className:`btn-md ${((D=H.pages)==null?void 0:D[$])===!0?"active":""}`,type:"button",onClick:()=>Je(H,$),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:$==="dashboard"?"dashboard":$==="demandas"?"demandas":$==="config"?"config":$==="cadastros"?"cadastros":$==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:$==="dashboard"?"Dashboard":$==="demandas"?"Demandas":$==="config"?"Configuraes":$==="cadastros"?"Cadastros":$==="relatorios"?"Relatrios":"Usurios"})]},$)})})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([$,D,z])=>{var q;return l.jsxs("button",{className:`btn-md ${((q=H.actions)==null?void 0:q[$])===!0?"active":""}`,type:"button",onClick:()=>At(H,$),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:D})}),l.jsx("span",{children:z})]},$)})})}),l.jsx("td",{children:l.jsxs("div",{className:"form-row",children:[l.jsx("input",{type:"password",placeholder:"Nova senha",value:b[H.username||H.id]||"",onChange:$=>P(D=>({...D,[H.username||H.id]:$.target.value}))}),l.jsx("button",{className:"primary",type:"button",onClick:()=>C(H),children:"Salvar"})]})}),l.jsx("td",{children:l.jsxs("button",{className:"icon",onClick:()=>k(H),disabled:H.username==="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"trash"})}),l.jsx("span",{children:"Excluir"})]})})]},H.username))})]})]})}function MR({themeVars:t,setThemeVars:e,onReset:n,appSettings:r,setAppSettings:s}){const[i,o]=K.useState(t||{}),[u,c]=K.useState(""),[h,p]=K.useState("");K.useEffect(()=>{o(t||{})},[t]);const m=g=>/^#[0-9a-fA-F]{6}$/.test(g||""),y=g=>/^#[0-9a-fA-F]{8}$/.test(g||""),w=g=>/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0|1|0?\.\d+)\)$/.exec(g||""),N=g=>Math.max(0,Math.min(255,g|0)).toString(16).padStart(2,"0"),O=g=>({r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16)}),U=g=>{if(m(g))return{fmt:"hex6",base:g,a:1};if(y(g))return{fmt:"hex8",base:"#"+g.slice(1,7),a:parseInt(g.slice(7,9),16)/255};const v=w(g);return v?{fmt:"rgba",base:"#"+N(+v[1])+N(+v[2])+N(+v[3]),a:parseFloat(v[4])}:{fmt:"other",base:g,a:1}},x=(g,v,E)=>{const A=g==="hover"?"rgba":g==="border"||g==="btnBorder"?"hex8":"hex6";if(A==="hex6"||E>=1)return v;if(A==="hex8")return v+N(Math.round(E*255));const{r:R,g:k,b:C}=O(v);return`rgba(${R},${k},${C},${E})`},I=(g,v)=>{const E={...i,[g]:v};o(E),e(E)},S=(g,v)=>{const E=U(i[g]||""),A=Math.max(0,Math.min(100,Number(v)||0))/100,R=x(g,E.base,A);I(g,R)},b=()=>{if(!u)return;const g={...i,[u]:h||""};o(g),e(g),c(""),p("")},P=()=>e(gE),M=[{title:"Base",keys:["bg","panel","accent"]},{title:"Texto",keys:["text","muted"]},{title:"Traado",keys:["border"]},{title:"Botes",keys:["btnBg","btnText","btnHoverBg","btnBorder"]},{title:"Hover/Efeitos",keys:["hover","shadow"]},{title:"Extras",keys:["green","yellow","red","chart"]}];return l.jsxs("div",{className:"panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Tema"})}),l.jsxs("div",{className:"config-grid",children:[M.map(g=>l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"title",children:g.title}),g.keys.map(v=>{const E=i[v]||"",A=U(E),R=A.fmt!=="other",k=v==="hover"||v==="border"||v==="btnBorder";return l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:v}),l.jsxs("div",{className:"color-row",children:[R?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"color",value:A.base,onChange:C=>I(v,x(v,C.target.value,A.a))}),k&&l.jsx("input",{className:"alpha",type:"range",min:"0",max:"100",step:"1",value:Math.round(A.a*100),onChange:C=>S(v,C.target.value),title:`Alpha ${Math.round(A.a*100)}%`})]}):l.jsx("input",{value:E,onChange:C=>I(v,C.target.value)}),l.jsx("div",{className:"swatch",style:{background:E}})]})]},v)})]},g.title)),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Adicionar varivel"}),l.jsxs("div",{className:"color-row",children:[l.jsx("input",{placeholder:"nome",value:u,onChange:g=>c(g.target.value)}),l.jsx("input",{placeholder:"valor",value:h,onChange:g=>p(g.target.value)}),l.jsx("button",{className:"primary",type:"button",onClick:b,children:"Adicionar"})]})]}),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Integraes"}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Autopost via mLabs"}),l.jsx("input",{type:"checkbox",checked:!!r.autoPostMLabs,onChange:g=>s(v=>({...v,autoPostMLabs:g.target.checked}))})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"danger",type:"button",onClick:n,children:"Resetar sistema"}),l.jsx("button",{className:"primary",type:"button",onClick:P,children:"Restaurar padro"})]})]})}function OR({filtros:t,setFiltros:e,designers:n,showSearch:r,statusCounts:s}){const[i,o]=K.useState("today");K.useEffect(()=>{const w=new Date,N=P=>{const M=g=>String(g).padStart(2,"0");return`${P.getFullYear()}-${M(P.getMonth()+1)}-${M(P.getDate())}`},O=P=>{const M=new Date(P),g=M.getDay()||7;return M.setDate(M.getDate()-(g-1)),new Date(M.getFullYear(),M.getMonth(),M.getDate())},U=P=>{const M=O(P),g=new Date(M);return g.setDate(g.getDate()+6),g},x=new Date(w.getFullYear(),w.getMonth(),1),I=new Date(w.getFullYear(),w.getMonth()+1,0),S=new Date(w.getFullYear(),w.getMonth()-1,1),b=new Date(w.getFullYear(),w.getMonth(),0);if(i==="today"&&e(P=>({...P,sIni:N(w),sFim:N(w),cIni:"",cFim:""})),i==="week"){const P=O(w),M=U(w);e(g=>({...g,sIni:N(P),sFim:N(M),cIni:"",cFim:""}))}if(i==="month"&&e(P=>({...P,sIni:N(x),sFim:N(I),cIni:"",cFim:""})),i==="lastmonth"&&e(P=>({...P,sIni:N(S),sFim:N(b),cIni:"",cFim:""})),i==="last30"){const P=new Date(w);P.setDate(P.getDate()-29),e(M=>({...M,sIni:N(P),sFim:N(w),cIni:"",cFim:""}))}},[i]);const u=w=>e(N=>({...N,designer:w==="Todos"?"":w})),c=["Hoje","Semana","Ms","Ms passado","ltimos 30 dias"],h=w=>w==="Hoje"?"today":w==="Semana"?"week":w==="Ms"?"month":w==="Ms passado"?"lastmonth":"last30",p=["Todos",...n],m=w=>w==="Pendente"?"gray":w==="Em produo"?"yellow":w==="Revisar"?"red":w==="Aguardando Feedback"?"purple":w==="Aprovada"?"green-approve":w==="Concluida"||w==="Concluda"?"green-dark":"",y=w=>w==="Pendente"?"":w==="Em produo"?"":w==="Aguardando Feedback"?"":w==="Revisar"?"":w==="Aprovada"?"":w==="Concluida"||w==="Concluda"?"":"";return l.jsxs("div",{className:"filterbar",children:[r!==!1&&l.jsx("div",{className:"seg",style:{flex:1,minWidth:220},children:l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:t.q||"",onChange:w=>e(N=>({...N,q:w.target.value}))})}),l.jsxs("div",{className:"filters-row",children:[l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Perodo"}),c.map(w=>l.jsxs("button",{className:`btn-md ${i===h(w)?"active":""}`,onClick:()=>o(h(w)),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"calendar"})}),l.jsx("span",{children:w})]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Designer"}),p.map(w=>l.jsxs("button",{className:`btn-md ${(t.designer||"")===w||w==="Todos"&&!t.designer?"active":""}`,onClick:()=>u(w),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"usuarios"})}),l.jsx("span",{children:w})]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Status"}),Fa.map(w=>l.jsxs("button",{className:`btn-md ${m(w)} ${(t.status||"")===w?"active":""}`,onClick:()=>e(N=>({...N,status:N.status===w?void 0:w})),children:[l.jsx("span",{className:"emoji",children:y(w)}),l.jsx("span",{children:w}),(s==null?void 0:s[w])>0?l.jsx("span",{className:"alert-count",children:s[w]}):null]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Data"}),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"calendar"})}),l.jsx("input",{type:"date",value:t.cIni||"",onChange:w=>e(N=>({...N,cIni:w.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:t.cFim||"",onChange:w=>e(N=>({...N,cFim:w.target.value}))})]})]})]})]})}function bR({demandas:t,items:e,designers:n,setView:r,onEdit:s,onStatus:i,cadStatus:o,onDelete:u,onDuplicate:c,compact:h,calRef:p,setCalRef:m,loading:y}){const w=e.length,N=e.filter(D=>Nr(D.status)),O=N.length,U=e.filter(D=>!Nr(D.status)).length,x=e.reduce((D,z)=>D+(z.revisoes||0),0),I=Math.round(100*(e.filter(D=>(D.revisoes||0)>0).length/Math.max(1,w))),S=(()=>{const D=N.filter(q=>q.prazo&&q.dataConclusao&&q.dataConclusao<=q.prazo).length,z=N.filter(q=>q.prazo&&q.dataConclusao).length;return Math.round(100*(D/Math.max(1,z)))})(),b=(()=>{const D=ie=>{if(!ie)return null;const[Ie,Oe,be]=String(ie).split("-").map(Number);return new Date(Ie,Oe-1,be)},z=e.map(ie=>D(ie.dataCriacao||ie.dataSolicitacao)).filter(Boolean).sort((ie,Ie)=>ie-Ie);if(!z.length)return 0;const q=z[0],J=z[z.length-1];return Math.max(1,Math.round((J-q)/864e5)+1)})(),P=4,M=n.length*P*b,g=(()=>{const D=M;return D?Math.round(100*(O/D)):0})(),v=e.filter(D=>Fp(D.status)).length,E=e.filter(D=>Lp(D.status)).length,A=(()=>{const D={};N.forEach(q=>{const J=q.designer||"";D[J]=(D[J]||0)+1});const z=P*b;return n.map(q=>{const J=D[q]||0,ie=z?Math.round(100*(J/z)):0,Ie=z===0||ie<=90?"Verde":ie<=110?"Amarelo":"Vermelho";return{designer:q,ideal:z,real:J,used:ie,status:Ie}})})(),R=(()=>{const D={};return e.forEach(z=>{if(!Nr(z.status)){const q=z.designer||"";D[q]=(D[q]||0)+1}}),D})(),k=(()=>{const D=[];return A.forEach(q=>{q.used>=110?D.push(`Designer ${q.designer} sobrecarregado (${q.used}%)  risco de atraso`):q.used>=90&&D.push(`Designer ${q.designer} com carga alta (${q.used}%)  monitorar prazos`);const J=R[q.designer]||0;J>=P*2&&D.push(`Designer ${q.designer} com ${J} demandas ativas  priorizar distribuio`)}),e.filter(q=>{if(Nr(q.status)||!q.prazo)return!1;const[J,ie,Ie]=String(q.prazo).split("-").map(Number),Oe=new Date(J,(ie||1)-1,Ie||1),be=new Date;return be.setHours(0,0,0,0),Oe.setHours(0,0,0,0),Oe-be<=864e5}).slice(0,5).forEach(q=>D.push(`Prazo crtico: ${q.titulo} (${q.designer||""})`)),D})(),C=(()=>{const D=new Map;return N.forEach(z=>D.set(z.designer||"",(D.get(z.designer||"")||0)+1)),Array.from(D.entries()).map(([z,q])=>({designer:z,qty:q}))})(),Je=(()=>{const D=(q,J)=>{const ie=Ie=>{const[Oe,be,at]=String(Ie).split("-").map(Number);return new Date(Oe,be-1,at)};return!q||!J?null:Math.max(0,Math.round((ie(J)-ie(q))/864e5))},z={};return e.forEach(q=>{if(q.dataConclusao){const J=q.designer||"",ie=D(q.dataCriacao||q.dataSolicitacao,q.dataConclusao);if(ie!=null){const Ie=z[J]||{cnt:0,sum:0,min:9999,max:0};z[J]={cnt:Ie.cnt+1,sum:Ie.sum+ie,min:Math.min(Ie.min,ie),max:Math.max(Ie.max,ie)}}}}),Object.entries(z).map(([q,J])=>({designer:q,media:J.sum/J.cnt||0}))})(),At=(()=>{const D={};return e.forEach(z=>{if(z.prazo&&z.dataConclusao){const q=z.designer||"",J=z.dataConclusao<=z.prazo,ie=D[q]||{ok:0,total:0};D[q]={ok:ie.ok+(J?1:0),total:ie.total+1}}}),Object.entries(D).map(([z,q])=>({designer:z,pct:Math.round(100*(q.ok/(q.total||1)))}))})(),ot=(()=>{const D={};return e.forEach(z=>{const q=z.designer||"",J=z.revisoes||0,ie=D[q]||{rTot:0,cnt:0};D[q]={rTot:ie.rTot+J,cnt:ie.cnt+1}}),Object.entries(D).map(([z,q])=>({designer:z,porPeca:+(q.rTot/(q.cnt||1)).toFixed(2)}))})(),H=(()=>{const D=C.reduce((ye,{designer:He,qty:Fe})=>(ye[He]=Fe,ye),{}),z=At.reduce((ye,{designer:He,pct:Fe})=>(ye[He]=Fe,ye),{}),q=Je.reduce((ye,{designer:He,media:Fe})=>(ye[He]=Fe,ye),{}),J=ot.reduce((ye,{designer:He,porPeca:Fe})=>(ye[He]=Fe,ye),{}),ie=Array.from(new Set([...Object.keys(D),...Object.keys(z),...Object.keys(q),...Object.keys(J)])).filter(Boolean),Ie=(ye,He,Fe)=>Fe===He?1:Math.max(0,Math.min(1,(ye-He)/(Fe-He))),Oe=Math.max(...Object.values(D||{_:-1}),0),be=Math.min(...Object.values(D||{_:-1}),0),at=100,$n=0,en=Math.max(...Object.values(q||{_:-1}),0),cn=Math.min(...Object.values(q||{_:-1}),0),_n=Math.max(...Object.values(J||{_:-1}),0),wn=Math.min(...Object.values(J||{_:-1}),0);return ie.map(ye=>{const He=Ie(D[ye]||0,be,Oe),Fe=Ie(z[ye]||0,$n,at),tr=1-Ie(q[ye]||0,cn,en),nr=1-Ie(J[ye]||0,wn,_n),rr=Math.round((He*.4+Fe*.3+tr*.2+nr*.1)*100);return{designer:ye,score:rr,sla:z[ye]||0,retrab:J[ye]||0}}).sort((ye,He)=>He.score-ye.score).slice(0,5)})(),$=(()=>{const D=Array.from({length:11},(q,J)=>J+8),z={};return n.forEach(q=>z[q]=D.map(J=>0)),e.forEach(q=>{if(q.startedAt)try{const ie=new Date(q.startedAt).getHours();if(ie>=8&&ie<=18){const Ie=q.designer||"",Oe=ie-8;z[Ie]&&z[Ie][Oe]++}}catch{}}),{horas:D,per:z}})();return y?l.jsxs("div",{className:"dashboard",children:[l.jsx("div",{className:"exec-summary",children:Array.from({length:5}).map((D,z)=>l.jsx("div",{className:"skeleton row"},z))}),l.jsx("div",{className:"section-grid",children:Array.from({length:2}).map((D,z)=>l.jsx("div",{className:"skeleton card",style:{height:160}},z))})]}):l.jsxs("div",{className:"dashboard",children:[l.jsxs("div",{className:"exec-summary",children:[l.jsx("div",{className:"exec-title",children:"RESUMO EXECUTIVO DO PERODO"}),l.jsxs("div",{className:"exec-grid",children:[l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Produo total"}),l.jsx("div",{className:"exec-value",children:O})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"SLA geral"}),l.jsxs("div",{className:"exec-value",style:{color:S>=90?"#BCD200":S>=70?"#FFE55C":"#FF5E5E"},children:[S,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"% retrabalho"}),l.jsxs("div",{className:"exec-value",children:[I,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Backlog atual"}),l.jsx("div",{className:"exec-value",children:U})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Capacidade usada"}),l.jsxs("div",{className:"exec-value",children:[g,"%"]}),l.jsx("div",{className:"progress",children:l.jsx("div",{className:"progress-fill",style:{width:`${g}%`,background:"#BCD200"}})})]})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PRODUO"}),l.jsxs("div",{className:"badge-grid",children:[l.jsxs("div",{className:"badge blue",children:[l.jsx("div",{children:"Criadas"}),l.jsx("div",{children:w})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"Concludas"}),l.jsx("div",{children:O})]}),l.jsxs("div",{className:"badge yellow",children:[l.jsx("div",{children:"Em produo"}),l.jsx("div",{children:v})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"Pendentes"}),l.jsx("div",{children:E})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"QUALIDADE"}),l.jsxs("div",{className:"badge-group",children:[l.jsxs("div",{className:"badge purple",children:[l.jsx("div",{children:"Revises"}),l.jsx("div",{children:x})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"% Retrabalho"}),l.jsxs("div",{children:[I,"%"]})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"SLA"}),l.jsxs("div",{children:[S,"%"]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PESSOAS"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Score"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"%Retrab"})]})}),l.jsx("tbody",{children:H.map((D,z)=>l.jsxs("tr",{children:[l.jsx("td",{children:z+1}),l.jsx("td",{children:D.designer}),l.jsx("td",{children:D.score}),l.jsxs("td",{children:[D.sla,"%"]}),l.jsx("td",{children:Math.round((D.retrab||0)*100)/100})]},D.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"OPERAO"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Capacidade ideal"}),l.jsx("th",{children:"Produo real"}),l.jsx("th",{children:"Capacidade usada"}),l.jsx("th",{children:"Status"})]})}),l.jsx("tbody",{children:A.map(D=>l.jsxs("tr",{children:[l.jsx("td",{children:D.designer}),l.jsx("td",{children:D.ideal}),l.jsx("td",{children:D.real}),l.jsxs("td",{children:[D.used,"%"]}),l.jsx("td",{style:{color:D.status==="Verde"?"#00C58E":D.status==="Amarelo"?"#FFE55C":"#FF5E5E"},children:D.status})]},D.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"ASSISTENTE IA"}),l.jsx("div",{className:"insights-grid",children:k.map((D,z)=>l.jsxs("div",{className:"insight-card",style:{opacity:0,animation:"pageIn .6s forwards"},children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:D})]},z))})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"HEATMAP DE PRODUTIVIDADE POR HORRIO"}),l.jsxs("div",{className:"heatmap",children:[l.jsxs("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:[l.jsx("div",{className:"chart-label",style:{width:120}}),$.horas.map(D=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(D).padStart(2,"0"),"h"]},D))]}),n.map(D=>l.jsxs("div",{className:"heat-row",style:{alignItems:"center"},children:[l.jsx("div",{className:"chart-label",style:{width:120},children:D}),$.horas.map((z,q)=>{const J=($.per[D]||[])[q]||0,ie=J===0?"#222":J<2?"#4DA3FF33":"#4DA3FF";return l.jsx("div",{className:"heat-cell",style:{background:ie,width:24,height:24},title:`${D} ${String(z).padStart(2,"0")}h: ${J}`},z)})]},D))]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"LINHA DO TEMPO DE PRODUO MENSAL"}),l.jsx("div",{className:"chips",children:C.map(({designer:D,qty:z})=>l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[l.jsx("span",{className:"chip",children:D}),l.jsx(ER,{series:[Math.max(1,z-1),z,z+1],color:"#4DA3FF"})]},D))})]})]})]})}function VR({demandas:t,items:e,designers:n,filtros:r,setFiltros:s,loading:i}){var We,En,mt;const o=["Hoje","Semana","Ms","Ms passado"],u=T=>T==="Hoje"?"today":T==="Semana"?"week":T==="Ms"?"month":"lastmonth",[c,h]=K.useState("month"),[p,m]=K.useState(n[0]||""),[y,w]=K.useState(n[1]||"");K.useEffect(()=>{const T=new Date,j=pe=>{const Ne=_e=>String(_e).padStart(2,"0");return`${pe.getFullYear()}-${Ne(pe.getMonth()+1)}-${Ne(pe.getDate())}`},L=pe=>{const Ne=new Date(pe),_e=Ne.getDay()||7;return Ne.setDate(Ne.getDate()-(_e-1)),new Date(Ne.getFullYear(),Ne.getMonth(),Ne.getDate())},F=pe=>{const Ne=L(pe),_e=new Date(Ne);return _e.setDate(_e.getDate()+6),_e},ne=new Date(T.getFullYear(),T.getMonth(),1),me=new Date(T.getFullYear(),T.getMonth()+1,0),he=new Date(T.getFullYear(),T.getMonth()-1,1),fe=new Date(T.getFullYear(),T.getMonth(),0);if(c==="today"&&s(pe=>({...pe,cIni:j(T),cFim:j(T)})),c==="week"){const pe=L(T),Ne=F(T);s(_e=>({..._e,cIni:j(pe),cFim:j(Ne)}))}c==="month"&&s(pe=>({...pe,cIni:j(ne),cFim:j(me)})),c==="lastmonth"&&s(pe=>({...pe,cIni:j(he),cFim:j(fe)}))},[c]);const N=["Todos",...n],O=T=>s(j=>({...j,designer:T==="Todos"?"":T})),U=["Todos",...Array.from(new Set(t.map(T=>T.tipoMidia).filter(Boolean)))],x=T=>s(j=>({...j,tipoMidia:T==="Todos"?"":T})),I=["Todos",...Vp],S=T=>s(j=>({...j,origem:T==="Todos"?"":T})),b=["Todos",...Array.from(new Set(t.map(T=>T.campanha).filter(Boolean)))],P=T=>s(j=>({...j,campanha:T==="Todos"?"":T})),M=["Todos",...Fa],g=T=>s(j=>({...j,status:T==="Todos"?"":T})),v=(()=>{const T=F=>{if(!F)return null;const[ne,me,he]=F.split("-").map(Number);return new Date(ne,me-1,he)},j=T(r.cIni),L=T(r.cFim);return!j||!L?1:Math.max(1,Math.round((L-j)/864e5)+1)})(),E=e.filter(T=>Nr(T.status));e.filter(T=>Lp(T.status)),e.filter(T=>Fp(T.status)),e.reduce((T,j)=>T+(j.revisoes||0),0),E.length/v;const A=e.filter(T=>!Nr(T.status)),R=T=>{if(!T)return null;const[j,L,F]=String(T).split("-").map(Number),ne=new Date(j,(L||1)-1,F||1),me=new Date;return me.setHours(0,0,0,0),ne.setHours(0,0,0,0),Math.round((ne-me)/864e5)},k=A.filter(T=>{const j=R(T.prazo);return j!=null&&j<=2}),C=(()=>{const T=A.map(L=>R(L.prazo)).filter(L=>L!=null);return+(T.reduce((L,F)=>L+F,0)/(T.length||1)).toFixed(1)})(),At=(()=>{const T=A.filter(L=>{const F=R(L.prazo);return F!=null&&F<0}).length,j=A.length||1;return Math.round(100*(T/j))})()>30?"Acumulando atraso":"Saudvel",ot=(T,j)=>{const L=F=>{const[ne,me,he]=String(F).split("-").map(Number);return new Date(ne,me-1,he)};return!T||!j?null:Math.max(0,Math.round((L(j)-L(T))/864e5))},H=E.map(T=>ot(T.dataCriacao||T.dataSolicitacao,T.dataConclusao)).filter(T=>T!=null),$=+(H.reduce((T,j)=>T+j,0)/(H.length||1)).toFixed(1),D=(()=>{const T={};return E.forEach(j=>{const L=j.tipoMidia||"Outro",F=ot(j.dataCriacao||j.dataSolicitacao,j.dataConclusao);if(F!=null){const ne=T[L]||{cnt:0,sum:0};T[L]={cnt:ne.cnt+1,sum:ne.sum+F}}}),Object.entries(T).map(([j,L])=>({tipo:j,media:+(L.sum/L.cnt).toFixed(1)}))})(),z=(()=>{const T={};return E.forEach(j=>{const L=j.designer||"",F=ot(j.dataCriacao||j.dataSolicitacao,j.dataConclusao);if(F!=null){const ne=T[L]||{cnt:0,sum:0};T[L]={cnt:ne.cnt+1,sum:ne.sum+F}}}),Object.entries(T).map(([j,L])=>({designer:j,media:+(L.sum/L.cnt).toFixed(1)}))})(),q=new Date,J=new Date(q.getFullYear(),q.getMonth()-1,1),ie=(T,j)=>{if(!T)return!1;const[L,F,ne]=T.split("-").map(Number),me=new Date(L,F-1,ne);return me.getMonth()===j.getMonth()&&me.getFullYear()===j.getFullYear()},Ie=E.filter(T=>ie(T.dataConclusao,q)).map(T=>ot(T.dataCriacao||T.dataSolicitacao,T.dataConclusao)).filter(T=>T!=null),Oe=E.filter(T=>ie(T.dataConclusao,J)).map(T=>ot(T.dataCriacao||T.dataSolicitacao,T.dataConclusao)).filter(T=>T!=null),be=+(Ie.reduce((T,j)=>T+j,0)/(Ie.length||1)).toFixed(1),at=+(Oe.reduce((T,j)=>T+j,0)/(Oe.length||1)).toFixed(1),$n=T=>{const j=E.filter(L=>(L.designer||"")===T).map(L=>ot(L.dataCriacao||L.dataSolicitacao,L.dataConclusao)).filter(L=>L!=null);return+(j.reduce((L,F)=>L+F,0)/(j.length||1)).toFixed(1)},en=(()=>{const T=E.map(ne=>ne.revisoes||0),j=T.length||1,L=ne=>Math.round(100*(T.filter(me=>me===ne).length/j)),F=ne=>Math.round(100*(T.filter(ne).length/j));return{sRev:L(0),umaRev:L(1),duasMais:F(ne=>ne>=2)}})(),cn=(()=>{const T={};return e.forEach(j=>{const L=j.designer||"",F=j.revisoes||0,ne=T[L]||{rTot:0,cnt:0};T[L]={rTot:ne.rTot+F,cnt:ne.cnt+1}}),Object.entries(T).map(([j,L])=>({designer:j,porPeca:+(L.rTot/(L.cnt||1)).toFixed(2)})).sort((j,L)=>L.porPeca-j.porPeca)})(),_n=(()=>{const T={};return e.forEach(j=>{const L=j.tipoMidia||"Outro",F=j.revisoes||0,ne=T[L]||{rTot:0,cnt:0};T[L]={rTot:ne.rTot+F,cnt:ne.cnt+1}}),Object.entries(T).map(([j,L])=>({tipo:j,porPeca:+(L.rTot/(L.cnt||1)).toFixed(2)})).sort((j,L)=>L.porPeca-j.porPeca)})(),wn=(()=>{const T={};e.forEach(L=>{const F=L.origem||"Outros";T[F]=(T[F]||0)+1});const j=e.length||1;return Object.entries(T).map(([L,F])=>({origem:L,q:F,pct:Math.round(100*(F/j))}))})(),Dn=(()=>{const T={};return e.forEach(j=>{const L=j.origem||"Outros",F=j.revisoes||0,ne=T[L]||{rTot:0,cnt:0};T[L]={rTot:ne.rTot+F,cnt:ne.cnt+1}}),Object.entries(T).map(([j,L])=>({origem:j,porPeca:+(L.rTot/(L.cnt||1)).toFixed(2)})).sort((j,L)=>L.porPeca-j.porPeca)})(),ye=(()=>{const T={};return E.forEach(j=>{const L=j.origem||"Outros";T[L]=(T[L]||0)+1}),Object.entries(T).map(([j,L])=>({origem:j,q:L})).sort((j,L)=>L.q-j.q)})(),He=(()=>{const T={};return E.forEach(j=>{const L=j.finishedAt;if(!L)return;const F=new Date(L).getHours();T[F]=(T[F]||0)+1}),T})(),Fe=(()=>{const T=E.map(F=>Number(F.tempoProducaoMs||0)).filter(F=>F>0),j=T.reduce((F,ne)=>F+ne,0)/(T.length||1);return+(F=>F/36e5)(j).toFixed(2)})(),tr=(()=>{const T={};return E.forEach(j=>{const L=j.designer||"",F=Number(j.tempoProducaoMs||0),ne=T[L]||{cnt:0,sum:0};T[L]={cnt:ne.cnt+1,sum:ne.sum+F}}),Object.entries(T).map(([j,L])=>({designer:j,horas:+(L.sum/(L.cnt||1)/36e5).toFixed(2)})).sort((j,L)=>j.horas-L.horas)})(),nr=cn.slice().sort((T,j)=>T.porPeca-j.porPeca),rr=(()=>{const T={};return e.forEach(j=>{const L=j.campanha||"";T[L]=(T[L]||0)+1}),Object.entries(T).map(([j,L])=>({campanha:j,q:L})).sort((j,L)=>L.q-j.q)})(),yr=(()=>{const T={};return e.forEach(j=>{const L=j.campanha||"",F=j.revisoes||0,ne=T[L]||{rTot:0,cnt:0};T[L]={rTot:ne.rTot+F,cnt:ne.cnt+1}}),Object.entries(T).map(([j,L])=>({campanha:j,porPeca:+(L.rTot/(L.cnt||1)).toFixed(2)})).sort((j,L)=>L.porPeca-j.porPeca)})(),qn=(()=>{const T={};return e.forEach(j=>{if(j.campanha){const L=j.campanha,F=!!(j.prazo&&j.dataConclusao&&j.dataConclusao<=j.prazo),ne=!!(j.prazo&&j.dataConclusao),me=T[L]||{ok:0,total:0};T[L]={ok:me.ok+(F?1:0),total:me.total+(ne?1:0)}}}),Object.entries(T).map(([j,L])=>({campanha:j,sla:Math.round(100*(L.ok/(L.total||1)))}))})();return i?l.jsxs("div",{className:"reports",children:[l.jsx("div",{className:"reports-toolbar",children:l.jsx("div",{className:"skeleton row",style:{width:"50%"}})}),l.jsx("div",{className:"reports-grid",children:Array.from({length:3}).map((T,j)=>l.jsx("div",{className:"skeleton card",style:{height:180}},j))})]}):l.jsxs("div",{className:"reports",children:[l.jsxs("div",{className:"reports-toolbar",children:[l.jsxs("div",{className:"chips",children:[o.map(T=>l.jsxs("button",{className:`btn-md ${c===u(T)?"active":""}`,onClick:()=>h(u(T)),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"calendar"})}),l.jsx("span",{children:T})]},T)),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"calendar"})}),l.jsx("input",{type:"date",value:r.cIni||"",onChange:T=>s(j=>({...j,cIni:T.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:r.cFim||"",onChange:T=>s(j=>({...j,cFim:T.target.value}))})]})]}),l.jsxs("div",{className:"chips",children:[N.map(T=>l.jsxs("button",{className:`btn-md ${(r.designer||"")===T||T==="Todos"&&!r.designer?"active":""}`,onClick:()=>O(T),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"usuarios"})}),l.jsx("span",{children:T})]},T)),U.map(T=>l.jsxs("button",{className:`btn-md ${(r.tipoMidia||"")===T||T==="Todos"&&!r.tipoMidia?"active":""}`,onClick:()=>x(T),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"tag"})}),l.jsx("span",{children:T})]},T)),I.map(T=>l.jsxs("button",{className:`btn-md ${(r.origem||"")===T||T==="Todos"&&!r.origem?"active":""}`,onClick:()=>S(T),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"link"})}),l.jsx("span",{children:T})]},T)),b.map(T=>l.jsxs("button",{className:`btn-md ${(r.campanha||"")===T||T==="Todos"&&!r.campanha?"active":""}`,onClick:()=>P(T),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"tag"})}),l.jsx("span",{children:T})]},T)),M.map(T=>l.jsxs("button",{className:`btn-md ${(r.status||"")===T||T==="Todos"&&!r.status?"active":""}`,onClick:()=>g(T),children:[l.jsx("span",{className:"icon",children:l.jsx(ke,{name:"dot"})}),l.jsx("span",{children:T})]},T))]})]}),l.jsxs("div",{className:"reports-grid",children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Backlog"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Backlog total: ",A.length]}),l.jsxs("span",{className:"chip",children:["Em risco (48h): ",k.length]}),l.jsxs("span",{className:"chip",children:["Prazo mdio: ",C,"d"]}),l.jsxs("span",{className:"chip",children:["Estado: ",At]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(A.reduce((T,j)=>{const L=j.tipoMidia||"Outro";return T[L]=(T[L]||0)+1,T},{})).map(([T,j])=>l.jsxs("tr",{children:[l.jsx("td",{children:T}),l.jsx("td",{children:j})]},T))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(A.reduce((T,j)=>{const L=j.designer||"";return T[L]=(T[L]||0)+1,T},{})).map(([T,j])=>l.jsxs("tr",{children:[l.jsx("td",{children:T}),l.jsx("td",{children:j})]},T))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Lead Time"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mdio geral: ",$,"d"]}),l.jsxs("span",{className:"chip",children:["Este ms: ",be,"d"]}),l.jsxs("span",{className:"chip",children:["Ms passado: ",at,"d"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:D.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.tipo}),l.jsxs("td",{children:[T.media,"d"]})]},T.tipo))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:z.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.designer}),l.jsxs("td",{children:[T.media,"d"]})]},T.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"chips",children:[l.jsx("span",{className:"chip",children:"Designer A"}),l.jsx("select",{value:p,onChange:T=>m(T.target.value),children:n.map(T=>l.jsx("option",{value:T,children:T},T))}),l.jsx("span",{className:"chip",children:"Designer B"}),l.jsx("select",{value:y,onChange:T=>w(T.target.value),children:n.map(T=>l.jsx("option",{value:T,children:T},T))}),l.jsxs("span",{className:"chip",children:["A: ",$n(p),"d"]}),l.jsxs("span",{className:"chip",children:["B: ",$n(y),"d"]})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Eficincia e Retrabalho"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Sem reviso: ",en.sRev,"%"]}),l.jsxs("span",{className:"chip",children:["1 reviso: ",en.umaRev,"%"]}),l.jsxs("span",{className:"chip",children:["2+ revises: ",en.duasMais,"%"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:cn.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.designer}),l.jsx("td",{children:T.porPeca})]},T.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:_n.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.tipo}),l.jsx("td",{children:T.porPeca})]},T.tipo))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Demanda por Canal"}),l.jsx("div",{className:"chips",children:wn.map(T=>l.jsxs("span",{className:"chip",children:[T.origem,": ",T.pct,"%"]},T.origem))}),l.jsx("div",{className:"section-divider"}),(()=>{const T=wn.reduce((he,fe)=>he+fe.q,0)||1;let j=0;const L=50,F=60,ne=60,me=wn.slice(0,5).map((he,fe)=>{const pe=he.q/T,Ne=j*2*Math.PI,_e=(j+pe)*2*Math.PI;j+=pe;const Bt=F+L*Math.cos(Ne),_r=ne+L*Math.sin(Ne),Ae=F+L*Math.cos(_e),jt=ne+L*Math.sin(_e),tn=pe>.5?1:0,sr=`M ${F} ${ne} L ${Bt} ${_r} A ${L} ${L} 0 ${tn} 1 ${Ae} ${jt} Z`,oe=["#4DA3FF","#BCD200","#FF5E5E","#9B59B6","#2ECC71"];return{path:sr,color:oe[fe%oe.length],label:`${he.origem} ${he.pct}%`}});return l.jsxs("div",{className:"pie-wrap",children:[l.jsx("svg",{width:"140",height:"140",className:"pie-chart",children:me.map((he,fe)=>l.jsx("path",{d:he.path,fill:he.color},fe))}),l.jsx("div",{className:"pie-legend",children:me.map((he,fe)=>l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot",style:{background:he.color}}),he.label]},fe))})]})})(),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:Dn.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.origem}),l.jsx("td",{children:T.porPeca})]},T.origem))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Concludas"})]})}),l.jsx("tbody",{children:ye.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.origem}),l.jsx("td",{children:T.q})]},T.origem))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Produtividade por Hora (Avanado)"}),l.jsx("div",{className:"chips",children:l.jsxs("span",{className:"chip",children:["Tempo mdio real/pea: ",Fe,"h"]})}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"heatmap",children:[l.jsx("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:Array.from({length:11},(T,j)=>j+8).map(T=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(T).padStart(2,"0"),"h"]},T))}),l.jsx("div",{className:"heat-row",children:Array.from({length:11},(T,j)=>j+8).map(T=>{const j=He[T]||0,L=j===0?"#222":j<2?"#00C58E33":"#00C58E";return l.jsx("div",{className:"heat-cell",style:{background:L},title:`${String(T).padStart(2,"0")}h: ${j}`},T)})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Velocidade mdia (h)"})]})}),l.jsx("tbody",{children:tr.map((T,j)=>l.jsxs("tr",{children:[l.jsx("td",{children:j+1}),l.jsx("td",{children:T.designer}),l.jsx("td",{children:T.horas})]},T.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qualidade (menos retrabalho)"})]})}),l.jsx("tbody",{children:nr.map((T,j)=>l.jsxs("tr",{children:[l.jsx("td",{children:j+1}),l.jsx("td",{children:T.designer}),l.jsx("td",{children:T.porPeca})]},T.designer))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Campanhas"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mais demandada: ",((We=rr[0])==null?void 0:We.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Maior retrabalho: ",((En=yr[0])==null?void 0:En.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Melhor SLA: ",((mt=qn.sort((T,j)=>j.sla-T.sla)[0])==null?void 0:mt.campanha)||""]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Campanha"}),l.jsx("th",{children:"Produo (concludas)"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"Retrabalho/pea"})]})}),l.jsx("tbody",{children:Array.from(new Set(e.map(T=>T.campanha).filter(Boolean))).map(T=>{var ne,me;const j=E.filter(he=>he.campanha===T).length,L=((ne=qn.find(he=>he.campanha===T))==null?void 0:ne.sla)||0,F=((me=yr.find(he=>he.campanha===T))==null?void 0:me.porPeca)||0;return l.jsxs("tr",{children:[l.jsx("td",{children:T}),l.jsx("td",{children:j}),l.jsxs("td",{style:{color:L>=90?"#BCD200":L>=70?"#FFE55C":"#FF5E5E"},children:[L,"%"]}),l.jsx("td",{children:F})]},T)})})]})]})]})]})}e0(document.getElementById("root")).render(l.jsx(GE.StrictMode,{children:l.jsx(kR,{})}));
