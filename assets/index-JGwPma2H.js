(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function DT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ry={exports:{}},lu={},jy={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qa=Symbol.for("react.element"),bT=Symbol.for("react.portal"),OT=Symbol.for("react.fragment"),MT=Symbol.for("react.strict_mode"),VT=Symbol.for("react.profiler"),LT=Symbol.for("react.provider"),FT=Symbol.for("react.context"),UT=Symbol.for("react.forward_ref"),zT=Symbol.for("react.suspense"),BT=Symbol.for("react.memo"),$T=Symbol.for("react.lazy"),Vm=Symbol.iterator;function HT(t){return t===null||typeof t!="object"?null:(t=Vm&&t[Vm]||t["@@iterator"],typeof t=="function"?t:null)}var Dy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},by=Object.assign,Oy={};function mo(t,e,n){this.props=t,this.context=e,this.refs=Oy,this.updater=n||Dy}mo.prototype.isReactComponent={};mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function My(){}My.prototype=mo.prototype;function ff(t,e,n){this.props=t,this.context=e,this.refs=Oy,this.updater=n||Dy}var pf=ff.prototype=new My;pf.constructor=ff;by(pf,mo.prototype);pf.isPureReactComponent=!0;var Lm=Array.isArray,Vy=Object.prototype.hasOwnProperty,mf={current:null},Ly={key:!0,ref:!0,__self:!0,__source:!0};function Fy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Vy.call(e,r)&&!Ly.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:qa,type:t,key:i,ref:o,props:s,_owner:mf.current}}function qT(t,e){return{$$typeof:qa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gf(t){return typeof t=="object"&&t!==null&&t.$$typeof===qa}function WT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fm=/\/+/g;function sd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WT(""+t.key):e.toString(36)}function Gl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qa:case bT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+sd(o,0):r,Lm(s)?(n="",t!=null&&(n=t.replace(Fm,"$&/")+"/"),Gl(s,e,n,"",function(d){return d})):s!=null&&(gf(s)&&(s=qT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Lm(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+sd(i,c);o+=Gl(i,e,n,u,s)}else if(u=HT(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+sd(i,c++),o+=Gl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sl(t,e,n){if(t==null)return t;var r=[],s=0;return Gl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function GT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nn={current:null},Kl={transition:null},KT={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Kl,ReactCurrentOwner:mf};function Uy(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Sl,forEach:function(t,e,n){Sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sl(t,function(){e++}),e},toArray:function(t){return Sl(t,function(e){return e})||[]},only:function(t){if(!gf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=mo;Pe.Fragment=OT;Pe.Profiler=VT;Pe.PureComponent=ff;Pe.StrictMode=MT;Pe.Suspense=zT;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KT;Pe.act=Uy;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=by({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=mf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Vy.call(e,u)&&!Ly.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:qa,type:t.type,key:s,ref:i,props:r,_owner:o}};Pe.createContext=function(t){return t={$$typeof:FT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LT,_context:t},t.Consumer=t};Pe.createElement=Fy;Pe.createFactory=function(t){var e=Fy.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:UT,render:t}};Pe.isValidElement=gf;Pe.lazy=function(t){return{$$typeof:$T,_payload:{_status:-1,_result:t},_init:GT}};Pe.memo=function(t,e){return{$$typeof:BT,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=Kl.transition;Kl.transition={};try{t()}finally{Kl.transition=e}};Pe.unstable_act=Uy;Pe.useCallback=function(t,e){return nn.current.useCallback(t,e)};Pe.useContext=function(t){return nn.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return nn.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return nn.current.useEffect(t,e)};Pe.useId=function(){return nn.current.useId()};Pe.useImperativeHandle=function(t,e,n){return nn.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return nn.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return nn.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return nn.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return nn.current.useReducer(t,e,n)};Pe.useRef=function(t){return nn.current.useRef(t)};Pe.useState=function(t){return nn.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return nn.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return nn.current.useTransition()};Pe.version="18.3.1";jy.exports=Pe;var K=jy.exports;const QT=DT(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT=K,XT=Symbol.for("react.element"),JT=Symbol.for("react.fragment"),ZT=Object.prototype.hasOwnProperty,eI=YT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tI={key:!0,ref:!0,__self:!0,__source:!0};function zy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ZT.call(e,r)&&!tI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:XT,type:t,key:i,ref:o,props:s,_owner:eI.current}}lu.Fragment=JT;lu.jsx=zy;lu.jsxs=zy;Ry.exports=lu;var l=Ry.exports,By={exports:{}},Cn={},$y={exports:{}},Hy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,M){var z=B.length;B.push(M);e:for(;0<z;){var $=z-1>>>1,X=B[$];if(0<s(X,M))B[$]=M,B[z]=X,z=$;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var M=B[0],z=B.pop();if(z!==M){B[0]=z;e:for(var $=0,X=B.length,ae=X>>>1;$<ae;){var Ee=2*($+1)-1,Fe=B[Ee],Se=Ee+1,Ye=B[Se];if(0>s(Fe,z))Se<X&&0>s(Ye,Fe)?(B[$]=Ye,B[Se]=z,$=Se):(B[$]=Fe,B[Ee]=z,$=Ee);else if(Se<X&&0>s(Ye,z))B[$]=Ye,B[Se]=z,$=Se;else break e}}return M}function s(B,M){var z=B.sortIndex-M.sortIndex;return z!==0?z:B.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,g=3,w=!1,k=!1,O=!1,F=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var M=n(d);M!==null;){if(M.callback===null)r(d);else if(M.startTime<=B)r(d),M.sortIndex=M.expirationTime,e(u,M);else break;M=n(d)}}function b(B){if(O=!1,S(B),!k)if(n(u)!==null)k=!0,et(N);else{var M=n(d);M!==null&&q(b,M.startTime-B)}}function N(B,M){k=!1,O&&(O=!1,A(y),y=-1),w=!0;var z=g;try{for(S(M),m=n(u);m!==null&&(!(m.expirationTime>M)||B&&!R());){var $=m.callback;if(typeof $=="function"){m.callback=null,g=m.priorityLevel;var X=$(m.expirationTime<=M);M=t.unstable_now(),typeof X=="function"?m.callback=X:m===n(u)&&r(u),S(M)}else r(u);m=n(u)}if(m!==null)var ae=!0;else{var Ee=n(d);Ee!==null&&q(b,Ee.startTime-M),ae=!1}return ae}finally{m=null,g=z,w=!1}}var L=!1,v=null,y=-1,T=5,C=-1;function R(){return!(t.unstable_now()-C<T)}function j(){if(v!==null){var B=t.unstable_now();C=B;var M=!0;try{M=v(!0,B)}finally{M?x():(L=!1,v=null)}}else L=!1}var x;if(typeof I=="function")x=function(){I(j)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,Et=at.port2;at.port1.onmessage=j,x=function(){Et.postMessage(null)}}else x=function(){F(j,0)};function et(B){v=B,L||(L=!0,x())}function q(B,M){y=F(function(){B(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){k||w||(k=!0,et(N))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var M=3;break;default:M=g}var z=g;g=M;try{return B()}finally{g=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,M){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var z=g;g=B;try{return M()}finally{g=z}},t.unstable_scheduleCallback=function(B,M,z){var $=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?$+z:$):z=$,B){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=z+X,B={id:f++,callback:M,priorityLevel:B,startTime:z,expirationTime:X,sortIndex:-1},z>$?(B.sortIndex=z,e(d,B),n(u)===null&&B===n(d)&&(O?(A(y),y=-1):O=!0,q(b,z-$))):(B.sortIndex=X,e(u,B),k||w||(k=!0,et(N))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var M=g;return function(){var z=g;g=M;try{return B.apply(this,arguments)}finally{g=z}}}})(Hy);$y.exports=Hy;var nI=$y.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rI=K,An=nI;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qy=new Set,va={};function mi(t,e){to(t,e),to(t+"Capture",e)}function to(t,e){for(va[t]=e,t=0;t<e.length;t++)qy.add(e[t])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hd=Object.prototype.hasOwnProperty,sI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Um={},zm={};function iI(t){return Hd.call(zm,t)?!0:Hd.call(Um,t)?!1:sI.test(t)?zm[t]=!0:(Um[t]=!0,!1)}function oI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aI(t,e,n,r){if(e===null||typeof e>"u"||oI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ft[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ft[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ft[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ft[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ft[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ft[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ft[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ft[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ft[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var vf=/[\-:]([a-z])/g;function yf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vf,yf);Ft[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vf,yf);Ft[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vf,yf);Ft[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ft[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ft.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ft[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function _f(t,e,n,r){var s=Ft.hasOwnProperty(e)?Ft[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aI(e,n,s,r)&&(n=null),r||s===null?iI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gr=rI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Al=Symbol.for("react.element"),ji=Symbol.for("react.portal"),Di=Symbol.for("react.fragment"),wf=Symbol.for("react.strict_mode"),qd=Symbol.for("react.profiler"),Wy=Symbol.for("react.provider"),Gy=Symbol.for("react.context"),Ef=Symbol.for("react.forward_ref"),Wd=Symbol.for("react.suspense"),Gd=Symbol.for("react.suspense_list"),Tf=Symbol.for("react.memo"),Zr=Symbol.for("react.lazy"),Ky=Symbol.for("react.offscreen"),Bm=Symbol.iterator;function Vo(t){return t===null||typeof t!="object"?null:(t=Bm&&t[Bm]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,id;function qo(t){if(id===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);id=e&&e[1]||""}return`
`+id+t}var od=!1;function ad(t,e){if(!t||od)return"";od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qo(t):""}function lI(t){switch(t.tag){case 5:return qo(t.type);case 16:return qo("Lazy");case 13:return qo("Suspense");case 19:return qo("SuspenseList");case 0:case 2:case 15:return t=ad(t.type,!1),t;case 11:return t=ad(t.type.render,!1),t;case 1:return t=ad(t.type,!0),t;default:return""}}function Kd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Di:return"Fragment";case ji:return"Portal";case qd:return"Profiler";case wf:return"StrictMode";case Wd:return"Suspense";case Gd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gy:return(t.displayName||"Context")+".Consumer";case Wy:return(t._context.displayName||"Context")+".Provider";case Ef:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tf:return e=t.displayName||null,e!==null?e:Kd(t.type)||"Memo";case Zr:e=t._payload,t=t._init;try{return Kd(t(e))}catch{}}return null}function cI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kd(e);case 8:return e===wf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uI(t){var e=Qy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=uI(t))}function Yy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qd(t,e){var n=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $m(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xy(t,e){e=e.checked,e!=null&&_f(t,"checked",e,!1)}function Yd(t,e){Xy(t,e);var n=Ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xd(t,e.type,Ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xd(t,e,n){(e!=="number"||mc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wo=Array.isArray;function qi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ts(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Jd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Wo(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ts(n)}}function Jy(t,e){var n=Ts(e.value),r=Ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xl,e_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xl=xl||document.createElement("div"),xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dI=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(t){dI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),na[e]=na[t]})});function t_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||na.hasOwnProperty(t)&&na[t]?(""+e).trim():e+"px"}function n_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=t_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var hI=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eh(t,e){if(e){if(hI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function th(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nh=null;function If(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rh=null,Wi=null,Gi=null;function Gm(t){if(t=Ka(t)){if(typeof rh!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=fu(e),rh(t.stateNode,t.type,e))}}function r_(t){Wi?Gi?Gi.push(t):Gi=[t]:Wi=t}function s_(){if(Wi){var t=Wi,e=Gi;if(Gi=Wi=null,Gm(t),e)for(t=0;t<e.length;t++)Gm(e[t])}}function i_(t,e){return t(e)}function o_(){}var ld=!1;function a_(t,e,n){if(ld)return t(e,n);ld=!0;try{return i_(t,e,n)}finally{ld=!1,(Wi!==null||Gi!==null)&&(o_(),s_())}}function _a(t,e){var n=t.stateNode;if(n===null)return null;var r=fu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var sh=!1;if(Lr)try{var Lo={};Object.defineProperty(Lo,"passive",{get:function(){sh=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{sh=!1}function fI(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ra=!1,gc=null,vc=!1,ih=null,pI={onError:function(t){ra=!0,gc=t}};function mI(t,e,n,r,s,i,o,c,u){ra=!1,gc=null,fI.apply(pI,arguments)}function gI(t,e,n,r,s,i,o,c,u){if(mI.apply(this,arguments),ra){if(ra){var d=gc;ra=!1,gc=null}else throw Error(Y(198));vc||(vc=!0,ih=d)}}function gi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function l_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Km(t){if(gi(t)!==t)throw Error(Y(188))}function vI(t){var e=t.alternate;if(!e){if(e=gi(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Km(s),t;if(i===r)return Km(s),e;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function c_(t){return t=vI(t),t!==null?u_(t):null}function u_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=u_(t);if(e!==null)return e;t=t.sibling}return null}var d_=An.unstable_scheduleCallback,Qm=An.unstable_cancelCallback,yI=An.unstable_shouldYield,_I=An.unstable_requestPaint,mt=An.unstable_now,wI=An.unstable_getCurrentPriorityLevel,Sf=An.unstable_ImmediatePriority,h_=An.unstable_UserBlockingPriority,yc=An.unstable_NormalPriority,EI=An.unstable_LowPriority,f_=An.unstable_IdlePriority,cu=null,ar=null;function TI(t){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(cu,t,void 0,(t.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:AI,II=Math.log,SI=Math.LN2;function AI(t){return t>>>=0,t===0?32:31-(II(t)/SI|0)|0}var Pl=64,kl=4194304;function Go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _c(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Go(c):(i&=o,i!==0&&(r=Go(i)))}else o=n&~s,o!==0?r=Go(o):i!==0&&(r=Go(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qn(e),s=1<<n,r|=t[n],e&=~s;return r}function CI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Qn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=CI(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function oh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p_(){var t=Pl;return Pl<<=1,!(Pl&4194240)&&(Pl=64),t}function cd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qn(e),t[e]=n}function PI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Qn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Af(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ue=0;function m_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g_,Cf,v_,y_,__,ah=!1,Nl=[],us=null,ds=null,hs=null,wa=new Map,Ea=new Map,ts=[],kI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ym(t,e){switch(t){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function Fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ka(e),e!==null&&Cf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function NI(t,e,n,r,s){switch(e){case"focusin":return us=Fo(us,t,e,n,r,s),!0;case"dragenter":return ds=Fo(ds,t,e,n,r,s),!0;case"mouseover":return hs=Fo(hs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return wa.set(i,Fo(wa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ea.set(i,Fo(Ea.get(i)||null,t,e,n,r,s)),!0}return!1}function w_(t){var e=Ks(t.target);if(e!==null){var n=gi(e);if(n!==null){if(e=n.tag,e===13){if(e=l_(n),e!==null){t.blockedOn=e,__(t.priority,function(){v_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ql(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nh=r,n.target.dispatchEvent(r),nh=null}else return e=Ka(n),e!==null&&Cf(e),t.blockedOn=n,!1;e.shift()}return!0}function Xm(t,e,n){Ql(t)&&n.delete(e)}function RI(){ah=!1,us!==null&&Ql(us)&&(us=null),ds!==null&&Ql(ds)&&(ds=null),hs!==null&&Ql(hs)&&(hs=null),wa.forEach(Xm),Ea.forEach(Xm)}function Uo(t,e){t.blockedOn===e&&(t.blockedOn=null,ah||(ah=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,RI)))}function Ta(t){function e(s){return Uo(s,t)}if(0<Nl.length){Uo(Nl[0],t);for(var n=1;n<Nl.length;n++){var r=Nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(us!==null&&Uo(us,t),ds!==null&&Uo(ds,t),hs!==null&&Uo(hs,t),wa.forEach(e),Ea.forEach(e),n=0;n<ts.length;n++)r=ts[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ts.length&&(n=ts[0],n.blockedOn===null);)w_(n),n.blockedOn===null&&ts.shift()}var Ki=Gr.ReactCurrentBatchConfig,wc=!0;function jI(t,e,n,r){var s=Ue,i=Ki.transition;Ki.transition=null;try{Ue=1,xf(t,e,n,r)}finally{Ue=s,Ki.transition=i}}function DI(t,e,n,r){var s=Ue,i=Ki.transition;Ki.transition=null;try{Ue=4,xf(t,e,n,r)}finally{Ue=s,Ki.transition=i}}function xf(t,e,n,r){if(wc){var s=lh(t,e,n,r);if(s===null)_d(t,e,r,Ec,n),Ym(t,r);else if(NI(s,t,e,n,r))r.stopPropagation();else if(Ym(t,r),e&4&&-1<kI.indexOf(t)){for(;s!==null;){var i=Ka(s);if(i!==null&&g_(i),i=lh(t,e,n,r),i===null&&_d(t,e,r,Ec,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else _d(t,e,r,null,n)}}var Ec=null;function lh(t,e,n,r){if(Ec=null,t=If(r),t=Ks(t),t!==null)if(e=gi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=l_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ec=t,null}function E_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wI()){case Sf:return 1;case h_:return 4;case yc:case EI:return 16;case f_:return 536870912;default:return 16}default:return 16}}var as=null,Pf=null,Yl=null;function T_(){if(Yl)return Yl;var t,e=Pf,n=e.length,r,s="value"in as?as.value:as.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Yl=s.slice(t,1<r?1-r:void 0)}function Xl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function Jm(){return!1}function xn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Rl:Jm,this.isPropagationStopped=Jm,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),e}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kf=xn(go),Ga=st({},go,{view:0,detail:0}),bI=xn(Ga),ud,dd,zo,uu=st({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zo&&(zo&&t.type==="mousemove"?(ud=t.screenX-zo.screenX,dd=t.screenY-zo.screenY):dd=ud=0,zo=t),ud)},movementY:function(t){return"movementY"in t?t.movementY:dd}}),Zm=xn(uu),OI=st({},uu,{dataTransfer:0}),MI=xn(OI),VI=st({},Ga,{relatedTarget:0}),hd=xn(VI),LI=st({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),FI=xn(LI),UI=st({},go,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zI=xn(UI),BI=st({},go,{data:0}),eg=xn(BI),$I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qI[t])?!!e[t]:!1}function Nf(){return WI}var GI=st({},Ga,{key:function(t){if(t.key){var e=$I[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nf,charCode:function(t){return t.type==="keypress"?Xl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KI=xn(GI),QI=st({},uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tg=xn(QI),YI=st({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nf}),XI=xn(YI),JI=st({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZI=xn(JI),eS=st({},uu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tS=xn(eS),nS=[9,13,27,32],Rf=Lr&&"CompositionEvent"in window,sa=null;Lr&&"documentMode"in document&&(sa=document.documentMode);var rS=Lr&&"TextEvent"in window&&!sa,I_=Lr&&(!Rf||sa&&8<sa&&11>=sa),ng=" ",rg=!1;function S_(t,e){switch(t){case"keyup":return nS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bi=!1;function sS(t,e){switch(t){case"compositionend":return A_(e);case"keypress":return e.which!==32?null:(rg=!0,ng);case"textInput":return t=e.data,t===ng&&rg?null:t;default:return null}}function iS(t,e){if(bi)return t==="compositionend"||!Rf&&S_(t,e)?(t=T_(),Yl=Pf=as=null,bi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return I_&&e.locale!=="ko"?null:e.data;default:return null}}var oS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oS[t.type]:e==="textarea"}function C_(t,e,n,r){r_(r),e=Tc(e,"onChange"),0<e.length&&(n=new kf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ia=null,Ia=null;function aS(t){V_(t,0)}function du(t){var e=Vi(t);if(Yy(e))return t}function lS(t,e){if(t==="change")return e}var x_=!1;if(Lr){var fd;if(Lr){var pd="oninput"in document;if(!pd){var ig=document.createElement("div");ig.setAttribute("oninput","return;"),pd=typeof ig.oninput=="function"}fd=pd}else fd=!1;x_=fd&&(!document.documentMode||9<document.documentMode)}function og(){ia&&(ia.detachEvent("onpropertychange",P_),Ia=ia=null)}function P_(t){if(t.propertyName==="value"&&du(Ia)){var e=[];C_(e,Ia,t,If(t)),a_(aS,e)}}function cS(t,e,n){t==="focusin"?(og(),ia=e,Ia=n,ia.attachEvent("onpropertychange",P_)):t==="focusout"&&og()}function uS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return du(Ia)}function dS(t,e){if(t==="click")return du(e)}function hS(t,e){if(t==="input"||t==="change")return du(e)}function fS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:fS;function Sa(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hd.call(e,s)||!Xn(t[s],e[s]))return!1}return!0}function ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lg(t,e){var n=ag(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ag(n)}}function k_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N_(){for(var t=window,e=mc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mc(t.document)}return e}function jf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pS(t){var e=N_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&k_(n.ownerDocument.documentElement,n)){if(r!==null&&jf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lg(n,i);var o=lg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mS=Lr&&"documentMode"in document&&11>=document.documentMode,Oi=null,ch=null,oa=null,uh=!1;function cg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uh||Oi==null||Oi!==mc(r)||(r=Oi,"selectionStart"in r&&jf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oa&&Sa(oa,r)||(oa=r,r=Tc(ch,"onSelect"),0<r.length&&(e=new kf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oi)))}function jl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mi={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionend:jl("Transition","TransitionEnd")},md={},R_={};Lr&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function hu(t){if(md[t])return md[t];if(!Mi[t])return t;var e=Mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R_)return md[t]=e[n];return t}var j_=hu("animationend"),D_=hu("animationiteration"),b_=hu("animationstart"),O_=hu("transitionend"),M_=new Map,ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function js(t,e){M_.set(t,e),mi(e,[t])}for(var gd=0;gd<ug.length;gd++){var vd=ug[gd],gS=vd.toLowerCase(),vS=vd[0].toUpperCase()+vd.slice(1);js(gS,"on"+vS)}js(j_,"onAnimationEnd");js(D_,"onAnimationIteration");js(b_,"onAnimationStart");js("dblclick","onDoubleClick");js("focusin","onFocus");js("focusout","onBlur");js(O_,"onTransitionEnd");to("onMouseEnter",["mouseout","mouseover"]);to("onMouseLeave",["mouseout","mouseover"]);to("onPointerEnter",["pointerout","pointerover"]);to("onPointerLeave",["pointerout","pointerover"]);mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mi("onBeforeInput",["compositionend","keypress","textInput","paste"]);mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function dg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gI(r,e,void 0,t),t.currentTarget=null}function V_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;dg(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;dg(s,c,d),i=u}}}if(vc)throw t=ih,vc=!1,ih=null,t}function Ge(t,e){var n=e[mh];n===void 0&&(n=e[mh]=new Set);var r=t+"__bubble";n.has(r)||(L_(e,t,2,!1),n.add(r))}function yd(t,e,n){var r=0;e&&(r|=4),L_(n,t,r,e)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function Aa(t){if(!t[Dl]){t[Dl]=!0,qy.forEach(function(n){n!=="selectionchange"&&(yS.has(n)||yd(n,!1,t),yd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dl]||(e[Dl]=!0,yd("selectionchange",!1,e))}}function L_(t,e,n,r){switch(E_(e)){case 1:var s=jI;break;case 4:s=DI;break;default:s=xf}n=s.bind(null,e,n,t),s=void 0,!sh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _d(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Ks(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}a_(function(){var d=i,f=If(n),m=[];e:{var g=M_.get(t);if(g!==void 0){var w=kf,k=t;switch(t){case"keypress":if(Xl(n)===0)break e;case"keydown":case"keyup":w=KI;break;case"focusin":k="focus",w=hd;break;case"focusout":k="blur",w=hd;break;case"beforeblur":case"afterblur":w=hd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Zm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=MI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=XI;break;case j_:case D_:case b_:w=FI;break;case O_:w=ZI;break;case"scroll":w=bI;break;case"wheel":w=tS;break;case"copy":case"cut":case"paste":w=zI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=tg}var O=(e&4)!==0,F=!O&&t==="scroll",A=O?g!==null?g+"Capture":null:g;O=[];for(var I=d,S;I!==null;){S=I;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,A!==null&&(b=_a(I,A),b!=null&&O.push(Ca(I,b,S)))),F)break;I=I.return}0<O.length&&(g=new w(g,k,null,n,f),m.push({event:g,listeners:O}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==nh&&(k=n.relatedTarget||n.fromElement)&&(Ks(k)||k[Fr]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(k=n.relatedTarget||n.toElement,w=d,k=k?Ks(k):null,k!==null&&(F=gi(k),k!==F||k.tag!==5&&k.tag!==6)&&(k=null)):(w=null,k=d),w!==k)){if(O=Zm,b="onMouseLeave",A="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(O=tg,b="onPointerLeave",A="onPointerEnter",I="pointer"),F=w==null?g:Vi(w),S=k==null?g:Vi(k),g=new O(b,I+"leave",w,n,f),g.target=F,g.relatedTarget=S,b=null,Ks(f)===d&&(O=new O(A,I+"enter",k,n,f),O.target=S,O.relatedTarget=F,b=O),F=b,w&&k)t:{for(O=w,A=k,I=0,S=O;S;S=Ci(S))I++;for(S=0,b=A;b;b=Ci(b))S++;for(;0<I-S;)O=Ci(O),I--;for(;0<S-I;)A=Ci(A),S--;for(;I--;){if(O===A||A!==null&&O===A.alternate)break t;O=Ci(O),A=Ci(A)}O=null}else O=null;w!==null&&hg(m,g,w,O,!1),k!==null&&F!==null&&hg(m,F,k,O,!0)}}e:{if(g=d?Vi(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var N=lS;else if(sg(g))if(x_)N=hS;else{N=uS;var L=cS}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(N=dS);if(N&&(N=N(t,d))){C_(m,N,n,f);break e}L&&L(t,g,d),t==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&Xd(g,"number",g.value)}switch(L=d?Vi(d):window,t){case"focusin":(sg(L)||L.contentEditable==="true")&&(Oi=L,ch=d,oa=null);break;case"focusout":oa=ch=Oi=null;break;case"mousedown":uh=!0;break;case"contextmenu":case"mouseup":case"dragend":uh=!1,cg(m,n,f);break;case"selectionchange":if(mS)break;case"keydown":case"keyup":cg(m,n,f)}var v;if(Rf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else bi?S_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(I_&&n.locale!=="ko"&&(bi||y!=="onCompositionStart"?y==="onCompositionEnd"&&bi&&(v=T_()):(as=f,Pf="value"in as?as.value:as.textContent,bi=!0)),L=Tc(d,y),0<L.length&&(y=new eg(y,t,null,n,f),m.push({event:y,listeners:L}),v?y.data=v:(v=A_(n),v!==null&&(y.data=v)))),(v=rS?sS(t,n):iS(t,n))&&(d=Tc(d,"onBeforeInput"),0<d.length&&(f=new eg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=v))}V_(m,e)})}function Ca(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_a(t,n),i!=null&&r.unshift(Ca(t,i,s)),i=_a(t,e),i!=null&&r.push(Ca(t,i,s))),t=t.return}return r}function Ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=_a(n,i),u!=null&&o.unshift(Ca(n,u,c))):s||(u=_a(n,i),u!=null&&o.push(Ca(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _S=/\r\n?/g,wS=/\u0000|\uFFFD/g;function fg(t){return(typeof t=="string"?t:""+t).replace(_S,`
`).replace(wS,"")}function bl(t,e,n){if(e=fg(e),fg(t)!==e&&n)throw Error(Y(425))}function Ic(){}var dh=null,hh=null;function fh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ph=typeof setTimeout=="function"?setTimeout:void 0,ES=typeof clearTimeout=="function"?clearTimeout:void 0,pg=typeof Promise=="function"?Promise:void 0,TS=typeof queueMicrotask=="function"?queueMicrotask:typeof pg<"u"?function(t){return pg.resolve(null).then(t).catch(IS)}:ph;function IS(t){setTimeout(function(){throw t})}function wd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ta(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ta(e)}function fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vo=Math.random().toString(36).slice(2),or="__reactFiber$"+vo,xa="__reactProps$"+vo,Fr="__reactContainer$"+vo,mh="__reactEvents$"+vo,SS="__reactListeners$"+vo,AS="__reactHandles$"+vo;function Ks(t){var e=t[or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mg(t);t!==null;){if(n=t[or])return n;t=mg(t)}return e}t=n,n=t.parentNode}return null}function Ka(t){return t=t[or]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function fu(t){return t[xa]||null}var gh=[],Li=-1;function Ds(t){return{current:t}}function Qe(t){0>Li||(t.current=gh[Li],gh[Li]=null,Li--)}function He(t,e){Li++,gh[Li]=t.current,t.current=e}var Is={},Xt=Ds(Is),fn=Ds(!1),ri=Is;function no(t,e){var n=t.type.contextTypes;if(!n)return Is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pn(t){return t=t.childContextTypes,t!=null}function Sc(){Qe(fn),Qe(Xt)}function gg(t,e,n){if(Xt.current!==Is)throw Error(Y(168));He(Xt,e),He(fn,n)}function F_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,cI(t)||"Unknown",s));return st({},n,r)}function Ac(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Is,ri=Xt.current,He(Xt,t),He(fn,fn.current),!0}function vg(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=F_(t,e,ri),r.__reactInternalMemoizedMergedChildContext=t,Qe(fn),Qe(Xt),He(Xt,t)):Qe(fn),He(fn,n)}var Pr=null,pu=!1,Ed=!1;function U_(t){Pr===null?Pr=[t]:Pr.push(t)}function CS(t){pu=!0,U_(t)}function bs(){if(!Ed&&Pr!==null){Ed=!0;var t=0,e=Ue;try{var n=Pr;for(Ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pr=null,pu=!1}catch(s){throw Pr!==null&&(Pr=Pr.slice(t+1)),d_(Sf,bs),s}finally{Ue=e,Ed=!1}}return null}var Fi=[],Ui=0,Cc=null,xc=0,Rn=[],jn=0,si=null,Nr=1,Rr="";function Hs(t,e){Fi[Ui++]=xc,Fi[Ui++]=Cc,Cc=t,xc=e}function z_(t,e,n){Rn[jn++]=Nr,Rn[jn++]=Rr,Rn[jn++]=si,si=t;var r=Nr;t=Rr;var s=32-Qn(r)-1;r&=~(1<<s),n+=1;var i=32-Qn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Nr=1<<32-Qn(e)+s|n<<s|r,Rr=i+t}else Nr=1<<i|n<<s|r,Rr=t}function Df(t){t.return!==null&&(Hs(t,1),z_(t,1,0))}function bf(t){for(;t===Cc;)Cc=Fi[--Ui],Fi[Ui]=null,xc=Fi[--Ui],Fi[Ui]=null;for(;t===si;)si=Rn[--jn],Rn[jn]=null,Rr=Rn[--jn],Rn[jn]=null,Nr=Rn[--jn],Rn[jn]=null}var Sn=null,Tn=null,Ze=!1,Gn=null;function B_(t,e){var n=bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sn=t,Tn=fs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sn=t,Tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=si!==null?{id:Nr,overflow:Rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sn=t,Tn=null,!0):!1;default:return!1}}function vh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yh(t){if(Ze){var e=Tn;if(e){var n=e;if(!yg(t,e)){if(vh(t))throw Error(Y(418));e=fs(n.nextSibling);var r=Sn;e&&yg(t,e)?B_(r,n):(t.flags=t.flags&-4097|2,Ze=!1,Sn=t)}}else{if(vh(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ze=!1,Sn=t}}}function _g(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sn=t}function Ol(t){if(t!==Sn)return!1;if(!Ze)return _g(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fh(t.type,t.memoizedProps)),e&&(e=Tn)){if(vh(t))throw $_(),Error(Y(418));for(;e;)B_(t,e),e=fs(e.nextSibling)}if(_g(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tn=fs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tn=null}}else Tn=Sn?fs(t.stateNode.nextSibling):null;return!0}function $_(){for(var t=Tn;t;)t=fs(t.nextSibling)}function ro(){Tn=Sn=null,Ze=!1}function Of(t){Gn===null?Gn=[t]:Gn.push(t)}var xS=Gr.ReactCurrentBatchConfig;function Bo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Ml(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wg(t){var e=t._init;return e(t._payload)}function H_(t){function e(A,I){if(t){var S=A.deletions;S===null?(A.deletions=[I],A.flags|=16):S.push(I)}}function n(A,I){if(!t)return null;for(;I!==null;)e(A,I),I=I.sibling;return null}function r(A,I){for(A=new Map;I!==null;)I.key!==null?A.set(I.key,I):A.set(I.index,I),I=I.sibling;return A}function s(A,I){return A=vs(A,I),A.index=0,A.sibling=null,A}function i(A,I,S){return A.index=S,t?(S=A.alternate,S!==null?(S=S.index,S<I?(A.flags|=2,I):S):(A.flags|=2,I)):(A.flags|=1048576,I)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function c(A,I,S,b){return I===null||I.tag!==6?(I=Pd(S,A.mode,b),I.return=A,I):(I=s(I,S),I.return=A,I)}function u(A,I,S,b){var N=S.type;return N===Di?f(A,I,S.props.children,b,S.key):I!==null&&(I.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Zr&&wg(N)===I.type)?(b=s(I,S.props),b.ref=Bo(A,I,S),b.return=A,b):(b=sc(S.type,S.key,S.props,null,A.mode,b),b.ref=Bo(A,I,S),b.return=A,b)}function d(A,I,S,b){return I===null||I.tag!==4||I.stateNode.containerInfo!==S.containerInfo||I.stateNode.implementation!==S.implementation?(I=kd(S,A.mode,b),I.return=A,I):(I=s(I,S.children||[]),I.return=A,I)}function f(A,I,S,b,N){return I===null||I.tag!==7?(I=ei(S,A.mode,b,N),I.return=A,I):(I=s(I,S),I.return=A,I)}function m(A,I,S){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Pd(""+I,A.mode,S),I.return=A,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Al:return S=sc(I.type,I.key,I.props,null,A.mode,S),S.ref=Bo(A,null,I),S.return=A,S;case ji:return I=kd(I,A.mode,S),I.return=A,I;case Zr:var b=I._init;return m(A,b(I._payload),S)}if(Wo(I)||Vo(I))return I=ei(I,A.mode,S,null),I.return=A,I;Ml(A,I)}return null}function g(A,I,S,b){var N=I!==null?I.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:c(A,I,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:return S.key===N?u(A,I,S,b):null;case ji:return S.key===N?d(A,I,S,b):null;case Zr:return N=S._init,g(A,I,N(S._payload),b)}if(Wo(S)||Vo(S))return N!==null?null:f(A,I,S,b,null);Ml(A,S)}return null}function w(A,I,S,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return A=A.get(S)||null,c(I,A,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Al:return A=A.get(b.key===null?S:b.key)||null,u(I,A,b,N);case ji:return A=A.get(b.key===null?S:b.key)||null,d(I,A,b,N);case Zr:var L=b._init;return w(A,I,S,L(b._payload),N)}if(Wo(b)||Vo(b))return A=A.get(S)||null,f(I,A,b,N,null);Ml(I,b)}return null}function k(A,I,S,b){for(var N=null,L=null,v=I,y=I=0,T=null;v!==null&&y<S.length;y++){v.index>y?(T=v,v=null):T=v.sibling;var C=g(A,v,S[y],b);if(C===null){v===null&&(v=T);break}t&&v&&C.alternate===null&&e(A,v),I=i(C,I,y),L===null?N=C:L.sibling=C,L=C,v=T}if(y===S.length)return n(A,v),Ze&&Hs(A,y),N;if(v===null){for(;y<S.length;y++)v=m(A,S[y],b),v!==null&&(I=i(v,I,y),L===null?N=v:L.sibling=v,L=v);return Ze&&Hs(A,y),N}for(v=r(A,v);y<S.length;y++)T=w(v,A,y,S[y],b),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?y:T.key),I=i(T,I,y),L===null?N=T:L.sibling=T,L=T);return t&&v.forEach(function(R){return e(A,R)}),Ze&&Hs(A,y),N}function O(A,I,S,b){var N=Vo(S);if(typeof N!="function")throw Error(Y(150));if(S=N.call(S),S==null)throw Error(Y(151));for(var L=N=null,v=I,y=I=0,T=null,C=S.next();v!==null&&!C.done;y++,C=S.next()){v.index>y?(T=v,v=null):T=v.sibling;var R=g(A,v,C.value,b);if(R===null){v===null&&(v=T);break}t&&v&&R.alternate===null&&e(A,v),I=i(R,I,y),L===null?N=R:L.sibling=R,L=R,v=T}if(C.done)return n(A,v),Ze&&Hs(A,y),N;if(v===null){for(;!C.done;y++,C=S.next())C=m(A,C.value,b),C!==null&&(I=i(C,I,y),L===null?N=C:L.sibling=C,L=C);return Ze&&Hs(A,y),N}for(v=r(A,v);!C.done;y++,C=S.next())C=w(v,A,y,C.value,b),C!==null&&(t&&C.alternate!==null&&v.delete(C.key===null?y:C.key),I=i(C,I,y),L===null?N=C:L.sibling=C,L=C);return t&&v.forEach(function(j){return e(A,j)}),Ze&&Hs(A,y),N}function F(A,I,S,b){if(typeof S=="object"&&S!==null&&S.type===Di&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:e:{for(var N=S.key,L=I;L!==null;){if(L.key===N){if(N=S.type,N===Di){if(L.tag===7){n(A,L.sibling),I=s(L,S.props.children),I.return=A,A=I;break e}}else if(L.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Zr&&wg(N)===L.type){n(A,L.sibling),I=s(L,S.props),I.ref=Bo(A,L,S),I.return=A,A=I;break e}n(A,L);break}else e(A,L);L=L.sibling}S.type===Di?(I=ei(S.props.children,A.mode,b,S.key),I.return=A,A=I):(b=sc(S.type,S.key,S.props,null,A.mode,b),b.ref=Bo(A,I,S),b.return=A,A=b)}return o(A);case ji:e:{for(L=S.key;I!==null;){if(I.key===L)if(I.tag===4&&I.stateNode.containerInfo===S.containerInfo&&I.stateNode.implementation===S.implementation){n(A,I.sibling),I=s(I,S.children||[]),I.return=A,A=I;break e}else{n(A,I);break}else e(A,I);I=I.sibling}I=kd(S,A.mode,b),I.return=A,A=I}return o(A);case Zr:return L=S._init,F(A,I,L(S._payload),b)}if(Wo(S))return k(A,I,S,b);if(Vo(S))return O(A,I,S,b);Ml(A,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,I!==null&&I.tag===6?(n(A,I.sibling),I=s(I,S),I.return=A,A=I):(n(A,I),I=Pd(S,A.mode,b),I.return=A,A=I),o(A)):n(A,I)}return F}var so=H_(!0),q_=H_(!1),Pc=Ds(null),kc=null,zi=null,Mf=null;function Vf(){Mf=zi=kc=null}function Lf(t){var e=Pc.current;Qe(Pc),t._currentValue=e}function _h(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qi(t,e){kc=t,Mf=zi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(Mf!==t)if(t={context:t,memoizedValue:e,next:null},zi===null){if(kc===null)throw Error(Y(308));zi=t,kc.dependencies={lanes:0,firstContext:t}}else zi=zi.next=t;return e}var Qs=null;function Ff(t){Qs===null?Qs=[t]:Qs.push(t)}function W_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ff(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ur(t,r)}function Ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var es=!1;function Uf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ps(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ur(t,n)}return s=r.interleaved,s===null?(e.next=e,Ff(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ur(t,n)}function Jl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}function Eg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nc(t,e,n,r){var s=t.updateQueue;es=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,c=i;do{var g=c.lane,w=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var k=t,O=c;switch(g=e,w=n,O.tag){case 1:if(k=O.payload,typeof k=="function"){m=k.call(w,m,g);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=O.payload,g=typeof k=="function"?k.call(w,m,g):k,g==null)break e;m=st({},m,g);break e;case 2:es=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=w,u=m):f=f.next=w,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);oi|=o,t.lanes=o,t.memoizedState=m}}function Tg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var Qa={},lr=Ds(Qa),Pa=Ds(Qa),ka=Ds(Qa);function Ys(t){if(t===Qa)throw Error(Y(174));return t}function zf(t,e){switch(He(ka,e),He(Pa,t),He(lr,Qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zd(e,t)}Qe(lr),He(lr,e)}function io(){Qe(lr),Qe(Pa),Qe(ka)}function K_(t){Ys(ka.current);var e=Ys(lr.current),n=Zd(e,t.type);e!==n&&(He(Pa,t),He(lr,n))}function Bf(t){Pa.current===t&&(Qe(lr),Qe(Pa))}var nt=Ds(0);function Rc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Td=[];function $f(){for(var t=0;t<Td.length;t++)Td[t]._workInProgressVersionPrimary=null;Td.length=0}var Zl=Gr.ReactCurrentDispatcher,Id=Gr.ReactCurrentBatchConfig,ii=0,rt=null,At=null,Nt=null,jc=!1,aa=!1,Na=0,PS=0;function qt(){throw Error(Y(321))}function Hf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xn(t[n],e[n]))return!1;return!0}function qf(t,e,n,r,s,i){if(ii=i,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zl.current=t===null||t.memoizedState===null?jS:DS,t=n(r,s),aa){i=0;do{if(aa=!1,Na=0,25<=i)throw Error(Y(301));i+=1,Nt=At=null,e.updateQueue=null,Zl.current=bS,t=n(r,s)}while(aa)}if(Zl.current=Dc,e=At!==null&&At.next!==null,ii=0,Nt=At=rt=null,jc=!1,e)throw Error(Y(300));return t}function Wf(){var t=Na!==0;return Na=0,t}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?rt.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Ln(){if(At===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var e=Nt===null?rt.memoizedState:Nt.next;if(e!==null)Nt=e,At=t;else{if(t===null)throw Error(Y(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Nt===null?rt.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function Ra(t,e){return typeof e=="function"?e(t):e}function Sd(t){var e=Ln(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=At,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((ii&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,rt.lanes|=f,oi|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,Xn(r,e.memoizedState)||(dn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,rt.lanes|=i,oi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ad(t){var e=Ln(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Xn(i,e.memoizedState)||(dn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Q_(){}function Y_(t,e){var n=rt,r=Ln(),s=e(),i=!Xn(r.memoizedState,s);if(i&&(r.memoizedState=s,dn=!0),r=r.queue,Gf(Z_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Nt!==null&&Nt.memoizedState.tag&1){if(n.flags|=2048,ja(9,J_.bind(null,n,r,s,e),void 0,null),Rt===null)throw Error(Y(349));ii&30||X_(n,e,s)}return s}function X_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function J_(t,e,n,r){e.value=n,e.getSnapshot=r,e0(e)&&t0(t)}function Z_(t,e,n){return n(function(){e0(e)&&t0(t)})}function e0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xn(t,n)}catch{return!0}}function t0(t){var e=Ur(t,1);e!==null&&Yn(e,t,1,-1)}function Ig(t){var e=rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:t},e.queue=t,t=t.dispatch=RS.bind(null,rt,t),[e.memoizedState,t]}function ja(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function n0(){return Ln().memoizedState}function ec(t,e,n,r){var s=rr();rt.flags|=t,s.memoizedState=ja(1|e,n,void 0,r===void 0?null:r)}function mu(t,e,n,r){var s=Ln();r=r===void 0?null:r;var i=void 0;if(At!==null){var o=At.memoizedState;if(i=o.destroy,r!==null&&Hf(r,o.deps)){s.memoizedState=ja(e,n,i,r);return}}rt.flags|=t,s.memoizedState=ja(1|e,n,i,r)}function Sg(t,e){return ec(8390656,8,t,e)}function Gf(t,e){return mu(2048,8,t,e)}function r0(t,e){return mu(4,2,t,e)}function s0(t,e){return mu(4,4,t,e)}function i0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function o0(t,e,n){return n=n!=null?n.concat([t]):null,mu(4,4,i0.bind(null,e,t),n)}function Kf(){}function a0(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function l0(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function c0(t,e,n){return ii&21?(Xn(n,e)||(n=p_(),rt.lanes|=n,oi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function kS(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var r=Id.transition;Id.transition={};try{t(!1),e()}finally{Ue=n,Id.transition=r}}function u0(){return Ln().memoizedState}function NS(t,e,n){var r=gs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},d0(t))h0(e,n);else if(n=W_(t,e,n,r),n!==null){var s=tn();Yn(n,t,r,s),f0(n,e,r)}}function RS(t,e,n){var r=gs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(d0(t))h0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,Xn(c,o)){var u=e.interleaved;u===null?(s.next=s,Ff(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=W_(t,e,s,r),n!==null&&(s=tn(),Yn(n,t,r,s),f0(n,e,r))}}function d0(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function h0(t,e){aa=jc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function f0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}var Dc={readContext:Vn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},jS={readContext:Vn,useCallback:function(t,e){return rr().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:Sg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ec(4194308,4,i0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ec(4194308,4,t,e)},useInsertionEffect:function(t,e){return ec(4,2,t,e)},useMemo:function(t,e){var n=rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=NS.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=rr();return t={current:t},e.memoizedState=t},useState:Ig,useDebugValue:Kf,useDeferredValue:function(t){return rr().memoizedState=t},useTransition:function(){var t=Ig(!1),e=t[0];return t=kS.bind(null,t[1]),rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rt,s=rr();if(Ze){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Rt===null)throw Error(Y(349));ii&30||X_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Sg(Z_.bind(null,r,i,t),[t]),r.flags|=2048,ja(9,J_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=rr(),e=Rt.identifierPrefix;if(Ze){var n=Rr,r=Nr;n=(r&~(1<<32-Qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Na++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},DS={readContext:Vn,useCallback:a0,useContext:Vn,useEffect:Gf,useImperativeHandle:o0,useInsertionEffect:r0,useLayoutEffect:s0,useMemo:l0,useReducer:Sd,useRef:n0,useState:function(){return Sd(Ra)},useDebugValue:Kf,useDeferredValue:function(t){var e=Ln();return c0(e,At.memoizedState,t)},useTransition:function(){var t=Sd(Ra)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:Q_,useSyncExternalStore:Y_,useId:u0,unstable_isNewReconciler:!1},bS={readContext:Vn,useCallback:a0,useContext:Vn,useEffect:Gf,useImperativeHandle:o0,useInsertionEffect:r0,useLayoutEffect:s0,useMemo:l0,useReducer:Ad,useRef:n0,useState:function(){return Ad(Ra)},useDebugValue:Kf,useDeferredValue:function(t){var e=Ln();return At===null?e.memoizedState=t:c0(e,At.memoizedState,t)},useTransition:function(){var t=Ad(Ra)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:Q_,useSyncExternalStore:Y_,useId:u0,unstable_isNewReconciler:!1};function qn(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gu={isMounted:function(t){return(t=t._reactInternals)?gi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tn(),s=gs(t),i=Or(r,s);i.payload=e,n!=null&&(i.callback=n),e=ps(t,i,s),e!==null&&(Yn(e,t,s,r),Jl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tn(),s=gs(t),i=Or(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ps(t,i,s),e!==null&&(Yn(e,t,s,r),Jl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tn(),r=gs(t),s=Or(n,r);s.tag=2,e!=null&&(s.callback=e),e=ps(t,s,r),e!==null&&(Yn(e,t,r,n),Jl(e,t,r))}};function Ag(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Sa(n,r)||!Sa(s,i):!0}function p0(t,e,n){var r=!1,s=Is,i=e.contextType;return typeof i=="object"&&i!==null?i=Vn(i):(s=pn(e)?ri:Xt.current,r=e.contextTypes,i=(r=r!=null)?no(t,s):Is),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gu.enqueueReplaceState(e,e.state,null)}function Eh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Uf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vn(i):(i=pn(e)?ri:Xt.current,s.context=no(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gu.enqueueReplaceState(s,s.state,null),Nc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function oo(t,e){try{var n="",r=e;do n+=lI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Cd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Th(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OS=typeof WeakMap=="function"?WeakMap:Map;function m0(t,e,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Oc||(Oc=!0,jh=r),Th(t,e)},n}function g0(t,e,n){n=Or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Th(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Th(t,e),typeof r!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function xg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new OS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=QS.bind(null,t,e,n),e.then(t,t))}function Pg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Or(-1,1),e.tag=2,ps(n,e,1))),n.lanes|=1),t)}var MS=Gr.ReactCurrentOwner,dn=!1;function en(t,e,n,r){e.child=t===null?q_(e,null,n,r):so(e,t.child,n,r)}function Ng(t,e,n,r,s){n=n.render;var i=e.ref;return Qi(e,s),r=qf(t,e,n,r,i,s),n=Wf(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zr(t,e,s)):(Ze&&n&&Df(e),e.flags|=1,en(t,e,r,s),e.child)}function Rg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!np(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,v0(t,e,i,r,s)):(t=sc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Sa,n(o,r)&&t.ref===e.ref)return zr(t,e,s)}return e.flags|=1,t=vs(i,r),t.ref=e.ref,t.return=e,e.child=t}function v0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Sa(i,r)&&t.ref===e.ref)if(dn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,zr(t,e,s)}return Ih(t,e,n,r,s)}function y0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He($i,_n),_n|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He($i,_n),_n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,He($i,_n),_n|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,He($i,_n),_n|=r;return en(t,e,s,n),e.child}function _0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ih(t,e,n,r,s){var i=pn(n)?ri:Xt.current;return i=no(e,i),Qi(e,s),n=qf(t,e,n,r,i,s),r=Wf(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zr(t,e,s)):(Ze&&r&&Df(e),e.flags|=1,en(t,e,n,s),e.child)}function jg(t,e,n,r,s){if(pn(n)){var i=!0;Ac(e)}else i=!1;if(Qi(e,s),e.stateNode===null)tc(t,e),p0(e,n,r),Eh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Vn(d):(d=pn(n)?ri:Xt.current,d=no(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Cg(e,o,r,d),es=!1;var g=e.memoizedState;o.state=g,Nc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||fn.current||es?(typeof f=="function"&&(wh(e,n,f,r),u=e.memoizedState),(c=es||Ag(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,G_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:qn(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Vn(u):(u=pn(n)?ri:Xt.current,u=no(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&Cg(e,o,r,u),es=!1,g=e.memoizedState,o.state=g,Nc(e,r,o,s);var k=e.memoizedState;c!==m||g!==k||fn.current||es?(typeof w=="function"&&(wh(e,n,w,r),k=e.memoizedState),(d=es||Ag(e,n,d,r,g,k,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Sh(t,e,n,r,i,s)}function Sh(t,e,n,r,s,i){_0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&vg(e,n,!1),zr(t,e,i);r=e.stateNode,MS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=so(e,t.child,null,i),e.child=so(e,null,c,i)):en(t,e,c,i),e.memoizedState=r.state,s&&vg(e,n,!0),e.child}function w0(t){var e=t.stateNode;e.pendingContext?gg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gg(t,e.context,!1),zf(t,e.containerInfo)}function Dg(t,e,n,r,s){return ro(),Of(s),e.flags|=256,en(t,e,n,r),e.child}var Ah={dehydrated:null,treeContext:null,retryLane:0};function Ch(t){return{baseLanes:t,cachePool:null,transitions:null}}function E0(t,e,n){var r=e.pendingProps,s=nt.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),He(nt,s&1),t===null)return yh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_u(o,r,0,null),t=ei(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ch(n),e.memoizedState=Ah,t):Qf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return VS(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=vs(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=vs(c,i):(i=ei(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ch(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ah,r}return i=t.child,t=i.sibling,r=vs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qf(t,e){return e=_u({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,r){return r!==null&&Of(r),so(e,t.child,null,n),t=Qf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Cd(Error(Y(422))),Vl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=_u({mode:"visible",children:r.children},s,0,null),i=ei(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&so(e,t.child,null,o),e.child.memoizedState=Ch(o),e.memoizedState=Ah,i);if(!(e.mode&1))return Vl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(Y(419)),r=Cd(i,r,void 0),Vl(t,e,o,r)}if(c=(o&t.childLanes)!==0,dn||c){if(r=Rt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ur(t,s),Yn(r,t,s,-1))}return tp(),r=Cd(Error(Y(421))),Vl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=YS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tn=fs(s.nextSibling),Sn=e,Ze=!0,Gn=null,t!==null&&(Rn[jn++]=Nr,Rn[jn++]=Rr,Rn[jn++]=si,Nr=t.id,Rr=t.overflow,si=e),e=Qf(e,r.children),e.flags|=4096,e)}function bg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_h(t.return,e,n)}function xd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function T0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(en(t,e,r.children,n),r=nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bg(t,n,e);else if(t.tag===19)bg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(nt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Rc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),xd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Rc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}xd(e,!0,n,null,i);break;case"together":xd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=vs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LS(t,e,n){switch(e.tag){case 3:w0(e),ro();break;case 5:K_(e);break;case 1:pn(e.type)&&Ac(e);break;case 4:zf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;He(Pc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?E0(t,e,n):(He(nt,nt.current&1),t=zr(t,e,n),t!==null?t.sibling:null);He(nt,nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return T0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(nt,nt.current),r)break;return null;case 22:case 23:return e.lanes=0,y0(t,e,n)}return zr(t,e,n)}var I0,xh,S0,A0;I0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xh=function(){};S0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ys(lr.current);var i=null;switch(n){case"input":s=Qd(t,s),r=Qd(t,r),i=[];break;case"select":s=st({},s,{value:void 0}),r=st({},r,{value:void 0}),i=[];break;case"textarea":s=Jd(t,s),r=Jd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ic)}eh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(va.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(va.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ge("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};A0=function(t,e,n,r){n!==r&&(e.flags|=4)};function $o(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function FS(t,e,n){var r=e.pendingProps;switch(bf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return pn(e.type)&&Sc(),Wt(e),null;case 3:return r=e.stateNode,io(),Qe(fn),Qe(Xt),$f(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gn!==null&&(Oh(Gn),Gn=null))),xh(t,e),Wt(e),null;case 5:Bf(e);var s=Ys(ka.current);if(n=e.type,t!==null&&e.stateNode!=null)S0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Wt(e),null}if(t=Ys(lr.current),Ol(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[or]=e,r[xa]=i,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(s=0;s<Ko.length;s++)Ge(Ko[s],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":$m(r,i),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",r);break;case"textarea":qm(r,i),Ge("invalid",r)}eh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,c,t),s=["children",""+c]):va.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Cl(r),Hm(r,i,!0);break;case"textarea":Cl(r),Wm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ic)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[or]=e,t[xa]=r,I0(t,e,!1,!1),e.stateNode=t;e:{switch(o=th(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),s=r;break;case"iframe":case"object":case"embed":Ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ko.length;s++)Ge(Ko[s],t);s=r;break;case"source":Ge("error",t),s=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),s=r;break;case"details":Ge("toggle",t),s=r;break;case"input":$m(t,r),s=Qd(t,r),Ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=st({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":qm(t,r),s=Jd(t,r),Ge("invalid",t);break;default:s=r}eh(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?n_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&e_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ya(t,u):typeof u=="number"&&ya(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(va.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ge("scroll",t):u!=null&&_f(t,i,u,o))}switch(n){case"input":Cl(t),Hm(t,r,!1);break;case"textarea":Cl(t),Wm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ts(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?qi(t,!!r.multiple,i,!1):r.defaultValue!=null&&qi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ic)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)A0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Ys(ka.current),Ys(lr.current),Ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[or]=e,(i=r.nodeValue!==n)&&(t=Sn,t!==null))switch(t.tag){case 3:bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[or]=e,e.stateNode=r}return Wt(e),null;case 13:if(Qe(nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&Tn!==null&&e.mode&1&&!(e.flags&128))$_(),ro(),e.flags|=98560,i=!1;else if(i=Ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[or]=e}else ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),i=!1}else Gn!==null&&(Oh(Gn),Gn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?Ct===0&&(Ct=3):tp())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return io(),xh(t,e),t===null&&Aa(e.stateNode.containerInfo),Wt(e),null;case 10:return Lf(e.type._context),Wt(e),null;case 17:return pn(e.type)&&Sc(),Wt(e),null;case 19:if(Qe(nt),i=e.memoizedState,i===null)return Wt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$o(i,!1);else{if(Ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rc(t),o!==null){for(e.flags|=128,$o(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(nt,nt.current&1|2),e.child}t=t.sibling}i.tail!==null&&mt()>ao&&(e.flags|=128,r=!0,$o(i,!1),e.lanes=4194304)}else{if(!r)if(t=Rc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$o(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ze)return Wt(e),null}else 2*mt()-i.renderingStartTime>ao&&n!==1073741824&&(e.flags|=128,r=!0,$o(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mt(),e.sibling=null,n=nt.current,He(nt,r?n&1|2:n&1),e):(Wt(e),null);case 22:case 23:return ep(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_n&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function US(t,e){switch(bf(e),e.tag){case 1:return pn(e.type)&&Sc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return io(),Qe(fn),Qe(Xt),$f(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bf(e),null;case 13:if(Qe(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(nt),null;case 4:return io(),null;case 10:return Lf(e.type._context),null;case 22:case 23:return ep(),null;case 24:return null;default:return null}}var Ll=!1,Qt=!1,zS=typeof WeakSet=="function"?WeakSet:Set,le=null;function Bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function Ph(t,e,n){try{n()}catch(r){ht(t,e,r)}}var Og=!1;function BS(t,e){if(dh=wc,t=N_(),jf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(w=m.firstChild)!==null;)g=m,m=w;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++f===r&&(u=o),(w=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(hh={focusedElem:t,selectionRange:n},wc=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var O=k.memoizedProps,F=k.memoizedState,A=e.stateNode,I=A.getSnapshotBeforeUpdate(e.elementType===e.type?O:qn(e.type,O),F);A.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(b){ht(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return k=Og,Og=!1,k}function la(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ph(e,n,i)}s=s.next}while(s!==r)}}function vu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function C0(t){var e=t.alternate;e!==null&&(t.alternate=null,C0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[or],delete e[xa],delete e[mh],delete e[SS],delete e[AS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function x0(t){return t.tag===5||t.tag===3||t.tag===4}function Mg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||x0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ic));else if(r!==4&&(t=t.child,t!==null))for(Nh(t,e,n),t=t.sibling;t!==null;)Nh(t,e,n),t=t.sibling}function Rh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rh(t,e,n),t=t.sibling;t!==null;)Rh(t,e,n),t=t.sibling}var Ot=null,Wn=!1;function Xr(t,e,n){for(n=n.child;n!==null;)P0(t,e,n),n=n.sibling}function P0(t,e,n){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(cu,n)}catch{}switch(n.tag){case 5:Qt||Bi(n,e);case 6:var r=Ot,s=Wn;Ot=null,Xr(t,e,n),Ot=r,Wn=s,Ot!==null&&(Wn?(t=Ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(Wn?(t=Ot,n=n.stateNode,t.nodeType===8?wd(t.parentNode,n):t.nodeType===1&&wd(t,n),Ta(t)):wd(Ot,n.stateNode));break;case 4:r=Ot,s=Wn,Ot=n.stateNode.containerInfo,Wn=!0,Xr(t,e,n),Ot=r,Wn=s;break;case 0:case 11:case 14:case 15:if(!Qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ph(n,e,o),s=s.next}while(s!==r)}Xr(t,e,n);break;case 1:if(!Qt&&(Bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){ht(n,e,c)}Xr(t,e,n);break;case 21:Xr(t,e,n);break;case 22:n.mode&1?(Qt=(r=Qt)||n.memoizedState!==null,Xr(t,e,n),Qt=r):Xr(t,e,n);break;default:Xr(t,e,n)}}function Vg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zS),e.forEach(function(r){var s=XS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Ot=c.stateNode,Wn=!1;break e;case 3:Ot=c.stateNode.containerInfo,Wn=!0;break e;case 4:Ot=c.stateNode.containerInfo,Wn=!0;break e}c=c.return}if(Ot===null)throw Error(Y(160));P0(i,o,s),Ot=null,Wn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){ht(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)k0(e,t),e=e.sibling}function k0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),nr(t),r&4){try{la(3,t,t.return),vu(3,t)}catch(O){ht(t,t.return,O)}try{la(5,t,t.return)}catch(O){ht(t,t.return,O)}}break;case 1:Hn(e,t),nr(t),r&512&&n!==null&&Bi(n,n.return);break;case 5:if(Hn(e,t),nr(t),r&512&&n!==null&&Bi(n,n.return),t.flags&32){var s=t.stateNode;try{ya(s,"")}catch(O){ht(t,t.return,O)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Xy(s,i),th(c,o);var d=th(c,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?n_(s,m):f==="dangerouslySetInnerHTML"?e_(s,m):f==="children"?ya(s,m):_f(s,f,m,d)}switch(c){case"input":Yd(s,i);break;case"textarea":Jy(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?qi(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?qi(s,!!i.multiple,i.defaultValue,!0):qi(s,!!i.multiple,i.multiple?[]:"",!1))}s[xa]=i}catch(O){ht(t,t.return,O)}}break;case 6:if(Hn(e,t),nr(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(O){ht(t,t.return,O)}}break;case 3:if(Hn(e,t),nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ta(e.containerInfo)}catch(O){ht(t,t.return,O)}break;case 4:Hn(e,t),nr(t);break;case 13:Hn(e,t),nr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Jf=mt())),r&4&&Vg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(d=Qt)||f,Hn(e,t),Qt=d):Hn(e,t),nr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(le=t,f=t.child;f!==null;){for(m=le=f;le!==null;){switch(g=le,w=g.child,g.tag){case 0:case 11:case 14:case 15:la(4,g,g.return);break;case 1:Bi(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(O){ht(r,n,O)}}break;case 5:Bi(g,g.return);break;case 22:if(g.memoizedState!==null){Fg(m);continue}}w!==null?(w.return=g,le=w):Fg(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=t_("display",o))}catch(O){ht(t,t.return,O)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(O){ht(t,t.return,O)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Hn(e,t),nr(t),r&4&&Vg(t);break;case 21:break;default:Hn(e,t),nr(t)}}function nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(x0(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ya(s,""),r.flags&=-33);var i=Mg(t);Rh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Mg(t);Nh(t,c,o);break;default:throw Error(Y(161))}}catch(u){ht(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $S(t,e,n){le=t,N0(t)}function N0(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var s=le,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ll;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Qt;c=Ll;var d=Qt;if(Ll=o,(Qt=u)&&!d)for(le=s;le!==null;)o=le,u=o.child,o.tag===22&&o.memoizedState!==null?Ug(s):u!==null?(u.return=o,le=u):Ug(s);for(;i!==null;)le=i,N0(i),i=i.sibling;le=s,Ll=c,Qt=d}Lg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,le=i):Lg(t)}}function Lg(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||vu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:qn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Tg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Tg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ta(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Qt||e.flags&512&&kh(e)}catch(g){ht(e,e.return,g)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function Fg(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function Ug(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vu(4,e)}catch(u){ht(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){ht(e,s,u)}}var i=e.return;try{kh(e)}catch(u){ht(e,i,u)}break;case 5:var o=e.return;try{kh(e)}catch(u){ht(e,o,u)}}}catch(u){ht(e,e.return,u)}if(e===t){le=null;break}var c=e.sibling;if(c!==null){c.return=e.return,le=c;break}le=e.return}}var HS=Math.ceil,bc=Gr.ReactCurrentDispatcher,Yf=Gr.ReactCurrentOwner,On=Gr.ReactCurrentBatchConfig,be=0,Rt=null,yt=null,Lt=0,_n=0,$i=Ds(0),Ct=0,Da=null,oi=0,yu=0,Xf=0,ca=null,cn=null,Jf=0,ao=1/0,xr=null,Oc=!1,jh=null,ms=null,Fl=!1,ls=null,Mc=0,ua=0,Dh=null,nc=-1,rc=0;function tn(){return be&6?mt():nc!==-1?nc:nc=mt()}function gs(t){return t.mode&1?be&2&&Lt!==0?Lt&-Lt:xS.transition!==null?(rc===0&&(rc=p_()),rc):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:E_(t.type)),t):1}function Yn(t,e,n,r){if(50<ua)throw ua=0,Dh=null,Error(Y(185));Wa(t,n,r),(!(be&2)||t!==Rt)&&(t===Rt&&(!(be&2)&&(yu|=n),Ct===4&&ns(t,Lt)),mn(t,r),n===1&&be===0&&!(e.mode&1)&&(ao=mt()+500,pu&&bs()))}function mn(t,e){var n=t.callbackNode;xI(t,e);var r=_c(t,t===Rt?Lt:0);if(r===0)n!==null&&Qm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qm(n),e===1)t.tag===0?CS(zg.bind(null,t)):U_(zg.bind(null,t)),TS(function(){!(be&6)&&bs()}),n=null;else{switch(m_(r)){case 1:n=Sf;break;case 4:n=h_;break;case 16:n=yc;break;case 536870912:n=f_;break;default:n=yc}n=L0(n,R0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function R0(t,e){if(nc=-1,rc=0,be&6)throw Error(Y(327));var n=t.callbackNode;if(Yi()&&t.callbackNode!==n)return null;var r=_c(t,t===Rt?Lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vc(t,r);else{e=r;var s=be;be|=2;var i=D0();(Rt!==t||Lt!==e)&&(xr=null,ao=mt()+500,Zs(t,e));do try{GS();break}catch(c){j0(t,c)}while(!0);Vf(),bc.current=i,be=s,yt!==null?e=0:(Rt=null,Lt=0,e=Ct)}if(e!==0){if(e===2&&(s=oh(t),s!==0&&(r=s,e=bh(t,s))),e===1)throw n=Da,Zs(t,0),ns(t,r),mn(t,mt()),n;if(e===6)ns(t,r);else{if(s=t.current.alternate,!(r&30)&&!qS(s)&&(e=Vc(t,r),e===2&&(i=oh(t),i!==0&&(r=i,e=bh(t,i))),e===1))throw n=Da,Zs(t,0),ns(t,r),mn(t,mt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:qs(t,cn,xr);break;case 3:if(ns(t,r),(r&130023424)===r&&(e=Jf+500-mt(),10<e)){if(_c(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){tn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ph(qs.bind(null,t,cn,xr),e);break}qs(t,cn,xr);break;case 4:if(ns(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Qn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*HS(r/1960))-r,10<r){t.timeoutHandle=ph(qs.bind(null,t,cn,xr),r);break}qs(t,cn,xr);break;case 5:qs(t,cn,xr);break;default:throw Error(Y(329))}}}return mn(t,mt()),t.callbackNode===n?R0.bind(null,t):null}function bh(t,e){var n=ca;return t.current.memoizedState.isDehydrated&&(Zs(t,e).flags|=256),t=Vc(t,e),t!==2&&(e=cn,cn=n,e!==null&&Oh(e)),t}function Oh(t){cn===null?cn=t:cn.push.apply(cn,t)}function qS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Xn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ns(t,e){for(e&=~Xf,e&=~yu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qn(e),r=1<<n;t[n]=-1,e&=~r}}function zg(t){if(be&6)throw Error(Y(327));Yi();var e=_c(t,0);if(!(e&1))return mn(t,mt()),null;var n=Vc(t,e);if(t.tag!==0&&n===2){var r=oh(t);r!==0&&(e=r,n=bh(t,r))}if(n===1)throw n=Da,Zs(t,0),ns(t,e),mn(t,mt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qs(t,cn,xr),mn(t,mt()),null}function Zf(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(ao=mt()+500,pu&&bs())}}function ai(t){ls!==null&&ls.tag===0&&!(be&6)&&Yi();var e=be;be|=1;var n=On.transition,r=Ue;try{if(On.transition=null,Ue=1,t)return t()}finally{Ue=r,On.transition=n,be=e,!(be&6)&&bs()}}function ep(){_n=$i.current,Qe($i)}function Zs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ES(n)),yt!==null)for(n=yt.return;n!==null;){var r=n;switch(bf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sc();break;case 3:io(),Qe(fn),Qe(Xt),$f();break;case 5:Bf(r);break;case 4:io();break;case 13:Qe(nt);break;case 19:Qe(nt);break;case 10:Lf(r.type._context);break;case 22:case 23:ep()}n=n.return}if(Rt=t,yt=t=vs(t.current,null),Lt=_n=e,Ct=0,Da=null,Xf=yu=oi=0,cn=ca=null,Qs!==null){for(e=0;e<Qs.length;e++)if(n=Qs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qs=null}return t}function j0(t,e){do{var n=yt;try{if(Vf(),Zl.current=Dc,jc){for(var r=rt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jc=!1}if(ii=0,Nt=At=rt=null,aa=!1,Na=0,Yf.current=null,n===null||n.return===null){Ct=1,Da=e,yt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=Lt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=Pg(o);if(w!==null){w.flags&=-257,kg(w,o,c,i,e),w.mode&1&&xg(i,d,e),e=w,u=d;var k=e.updateQueue;if(k===null){var O=new Set;O.add(u),e.updateQueue=O}else k.add(u);break e}else{if(!(e&1)){xg(i,d,e),tp();break e}u=Error(Y(426))}}else if(Ze&&c.mode&1){var F=Pg(o);if(F!==null){!(F.flags&65536)&&(F.flags|=256),kg(F,o,c,i,e),Of(oo(u,c));break e}}i=u=oo(u,c),Ct!==4&&(Ct=2),ca===null?ca=[i]:ca.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var A=m0(i,u,e);Eg(i,A);break e;case 1:c=u;var I=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof I.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ms===null||!ms.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=g0(i,c,e);Eg(i,b);break e}}i=i.return}while(i!==null)}O0(n)}catch(N){e=N,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function D0(){var t=bc.current;return bc.current=Dc,t===null?Dc:t}function tp(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Rt===null||!(oi&268435455)&&!(yu&268435455)||ns(Rt,Lt)}function Vc(t,e){var n=be;be|=2;var r=D0();(Rt!==t||Lt!==e)&&(xr=null,Zs(t,e));do try{WS();break}catch(s){j0(t,s)}while(!0);if(Vf(),be=n,bc.current=r,yt!==null)throw Error(Y(261));return Rt=null,Lt=0,Ct}function WS(){for(;yt!==null;)b0(yt)}function GS(){for(;yt!==null&&!yI();)b0(yt)}function b0(t){var e=V0(t.alternate,t,_n);t.memoizedProps=t.pendingProps,e===null?O0(t):yt=e,Yf.current=null}function O0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=US(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ct=6,yt=null;return}}else if(n=FS(n,e,_n),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);Ct===0&&(Ct=5)}function qs(t,e,n){var r=Ue,s=On.transition;try{On.transition=null,Ue=1,KS(t,e,n,r)}finally{On.transition=s,Ue=r}return null}function KS(t,e,n,r){do Yi();while(ls!==null);if(be&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(PI(t,i),t===Rt&&(yt=Rt=null,Lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,L0(yc,function(){return Yi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=On.transition,On.transition=null;var o=Ue;Ue=1;var c=be;be|=4,Yf.current=null,BS(t,n),k0(n,t),pS(hh),wc=!!dh,hh=dh=null,t.current=n,$S(n),_I(),be=c,Ue=o,On.transition=i}else t.current=n;if(Fl&&(Fl=!1,ls=t,Mc=s),i=t.pendingLanes,i===0&&(ms=null),TI(n.stateNode),mn(t,mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Oc)throw Oc=!1,t=jh,jh=null,t;return Mc&1&&t.tag!==0&&Yi(),i=t.pendingLanes,i&1?t===Dh?ua++:(ua=0,Dh=t):ua=0,bs(),null}function Yi(){if(ls!==null){var t=m_(Mc),e=On.transition,n=Ue;try{if(On.transition=null,Ue=16>t?16:t,ls===null)var r=!1;else{if(t=ls,ls=null,Mc=0,be&6)throw Error(Y(331));var s=be;for(be|=4,le=t.current;le!==null;){var i=le,o=i.child;if(le.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(le=d;le!==null;){var f=le;switch(f.tag){case 0:case 11:case 15:la(8,f,i)}var m=f.child;if(m!==null)m.return=f,le=m;else for(;le!==null;){f=le;var g=f.sibling,w=f.return;if(C0(f),f===d){le=null;break}if(g!==null){g.return=w,le=g;break}le=w}}}var k=i.alternate;if(k!==null){var O=k.child;if(O!==null){k.child=null;do{var F=O.sibling;O.sibling=null,O=F}while(O!==null)}}le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,le=o;else e:for(;le!==null;){if(i=le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:la(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,le=A;break e}le=i.return}}var I=t.current;for(le=I;le!==null;){o=le;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,le=S;else e:for(o=I;le!==null;){if(c=le,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:vu(9,c)}}catch(N){ht(c,c.return,N)}if(c===o){le=null;break e}var b=c.sibling;if(b!==null){b.return=c.return,le=b;break e}le=c.return}}if(be=s,bs(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(cu,t)}catch{}r=!0}return r}finally{Ue=n,On.transition=e}}return!1}function Bg(t,e,n){e=oo(n,e),e=m0(t,e,1),t=ps(t,e,1),e=tn(),t!==null&&(Wa(t,1,e),mn(t,e))}function ht(t,e,n){if(t.tag===3)Bg(t,t,n);else for(;e!==null;){if(e.tag===3){Bg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ms===null||!ms.has(r))){t=oo(n,t),t=g0(e,t,1),e=ps(e,t,1),t=tn(),e!==null&&(Wa(e,1,t),mn(e,t));break}}e=e.return}}function QS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=tn(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Lt&n)===n&&(Ct===4||Ct===3&&(Lt&130023424)===Lt&&500>mt()-Jf?Zs(t,0):Xf|=n),mn(t,e)}function M0(t,e){e===0&&(t.mode&1?(e=kl,kl<<=1,!(kl&130023424)&&(kl=4194304)):e=1);var n=tn();t=Ur(t,e),t!==null&&(Wa(t,e,n),mn(t,n))}function YS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),M0(t,n)}function XS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),M0(t,n)}var V0;V0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,LS(t,e,n);dn=!!(t.flags&131072)}else dn=!1,Ze&&e.flags&1048576&&z_(e,xc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tc(t,e),t=e.pendingProps;var s=no(e,Xt.current);Qi(e,n),s=qf(null,e,r,t,s,n);var i=Wf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(r)?(i=!0,Ac(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Uf(e),s.updater=gu,e.stateNode=s,s._reactInternals=e,Eh(e,r,t,n),e=Sh(null,e,r,!0,i,n)):(e.tag=0,Ze&&i&&Df(e),en(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=ZS(r),t=qn(r,t),s){case 0:e=Ih(null,e,r,t,n);break e;case 1:e=jg(null,e,r,t,n);break e;case 11:e=Ng(null,e,r,t,n);break e;case 14:e=Rg(null,e,r,qn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),Ih(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),jg(t,e,r,s,n);case 3:e:{if(w0(e),t===null)throw Error(Y(387));r=e.pendingProps,i=e.memoizedState,s=i.element,G_(t,e),Nc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=oo(Error(Y(423)),e),e=Dg(t,e,r,n,s);break e}else if(r!==s){s=oo(Error(Y(424)),e),e=Dg(t,e,r,n,s);break e}else for(Tn=fs(e.stateNode.containerInfo.firstChild),Sn=e,Ze=!0,Gn=null,n=q_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ro(),r===s){e=zr(t,e,n);break e}en(t,e,r,n)}e=e.child}return e;case 5:return K_(e),t===null&&yh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,fh(r,s)?o=null:i!==null&&fh(r,i)&&(e.flags|=32),_0(t,e),en(t,e,o,n),e.child;case 6:return t===null&&yh(e),null;case 13:return E0(t,e,n);case 4:return zf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=so(e,null,r,n):en(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),Ng(t,e,r,s,n);case 7:return en(t,e,e.pendingProps,n),e.child;case 8:return en(t,e,e.pendingProps.children,n),e.child;case 12:return en(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,He(Pc,r._currentValue),r._currentValue=o,i!==null)if(Xn(i.value,o)){if(i.children===s.children&&!fn.current){e=zr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Or(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),_h(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),_h(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}en(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Qi(e,n),s=Vn(s),r=r(s),e.flags|=1,en(t,e,r,n),e.child;case 14:return r=e.type,s=qn(r,e.pendingProps),s=qn(r.type,s),Rg(t,e,r,s,n);case 15:return v0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),tc(t,e),e.tag=1,pn(r)?(t=!0,Ac(e)):t=!1,Qi(e,n),p0(e,r,s),Eh(e,r,s,n),Sh(null,e,r,!0,t,n);case 19:return T0(t,e,n);case 22:return y0(t,e,n)}throw Error(Y(156,e.tag))};function L0(t,e){return d_(t,e)}function JS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,e,n,r){return new JS(t,e,n,r)}function np(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZS(t){if(typeof t=="function")return np(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ef)return 11;if(t===Tf)return 14}return 2}function vs(t,e){var n=t.alternate;return n===null?(n=bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")np(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Di:return ei(n.children,s,i,e);case wf:o=8,s|=8;break;case qd:return t=bn(12,n,e,s|2),t.elementType=qd,t.lanes=i,t;case Wd:return t=bn(13,n,e,s),t.elementType=Wd,t.lanes=i,t;case Gd:return t=bn(19,n,e,s),t.elementType=Gd,t.lanes=i,t;case Ky:return _u(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Wy:o=10;break e;case Gy:o=9;break e;case Ef:o=11;break e;case Tf:o=14;break e;case Zr:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=bn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ei(t,e,n,r){return t=bn(7,t,r,e),t.lanes=n,t}function _u(t,e,n,r){return t=bn(22,t,r,e),t.elementType=Ky,t.lanes=n,t.stateNode={isHidden:!1},t}function Pd(t,e,n){return t=bn(6,t,null,e),t.lanes=n,t}function kd(t,e,n){return e=bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function e1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cd(0),this.expirationTimes=cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rp(t,e,n,r,s,i,o,c,u){return t=new e1(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uf(i),t}function t1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function F0(t){if(!t)return Is;t=t._reactInternals;e:{if(gi(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(pn(n))return F_(t,n,e)}return e}function U0(t,e,n,r,s,i,o,c,u){return t=rp(n,r,!0,t,s,i,o,c,u),t.context=F0(null),n=t.current,r=tn(),s=gs(n),i=Or(r,s),i.callback=e??null,ps(n,i,s),t.current.lanes=s,Wa(t,s,r),mn(t,r),t}function wu(t,e,n,r){var s=e.current,i=tn(),o=gs(s);return n=F0(n),e.context===null?e.context=n:e.pendingContext=n,e=Or(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ps(s,e,o),t!==null&&(Yn(t,s,o,i),Jl(t,s,o)),o}function Lc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $g(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sp(t,e){$g(t,e),(t=t.alternate)&&$g(t,e)}function n1(){return null}var z0=typeof reportError=="function"?reportError:function(t){console.error(t)};function ip(t){this._internalRoot=t}Eu.prototype.render=ip.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));wu(t,e,null,null)};Eu.prototype.unmount=ip.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ai(function(){wu(null,t,null,null)}),e[Fr]=null}};function Eu(t){this._internalRoot=t}Eu.prototype.unstable_scheduleHydration=function(t){if(t){var e=y_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ts.length&&e!==0&&e<ts[n].priority;n++);ts.splice(n,0,t),n===0&&w_(t)}};function op(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hg(){}function r1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Lc(o);i.call(d)}}var o=U0(e,r,t,0,null,!1,!1,"",Hg);return t._reactRootContainer=o,t[Fr]=o.current,Aa(t.nodeType===8?t.parentNode:t),ai(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Lc(u);c.call(d)}}var u=rp(t,0,!1,null,null,!1,!1,"",Hg);return t._reactRootContainer=u,t[Fr]=u.current,Aa(t.nodeType===8?t.parentNode:t),ai(function(){wu(e,u,n,r)}),u}function Iu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Lc(o);c.call(u)}}wu(e,o,t,s)}else o=r1(n,e,t,s,r);return Lc(o)}g_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Go(e.pendingLanes);n!==0&&(Af(e,n|1),mn(e,mt()),!(be&6)&&(ao=mt()+500,bs()))}break;case 13:ai(function(){var r=Ur(t,1);if(r!==null){var s=tn();Yn(r,t,1,s)}}),sp(t,1)}};Cf=function(t){if(t.tag===13){var e=Ur(t,134217728);if(e!==null){var n=tn();Yn(e,t,134217728,n)}sp(t,134217728)}};v_=function(t){if(t.tag===13){var e=gs(t),n=Ur(t,e);if(n!==null){var r=tn();Yn(n,t,e,r)}sp(t,e)}};y_=function(){return Ue};__=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};rh=function(t,e,n){switch(e){case"input":if(Yd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=fu(r);if(!s)throw Error(Y(90));Yy(r),Yd(r,s)}}}break;case"textarea":Jy(t,n);break;case"select":e=n.value,e!=null&&qi(t,!!n.multiple,e,!1)}};i_=Zf;o_=ai;var s1={usingClientEntryPoint:!1,Events:[Ka,Vi,fu,r_,s_,Zf]},Ho={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i1={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||n1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{cu=Ul.inject(i1),ar=Ul}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s1;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!op(e))throw Error(Y(200));return t1(t,e,null,n)};Cn.createRoot=function(t,e){if(!op(t))throw Error(Y(299));var n=!1,r="",s=z0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=rp(t,1,!1,null,null,n,!1,r,s),t[Fr]=e.current,Aa(t.nodeType===8?t.parentNode:t),new ip(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=c_(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return ai(t)};Cn.hydrate=function(t,e,n){if(!Tu(e))throw Error(Y(200));return Iu(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!op(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=z0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=U0(e,null,t,1,n??null,s,!1,i,o),t[Fr]=e.current,Aa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Eu(e)};Cn.render=function(t,e,n){if(!Tu(e))throw Error(Y(200));return Iu(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!Tu(t))throw Error(Y(40));return t._reactRootContainer?(ai(function(){Iu(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};Cn.unstable_batchedUpdates=Zf;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tu(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Iu(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function B0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B0)}catch(t){console.error(t)}}B0(),By.exports=Cn;var o1=By.exports,$0,qg=o1;$0=qg.createRoot,qg.hydrateRoot;const a1=()=>{};var Wg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},l1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[f],n[m],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(H0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):l1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new c1;const g=i<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),m!==64){const k=d<<6&192|m;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class c1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u1=function(t){const e=H0(t);return q0.encodeByteArray(e,!0)},Fc=function(t){return u1(t).replace(/\./g,"")},W0=function(t){try{return q0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=()=>d1().__FIREBASE_DEFAULTS__,f1=()=>{if(typeof process>"u"||typeof Wg>"u")return;const t=Wg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},p1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&W0(t[1]);return e&&JSON.parse(e)},Su=()=>{try{return a1()||h1()||f1()||p1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},G0=t=>{var e,n;return(n=(e=Su())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},K0=t=>{const e=G0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Q0=()=>{var t;return(t=Su())===null||t===void 0?void 0:t.config},Y0=t=>{var e;return(e=Su())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ap(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fc(JSON.stringify(n)),Fc(JSON.stringify(o)),""].join(".")}const da={};function v1(){const t={prod:[],emulator:[]};for(const e of Object.keys(da))da[e]?t.emulator.push(e):t.prod.push(e);return t}function y1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Gg=!1;function lp(t,e){if(typeof window>"u"||typeof document>"u"||!vi(window.location.host)||da[t]===e||da[t]||Gg)return;da[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=v1().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Gg=!0,o()},g}function f(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=y1(r),w=n("text"),k=document.getElementById(w)||document.createElement("span"),O=n("learnmore"),F=document.getElementById(O)||document.createElement("a"),A=n("preprendIcon"),I=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;c(S),f(F,O);const b=d();u(I,A),S.append(I,k,F,b),document.body.appendChild(S)}i?(k.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function w1(){var t;const e=(t=Su())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function I1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S1(){const t=Jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A1(){return!w1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C1(){try{return typeof indexedDB=="object"}catch{return!1}}function x1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="FirebaseError";class vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=P1,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ya.prototype.create)}}class Ya{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?k1(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new vr(s,c,r)}}function k1(t,e){return t.replace(N1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const N1=/\{\$([^}]+)}/g;function R1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function li(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Kg(i)&&Kg(o)){if(!li(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Kg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Yo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function j1(t,e){const n=new D1(t,e);return n.subscribe.bind(n)}class D1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");b1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Nd),s.error===void 0&&(s.error=Nd),s.complete===void 0&&(s.complete=Nd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class Ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new m1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V1(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:M1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M1(t){return t===Ws?void 0:t}function V1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new O1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const F1={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},U1=Ne.INFO,z1={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},B1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=z1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cp{constructor(e){this.name=e,this._logLevel=U1,this._logHandler=B1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const $1=(t,e)=>e.some(n=>t instanceof n);let Qg,Yg;function H1(){return Qg||(Qg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function q1(){return Yg||(Yg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X0=new WeakMap,Mh=new WeakMap,J0=new WeakMap,Rd=new WeakMap,up=new WeakMap;function W1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ys(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&X0.set(n,t)}).catch(()=>{}),up.set(e,t),e}function G1(t){if(Mh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Mh.set(t,e)}let Vh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||J0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ys(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K1(t){Vh=t(Vh)}function Q1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jd(this),e,...n);return J0.set(r,e.sort?e.sort():[e]),ys(r)}:q1().includes(t)?function(...e){return t.apply(jd(this),e),ys(X0.get(this))}:function(...e){return ys(t.apply(jd(this),e))}}function Y1(t){return typeof t=="function"?Q1(t):(t instanceof IDBTransaction&&G1(t),$1(t,H1())?new Proxy(t,Vh):t)}function ys(t){if(t instanceof IDBRequest)return W1(t);if(Rd.has(t))return Rd.get(t);const e=Y1(t);return e!==t&&(Rd.set(t,e),up.set(e,t)),e}const jd=t=>up.get(t);function X1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=ys(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ys(o.result),u.oldVersion,u.newVersion,ys(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const J1=["get","getKey","getAll","getAllKeys","count"],Z1=["put","add","delete","clear"],Dd=new Map;function Xg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Z1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||J1.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Dd.set(e,i),i}K1(t=>({...t,get:(e,n,r)=>Xg(e,n)||t.get(e,n,r),has:(e,n)=>!!Xg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lh="@firebase/app",Jg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new cp("@firebase/app"),nA="@firebase/app-compat",rA="@firebase/analytics-compat",sA="@firebase/analytics",iA="@firebase/app-check-compat",oA="@firebase/app-check",aA="@firebase/auth",lA="@firebase/auth-compat",cA="@firebase/database",uA="@firebase/data-connect",dA="@firebase/database-compat",hA="@firebase/functions",fA="@firebase/functions-compat",pA="@firebase/installations",mA="@firebase/installations-compat",gA="@firebase/messaging",vA="@firebase/messaging-compat",yA="@firebase/performance",_A="@firebase/performance-compat",wA="@firebase/remote-config",EA="@firebase/remote-config-compat",TA="@firebase/storage",IA="@firebase/storage-compat",SA="@firebase/firestore",AA="@firebase/ai",CA="@firebase/firestore-compat",xA="firebase",PA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="[DEFAULT]",kA={[Lh]:"fire-core",[nA]:"fire-core-compat",[sA]:"fire-analytics",[rA]:"fire-analytics-compat",[oA]:"fire-app-check",[iA]:"fire-app-check-compat",[aA]:"fire-auth",[lA]:"fire-auth-compat",[cA]:"fire-rtdb",[uA]:"fire-data-connect",[dA]:"fire-rtdb-compat",[hA]:"fire-fn",[fA]:"fire-fn-compat",[pA]:"fire-iid",[mA]:"fire-iid-compat",[gA]:"fire-fcm",[vA]:"fire-fcm-compat",[yA]:"fire-perf",[_A]:"fire-perf-compat",[wA]:"fire-rc",[EA]:"fire-rc-compat",[TA]:"fire-gcs",[IA]:"fire-gcs-compat",[SA]:"fire-fst",[CA]:"fire-fst-compat",[AA]:"fire-vertex","fire-js":"fire-js",[xA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new Map,NA=new Map,Uh=new Map;function Zg(t,e){try{t.container.addComponent(e)}catch(n){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ci(t){const e=t.name;if(Uh.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;Uh.set(e,t);for(const n of Uc.values())Zg(n,t);for(const n of NA.values())Zg(n,t);return!0}function Au(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function En(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new Ya("app","Firebase",RA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=PA;function zh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Fh,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw _s.create("bad-app-name",{appName:String(s)});if(n||(n=Q0()),!n)throw _s.create("no-options");const i=Uc.get(s);if(i){if(li(n,i.options)&&li(r,i.config))return i;throw _s.create("duplicate-app",{appName:s})}const o=new L1(s);for(const u of Uh.values())o.addComponent(u);const c=new jA(n,r,o);return Uc.set(s,c),c}function dp(t=Fh){const e=Uc.get(t);if(!e&&t===Fh&&Q0())return zh();if(!e)throw _s.create("no-app",{appName:t});return e}function cr(t,e,n){var r;let s=(r=kA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(c.join(" "));return}ci(new Ss(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="firebase-heartbeat-database",bA=1,ba="firebase-heartbeat-store";let bd=null;function Z0(){return bd||(bd=X1(DA,bA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw _s.create("idb-open",{originalErrorMessage:t.message})})),bd}async function OA(t){try{const n=(await Z0()).transaction(ba),r=await n.objectStore(ba).get(ew(t));return await n.done,r}catch(e){if(e instanceof vr)Br.warn(e.message);else{const n=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(n.message)}}}async function ev(t,e){try{const r=(await Z0()).transaction(ba,"readwrite");await r.objectStore(ba).put(e,ew(t)),await r.done}catch(n){if(n instanceof vr)Br.warn(n.message);else{const r=_s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Br.warn(r.message)}}}function ew(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=1024,VA=30;class LA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>VA){const o=zA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Br.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tv(),{heartbeatsToSend:r,unsentEntries:s}=FA(this._heartbeatsCache.heartbeats),i=Fc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Br.warn(n),""}}}function tv(){return new Date().toISOString().substring(0,10)}function FA(t,e=MA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),nv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),nv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class UA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return C1()?x1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nv(t){return Fc(JSON.stringify({version:2,heartbeats:t})).length}function zA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){ci(new Ss("platform-logger",e=>new eA(e),"PRIVATE")),ci(new Ss("heartbeat",e=>new LA(e),"PRIVATE")),cr(Lh,Jg,t),cr(Lh,Jg,"esm2017"),cr("fire-js","")}BA("");var $A="firebase",HA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr($A,HA,"app");var rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ws,tw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function T(){}T.prototype=y.prototype,v.D=y.prototype,v.prototype=new T,v.prototype.constructor=v,v.C=function(C,R,j){for(var x=Array(arguments.length-2),at=2;at<arguments.length;at++)x[at-2]=arguments[at];return y.prototype[R].apply(C,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,T){T||(T=0);var C=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)C[R]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(R=0;16>R;++R)C[R]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=v.g[0],T=v.g[1],R=v.g[2];var j=v.g[3],x=y+(j^T&(R^j))+C[0]+3614090360&4294967295;y=T+(x<<7&4294967295|x>>>25),x=j+(R^y&(T^R))+C[1]+3905402710&4294967295,j=y+(x<<12&4294967295|x>>>20),x=R+(T^j&(y^T))+C[2]+606105819&4294967295,R=j+(x<<17&4294967295|x>>>15),x=T+(y^R&(j^y))+C[3]+3250441966&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(j^T&(R^j))+C[4]+4118548399&4294967295,y=T+(x<<7&4294967295|x>>>25),x=j+(R^y&(T^R))+C[5]+1200080426&4294967295,j=y+(x<<12&4294967295|x>>>20),x=R+(T^j&(y^T))+C[6]+2821735955&4294967295,R=j+(x<<17&4294967295|x>>>15),x=T+(y^R&(j^y))+C[7]+4249261313&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(j^T&(R^j))+C[8]+1770035416&4294967295,y=T+(x<<7&4294967295|x>>>25),x=j+(R^y&(T^R))+C[9]+2336552879&4294967295,j=y+(x<<12&4294967295|x>>>20),x=R+(T^j&(y^T))+C[10]+4294925233&4294967295,R=j+(x<<17&4294967295|x>>>15),x=T+(y^R&(j^y))+C[11]+2304563134&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(j^T&(R^j))+C[12]+1804603682&4294967295,y=T+(x<<7&4294967295|x>>>25),x=j+(R^y&(T^R))+C[13]+4254626195&4294967295,j=y+(x<<12&4294967295|x>>>20),x=R+(T^j&(y^T))+C[14]+2792965006&4294967295,R=j+(x<<17&4294967295|x>>>15),x=T+(y^R&(j^y))+C[15]+1236535329&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(R^j&(T^R))+C[1]+4129170786&4294967295,y=T+(x<<5&4294967295|x>>>27),x=j+(T^R&(y^T))+C[6]+3225465664&4294967295,j=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(j^y))+C[11]+643717713&4294967295,R=j+(x<<14&4294967295|x>>>18),x=T+(j^y&(R^j))+C[0]+3921069994&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(R^j&(T^R))+C[5]+3593408605&4294967295,y=T+(x<<5&4294967295|x>>>27),x=j+(T^R&(y^T))+C[10]+38016083&4294967295,j=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(j^y))+C[15]+3634488961&4294967295,R=j+(x<<14&4294967295|x>>>18),x=T+(j^y&(R^j))+C[4]+3889429448&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(R^j&(T^R))+C[9]+568446438&4294967295,y=T+(x<<5&4294967295|x>>>27),x=j+(T^R&(y^T))+C[14]+3275163606&4294967295,j=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(j^y))+C[3]+4107603335&4294967295,R=j+(x<<14&4294967295|x>>>18),x=T+(j^y&(R^j))+C[8]+1163531501&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(R^j&(T^R))+C[13]+2850285829&4294967295,y=T+(x<<5&4294967295|x>>>27),x=j+(T^R&(y^T))+C[2]+4243563512&4294967295,j=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(j^y))+C[7]+1735328473&4294967295,R=j+(x<<14&4294967295|x>>>18),x=T+(j^y&(R^j))+C[12]+2368359562&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(T^R^j)+C[5]+4294588738&4294967295,y=T+(x<<4&4294967295|x>>>28),x=j+(y^T^R)+C[8]+2272392833&4294967295,j=y+(x<<11&4294967295|x>>>21),x=R+(j^y^T)+C[11]+1839030562&4294967295,R=j+(x<<16&4294967295|x>>>16),x=T+(R^j^y)+C[14]+4259657740&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(T^R^j)+C[1]+2763975236&4294967295,y=T+(x<<4&4294967295|x>>>28),x=j+(y^T^R)+C[4]+1272893353&4294967295,j=y+(x<<11&4294967295|x>>>21),x=R+(j^y^T)+C[7]+4139469664&4294967295,R=j+(x<<16&4294967295|x>>>16),x=T+(R^j^y)+C[10]+3200236656&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(T^R^j)+C[13]+681279174&4294967295,y=T+(x<<4&4294967295|x>>>28),x=j+(y^T^R)+C[0]+3936430074&4294967295,j=y+(x<<11&4294967295|x>>>21),x=R+(j^y^T)+C[3]+3572445317&4294967295,R=j+(x<<16&4294967295|x>>>16),x=T+(R^j^y)+C[6]+76029189&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(T^R^j)+C[9]+3654602809&4294967295,y=T+(x<<4&4294967295|x>>>28),x=j+(y^T^R)+C[12]+3873151461&4294967295,j=y+(x<<11&4294967295|x>>>21),x=R+(j^y^T)+C[15]+530742520&4294967295,R=j+(x<<16&4294967295|x>>>16),x=T+(R^j^y)+C[2]+3299628645&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(R^(T|~j))+C[0]+4096336452&4294967295,y=T+(x<<6&4294967295|x>>>26),x=j+(T^(y|~R))+C[7]+1126891415&4294967295,j=y+(x<<10&4294967295|x>>>22),x=R+(y^(j|~T))+C[14]+2878612391&4294967295,R=j+(x<<15&4294967295|x>>>17),x=T+(j^(R|~y))+C[5]+4237533241&4294967295,T=R+(x<<21&4294967295|x>>>11),x=y+(R^(T|~j))+C[12]+1700485571&4294967295,y=T+(x<<6&4294967295|x>>>26),x=j+(T^(y|~R))+C[3]+2399980690&4294967295,j=y+(x<<10&4294967295|x>>>22),x=R+(y^(j|~T))+C[10]+4293915773&4294967295,R=j+(x<<15&4294967295|x>>>17),x=T+(j^(R|~y))+C[1]+2240044497&4294967295,T=R+(x<<21&4294967295|x>>>11),x=y+(R^(T|~j))+C[8]+1873313359&4294967295,y=T+(x<<6&4294967295|x>>>26),x=j+(T^(y|~R))+C[15]+4264355552&4294967295,j=y+(x<<10&4294967295|x>>>22),x=R+(y^(j|~T))+C[6]+2734768916&4294967295,R=j+(x<<15&4294967295|x>>>17),x=T+(j^(R|~y))+C[13]+1309151649&4294967295,T=R+(x<<21&4294967295|x>>>11),x=y+(R^(T|~j))+C[4]+4149444226&4294967295,y=T+(x<<6&4294967295|x>>>26),x=j+(T^(y|~R))+C[11]+3174756917&4294967295,j=y+(x<<10&4294967295|x>>>22),x=R+(y^(j|~T))+C[2]+718787259&4294967295,R=j+(x<<15&4294967295|x>>>17),x=T+(j^(R|~y))+C[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(R+(x<<21&4294967295|x>>>11))&4294967295,v.g[2]=v.g[2]+R&4294967295,v.g[3]=v.g[3]+j&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var T=y-this.blockSize,C=this.B,R=this.h,j=0;j<y;){if(R==0)for(;j<=T;)s(this,v,j),j+=this.blockSize;if(typeof v=="string"){for(;j<y;)if(C[R++]=v.charCodeAt(j++),R==this.blockSize){s(this,C),R=0;break}}else for(;j<y;)if(C[R++]=v[j++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var T=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=T&255,T/=256;for(this.u(v),v=Array(16),y=T=0;4>y;++y)for(var C=0;32>C;C+=8)v[T++]=this.g[y]>>>C&255;return v};function i(v,y){var T=c;return Object.prototype.hasOwnProperty.call(T,v)?T[v]:T[v]=y(v)}function o(v,y){this.h=y;for(var T=[],C=!0,R=v.length-1;0<=R;R--){var j=v[R]|0;C&&j==y||(T[R]=j,C=!1)}this.g=T}var c={};function u(v){return-128<=v&&128>v?i(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return m;if(0>v)return F(d(-v));for(var y=[],T=1,C=0;v>=T;C++)y[C]=v/T|0,T*=4294967296;return new o(y,0)}function f(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return F(f(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(y,8)),C=m,R=0;R<v.length;R+=8){var j=Math.min(8,v.length-R),x=parseInt(v.substring(R,R+j),y);8>j?(j=d(Math.pow(y,j)),C=C.j(j).add(d(x))):(C=C.j(T),C=C.add(d(x)))}return C}var m=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(O(this))return-F(this).m();for(var v=0,y=1,T=0;T<this.g.length;T++){var C=this.i(T);v+=(0<=C?C:4294967296+C)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(k(this))return"0";if(O(this))return"-"+F(this).toString(v);for(var y=d(Math.pow(v,6)),T=this,C="";;){var R=b(T,y).g;T=A(T,R.j(y));var j=((0<T.g.length?T.g[0]:T.h)>>>0).toString(v);if(T=R,k(T))return j+C;for(;6>j.length;)j="0"+j;C=j+C}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function k(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function O(v){return v.h==-1}t.l=function(v){return v=A(this,v),O(v)?-1:k(v)?0:1};function F(v){for(var y=v.g.length,T=[],C=0;C<y;C++)T[C]=~v.g[C];return new o(T,~v.h).add(g)}t.abs=function(){return O(this)?F(this):this},t.add=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0,R=0;R<=y;R++){var j=C+(this.i(R)&65535)+(v.i(R)&65535),x=(j>>>16)+(this.i(R)>>>16)+(v.i(R)>>>16);C=x>>>16,j&=65535,x&=65535,T[R]=x<<16|j}return new o(T,T[T.length-1]&-2147483648?-1:0)};function A(v,y){return v.add(F(y))}t.j=function(v){if(k(this)||k(v))return m;if(O(this))return O(v)?F(this).j(F(v)):F(F(this).j(v));if(O(v))return F(this.j(F(v)));if(0>this.l(w)&&0>v.l(w))return d(this.m()*v.m());for(var y=this.g.length+v.g.length,T=[],C=0;C<2*y;C++)T[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<v.g.length;R++){var j=this.i(C)>>>16,x=this.i(C)&65535,at=v.i(R)>>>16,Et=v.i(R)&65535;T[2*C+2*R]+=x*Et,I(T,2*C+2*R),T[2*C+2*R+1]+=j*Et,I(T,2*C+2*R+1),T[2*C+2*R+1]+=x*at,I(T,2*C+2*R+1),T[2*C+2*R+2]+=j*at,I(T,2*C+2*R+2)}for(C=0;C<y;C++)T[C]=T[2*C+1]<<16|T[2*C];for(C=y;C<2*y;C++)T[C]=0;return new o(T,0)};function I(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function S(v,y){this.g=v,this.h=y}function b(v,y){if(k(y))throw Error("division by zero");if(k(v))return new S(m,m);if(O(v))return y=b(F(v),y),new S(F(y.g),F(y.h));if(O(y))return y=b(v,F(y)),new S(F(y.g),y.h);if(30<v.g.length){if(O(v)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var T=g,C=y;0>=C.l(v);)T=N(T),C=N(C);var R=L(T,1),j=L(C,1);for(C=L(C,2),T=L(T,2);!k(C);){var x=j.add(C);0>=x.l(v)&&(R=R.add(T),j=x),C=L(C,1),T=L(T,1)}return y=A(v,R.j(y)),new S(R,y)}for(R=m;0<=v.l(y);){for(T=Math.max(1,Math.floor(v.m()/y.m())),C=Math.ceil(Math.log(T)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),j=d(T),x=j.j(y);O(x)||0<x.l(v);)T-=C,j=d(T),x=j.j(y);k(j)&&(j=g),R=R.add(j),v=A(v,x)}return new S(R,v)}t.A=function(v){return b(this,v).h},t.and=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0;C<y;C++)T[C]=this.i(C)&v.i(C);return new o(T,this.h&v.h)},t.or=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0;C<y;C++)T[C]=this.i(C)|v.i(C);return new o(T,this.h|v.h)},t.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0;C<y;C++)T[C]=this.i(C)^v.i(C);return new o(T,this.h^v.h)};function N(v){for(var y=v.g.length+1,T=[],C=0;C<y;C++)T[C]=v.i(C)<<1|v.i(C-1)>>>31;return new o(T,v.h)}function L(v,y){var T=y>>5;y%=32;for(var C=v.g.length-T,R=[],j=0;j<C;j++)R[j]=0<y?v.i(j+T)>>>y|v.i(j+T+1)<<32-y:v.i(j+T);return new o(R,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ws=o}).apply(typeof rv<"u"?rv:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nw,Xo,rw,ic,Bh,sw,iw,ow;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var V=a[_];if(!(V in p))break e;p=p[V]}a=a[a.length-1],_=p[a],h=h(_),h!=_&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,_=!1,V={next:function(){if(!_&&p<a.length){var U=p++;return{value:h(U,a[U]),done:!1}}return _=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,_),a.apply(h,V)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function w(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function k(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(_,V,U){for(var Z=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)Z[ze-2]=arguments[ze];return h.prototype[V].apply(_,Z)}}function O(a){const h=a.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=a[_];return p}return[]}function F(a,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(u(_)){const V=a.length||0,U=_.length||0;a.length=V+U;for(let Z=0;Z<U;Z++)a[V+Z]=_[Z]}else a.push(_)}}class A{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function I(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var N=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function L(a,h,p){for(const _ in a)h.call(p,a[_],_,a)}function v(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function y(a){const h={};for(const p in a)h[p]=a[p];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(a,h){let p,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(p in _)a[p]=_[p];for(let U=0;U<T.length;U++)p=T[U],Object.prototype.hasOwnProperty.call(_,p)&&(a[p]=_[p])}}function R(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function j(a){c.setTimeout(()=>{throw a},0)}function x(){var a=M;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class at{constructor(){this.h=this.g=null}add(h,p){const _=Et.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var Et=new A(()=>new et,a=>a.reset());class et{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let q,B=!1,M=new at,z=()=>{const a=c.Promise.resolve(void 0);q=()=>{a.then($)}};var $=()=>{for(var a;a=x();){try{a.h.call(a.g)}catch(p){j(p)}var h=Et;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}B=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return a}();function Fe(a,h){if(ae.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(N){e:{try{b(h.nodeName);var V=!0;break e}catch{}V=!1}V||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Se[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Fe.aa.h.call(this)}}k(Fe,ae);var Se={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ye="closure_listenable_"+(1e6*Math.random()|0),Fn=0;function Pn(a,h,p,_,V){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=V,this.key=++Fn,this.da=this.fa=!1}function zt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function sn(a){this.src=a,this.g={},this.h=0}sn.prototype.add=function(a,h,p,_,V){var U=a.toString();a=this.g[U],a||(a=this.g[U]=[],this.h++);var Z=er(a,h,_,V);return-1<Z?(h=a[Z],p||(h.fa=!1)):(h=new Pn(h,this.src,U,!!_,V),h.fa=p,a.push(h)),h};function Xe(a,h){var p=h.type;if(p in a.g){var _=a.g[p],V=Array.prototype.indexOf.call(_,h,void 0),U;(U=0<=V)&&Array.prototype.splice.call(_,V,1),U&&(zt(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function er(a,h,p,_){for(var V=0;V<a.length;++V){var U=a[V];if(!U.da&&U.listener==h&&U.capture==!!p&&U.ha==_)return V}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),Ve={};function lt(a,h,p,_,V){if(Array.isArray(h)){for(var U=0;U<h.length;U++)lt(a,h[U],p,_,V);return null}return p=E(p),a&&a[Ye]?a.K(h,p,d(_)?!!_.capture:!1,V):yr(a,h,p,!1,_,V)}function yr(a,h,p,_,V,U){if(!h)throw Error("Invalid event type");var Z=d(V)?!!V.capture:!!V,ze=Un(a);if(ze||(a[ke]=ze=new sn(a)),p=ze.add(h,p,_,Z,U),p.proxy)return p;if(_=Kr(),p.proxy=_,_.src=a,_.listener=p,a.addEventListener)Ee||(V=Z),V===void 0&&(V=!1),a.addEventListener(h.toString(),_,V);else if(a.attachEvent)a.attachEvent(wr(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Kr(){function a(p){return h.call(a.src,a.listener,p)}const h=jt;return a}function _r(a,h,p,_,V){if(Array.isArray(h))for(var U=0;U<h.length;U++)_r(a,h[U],p,_,V);else _=d(_)?!!_.capture:!!_,p=E(p),a&&a[Ye]?(a=a.i,h=String(h).toString(),h in a.g&&(U=a.g[h],p=er(U,p,_,V),-1<p&&(zt(U[p]),Array.prototype.splice.call(U,p,1),U.length==0&&(delete a.g[h],a.h--)))):a&&(a=Un(a))&&(h=a.g[h.toString()],a=-1,h&&(a=er(h,p,_,V)),(p=-1<a?h[a]:null)&&Be(p))}function Be(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Ye])Xe(h.i,a);else{var p=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(p,_,a.capture):h.detachEvent?h.detachEvent(wr(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=Un(h))?(Xe(p,a),p.h==0&&(p.src=null,h[ke]=null)):zt(a)}}}function wr(a){return a in Ve?Ve[a]:Ve[a]="on"+a}function jt(a,h){if(a.da)a=!0;else{h=new Fe(h,this);var p=a.listener,_=a.ha||a.src;a.fa&&Be(a),a=p.call(_,h)}return a}function Un(a){return a=a[ke],a instanceof sn?a:null}var tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function E(a){return typeof a=="function"?a:(a[tr]||(a[tr]=function(h){return a.handleEvent(h)}),a[tr])}function D(){X.call(this),this.i=new sn(this),this.M=this,this.F=null}k(D,X),D.prototype[Ye]=!0,D.prototype.removeEventListener=function(a,h,p,_){_r(this,a,h,p,_)};function P(a,h){var p,_=a.F;if(_)for(p=[];_;_=_.F)p.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new ae(h,a);else if(h instanceof ae)h.target=h.target||a;else{var V=h;h=new ae(_,a),C(h,V)}if(V=!0,p)for(var U=p.length-1;0<=U;U--){var Z=h.g=p[U];V=J(Z,_,!0,h)&&V}if(Z=h.g=a,V=J(Z,_,!0,h)&&V,V=J(Z,_,!1,h)&&V,p)for(U=0;U<p.length;U++)Z=h.g=p[U],V=J(Z,_,!1,h)&&V}D.prototype.N=function(){if(D.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],_=0;_<p.length;_++)zt(p[_]);delete a.g[h],a.h--}}this.F=null},D.prototype.K=function(a,h,p,_){return this.i.add(String(a),h,!1,p,_)},D.prototype.L=function(a,h,p,_){return this.i.add(String(a),h,!0,p,_)};function J(a,h,p,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var V=!0,U=0;U<h.length;++U){var Z=h[U];if(Z&&!Z.da&&Z.capture==p){var ze=Z.listener,bt=Z.ha||Z.src;Z.fa&&Xe(a.i,Z),V=ze.call(bt,_)!==!1&&V}}return V&&!_.defaultPrevented}function te(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function me(a){a.g=te(()=>{a.g=null,a.i&&(a.i=!1,me(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ce extends X{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:me(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ie(a){X.call(this),this.h=a,this.g={}}k(Ie,X);var Ae=[];function ve(a){L(a.g,function(h,p){this.g.hasOwnProperty(p)&&Be(h)},a),a.g={}}Ie.prototype.N=function(){Ie.aa.N.call(this),ve(this)},Ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Je=c.JSON.stringify,Er=c.JSON.parse,xe=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Pt(){}Pt.prototype.h=null;function Zt(a){return a.h||(a.h=a.i())}function ne(){}var G={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Q(){ae.call(this,"d")}k(Q,ae);function oe(){ae.call(this,"c")}k(oe,ae);var pe={},ee=null;function ge(){return ee=ee||new D}pe.La="serverreachability";function se(a){ae.call(this,pe.La,a)}k(se,ae);function he(a){const h=ge();P(h,new se(h))}pe.STAT_EVENT="statevent";function ue(a,h){ae.call(this,pe.STAT_EVENT,a),this.stat=h}k(ue,ae);function Oe(a){const h=ge();P(h,new ue(h,a))}pe.Ma="timingevent";function tt(a,h){ae.call(this,pe.Ma,a),this.size=h}k(tt,ae);function ct(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function Tt(){this.g=!0}Tt.prototype.xa=function(){this.g=!1};function kn(a,h,p,_,V,U){a.info(function(){if(a.g)if(U)for(var Z="",ze=U.split("&"),bt=0;bt<ze.length;bt++){var Me=ze[bt].split("=");if(1<Me.length){var $t=Me[0];Me=Me[1];var Ht=$t.split("_");Z=2<=Ht.length&&Ht[1]=="type"?Z+($t+"="+Me+"&"):Z+($t+"=redacted&")}}else Z=null;else Z=U;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+h+`
`+p+`
`+Z})}function Dt(a,h,p,_,V,U,Z){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+h+`
`+p+`
`+U+" "+Z})}function It(a,h,p,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+St(a,p)+(_?" "+_:"")})}function gt(a,h){a.info(function(){return"TIMEOUT: "+h})}Tt.prototype.info=function(){};function St(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var _=p[a];if(!(2>_.length)){var V=_[1];if(Array.isArray(V)&&!(1>V.length)){var U=V[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Z=1;Z<V.length;Z++)V[Z]=""}}}}return Je(p)}catch{return h}}var on={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zn;function vn(){}k(vn,Pt),vn.prototype.g=function(){return new XMLHttpRequest},vn.prototype.i=function(){return{}},zn=new vn;function an(a,h,p,_){this.j=a,this.i=h,this.l=p,this.R=_||1,this.U=new Ie(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bn}function Bn(){this.i=null,this.g="",this.h=!1}var So={},Fs={};function Ao(a,h,p){a.L=1,a.v=ml(Ar(h)),a.m=p,a.P=!0,Co(a,null)}function Co(a,h){a.F=Date.now(),Us(a),a.A=Ar(a.v);var p=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),mm(p.i,"t",_),a.C=0,p=a.j.J,a.h=new Bn,a.g=Dm(a.j,p?h:null,!a.m),0<a.O&&(a.M=new ce(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,_=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(Ae[0]=V.toString()),V=Ae);for(var U=0;U<V.length;U++){var Z=lt(p,V[U],_||h.handleEvent,!1,h.h||h);if(!Z)break;h.g[Z.key]=Z}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),he(),kn(a.i,a.u,a.A,a.l,a.R,a.m)}an.prototype.ca=function(a){a=a.target;const h=this.M;h&&Cr(a)==3?h.j():this.Y(a)},an.prototype.Y=function(a){try{if(a==this.g)e:{const Ht=Cr(this.g);var h=this.g.Ba();const Ai=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Tm(this.g)))){this.J||Ht!=4||h==7||(h==8||0>=Ai?he(3):he(2)),Ti(this);var p=this.g.Z();this.X=p;t:if(xo(this)){var _=Tm(this.g);a="";var V=_.length,U=Cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),Ir(this);var Z="";break t}this.h.i=new c.TextDecoder}for(h=0;h<V;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(U&&h==V-1)});_.length=0,this.h.g+=a,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=p==200,Dt(this.i,this.u,this.A,this.l,this.R,Ht,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,bt=this.g;if((ze=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(ze)){var Me=ze;break t}}Me=null}if(p=Me)It(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Po(this,p);else{this.o=!1,this.s=3,Oe(12),Sr(this),Ir(this);break e}}if(this.P){p=!0;let $n;for(;!this.J&&this.C<Z.length;)if($n=Yu(this,Z),$n==Fs){Ht==4&&(this.s=4,Oe(14),p=!1),It(this.i,this.l,null,"[Incomplete Response]");break}else if($n==So){this.s=4,Oe(15),It(this.i,this.l,Z,"[Invalid Chunk]"),p=!1;break}else It(this.i,this.l,$n,null),Po(this,$n);if(xo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||Z.length!=0||this.h.h||(this.s=1,Oe(16),p=!1),this.o=this.o&&p,!p)It(this.i,this.l,Z,"[Invalid Chunked Response]"),Sr(this),Ir(this);else if(0<Z.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),nd($t),$t.M=!0,Oe(11))}}else It(this.i,this.l,Z,null),Po(this,Z);Ht==4&&Sr(this),this.o&&!this.J&&(Ht==4?km(this.j,this):(this.o=!1,Us(this)))}else RT(this.g),p==400&&0<Z.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),Sr(this),Ir(this)}}}catch{}finally{}};function xo(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Yu(a,h){var p=a.C,_=h.indexOf(`
`,p);return _==-1?Fs:(p=Number(h.substring(p,_)),isNaN(p)?So:(_+=1,_+p>h.length?Fs:(h=h.slice(_,_+p),a.C=_+p,h)))}an.prototype.cancel=function(){this.J=!0,Sr(this)};function Us(a){a.S=Date.now()+a.I,Xu(a,a.I)}function Xu(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ct(g(a.ba,a),h)}function Ti(a){a.B&&(c.clearTimeout(a.B),a.B=null)}an.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(gt(this.i,this.A),this.L!=2&&(he(),Oe(17)),Sr(this),this.s=2,Ir(this)):Xu(this,this.S-a)};function Ir(a){a.j.G==0||a.J||km(a.j,a)}function Sr(a){Ti(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,ve(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Po(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||qe(p.h,a))){if(!a.K&&qe(p.h,a)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)El(p),_l(p);else break e;td(p),Oe(18)}}else p.za=V[1],0<p.za-p.T&&37500>V[2]&&p.F&&p.v==0&&!p.C&&(p.C=ct(g(p.Za,p),6e3));if(1>=dl(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else $s(p,11)}else if((a.K||p.g==a)&&El(p),!I(h))for(V=p.Da.g.parse(h),h=0;h<V.length;h++){let Me=V[h];if(p.T=Me[0],Me=Me[1],p.G==2)if(Me[0]=="c"){p.K=Me[1],p.ia=Me[2];const $t=Me[3];$t!=null&&(p.la=$t,p.j.info("VER="+p.la));const Ht=Me[4];Ht!=null&&(p.Aa=Ht,p.j.info("SVER="+p.Aa));const Ai=Me[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(_=1.5*Ai,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const $n=a.g;if($n){const Il=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var U=_.h;U.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Bt(U,U.h),U.h=null))}if(_.D){const rd=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;rd&&(_.ya=rd,We(_.I,_.D,rd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var Z=a;if(_.qa=jm(_,_.J?_.ia:null,_.W),Z.K){zs(_.h,Z);var ze=Z,bt=_.L;bt&&(ze.I=bt),ze.B&&(Ti(ze),Us(ze)),_.g=Z}else xm(_);0<p.i.length&&wl(p)}else Me[0]!="stop"&&Me[0]!="close"||$s(p,7);else p.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?$s(p,7):ed(p):Me[0]!="noop"&&p.l&&p.l.ta(Me),p.v=0)}}he(4)}catch{}}var Ju=class{constructor(a,h){this.g=a,this.map=h}};function cl(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ul(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function dl(a){return a.h?1:a.g?a.g.size:0}function qe(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Bt(a,h){a.g?a.g.add(h):a.h=h}function zs(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}cl.prototype.cancel=function(){if(this.i=ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ko(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return O(a.i)}function hl(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,_=0;_<p;_++)h.push(a[_]);return h}h=[],p=0;for(_ in a)h[p++]=a[_];return h}function vT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const _ in a)h[p++]=_;return h}}}function cm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=vT(a),_=hl(a),V=_.length,U=0;U<V;U++)h.call(void 0,_[U],p&&p[U],a)}var um=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yT(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var _=a[p].indexOf("="),V=null;if(0<=_){var U=a[p].substring(0,_);V=a[p].substring(_+1)}else U=a[p];h(U,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Bs(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Bs){this.h=a.h,fl(this,a.j),this.o=a.o,this.g=a.g,pl(this,a.s),this.l=a.l;var h=a.i,p=new jo;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),dm(this,p),this.m=a.m}else a&&(h=String(a).match(um))?(this.h=!1,fl(this,h[1]||"",!0),this.o=No(h[2]||""),this.g=No(h[3]||"",!0),pl(this,h[4]),this.l=No(h[5]||"",!0),dm(this,h[6]||"",!0),this.m=No(h[7]||"")):(this.h=!1,this.i=new jo(null,this.h))}Bs.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Ro(h,hm,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Ro(h,hm,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Ro(p,p.charAt(0)=="/"?ET:wT,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Ro(p,IT)),a.join("")};function Ar(a){return new Bs(a)}function fl(a,h,p){a.j=p?No(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function pl(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function dm(a,h,p){h instanceof jo?(a.i=h,ST(a.i,a.h)):(p||(h=Ro(h,TT)),a.i=new jo(h,a.h))}function We(a,h,p){a.i.set(h,p)}function ml(a){return We(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function No(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ro(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,_T),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function _T(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var hm=/[#\/\?@]/g,wT=/[#\?:]/g,ET=/[#\?]/g,TT=/[#\?@]/g,IT=/#/g;function jo(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Qr(a){a.g||(a.g=new Map,a.h=0,a.i&&yT(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=jo.prototype,t.add=function(a,h){Qr(this),this.i=null,a=Ii(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function fm(a,h){Qr(a),h=Ii(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function pm(a,h){return Qr(a),h=Ii(a,h),a.g.has(h)}t.forEach=function(a,h){Qr(this),this.g.forEach(function(p,_){p.forEach(function(V){a.call(h,V,_,this)},this)},this)},t.na=function(){Qr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const V=a[_];for(let U=0;U<V.length;U++)p.push(h[_])}return p},t.V=function(a){Qr(this);let h=[];if(typeof a=="string")pm(this,a)&&(h=h.concat(this.g.get(Ii(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return Qr(this),this.i=null,a=Ii(this,a),pm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function mm(a,h,p){fm(a,h),0<p.length&&(a.i=null,a.g.set(Ii(a,h),O(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const U=encodeURIComponent(String(_)),Z=this.V(_);for(_=0;_<Z.length;_++){var V=U;Z[_]!==""&&(V+="="+encodeURIComponent(String(Z[_]))),a.push(V)}}return this.i=a.join("&")};function Ii(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function ST(a,h){h&&!a.j&&(Qr(a),a.i=null,a.g.forEach(function(p,_){var V=_.toLowerCase();_!=V&&(fm(this,_),mm(this,V,p))},a)),a.j=h}function AT(a,h){const p=new Tt;if(c.Image){const _=new Image;_.onload=w(Yr,p,"TestLoadImage: loaded",!0,h,_),_.onerror=w(Yr,p,"TestLoadImage: error",!1,h,_),_.onabort=w(Yr,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=w(Yr,p,"TestLoadImage: timeout",!1,h,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function CT(a,h){const p=new Tt,_=new AbortController,V=setTimeout(()=>{_.abort(),Yr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(U=>{clearTimeout(V),U.ok?Yr(p,"TestPingServer: ok",!0,h):Yr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),Yr(p,"TestPingServer: error",!1,h)})}function Yr(a,h,p,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(p)}catch{}}function xT(){this.g=new xe}function PT(a,h,p){const _=p||"";try{cm(a,function(V,U){let Z=V;d(V)&&(Z=Je(V)),h.push(_+U+"="+encodeURIComponent(Z))})}catch(V){throw h.push(_+"type="+encodeURIComponent("_badmap")),V}}function gl(a){this.l=a.Ub||null,this.j=a.eb||!1}k(gl,Pt),gl.prototype.g=function(){return new vl(this.l,this.j)},gl.prototype.i=function(a){return function(){return a}}({});function vl(a,h){D.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(vl,D),t=vl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,bo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,bo(this)),this.g&&(this.readyState=3,bo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function gm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Do(this):bo(this),this.readyState==3&&gm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Do(this))},t.Qa=function(a){this.g&&(this.response=a,Do(this))},t.ga=function(){this.g&&Do(this)};function Do(a){a.readyState=4,a.l=null,a.j=null,a.v=null,bo(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function bo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function vm(a){let h="";return L(a,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Zu(a,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=vm(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):We(a,h,p))}function ut(a){D.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(ut,D);var kT=/^https?$/i,NT=["POST","PUT"];t=ut.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zn.g(),this.v=this.o?Zt(this.o):Zt(zn),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(U){ym(this,U);return}if(a=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)p.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const U of _.keys())p.set(U,_.get(U));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(U=>U.toLowerCase()=="content-type"),V=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(NT,h,void 0))||_||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Z]of p)this.g.setRequestHeader(U,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Em(this),this.u=!0,this.g.send(a),this.u=!1}catch(U){ym(this,U)}};function ym(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,_m(a),yl(a)}function _m(a){a.A||(a.A=!0,P(a,"complete"),P(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,P(this,"complete"),P(this,"abort"),yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wm(this):this.bb())},t.bb=function(){wm(this)};function wm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Cr(a)!=4||a.Z()!=2)){if(a.u&&Cr(a)==4)te(a.Ea,0,a);else if(P(a,"readystatechange"),Cr(a)==4){a.h=!1;try{const Z=a.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=Z===0){var V=String(a.D).match(um)[1]||null;!V&&c.self&&c.self.location&&(V=c.self.location.protocol.slice(0,-1)),_=!kT.test(V?V.toLowerCase():"")}p=_}if(p)P(a,"complete"),P(a,"success");else{a.m=6;try{var U=2<Cr(a)?a.g.statusText:""}catch{U=""}a.l=U+" ["+a.Z()+"]",_m(a)}}finally{yl(a)}}}}function yl(a,h){if(a.g){Em(a);const p=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||P(a,"ready");try{p.onreadystatechange=_}catch{}}}function Em(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Cr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Cr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Er(h)}};function Tm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function RT(a){const h={};a=(a.g&&2<=Cr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(I(a[_]))continue;var p=R(a[_]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const U=h[V]||[];h[V]=U,U.push(p)}v(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oo(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Im(a){this.Aa=0,this.i=[],this.j=new Tt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oo("baseRetryDelayMs",5e3,a),this.cb=Oo("retryDelaySeedMs",1e4,a),this.Wa=Oo("forwardChannelMaxRetries",2,a),this.wa=Oo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new cl(a&&a.concurrentRequestLimit),this.Da=new xT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Im.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,_){Oe(0),this.W=a,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=jm(this,null,this.W),wl(this)};function ed(a){if(Sm(a),a.G==3){var h=a.U++,p=Ar(a.I);if(We(p,"SID",a.K),We(p,"RID",h),We(p,"TYPE","terminate"),Mo(a,p),h=new an(a,a.j,h),h.L=2,h.v=ml(Ar(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=Dm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Us(h)}Rm(a)}function _l(a){a.g&&(nd(a),a.g.cancel(),a.g=null)}function Sm(a){_l(a),a.u&&(c.clearTimeout(a.u),a.u=null),El(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function wl(a){if(!ul(a.h)&&!a.s){a.s=!0;var h=a.Ga;q||z(),B||(q(),B=!0),M.add(h,a),a.B=0}}function jT(a,h){return dl(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ct(g(a.Ga,a,h),Nm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new an(this,this.j,a);let U=this.o;if(this.S&&(U?(U=y(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(V.H=U,U=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Cm(this,V,h),p=Ar(this.I),We(p,"RID",a),We(p,"CVER",22),this.D&&We(p,"X-HTTP-Session-Id",this.D),Mo(this,p),U&&(this.O?h="headers="+encodeURIComponent(String(vm(U)))+"&"+h:this.m&&Zu(p,this.m,U)),Bt(this.h,V),this.Ua&&We(p,"TYPE","init"),this.P?(We(p,"$req",h),We(p,"SID","null"),V.T=!0,Ao(V,p,null)):Ao(V,p,h),this.G=2}}else this.G==3&&(a?Am(this,a):this.i.length==0||ul(this.h)||Am(this))};function Am(a,h){var p;h?p=h.l:p=a.U++;const _=Ar(a.I);We(_,"SID",a.K),We(_,"RID",p),We(_,"AID",a.T),Mo(a,_),a.m&&a.o&&Zu(_,a.m,a.o),p=new an(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Cm(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Bt(a.h,p),Ao(p,_,h)}function Mo(a,h){a.H&&L(a.H,function(p,_){We(h,_,p)}),a.l&&cm({},function(p,_){We(h,_,p)})}function Cm(a,h,p){p=Math.min(a.i.length,p);var _=a.l?g(a.l.Na,a.l,a):null;e:{var V=a.i;let U=-1;for(;;){const Z=["count="+p];U==-1?0<p?(U=V[0].g,Z.push("ofs="+U)):U=0:Z.push("ofs="+U);let ze=!0;for(let bt=0;bt<p;bt++){let Me=V[bt].g;const $t=V[bt].map;if(Me-=U,0>Me)U=Math.max(0,V[bt].g-100),ze=!1;else try{PT($t,Z,"req"+Me+"_")}catch{_&&_($t)}}if(ze){_=Z.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,_}function xm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;q||z(),B||(q(),B=!0),M.add(h,a),a.v=0}}function td(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ct(g(a.Fa,a),Nm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Pm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ct(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),_l(this),Pm(this))};function nd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Pm(a){a.g=new an(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Ar(a.qa);We(h,"RID","rpc"),We(h,"SID",a.K),We(h,"AID",a.T),We(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&We(h,"TO",a.ja),We(h,"TYPE","xmlhttp"),Mo(a,h),a.m&&a.o&&Zu(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=ml(Ar(h)),p.m=null,p.P=!0,Co(p,a)}t.Za=function(){this.C!=null&&(this.C=null,_l(this),td(this),Oe(19))};function El(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function km(a,h){var p=null;if(a.g==h){El(a),nd(a),a.g=null;var _=2}else if(qe(a.h,h))p=h.D,zs(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var V=a.B;_=ge(),P(_,new tt(_,p)),wl(a)}else xm(a);else if(V=h.s,V==3||V==0&&0<h.X||!(_==1&&jT(a,h)||_==2&&td(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),V){case 1:$s(a,5);break;case 4:$s(a,10);break;case 3:$s(a,6);break;default:$s(a,2)}}}function Nm(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function $s(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),_=a.Xa;const V=!_;_=new Bs(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||fl(_,"https"),ml(_),V?AT(_.toString(),p):CT(_.toString(),p)}else Oe(2);a.G=0,a.l&&a.l.sa(h),Rm(a),Sm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Rm(a){if(a.G=0,a.ka=[],a.l){const h=ko(a.h);(h.length!=0||a.i.length!=0)&&(F(a.ka,h),F(a.ka,a.i),a.h.i.length=0,O(a.i),a.i.length=0),a.l.ra()}}function jm(a,h,p){var _=p instanceof Bs?Ar(p):new Bs(p);if(_.g!="")h&&(_.g=h+"."+_.g),pl(_,_.s);else{var V=c.location;_=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;var U=new Bs(null);_&&fl(U,_),h&&(U.g=h),V&&pl(U,V),p&&(U.l=p),_=U}return p=a.D,h=a.ya,p&&h&&We(_,p,h),We(_,"VER",a.la),Mo(a,_),_}function Dm(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ut(new gl({eb:p})):new ut(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bm(){}t=bm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(a,h){return new yn(a,h)};function yn(a,h){D.call(this),this.g=new Im(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!I(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Si(this)}k(yn,D),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){ed(this.g)},yn.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=Je(a),a=p);h.i.push(new Ju(h.Ya++,a)),h.G==3&&wl(h)},yn.prototype.N=function(){this.g.l=null,delete this.j,ed(this.g),delete this.g,yn.aa.N.call(this)};function Om(a){Q.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}k(Om,Q);function Mm(){oe.call(this),this.status=1}k(Mm,oe);function Si(a){this.g=a}k(Si,bm),Si.prototype.ua=function(){P(this.g,"a")},Si.prototype.ta=function(a){P(this.g,new Om(a))},Si.prototype.sa=function(a){P(this.g,new Mm)},Si.prototype.ra=function(){P(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,ow=function(){return new Tl},iw=function(){return ge()},sw=pe,Bh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,ic=on,Tr.COMPLETE="complete",rw=Tr,ne.EventType=G,G.OPEN="a",G.CLOSE="b",G.ERROR="c",G.MESSAGE="d",D.prototype.listen=D.prototype.K,Xo=ne,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,nw=ut}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const sv="@firebase/firestore",iv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new cp("@firebase/firestore");function xi(){return ui.logLevel}function ie(t,...e){if(ui.logLevel<=Ne.DEBUG){const n=e.map(hp);ui.debug(`Firestore (${_o}): ${t}`,...n)}}function $r(t,...e){if(ui.logLevel<=Ne.ERROR){const n=e.map(hp);ui.error(`Firestore (${_o}): ${t}`,...n)}}function As(t,...e){if(ui.logLevel<=Ne.WARN){const n=e.map(hp);ui.warn(`Firestore (${_o}): ${t}`,...n)}}function hp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,aw(t,r,n)}function aw(t,e,n){let r=`FIRESTORE (${_o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $r(r),new Error(r)}function Le(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||aw(e,s,r)}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Kt.UNAUTHENTICATED))}shutdown(){}}class WA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GA{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string",31837,{l:r}),new lw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class KA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new KA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ov{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,En(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Le(this.o===void 0,3512);const r=i=>{i.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ov(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ov(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=XA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ce(t,e){return t<e?-1:t>e?1:0}function $h(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Ce(r,s);{const i=cw(),o=JA(i.encode(av(t,n)),i.encode(av(e,n)));return o!==0?o:Ce(r,s)}}n+=r>65535?2:1}return Ce(t.length,e.length)}function av(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function JA(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ce(t[n],e[n]);return Ce(t.length,e.length)}function lo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="__name__";class sr{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=sr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const r=sr.isNumericId(e),s=sr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?sr.extractNumericId(e).compare(sr.extractNumericId(n)):$h(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ws.fromString(e.substring(4,e.length-2))}}class $e extends sr{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const ZA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends sr{construct(e,n,r){return new Vt(e,n,r)}static isValidIdentifier(e){return ZA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lv}static keyField(){return new Vt([lv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new re(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new re(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new re(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new re(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(n)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe($e.fromString(e))}static fromName(e){return new fe($e.fromString(e).popFirst(5))}static empty(){return new fe($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t,e,n){if(!n)throw new re(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eC(t,e,n,r){if(e===!0&&r===!0)throw new re(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cv(t){if(!fe.isDocumentKey(t))throw new re(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uv(t){if(fe.isDocumentKey(t))throw new re(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cu(t);throw new re(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ja(t,e){if(!dw(t))throw new re(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new re(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=-62135596800,hv=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hv);return new Ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dv)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hv}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ja(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:wt("string",Ke._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Ke(0,0))}static max(){return new we(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=-1;function tC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=we.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Cs(s,fe.empty(),e)}function nC(t){return new Cs(t.readTime,t.key,Oa)}class Cs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cs(we.min(),fe.empty(),Oa)}static max(){return new Cs(we.max(),fe.empty(),Oa)}}function rC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==sC)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(s=>s?W.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new W((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new W((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function oC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}xu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=-1;function Pu(t){return t==null}function zc(t){return t===0&&1/t==-1/0}function aC(t){return typeof t=="number"&&Number.isInteger(t)&&!zc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="";function lC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fv(e)),e=cC(t.get(n),e);return fv(e)}function cC(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case hw:n+="";break;default:n+=i}}return n}function fv(t){return t+hw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Mt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Mt.RED,this.left=s??Mt.EMPTY,this.right=i??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Mt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Mt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mv(this.data.getIterator())}getIteratorFrom(e){return new mv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class mv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new In([])}unionWith(e){let n=new xt(Vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new pw("Invalid base64 string: "+i):i}}(e);return new Ut(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const uC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(t){if(Le(!!t,39018),typeof t=="string"){let e=0;const n=uC.exec(t);if(Le(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ps(t){return typeof t=="string"?Ut.fromBase64String(t):Ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="server_timestamp",gw="__type__",vw="__previous_value__",yw="__local_write_time__";function mp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[gw])===null||n===void 0?void 0:n.stringValue)===mw}function ku(t){const e=t.mapValue.fields[vw];return mp(e)?ku(e):e}function Ma(t){const e=xs(t.mapValue.fields[yw].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n,r,s,i,o,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Bc="(default)";class Va{constructor(e,n){this.projectId=e,this.database=n||Bc}static empty(){return new Va("","")}get isDefaultDatabase(){return this.database===Bc}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="__type__",hC="__max__",$l={mapValue:{}},ww="__vector__",$c="value";function ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mp(t)?4:pC(t)?9007199254740991:fC(t)?10:11:_e(28295,{value:t})}function gr(t,e){if(t===e)return!0;const n=ks(t);if(n!==ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ma(t).isEqual(Ma(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=xs(s.timestampValue),c=xs(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ps(s.bytesValue).isEqual(Ps(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return pt(s.geoPointValue.latitude)===pt(i.geoPointValue.latitude)&&pt(s.geoPointValue.longitude)===pt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return pt(s.integerValue)===pt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=pt(s.doubleValue),c=pt(i.doubleValue);return o===c?zc(o)===zc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return lo(t.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(pv(o)!==pv(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!gr(o[u],c[u])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function La(t,e){return(t.values||[]).find(n=>gr(n,e))!==void 0}function co(t,e){if(t===e)return 0;const n=ks(t),r=ks(e);if(n!==r)return Ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=pt(i.integerValue||i.doubleValue),u=pt(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return gv(t.timestampValue,e.timestampValue);case 4:return gv(Ma(t),Ma(e));case 5:return $h(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Ps(i),u=Ps(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=Ce(c[d],u[d]);if(f!==0)return f}return Ce(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Ce(pt(i.latitude),pt(o.latitude));return c!==0?c:Ce(pt(i.longitude),pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,d,f;const m=i.fields||{},g=o.fields||{},w=(c=m[$c])===null||c===void 0?void 0:c.arrayValue,k=(u=g[$c])===null||u===void 0?void 0:u.arrayValue,O=Ce(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=k==null?void 0:k.values)===null||f===void 0?void 0:f.length)||0);return O!==0?O:vv(w,k)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$l.mapValue&&o===$l.mapValue)return 0;if(i===$l.mapValue)return 1;if(o===$l.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=$h(u[m],f[m]);if(g!==0)return g;const w=co(c[u[m]],d[f[m]]);if(w!==0)return w}return Ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{le:n})}}function gv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=xs(t),r=xs(e),s=Ce(n.seconds,r.seconds);return s!==0?s:Ce(n.nanos,r.nanos)}function vv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=co(n[s],r[s]);if(i)return i}return Ce(n.length,r.length)}function uo(t){return Hh(t)}function Hh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ps(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Hh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Hh(n.fields[o])}`;return s+"}"}(t.mapValue):_e(61005,{value:t})}function oc(t){switch(ks(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ku(t);return e?16+oc(e):16;case 5:return 2*t.stringValue.length;case 6:return Ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+oc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Os(r.fields,(i,o)=>{s+=i.length+oc(o)}),s}(t.mapValue);default:throw _e(13486,{value:t})}}function yv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qh(t){return!!t&&"integerValue"in t}function gp(t){return!!t&&"arrayValue"in t}function _v(t){return!!t&&"nullValue"in t}function wv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ac(t){return!!t&&"mapValue"in t}function fC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[_w])===null||n===void 0?void 0:n.stringValue)===ww}function ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Os(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ac(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(n)}setAll(e){let n=Vt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=ha(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ac(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ac(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Os(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new un(ha(this.value))}}function Ew(t){const e=[];return Os(t.fields,(n,r)=>{const s=new Vt([n]);if(ac(r)){const i=Ew(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Yt(e,0,we.min(),we.min(),we.min(),un.empty(),0)}static newFoundDocument(e,n,r,s){return new Yt(e,1,n,we.min(),r,s,0)}static newNoDocument(e,n){return new Yt(e,2,n,we.min(),we.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,we.min(),we.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.position=e,this.inclusive=n}}function Ev(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=co(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n="asc"){this.field=e,this.dir=n}}function mC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{}class _t extends Tw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vC(e,n,r):n==="array-contains"?new wC(e,r):n==="in"?new EC(e,r):n==="not-in"?new TC(e,r):n==="array-contains-any"?new IC(e,r):new _t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yC(e,r):new _C(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&ks(this.value)===ks(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends Tw{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Jn(e,n)}matches(e){return Iw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Iw(t){return t.op==="and"}function Sw(t){return gC(t)&&Iw(t)}function gC(t){for(const e of t.filters)if(e instanceof Jn)return!1;return!0}function Wh(t){if(t instanceof _t)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(Sw(t))return t.filters.map(e=>Wh(e)).join(",");{const e=t.filters.map(n=>Wh(n)).join(",");return`${t.op}(${e})`}}function Aw(t,e){return t instanceof _t?function(r,s){return s instanceof _t&&r.op===s.op&&r.field.isEqual(s.field)&&gr(r.value,s.value)}(t,e):t instanceof Jn?function(r,s){return s instanceof Jn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&Aw(o,s.filters[c]),!0):!1}(t,e):void _e(19439)}function Cw(t){return t instanceof _t?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof Jn?function(n){return n.op.toString()+" {"+n.getFilters().map(Cw).join(" ,")+"}"}(t):"Filter"}class vC extends _t{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class yC extends _t{constructor(e,n){super(e,"in",n),this.keys=xw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _C extends _t{constructor(e,n){super(e,"not-in",n),this.keys=xw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class wC extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gp(n)&&La(n.arrayValue,this.value)}}class EC extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&La(this.value.arrayValue,n)}}class TC extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!La(this.value.arrayValue,n)}}class IC extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>La(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Pe=null}}function Iv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new SC(t,e,n,r,s,i,o)}function vp(t){const e=Te(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uo(r)).join(",")),e.Pe=n}return e.Pe}function yp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Aw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tv(t.startAt,e.startAt)&&Tv(t.endAt,e.endAt)}function Gh(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function AC(t,e,n,r,s,i,o,c){return new Za(t,e,n,r,s,i,o,c)}function Nu(t){return new Za(t)}function Sv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Pw(t){return t.collectionGroup!==null}function fa(t){const e=Te(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new xt(Vt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new qc(i,r))}),n.has(Vt.keyField().canonicalString())||e.Te.push(new qc(Vt.keyField(),r))}return e.Te}function ur(t){const e=Te(t);return e.Ie||(e.Ie=CC(e,fa(t))),e.Ie}function CC(t,e){if(t.limitType==="F")return Iv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new qc(s.field,i)});const n=t.endAt?new Hc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hc(t.startAt.position,t.startAt.inclusive):null;return Iv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kh(t,e){const n=t.filters.concat([e]);return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qh(t,e,n){return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ru(t,e){return yp(ur(t),ur(e))&&t.limitType===e.limitType}function kw(t){return`${vp(ur(t))}|lt:${t.limitType}`}function Pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Cw(s)).join(", ")}]`),Pu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>uo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>uo(s)).join(",")),`Target(${r})`}(ur(t))}; limitType=${t.limitType})`}function ju(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):fe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=Ev(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,fa(r),s)||r.endAt&&!function(o,c,u){const d=Ev(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,fa(r),s))}(t,e)}function xC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Nw(t){return(e,n)=>{let r=!1;for(const s of fa(t)){const i=PC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function PC(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?co(u,d):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return fw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new ot(fe.comparator);function Hr(){return kC}const Rw=new ot(fe.comparator);function Jo(...t){let e=Rw;for(const n of t)e=e.insert(n.key,n);return e}function jw(t){let e=Rw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xs(){return pa()}function Dw(){return pa()}function pa(){return new yi(t=>t.toString(),(t,e)=>t.isEqual(e))}const NC=new ot(fe.comparator),RC=new xt(fe.comparator);function Re(...t){let e=RC;for(const n of t)e=e.add(n);return e}const jC=new xt(Ce);function DC(){return jC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function bw(t){return{integerValue:""+t}}function bC(t,e){return aC(e)?bw(e):_p(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(){this._=void 0}}function OC(t,e,n){return t instanceof Fa?function(s,i){const o={fields:{[gw]:{stringValue:mw},[yw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&mp(i)&&(i=ku(i)),i&&(o.fields[vw]=i),{mapValue:o}}(n,e):t instanceof Ua?Mw(t,e):t instanceof za?Vw(t,e):function(s,i){const o=Ow(s,i),c=Av(o)+Av(s.Ee);return qh(o)&&qh(s.Ee)?bw(c):_p(s.serializer,c)}(t,e)}function MC(t,e,n){return t instanceof Ua?Mw(t,e):t instanceof za?Vw(t,e):n}function Ow(t,e){return t instanceof Wc?function(r){return qh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Fa extends Du{}class Ua extends Du{constructor(e){super(),this.elements=e}}function Mw(t,e){const n=Lw(e);for(const r of t.elements)n.some(s=>gr(s,r))||n.push(r);return{arrayValue:{values:n}}}class za extends Du{constructor(e){super(),this.elements=e}}function Vw(t,e){let n=Lw(e);for(const r of t.elements)n=n.filter(s=>!gr(s,r));return{arrayValue:{values:n}}}class Wc extends Du{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Av(t){return pt(t.integerValue||t.doubleValue)}function Lw(t){return gp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.field=e,this.transform=n}}function LC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ua&&s instanceof Ua||r instanceof za&&s instanceof za?lo(r.elements,s.elements,gr):r instanceof Wc&&s instanceof Wc?gr(r.Ee,s.Ee):r instanceof Fa&&s instanceof Fa}(t.transform,e.transform)}class FC{constructor(e,n){this.version=e,this.transformResults=n}}class Mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bu{}function Fw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wp(t.key,Mn.none()):new el(t.key,t.data,Mn.none());{const n=t.data,r=un.empty();let s=new xt(Vt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ms(t.key,r,new In(s.toArray()),Mn.none())}}function UC(t,e,n){t instanceof el?function(s,i,o){const c=s.value.clone(),u=xv(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ms?function(s,i,o){if(!lc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=xv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Uw(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ma(t,e,n,r){return t instanceof el?function(i,o,c,u){if(!lc(i.precondition,o))return c;const d=i.value.clone(),f=Pv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ms?function(i,o,c,u){if(!lc(i.precondition,o))return c;const d=Pv(i.fieldTransforms,u,o),f=o.data;return f.setAll(Uw(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return lc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function zC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ow(r.transform,s||null);i!=null&&(n===null&&(n=un.empty()),n.set(r.field,i))}return n||null}function Cv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&lo(r,s,(i,o)=>LC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class el extends bu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ms extends bu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Uw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xv(t,e,n){const r=new Map;Le(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,MC(o,c,n[s]))}return r}function Pv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,OC(i,o,e))}return r}class wp extends bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BC extends bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&UC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Dw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=Fw(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(n,r)=>Cv(n,r))&&lo(this.baseMutations,e.baseMutations,(n,r)=>Cv(n,r))}}class Ep{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Le(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return NC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ep(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,je;function WC(t){switch(t){case H.OK:return _e(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return _e(15467,{code:t})}}function zw(t){if(t===void 0)return $r("GRPC error has no .code"),H.UNKNOWN;switch(t){case vt.OK:return H.OK;case vt.CANCELLED:return H.CANCELLED;case vt.UNKNOWN:return H.UNKNOWN;case vt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case vt.INTERNAL:return H.INTERNAL;case vt.UNAVAILABLE:return H.UNAVAILABLE;case vt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case vt.NOT_FOUND:return H.NOT_FOUND;case vt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case vt.ABORTED:return H.ABORTED;case vt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case vt.DATA_LOSS:return H.DATA_LOSS;default:return _e(39323,{code:t})}}(je=vt||(vt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=new ws([4294967295,4294967295],0);function kv(t){const e=cw().encode(t),n=new tw;return n.update(e),new Uint8Array(n.digest())}function Nv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ws([n,r],0),new ws([s,i],0)]}class Tp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(r<0)throw new Zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ws.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(ws.fromNumber(r)));return s.compare(GC)===1&&(s=new ws([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=kv(e),[r,s]=Nv(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Tp(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.fe===0)return;const n=kv(e),[r,s]=Nv(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,tl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ou(we.min(),s,new ot(Ce),Hr(),Re())}}class tl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tl(r,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class Bw{constructor(e,n){this.targetId=e,this.De=n}}class $w{constructor(e,n,r=Ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Rv{constructor(){this.ve=0,this.Ce=jv(),this.Fe=Ut.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Re(),n=Re(),r=Re();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:_e(38017,{changeType:i})}}),new tl(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=jv()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class KC{constructor(e){this.We=e,this.Ge=new Map,this.ze=Hr(),this.je=Hl(),this.Je=Hl(),this.He=new ot(Ce)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Gh(i))if(r===0){const o=new fe(i.path);this.Xe(n,o,Yt.newNoDocument(o,we.min()))}else Le(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const c=this._t(e),u=c?this.ut(c,e,o):1;if(u!==0){this.rt(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Ps(r).toUint8Array()}catch(u){if(u instanceof pw)return As("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Tp(o,s,i)}catch(u){return As(u instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const c=this.st(o);if(c){if(i.current&&Gh(c.target)){const u=new fe(c.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,Yt.newNoDocument(u,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=Re();this.Je.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.st(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Ou(e,n,this.He,this.ze,r);return this.ze=Hr(),this.je=Hl(),this.Je=Hl(),this.He=new ot(Ce),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Rv,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new xt(Ce),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new xt(Ce),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Rv),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Hl(){return new ot(fe.comparator)}function jv(){return new ot(fe.comparator)}const QC={asc:"ASCENDING",desc:"DESCENDING"},YC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XC={and:"AND",or:"OR"};class JC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yh(t,e){return t.useProto3Json||Pu(e)?e:{value:e}}function Gc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZC(t,e){return Gc(t,e.toTimestamp())}function dr(t){return Le(!!t,49232),we.fromTimestamp(function(n){const r=xs(n);return new Ke(r.seconds,r.nanos)}(t))}function Ip(t,e){return Xh(t,e).canonicalString()}function Xh(t,e){const n=function(s){return new $e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qw(t){const e=$e.fromString(t);return Le(Yw(e),10190,{key:e.toString()}),e}function Jh(t,e){return Ip(t.databaseId,e.path)}function Od(t,e){const n=qw(e);if(n.get(1)!==t.databaseId.projectId)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(Gw(n))}function Ww(t,e){return Ip(t.databaseId,e)}function ex(t){const e=qw(t);return e.length===4?$e.emptyPath():Gw(e)}function Zh(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gw(t){return Le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Dv(t,e,n){return{name:Jh(t,e),fields:n.value.mapValue.fields}}function tx(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(Le(f===void 0||typeof f=="string",58123),Ut.fromBase64String(f||"")):(Le(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ut.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?H.UNKNOWN:zw(d.code);return new re(f,d.message||"")}(o);n=new $w(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Od(t,r.document.name),i=dr(r.document.updateTime),o=r.document.createTime?dr(r.document.createTime):we.min(),c=new un({mapValue:{fields:r.document.fields}}),u=Yt.newFoundDocument(s,i,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new cc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Od(t,r.document),i=r.readTime?dr(r.readTime):we.min(),o=Yt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new cc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Od(t,r.document),i=r.removedTargetIds||[];n=new cc([],i,s,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new qC(s,i),c=r.targetId;n=new Bw(c,o)}}return n}function nx(t,e){let n;if(e instanceof el)n={update:Dv(t,e.key,e.value)};else if(e instanceof wp)n={delete:Jh(t,e.key)};else if(e instanceof Ms)n={update:Dv(t,e.key,e.data),updateMask:dx(e.fieldMask)};else{if(!(e instanceof BC))return _e(16599,{Rt:e.type});n={verify:Jh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Fa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof za)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wc)return{fieldPath:o.field.canonicalString(),increment:c.Ee};throw _e(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:ZC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:_e(27497)}(t,e.precondition)),n}function rx(t,e){return t&&t.length>0?(Le(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?dr(s.updateTime):dr(i);return o.isEqual(we.min())&&(o=dr(i)),new FC(o,s.transformResults||[])}(n,e))):[]}function sx(t,e){return{documents:[Ww(t,e.path)]}}function ix(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ww(t,s);const i=function(d){if(d.length!==0)return Qw(Jn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ki(g.field),direction:lx(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Yh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:s}}function ox(t){let e=ex(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Le(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=Kw(m);return g instanceof Jn&&Sw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(k){return new qc(Ni(k.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Pu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,w=m.values||[];return new Hc(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,w=m.values||[];return new Hc(w,g)}(n.endAt)),AC(e,s,o,i,c,"F",u,d)}function ax(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Kw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ni(n.unaryFilter.field);return _t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ni(n.unaryFilter.field);return _t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ni(n.unaryFilter.field);return _t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ni(n.unaryFilter.field);return _t.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return _t.create(Ni(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jn.create(n.compositeFilter.filters.map(r=>Kw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function lx(t){return QC[t]}function cx(t){return YC[t]}function ux(t){return XC[t]}function ki(t){return{fieldPath:t.canonicalString()}}function Ni(t){return Vt.fromServerFormat(t.fieldPath)}function Qw(t){return t instanceof _t?function(n){if(n.op==="=="){if(wv(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NAN"}};if(_v(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wv(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NAN"}};if(_v(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ki(n.field),op:cx(n.op),value:n.value}}}(t):t instanceof Jn?function(n){const r=n.getFilters().map(s=>Qw(s));return r.length===1?r[0]:{compositeFilter:{op:ux(n.op),filters:r}}}(t):_e(54877,{filter:t})}function dx(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Yw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,s,i=we.min(),o=we.min(),c=Ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.gt=e}}function fx(t){const e=ox({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.Dn=new mx}addToCollectionParentIndex(e,n){return this.Dn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Cs.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class mx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new xt($e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new xt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xw=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(Xw,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ho(0)}static ur(){return new ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="LruGarbageCollector",gx=1048576;function Mv([t,e],[n,r]){const s=Ce(t,n);return s===0?Ce(e,r):s}class vx{constructor(e){this.Tr=e,this.buffer=new xt(Mv),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Mv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yx{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ie(Ov,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?ie(Ov,"Ignoring IndexedDB error during garbage collection: ",n):await wo(n)}await this.Rr(3e5)})}}class _x{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return W.resolve(xu.ue);const r=new vx(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(bv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bv):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),xi()<=Ne.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function wx(t,e){return new _x(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.changes=new yi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ma(r.mutation,s,In.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Re()){const s=Xs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Jo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=Hr();const o=pa(),c=function(){return pa()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Ms)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ma(f.mutation,d,f.mutation.getFieldMask(),Ke.now())):o.set(d.key,In.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return c.set(d,new Tx(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=pa();let s=new ot((o,c)=>o-c),i=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||In.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||Re()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=Dw();f.forEach(g=>{if(!i.has(g)){const w=Fw(n.get(g),r.get(g));w!==null&&m.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Pw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):W.resolve(Xs());let c=Oa,u=i;return o.next(d=>W.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?W.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,Re())).next(f=>({batchId:c,changes:jw(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let s=Jo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Jo();return this.indexManager.getCollectionParents(e,i).next(c=>W.forEach(c,u=>{const d=function(m,g){return new Za(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Yt.newInvalidDocument(f)))});let c=Jo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&ma(f.mutation,d,In.empty(),Ke.now()),ju(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return W.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:dr(s.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:fx(s.bundledQuery),readTime:dr(s.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.overlays=new ot(fe.comparator),this.kr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xs();return W.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const s=Xs(),i=n.length+1,o=new fe(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return W.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ot((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Xs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=Xs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return W.resolve(c)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new HC(n,r));let i=this.kr.get(n);i===void 0&&(i=Re(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.qr=new xt(kt.Qr),this.$r=new xt(kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new kt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new kt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new fe(new $e([])),r=new kt(n,e),s=new kt(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new fe(new $e([])),r=new kt(n,e),s=new kt(n,e+1);let i=Re();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new kt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return fe.comparator(e.key,n.key)||Ce(e.Hr,n.Hr)}static Ur(e,n){return Ce(e.Hr,n.Hr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new xt(kt.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $C(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Yr=this.Yr.add(new kt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return W.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?pp:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kt(n,0),s=new kt(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const c=this.Zr(o.Hr);i.push(c)}),W.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(Ce);return n.forEach(s=>{const i=new kt(s,0),o=new kt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],c=>{r=r.add(c.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;fe.isDocumentKey(i)||(i=i.child(""));const o=new kt(new fe(i),0);let c=new xt(Ce);return this.Yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Hr)),!0)},o),W.resolve(this.ei(c))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Le(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(n.mutations,s=>{const i=new kt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new kt(n,0),s=this.Yr.firstAfterOrEqual(r);return W.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.ni=e,this.docs=function(){return new ot(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let r=Hr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Yt.newInvalidDocument(s))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Hr();const o=n.path,c=new fe(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||rC(nC(f),r)<=0||(s.has(f.key)||ju(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return W.resolve(i)}getAllFromCollectionGroup(e,n,r,s){_e(9500)}ri(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kx(this)}getSize(e){return W.resolve(this.size)}}class kx extends Ex{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.persistence=e,this.ii=new yi(n=>vp(n),yp),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.si=0,this.oi=new Sp,this.targetCount=0,this._i=ho.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),W.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new ho(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.hr(n),W.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),W.waitFor(i).next(()=>s)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),W.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n){this.ai={},this.overlays={},this.ui=new xu(0),this.ci=!1,this.ci=!0,this.li=new Cx,this.referenceDelegate=e(this),this.hi=new Nx(this),this.indexManager=new px,this.remoteDocumentCache=function(s){return new Px(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new hx(n),this.Ti=new Sx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ax,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new xx(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const s=new Rx(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Rx extends iC{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Ai=new Sp,this.Ri=null}static Vi(e){return new Ap(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{const s=fe.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,we.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return W.or([()=>W.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Kc{constructor(e,n){this.persistence=e,this.gi=new yi(r=>lC(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=wx(this,n)}static Vi(e,n){return new Kc(e,n)}Ii(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return W.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?W.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(c=>{c||(r++,i.removeEntry(o,we.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),W.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oc(e.data.value)),n}Sr(e,n,r){return W.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return W.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=Re(),s=Re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Cp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return A1()?8:oC(Jt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new jx;return this.ws(e,n,o).next(c=>{if(i.result=c,this.Rs)return this.Ss(e,n,o,c.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(xi()<=Ne.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(xi()<=Ne.DEBUG&&ie("QueryEngine","Query:",Pi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(xi()<=Ne.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(n))):W.resolve())}ps(e,n){if(Sv(n))return W.resolve(null);let r=ur(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Qh(n,null,"F"),r=ur(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Re(...i);return this.gs.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,c);return this.Ds(n,d,o,u.readTime)?this.ps(e,Qh(n,null,"F")):this.vs(e,d,n,u)}))})))}ys(e,n,r,s){return Sv(n)||s.isEqual(we.min())?W.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?W.resolve(null):(xi()<=Ne.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pi(n)),this.vs(e,o,n,tC(s,Oa)).next(c=>c))})}bs(e,n){let r=new xt(Nw(e));return n.forEach((s,i)=>{ju(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return xi()<=Ne.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Pi(n)),this.gs.getDocumentsMatchingQuery(e,n,Cs.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="LocalStore",bx=3e8;class Ox{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new ot(Ce),this.Ms=new yi(i=>vp(i),yp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ix(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Mx(t,e,n,r){return new Ox(t,e,n,r)}async function Zw(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=Re();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:c}))})})}function Vx(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let w=W.resolve();return g.forEach(k=>{w=w.next(()=>f.getEntry(u,k)).next(O=>{const F=d.docVersions.get(k);Le(F!==null,48541),O.version.compareTo(F)<0&&(m.applyToRemoteDocument(O,d),O.isValidDocument()&&(O.setReadTime(d.commitVersion),f.addEntry(O)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=Re();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function eE(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Lx(t,e){const n=Te(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.hi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.hi.addMatchingKeys(i,f.addedDocuments,m)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(Ut.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(m,w),function(O,F,A){return O.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=bx?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(g,w,f)&&c.push(n.hi.updateTargetData(i,w))});let u=Hr(),d=Re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(Fx(i,o,e.documentUpdates).next(f=>{u=f.Ls,d=f.ks})),!r.isEqual(we.min())){const f=n.hi.getLastRemoteSnapshotVersion(i).next(m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return W.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Fs=s,i))}function Fx(t,e,n){let r=Re(),s=Re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Hr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(we.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):ie(xp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ls:o,ks:s}})}function Ux(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=pp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zx(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,W.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new cs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function ef(t,e,n){const r=Te(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Eo(o))throw o;ie(xp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Vv(t,e,n){const r=Te(t);let s=we.min(),i=Re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=Te(u),g=m.Ms.get(f);return g!==void 0?W.resolve(m.Fs.get(g)):m.hi.getTargetData(d,f)}(r,o,ur(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:we.min(),n?i:Re())).next(c=>(Bx(r,xC(e),c),{documents:c,qs:i})))}function Bx(t,e,n){let r=t.xs.get(e)||we.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Lv{constructor(){this.activeTargetIds=DC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $x{constructor(){this.Fo=new Lv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Lv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="ConnectivityMonitor";class Uv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ie(Fv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ie(Fv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function tf(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="RestConnection",qx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Wx{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Bc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=tf(),c=this.Go(e,n.toUriEncodedString());ie(Md,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:d}=new URL(c),f=vi(d);return this.jo(e,c,u,r,f).then(m=>(ie(Md,`Received RPC '${e}' ${o}: `,m),m),m=>{throw As(Md,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_o}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=qx[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class Kx extends Wx{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=tf();return new Promise((c,u)=>{const d=new nw;d.setWithCredentials(!0),d.listenOnce(rw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ic.NO_ERROR:const m=d.getResponseJson();ie(Gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case ic.TIMEOUT:ie(Gt,`RPC '${e}' ${o} timed out`),u(new re(H.DEADLINE_EXCEEDED,"Request time out"));break;case ic.HTTP_ERROR:const g=d.getStatus();if(ie(Gt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const k=w==null?void 0:w.error;if(k&&k.status&&k.message){const O=function(A){const I=A.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(I)>=0?I:H.UNKNOWN}(k.status);u(new re(O,k.message))}else u(new re(H.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new re(H.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{ie(Gt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);ie(Gt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}P_(e,n,r){const s=tf(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ow(),c=iw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");ie(Gt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.T_(m);let g=!1,w=!1;const k=new Gx({Ho:F=>{w?ie(Gt,`Not sending because RPC '${e}' stream ${s} is closed:`,F):(g||(ie(Gt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),ie(Gt,`RPC '${e}' stream ${s} sending:`,F),m.send(F))},Yo:()=>m.close()}),O=(F,A,I)=>{F.listen(A,S=>{try{I(S)}catch(b){setTimeout(()=>{throw b},0)}})};return O(m,Xo.EventType.OPEN,()=>{w||(ie(Gt,`RPC '${e}' stream ${s} transport opened.`),k.s_())}),O(m,Xo.EventType.CLOSE,()=>{w||(w=!0,ie(Gt,`RPC '${e}' stream ${s} transport closed`),k.__(),this.I_(m))}),O(m,Xo.EventType.ERROR,F=>{w||(w=!0,As(Gt,`RPC '${e}' stream ${s} transport errored. Name:`,F.name,"Message:",F.message),k.__(new re(H.UNAVAILABLE,"The operation could not be completed")))}),O(m,Xo.EventType.MESSAGE,F=>{var A;if(!w){const I=F.data[0];Le(!!I,16349);const S=I,b=(S==null?void 0:S.error)||((A=S[0])===null||A===void 0?void 0:A.error);if(b){ie(Gt,`RPC '${e}' stream ${s} received error:`,b);const N=b.status;let L=function(T){const C=vt[T];if(C!==void 0)return zw(C)}(N),v=b.message;L===void 0&&(L=H.INTERNAL,v="Unknown error status: "+N+" with message "+b.message),w=!0,k.__(new re(L,v)),m.close()}else ie(Gt,`RPC '${e}' stream ${s} received:`,I),k.a_(I)}}),O(c,sw.STAT_EVENT,F=>{F.stat===Bh.PROXY?ie(Gt,`RPC '${e}' stream ${s} detected buffering proxy`):F.stat===Bh.NOPROXY&&ie(Gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Vd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){return new JC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="PersistentStream";class nE{constructor(e,n,r,s,i,o,c,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new tE(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new re(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ie(zv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ie(zv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qx extends nE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=tx(this.serializer,e),r=function(i){if(!("targetChange"in i))return we.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?we.min():o.readTime?dr(o.readTime):we.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Zh(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Gh(u)?{documents:sx(i,u)}:{query:ix(i,u).Vt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Hw(i,o.resumeToken);const d=Yh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(we.min())>0){c.readTime=Gc(i,o.snapshotVersion.toTimestamp());const d=Yh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=ax(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Zh(this.serializer),n.removeTarget=e,this.k_(n)}}class Yx extends nE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=rx(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Zh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nx(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{}class Jx extends Xx{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Xh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(H.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Jo(e,Xh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(H.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Zx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?($r(n),this._a=!1):ie("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="RemoteStore";class eP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{_i(this)&&(ie(di,"Restarting streams for network reachability change."),await async function(u){const d=Te(u);d.Ia.add(4),await nl(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Vu(d)}(this))})}),this.Aa=new Zx(r,s)}}async function Vu(t){if(_i(t))for(const e of t.da)await e(!0)}async function nl(t){for(const e of t.da)await e(!1)}function rE(t,e){const n=Te(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Rp(n)?Np(n):To(n).x_()&&kp(n,e))}function Pp(t,e){const n=Te(t),r=To(n);n.Ta.delete(e),r.x_()&&sE(n,e),n.Ta.size===0&&(r.x_()?r.B_():_i(n)&&n.Aa.set("Unknown"))}function kp(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}To(t).H_(e)}function sE(t,e){t.Ra.$e(e),To(t).Y_(e)}function Np(t){t.Ra=new KC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),To(t).start(),t.Aa.aa()}function Rp(t){return _i(t)&&!To(t).M_()&&t.Ta.size>0}function _i(t){return Te(t).Ia.size===0}function iE(t){t.Ra=void 0}async function tP(t){t.Aa.set("Online")}async function nP(t){t.Ta.forEach((e,n)=>{kp(t,e)})}async function rP(t,e){iE(t),Rp(t)?(t.Aa.la(e),Np(t)):t.Aa.set("Unknown")}async function sP(t,e,n){if(t.Aa.set("Online"),e instanceof $w&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ta.delete(c),s.Ra.removeTarget(c))}(t,e)}catch(r){ie(di,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qc(t,r)}else if(e instanceof cc?t.Ra.Ye(e):e instanceof Bw?t.Ra.it(e):t.Ra.et(e),!n.isEqual(we.min()))try{const r=await eE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Ra.Pt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ta.get(d);f&&i.Ta.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=i.Ta.get(u);if(!f)return;i.Ta.set(u,f.withResumeToken(Ut.EMPTY_BYTE_STRING,f.snapshotVersion)),sE(i,u);const m=new cs(f.target,u,d,f.sequenceNumber);kp(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ie(di,"Failed to raise snapshot:",r),await Qc(t,r)}}async function Qc(t,e,n){if(!Eo(e))throw e;t.Ia.add(1),await nl(t),t.Aa.set("Offline"),n||(n=()=>eE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(di,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Vu(t)})}function oE(t,e){return e().catch(n=>Qc(t,n,e))}async function Lu(t){const e=Te(t),n=Ns(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:pp;for(;iP(e);)try{const s=await Ux(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,oP(e,s)}catch(s){await Qc(e,s)}aE(e)&&lE(e)}function iP(t){return _i(t)&&t.Pa.length<10}function oP(t,e){t.Pa.push(e);const n=Ns(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function aE(t){return _i(t)&&!Ns(t).M_()&&t.Pa.length>0}function lE(t){Ns(t).start()}async function aP(t){Ns(t).na()}async function lP(t){const e=Ns(t);for(const n of t.Pa)e.X_(n.mutations)}async function cP(t,e,n){const r=t.Pa.shift(),s=Ep.from(r,e,n);await oE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lu(t)}async function uP(t,e){e&&Ns(t).Z_&&await async function(r,s){if(function(o){return WC(o)&&o!==H.ABORTED}(s.code)){const i=r.Pa.shift();Ns(r).N_(),await oE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Lu(r)}}(t,e),aE(t)&&lE(t)}async function Bv(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),ie(di,"RemoteStore received new credentials");const r=_i(n);n.Ia.add(3),await nl(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Vu(n)}async function dP(t,e){const n=Te(t);e?(n.Ia.delete(2),await Vu(n)):e||(n.Ia.add(2),await nl(n),n.Aa.set("Unknown"))}function To(t){return t.Va||(t.Va=function(n,r,s){const i=Te(n);return i.ia(),new Qx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:tP.bind(null,t),e_:nP.bind(null,t),n_:rP.bind(null,t),J_:sP.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Rp(t)?Np(t):t.Aa.set("Unknown")):(await t.Va.stop(),iE(t))})),t.Va}function Ns(t){return t.ma||(t.ma=function(n,r,s){const i=Te(n);return i.ia(),new Yx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:aP.bind(null,t),n_:uP.bind(null,t),ea:lP.bind(null,t),ta:cP.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Lu(t)):(await t.ma.stop(),t.Pa.length>0&&(ie(di,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new jp(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dp(t,e){if($r("AsyncQueue",`${e}: ${t}`),Eo(t))return new re(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{static emptySet(e){return new Xi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=Jo(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.fa=new ot(fe.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):_e(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class fo{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new fo(e,n,Xi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class fP{constructor(){this.queries=Hv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=Te(n),i=s.queries;s.queries=Hv(),i.forEach((o,c)=>{for(const u of c.wa)u.onError(r)})})(this,new re(H.ABORTED,"Firestore shutting down"))}}function Hv(){return new yi(t=>kw(t),Ru)}async function bp(t,e){const n=Te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new hP,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Dp(o,`Initialization of query '${Pi(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&Mp(n)}async function Op(t,e){const n=Te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pP(t,e){const n=Te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.wa)c.Ca(s)&&(r=!0);o.ya=s}}r&&Mp(n)}function mP(t,e,n){const r=Te(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function Mp(t){t.Da.forEach(e=>{e.next()})}var nf,qv;(qv=nf||(nf={})).Fa="default",qv.Cache="cache";class Vp{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==nf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.key=e}}class uE{constructor(e){this.key=e}}class gP{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Re(),this.mutatedKeys=Re(),this.Xa=Nw(e),this.eu=new Xi(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new $v,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),w=ju(this.query,m)?m:null,k=!!g&&this.mutatedKeys.has(g.key),O=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let F=!1;g&&w?g.data.isEqual(w.data)?k!==O&&(r.track({type:3,doc:w}),F=!0):this.iu(g,w)||(r.track({type:2,doc:w}),F=!0,(u&&this.Xa(w,u)>0||d&&this.Xa(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),F=!0):g&&!w&&(r.track({type:1,doc:g}),F=!0,(u||d)&&(c=!0)),F&&(w?(o=o.add(w),i=O?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{eu:o,ru:r,Ds:c,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((f,m)=>function(w,k){const O=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:F})}};return O(w)-O(k)}(f.type,m.type)||this.Xa(f.doc,m.doc)),this.su(r),s=s!=null&&s;const c=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,d=u!==this.Ya;return this.Ya=u,o.length!==0||d?{snapshot:new fo(this.query,e.eu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $v,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Re(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new uE(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new cE(r))}),n}uu(e){this.Ha=e.qs,this.Za=Re();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return fo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Lp="SyncEngine";class vP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yP{constructor(e){this.key=e,this.lu=!1}}class _P{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new yi(c=>kw(c),Ru),this.Tu=new Map,this.Iu=new Set,this.du=new ot(fe.comparator),this.Eu=new Map,this.Au=new Sp,this.Ru={},this.Vu=new Map,this.mu=ho.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function wP(t,e,n=!0){const r=gE(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await dE(r,e,n,!0),s}async function EP(t,e){const n=gE(t);await dE(n,e,!0,!1)}async function dE(t,e,n,r){const s=await zx(t.localStore,ur(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await TP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&rE(t.remoteStore,s),c}async function TP(t,e,n,r,s){t.gu=(m,g,w)=>async function(O,F,A,I){let S=F.view.nu(A);S.Ds&&(S=await Vv(O.localStore,F.query,!1).then(({documents:v})=>F.view.nu(v,S)));const b=I&&I.targetChanges.get(F.targetId),N=I&&I.targetMismatches.get(F.targetId)!=null,L=F.view.applyChanges(S,O.isPrimaryClient,b,N);return Gv(O,F.targetId,L._u),L.snapshot}(t,m,g,w);const i=await Vv(t.localStore,e,!0),o=new gP(e,i.qs),c=o.nu(i.documents),u=tl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Gv(t,n,d._u);const f=new vP(e,n,o);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function IP(t,e,n){const r=Te(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Ru(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ef(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Pp(r.remoteStore,s.targetId),rf(r,s.targetId)}).catch(wo)):(rf(r,s.targetId),await ef(r.localStore,s.targetId,!0))}async function SP(t,e){const n=Te(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pp(n.remoteStore,r.targetId))}async function AP(t,e,n){const r=jP(t);try{const s=await function(o,c){const u=Te(o),d=Ke.now(),f=c.reduce((w,k)=>w.add(k.key),Re());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let k=Hr(),O=Re();return u.Os.getEntries(w,f).next(F=>{k=F,k.forEach((A,I)=>{I.isValidDocument()||(O=O.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,k)).next(F=>{m=F;const A=[];for(const I of c){const S=zC(I,m.get(I.key).overlayedDocument);S!=null&&A.push(new Ms(I.key,S,Ew(S.value.mapValue),Mn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,A,c)}).next(F=>{g=F;const A=F.applyToLocalDocumentSet(m,O);return u.documentOverlayCache.saveOverlays(w,F.batchId,A)})}).then(()=>({batchId:g.batchId,changes:jw(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ru[o.currentUser.toKey()];d||(d=new ot(Ce)),d=d.insert(c,u),o.Ru[o.currentUser.toKey()]=d}(r,s.batchId,n),await rl(r,s.changes),await Lu(r.remoteStore)}catch(s){const i=Dp(s,"Failed to persist write");n.reject(i)}}async function hE(t,e){const n=Te(t);try{const r=await Lx(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?Le(o.lu,14607):s.removedDocuments.size>0&&(Le(o.lu,42227),o.lu=!1))}),await rl(n,r,e)}catch(r){await wo(r)}}function Wv(t,e,n){const r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=Te(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.wa)g.va(c)&&(d=!0)}),d&&Mp(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CP(t,e,n){const r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new ot(fe.comparator);o=o.insert(i,Yt.newNoDocument(i,we.min()));const c=Re().add(i),u=new Ou(we.min(),new Map,new ot(Ce),o,c);await hE(r,u),r.du=r.du.remove(i),r.Eu.delete(e),Fp(r)}else await ef(r.localStore,e,!1).then(()=>rf(r,e,n)).catch(wo)}async function xP(t,e){const n=Te(t),r=e.batch.batchId;try{const s=await Vx(n.localStore,e);pE(n,r,null),fE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rl(n,s)}catch(s){await wo(s)}}async function PP(t,e,n){const r=Te(t);try{const s=await function(o,c){const u=Te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Le(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);pE(r,e,n),fE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rl(r,s)}catch(s){await wo(s)}}function fE(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function pE(t,e,n){const r=Te(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function rf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||mE(t,r)})}function mE(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Pp(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Fp(t))}function Gv(t,e,n){for(const r of n)r instanceof cE?(t.Au.addReference(r.key,e),kP(t,r)):r instanceof uE?(ie(Lp,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||mE(t,r.key)):_e(19791,{yu:r})}function kP(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ie(Lp,"New document in limbo: "+n),t.Iu.add(r),Fp(t))}function Fp(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new fe($e.fromString(e)),r=t.mu.next();t.Eu.set(r,new yP(n)),t.du=t.du.insert(n,r),rE(t.remoteStore,new cs(ur(Nu(n.path)),r,"TargetPurposeLimboResolution",xu.ue))}}async function rl(t,e,n){const r=Te(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{o.push(r.gu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Cp.Es(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.hu.J_(s),await async function(u,d){const f=Te(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>W.forEach(d,g=>W.forEach(g.Is,w=>f.persistence.referenceDelegate.addReference(m,g.targetId,w)).next(()=>W.forEach(g.ds,w=>f.persistence.referenceDelegate.removeReference(m,g.targetId,w)))))}catch(m){if(!Eo(m))throw m;ie(xp,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const w=f.Fs.get(g),k=w.snapshotVersion,O=w.withLastLimboFreeSnapshotVersion(k);f.Fs=f.Fs.insert(g,O)}}}(r.localStore,i))}async function NP(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){ie(Lp,"User change. New user:",e.toKey());const r=await Zw(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(c=>{c.forEach(u=>{u.reject(new re(H.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rl(n,r.Bs)}}function RP(t,e){const n=Te(t),r=n.Eu.get(e);if(r&&r.lu)return Re().add(r.key);{let s=Re();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const c=n.Pu.get(o);s=s.unionWith(c.view.tu)}return s}}function gE(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CP.bind(null,e),e.hu.J_=pP.bind(null,e.eventManager),e.hu.pu=mP.bind(null,e.eventManager),e}function jP(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PP.bind(null,e),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Mx(this.persistence,new Dx,e.initialUser,this.serializer)}Du(e){return new Jw(Ap.Vi,this.serializer)}bu(e){return new $x}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class DP extends Yc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Le(this.persistence.referenceDelegate instanceof Kc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yx(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Jw(r=>Kc.Vi(r,n),this.serializer)}}class sf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NP.bind(null,this.syncEngine),await dP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fP}()}createDatastore(e){const n=Mu(e.databaseInfo.databaseId),r=function(i){return new Kx(i)}(e.databaseInfo);return function(i,o,c,u){return new Jx(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new eP(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Wv(this.syncEngine,n,0),function(){return Uv.C()?new Uv:new Hx}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,f){const m=new _P(s,i,o,c,u,d);return f&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Te(s);ie(di,"RemoteStore shutting down."),i.Ia.add(5),await nl(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sf.provider={build:()=>new sf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="FirestoreClient";class bP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Kt.UNAUTHENTICATED,this.clientId=fp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ie(Rs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ie(Rs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ld(t,e){t.asyncQueue.verifyOperationInProgress(),ie(Rs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Zw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{As("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{As("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Kv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await OP(t);ie(Rs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Bv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Bv(e.remoteStore,s)),t._onlineComponents=e}async function OP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(Rs,"Using user provided OfflineComponentProvider");try{await Ld(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;As("Error using user provided cache. Falling back to memory cache: "+n),await Ld(t,new Yc)}}else ie(Rs,"Using default OfflineComponentProvider"),await Ld(t,new DP(void 0));return t._offlineComponents}async function vE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(Rs,"Using user provided OnlineComponentProvider"),await Kv(t,t._uninitializedComponentsProvider._online)):(ie(Rs,"Using default OnlineComponentProvider"),await Kv(t,new sf))),t._onlineComponents}function MP(t){return vE(t).then(e=>e.syncEngine)}async function Xc(t){const e=await vE(t),n=e.eventManager;return n.onListen=wP.bind(null,e.syncEngine),n.onUnlisten=IP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SP.bind(null,e.syncEngine),n}function VP(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new Up({next:g=>{f.Ou(),o.enqueueAndForget(()=>Op(i,m));const w=g.docs.has(c);!w&&g.fromCache?d.reject(new re(H.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new re(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Vp(Nu(c.path),f,{includeMetadataChanges:!0,ka:!0});return bp(i,m)}(await Xc(t),t.asyncQueue,e,n,r)),r.promise}function LP(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new Up({next:g=>{f.Ou(),o.enqueueAndForget(()=>Op(i,m)),g.fromCache&&u.source==="server"?d.reject(new re(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Vp(c,f,{includeMetadataChanges:!0,ka:!0});return bp(i,m)}(await Xc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="firestore.googleapis.com",Yv=!0;class Xv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_E,this.ssl=Yv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Xw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gx)throw new re(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qA;switch(r.type){case"firstParty":return new QA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qv.get(n);r&&(ie("ComponentProvider","Removing Datastore"),Qv.delete(n),r.terminate())}(this),Promise.resolve()}}function FP(t,e,n,r={}){var s;t=gn(t,Fu);const i=vi(e),o=t._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(ap(`https://${u}`),lp("Firestore",!0)),o.host!==_E&&o.host!==u&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!li(d,c)&&(t._setSettings(d),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=Kt.MOCK_USER;else{f=g1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new re(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Kt(g)}t._authCredentials=new WA(new lw(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ja(n,ft._jsonSchema))return new ft(e,r||null,new fe($e.fromString(n.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:wt("string",ft._jsonSchemaVersion),referencePath:wt("string")};class Es extends wi{constructor(e,n,r){super(e,n,Nu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new fe(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function Nn(t,e,...n){if(t=it(t),uw("collection","path",e),t instanceof Fu){const r=$e.fromString(e,...n);return uv(r),new Es(t,null,r)}{if(!(t instanceof ft||t instanceof Es))throw new re(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return uv(r),new Es(t.firestore,null,r)}}function dt(t,e,...n){if(t=it(t),arguments.length===1&&(e=fp.newId()),uw("doc","path",e),t instanceof Fu){const r=$e.fromString(e,...n);return cv(r),new ft(t,null,new fe(r))}{if(!(t instanceof ft||t instanceof Es))throw new re(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return cv(r),new ft(t.firestore,t instanceof Es?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="AsyncQueue";class Zv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new tE(this,"async_queue_retry"),this.oc=()=>{const r=Vd();r&&ie(Jv,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Vd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Vd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Mr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Eo(e))throw e;ie(Jv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,$r("INTERNAL UNHANDLED ERROR: ",ey(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=jp.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&_e(47125,{hc:ey(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function ey(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class qr extends Fu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zv(e),this._firestoreClient=void 0,await e}}}function UP(t,e){const n=typeof t=="object"?t:dp(),r=typeof t=="string"?t:Bc,s=Au(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=K0("firestore");i&&FP(s,...i)}return s}function Uu(t){if(t._terminated)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zP(t),t._firestoreClient}function zP(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new dC(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,yE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new bP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(Ut.fromBase64String(e))}catch(n){throw new re(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dn(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ja(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:wt("string",Dn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hr._jsonSchemaVersion}}static fromJSON(e){if(Ja(e,hr._jsonSchema))return new hr(e.latitude,e.longitude)}}hr._jsonSchemaVersion="firestore/geoPoint/1.0",hr._jsonSchema={type:wt("string",hr._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ja(e,fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fr(e.vectorValues);throw new re(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fr._jsonSchemaVersion="firestore/vectorValue/1.0",fr._jsonSchema={type:wt("string",fr._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=/^__.*__$/;class $P{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new el(e,this.data,n,this.fieldTransforms)}}class wE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function EE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:t})}}class zp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new zp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Jc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(EE(this.Ec)&&BP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class HP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mu(e)}Dc(e,n,r,s=!1){return new zp({Ec:e,methodName:n,bc:r,path:Vt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $u(t){const e=t._freezeSettings(),n=Mu(t._databaseId);return new HP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TE(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);$p("Data must be an object, but it was:",o,r);const c=IE(r,o);let u,d;if(i.merge)u=new In(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=of(e,m,n);if(!o.contains(g))throw new re(H.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);AE(f,g)||f.push(g)}u=new In(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new $P(new un(c),u,d)}class Hu extends Bu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hu}}class Bp extends Bu{_toFieldTransform(e){return new VC(e.path,new Fa)}isEqual(e){return e instanceof Bp}}function qP(t,e,n,r){const s=t.Dc(1,e,n);$p("Data must be an object, but it was:",s,r);const i=[],o=un.empty();Os(r,(u,d)=>{const f=Hp(e,u,n);d=it(d);const m=s.gc(f);if(d instanceof Hu)i.push(f);else{const g=sl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const c=new In(i);return new wE(o,c,s.fieldTransforms)}function WP(t,e,n,r,s,i){const o=t.Dc(1,e,n),c=[of(e,r,n)],u=[s];if(i.length%2!=0)throw new re(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(of(e,i[g])),u.push(i[g+1]);const d=[],f=un.empty();for(let g=c.length-1;g>=0;--g)if(!AE(d,c[g])){const w=c[g];let k=u[g];k=it(k);const O=o.gc(w);if(k instanceof Hu)d.push(w);else{const F=sl(k,O);F!=null&&(d.push(w),f.set(w,F))}}const m=new In(d);return new wE(f,m,o.fieldTransforms)}function GP(t,e,n,r=!1){return sl(n,t.Dc(r?4:3,e))}function sl(t,e){if(SE(t=it(t)))return $p("Unsupported field value:",e,t),IE(t,e);if(t instanceof Bu)return function(r,s){if(!EE(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=sl(c,s.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:Gc(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gc(s.serializer,i)}}if(r instanceof hr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dn)return{bytesValue:Hw(s.serializer,r._byteString)};if(r instanceof ft){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ip(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof fr)return function(o,c){return{mapValue:{fields:{[_w]:{stringValue:ww},[$c]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.wc("VectorValues must only contain numeric values.");return _p(c.serializer,d)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Cu(r)}`)}(t,e)}function IE(t,e){const n={};return fw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(t,(r,s)=>{const i=sl(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function SE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof hr||t instanceof Dn||t instanceof ft||t instanceof Bu||t instanceof fr)}function $p(t,e,n){if(!SE(n)||!dw(n)){const r=Cu(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function of(t,e,n){if((e=it(e))instanceof zu)return e._internalPath;if(typeof e=="string")return Hp(t,e);throw Jc("Field path arguments must be of type string or ",t,!1,void 0,n)}const KP=new RegExp("[~\\*/\\[\\]]");function Hp(t,e,n){if(e.search(KP)>=0)throw Jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zu(...e.split("."))._internalPath}catch{throw Jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new re(H.INVALID_ARGUMENT,c+t+u)}function AE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QP extends CE{data(){return super.data()}}function qp(t,e){return typeof e=="string"?Hp(t,e):e instanceof zu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wp{}class YP extends Wp{}function Fd(t,e,...n){let r=[];e instanceof Wp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Gp).length,c=i.filter(u=>u instanceof qu).length;if(o>1||o>0&&c>0)throw new re(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class qu extends YP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qu(e,n,r)}_apply(e){const n=this._parse(e);return PE(e._query,n),new wi(e.firestore,e.converter,Kh(e._query,n))}_parse(e){const n=$u(e.firestore);return function(i,o,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new re(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){ry(m,f);const k=[];for(const O of m)k.push(ny(u,i,O));g={arrayValue:{values:k}}}else g=ny(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||ry(m,f),g=GP(c,o,m,f==="in"||f==="not-in");return _t.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ud(t,e,n){const r=e,s=qp("where",t);return qu._create(s,r,n)}class Gp extends Wp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)PE(o,u),o=Kh(o,u)}(e._query,n),new wi(e.firestore,e.converter,Kh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ny(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new re(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pw(e)&&n.indexOf("/")!==-1)throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child($e.fromString(n));if(!fe.isDocumentKey(r))throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yv(t,new fe(r))}if(n instanceof ft)return yv(t,n._key);throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cu(n)}.`)}function ry(t,e){if(!Array.isArray(t)||t.length===0)throw new re(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PE(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class XP{convertValue(e,n="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Os(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[$c].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>pt(o.doubleValue));return new fr(i)}convertGeoPoint(e){return new hr(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ku(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ma(e));default:return null}}convertTimestamp(e){const n=xs(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$e.fromString(e);Le(Yw(r),9688,{name:e});const s=new Va(r.get(1),r.get(3)),i=new fe(r.popFirst(5));return s.isEqual(n)||$r(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ti extends CE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ti._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ti._jsonSchemaVersion="firestore/documentSnapshot/1.0",ti._jsonSchema={type:wt("string",ti._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class uc extends ti{data(e={}){return super.data(e)}}class ni{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ea(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new uc(this._firestore,this._userDataWriter,r.key,r,new ea(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new uc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ea(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new uc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ea(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:JP(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ni._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function JP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t){t=gn(t,ft);const e=gn(t.firestore,qr);return VP(Uu(e),t._key).then(n=>NE(e,t,n))}ni._jsonSchemaVersion="firestore/querySnapshot/1.0",ni._jsonSchema={type:wt("string",ni._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class Kp extends XP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function zd(t){t=gn(t,wi);const e=gn(t.firestore,qr),n=Uu(e),r=new Kp(e);return xE(t._query),LP(n,t._query).then(s=>new ni(e,r,t,s))}function kr(t,e,n){t=gn(t,ft);const r=gn(t.firestore,qr),s=kE(t.converter,e,n);return Wu(r,[TE($u(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Mn.none())])}function Js(t,e,n,...r){t=gn(t,ft);const s=gn(t.firestore,qr),i=$u(s);let o;return o=typeof(e=it(e))=="string"||e instanceof zu?WP(i,"updateDoc",t._key,e,n,r):qP(i,"updateDoc",t._key,e),Wu(s,[o.toMutation(t._key,Mn.exists(!0))])}function Zc(t){return Wu(gn(t.firestore,qr),[new wp(t._key,Mn.none())])}function sy(t,e){const n=gn(t.firestore,qr),r=dt(t),s=kE(t.converter,e);return Wu(n,[TE($u(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}function Gs(t,...e){var n,r,s;t=it(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ty(e[o])||(i=e[o++]);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(ty(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,f;if(t instanceof ft)d=gn(t.firestore,qr),f=Nu(t._key.path),u={next:m=>{e[o]&&e[o](NE(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=gn(t,wi);d=gn(m.firestore,qr),f=m._query;const g=new Kp(d);u={next:w=>{e[o]&&e[o](new ni(d,g,m,w))},error:e[o+1],complete:e[o+2]},xE(t._query)}return function(g,w,k,O){const F=new Up(O),A=new Vp(w,F,k);return g.asyncQueue.enqueueAndForget(async()=>bp(await Xc(g),A)),()=>{F.Ou(),g.asyncQueue.enqueueAndForget(async()=>Op(await Xc(g),A))}}(Uu(d),f,c,u)}function Wu(t,e){return function(r,s){const i=new Mr;return r.asyncQueue.enqueueAndForget(async()=>AP(await MP(r),s,i)),i.promise}(Uu(t),e)}function NE(t,e,n){const r=n.docs.get(e._key),s=new Kp(t);return new ti(t,s,e._key,r,new ea(n.hasPendingWrites,n.fromCache),e.converter)}function iy(){return new Bp("serverTimestamp")}(function(e,n=!0){(function(s){_o=s})(yo),ci(new Ss("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new qr(new GA(r.getProvider("auth-internal")),new YA(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new re(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),cr(sv,iv,e),cr(sv,iv,"esm2017")})();function Qp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function RE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ek=RE,jE=new Ya("auth","Firebase",RE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new cp("@firebase/auth");function tk(t,...e){eu.logLevel<=Ne.WARN&&eu.warn(`Auth (${yo}): ${t}`,...e)}function dc(t,...e){eu.logLevel<=Ne.ERROR&&eu.error(`Auth (${yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t,...e){throw Yp(t,...e)}function pr(t,...e){return Yp(t,...e)}function DE(t,e,n){const r=Object.assign(Object.assign({},ek()),{[e]:n});return new Ya("auth","Firebase",r).create(e,{appName:t.name})}function Vr(t){return DE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jE.create(t,...e)}function ye(t,e,...n){if(!t)throw Yp(e,...n)}function jr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dc(e),new Error(e)}function Wr(t,e){t||jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nk(){return oy()==="http:"||oy()==="https:"}function oy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nk()||T1()||"connection"in navigator)?navigator.onLine:!0}function sk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=_1()||I1()}get(){return rk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ak=new il(3e4,6e4);function Vs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ls(t,e,n,r,s={}){return OE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Xa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return E1()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&vi(t.emulatorConfig.host)&&(d.credentials="include"),bE.fetch()(await ME(t,t.config.apiHost,n,c),d)})}async function OE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ik),e);try{const s=new ck(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Wl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Wl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw DE(t,f,d);Zn(t,f)}}catch(s){if(s instanceof vr)throw s;Zn(t,"network-request-failed",{message:String(s)})}}async function ol(t,e,n,r,s={}){const i=await Ls(t,e,n,r,s);return"mfaPendingCredential"in i&&Zn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function ME(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Xp(t.config,s):`${t.config.apiScheme}://${s}`;return ok.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function lk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ck{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pr(this.auth,"network-request-failed")),ak.get())})}}function Wl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pr(t,e,r);return s.customData._tokenResponse=n,s}function ay(t){return t!==void 0&&t.enterprise!==void 0}class uk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dk(t,e){return Ls(t,"GET","/v2/recaptchaConfig",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(t,e){return Ls(t,"POST","/v1/accounts:delete",e)}async function tu(t,e){return Ls(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fk(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=Jp(r);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ga(Bd(s.auth_time)),issuedAtTime:ga(Bd(s.iat)),expirationTime:ga(Bd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Bd(t){return Number(t)*1e3}function Jp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dc("JWT malformed, contained fewer than 3 sections"),null;try{const s=W0(n);return s?JSON.parse(s):(dc("Failed to decode base64 JWT payload"),null)}catch(s){return dc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ly(t){const e=Jp(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vr&&pk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ga(this.lastLoginAt),this.creationTime=ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ba(t,tu(n,{idToken:r}));ye(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?VE(i.providerUserInfo):[],c=vk(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new lf(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function gk(t){const e=it(t);await nu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function VE(t){return t.map(e=>{var{providerId:n}=e,r=Qp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e){const n=await OE(t,{},async()=>{const r=Xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await ME(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&vi(t.emulatorConfig.host)&&(u.credentials="include"),bE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _k(t,e){return Ls(t,"POST","/v2/accounts:revokeToken",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ly(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=ly(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await yk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ji;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ji,this.toJSON())}_performRefresh(){return jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Qp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ba(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fk(this,e)}reload(){return gk(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await Ba(this,hk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,O=(c=n.tenantId)!==null&&c!==void 0?c:void 0,F=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,A=(d=n.createdAt)!==null&&d!==void 0?d:void 0,I=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:S,emailVerified:b,isAnonymous:N,providerData:L,stsTokenManager:v}=n;ye(S&&v,e,"internal-error");const y=Ji.fromJSON(this.name,v);ye(typeof S=="string",e,"internal-error"),Jr(m,e.name),Jr(g,e.name),ye(typeof b=="boolean",e,"internal-error"),ye(typeof N=="boolean",e,"internal-error"),Jr(w,e.name),Jr(k,e.name),Jr(O,e.name),Jr(F,e.name),Jr(A,e.name),Jr(I,e.name);const T=new Kn({uid:S,auth:e,email:g,emailVerified:b,displayName:m,isAnonymous:N,photoURL:k,phoneNumber:w,tenantId:O,stsTokenManager:y,createdAt:A,lastLoginAt:I});return L&&Array.isArray(L)&&(T.providerData=L.map(C=>Object.assign({},C))),F&&(T._redirectEventId=F),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ji;s.updateFromServerResponse(n);const i=new Kn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await nu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?VE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Ji;c.updateFromIdToken(r);const u=new Kn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new lf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new Map;function Dr(t){Wr(t instanceof Function,"Expected a class definition");let e=cy.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}LE.type="NONE";const uy=LE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,e,n){return`firebase:${t}:${e}:${n}`}class Zi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=hc(this.userKey,s.apiKey,i),this.fullPersistenceKey=hc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await tu(this.auth,{idToken:e}).catch(()=>{});return n?Kn._fromGetAccountInfoResponse(this.auth,n,e):null}return Kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zi(Dr(uy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Dr(uy);const o=hc(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await tu(e,{idToken:f}).catch(()=>{});if(!g)break;m=await Kn._fromGetAccountInfoResponse(e,g,f)}else m=Kn._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Zi(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Zi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HE(e))return"Blackberry";if(qE(e))return"Webos";if(UE(e))return"Safari";if((e.includes("chrome/")||zE(e))&&!e.includes("edge/"))return"Chrome";if($E(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FE(t=Jt()){return/firefox\//i.test(t)}function UE(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zE(t=Jt()){return/crios\//i.test(t)}function BE(t=Jt()){return/iemobile/i.test(t)}function $E(t=Jt()){return/android/i.test(t)}function HE(t=Jt()){return/blackberry/i.test(t)}function qE(t=Jt()){return/webos/i.test(t)}function Zp(t=Jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wk(t=Jt()){var e;return Zp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ek(){return S1()&&document.documentMode===10}function WE(t=Jt()){return Zp(t)||$E(t)||qE(t)||HE(t)||/windows phone/i.test(t)||BE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t,e=[]){let n;switch(t){case"Browser":n=dy(Jt());break;case"Worker":n=`${dy(Jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik(t,e={}){return Ls(t,"GET","/v2/passwordPolicy",Vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=6;class Ak{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Sk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hy(this),this.idTokenSubscription=new hy(this),this.beforeStateQueue=new Tk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Zi.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tu(this,{idToken:e}),r=await Kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(En(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(Vr(this));const n=e?it(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ik(this),n=new Ak(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ya("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _k(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dr(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Zi.create(this,[Dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&tk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ei(t){return it(t)}class hy{constructor(e){this.auth=e,this.observer=null,this.addObserver=j1(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xk(t){Gu=t}function KE(t){return Gu.loadJS(t)}function Pk(){return Gu.recaptchaEnterpriseScript}function kk(){return Gu.gapiScript}function Nk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Rk{constructor(){this.enterprise=new jk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Dk="recaptcha-enterprise",QE="NO_RECAPTCHA";class bk{constructor(e){this.type=Dk,this.auth=Ei(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{dk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new uk(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;ay(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(QE)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Rk().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&ay(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Pk();u.length!==0&&(u+=c),KE(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function fy(t,e,n,r=!1,s=!1){const i=new bk(t);let o;if(s)o=QE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function cf(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await fy(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await fy(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t,e){const n=Au(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(li(i,e??{}))return s;Zn(s,"already-initialized")}return n.initialize({options:e})}function Mk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Vk(t,e,n){const r=Ei(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=YE(e),{host:o,port:c}=Lk(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(li(d,r.config.emulator)&&li(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,vi(o)?(ap(`${i}//${o}${u}`),lp("Auth",!0)):Fk()}function YE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Lk(t){const e=YE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:py(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:py(o)}}}function py(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Fk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,n){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}}async function Uk(t,e){return Ls(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t,e){return ol(t,"POST","/v1/accounts:signInWithPassword",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(t,e){return ol(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}async function $k(t,e){return ol(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends em{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new $a(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $a(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cf(e,n,"signInWithPassword",zk);case"emailLink":return Bk(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cf(e,r,"signUpPassword",Uk);case"emailLink":return $k(e,{idToken:n,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t,e){return ol(t,"POST","/v1/accounts:signInWithIdp",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="http://localhost";class hi extends em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Qp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new hi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return eo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,eo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,eo(e,n)}buildRequest(){const e={requestUri:Hk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Wk(t){const e=Qo(Yo(t)).link,n=e?Qo(Yo(e)).deep_link_id:null,r=Qo(Yo(t)).deep_link_id;return(r?Qo(Yo(r)).link:null)||r||n||e||t}class tm{constructor(e){var n,r,s,i,o,c;const u=Qo(Yo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=qk((s=u.mode)!==null&&s!==void 0?s:null);ye(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=Wk(e);try{return new tm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,n){return $a._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=tm.parseLink(n);return ye(r,"argument-error"),$a._fromEmailAndCode(e,r.code,r.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends XE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends al{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hi._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.GOOGLE_SIGN_IN_METHOD="google.com";ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends al{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends al{constructor(){super("twitter.com")}static credential(e,n){return hi._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return os.credential(n,r)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(t,e){return ol(t,"POST","/v1/accounts:signUp",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Kn._fromIdTokenResponse(e,r,s),o=my(r);return new fi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=my(r);return new fi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function my(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends vr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ru.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ru(e,n,r,s)}}function JE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ru._fromErrorAndOperation(t,i,e,r):i})}async function Kk(t,e,n=!1){const r=await Ba(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(t,e,n=!1){const{auth:r}=t;if(En(r.app))return Promise.reject(Vr(r));const s="reauthenticate";try{const i=await Ba(t,JE(r,s,e,t),n);ye(i.idToken,r,"internal-error");const o=Jp(i.idToken);ye(o,r,"internal-error");const{sub:c}=o;return ye(t.uid===c,r,"user-mismatch"),fi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Zn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZE(t,e,n=!1){if(En(t.app))return Promise.reject(Vr(t));const r="signIn",s=await JE(t,r,e),i=await fi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Yk(t,e){return ZE(Ei(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eT(t){const e=Ei(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tT(t,e,n){if(En(t.app))return Promise.reject(Vr(t));const r=Ei(t),o=await cf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gk).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&eT(t),u}),c=await fi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function Xk(t,e,n){return En(t.app)?Promise.reject(Vr(t)):Yk(it(t),Io.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t,e){return it(t).setPersistence(e)}function Zk(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function eN(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function tN(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function nN(t){return it(t).signOut()}const su="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(su,"1"),this.storage.removeItem(su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=1e3,sN=10;class rT extends nT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Ek()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,sN):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rT.type="LOCAL";const iN=rT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT extends nT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sT.type="SESSION";const nm=sT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ku(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await oN(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ku.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=rm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(){return window}function lN(t){mr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(){return typeof mr().WorkerGlobalScope<"u"&&typeof mr().importScripts=="function"}async function cN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dN(){return iT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="firebaseLocalStorageDb",hN=1,iu="firebaseLocalStorage",aT="fbase_key";class ll{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qu(t,e){return t.transaction([iu],e?"readwrite":"readonly").objectStore(iu)}function fN(){const t=indexedDB.deleteDatabase(oT);return new ll(t).toPromise()}function uf(){const t=indexedDB.open(oT,hN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(iu,{keyPath:aT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(iu)?e(r):(r.close(),await fN(),e(await uf()))})})}async function gy(t,e,n){const r=Qu(t,!0).put({[aT]:e,value:n});return new ll(r).toPromise()}async function pN(t,e){const n=Qu(t,!1).get(e),r=await new ll(n).toPromise();return r===void 0?null:r.value}function vy(t,e){const n=Qu(t,!0).delete(e);return new ll(n).toPromise()}const mN=800,gN=3;class lT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>gN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ku._getInstance(dN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cN(),!this.activeServiceWorker)return;this.sender=new aN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uf();return await gy(e,su,"1"),await vy(e,su),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>gy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Qu(s,!1).getAll();return new ll(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lT.type="LOCAL";const vN=lT;new il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t,e){return e?Dr(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _N(t){return ZE(t.auth,new sm(t),t.bypassAuthState)}function wN(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),Qk(n,new sm(t),t.bypassAuthState)}async function EN(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),Kk(n,new sm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _N;case"linkViaPopup":case"linkViaRedirect":return EN;case"reauthViaPopup":case"reauthViaRedirect":return wN;default:Zn(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=new il(2e3,1e4);class Hi extends cT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Hi.currentPopupAction&&Hi.currentPopupAction.cancel(),Hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=rm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TN.get())};e()}}Hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="pendingRedirect",fc=new Map;class SN extends cT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fc.get(this.auth._key());if(!e){try{const r=await AN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fc.set(this.auth._key(),e)}return this.bypassAuthState||fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AN(t,e){const n=PN(e),r=xN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function CN(t,e){fc.set(t._key(),e)}function xN(t){return Dr(t._redirectPersistence)}function PN(t){return hc(IN,t.config.apiKey,t.name)}async function kN(t,e,n=!1){if(En(t.app))return Promise.reject(Vr(t));const r=Ei(t),s=yN(r,e),o=await new SN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=10*60*1e3;class RN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!uT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NN&&this.cachedEventUids.clear(),this.cachedEventUids.has(yy(e))}saveEventToCache(e){this.cachedEventUids.add(yy(e)),this.lastProcessedEventTime=Date.now()}}function yy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e={}){return Ls(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ON=/^https?/;async function MN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DN(t);for(const n of e)try{if(VN(n))return}catch{}Zn(t,"unauthorized-domain")}function VN(t){const e=af(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ON.test(n))return!1;if(bN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new il(3e4,6e4);function _y(){const t=mr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FN(t){return new Promise((e,n)=>{var r,s,i;function o(){_y(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_y(),n(pr(t,"network-request-failed"))},timeout:LN.get()})}if(!((s=(r=mr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=mr().gapi)===null||i===void 0)&&i.load)o();else{const c=Nk("iframefcb");return mr()[c]=()=>{gapi.load?o():n(pr(t,"network-request-failed"))},KE(`${kk()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw pc=null,e})}let pc=null;function UN(t){return pc=pc||FN(t),pc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new il(5e3,15e3),BN="__/auth/iframe",$N="emulator/auth/iframe",HN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WN(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Xp(e,$N):`https://${t.config.authDomain}/${BN}`,r={apiKey:e.apiKey,appName:t.name,v:yo},s=qN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Xa(r).slice(1)}`}async function GN(t){const e=await UN(t),n=mr().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:WN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=pr(t,"network-request-failed"),c=mr().setTimeout(()=>{i(o)},zN.get());function u(){mr().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QN=500,YN=600,XN="_blank",JN="http://localhost";class wy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZN(t,e,n,r=QN,s=YN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},KN),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Jt().toLowerCase();n&&(c=zE(d)?XN:n),FE(d)&&(e=e||JN,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,k])=>`${g}${w}=${k},`,"");if(wk(d)&&c!=="_self")return eR(e||"",c),new wy(null);const m=window.open(e||"",c,f);ye(m,t,"popup-blocked");try{m.focus()}catch{}return new wy(m)}function eR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="__/auth/handler",nR="emulator/auth/handler",rR=encodeURIComponent("fac");async function Ey(t,e,n,r,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yo,eventId:s};if(e instanceof XE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",R1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof al){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${rR}=${encodeURIComponent(u)}`:"";return`${sR(t)}?${Xa(c).slice(1)}${d}`}function sR({config:t}){return t.emulator?Xp(t,nR):`https://${t.authDomain}/${tR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="webStorageSupport";class iR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nm,this._completeRedirectFn=kN,this._overrideRedirectResult=CN}async _openPopup(e,n,r,s){var i;Wr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Ey(e,n,r,af(),s);return ZN(e,o,rm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Ey(e,n,r,af(),s);return lN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Wr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GN(e),r=new RN(e);return n.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($d,{type:$d},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[$d];o!==void 0&&n(!!o),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WE()||UE()||Zp()}}const oR=iR;var Ty="@firebase/auth",Iy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cR(t){ci(new Ss("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GE(t)},d=new Ck(r,s,i,u);return Mk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ci(new Ss("auth-internal",e=>{const n=Ei(e.getProvider("auth").getImmediate());return(r=>new aR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(Ty,Iy,lR(t)),cr(Ty,Iy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=5*60,dR=Y0("authIdTokenMaxAge")||uR;let Sy=null;const hR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dR)return;const s=n==null?void 0:n.token;Sy!==s&&(Sy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function fR(t=dp()){const e=Au(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ok(t,{popupRedirectResolver:oR,persistence:[vN,iN,nm]}),r=Y0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=hR(i.toString());eN(n,o,()=>o(n.currentUser)),Zk(n,c=>o(c))}}const s=G0("auth");return s&&Vk(n,`http://${s}`),n}function pR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}xk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=pr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",pR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cR("Browser");const ta={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"},mR=typeof window<"u"&&window.__FIREBASE_CONFIG__||null,dT={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"},gR=!!(ta.apiKey&&ta.authDomain&&ta.projectId&&ta.appId),Ri=mR||(gR?ta:dT),vR=!!(Ri&&Ri.apiKey&&Ri.authDomain&&Ri.projectId&&Ri.appId);let pi=null;if(vR)try{pi=zh(Ri)}catch{try{pi=zh(dT)}catch{}}const de=pi?UP(pi):null,ir=pi?fR(pi):null;if(ir)try{Jk(ir,nm).catch(()=>{})}catch{}const Ay=pi;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="type.googleapis.com/google.protobuf.Int64Value",_R="type.googleapis.com/google.protobuf.UInt64Value";function hT(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function ou(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>ou(e));if(typeof t=="function"||typeof t=="object")return hT(t,e=>ou(e));throw new Error("Data cannot be encoded in JSON: "+t)}function po(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case yR:case _R:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>po(e)):typeof t=="function"||typeof t=="object"?hT(t,e=>po(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hn extends vr{constructor(e,n,r){super(`${im}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,hn.prototype)}}function wR(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function au(t,e){let n=wR(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Cy[o])return new hn("internal","internal");n=Cy[o],r=o}const c=i.message;typeof c=="string"&&(r=c),s=i.details,s!==void 0&&(s=po(s))}}catch{}return n==="ok"?null:new hn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,En(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="us-central1",TR=/^data: (.*?)(?:\n|$)/;function IR(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new hn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class SR{constructor(e,n,r,s,i=df,o=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new ER(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=df}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function AR(t,e,n){const r=vi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(ap(t.emulatorOrigin),lp("Functions",!0))}function CR(t,e,n){const r=s=>PR(t,e,s,{});return r.stream=(s,i)=>NR(t,e,s,i),r}async function xR(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}async function fT(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function PR(t,e,n,r){const s=t._url(e);return kR(t,s,n,r)}async function kR(t,e,n,r){n=ou(n);const s={data:n},i=await fT(t,r),o=r.timeout||7e4,c=IR(o),u=await Promise.race([xR(e,s,i,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!u)throw new hn("cancelled","Firebase Functions instance was deleted.");const d=au(u.status,u.json);if(d)throw d;if(!u.json)throw new hn("internal","Response is not valid JSON object.");let f=u.json.data;if(typeof f>"u"&&(f=u.json.result),typeof f>"u")throw new hn("internal","Response is missing data field.");return{data:po(f)}}function NR(t,e,n,r){const s=t._url(e);return RR(t,s,n,r||{})}async function RR(t,e,n,r){var s;n=ou(n);const i={data:n},o=await fT(t,r);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:o,signal:r==null?void 0:r.signal})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const O=new hn("cancelled","Request was cancelled.");return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}const k=au(0,null);return{data:Promise.reject(k),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(k)}}}}}}let u,d;const f=new Promise((w,k)=>{u=w,d=k});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const w=new hn("cancelled","Request was cancelled.");d(w)});const m=c.body.getReader(),g=jR(m,u,d,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const w=g.getReader();return{async next(){const{value:k,done:O}=await w.read();return{value:k,done:O}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:f}}function jR(t,e,n,r){const s=(o,c)=>{const u=o.match(TR);if(!u)return;const d=u[1];try{const f=JSON.parse(d);if("result"in f){e(po(f.result));return}if("message"in f){c.enqueue(po(f.message));return}if("error"in f){const m=au(0,f);c.error(m),n(m);return}}catch(f){if(f instanceof hn){c.error(f),n(f);return}}},i=new TextDecoder;return new ReadableStream({start(o){let c="";return u();async function u(){if(r!=null&&r.aborted){const d=new hn("cancelled","Request was cancelled");return o.error(d),n(d),Promise.resolve()}try{const{value:d,done:f}=await t.read();if(f){c.trim()&&s(c.trim(),o),o.close();return}if(r!=null&&r.aborted){const g=new hn("cancelled","Request was cancelled");o.error(g),n(g),await t.cancel();return}c+=i.decode(d,{stream:!0});const m=c.split(`
`);c=m.pop()||"";for(const g of m)g.trim()&&s(g.trim(),o);return u()}catch(d){const f=d instanceof hn?d:au(0,null);o.error(f),n(f)}}},cancel(){return t.cancel()}})}const xy="@firebase/functions",Py="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="auth-internal",bR="app-check-internal",OR="messaging-internal";function MR(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(DR),o=n.getProvider(OR),c=n.getProvider(bR);return new SR(s,i,o,c,r)};ci(new Ss(im,e,"PUBLIC").setMultipleInstances(!0)),cr(xy,Py,t),cr(xy,Py,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t=dp(),e=df){const r=Au(it(t),im).getImmediate({identifier:e}),s=K0("functions");return s&&LR(r,...s),r}function LR(t,e,n){AR(it(t),e,n)}function FR(t,e,n){return CR(it(t),e)}MR();const Ha=["Pendente","Em produo","Aguardando Feedback","Aprovada","Revisar","Concluida"],om=["Instagram","Trfego Pago","CRM","Influencers","Site","Branding","Outros"],UR=t=>t==="Aberta"?"Aberta":t==="Em Progresso"?"Em Progresso":t==="Concluda"?"Concluda":t,pT=t=>UR(t),mT=t=>{const e=(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")?"st-pending":e.includes("progresso")||e.includes("produo")?"st-progress":e.includes("feedback")?"st-feedback":e.includes("revisar")?"st-review":e.includes("aprov")?"st-approved":e.includes("conclu")?"st-concluded":e.includes("atras")?"st-late":""},am=t=>{const e=String(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")||t==="Aberta"||t==="Pendente"},lm=t=>{const e=String(t||"").toLowerCase();return e.includes("produo")||e.includes("progresso")||t==="Em Progresso"||t==="Em produo"},br=t=>{const e=String(t||"").toLowerCase();return e.includes("conclu")||e.includes("aprov")||t==="Concluda"||t==="Aprovada"},zR=t=>{const e=String(t||"").match(/@([a-zA-Z0-9_]+)/g);return e?e.map(n=>n.slice(1)):[]},ky=t=>{if(t==null)return"";const e=Math.max(0,Math.round(t)),n=Math.floor(e/60),r=e%60;return n>0?`${n}h ${r}m`:`${r}m`},hf=(t,e)=>{const n=t.filter(N=>String(N.status||"").toLowerCase().includes("conclu")||N.status==="Concluda"),r=n.filter(N=>(N.designer||"")===(e.designer||"")),s=n.filter(N=>(N.tipoMidia||"")===(e.tipoMidia||"")),i=n.filter(N=>(N.origem||"")===(e.origem||"")),o=n.filter(N=>(N.plataforma||"")===(e.plataforma||"")),c=(N,L)=>{const v=C=>{const[R,j,x]=String(C||"").split("-").map(Number);return R?new Date(R,j-1,x):null},y=v(N),T=v(L);return!y||!T?null:Math.max(0,Math.round((T-y)/864e5))},u=(()=>{const N=n.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),L=N.reduce((v,y)=>v+y,0)/(N.length||1);return Math.max(1,Math.round(L))})(),d=(()=>{const N=r.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),L=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(L)):null})(),f=(()=>{const N=s.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),L=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(L)):null})(),m=(()=>{const N=i.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),L=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(L)):null})(),g=(()=>{const N=o.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),L=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(L)):null})(),w=(()=>{const N=r.map(v=>v.revisoes||0),L=N.reduce((v,y)=>v+y,0)/(N.length||1);return Math.round(L)})(),k=t.filter(N=>(N.designer||"")===(e.designer||"")&&!/conclu/i.test(String(N.status||""))).length,F=Math.min(100,Math.round(k/4*100)),A=d??f??g??m??u,I=(F>=80?1:0)+(w>=2?1:0),S=Math.max(1,A+I),b=[];return b.push(`Estimativa: ${S} dia${S>1?"s":""} teis`),F>=80&&b.push("Alta probabilidade de atraso devido  carga acima de 80%"),S===1&&b.push("Pea deve ser concluda ainda hoje  Hoje at s 17h"),w>=2&&b.push("Revises esperadas acima da mdia para este designer"),b.join("  ")},gT={bg:"#070707",panel:"#0E0E0E",text:"#F2F2F2",muted:"#BDBDBD",border:"#ffffff1a",accent:"#BCD200",hover:"rgba(255,255,255,0.03)",btnBg:"#BCD200",btnText:"#111111",btnHoverBg:"#C7DB00",btnBorder:"#ffffff1a",shadow:"0 10px 30px rgba(0,0,0,.15)",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",chart:"#3b82f6"},wn=()=>{const t=new Date,e=n=>String(n).padStart(2,"0");return`${t.getFullYear()}-${e(t.getMonth()+1)}-${e(t.getDate())}`},Ny=t=>{const e=t.map(n=>typeof n.id=="number"?n.id:Number(n.id)||0);return e.length?Math.max(...e)+1:1};function BR({series:t,color:e="#BCD200"}){const s=Math.max(...t,1),i=t.length>1?120/(t.length-1):120,o=t.map((u,d)=>({x:d*i,y:30-u/s*30})),c=o.map(u=>`${u.x},${u.y}`).join(" ");return l.jsxs("svg",{width:120,height:30,className:"sparkline",viewBox:"0 0 120 30",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"sg",x1:"0",x2:"1",y1:"0",y2:"0",children:[l.jsx("stop",{offset:"0%",stopColor:e,stopOpacity:"0.6"}),l.jsx("stop",{offset:"100%",stopColor:e,stopOpacity:"1"})]})}),l.jsx("polyline",{points:c,fill:"none",stroke:"url(#sg)",strokeWidth:"2.5"}),o.map((u,d)=>l.jsx("circle",{cx:u.x,cy:u.y,r:"2.5",fill:e},d))]})}function De({name:t,size:e=18}){const n={width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};return t==="dashboard"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"})]}):t==="demandas"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M8 3h8"}),l.jsx("path",{d:"M8 7h8"}),l.jsx("rect",{x:"5",y:"3",width:"14",height:"18",rx:"2"})]}):t==="config"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.7 1.7 0 0 0 .3 1.8l.1.1-1.5 2.6-.1.1a1.8 1.8 0 0 0-2.2.8h-.2l-3-.4h-.2a1.8 1.8 0 0 0-1.6 0h-.2l-3 .4h-.2a1.8 1.8 0 0 0-2.2-.8l-.1-.1-1.5-2.6.1-.1a1.8 1.8 0 0 0 .3-1.8v-.2l-.4-3v-.2a1.8 1.8 0 0 0 0-1.6v-.2l.4-3v-.2a1.7 1.7 0 0 0-.3-1.8l-.1-.1L4.4 4l.1-.1a1.8 1.8 0 0 0 2.2-.8h.2l3 .4h.2a1.8 1.8 0 0 0 1.6 0h.2l3-.4h.2a1.8 1.8 0 0 0 2.2.8l.1.1 1.5 2.6-.1.1a1.8 1.8 0 0 0-.3 1.8v.2l.4 3v.2a1.8 1.8 0 0 0 0 1.6v.2Z"})]}):t==="cadastros"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M4 6h16"}),l.jsx("path",{d:"M4 12h10"}),l.jsx("path",{d:"M4 18h7"})]}):t==="relatorios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 20h18"}),l.jsx("rect",{x:"6",y:"14",width:"3",height:"6"}),l.jsx("rect",{x:"11",y:"10",width:"3",height:"10"}),l.jsx("rect",{x:"16",y:"6",width:"3",height:"14"})]}):t==="usuarios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"3"}),l.jsx("path",{d:"M19 8v6"}),l.jsx("path",{d:"M22 11h-6"})]}):t==="filter"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"11",cy:"11",r:"7"}),l.jsx("path",{d:"M20 20l-3.5-3.5"})]}):t==="table"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M3 10h18"}),l.jsx("path",{d:"M10 4v16"})]}):t==="board"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"10",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"17",y:"4",width:"4",height:"16",rx:"2"})]}):t==="calendar"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M16 3v4"}),l.jsx("path",{d:"M8 3v4"}),l.jsx("path",{d:"M3 11h18"})]}):t==="close"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M18 6L6 18"}),l.jsx("path",{d:"M6 6l12 12"})]}):t==="clock"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"9"}),l.jsx("path",{d:"M12 7v5l3 3"})]}):t==="paperclip"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21.44 11.05 12.5 20a5 5 0 1 1-7.07-7.07L14.36 4a3.5 3.5 0 0 1 4.95 4.95l-9.19 9.19"})}):t==="chat"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4Z"})}):t==="check"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M20 6 9 17l-5-5"})}):t==="plus"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"})]}):t==="dot"?l.jsx("svg",{...n,children:l.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor",stroke:"none"})}):t==="trash"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 6h18"}),l.jsx("path",{d:"M8 6V4h8v2"}),l.jsx("rect",{x:"5",y:"6",width:"14",height:"14",rx:"2"})]}):t==="logout"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("path",{d:"M16 17l5-5-5-5"}),l.jsx("path",{d:"M21 12H9"})]}):t==="link"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 1 0-7.07-7.07L10 4"}),l.jsx("path",{d:"M14 11a5 5 0 0 1-7.07 0L3.39 7.46a5 5 0 1 1 7.07-7.07L14 4"})]}):t==="tag"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M20 10V4H14L4 14l6 6 10-10Z"}),l.jsx("circle",{cx:"16.5",cy:"7.5",r:"1.5"})]}):null}function $R({onNew:t,view:e,setView:n,showNew:r,user:s,onLogout:i}){return l.jsxs("div",{className:"topbar",children:[l.jsx("div",{className:"topbar-left",children:l.jsx("div",{className:"team",children:"Equipe de Marketing"})}),l.jsx("div",{className:"topbar-right",children:s?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{className:"chip",children:s.name||s.username}),l.jsxs("button",{className:"primary",onClick:i,children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"logout"})}),l.jsx("span",{children:"Sair"})]})]}):null})]})}function HR({view:t,setView:e}){return l.jsxs("div",{className:"tabs-inline",children:[l.jsxs("button",{className:`tab-btn ${t==="table"?"active":""}`,onClick:()=>e("table"),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"table"})}),l.jsx("span",{children:"Table"})]}),l.jsxs("button",{className:`tab-btn ${t==="calendar"?"active":""}`,onClick:()=>e("calendar"),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"calendar"})}),l.jsx("span",{children:"Calendar"})]})]})}function qR({onLogin:t}){const[e,n]=K.useState(""),[r,s]=K.useState(""),[i,o]=K.useState(!1),[c,u]=K.useState(""),d=async f=>{if(f.preventDefault(),!i){u(""),o(!0);try{await t(e,r)}catch(m){const g=m&&(m.code||m.message)||"Falha ao entrar";u(String(g))}finally{o(!1)}}};return l.jsxs("div",{className:"login-wrap",children:[l.jsx("div",{className:"login-banner",children:"BANNER TELA LOGIN"}),l.jsxs("div",{className:"login-card",children:[l.jsx("div",{className:"login-title",children:"Gerenciamento Mkt!"}),l.jsxs("form",{onSubmit:d,className:"login-form",children:[l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",placeholder:"Usurio",value:e,onChange:f=>n(f.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"8",r:"4"}),l.jsx("path",{d:"M4 20c0-4 4-6 8-6s8 2 8 6"})]})})]}),l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",type:"password",placeholder:"Insira sua senha",value:r,onChange:f=>s(f.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),c?l.jsx("div",{className:"login-error",role:"alert",children:c}):null,l.jsx("div",{className:"login-links",children:l.jsx("a",{href:"#",onClick:f=>f.preventDefault(),children:"Esqueceu sua senha?"})}),l.jsx("button",{className:"primary btn-lg",type:"submit",disabled:i,children:i?"Entrando...":"Entrar"})]})]})]})}function WR({open:t,filtros:e,setFiltros:n,designers:r,onClose:s,cadStatus:i,cadTipos:o,origens:c,campanhas:u}){const d=(m,g)=>n(w=>({...w,[m]:g})),f=()=>n({designer:"",status:"",cIni:"",cFim:"",sIni:"",sFim:""});return t?l.jsx("div",{className:"modal",onClick:s,children:l.jsxs("div",{className:"modal-dialog",onClick:m=>m.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"filter"})}),l.jsx("span",{children:"Filtros"})]}),l.jsx("button",{className:"icon",onClick:s,children:l.jsx(De,{name:"close"})})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Comparativo Mensal"}),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Produo"})}),(()=>{const m=concluidos.filter(A=>inMonth(A.dataConclusao,mesAtual)).length,g=concluidos.filter(A=>inMonth(A.dataConclusao,mesPassado)).length,w=Math.max(m,g,1),k=220,O=80,F=(A,I)=>l.jsx("rect",{x:I,y:O-A/w*O,width:"40",height:A/w*O,rx:"6"});return l.jsxs("svg",{width:k,height:O,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:F(m,40)}),l.jsx("g",{fill:"#4DA3FF",children:F(g,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Qualidade (retrabalho)"})}),(()=>{const m=concluidos.filter(S=>inMonth(S.dataConclusao,mesAtual)).map(S=>S.revisoes||0),g=concluidos.filter(S=>inMonth(S.dataConclusao,mesPassado)).map(S=>S.revisoes||0),w=+(m.reduce((S,b)=>S+b,0)/(m.length||1)).toFixed(2),k=+(g.reduce((S,b)=>S+b,0)/(g.length||1)).toFixed(2),O=Math.max(w,k,1),F=220,A=80,I=(S,b)=>l.jsx("rect",{x:b,y:A-S/O*A,width:"40",height:S/O*A,rx:"6"});return l.jsxs("svg",{width:F,height:A,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:I(w,40)}),l.jsx("g",{fill:"#FF5E5E",children:I(k,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Lead-time"})}),(()=>{const m=compMesAtual,g=compMesPassado,w=Math.max(m,g,1),k=220,O=80,F=(A,I)=>l.jsx("rect",{x:I,y:O-A/w*O,width:"40",height:A/w*O,rx:"6"});return l.jsxs("svg",{width:k,height:O,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:F(m,40)}),l.jsx("g",{fill:"#9B59B6",children:F(g,140)})]})})()]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Insights Automticos"}),l.jsx("div",{className:"insights-grid",children:(()=>{const m=(()=>{const A={};return concluidos.forEach(S=>{const b=S.designer||"",N=S.prazo&&S.dataConclusao&&S.dataConclusao<=S.prazo,L=S.prazo&&S.dataConclusao,v=A[b]||{ok:0,total:0};A[b]={ok:v.ok+(N?1:0),total:v.total+(L?1:0)}}),Object.entries(A).map(([S,b])=>({designer:S,pct:Math.round(100*(b.ok/(b.total||1)))})).sort((S,b)=>b.pct-S.pct)[0]})(),g=(()=>{const A={};return items.forEach(S=>{const b=S.origem||"Outros";A[b]=(A[b]||0)+1}),Object.entries(A).map(([S,b])=>({origem:S,q:b})).sort((S,b)=>b.q-S.q)[0]})(),w=concluidos.filter(A=>(A.revisoes||0)===0).length===concluidos.length,k=compMesAtual<=compMesPassado,O=(()=>{const A=concluidos.filter(S=>/stor/i.test(String(S.tipoMidia||""))),I=+(A.reduce((S,b)=>S+(b.revisoes||0),0)/(A.length||1)).toFixed(2);return{qtd:A.length,avg:I}})(),F=[];return m&&F.push(`O designer ${m.designer} teve o melhor SLA do ms (${m.pct}%)`),g&&F.push(`${g.origem} foi o canal mais solicitado`),w&&F.push("Nenhuma demanda apresentou retrabalho neste ms"),k&&F.push("Seu lead-time melhorou em relao ao ms anterior"),O.qtd>0&&F.push("A categoria Stories teve o maior retrabalho do ms"),F})().map((m,g)=>l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:m})]},g))})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:e.designer,onChange:m=>d("designer",m.target.value),children:[l.jsx("option",{value:"",children:"Designer"}),r.map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{className:"status-select",value:e.status,onChange:m=>d("status",m.target.value),children:[l.jsx("option",{value:"",children:"Status"}),Ha.map(m=>l.jsx("option",{value:m,children:pT(m)},m))]}),l.jsx("div",{className:"chips",children:Ha.map(m=>l.jsx("button",{className:`chip ${e.status===m?"active":""}`,onClick:()=>d("status",e.status===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("div",{className:"chips",children:o.map(m=>l.jsx("button",{className:`chip ${e.tipoMidia===m?"active":""}`,onClick:()=>d("tipoMidia",e.tipoMidia===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem"}),l.jsx("div",{className:"chips",children:(c||om).map(m=>l.jsx("button",{className:`chip ${e.origem===m?"active":""}`,onClick:()=>d("origem",e.origem===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsxs("select",{value:e.campanha||"",onChange:m=>d("campanha",m.target.value),children:[l.jsx("option",{value:"",children:"Campanha"}),(u||[]).map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.cIni,onChange:m=>d("cIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.cFim,onChange:m=>d("cFim",m.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.sIni,onChange:m=>d("sIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.sFim,onChange:m=>d("sFim",m.target.value)})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsxs("button",{className:"icon",onClick:f,children:[l.jsx(De,{name:"close"}),l.jsx("span",{children:"Limpar"})]}),l.jsx("button",{className:"primary",onClick:s,children:"Aplicar"})]})]})}):null}function GR(t,e){return t.filter(n=>!(e.q&&!(n.titulo||"").toLowerCase().includes(e.q.toLowerCase())||e.designer&&n.designer!==e.designer||e.status&&n.status!==e.status||e.tipoMidia&&n.tipoMidia!==e.tipoMidia||e.plataforma&&(n.plataforma||"")!==e.plataforma||e.origem&&(n.origem||"")!==e.origem||e.campanha&&(n.campanha||"")!==e.campanha||e.cIni&&n.dataCriacao&&n.dataCriacao<e.cIni||e.cFim&&n.dataCriacao&&n.dataCriacao>e.cFim||e.sIni&&n.dataSolicitacao<e.sIni||e.sFim&&n.dataSolicitacao>e.sFim))}function KR({items:t,onEdit:e,onStatus:n,cadStatus:r,onDelete:s,onDuplicate:i,hasMore:o,showMore:c,canCollapse:u,showLess:d,shown:f,total:m,compact:g,canEdit:w,loading:k}){const[O,F]=K.useState(null),A=N=>String(N).padStart(2,"0");(N=>{const L=new Date(Date.UTC(N.getFullYear(),N.getMonth(),N.getDate())),v=L.getUTCDay()||7;L.setUTCDate(L.getUTCDate()+4-v);const y=new Date(Date.UTC(L.getUTCFullYear(),0,1)),T=Math.ceil(((L-y)/864e5+1)/7);return`${L.getUTCFullYear()}-W${A(T)}`})(new Date);const S=N=>{if(!N)return"";const[L,v,y]=String(N).split("-").map(Number),T=new Date(L,(v||1)-1,y||1),C=new Date;return C.setHours(0,0,0,0),T.setHours(0,0,0,0),Math.round((T-C)/864e5)},b=N=>{if(!N)return"";const[L,v,y]=String(N).split("-").map(Number),T=String(y).padStart(2,"0"),C=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"][Math.max(0,Math.min(11,v-1||0))];return`${T}.${C}`};return k?l.jsxs("div",{className:`table ${g?"compact":""}`,children:[l.jsx("div",{className:"skeleton row",style:{width:"60%"}}),Array.from({length:8}).map((N,L)=>l.jsx("div",{className:"skeleton row",style:{width:`${90-L*6}%`}},L))]}):l.jsxs("div",{className:`table ${g?"compact":""}`,children:[l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Data de Solicitao"}),l.jsx("th",{children:"Data de Criao"}),l.jsx("th",{children:"Prazo (dias)"}),l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Link"}),l.jsx("th",{children:"File"})]})}),l.jsx("tbody",{children:t.map(N=>l.jsxs("tr",{className:"row-clickable",onClick:()=>e(N),children:[l.jsx("td",{className:"name",children:N.titulo}),l.jsx("td",{children:l.jsx("div",{children:N.designer})}),l.jsx("td",{children:l.jsx("select",{className:`status-select ${mT(N.status)}`,value:N.status,onChange:L=>n(N.id,L.target.value),onClick:L=>L.stopPropagation(),disabled:!w,children:Ha.map(L=>l.jsx("option",{value:L,children:pT(L)},L))})}),l.jsx("td",{children:b(N.dataSolicitacao)}),l.jsx("td",{children:b(N.dataCriacao)}),l.jsx("td",{children:l.jsx("span",{style:{color:!br(N.status)&&Number(S(N.prazo))<=1?"#ef4444":"inherit"},children:S(N.prazo)})}),l.jsx("td",{children:N.tipoMidia}),l.jsx("td",{children:N.link?l.jsx("a",{href:N.link,target:"_blank",rel:"noreferrer",onClick:L=>L.stopPropagation(),children:"Visualizar"}):""}),l.jsx("td",{children:Array.isArray(N.arquivos)&&N.arquivos.length?l.jsx("div",{className:"files",children:N.arquivos.slice(0,5).map(L=>l.jsx("a",{href:L.url,target:"_blank",rel:"noreferrer",title:L.name,onClick:v=>v.stopPropagation(),children:l.jsx("img",{className:"file-thumb",src:L.url,alt:L.name})},L.name))}):N.arquivoNome||""})]},N.id))})]}),l.jsxs("div",{className:"table-footer",children:[o&&l.jsx("button",{className:"primary",onClick:c,children:"Mostrar mais demandas"}),u&&l.jsx("button",{className:"primary",onClick:d,children:"Mostrar menos demandas"})]})]})}function QR({items:t,refDate:e}){const n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0),s=n.getDay(),i=r.getDate(),o={};t.forEach(u=>{const d=u.dataSolicitacao,f=new Date(d);f.getMonth()===e.getMonth()&&f.getFullYear()===e.getFullYear()&&(o[d]||(o[d]=[])).push(u)});const c=[];for(let u=0;u<s;u++)c.push(null);for(let u=1;u<=i;u++)c.push(u);return l.jsxs("div",{className:"calendar",children:[l.jsx("div",{className:"cal-head",children:l.jsx("div",{className:"month",children:e.toLocaleString("pt-BR",{month:"long",year:"numeric"})})}),l.jsxs("div",{className:"cal-grid",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(u=>l.jsx("div",{className:"cal-cell head",children:u},u)),c.map((u,d)=>{if(!u)return l.jsx("div",{className:"cal-cell"},d);const f=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`,m=o[f]||[];return l.jsxs("div",{className:"cal-cell",children:[l.jsx("div",{className:"day",children:u}),m.map(g=>l.jsxs("div",{className:"cal-item",children:[g.titulo," (",g.designer,")"]},g.id))]},d)})]})]})}function YR({open:t,mode:e,onClose:n,onSubmit:r,initial:s,cadTipos:i,designers:o,cadPlataformas:c,onDelete:u,userLabel:d,canDelete:f,onAddComment:m,cadOrigens:g}){const[w,k]=K.useState((s==null?void 0:s.designer)||""),[O,F]=K.useState((s==null?void 0:s.tipoMidia)||"Post"),[A,I]=K.useState((s==null?void 0:s.titulo)||""),[S,b]=K.useState((s==null?void 0:s.link)||""),[N,L]=K.useState(""),[v,y]=K.useState((s==null?void 0:s.dataSolicitacao)||wn()),[T,C]=K.useState((s==null?void 0:s.plataforma)||""),[R,j]=K.useState((s==null?void 0:s.arquivos)||[]),[x,at]=K.useState((s==null?void 0:s.dataCriacao)||""),[Et,et]=K.useState((s==null?void 0:s.dataFeedback)||""),[q,B]=K.useState((s==null?void 0:s.descricao)||""),[M,z]=K.useState((s==null?void 0:s.prazo)||""),[$,X]=K.useState((s==null?void 0:s.comentarios)||[]),[ae,Ee]=K.useState(""),[Fe,Se]=K.useState((s==null?void 0:s.historico)||[]),[Ye,Fn]=K.useState((s==null?void 0:s.origem)||""),[Pn,zt]=K.useState((s==null?void 0:s.campanha)||""),[sn,Xe]=K.useState("");K.useEffect(()=>{k((s==null?void 0:s.designer)||""),F((s==null?void 0:s.tipoMidia)||"Post"),I((s==null?void 0:s.titulo)||""),b((s==null?void 0:s.link)||""),L(""),y((s==null?void 0:s.dataSolicitacao)??(e==="create"?wn():"")),C((s==null?void 0:s.plataforma)||(c==null?void 0:c[0])||""),j((s==null?void 0:s.arquivos)||[]),at((s==null?void 0:s.dataCriacao)||""),et((s==null?void 0:s.dataFeedback)||""),B((s==null?void 0:s.descricao)||""),z((s==null?void 0:s.prazo)||""),X((s==null?void 0:s.comentarios)||[]),Ee(""),Se((s==null?void 0:s.historico)||[]),Fn((s==null?void 0:s.origem)||""),zt((s==null?void 0:s.campanha)||"")},[s,t,o,i,c,g]);const er=P=>{P.preventDefault(),r({designer:w,tipoMidia:O,titulo:A,link:S,arquivoNome:N,dataSolic:v,dataCriacao:x,dataFeedback:Et,plataforma:T,arquivos:R,descricao:q,prazo:M,comentarios:$,historico:Fe,origem:Ye,campanha:Pn})},ke=()=>{const P=ae.trim();if(!P)return;const J=zR(P),te={texto:P,data:wn(),mentions:J,autor:d},me={tipo:"comentario",autor:d,data:te.data,texto:P,mentions:J};X(ce=>[te,...ce]),Se(ce=>[me,...ce]),Ee("");try{m&&m(s==null?void 0:s.id,te,me)}catch{}},Ve=P=>{if(!P)return"";try{return new Date(P).toLocaleString("pt-BR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return P}},[lt,yr]=K.useState(Date.now());K.useEffect(()=>{const P=setInterval(()=>yr(Date.now()),1e3);return()=>clearInterval(P)},[]);const Kr=P=>{if(!P||P<=0)return"00:00:00";const J=Math.floor(P/1e3),te=String(Math.floor(J/3600)).padStart(2,"0"),me=String(Math.floor(J%3600/60)).padStart(2,"0"),ce=String(J%60).padStart(2,"0");return`${te}:${me}:${ce}`},_r=Number((s==null?void 0:s.tempoProducaoMs)||0),Be=s!=null&&s.startedAt?Date.parse(s.startedAt):null,wr=/produ|progresso/i.test(String((s==null?void 0:s.status)||"")),[jt]=K.useState(()=>!Be&&wr?Date.now():null),Un=Be??jt,tr=_r+(Un?Math.max(0,lt-Un):0),[E,D]=K.useState(null);return t?l.jsx("div",{className:"modal",children:l.jsxs("div",{className:`modal-dialog ${e!=="create"?"tall":""}`,onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[e==="create"?l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}):l.jsx("div",{className:"title editable",contentEditable:!0,suppressContentEditableWarning:!0,onInput:P=>I(P.currentTarget.textContent||""),children:A||"Sem ttulo"}),l.jsx("button",{className:"icon",onClick:n,children:l.jsx(De,{name:"close"})})]}),l.jsxs("div",{className:`status-bar ${mT((s==null?void 0:s.status)||"Aberta")}`,children:[l.jsx("div",{children:(s==null?void 0:s.status)||"Aberta"}),e!=="create"&&l.jsxs("div",{className:"timer",children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"clock"})}),l.jsx("span",{children:Kr(tr)})]})]}),l.jsx("form",{id:"modalForm",className:"modal-body",onSubmit:er,children:l.jsxs("div",{className:`modal-columns ${e==="create"?"single":"cols3"}`,children:[l.jsxs("div",{className:"modal-main",children:[l.jsxs("div",{className:e==="create"?"form-grid":"form-stack",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:w,onChange:P=>k(P.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Designer"}),(o||[]).map(P=>l.jsx("option",{value:P,children:P},P))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("select",{value:O,onChange:P=>F(P.target.value),children:(i||["Post","Story","Banner","Vdeo","Outro"]).map(P=>l.jsx("option",{value:P,children:P},P))})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Titulo"}),l.jsx("input",{value:A,onChange:P=>I(P.target.value),required:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem da Demanda"}),l.jsxs("select",{value:Ye,onChange:P=>Fn(P.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Origem"}),(g||om).map(P=>l.jsx("option",{value:P,children:P},P))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsx("input",{value:Pn,onChange:P=>zt(P.target.value),placeholder:"Ex: Black Friday"})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link"}),l.jsx("input",{type:"url",value:S,onChange:P=>b(P.target.value),placeholder:"https://"})]}),e==="create"?l.jsxs("div",{className:"row-2",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:P=>{const te=Array.from(P.target.files||[]).filter(Ie=>(Ie.size||0)<=1048576).slice(0,5),me=new Date().toISOString(),ce=te.map(Ie=>new Promise(Ae=>{const ve=new FileReader;ve.onload=()=>Ae({name:Ie.name,url:ve.result,addedBy:d,addedAt:me}),ve.readAsDataURL(Ie)}));Promise.all(ce).then(Ie=>{j(Ie),Se(ve=>[{tipo:"arquivo",autor:d,data:wn(),arquivos:Ie},...ve]);const Ae=Ie.map(ve=>ve.name).join(", ");X(ve=>[{texto:`Arquivos anexados: ${Ae||Ie.length}`,data:wn()},...ve])})}})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:M,onChange:P=>z(P.target.value)})]})]}):l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:P=>{const te=Array.from(P.target.files||[]).filter(Ie=>(Ie.size||0)<=1048576).slice(0,5),me=new Date().toISOString(),ce=te.map(Ie=>new Promise(Ae=>{const ve=new FileReader;ve.onload=()=>Ae({name:Ie.name,url:ve.result,addedBy:d,addedAt:me}),ve.readAsDataURL(Ie)}));Promise.all(ce).then(Ie=>{j(Ie),Se(ve=>[{tipo:"arquivo",autor:d,data:wn(),arquivos:Ie},...ve]);const Ae=Ie.map(ve=>ve.name).join(", ");X(ve=>[{texto:`Arquivos anexados: ${Ae||Ie.length}`,data:wn()},...ve])})}}),Array.isArray(R)&&R.length>0&&l.jsx("div",{className:"thumbs",children:R.map((P,J)=>l.jsxs("div",{className:"file-item",children:[l.jsx("img",{className:"file-thumb",src:P.url,alt:P.name}),l.jsxs("div",{className:"file-meta",children:[P.name,P.addedBy?`  ${P.addedBy}`:""]}),l.jsxs("div",{className:"file-actions",children:[l.jsx("a",{href:P.url,download:!0,target:"_blank",rel:"noreferrer",children:"Baixar"}),l.jsxs("label",{className:"replace-btn",children:["Substituir",l.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:te=>{var Ae;const me=(Ae=te.target.files)==null?void 0:Ae[0];if(!me)return;const ce=new FileReader,Ie=new Date().toISOString();ce.onload=()=>{const ve={name:me.name,url:ce.result,addedBy:d,addedAt:Ie};j(Je=>Je.map((Er,xe)=>xe===J?ve:Er))},ce.readAsDataURL(me)}})]}),l.jsx("button",{type:"button",onClick:()=>j(te=>te.filter((me,ce)=>ce!==J)),children:"Excluir"})]})]},P.name+J))})]})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:8,className:"desc-input",value:q,onChange:P=>B(P.target.value)})]})]}),e!=="create"&&l.jsxs("div",{className:"modal-center",children:[l.jsxs("div",{className:"date-row",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsx("input",{type:"date",value:v,disabled:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsx("input",{type:"date",value:x,disabled:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:M,onChange:P=>z(P.target.value)})]}),String((s==null?void 0:s.status)||"").toLowerCase().includes("feedback")&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Feedback"}),l.jsx("input",{type:"date",value:Et,onChange:P=>et(P.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:12,className:"desc-input",value:q,onChange:P=>B(P.target.value)})]})]}),e!=="create"&&l.jsx("div",{className:"modal-side",children:l.jsxs("div",{className:"activity",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Comentrios"}),l.jsx("input",{placeholder:"Escreva um comentrio use @ para mencionar",value:ae,onChange:P=>Ee(P.target.value)}),ae.trim().length>0&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:l.jsx("button",{className:"primary",type:"button",onClick:ke,children:"Adicionar"})})]}),l.jsx("div",{className:"activity-list",children:($||[]).length===0?l.jsx("div",{className:"empty",children:"Sem comentrios"}):($||[]).map((P,J)=>l.jsx("div",{className:"activity-item",children:l.jsxs("div",{className:"activity-entry",children:[l.jsx("div",{className:"avatar",children:"V"}),l.jsxs("div",{className:"entry-content",children:[l.jsx("div",{className:"entry-title",children:l.jsxs("span",{children:[l.jsx("strong",{children:P.autor||""})," comentou: ",P.texto]})}),l.jsx("div",{className:"entry-time",children:Ve(P.data)}),Array.isArray(P.mentions)&&P.mentions.length>0&&l.jsx("div",{className:"mentions-row",children:P.mentions.map(te=>l.jsxs("span",{className:`mention-pill ${String(d||"").toLowerCase()===String(te||"").toLowerCase()?"you":""}`,children:["@",te,String(d||"").toLowerCase()===String(te||"").toLowerCase()?"  Voc foi mencionado":""]},te))})]})]})},J))}),e!=="create"&&l.jsxs("div",{className:"timeline",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Linha do tempo"})}),["Criado","Em produo","Aguardando Feedback","Revisar","Aprovada","Concluda","Postado"].map(P=>{const J=(xe,Pt)=>{const Zt=String(xe.status_novo||xe.para||""||"").toLowerCase();return Pt==="Criado"?Zt==="aberta":Pt==="Em produo"?Zt.includes("produ")||Zt.includes("progresso"):Pt==="Aguardando Feedback"?Zt.includes("feedback"):Pt==="Revisar"?Zt.includes("revisar"):Pt==="Aprovada"?Zt.includes("aprov"):Pt==="Concluda"?Zt.includes("conclu"):!1};let me=P==="Postado"?(Fe||[]).filter(xe=>xe.tipo==="mlabs"):(Fe||[]).filter(xe=>xe.tipo==="status"&&J(xe,P));if(P==="Concluda"&&(!me||me.length===0)&&String((s==null?void 0:s.status)||"").toLowerCase().includes("conclu")){const xe=(s==null?void 0:s.finishedAt)||(s!=null&&s.dataConclusao?`${s.dataConclusao}T00:00:00Z`:null);me=[{tipo:"status",autor:(s==null?void 0:s.autor)||d,data_hora_evento:xe,data:s==null?void 0:s.dataConclusao,status_novo:"Concluda",responsavel:(s==null?void 0:s.designer)||""}]}const ce=me&&me.length?me[me.length-1]:null,Ie=(ce==null?void 0:ce.duracao_em_minutos)!=null?ky(ce.duracao_em_minutos):"",Ae=ce!=null&&ce.data_hora_evento?Ve(ce.data_hora_evento):Ve(ce==null?void 0:ce.data),ve=(ce==null?void 0:ce.responsavel)||(ce==null?void 0:ce.autor)||"",Je=me.length,Er=E===P;return l.jsxs("div",{className:"timeline-item",onClick:()=>D(xe=>xe===P?null:P),children:[l.jsx("div",{className:"timeline-left",children:l.jsx("span",{className:"timeline-icon",children:""})}),l.jsxs("div",{className:"timeline-body",children:[l.jsxs("div",{className:"timeline-title",children:[P,Je>1?`  ${Je}`:""]}),l.jsxs("div",{className:"timeline-meta",children:[Ae,ve?`  ${ve}`:"",Ie?`  ${Ie}`:""]}),Er&&Je>0&&l.jsx("div",{className:"timeline-details",children:me.map((xe,Pt)=>l.jsxs("div",{className:"timeline-detail-row",children:[l.jsx("div",{children:xe!=null&&xe.data_hora_evento?Ve(xe.data_hora_evento):Ve(xe==null?void 0:xe.data)}),l.jsx("div",{children:(xe==null?void 0:xe.responsavel)||(xe==null?void 0:xe.autor)||""}),l.jsx("div",{children:(xe==null?void 0:xe.duracao_em_minutos)!=null?ky(xe.duracao_em_minutos):""})]},Pt))})]})]},P)})]}),e!=="create"&&l.jsxs("div",{className:"ia-panel",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Previso de entrega por IA"})}),l.jsx("div",{className:"ia-text",children:(s==null?void 0:s.previsaoIA)||hf([],s||{})})]})]})})]})}),l.jsxs("div",{className:"modal-actions",children:[e==="edit"&&f&&l.jsx("button",{className:"danger",type:"button",onClick:()=>{window.confirm("Confirmar excluso desta demanda?")&&(u(s.id),n())},children:"Excluir"}),l.jsx("button",{className:"primary",type:"submit",form:"modalForm",children:"Salvar"})]})]})}):null}function XR({cadStatus:t,setCadStatus:e,cadTipos:n,setCadTipos:r,cadPlataformas:s,setCadPlataformas:i,cadOrigens:o,setCadOrigens:c,cadStatusColors:u,setCadStatusColors:d}){const[f,m]=K.useState("tipo"),[g,w]=K.useState(""),[k,O]=K.useState("#f59e0b"),F=f==="status"?t:f==="tipo"?n:f==="plataforma"?s:o,A=N=>{f==="status"?e(N):f==="tipo"?r(N):f==="plataforma"?i(N):c(N)},I=async()=>{const N=g.trim();if(!N||F.includes(N))return;const L=[...F,N];if(A(L),w(""),f==="status"&&d(v=>({...v,[N]:k})),de){const v=f==="status"?"cad_status":f==="tipo"?"cad_tipos":f==="plataforma"?"cad_plataformas":"cad_origens";try{await kr(dt(de,v,N),{name:N,active:!0})}catch{}}},S=async N=>{const L=F.filter(v=>v!==N);if(A(L),de){const v=f==="status"?"cad_status":f==="tipo"?"cad_tipos":f==="plataforma"?"cad_plataformas":"cad_origens";try{await Zc(dt(de,v,N))}catch{}}},b=async N=>{if(!de)return;const L=f==="status"?"cad_status":f==="tipo"?"cad_tipos":f==="plataforma"?"cad_plataformas":"cad_origens";try{await kr(dt(de,L,N),{active:!1},{merge:!0})}catch{}};return l.jsxs("div",{className:"panel",children:[l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${f==="tipo"?"active":""}`,onClick:()=>m("tipo"),children:"Tipo"}),l.jsx("button",{className:`tab ${f==="origem"?"active":""}`,onClick:()=>m("origem"),children:"Origem"})]}),l.jsxs("div",{className:"form-row",style:{marginTop:10},children:[l.jsx("label",{children:f==="status"?"Novo Status":f==="tipo"?"Novo Tipo":"Nova Origem"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{value:g,onChange:N=>w(N.target.value)}),f==="status"&&l.jsx("input",{type:"color",value:k,onChange:N=>O(N.target.value),title:"Cor"}),l.jsx("button",{className:"primary",onClick:I,children:"Adicionar"})]})]}),l.jsx("div",{className:"form-row",style:{marginTop:10},children:l.jsx("select",{children:F.map(N=>l.jsx("option",{value:N,children:N},N))})}),l.jsx("div",{className:"list",style:{marginTop:12},children:F.length===0?l.jsx("div",{className:"empty",children:"Sem itens"}):F.map(N=>l.jsxs("div",{className:"list-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",border:"1px solid var(--border)",borderRadius:8,background:"#0b0e12",marginBottom:6},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[f==="status"&&l.jsx("span",{className:"status-dot",style:{background:u[N]||"#3b82f6"}}),l.jsx("div",{children:N})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[f==="status"&&l.jsx("input",{type:"color",value:u[N]||"#3b82f6",onChange:L=>d(v=>({...v,[N]:L.target.value}))}),l.jsx("button",{className:"icon",onClick:()=>b(N),title:"Desativar",children:l.jsx(De,{name:"minus"})}),l.jsx("button",{className:"icon",onClick:()=>S(N),children:l.jsx(De,{name:"trash"})})]})]},N))})]})}function JR(){var xe,Pt,Zt;const[t,e]=K.useState(null),[n,r]=K.useState([]),[s,i]=K.useState(!0),[o,c]=K.useState("table"),[u,d]=K.useState(!1),[f,m]=K.useState("dashboard"),[g,w]=K.useState({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""}),[k,O]=K.useState(!1),[F,A]=K.useState(!1),[I,S]=K.useState("create"),[b,N]=K.useState(null),[L,v]=K.useState(gT),[y,T]=K.useState({autoPostMLabs:!1}),[C,R]=K.useState(["Aberta","Em Progresso","Concluda"]),[j,x]=K.useState(["Post","Story","Banner","Vdeo","Outro"]),[at,Et]=K.useState([]),[et,q]=K.useState([]),[B,M]=K.useState([]),[z,$]=K.useState({Aberta:"#f59e0b","Em Progresso":"#3b82f6",Concluda:"#10b981"}),X=K.useMemo(()=>Array.from(new Set(n.map(ne=>ne.designer).filter(Boolean))).sort(),[n]),ae=K.useMemo(()=>B.filter(ne=>(ne.cargo||"")==="Designer").map(ne=>ne.username).filter(Boolean).sort(),[B]),Ee=K.useMemo(()=>Array.from(new Set([...ae,...X])).sort(),[ae,X]),Fe=K.useMemo(()=>Array.from(new Set(n.map(ne=>ne.campanha).filter(Boolean))).sort(),[n]),Se=(t==null?void 0:t.role)||"comum",Ye=K.useMemo(()=>GR(n,g),[n,g]),Fn=K.useMemo(()=>{if(Se==="admin"||Se==="gerente")return Ye;const ne=(t==null?void 0:t.username)||"";return Ye.filter(G=>(G.designer||"")===ne)},[Ye,Se,t]),Pn=K.useMemo(()=>Se==="admin"||Se==="gerente"?Ee:[t==null?void 0:t.username].filter(Boolean),[Ee,Se,t]),zt=K.useMemo(()=>Ye.slice().sort((ne,G)=>{const Q=ne.dataCriacao||"",pe=(G.dataCriacao||"").localeCompare(Q);if(pe!==0)return pe;const ee=ne.id||0;return(G.id||0)-ee}),[Ye]),sn=K.useMemo(()=>Se==="admin"||Se==="gerente"?Ee:[t==null?void 0:t.username].filter(Boolean),[Ee,Se,t]),Xe=K.useMemo(()=>Se==="admin"||Se==="gerente"?zt:zt.filter(ne=>(ne.designer||"")===((t==null?void 0:t.username)||"")),[zt,Se,t]);K.useMemo(()=>Xe.filter(ne=>/revisar/i.test(String(ne.status||""))).length,[Xe]),K.useMemo(()=>Xe.filter(ne=>/aprovada/i.test(String(ne.status||""))).length,[Xe]);const er=K.useMemo(()=>{const ne=Xe,G=Q=>String(Q||"").toLowerCase();return{Pendente:ne.filter(Q=>am(Q.status)).length,"Em produo":ne.filter(Q=>lm(Q.status)).length,"Aguardando Feedback":ne.filter(Q=>G(Q.status).includes("feedback")).length,Aprovada:ne.filter(Q=>G(Q.status).includes("aprov")).length,Revisar:ne.filter(Q=>G(Q.status).includes("revisar")).length,Concluida:ne.filter(Q=>G(Q.status).includes("conclu")).length}},[Xe]),[ke,Ve]=K.useState(10),[lt,yr]=K.useState(new Date),[Kr,_r]=K.useState("status"),Be=K.useMemo(()=>(t==null?void 0:t.name)||(t==null?void 0:t.username)||"Voc",[t]),wr=["dashboard","demandas","config","cadastros","relatorios","usuarios"],jt=K.useMemo(()=>{const ne=t==null?void 0:t.pages;return ne?wr.filter(G=>ne[G]===!0):["dashboard"]},[t]);K.useEffect(()=>{},[n,de]),K.useEffect(()=>{de||i(!1)},[de]),K.useEffect(()=>{},[de]),K.useEffect(()=>{if(!de||!ir)return;const ne=tN(ir,async G=>{if(G){let Q=null;try{const pe=await ZP(dt(de,"usuarios",G.uid));pe.exists()&&(Q=pe.data())}catch{}if(!Q)try{const pe=Fd(Nn(de,"usuarios"),Ud("email","==",G.email||""));(await zd(pe)).forEach(ge=>{Q||(Q=ge.data())})}catch{}const oe={username:(Q==null?void 0:Q.username)||(G.email||"").split("@")[0],name:(Q==null?void 0:Q.name)||G.displayName||G.email||"",role:(Q==null?void 0:Q.role)||"comum",pages:(Q==null?void 0:Q.pages)||null,actions:(Q==null?void 0:Q.actions)||null,cargo:(Q==null?void 0:Q.cargo)||""};e(oe)}else e(null)});return()=>{try{ne()}catch{}}},[de,ir]),K.useEffect(()=>{Object.entries(L||{}).forEach(([ne,G])=>{try{document.documentElement.style.setProperty(`--${ne}`,G)}catch{}})},[L]),K.useEffect(()=>{if(de&&t){let ne=null,G=null,Q=null,oe=null,pe=null,ee=null;try{const ge=(t==null?void 0:t.username)||"",se=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="gerente",he=Nn(de,"demandas"),ue=se?he:Fd(he,Ud("designer","==",ge));ne=Gs(ue,Oe=>{const tt=[];Oe.forEach(ct=>tt.push({id:ct.id,...ct.data()})),r(tt),i(!1)})}catch{}try{G=Gs(Nn(de,"cad_status"),ge=>{const se=[];ge.forEach(he=>{var ue;return se.push(((ue=he.data())==null?void 0:ue.name)||he.id)}),R(se)})}catch{}try{Q=Gs(Nn(de,"cad_tipos"),ge=>{const se=[];ge.forEach(he=>{const ue=he.data();(ue==null?void 0:ue.active)!==!1&&se.push((ue==null?void 0:ue.name)||he.id)}),x(se)})}catch{}try{ee=Gs(Nn(de,"usuarios"),ge=>{const se=[];ge.forEach(he=>se.push({id:he.id,...he.data()})),M(se)})}catch{}try{oe=Gs(Nn(de,"cad_plataformas"),ge=>{const se=[];ge.forEach(he=>{const ue=he.data();(ue==null?void 0:ue.active)!==!1&&se.push((ue==null?void 0:ue.name)||he.id)}),Et(se)})}catch{}try{pe=Gs(Nn(de,"cad_origens"),ge=>{const se=[];ge.forEach(he=>{const ue=he.data();(ue==null?void 0:ue.active)!==!1&&se.push((ue==null?void 0:ue.name)||he.id)}),q(se)})}catch{}return()=>{try{ne&&ne()}catch{}try{G&&G()}catch{}try{Q&&Q()}catch{}try{ee&&ee()}catch{}try{oe&&oe()}catch{}try{pe&&pe()}catch{}}}},[de,t]),K.useEffect(()=>{t&&!jt.includes(f)&&m(jt[0]||"dashboard"),!t&&f!=="dashboard"&&f!=="demandas"&&f!=="config"&&f!=="cadastros"&&f!=="relatorios"&&f!=="usuarios"&&m("dashboard")},[t,jt,f]);const Un=async()=>{try{await nN(ir)}catch{}e(null)},tr=async(ne,G)=>{var pe;const Q=String(ne||"").trim();if(!Q||!G)throw new Error("Credenciais ausentes");if(!ir||!de)throw new Error("Firebase no configurado");let oe=Q;if(!/@/.test(Q))try{const ee=Fd(Nn(de,"usuarios"),Ud("username","==",Q)),ge=await zd(ee);let se=null;ge.forEach(he=>{const ue=he.data();!se&&(ue!=null&&ue.email)&&(se=ue.email)}),oe=se||`${Q}@betaki.bet.br`}catch{oe=`${Q}@betaki.bet.br`}try{await Xk(ir,oe,G)}catch(ee){const ge=(ee==null?void 0:ee.code)||"";try{if(ge==="auth/invalid-credential"||ge==="auth/user-not-found"){const se=await tT(ir,oe,G),he=((pe=se==null?void 0:se.user)==null?void 0:pe.email)||oe,ue=Q;try{await kr(dt(de,"usuarios",ue),{username:Q,email:he},{merge:!0})}catch{}}else throw ee}catch(se){throw se}}},E=((xe=t==null?void 0:t.actions)==null?void 0:xe.criar)!==!1,D=((Pt=t==null?void 0:t.actions)==null?void 0:Pt.excluir)!==!1,P=((Zt=t==null?void 0:t.actions)==null?void 0:Zt.visualizar)!==!1,J=()=>{!t||!E||(S("create"),N(null),A(!0))},te=ne=>{!t||!P||(S("edit"),N(ne),A(!0))},me=async ne=>{const G={...ne,id:void 0,status:"Aberta",dataSolicitacao:wn(),dataCriacao:wn()},Q=Ny(n);if(r(oe=>[...oe,{...G,id:Q}]),de)try{await kr(dt(de,"demandas",String(Q)),{...G,id:Q,createdAt:iy()})}catch{}},ce=async(ne,G)=>{const Q=wn();r(pe=>pe.map(ee=>{if(String(ee.id)!==String(ne))return ee;const ge=ee.status!==G,se=String(ee.status||"").toLowerCase().includes("produ")||String(ee.status||"").toLowerCase().includes("progresso"),he=String(G||"").toLowerCase().includes("produ")||String(G||"").toLowerCase().includes("progresso"),ue=Date.now();let Oe=Number(ee.tempoProducaoMs||0),tt=ee.startedAt||null,ct=ee.finishedAt||null;const Tt=String(G||"").toLowerCase().includes("feedback"),kn=String(ee.status||"").toLowerCase().includes("feedback");let Dt=ee.slaStartAt||null,It=ee.slaStopAt||null,gt=Number(ee.slaPauseMs||0),St=ee.pauseStartedAt||null;if(ge){if(se&&!he&&tt){const qe=Date.parse(tt);isNaN(qe)||(Oe+=Math.max(0,ue-qe)),tt=null}if(!se&&he&&!tt&&(tt=new Date(ue).toISOString(),Dt||(Dt=tt)),!kn&&Tt&&!St&&(St=new Date(ue).toISOString()),kn&&!Tt&&St){const qe=Date.parse(St);isNaN(qe)||(gt+=Math.max(0,ue-qe)),St=null}}const on=String(G||"").toLowerCase().includes("revisar"),Tr=ge&&on?(ee.revisoes||0)+1:ee.revisoes||0,zn=String(G||"").toLowerCase().includes("concluida")||G==="Concluda",vn=zn?ee.dataConclusao||Q:ee.dataConclusao,an=zn?ee.dataCriacao||Q:ee.dataCriacao;ge&&zn&&(ct=new Date(ue).toISOString(),It=ct);const Bn=(ee.historico||[]).find(qe=>qe.tipo==="status"),So=Bn!=null&&Bn.data_hora_evento?Date.parse(Bn.data_hora_evento):Bn!=null&&Bn.data?Date.parse(`${Bn.data}T00:00:00Z`):null,Fs=new Date(ue).toISOString(),Ao=ge&&So?Math.round((ue-So)/6e4):null,Co=ge?{tipo:"status",autor:Be,data:Q,data_hora_evento:Fs,status_anterior:ee.status,status_novo:G,duracao_em_minutos:Ao,responsavel:Be,id_demanda:ee.id,de:ee.status,para:G}:null,xo=(()=>{if(!ee.prazo)return null;const[qe,Bt,zs]=String(ee.prazo).split("-").map(Number),ko=new Date(qe,(Bt||1)-1,zs||1);ko.setHours(0,0,0,0);const hl=new Date;return hl.setHours(0,0,0,0),ko-hl})(),Yu=!!(ee.prazo&&!zn&&typeof xo=="number"&&xo<=864e5),Us=ge&&Yu?{tipo:"alerta",autor:Be,data:Q,data_hora_evento:Fs,mensagem:"Prazo menor que 24h",id_demanda:ee.id}:null,Ti=!!(ge&&(String(G||"").toLowerCase().includes("aprov")||String(G||"").toLowerCase().includes("conclu"))&&y.autoPostMLabs)?{tipo:"mlabs",autor:Be,data:Q,data_hora_evento:Fs,mensagem:"Postagem agendada via mLabs",id_demanda:ee.id}:null,Ir=Co?[Co,...Us?[Us]:[],...Ti?[Ti]:[],...ee.historico||[]]:ee.historico||[],Sr=ge&&Tt&&!ee.dataFeedback?Q:ee.dataFeedback,Po=(Ir||[]).filter(qe=>qe.tipo==="status"&&qe.duracao_em_minutos!=null).reduce((qe,Bt)=>qe+(Bt.duracao_em_minutos||0),0),Ju=(()=>{const qe={};return(Ir||[]).forEach(Bt=>{if(Bt.tipo==="status"&&Bt.duracao_em_minutos!=null){const zs=Bt.status_anterior||Bt.de||"Aberta";qe[zs]=(qe[zs]||0)+(Bt.duracao_em_minutos||0)}}),qe})(),cl=(()=>{if(!Dt)return 0;const qe=It?Date.parse(It):ue,Bt=Date.parse(Dt);return isNaN(Bt)||isNaN(qe)?0:Math.max(0,qe-Bt-gt)})(),ul=(()=>{if(!vn||!ee.prazo)return null;try{return String(vn)<=String(ee.prazo)}catch{return null}})(),dl=hf(pe,{...ee});return{...ee,status:G,revisoes:Tr,dataConclusao:vn,dataCriacao:an,dataFeedback:Sr,historico:Ir,tempoProducaoMs:Oe,startedAt:tt,finishedAt:ct,previsaoIA:dl,fxBounceAt:ge?ue:ee.fxBounceAt||0,slaStartAt:Dt,slaStopAt:It,slaPauseMs:gt,pauseStartedAt:St,slaNetMs:cl,slaOk:ul,leadTotalMin:Po,leadPorFase:Ju}}));const oe=n.find(pe=>String(pe.id)===String(ne));if(de&&oe)try{const pe=(oe.historico||[]).find(Dt=>Dt.tipo==="status"),ee=pe!=null&&pe.data_hora_evento?Date.parse(pe.data_hora_evento):pe!=null&&pe.data?Date.parse(`${pe.data}T00:00:00Z`):null,ge=new Date().toISOString(),se=oe.status!==G&&ee?Math.round((Date.now()-ee)/6e4):null,he=(()=>{if(!oe.prazo)return null;const[Dt,It,gt]=String(oe.prazo).split("-").map(Number),St=new Date(Dt,(It||1)-1,gt||1);St.setHours(0,0,0,0);const on=new Date;return on.setHours(0,0,0,0),St-on})(),ue=!!(oe.prazo&&!(String(G||"").toLowerCase().includes("concluida")||G==="Concluda")&&typeof he=="number"&&he<=864e5),Oe={tipo:"status",autor:Be,data:Q,data_hora_evento:ge,status_anterior:oe.status,status_novo:G,duracao_em_minutos:se,responsavel:Be,id_demanda:oe.id,de:oe.status,para:G},tt=ue?{tipo:"alerta",autor:Be,data:Q,data_hora_evento:ge,mensagem:"Prazo menor que 24h",id_demanda:oe.id}:null,Tt=!!((String(G||"").toLowerCase().includes("aprov")||String(G||"").toLowerCase().includes("conclu"))&&y.autoPostMLabs)?{tipo:"mlabs",autor:Be,data:Q,data_hora_evento:ge,mensagem:"Postagem agendada via mLabs",id_demanda:oe.id}:null,kn=[Oe,...tt?[tt]:[],...Tt?[Tt]:[],...oe.historico||[]];await Js(dt(de,"demandas",String(ne)),{...oe,status:G,dataCriacao:String(G||"").toLowerCase().includes("concluida")||G==="Concluda"?oe.dataCriacao||Q:oe.dataCriacao,dataConclusao:String(G||"").toLowerCase().includes("concluida")||G==="Concluda"?oe.dataConclusao||Q:oe.dataConclusao,dataFeedback:oe.status!==G&&String(G||"").toLowerCase().includes("feedback")&&!oe.dataFeedback?Q:oe.dataFeedback,revisoes:(oe.revisoes||0)+(oe.status!==G&&String(G||"").toLowerCase().includes("revisar")?1:0),historico:kn,tempoProducaoMs:oe.tempoProducaoMs,startedAt:oe.startedAt,finishedAt:String(G||"").toLowerCase().includes("concluida")||G==="Concluda"?new Date().toISOString():oe.finishedAt,slaStartAt:oe.slaStartAt,slaStopAt:String(G||"").toLowerCase().includes("concluida")||G==="Concluda"?new Date().toISOString():oe.slaStopAt,slaPauseMs:oe.slaPauseMs,pauseStartedAt:oe.pauseStartedAt,slaNetMs:oe.slaNetMs,slaOk:oe.slaOk,leadTotalMin:oe.leadTotalMin,leadPorFase:oe.leadPorFase});try{await sy(Nn(de,"historico_status"),Oe)}catch{}}catch{}},Ie=async(ne,G,Q)=>{r(pe=>pe.map(ee=>{if(String(ee.id)!==String(ne))return ee;const ge=[G,...ee.comentarios||[]],se=Array.isArray(G.mentions)&&G.mentions.length>0?{tipo:"notificacao",autor:Be,data:G.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:G.mentions,id_demanda:ee.id}:null,he=se?[se,Q,...ee.historico||[]]:[Q,...ee.historico||[]];return{...ee,comentarios:ge,historico:he,fxSavedAt:Date.now()}}));const oe=n.find(pe=>String(pe.id)===String(ne));if(de&&oe)try{const pe=Array.isArray(G.mentions)&&G.mentions.length>0?{tipo:"notificacao",autor:Be,data:G.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:G.mentions,id_demanda:oe.id}:null,ee=pe?[pe,Q,...oe.historico||[]]:[Q,...oe.historico||[]];await Js(dt(de,"demandas",String(ne)),{comentarios:[G,...oe.comentarios||[]],historico:ee})}catch{}},Ae=async ne=>{if(r(G=>G.map(Q=>Q.id===ne?{...Q,fxDeleting:!0}:Q)),setTimeout(()=>{r(G=>G.filter(Q=>Q.id!==ne))},180),de)try{await Zc(dt(de,"demandas",String(ne)))}catch{}},ve=async(ne,G)=>{const Q=wn();let oe=null;r(ee=>ee.map(ge=>{if(ge.id!==ne)return ge;if((ge.historico||[]).some(Oe=>Oe.tipo==="alerta"&&Oe.data===Q&&Oe.mensagem===G))return oe=ge,ge;const he={tipo:"alerta",autor:Be,data:Q,data_hora_evento:new Date().toISOString(),mensagem:G,id_demanda:ge.id},ue={...ge,historico:[he,...ge.historico||[]]};return oe=ue,ue}));const pe=oe||n.find(ee=>ee.id===ne);if(pe&&de)try{const ee={tipo:"alerta",autor:Be,data:Q,data_hora_evento:new Date().toISOString(),mensagem:G,id_demanda:pe.id};await Js(dt(de,"demandas",String(ne)),{...pe,historico:[ee,...pe.historico||[]]})}catch{}};K.useEffect(()=>{const ne=setInterval(()=>{wn();const G=n.filter(se=>!br(se.status)),Q=G.reduce((se,he)=>{const ue=he.designer||"";return se[ue]=(se[ue]||0)+1,se},{});G.forEach(se=>{if(se.prazo)try{const[ct,Tt,kn]=String(se.prazo).split("-").map(Number),Dt=new Date(ct,(Tt||1)-1,kn||1);Dt.setHours(0,0,0,0);const It=new Date;It.setHours(0,0,0,0),Dt-It<=864e5&&ve(se.id,"Prazo menor que 24h")}catch{}const he=(se.historico||[]).find(ct=>ct.tipo==="status");if(he!=null&&he.data_hora_evento||he!=null&&he.data){const ct=he.data_hora_evento?Date.parse(he.data_hora_evento):Date.parse(`${he.data}T00:00:00Z`);!isNaN(ct)&&Date.now()-ct>=1728e5&&ve(se.id,"Demanda estagnada h 48h")}const ue=se.designer||"",Oe=Q[ue]||0,tt=Math.min(100,Math.round(Oe/4*100));tt>=100?ve(se.id,`Capacidade 100% para ${ue}  Risco mximo`):tt>=85&&ve(se.id,`Designer ${ue} est com ${tt}% da capacidade utilizada. Risco de atraso.`),(se.revisoes||0)>=2&&ve(se.id,"Retrabalho acima do limite")});const oe=n.filter(se=>br(se.status)),pe=oe.filter(se=>se.prazo&&se.dataConclusao&&se.dataConclusao<=se.prazo).length,ee=oe.filter(se=>se.prazo&&se.dataConclusao).length;Math.round(100*(pe/Math.max(1,ee)))<80&&G.forEach(se=>ve(se.id,"SLA geral abaixo de 80%"))},6e4);return()=>clearInterval(ne)},[n]);const Je=async({designer:ne,tipoMidia:G,titulo:Q,link:oe,arquivoNome:pe,dataSolic:ee,dataCriacao:ge,dataFeedback:se,plataforma:he,arquivos:ue,descricao:Oe,prazo:tt,comentarios:ct,historico:Tt,origem:kn,campanha:Dt})=>{const It=async()=>{if(de){try{G&&await kr(dt(de,"cad_tipos",String(G)),{name:G},{merge:!0})}catch{}try{he&&await kr(dt(de,"cad_plataformas",String(he)),{name:he},{merge:!0})}catch{}try{if(Tt&&Array.isArray(Tt)){const gt=Tt[0],St=(gt==null?void 0:gt.para)||(gt==null?void 0:gt.de)||"Aberta";St&&await kr(dt(de,"cad_status",String(St)),{name:St},{merge:!0})}}catch{}}};if(I==="edit"&&b){const gt={...b,designer:ne,tipoMidia:G,titulo:Q,link:oe,descricao:Oe,comentarios:ct??b.comentarios,historico:Tt??b.historico,arquivos:ue&&ue.length?ue:b.arquivos,arquivoNome:pe||b.arquivoNome,dataSolicitacao:ee||b.dataSolicitacao,dataCriacao:ge||b.dataCriacao,dataFeedback:se||b.dataFeedback,plataforma:he,prazo:tt,origem:kn,campanha:Dt},St={...gt,fxSavedAt:Date.now()};if(r(on=>on.map(Tr=>Tr.id===b.id?St:Tr)),de)try{await Js(dt(de,"demandas",String(b.id)),gt)}catch{}await It()}else{const gt=wn(),St=new Date().toISOString(),on={tipo:"status",autor:Be,data:gt,data_hora_evento:St,status_anterior:"",status_novo:"Aberta",duracao_em_minutos:null,responsavel:Be,id_demanda:null,de:"",para:"Aberta"},Tr=hf(n,{designer:ne,tipoMidia:G,plataforma:he,origem:kn}),zn={designer:ne,tipoMidia:G,titulo:Q,link:oe,descricao:Oe,comentarios:[],historico:[on],arquivos:ue||[],arquivoNome:pe,plataforma:he,origem:kn,campanha:Dt,dataSolicitacao:ee,dataCriacao:gt,dataFeedback:void 0,status:"Aberta",prazo:tt,tempoProducaoMs:0,startedAt:null,finishedAt:null,revisoes:0,createdBy:Be,previsaoIA:Tr,slaStartAt:null,slaStopAt:null,slaPauseMs:0,pauseStartedAt:null,slaNetMs:0,slaOk:null,leadTotalMin:0,leadPorFase:{}},vn=Ny(n);if(r(an=>[...an,{...zn,id:vn,fxNewAt:Date.now()}]),de)try{await kr(dt(de,"demandas",String(vn)),{...zn,id:vn,createdAt:iy()});const an={...on,id_demanda:vn};try{await sy(Nn(de,"historico_status"),an)}catch{}}catch{}await It()}A(!1)},Er=async()=>{if(window.confirm("Confirmar: apagar TODAS as demandas e limpar relatrios?")){r([]);try{w({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""})}catch{}if(de)try{const ne=await zd(Nn(de,"demandas")),G=[];ne.forEach(Q=>G.push(Zc(dt(de,"demandas",Q.id)))),G.length&&await Promise.all(G)}catch{}}};return l.jsxs("div",{className:"layout",children:[t?l.jsx(ZR,{route:f,setRoute:m,allowedRoutes:jt}):null,l.jsx("div",{className:`content ${t?"":"no-sidebar"} page`,children:l.jsxs("div",{className:"app",children:[t?l.jsx($R,{onNew:J,view:o,setView:c,showNew:!!t,user:t,onLogout:Un,setRoute:m}):null,!t&&l.jsx(qR,{onLogin:tr}),t&&f==="dashboard"&&jt.includes("dashboard")&&l.jsx(rj,{demandas:n,items:Fn,designers:Pn,setView:c,onEdit:te,onStatus:ce,cadStatus:C,onDelete:Ae,onDuplicate:me,compact:u,calRef:lt,setCalRef:yr,loading:s}),t&&f==="demandas"&&jt.includes("demandas")&&l.jsxs("div",{className:"demandas-layout",children:[l.jsx("div",{className:"sidebar-col",children:l.jsx(nj,{filtros:g,setFiltros:w,designers:sn,showSearch:!1,statusCounts:er})}),l.jsxs("div",{className:"content-col",children:[l.jsxs("div",{className:"top-search",children:[l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:g.q||"",onChange:ne=>w(G=>({...G,q:ne.target.value}))}),l.jsxs("button",{className:"primary",onClick:J,disabled:!E,children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto"},children:l.jsx(HR,{view:o,setView:c})})]}),o==="table"&&l.jsx("div",{className:"table-scroll",children:l.jsx(KR,{items:Xe.slice(0,ke),onEdit:te,onStatus:ce,cadStatus:C,onDelete:Ae,onDuplicate:me,hasMore:Xe.length>ke,showMore:()=>Ve(ne=>Math.min(ne+10,Xe.length)),canCollapse:ke>10,showLess:()=>Ve(10),shown:Math.min(ke,Xe.length),total:Xe.length,compact:u,canEdit:!!t,loading:s})}),o==="calendar"&&l.jsx(QR,{items:Xe,refDate:lt}),l.jsx(YR,{open:F,mode:I,onClose:()=>A(!1),onSubmit:Je,initial:b,cadTipos:j,designers:sn,cadPlataformas:at,onDelete:Ae,userLabel:Be,canDelete:D,onAddComment:Ie,cadOrigens:et}),l.jsx(WR,{open:k,filtros:g,setFiltros:w,designers:sn,onClose:()=>O(!1),cadStatus:C,cadTipos:j,origens:et,campanhas:Fe})]})]}),t&&f==="config"&&jt.includes("config")&&l.jsx(tj,{themeVars:L,setThemeVars:v,onReset:Er,appSettings:y,setAppSettings:T}),t&&f==="cadastros"&&jt.includes("cadastros")&&l.jsx(XR,{cadStatus:C,setCadStatus:R,cadTipos:j,setCadTipos:x,cadPlataformas:at,setCadPlataformas:Et,cadOrigens:et,setCadOrigens:q,cadStatusColors:z,setCadStatusColors:$}),t&&f==="relatorios"&&jt.includes("relatorios")&&l.jsx(sj,{demandas:n,items:Xe,designers:sn,filtros:g,setFiltros:w,loading:s}),t&&f==="usuarios"&&jt.includes("usuarios")&&l.jsx(ej,{role:Se})]})})]})}function ZR({route:t,setRoute:e,allowedRoutes:n}){return l.jsx("aside",{className:"sidebar",children:l.jsx("nav",{children:l.jsx("ul",{className:"nav-list",children:n.map(r=>l.jsx("li",{children:l.jsxs("a",{href:"#",className:`nav-link ${t===r?"active":""}`,onClick:s=>{s.preventDefault(),e(r)},children:[l.jsx("span",{className:"nav-ico",children:r==="dashboard"?l.jsx(De,{name:"dashboard"}):r==="demandas"?l.jsx(De,{name:"demandas"}):r==="config"?l.jsx(De,{name:"config"}):r==="cadastros"?l.jsx(De,{name:"cadastros"}):r==="relatorios"?l.jsx(De,{name:"relatorios"}):l.jsx(De,{name:"usuarios"})}),l.jsx("span",{children:r==="dashboard"?"Dashboard":r==="demandas"?"Demandas":r==="config"?"Configuraes":r==="cadastros"?"Cadastros":r==="relatorios"?"Relatrios":"Usurios"})]})},r))})})})}function ej({users:t,onCreate:e,onDelete:n,onUpdate:r,role:s}){const[i,o]=K.useState(""),[c,u]=K.useState(""),[d,f]=K.useState(""),[m,g]=K.useState(""),[w,k]=K.useState("comum"),[O,F]=K.useState("Designer"),[A,I]=K.useState([]),S=K.useMemo(()=>Ay?VR(Ay):null,[]),[b,N]=K.useState({});K.useEffect(()=>{if(de){const q=Gs(Nn(de,"usuarios"),B=>{const M=[];B.forEach(z=>M.push({id:z.id,...z.data()})),I(M)});return()=>{try{q()}catch{}}}else I([])},[]);const[L,v]=K.useState({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),[y,T]=K.useState({criar:!0,excluir:!0,visualizar:!0}),C=(q,B)=>q(M=>({...M,[B]:!M[B]})),R=async()=>{const q=i.trim(),B=m.trim()||`${q}@betaki.bet.br`;if(!q||!d)return;const M={username:q,name:c||q,role:w,cargo:O,pages:L,actions:y,email:B};if(de)try{try{await tT(ir,B,d)}catch(z){if((z==null?void 0:z.code)!=="auth/email-already-in-use")throw z}await kr(dt(de,"usuarios",q),M)}catch{}o(""),u(""),f(""),g(""),k("comum"),F("Designer"),v({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),T({criar:!0,excluir:!0,visualizar:!0})},j=async q=>{if((q.username||q.id)!=="admin"&&de)try{await Zc(dt(de,"usuarios",q.username||q.id)),I(B=>B.filter(M=>(M.username||M.id)!==(q.username||q.id)))}catch{}},x=async q=>{const B=String(b[q.username||q.id]||"").trim();if(B&&S)try{await FR(S,"updateUserPassword")({username:q.username||q.id,password:B,email:q.email||void 0}),N(z=>({...z,[q.username||q.id]:""}))}catch{}},at=async(q,B)=>{const M=q.pages||{},z={pages:{...M,[B]:!M[B]}};if(de)try{await Js(dt(de,"usuarios",q.username||q.id),z),I($=>$.map(X=>X.username===q.username||X.id===q.id?{...X,...z}:X))}catch{}},Et=async(q,B)=>{const M=q.actions||{},z={actions:{...M,[B]:!M[B]}};if(de)try{await Js(dt(de,"usuarios",q.username||q.id),z),I($=>$.map(X=>X.username===q.username||X.id===q.id?{...X,...z}:X))}catch{}},et=async(q,B)=>{const M={cargo:B};if(de)try{await Js(dt(de,"usuarios",q.username||q.id),M),I(z=>z.map($=>$.username===q.username||$.id===q.id?{...$,...M}:$))}catch{}};return l.jsxs("div",{className:"panel users-panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Usurios"})}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Usurio"}),l.jsx("input",{value:i,onChange:q=>o(q.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Nome"}),l.jsx("input",{value:c,onChange:q=>u(q.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Senha"}),l.jsx("input",{type:"password",value:d,onChange:q=>f(q.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",value:m,onChange:q=>g(q.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Perfil"}),l.jsxs("select",{value:w,onChange:q=>k(q.target.value),children:[l.jsx("option",{value:"comum",children:"Comum"}),l.jsx("option",{value:"gerente",children:"Gerente"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Cargo"}),l.jsxs("select",{value:O,onChange:q=>F(q.target.value),children:[l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Pginas"}),l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(q=>l.jsxs("button",{className:`btn-md ${L[q]?"active":""}`,type:"button",onClick:()=>C(v,q),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:q==="dashboard"?"dashboard":q==="demandas"?"demandas":q==="config"?"config":q==="cadastros"?"cadastros":q==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:q==="dashboard"?"Dashboard":q==="demandas"?"Demandas":q==="config"?"Configuraes":q==="cadastros"?"Cadastros":q==="relatorios"?"Relatrios":"Usurios"})]},q))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Aes"}),l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([q,B,M])=>l.jsxs("button",{className:`btn-md ${y[q]?"active":""}`,type:"button",onClick:()=>C(T,q),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:B})}),l.jsx("span",{children:M})]},q))})]}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"primary",type:"button",onClick:R,children:"Criar usurio"})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usurio"}),l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Perfil"}),l.jsx("th",{children:"Cargo"}),l.jsx("th",{children:"Pginas"}),l.jsx("th",{children:"Aes"}),l.jsx("th",{children:"Senha"}),l.jsx("th",{children:"Gerenciar"})]})}),l.jsx("tbody",{children:(A||[]).map(q=>l.jsxs("tr",{children:[l.jsx("td",{children:q.username}),l.jsx("td",{children:q.name||q.username}),l.jsx("td",{children:q.role||"comum"}),l.jsx("td",{children:l.jsxs("select",{value:q.cargo||"",onChange:B=>et(q,B.target.value),children:[l.jsx("option",{value:"",children:"Selecione"}),l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(B=>{var M;return l.jsxs("button",{className:`btn-md ${((M=q.pages)==null?void 0:M[B])===!0?"active":""}`,type:"button",onClick:()=>at(q,B),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:B==="dashboard"?"dashboard":B==="demandas"?"demandas":B==="config"?"config":B==="cadastros"?"cadastros":B==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:B==="dashboard"?"Dashboard":B==="demandas"?"Demandas":B==="config"?"Configuraes":B==="cadastros"?"Cadastros":B==="relatorios"?"Relatrios":"Usurios"})]},B)})})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([B,M,z])=>{var $;return l.jsxs("button",{className:`btn-md ${(($=q.actions)==null?void 0:$[B])===!0?"active":""}`,type:"button",onClick:()=>Et(q,B),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:M})}),l.jsx("span",{children:z})]},B)})})}),l.jsx("td",{children:l.jsxs("div",{className:"form-row",children:[l.jsx("input",{type:"password",placeholder:"Nova senha",value:b[q.username||q.id]||"",onChange:B=>N(M=>({...M,[q.username||q.id]:B.target.value}))}),l.jsx("button",{className:"primary",type:"button",onClick:()=>x(q),children:"Salvar"})]})}),l.jsx("td",{children:l.jsxs("button",{className:"icon",onClick:()=>j(q),disabled:q.username==="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"trash"})}),l.jsx("span",{children:"Excluir"})]})})]},q.username))})]})]})}function tj({themeVars:t,setThemeVars:e,onReset:n,appSettings:r,setAppSettings:s}){const[i,o]=K.useState(t||{}),[c,u]=K.useState(""),[d,f]=K.useState("");K.useEffect(()=>{o(t||{})},[t]);const m=v=>/^#[0-9a-fA-F]{6}$/.test(v||""),g=v=>/^#[0-9a-fA-F]{8}$/.test(v||""),w=v=>/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0|1|0?\.\d+)\)$/.exec(v||""),k=v=>Math.max(0,Math.min(255,v|0)).toString(16).padStart(2,"0"),O=v=>({r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16)}),F=v=>{if(m(v))return{fmt:"hex6",base:v,a:1};if(g(v))return{fmt:"hex8",base:"#"+v.slice(1,7),a:parseInt(v.slice(7,9),16)/255};const y=w(v);return y?{fmt:"rgba",base:"#"+k(+y[1])+k(+y[2])+k(+y[3]),a:parseFloat(y[4])}:{fmt:"other",base:v,a:1}},A=(v,y,T)=>{const C=v==="hover"?"rgba":v==="border"||v==="btnBorder"?"hex8":"hex6";if(C==="hex6"||T>=1)return y;if(C==="hex8")return y+k(Math.round(T*255));const{r:R,g:j,b:x}=O(y);return`rgba(${R},${j},${x},${T})`},I=(v,y)=>{const T={...i,[v]:y};o(T),e(T)},S=(v,y)=>{const T=F(i[v]||""),C=Math.max(0,Math.min(100,Number(y)||0))/100,R=A(v,T.base,C);I(v,R)},b=()=>{if(!c)return;const v={...i,[c]:d||""};o(v),e(v),u(""),f("")},N=()=>e(gT),L=[{title:"Base",keys:["bg","panel","accent"]},{title:"Texto",keys:["text","muted"]},{title:"Traado",keys:["border"]},{title:"Botes",keys:["btnBg","btnText","btnHoverBg","btnBorder"]},{title:"Hover/Efeitos",keys:["hover","shadow"]},{title:"Extras",keys:["green","yellow","red","chart"]}];return l.jsxs("div",{className:"panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Tema"})}),l.jsxs("div",{className:"config-grid",children:[L.map(v=>l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"title",children:v.title}),v.keys.map(y=>{const T=i[y]||"",C=F(T),R=C.fmt!=="other",j=y==="hover"||y==="border"||y==="btnBorder";return l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:y}),l.jsxs("div",{className:"color-row",children:[R?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"color",value:C.base,onChange:x=>I(y,A(y,x.target.value,C.a))}),j&&l.jsx("input",{className:"alpha",type:"range",min:"0",max:"100",step:"1",value:Math.round(C.a*100),onChange:x=>S(y,x.target.value),title:`Alpha ${Math.round(C.a*100)}%`})]}):l.jsx("input",{value:T,onChange:x=>I(y,x.target.value)}),l.jsx("div",{className:"swatch",style:{background:T}})]})]},y)})]},v.title)),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Adicionar varivel"}),l.jsxs("div",{className:"color-row",children:[l.jsx("input",{placeholder:"nome",value:c,onChange:v=>u(v.target.value)}),l.jsx("input",{placeholder:"valor",value:d,onChange:v=>f(v.target.value)}),l.jsx("button",{className:"primary",type:"button",onClick:b,children:"Adicionar"})]})]}),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Integraes"}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Autopost via mLabs"}),l.jsx("input",{type:"checkbox",checked:!!r.autoPostMLabs,onChange:v=>s(y=>({...y,autoPostMLabs:v.target.checked}))})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"danger",type:"button",onClick:n,children:"Resetar sistema"}),l.jsx("button",{className:"primary",type:"button",onClick:N,children:"Restaurar padro"})]})]})}function nj({filtros:t,setFiltros:e,designers:n,showSearch:r,statusCounts:s}){const[i,o]=K.useState("today");K.useEffect(()=>{const w=new Date,k=N=>{const L=v=>String(v).padStart(2,"0");return`${N.getFullYear()}-${L(N.getMonth()+1)}-${L(N.getDate())}`},O=N=>{const L=new Date(N),v=L.getDay()||7;return L.setDate(L.getDate()-(v-1)),new Date(L.getFullYear(),L.getMonth(),L.getDate())},F=N=>{const L=O(N),v=new Date(L);return v.setDate(v.getDate()+6),v},A=new Date(w.getFullYear(),w.getMonth(),1),I=new Date(w.getFullYear(),w.getMonth()+1,0),S=new Date(w.getFullYear(),w.getMonth()-1,1),b=new Date(w.getFullYear(),w.getMonth(),0);if(i==="today"&&e(N=>({...N,sIni:k(w),sFim:k(w),cIni:"",cFim:""})),i==="week"){const N=O(w),L=F(w);e(v=>({...v,sIni:k(N),sFim:k(L),cIni:"",cFim:""}))}if(i==="month"&&e(N=>({...N,sIni:k(A),sFim:k(I),cIni:"",cFim:""})),i==="lastmonth"&&e(N=>({...N,sIni:k(S),sFim:k(b),cIni:"",cFim:""})),i==="last30"){const N=new Date(w);N.setDate(N.getDate()-29),e(L=>({...L,sIni:k(N),sFim:k(w),cIni:"",cFim:""}))}},[i]);const c=w=>e(k=>({...k,designer:w==="Todos"?"":w})),u=["Hoje","Semana","Ms","Ms passado","ltimos 30 dias"],d=w=>w==="Hoje"?"today":w==="Semana"?"week":w==="Ms"?"month":w==="Ms passado"?"lastmonth":"last30",f=["Todos",...n],m=w=>w==="Pendente"?"gray":w==="Em produo"?"yellow":w==="Revisar"?"red":w==="Aguardando Feedback"?"purple":w==="Aprovada"?"green-approve":w==="Concluida"||w==="Concluda"?"green-dark":"",g=w=>w==="Pendente"?"":w==="Em produo"?"":w==="Aguardando Feedback"?"":w==="Revisar"?"":w==="Aprovada"?"":w==="Concluida"||w==="Concluda"?"":"";return l.jsxs("div",{className:"filterbar",children:[r!==!1&&l.jsx("div",{className:"seg",style:{flex:1,minWidth:220},children:l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:t.q||"",onChange:w=>e(k=>({...k,q:w.target.value}))})}),l.jsxs("div",{className:"filters-row",children:[l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Perodo"}),u.map(w=>l.jsxs("button",{className:`btn-md ${i===d(w)?"active":""}`,onClick:()=>o(d(w)),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"calendar"})}),l.jsx("span",{children:w})]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Designer"}),f.map(w=>l.jsxs("button",{className:`btn-md ${(t.designer||"")===w||w==="Todos"&&!t.designer?"active":""}`,onClick:()=>c(w),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"usuarios"})}),l.jsx("span",{children:w})]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Status"}),Ha.map(w=>l.jsxs("button",{className:`btn-md ${m(w)} ${(t.status||"")===w?"active":""}`,onClick:()=>e(k=>({...k,status:k.status===w?void 0:w})),children:[l.jsx("span",{className:"emoji",children:g(w)}),l.jsx("span",{children:w}),(s==null?void 0:s[w])>0?l.jsx("span",{className:"alert-count",children:s[w]}):null]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Data"}),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"calendar"})}),l.jsx("input",{type:"date",value:t.cIni||"",onChange:w=>e(k=>({...k,cIni:w.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:t.cFim||"",onChange:w=>e(k=>({...k,cFim:w.target.value}))})]})]})]})]})}function rj({demandas:t,items:e,designers:n,setView:r,onEdit:s,onStatus:i,cadStatus:o,onDelete:c,onDuplicate:u,compact:d,calRef:f,setCalRef:m,loading:g}){const w=e.length,k=e.filter(M=>br(M.status)),O=k.length,F=e.filter(M=>!br(M.status)).length,A=e.reduce((M,z)=>M+(z.revisoes||0),0),I=Math.round(100*(e.filter(M=>(M.revisoes||0)>0).length/Math.max(1,w))),S=(()=>{const M=k.filter($=>$.prazo&&$.dataConclusao&&$.dataConclusao<=$.prazo).length,z=k.filter($=>$.prazo&&$.dataConclusao).length;return Math.round(100*(M/Math.max(1,z)))})(),b=(()=>{const M=ae=>{if(!ae)return null;const[Ee,Fe,Se]=String(ae).split("-").map(Number);return new Date(Ee,Fe-1,Se)},z=e.map(ae=>M(ae.dataCriacao||ae.dataSolicitacao)).filter(Boolean).sort((ae,Ee)=>ae-Ee);if(!z.length)return 0;const $=z[0],X=z[z.length-1];return Math.max(1,Math.round((X-$)/864e5)+1)})(),N=4,L=n.length*N*b,v=(()=>{const M=L;return M?Math.round(100*(O/M)):0})(),y=e.filter(M=>lm(M.status)).length,T=e.filter(M=>am(M.status)).length,C=(()=>{const M={};k.forEach($=>{const X=$.designer||"";M[X]=(M[X]||0)+1});const z=N*b;return n.map($=>{const X=M[$]||0,ae=z?Math.round(100*(X/z)):0,Ee=z===0||ae<=90?"Verde":ae<=110?"Amarelo":"Vermelho";return{designer:$,ideal:z,real:X,used:ae,status:Ee}})})(),R=(()=>{const M={};return e.forEach(z=>{if(!br(z.status)){const $=z.designer||"";M[$]=(M[$]||0)+1}}),M})(),j=(()=>{const M=[];return C.forEach($=>{$.used>=110?M.push(`Designer ${$.designer} sobrecarregado (${$.used}%)  risco de atraso`):$.used>=90&&M.push(`Designer ${$.designer} com carga alta (${$.used}%)  monitorar prazos`);const X=R[$.designer]||0;X>=N*2&&M.push(`Designer ${$.designer} com ${X} demandas ativas  priorizar distribuio`)}),e.filter($=>{if(br($.status)||!$.prazo)return!1;const[X,ae,Ee]=String($.prazo).split("-").map(Number),Fe=new Date(X,(ae||1)-1,Ee||1),Se=new Date;return Se.setHours(0,0,0,0),Fe.setHours(0,0,0,0),Fe-Se<=864e5}).slice(0,5).forEach($=>M.push(`Prazo crtico: ${$.titulo} (${$.designer||""})`)),M})(),x=(()=>{const M=new Map;return k.forEach(z=>M.set(z.designer||"",(M.get(z.designer||"")||0)+1)),Array.from(M.entries()).map(([z,$])=>({designer:z,qty:$}))})(),at=(()=>{const M=($,X)=>{const ae=Ee=>{const[Fe,Se,Ye]=String(Ee).split("-").map(Number);return new Date(Fe,Se-1,Ye)};return!$||!X?null:Math.max(0,Math.round((ae(X)-ae($))/864e5))},z={};return e.forEach($=>{if($.dataConclusao){const X=$.designer||"",ae=M($.dataCriacao||$.dataSolicitacao,$.dataConclusao);if(ae!=null){const Ee=z[X]||{cnt:0,sum:0,min:9999,max:0};z[X]={cnt:Ee.cnt+1,sum:Ee.sum+ae,min:Math.min(Ee.min,ae),max:Math.max(Ee.max,ae)}}}}),Object.entries(z).map(([$,X])=>({designer:$,media:X.sum/X.cnt||0}))})(),Et=(()=>{const M={};return e.forEach(z=>{if(z.prazo&&z.dataConclusao){const $=z.designer||"",X=z.dataConclusao<=z.prazo,ae=M[$]||{ok:0,total:0};M[$]={ok:ae.ok+(X?1:0),total:ae.total+1}}}),Object.entries(M).map(([z,$])=>({designer:z,pct:Math.round(100*($.ok/($.total||1)))}))})(),et=(()=>{const M={};return e.forEach(z=>{const $=z.designer||"",X=z.revisoes||0,ae=M[$]||{rTot:0,cnt:0};M[$]={rTot:ae.rTot+X,cnt:ae.cnt+1}}),Object.entries(M).map(([z,$])=>({designer:z,porPeca:+($.rTot/($.cnt||1)).toFixed(2)}))})(),q=(()=>{const M=x.reduce((ke,{designer:Ve,qty:lt})=>(ke[Ve]=lt,ke),{}),z=Et.reduce((ke,{designer:Ve,pct:lt})=>(ke[Ve]=lt,ke),{}),$=at.reduce((ke,{designer:Ve,media:lt})=>(ke[Ve]=lt,ke),{}),X=et.reduce((ke,{designer:Ve,porPeca:lt})=>(ke[Ve]=lt,ke),{}),ae=Array.from(new Set([...Object.keys(M),...Object.keys(z),...Object.keys($),...Object.keys(X)])).filter(Boolean),Ee=(ke,Ve,lt)=>lt===Ve?1:Math.max(0,Math.min(1,(ke-Ve)/(lt-Ve))),Fe=Math.max(...Object.values(M||{_:-1}),0),Se=Math.min(...Object.values(M||{_:-1}),0),Ye=100,Fn=0,Pn=Math.max(...Object.values($||{_:-1}),0),zt=Math.min(...Object.values($||{_:-1}),0),sn=Math.max(...Object.values(X||{_:-1}),0),Xe=Math.min(...Object.values(X||{_:-1}),0);return ae.map(ke=>{const Ve=Ee(M[ke]||0,Se,Fe),lt=Ee(z[ke]||0,Fn,Ye),yr=1-Ee($[ke]||0,zt,Pn),Kr=1-Ee(X[ke]||0,Xe,sn),_r=Math.round((Ve*.4+lt*.3+yr*.2+Kr*.1)*100);return{designer:ke,score:_r,sla:z[ke]||0,retrab:X[ke]||0}}).sort((ke,Ve)=>Ve.score-ke.score).slice(0,5)})(),B=(()=>{const M=Array.from({length:11},($,X)=>X+8),z={};return n.forEach($=>z[$]=M.map(X=>0)),e.forEach($=>{if($.startedAt)try{const ae=new Date($.startedAt).getHours();if(ae>=8&&ae<=18){const Ee=$.designer||"",Fe=ae-8;z[Ee]&&z[Ee][Fe]++}}catch{}}),{horas:M,per:z}})();return g?l.jsxs("div",{className:"dashboard",children:[l.jsx("div",{className:"exec-summary",children:Array.from({length:5}).map((M,z)=>l.jsx("div",{className:"skeleton row"},z))}),l.jsx("div",{className:"section-grid",children:Array.from({length:2}).map((M,z)=>l.jsx("div",{className:"skeleton card",style:{height:160}},z))})]}):l.jsxs("div",{className:"dashboard",children:[l.jsxs("div",{className:"exec-summary",children:[l.jsx("div",{className:"exec-title",children:"RESUMO EXECUTIVO DO PERODO"}),l.jsxs("div",{className:"exec-grid",children:[l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Produo total"}),l.jsx("div",{className:"exec-value",children:O})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"SLA geral"}),l.jsxs("div",{className:"exec-value",style:{color:S>=90?"#BCD200":S>=70?"#FFE55C":"#FF5E5E"},children:[S,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"% retrabalho"}),l.jsxs("div",{className:"exec-value",children:[I,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Backlog atual"}),l.jsx("div",{className:"exec-value",children:F})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Capacidade usada"}),l.jsxs("div",{className:"exec-value",children:[v,"%"]}),l.jsx("div",{className:"progress",children:l.jsx("div",{className:"progress-fill",style:{width:`${v}%`,background:"#BCD200"}})})]})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PRODUO"}),l.jsxs("div",{className:"badge-grid",children:[l.jsxs("div",{className:"badge blue",children:[l.jsx("div",{children:"Criadas"}),l.jsx("div",{children:w})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"Concludas"}),l.jsx("div",{children:O})]}),l.jsxs("div",{className:"badge yellow",children:[l.jsx("div",{children:"Em produo"}),l.jsx("div",{children:y})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"Pendentes"}),l.jsx("div",{children:T})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"QUALIDADE"}),l.jsxs("div",{className:"badge-group",children:[l.jsxs("div",{className:"badge purple",children:[l.jsx("div",{children:"Revises"}),l.jsx("div",{children:A})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"% Retrabalho"}),l.jsxs("div",{children:[I,"%"]})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"SLA"}),l.jsxs("div",{children:[S,"%"]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PESSOAS"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Score"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"%Retrab"})]})}),l.jsx("tbody",{children:q.map((M,z)=>l.jsxs("tr",{children:[l.jsx("td",{children:z+1}),l.jsx("td",{children:M.designer}),l.jsx("td",{children:M.score}),l.jsxs("td",{children:[M.sla,"%"]}),l.jsx("td",{children:Math.round((M.retrab||0)*100)/100})]},M.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"OPERAO"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Capacidade ideal"}),l.jsx("th",{children:"Produo real"}),l.jsx("th",{children:"Capacidade usada"}),l.jsx("th",{children:"Status"})]})}),l.jsx("tbody",{children:C.map(M=>l.jsxs("tr",{children:[l.jsx("td",{children:M.designer}),l.jsx("td",{children:M.ideal}),l.jsx("td",{children:M.real}),l.jsxs("td",{children:[M.used,"%"]}),l.jsx("td",{style:{color:M.status==="Verde"?"#00C58E":M.status==="Amarelo"?"#FFE55C":"#FF5E5E"},children:M.status})]},M.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"ASSISTENTE IA"}),l.jsx("div",{className:"insights-grid",children:j.map((M,z)=>l.jsxs("div",{className:"insight-card",style:{opacity:0,animation:"pageIn .6s forwards"},children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:M})]},z))})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"HEATMAP DE PRODUTIVIDADE POR HORRIO"}),l.jsxs("div",{className:"heatmap",children:[l.jsxs("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:[l.jsx("div",{className:"chart-label",style:{width:120}}),B.horas.map(M=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(M).padStart(2,"0"),"h"]},M))]}),n.map(M=>l.jsxs("div",{className:"heat-row",style:{alignItems:"center"},children:[l.jsx("div",{className:"chart-label",style:{width:120},children:M}),B.horas.map((z,$)=>{const X=(B.per[M]||[])[$]||0,ae=X===0?"#222":X<2?"#4DA3FF33":"#4DA3FF";return l.jsx("div",{className:"heat-cell",style:{background:ae,width:24,height:24},title:`${M} ${String(z).padStart(2,"0")}h: ${X}`},z)})]},M))]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"LINHA DO TEMPO DE PRODUO MENSAL"}),l.jsx("div",{className:"chips",children:x.map(({designer:M,qty:z})=>l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[l.jsx("span",{className:"chip",children:M}),l.jsx(BR,{series:[Math.max(1,z-1),z,z+1],color:"#4DA3FF"})]},M))})]})]})]})}function sj({demandas:t,items:e,designers:n,filtros:r,setFiltros:s,loading:i}){var jt,Un,tr;const o=["Hoje","Semana","Ms","Ms passado"],c=E=>E==="Hoje"?"today":E==="Semana"?"week":E==="Ms"?"month":"lastmonth",[u,d]=K.useState("month"),[f,m]=K.useState(n[0]||""),[g,w]=K.useState(n[1]||"");K.useEffect(()=>{const E=new Date,D=Ae=>{const ve=Je=>String(Je).padStart(2,"0");return`${Ae.getFullYear()}-${ve(Ae.getMonth()+1)}-${ve(Ae.getDate())}`},P=Ae=>{const ve=new Date(Ae),Je=ve.getDay()||7;return ve.setDate(ve.getDate()-(Je-1)),new Date(ve.getFullYear(),ve.getMonth(),ve.getDate())},J=Ae=>{const ve=P(Ae),Je=new Date(ve);return Je.setDate(Je.getDate()+6),Je},te=new Date(E.getFullYear(),E.getMonth(),1),me=new Date(E.getFullYear(),E.getMonth()+1,0),ce=new Date(E.getFullYear(),E.getMonth()-1,1),Ie=new Date(E.getFullYear(),E.getMonth(),0);if(u==="today"&&s(Ae=>({...Ae,cIni:D(E),cFim:D(E)})),u==="week"){const Ae=P(E),ve=J(E);s(Je=>({...Je,cIni:D(Ae),cFim:D(ve)}))}u==="month"&&s(Ae=>({...Ae,cIni:D(te),cFim:D(me)})),u==="lastmonth"&&s(Ae=>({...Ae,cIni:D(ce),cFim:D(Ie)}))},[u]);const k=["Todos",...n],O=E=>s(D=>({...D,designer:E==="Todos"?"":E})),F=["Todos",...Array.from(new Set(t.map(E=>E.tipoMidia).filter(Boolean)))],A=E=>s(D=>({...D,tipoMidia:E==="Todos"?"":E})),I=["Todos",...om],S=E=>s(D=>({...D,origem:E==="Todos"?"":E})),b=["Todos",...Array.from(new Set(t.map(E=>E.campanha).filter(Boolean)))],N=E=>s(D=>({...D,campanha:E==="Todos"?"":E})),L=["Todos",...Ha],v=E=>s(D=>({...D,status:E==="Todos"?"":E})),y=(()=>{const E=J=>{if(!J)return null;const[te,me,ce]=J.split("-").map(Number);return new Date(te,me-1,ce)},D=E(r.cIni),P=E(r.cFim);return!D||!P?1:Math.max(1,Math.round((P-D)/864e5)+1)})(),T=e.filter(E=>br(E.status));e.filter(E=>am(E.status)),e.filter(E=>lm(E.status)),e.reduce((E,D)=>E+(D.revisoes||0),0),T.length/y;const C=e.filter(E=>!br(E.status)),R=E=>{if(!E)return null;const[D,P,J]=String(E).split("-").map(Number),te=new Date(D,(P||1)-1,J||1),me=new Date;return me.setHours(0,0,0,0),te.setHours(0,0,0,0),Math.round((te-me)/864e5)},j=C.filter(E=>{const D=R(E.prazo);return D!=null&&D<=2}),x=(()=>{const E=C.map(P=>R(P.prazo)).filter(P=>P!=null);return+(E.reduce((P,J)=>P+J,0)/(E.length||1)).toFixed(1)})(),Et=(()=>{const E=C.filter(P=>{const J=R(P.prazo);return J!=null&&J<0}).length,D=C.length||1;return Math.round(100*(E/D))})()>30?"Acumulando atraso":"Saudvel",et=(E,D)=>{const P=J=>{const[te,me,ce]=String(J).split("-").map(Number);return new Date(te,me-1,ce)};return!E||!D?null:Math.max(0,Math.round((P(D)-P(E))/864e5))},q=T.map(E=>et(E.dataCriacao||E.dataSolicitacao,E.dataConclusao)).filter(E=>E!=null),B=+(q.reduce((E,D)=>E+D,0)/(q.length||1)).toFixed(1),M=(()=>{const E={};return T.forEach(D=>{const P=D.tipoMidia||"Outro",J=et(D.dataCriacao||D.dataSolicitacao,D.dataConclusao);if(J!=null){const te=E[P]||{cnt:0,sum:0};E[P]={cnt:te.cnt+1,sum:te.sum+J}}}),Object.entries(E).map(([D,P])=>({tipo:D,media:+(P.sum/P.cnt).toFixed(1)}))})(),z=(()=>{const E={};return T.forEach(D=>{const P=D.designer||"",J=et(D.dataCriacao||D.dataSolicitacao,D.dataConclusao);if(J!=null){const te=E[P]||{cnt:0,sum:0};E[P]={cnt:te.cnt+1,sum:te.sum+J}}}),Object.entries(E).map(([D,P])=>({designer:D,media:+(P.sum/P.cnt).toFixed(1)}))})(),$=new Date,X=new Date($.getFullYear(),$.getMonth()-1,1),ae=(E,D)=>{if(!E)return!1;const[P,J,te]=E.split("-").map(Number),me=new Date(P,J-1,te);return me.getMonth()===D.getMonth()&&me.getFullYear()===D.getFullYear()},Ee=T.filter(E=>ae(E.dataConclusao,$)).map(E=>et(E.dataCriacao||E.dataSolicitacao,E.dataConclusao)).filter(E=>E!=null),Fe=T.filter(E=>ae(E.dataConclusao,X)).map(E=>et(E.dataCriacao||E.dataSolicitacao,E.dataConclusao)).filter(E=>E!=null),Se=+(Ee.reduce((E,D)=>E+D,0)/(Ee.length||1)).toFixed(1),Ye=+(Fe.reduce((E,D)=>E+D,0)/(Fe.length||1)).toFixed(1),Fn=E=>{const D=T.filter(P=>(P.designer||"")===E).map(P=>et(P.dataCriacao||P.dataSolicitacao,P.dataConclusao)).filter(P=>P!=null);return+(D.reduce((P,J)=>P+J,0)/(D.length||1)).toFixed(1)},Pn=(()=>{const E=T.map(te=>te.revisoes||0),D=E.length||1,P=te=>Math.round(100*(E.filter(me=>me===te).length/D)),J=te=>Math.round(100*(E.filter(te).length/D));return{sRev:P(0),umaRev:P(1),duasMais:J(te=>te>=2)}})(),zt=(()=>{const E={};return e.forEach(D=>{const P=D.designer||"",J=D.revisoes||0,te=E[P]||{rTot:0,cnt:0};E[P]={rTot:te.rTot+J,cnt:te.cnt+1}}),Object.entries(E).map(([D,P])=>({designer:D,porPeca:+(P.rTot/(P.cnt||1)).toFixed(2)})).sort((D,P)=>P.porPeca-D.porPeca)})(),sn=(()=>{const E={};return e.forEach(D=>{const P=D.tipoMidia||"Outro",J=D.revisoes||0,te=E[P]||{rTot:0,cnt:0};E[P]={rTot:te.rTot+J,cnt:te.cnt+1}}),Object.entries(E).map(([D,P])=>({tipo:D,porPeca:+(P.rTot/(P.cnt||1)).toFixed(2)})).sort((D,P)=>P.porPeca-D.porPeca)})(),Xe=(()=>{const E={};e.forEach(P=>{const J=P.origem||"Outros";E[J]=(E[J]||0)+1});const D=e.length||1;return Object.entries(E).map(([P,J])=>({origem:P,q:J,pct:Math.round(100*(J/D))}))})(),er=(()=>{const E={};return e.forEach(D=>{const P=D.origem||"Outros",J=D.revisoes||0,te=E[P]||{rTot:0,cnt:0};E[P]={rTot:te.rTot+J,cnt:te.cnt+1}}),Object.entries(E).map(([D,P])=>({origem:D,porPeca:+(P.rTot/(P.cnt||1)).toFixed(2)})).sort((D,P)=>P.porPeca-D.porPeca)})(),ke=(()=>{const E={};return T.forEach(D=>{const P=D.origem||"Outros";E[P]=(E[P]||0)+1}),Object.entries(E).map(([D,P])=>({origem:D,q:P})).sort((D,P)=>P.q-D.q)})(),Ve=(()=>{const E={};return T.forEach(D=>{const P=D.finishedAt;if(!P)return;const J=new Date(P).getHours();E[J]=(E[J]||0)+1}),E})(),lt=(()=>{const E=T.map(J=>Number(J.tempoProducaoMs||0)).filter(J=>J>0),D=E.reduce((J,te)=>J+te,0)/(E.length||1);return+(J=>J/36e5)(D).toFixed(2)})(),yr=(()=>{const E={};return T.forEach(D=>{const P=D.designer||"",J=Number(D.tempoProducaoMs||0),te=E[P]||{cnt:0,sum:0};E[P]={cnt:te.cnt+1,sum:te.sum+J}}),Object.entries(E).map(([D,P])=>({designer:D,horas:+(P.sum/(P.cnt||1)/36e5).toFixed(2)})).sort((D,P)=>D.horas-P.horas)})(),Kr=zt.slice().sort((E,D)=>E.porPeca-D.porPeca),_r=(()=>{const E={};return e.forEach(D=>{const P=D.campanha||"";E[P]=(E[P]||0)+1}),Object.entries(E).map(([D,P])=>({campanha:D,q:P})).sort((D,P)=>P.q-D.q)})(),Be=(()=>{const E={};return e.forEach(D=>{const P=D.campanha||"",J=D.revisoes||0,te=E[P]||{rTot:0,cnt:0};E[P]={rTot:te.rTot+J,cnt:te.cnt+1}}),Object.entries(E).map(([D,P])=>({campanha:D,porPeca:+(P.rTot/(P.cnt||1)).toFixed(2)})).sort((D,P)=>P.porPeca-D.porPeca)})(),wr=(()=>{const E={};return e.forEach(D=>{if(D.campanha){const P=D.campanha,J=!!(D.prazo&&D.dataConclusao&&D.dataConclusao<=D.prazo),te=!!(D.prazo&&D.dataConclusao),me=E[P]||{ok:0,total:0};E[P]={ok:me.ok+(J?1:0),total:me.total+(te?1:0)}}}),Object.entries(E).map(([D,P])=>({campanha:D,sla:Math.round(100*(P.ok/(P.total||1)))}))})();return i?l.jsxs("div",{className:"reports",children:[l.jsx("div",{className:"reports-toolbar",children:l.jsx("div",{className:"skeleton row",style:{width:"50%"}})}),l.jsx("div",{className:"reports-grid",children:Array.from({length:3}).map((E,D)=>l.jsx("div",{className:"skeleton card",style:{height:180}},D))})]}):l.jsxs("div",{className:"reports",children:[l.jsxs("div",{className:"reports-toolbar",children:[l.jsxs("div",{className:"chips",children:[o.map(E=>l.jsxs("button",{className:`btn-md ${u===c(E)?"active":""}`,onClick:()=>d(c(E)),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"calendar"})}),l.jsx("span",{children:E})]},E)),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"calendar"})}),l.jsx("input",{type:"date",value:r.cIni||"",onChange:E=>s(D=>({...D,cIni:E.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:r.cFim||"",onChange:E=>s(D=>({...D,cFim:E.target.value}))})]})]}),l.jsxs("div",{className:"chips",children:[k.map(E=>l.jsxs("button",{className:`btn-md ${(r.designer||"")===E||E==="Todos"&&!r.designer?"active":""}`,onClick:()=>O(E),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"usuarios"})}),l.jsx("span",{children:E})]},E)),F.map(E=>l.jsxs("button",{className:`btn-md ${(r.tipoMidia||"")===E||E==="Todos"&&!r.tipoMidia?"active":""}`,onClick:()=>A(E),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"tag"})}),l.jsx("span",{children:E})]},E)),I.map(E=>l.jsxs("button",{className:`btn-md ${(r.origem||"")===E||E==="Todos"&&!r.origem?"active":""}`,onClick:()=>S(E),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"link"})}),l.jsx("span",{children:E})]},E)),b.map(E=>l.jsxs("button",{className:`btn-md ${(r.campanha||"")===E||E==="Todos"&&!r.campanha?"active":""}`,onClick:()=>N(E),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"tag"})}),l.jsx("span",{children:E})]},E)),L.map(E=>l.jsxs("button",{className:`btn-md ${(r.status||"")===E||E==="Todos"&&!r.status?"active":""}`,onClick:()=>v(E),children:[l.jsx("span",{className:"icon",children:l.jsx(De,{name:"dot"})}),l.jsx("span",{children:E})]},E))]})]}),l.jsxs("div",{className:"reports-grid",children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Backlog"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Backlog total: ",C.length]}),l.jsxs("span",{className:"chip",children:["Em risco (48h): ",j.length]}),l.jsxs("span",{className:"chip",children:["Prazo mdio: ",x,"d"]}),l.jsxs("span",{className:"chip",children:["Estado: ",Et]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(C.reduce((E,D)=>{const P=D.tipoMidia||"Outro";return E[P]=(E[P]||0)+1,E},{})).map(([E,D])=>l.jsxs("tr",{children:[l.jsx("td",{children:E}),l.jsx("td",{children:D})]},E))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(C.reduce((E,D)=>{const P=D.designer||"";return E[P]=(E[P]||0)+1,E},{})).map(([E,D])=>l.jsxs("tr",{children:[l.jsx("td",{children:E}),l.jsx("td",{children:D})]},E))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Lead Time"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mdio geral: ",B,"d"]}),l.jsxs("span",{className:"chip",children:["Este ms: ",Se,"d"]}),l.jsxs("span",{className:"chip",children:["Ms passado: ",Ye,"d"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:M.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.tipo}),l.jsxs("td",{children:[E.media,"d"]})]},E.tipo))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:z.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.designer}),l.jsxs("td",{children:[E.media,"d"]})]},E.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"chips",children:[l.jsx("span",{className:"chip",children:"Designer A"}),l.jsx("select",{value:f,onChange:E=>m(E.target.value),children:n.map(E=>l.jsx("option",{value:E,children:E},E))}),l.jsx("span",{className:"chip",children:"Designer B"}),l.jsx("select",{value:g,onChange:E=>w(E.target.value),children:n.map(E=>l.jsx("option",{value:E,children:E},E))}),l.jsxs("span",{className:"chip",children:["A: ",Fn(f),"d"]}),l.jsxs("span",{className:"chip",children:["B: ",Fn(g),"d"]})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Eficincia e Retrabalho"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Sem reviso: ",Pn.sRev,"%"]}),l.jsxs("span",{className:"chip",children:["1 reviso: ",Pn.umaRev,"%"]}),l.jsxs("span",{className:"chip",children:["2+ revises: ",Pn.duasMais,"%"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:zt.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.designer}),l.jsx("td",{children:E.porPeca})]},E.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:sn.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.tipo}),l.jsx("td",{children:E.porPeca})]},E.tipo))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Demanda por Canal"}),l.jsx("div",{className:"chips",children:Xe.map(E=>l.jsxs("span",{className:"chip",children:[E.origem,": ",E.pct,"%"]},E.origem))}),l.jsx("div",{className:"section-divider"}),(()=>{const E=Xe.reduce((ce,Ie)=>ce+Ie.q,0)||1;let D=0;const P=50,J=60,te=60,me=Xe.slice(0,5).map((ce,Ie)=>{const Ae=ce.q/E,ve=D*2*Math.PI,Je=(D+Ae)*2*Math.PI;D+=Ae;const Er=J+P*Math.cos(ve),xe=te+P*Math.sin(ve),Pt=J+P*Math.cos(Je),Zt=te+P*Math.sin(Je),ne=Ae>.5?1:0,G=`M ${J} ${te} L ${Er} ${xe} A ${P} ${P} 0 ${ne} 1 ${Pt} ${Zt} Z`,Q=["#4DA3FF","#BCD200","#FF5E5E","#9B59B6","#2ECC71"];return{path:G,color:Q[Ie%Q.length],label:`${ce.origem} ${ce.pct}%`}});return l.jsxs("div",{className:"pie-wrap",children:[l.jsx("svg",{width:"140",height:"140",className:"pie-chart",children:me.map((ce,Ie)=>l.jsx("path",{d:ce.path,fill:ce.color},Ie))}),l.jsx("div",{className:"pie-legend",children:me.map((ce,Ie)=>l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot",style:{background:ce.color}}),ce.label]},Ie))})]})})(),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:er.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.origem}),l.jsx("td",{children:E.porPeca})]},E.origem))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Concludas"})]})}),l.jsx("tbody",{children:ke.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.origem}),l.jsx("td",{children:E.q})]},E.origem))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Produtividade por Hora (Avanado)"}),l.jsx("div",{className:"chips",children:l.jsxs("span",{className:"chip",children:["Tempo mdio real/pea: ",lt,"h"]})}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"heatmap",children:[l.jsx("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:Array.from({length:11},(E,D)=>D+8).map(E=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(E).padStart(2,"0"),"h"]},E))}),l.jsx("div",{className:"heat-row",children:Array.from({length:11},(E,D)=>D+8).map(E=>{const D=Ve[E]||0,P=D===0?"#222":D<2?"#00C58E33":"#00C58E";return l.jsx("div",{className:"heat-cell",style:{background:P},title:`${String(E).padStart(2,"0")}h: ${D}`},E)})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Velocidade mdia (h)"})]})}),l.jsx("tbody",{children:yr.map((E,D)=>l.jsxs("tr",{children:[l.jsx("td",{children:D+1}),l.jsx("td",{children:E.designer}),l.jsx("td",{children:E.horas})]},E.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qualidade (menos retrabalho)"})]})}),l.jsx("tbody",{children:Kr.map((E,D)=>l.jsxs("tr",{children:[l.jsx("td",{children:D+1}),l.jsx("td",{children:E.designer}),l.jsx("td",{children:E.porPeca})]},E.designer))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Campanhas"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mais demandada: ",((jt=_r[0])==null?void 0:jt.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Maior retrabalho: ",((Un=Be[0])==null?void 0:Un.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Melhor SLA: ",((tr=wr.sort((E,D)=>D.sla-E.sla)[0])==null?void 0:tr.campanha)||""]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Campanha"}),l.jsx("th",{children:"Produo (concludas)"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"Retrabalho/pea"})]})}),l.jsx("tbody",{children:Array.from(new Set(e.map(E=>E.campanha).filter(Boolean))).map(E=>{var te,me;const D=T.filter(ce=>ce.campanha===E).length,P=((te=wr.find(ce=>ce.campanha===E))==null?void 0:te.sla)||0,J=((me=Be.find(ce=>ce.campanha===E))==null?void 0:me.porPeca)||0;return l.jsxs("tr",{children:[l.jsx("td",{children:E}),l.jsx("td",{children:D}),l.jsxs("td",{style:{color:P>=90?"#BCD200":P>=70?"#FFE55C":"#FF5E5E"},children:[P,"%"]}),l.jsx("td",{children:J})]},E)})})]})]})]})]})}$0(document.getElementById("root")).render(l.jsx(QT.StrictMode,{children:l.jsx(JR,{})}));
