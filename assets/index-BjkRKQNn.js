(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function VE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kv={exports:{}},nu={},Gv={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ga=Symbol.for("react.element"),FE=Symbol.for("react.portal"),UE=Symbol.for("react.fragment"),zE=Symbol.for("react.strict_mode"),BE=Symbol.for("react.profiler"),$E=Symbol.for("react.provider"),qE=Symbol.for("react.context"),HE=Symbol.for("react.forward_ref"),WE=Symbol.for("react.suspense"),KE=Symbol.for("react.memo"),GE=Symbol.for("react.lazy"),fm=Symbol.iterator;function QE(t){return t===null||typeof t!="object"?null:(t=fm&&t[fm]||t["@@iterator"],typeof t=="function"?t:null)}var Qv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yv=Object.assign,Xv={};function wo(t,e,n){this.props=t,this.context=e,this.refs=Xv,this.updater=n||Qv}wo.prototype.isReactComponent={};wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jv(){}Jv.prototype=wo.prototype;function Qh(t,e,n){this.props=t,this.context=e,this.refs=Xv,this.updater=n||Qv}var Yh=Qh.prototype=new Jv;Yh.constructor=Qh;Yv(Yh,wo.prototype);Yh.isPureReactComponent=!0;var pm=Array.isArray,Zv=Object.prototype.hasOwnProperty,Xh={current:null},ey={key:!0,ref:!0,__self:!0,__source:!0};function ty(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Zv.call(e,r)&&!ey.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Ga,type:t,key:i,ref:o,props:s,_owner:Xh.current}}function YE(t,e){return{$$typeof:Ga,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ga}function XE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var mm=/\/+/g;function Gu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XE(""+t.key):e.toString(36)}function Ql(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ga:case FE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Gu(o,0):r,pm(s)?(n="",t!=null&&(n=t.replace(mm,"$&/")+"/"),Ql(s,e,n,"",function(h){return h})):s!=null&&(Jh(s)&&(s=YE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(mm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",pm(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Gu(i,c);o+=Ql(i,e,n,u,s)}else if(u=QE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Gu(i,c++),o+=Ql(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cl(t,e,n){if(t==null)return t;var r=[],s=0;return Ql(t,r,"","",function(i){return e.call(n,i,s++)}),r}function JE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bn={current:null},Yl={transition:null},ZE={ReactCurrentDispatcher:bn,ReactCurrentBatchConfig:Yl,ReactCurrentOwner:Xh};function ny(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:Cl,forEach:function(t,e,n){Cl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cl(t,function(){e++}),e},toArray:function(t){return Cl(t,function(e){return e})||[]},only:function(t){if(!Jh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qe.Component=wo;Qe.Fragment=UE;Qe.Profiler=BE;Qe.PureComponent=Qh;Qe.StrictMode=zE;Qe.Suspense=WE;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZE;Qe.act=ny;Qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Yv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Zv.call(e,u)&&!ey.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:Ga,type:t.type,key:s,ref:i,props:r,_owner:o}};Qe.createContext=function(t){return t={$$typeof:qE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$E,_context:t},t.Consumer=t};Qe.createElement=ty;Qe.createFactory=function(t){var e=ty.bind(null,t);return e.type=t,e};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(t){return{$$typeof:HE,render:t}};Qe.isValidElement=Jh;Qe.lazy=function(t){return{$$typeof:GE,_payload:{_status:-1,_result:t},_init:JE}};Qe.memo=function(t,e){return{$$typeof:KE,type:t,compare:e===void 0?null:e}};Qe.startTransition=function(t){var e=Yl.transition;Yl.transition={};try{t()}finally{Yl.transition=e}};Qe.unstable_act=ny;Qe.useCallback=function(t,e){return bn.current.useCallback(t,e)};Qe.useContext=function(t){return bn.current.useContext(t)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(t){return bn.current.useDeferredValue(t)};Qe.useEffect=function(t,e){return bn.current.useEffect(t,e)};Qe.useId=function(){return bn.current.useId()};Qe.useImperativeHandle=function(t,e,n){return bn.current.useImperativeHandle(t,e,n)};Qe.useInsertionEffect=function(t,e){return bn.current.useInsertionEffect(t,e)};Qe.useLayoutEffect=function(t,e){return bn.current.useLayoutEffect(t,e)};Qe.useMemo=function(t,e){return bn.current.useMemo(t,e)};Qe.useReducer=function(t,e,n){return bn.current.useReducer(t,e,n)};Qe.useRef=function(t){return bn.current.useRef(t)};Qe.useState=function(t){return bn.current.useState(t)};Qe.useSyncExternalStore=function(t,e,n){return bn.current.useSyncExternalStore(t,e,n)};Qe.useTransition=function(){return bn.current.useTransition()};Qe.version="18.3.1";Gv.exports=Qe;var Q=Gv.exports;const Zs=VE(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS=Q,tS=Symbol.for("react.element"),nS=Symbol.for("react.fragment"),rS=Object.prototype.hasOwnProperty,sS=eS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iS={key:!0,ref:!0,__self:!0,__source:!0};function ry(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rS.call(e,r)&&!iS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:tS,type:t,key:i,ref:o,props:s,_owner:sS.current}}nu.Fragment=nS;nu.jsx=ry;nu.jsxs=ry;Kv.exports=nu;var l=Kv.exports,sy={exports:{}},Xn={},iy={exports:{}},oy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,ee){var ie=L.length;L.push(ee);e:for(;0<ie;){var ve=ie-1>>>1,Se=L[ve];if(0<s(Se,ee))L[ve]=ee,L[ie]=Se,ie=ve;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var ee=L[0],ie=L.pop();if(ie!==ee){L[0]=ie;e:for(var ve=0,Se=L.length,Re=Se>>>1;ve<Re;){var yt=2*(ve+1)-1,nt=L[yt],ct=yt+1,te=L[ct];if(0>s(nt,ie))ct<Se&&0>s(te,nt)?(L[ve]=te,L[ct]=ie,ve=ct):(L[ve]=nt,L[yt]=ie,ve=yt);else if(ct<Se&&0>s(te,ie))L[ve]=te,L[ct]=ie,ve=ct;else break e}}return ee}function s(L,ee){var ie=L.sortIndex-ee.sortIndex;return ie!==0?ie:L.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],p=1,g=null,_=3,R=!1,b=!1,N=!1,F=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(L){for(var ee=n(h);ee!==null;){if(ee.callback===null)r(h);else if(ee.startTime<=L)r(h),ee.sortIndex=ee.expirationTime,e(u,ee);else break;ee=n(h)}}function O(L){if(N=!1,A(L),!b)if(n(u)!==null)b=!0,vt(B);else{var ee=n(h);ee!==null&&Ct(O,ee.startTime-L)}}function B(L,ee){b=!1,N&&(N=!1,k(y),y=-1),R=!0;var ie=_;try{for(A(ee),g=n(u);g!==null&&(!(g.expirationTime>ee)||L&&!P());){var ve=g.callback;if(typeof ve=="function"){g.callback=null,_=g.priorityLevel;var Se=ve(g.expirationTime<=ee);ee=t.unstable_now(),typeof Se=="function"?g.callback=Se:g===n(u)&&r(u),A(ee)}else r(u);g=n(u)}if(g!==null)var Re=!0;else{var yt=n(h);yt!==null&&Ct(O,yt.startTime-ee),Re=!1}return Re}finally{g=null,_=ie,R=!1}}var J=!1,v=null,y=-1,T=5,S=-1;function P(){return!(t.unstable_now()-S<T)}function D(){if(v!==null){var L=t.unstable_now();S=L;var ee=!0;try{ee=v(!0,L)}finally{ee?C():(J=!1,v=null)}}else J=!1}var C;if(typeof w=="function")C=function(){w(D)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Ye=qe.port2;qe.port1.onmessage=D,C=function(){Ye.postMessage(null)}}else C=function(){F(D,0)};function vt(L){v=L,J||(J=!0,C())}function Ct(L,ee){y=F(function(){L(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){b||R||(b=!0,vt(B))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(L){switch(_){case 1:case 2:case 3:var ee=3;break;default:ee=_}var ie=_;_=ee;try{return L()}finally{_=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,ee){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ie=_;_=L;try{return ee()}finally{_=ie}},t.unstable_scheduleCallback=function(L,ee,ie){var ve=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ve+ie:ve):ie=ve,L){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ie+Se,L={id:p++,callback:ee,priorityLevel:L,startTime:ie,expirationTime:Se,sortIndex:-1},ie>ve?(L.sortIndex=ie,e(h,L),n(u)===null&&L===n(h)&&(N?(k(y),y=-1):N=!0,Ct(O,ie-ve))):(L.sortIndex=Se,e(u,L),b||R||(b=!0,vt(B))),L},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(L){var ee=_;return function(){var ie=_;_=ee;try{return L.apply(this,arguments)}finally{_=ie}}}})(oy);iy.exports=oy;var oS=iy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS=Q,Yn=oS;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ay=new Set,ya={};function pi(t,e){ro(t,e),ro(t+"Capture",e)}function ro(t,e){for(ya[t]=e,t=0;t<e.length;t++)ay.add(e[t])}var Wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rd=Object.prototype.hasOwnProperty,lS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gm={},vm={};function cS(t){return Rd.call(vm,t)?!0:Rd.call(gm,t)?!1:lS.test(t)?vm[t]=!0:(gm[t]=!0,!1)}function uS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dS(t,e,n,r){if(e===null||typeof e>"u"||uS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fn[t]=new Mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fn[e]=new Mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fn[t]=new Mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fn[t]=new Mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fn[t]=new Mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fn[t]=new Mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fn[t]=new Mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fn[t]=new Mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fn[t]=new Mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zh=/[\-:]([a-z])/g;function ef(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zh,ef);fn[e]=new Mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zh,ef);fn[e]=new Mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zh,ef);fn[e]=new Mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fn[t]=new Mn(t,1,!1,t.toLowerCase(),null,!1,!1)});fn.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fn[t]=new Mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function tf(t,e,n,r){var s=fn.hasOwnProperty(e)?fn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dS(e,n,s,r)&&(n=null),r||s===null?cS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ts=aS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xl=Symbol.for("react.element"),ji=Symbol.for("react.portal"),Di=Symbol.for("react.fragment"),nf=Symbol.for("react.strict_mode"),jd=Symbol.for("react.profiler"),ly=Symbol.for("react.provider"),cy=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),Dd=Symbol.for("react.suspense"),bd=Symbol.for("react.suspense_list"),sf=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),uy=Symbol.for("react.offscreen"),ym=Symbol.iterator;function Vo(t){return t===null||typeof t!="object"?null:(t=ym&&t[ym]||t["@@iterator"],typeof t=="function"?t:null)}var Mt=Object.assign,Qu;function Ko(t){if(Qu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qu=e&&e[1]||""}return`
`+Qu+t}var Yu=!1;function Xu(t,e){if(!t||Yu)return"";Yu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Yu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ko(t):""}function hS(t){switch(t.tag){case 5:return Ko(t.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 2:case 15:return t=Xu(t.type,!1),t;case 11:return t=Xu(t.type.render,!1),t;case 1:return t=Xu(t.type,!0),t;default:return""}}function Md(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Di:return"Fragment";case ji:return"Portal";case jd:return"Profiler";case nf:return"StrictMode";case Dd:return"Suspense";case bd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cy:return(t.displayName||"Context")+".Consumer";case ly:return(t._context.displayName||"Context")+".Provider";case rf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sf:return e=t.displayName||null,e!==null?e:Md(t.type)||"Memo";case cs:e=t._payload,t=t._init;try{return Md(t(e))}catch{}}return null}function fS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Md(e);case 8:return e===nf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pS(t){var e=dy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Al(t){t._valueTracker||(t._valueTracker=pS(t))}function hy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Od(t,e){var n=e.checked;return Mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _m(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fy(t,e){e=e.checked,e!=null&&tf(t,"checked",e,!1)}function Ld(t,e){fy(t,e);var n=Rs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vd(t,e.type,Rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vd(t,e,n){(e!=="number"||gc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Go=Array.isArray;function Hi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Em(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(Go(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rs(n)}}function py(t,e){var n=Rs(e.value),r=Rs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function my(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ud(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?my(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kl,gy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _a(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mS=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(t){mS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ra[e]=ra[t]})});function vy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ra.hasOwnProperty(t)&&ra[t]?(""+e).trim():e+"px"}function yy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var gS=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zd(t,e){if(e){if(gS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function Bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $d=null;function of(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qd=null,Wi=null,Ki=null;function Tm(t){if(t=Xa(t)){if(typeof qd!="function")throw Error(le(280));var e=t.stateNode;e&&(e=au(e),qd(t.stateNode,t.type,e))}}function _y(t){Wi?Ki?Ki.push(t):Ki=[t]:Wi=t}function wy(){if(Wi){var t=Wi,e=Ki;if(Ki=Wi=null,Tm(t),e)for(t=0;t<e.length;t++)Tm(e[t])}}function Ey(t,e){return t(e)}function Sy(){}var Ju=!1;function Ty(t,e,n){if(Ju)return t(e,n);Ju=!0;try{return Ey(t,e,n)}finally{Ju=!1,(Wi!==null||Ki!==null)&&(Sy(),wy())}}function wa(t,e){var n=t.stateNode;if(n===null)return null;var r=au(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var Hd=!1;if(Wr)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){Hd=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{Hd=!1}function vS(t,e,n,r,s,i,o,c,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var sa=!1,vc=null,yc=!1,Wd=null,yS={onError:function(t){sa=!0,vc=t}};function _S(t,e,n,r,s,i,o,c,u){sa=!1,vc=null,vS.apply(yS,arguments)}function wS(t,e,n,r,s,i,o,c,u){if(_S.apply(this,arguments),sa){if(sa){var h=vc;sa=!1,vc=null}else throw Error(le(198));yc||(yc=!0,Wd=h)}}function mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Iy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Im(t){if(mi(t)!==t)throw Error(le(188))}function ES(t){var e=t.alternate;if(!e){if(e=mi(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Im(s),t;if(i===r)return Im(s),e;i=i.sibling}throw Error(le(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function Cy(t){return t=ES(t),t!==null?xy(t):null}function xy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xy(t);if(e!==null)return e;t=t.sibling}return null}var Ay=Yn.unstable_scheduleCallback,Cm=Yn.unstable_cancelCallback,SS=Yn.unstable_shouldYield,TS=Yn.unstable_requestPaint,zt=Yn.unstable_now,IS=Yn.unstable_getCurrentPriorityLevel,af=Yn.unstable_ImmediatePriority,ky=Yn.unstable_UserBlockingPriority,_c=Yn.unstable_NormalPriority,CS=Yn.unstable_LowPriority,Ny=Yn.unstable_IdlePriority,ru=null,Ir=null;function xS(t){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(ru,t,void 0,(t.current.flags&128)===128)}catch{}}var mr=Math.clz32?Math.clz32:NS,AS=Math.log,kS=Math.LN2;function NS(t){return t>>>=0,t===0?32:31-(AS(t)/kS|0)|0}var Nl=64,Pl=4194304;function Qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Qo(c):(i&=o,i!==0&&(r=Qo(i)))}else o=n&~s,o!==0?r=Qo(o):i!==0&&(r=Qo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mr(e),s=1<<n,r|=t[n],e&=~s;return r}function PS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-mr(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=PS(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Kd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Py(){var t=Nl;return Nl<<=1,!(Nl&4194240)&&(Nl=64),t}function Zu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mr(e),t[e]=n}function jS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-mr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var mt=0;function Ry(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jy,cf,Dy,by,My,Gd=!1,Rl=[],ws=null,Es=null,Ss=null,Ea=new Map,Sa=new Map,ds=[],DS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xm(t,e){switch(t){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":Ea.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sa.delete(e.pointerId)}}function Uo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Xa(e),e!==null&&cf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function bS(t,e,n,r,s){switch(e){case"focusin":return ws=Uo(ws,t,e,n,r,s),!0;case"dragenter":return Es=Uo(Es,t,e,n,r,s),!0;case"mouseover":return Ss=Uo(Ss,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ea.set(i,Uo(Ea.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Sa.set(i,Uo(Sa.get(i)||null,t,e,n,r,s)),!0}return!1}function Oy(t){var e=Qs(t.target);if(e!==null){var n=mi(e);if(n!==null){if(e=n.tag,e===13){if(e=Iy(n),e!==null){t.blockedOn=e,My(t.priority,function(){Dy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$d=r,n.target.dispatchEvent(r),$d=null}else return e=Xa(n),e!==null&&cf(e),t.blockedOn=n,!1;e.shift()}return!0}function Am(t,e,n){Xl(t)&&n.delete(e)}function MS(){Gd=!1,ws!==null&&Xl(ws)&&(ws=null),Es!==null&&Xl(Es)&&(Es=null),Ss!==null&&Xl(Ss)&&(Ss=null),Ea.forEach(Am),Sa.forEach(Am)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,Gd||(Gd=!0,Yn.unstable_scheduleCallback(Yn.unstable_NormalPriority,MS)))}function Ta(t){function e(s){return zo(s,t)}if(0<Rl.length){zo(Rl[0],t);for(var n=1;n<Rl.length;n++){var r=Rl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ws!==null&&zo(ws,t),Es!==null&&zo(Es,t),Ss!==null&&zo(Ss,t),Ea.forEach(e),Sa.forEach(e),n=0;n<ds.length;n++)r=ds[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ds.length&&(n=ds[0],n.blockedOn===null);)Oy(n),n.blockedOn===null&&ds.shift()}var Gi=ts.ReactCurrentBatchConfig,Ec=!0;function OS(t,e,n,r){var s=mt,i=Gi.transition;Gi.transition=null;try{mt=1,uf(t,e,n,r)}finally{mt=s,Gi.transition=i}}function LS(t,e,n,r){var s=mt,i=Gi.transition;Gi.transition=null;try{mt=4,uf(t,e,n,r)}finally{mt=s,Gi.transition=i}}function uf(t,e,n,r){if(Ec){var s=Qd(t,e,n,r);if(s===null)cd(t,e,r,Sc,n),xm(t,r);else if(bS(s,t,e,n,r))r.stopPropagation();else if(xm(t,r),e&4&&-1<DS.indexOf(t)){for(;s!==null;){var i=Xa(s);if(i!==null&&jy(i),i=Qd(t,e,n,r),i===null&&cd(t,e,r,Sc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else cd(t,e,r,null,n)}}var Sc=null;function Qd(t,e,n,r){if(Sc=null,t=of(r),t=Qs(t),t!==null)if(e=mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Iy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sc=t,null}function Ly(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IS()){case af:return 1;case ky:return 4;case _c:case CS:return 16;case Ny:return 536870912;default:return 16}default:return 16}}var vs=null,df=null,Jl=null;function Vy(){if(Jl)return Jl;var t,e=df,n=e.length,r,s="value"in vs?vs.value:vs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Jl=s.slice(t,1<r?1-r:void 0)}function Zl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jl(){return!0}function km(){return!1}function Jn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jl:km,this.isPropagationStopped=km,this}return Mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),e}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=Jn(Eo),Ya=Mt({},Eo,{view:0,detail:0}),VS=Jn(Ya),ed,td,Bo,su=Mt({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ff,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bo&&(Bo&&t.type==="mousemove"?(ed=t.screenX-Bo.screenX,td=t.screenY-Bo.screenY):td=ed=0,Bo=t),ed)},movementY:function(t){return"movementY"in t?t.movementY:td}}),Nm=Jn(su),FS=Mt({},su,{dataTransfer:0}),US=Jn(FS),zS=Mt({},Ya,{relatedTarget:0}),nd=Jn(zS),BS=Mt({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),$S=Jn(BS),qS=Mt({},Eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HS=Jn(qS),WS=Mt({},Eo,{data:0}),Pm=Jn(WS),KS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QS[t])?!!e[t]:!1}function ff(){return YS}var XS=Mt({},Ya,{key:function(t){if(t.key){var e=KS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ff,charCode:function(t){return t.type==="keypress"?Zl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JS=Jn(XS),ZS=Mt({},su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rm=Jn(ZS),eT=Mt({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ff}),tT=Jn(eT),nT=Mt({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),rT=Jn(nT),sT=Mt({},su,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iT=Jn(sT),oT=[9,13,27,32],pf=Wr&&"CompositionEvent"in window,ia=null;Wr&&"documentMode"in document&&(ia=document.documentMode);var aT=Wr&&"TextEvent"in window&&!ia,Fy=Wr&&(!pf||ia&&8<ia&&11>=ia),jm=" ",Dm=!1;function Uy(t,e){switch(t){case"keyup":return oT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bi=!1;function lT(t,e){switch(t){case"compositionend":return zy(e);case"keypress":return e.which!==32?null:(Dm=!0,jm);case"textInput":return t=e.data,t===jm&&Dm?null:t;default:return null}}function cT(t,e){if(bi)return t==="compositionend"||!pf&&Uy(t,e)?(t=Vy(),Jl=df=vs=null,bi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fy&&e.locale!=="ko"?null:e.data;default:return null}}var uT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uT[t.type]:e==="textarea"}function By(t,e,n,r){_y(r),e=Tc(e,"onChange"),0<e.length&&(n=new hf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oa=null,Ia=null;function dT(t){Zy(t,0)}function iu(t){var e=Li(t);if(hy(e))return t}function hT(t,e){if(t==="change")return e}var $y=!1;if(Wr){var rd;if(Wr){var sd="oninput"in document;if(!sd){var Mm=document.createElement("div");Mm.setAttribute("oninput","return;"),sd=typeof Mm.oninput=="function"}rd=sd}else rd=!1;$y=rd&&(!document.documentMode||9<document.documentMode)}function Om(){oa&&(oa.detachEvent("onpropertychange",qy),Ia=oa=null)}function qy(t){if(t.propertyName==="value"&&iu(Ia)){var e=[];By(e,Ia,t,of(t)),Ty(dT,e)}}function fT(t,e,n){t==="focusin"?(Om(),oa=e,Ia=n,oa.attachEvent("onpropertychange",qy)):t==="focusout"&&Om()}function pT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(Ia)}function mT(t,e){if(t==="click")return iu(e)}function gT(t,e){if(t==="input"||t==="change")return iu(e)}function vT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vr=typeof Object.is=="function"?Object.is:vT;function Ca(t,e){if(vr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rd.call(e,s)||!vr(t[s],e[s]))return!1}return!0}function Lm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vm(t,e){var n=Lm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lm(n)}}function Hy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wy(){for(var t=window,e=gc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gc(t.document)}return e}function mf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yT(t){var e=Wy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hy(n.ownerDocument.documentElement,n)){if(r!==null&&mf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Vm(n,i);var o=Vm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _T=Wr&&"documentMode"in document&&11>=document.documentMode,Mi=null,Yd=null,aa=null,Xd=!1;function Fm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xd||Mi==null||Mi!==gc(r)||(r=Mi,"selectionStart"in r&&mf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),aa&&Ca(aa,r)||(aa=r,r=Tc(Yd,"onSelect"),0<r.length&&(e=new hf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mi)))}function Dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oi={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},id={},Ky={};Wr&&(Ky=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function ou(t){if(id[t])return id[t];if(!Oi[t])return t;var e=Oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ky)return id[t]=e[n];return t}var Gy=ou("animationend"),Qy=ou("animationiteration"),Yy=ou("animationstart"),Xy=ou("transitionend"),Jy=new Map,Um="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ls(t,e){Jy.set(t,e),pi(e,[t])}for(var od=0;od<Um.length;od++){var ad=Um[od],wT=ad.toLowerCase(),ET=ad[0].toUpperCase()+ad.slice(1);Ls(wT,"on"+ET)}Ls(Gy,"onAnimationEnd");Ls(Qy,"onAnimationIteration");Ls(Yy,"onAnimationStart");Ls("dblclick","onDoubleClick");Ls("focusin","onFocus");Ls("focusout","onBlur");Ls(Xy,"onTransitionEnd");ro("onMouseEnter",["mouseout","mouseover"]);ro("onMouseLeave",["mouseout","mouseover"]);ro("onPointerEnter",["pointerout","pointerover"]);ro("onPointerLeave",["pointerout","pointerover"]);pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ST=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function zm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wS(r,e,void 0,t),t.currentTarget=null}function Zy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;zm(s,c,h),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,h=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;zm(s,c,h),i=u}}}if(yc)throw t=Wd,yc=!1,Wd=null,t}function At(t,e){var n=e[nh];n===void 0&&(n=e[nh]=new Set);var r=t+"__bubble";n.has(r)||(e_(e,t,2,!1),n.add(r))}function ld(t,e,n){var r=0;e&&(r|=4),e_(n,t,r,e)}var bl="_reactListening"+Math.random().toString(36).slice(2);function xa(t){if(!t[bl]){t[bl]=!0,ay.forEach(function(n){n!=="selectionchange"&&(ST.has(n)||ld(n,!1,t),ld(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bl]||(e[bl]=!0,ld("selectionchange",!1,e))}}function e_(t,e,n,r){switch(Ly(e)){case 1:var s=OS;break;case 4:s=LS;break;default:s=uf}n=s.bind(null,e,n,t),s=void 0,!Hd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function cd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Qs(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Ty(function(){var h=i,p=of(n),g=[];e:{var _=Jy.get(t);if(_!==void 0){var R=hf,b=t;switch(t){case"keypress":if(Zl(n)===0)break e;case"keydown":case"keyup":R=JS;break;case"focusin":b="focus",R=nd;break;case"focusout":b="blur",R=nd;break;case"beforeblur":case"afterblur":R=nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=US;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=tT;break;case Gy:case Qy:case Yy:R=$S;break;case Xy:R=rT;break;case"scroll":R=VS;break;case"wheel":R=iT;break;case"copy":case"cut":case"paste":R=HS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Rm}var N=(e&4)!==0,F=!N&&t==="scroll",k=N?_!==null?_+"Capture":null:_;N=[];for(var w=h,A;w!==null;){A=w;var O=A.stateNode;if(A.tag===5&&O!==null&&(A=O,k!==null&&(O=wa(w,k),O!=null&&N.push(Aa(w,O,A)))),F)break;w=w.return}0<N.length&&(_=new R(_,b,null,n,p),g.push({event:_,listeners:N}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",_&&n!==$d&&(b=n.relatedTarget||n.fromElement)&&(Qs(b)||b[Kr]))break e;if((R||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,R?(b=n.relatedTarget||n.toElement,R=h,b=b?Qs(b):null,b!==null&&(F=mi(b),b!==F||b.tag!==5&&b.tag!==6)&&(b=null)):(R=null,b=h),R!==b)){if(N=Nm,O="onMouseLeave",k="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=Rm,O="onPointerLeave",k="onPointerEnter",w="pointer"),F=R==null?_:Li(R),A=b==null?_:Li(b),_=new N(O,w+"leave",R,n,p),_.target=F,_.relatedTarget=A,O=null,Qs(p)===h&&(N=new N(k,w+"enter",b,n,p),N.target=A,N.relatedTarget=F,O=N),F=O,R&&b)t:{for(N=R,k=b,w=0,A=N;A;A=xi(A))w++;for(A=0,O=k;O;O=xi(O))A++;for(;0<w-A;)N=xi(N),w--;for(;0<A-w;)k=xi(k),A--;for(;w--;){if(N===k||k!==null&&N===k.alternate)break t;N=xi(N),k=xi(k)}N=null}else N=null;R!==null&&Bm(g,_,R,N,!1),b!==null&&F!==null&&Bm(g,F,b,N,!0)}}e:{if(_=h?Li(h):window,R=_.nodeName&&_.nodeName.toLowerCase(),R==="select"||R==="input"&&_.type==="file")var B=hT;else if(bm(_))if($y)B=gT;else{B=pT;var J=fT}else(R=_.nodeName)&&R.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(B=mT);if(B&&(B=B(t,h))){By(g,B,n,p);break e}J&&J(t,_,h),t==="focusout"&&(J=_._wrapperState)&&J.controlled&&_.type==="number"&&Vd(_,"number",_.value)}switch(J=h?Li(h):window,t){case"focusin":(bm(J)||J.contentEditable==="true")&&(Mi=J,Yd=h,aa=null);break;case"focusout":aa=Yd=Mi=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,Fm(g,n,p);break;case"selectionchange":if(_T)break;case"keydown":case"keyup":Fm(g,n,p)}var v;if(pf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else bi?Uy(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Fy&&n.locale!=="ko"&&(bi||y!=="onCompositionStart"?y==="onCompositionEnd"&&bi&&(v=Vy()):(vs=p,df="value"in vs?vs.value:vs.textContent,bi=!0)),J=Tc(h,y),0<J.length&&(y=new Pm(y,t,null,n,p),g.push({event:y,listeners:J}),v?y.data=v:(v=zy(n),v!==null&&(y.data=v)))),(v=aT?lT(t,n):cT(t,n))&&(h=Tc(h,"onBeforeInput"),0<h.length&&(p=new Pm("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:h}),p.data=v))}Zy(g,e)})}function Aa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=wa(t,n),i!=null&&r.unshift(Aa(t,i,s)),i=wa(t,e),i!=null&&r.push(Aa(t,i,s))),t=t.return}return r}function xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,s?(u=wa(n,i),u!=null&&o.unshift(Aa(n,u,c))):s||(u=wa(n,i),u!=null&&o.push(Aa(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var TT=/\r\n?/g,IT=/\u0000|\uFFFD/g;function $m(t){return(typeof t=="string"?t:""+t).replace(TT,`
`).replace(IT,"")}function Ml(t,e,n){if(e=$m(e),$m(t)!==e&&n)throw Error(le(425))}function Ic(){}var Jd=null,Zd=null;function eh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var th=typeof setTimeout=="function"?setTimeout:void 0,CT=typeof clearTimeout=="function"?clearTimeout:void 0,qm=typeof Promise=="function"?Promise:void 0,xT=typeof queueMicrotask=="function"?queueMicrotask:typeof qm<"u"?function(t){return qm.resolve(null).then(t).catch(AT)}:th;function AT(t){setTimeout(function(){throw t})}function ud(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ta(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ta(e)}function Ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Hm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var So=Math.random().toString(36).slice(2),Sr="__reactFiber$"+So,ka="__reactProps$"+So,Kr="__reactContainer$"+So,nh="__reactEvents$"+So,kT="__reactListeners$"+So,NT="__reactHandles$"+So;function Qs(t){var e=t[Sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kr]||n[Sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Hm(t);t!==null;){if(n=t[Sr])return n;t=Hm(t)}return e}t=n,n=t.parentNode}return null}function Xa(t){return t=t[Sr]||t[Kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Li(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function au(t){return t[ka]||null}var rh=[],Vi=-1;function Vs(t){return{current:t}}function Nt(t){0>Vi||(t.current=rh[Vi],rh[Vi]=null,Vi--)}function It(t,e){Vi++,rh[Vi]=t.current,t.current=e}var js={},Cn=Vs(js),zn=Vs(!1),ri=js;function so(t,e){var n=t.type.contextTypes;if(!n)return js;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Bn(t){return t=t.childContextTypes,t!=null}function Cc(){Nt(zn),Nt(Cn)}function Wm(t,e,n){if(Cn.current!==js)throw Error(le(168));It(Cn,e),It(zn,n)}function t_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(le(108,fS(t)||"Unknown",s));return Mt({},n,r)}function xc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||js,ri=Cn.current,It(Cn,t),It(zn,zn.current),!0}function Km(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=t_(t,e,ri),r.__reactInternalMemoizedMergedChildContext=t,Nt(zn),Nt(Cn),It(Cn,t)):Nt(zn),It(zn,n)}var Or=null,lu=!1,dd=!1;function n_(t){Or===null?Or=[t]:Or.push(t)}function PT(t){lu=!0,n_(t)}function Fs(){if(!dd&&Or!==null){dd=!0;var t=0,e=mt;try{var n=Or;for(mt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Or=null,lu=!1}catch(s){throw Or!==null&&(Or=Or.slice(t+1)),Ay(af,Fs),s}finally{mt=e,dd=!1}}return null}var Fi=[],Ui=0,Ac=null,kc=0,er=[],tr=0,si=null,Vr=1,Fr="";function Hs(t,e){Fi[Ui++]=kc,Fi[Ui++]=Ac,Ac=t,kc=e}function r_(t,e,n){er[tr++]=Vr,er[tr++]=Fr,er[tr++]=si,si=t;var r=Vr;t=Fr;var s=32-mr(r)-1;r&=~(1<<s),n+=1;var i=32-mr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Vr=1<<32-mr(e)+s|n<<s|r,Fr=i+t}else Vr=1<<i|n<<s|r,Fr=t}function gf(t){t.return!==null&&(Hs(t,1),r_(t,1,0))}function vf(t){for(;t===Ac;)Ac=Fi[--Ui],Fi[Ui]=null,kc=Fi[--Ui],Fi[Ui]=null;for(;t===si;)si=er[--tr],er[tr]=null,Fr=er[--tr],er[tr]=null,Vr=er[--tr],er[tr]=null}var Gn=null,Wn=null,Rt=!1,fr=null;function s_(t,e){var n=rr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Gm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gn=t,Wn=Ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gn=t,Wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=si!==null?{id:Vr,overflow:Fr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gn=t,Wn=null,!0):!1;default:return!1}}function sh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ih(t){if(Rt){var e=Wn;if(e){var n=e;if(!Gm(t,e)){if(sh(t))throw Error(le(418));e=Ts(n.nextSibling);var r=Gn;e&&Gm(t,e)?s_(r,n):(t.flags=t.flags&-4097|2,Rt=!1,Gn=t)}}else{if(sh(t))throw Error(le(418));t.flags=t.flags&-4097|2,Rt=!1,Gn=t}}}function Qm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gn=t}function Ol(t){if(t!==Gn)return!1;if(!Rt)return Qm(t),Rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eh(t.type,t.memoizedProps)),e&&(e=Wn)){if(sh(t))throw i_(),Error(le(418));for(;e;)s_(t,e),e=Ts(e.nextSibling)}if(Qm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wn=Ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wn=null}}else Wn=Gn?Ts(t.stateNode.nextSibling):null;return!0}function i_(){for(var t=Wn;t;)t=Ts(t.nextSibling)}function io(){Wn=Gn=null,Rt=!1}function yf(t){fr===null?fr=[t]:fr.push(t)}var RT=ts.ReactCurrentBatchConfig;function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function Ll(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ym(t){var e=t._init;return e(t._payload)}function o_(t){function e(k,w){if(t){var A=k.deletions;A===null?(k.deletions=[w],k.flags|=16):A.push(w)}}function n(k,w){if(!t)return null;for(;w!==null;)e(k,w),w=w.sibling;return null}function r(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function s(k,w){return k=As(k,w),k.index=0,k.sibling=null,k}function i(k,w,A){return k.index=A,t?(A=k.alternate,A!==null?(A=A.index,A<w?(k.flags|=2,w):A):(k.flags|=2,w)):(k.flags|=1048576,w)}function o(k){return t&&k.alternate===null&&(k.flags|=2),k}function c(k,w,A,O){return w===null||w.tag!==6?(w=yd(A,k.mode,O),w.return=k,w):(w=s(w,A),w.return=k,w)}function u(k,w,A,O){var B=A.type;return B===Di?p(k,w,A.props.children,O,A.key):w!==null&&(w.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===cs&&Ym(B)===w.type)?(O=s(w,A.props),O.ref=$o(k,w,A),O.return=k,O):(O=oc(A.type,A.key,A.props,null,k.mode,O),O.ref=$o(k,w,A),O.return=k,O)}function h(k,w,A,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=_d(A,k.mode,O),w.return=k,w):(w=s(w,A.children||[]),w.return=k,w)}function p(k,w,A,O,B){return w===null||w.tag!==7?(w=ti(A,k.mode,O,B),w.return=k,w):(w=s(w,A),w.return=k,w)}function g(k,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=yd(""+w,k.mode,A),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xl:return A=oc(w.type,w.key,w.props,null,k.mode,A),A.ref=$o(k,null,w),A.return=k,A;case ji:return w=_d(w,k.mode,A),w.return=k,w;case cs:var O=w._init;return g(k,O(w._payload),A)}if(Go(w)||Vo(w))return w=ti(w,k.mode,A,null),w.return=k,w;Ll(k,w)}return null}function _(k,w,A,O){var B=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return B!==null?null:c(k,w,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case xl:return A.key===B?u(k,w,A,O):null;case ji:return A.key===B?h(k,w,A,O):null;case cs:return B=A._init,_(k,w,B(A._payload),O)}if(Go(A)||Vo(A))return B!==null?null:p(k,w,A,O,null);Ll(k,A)}return null}function R(k,w,A,O,B){if(typeof O=="string"&&O!==""||typeof O=="number")return k=k.get(A)||null,c(w,k,""+O,B);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case xl:return k=k.get(O.key===null?A:O.key)||null,u(w,k,O,B);case ji:return k=k.get(O.key===null?A:O.key)||null,h(w,k,O,B);case cs:var J=O._init;return R(k,w,A,J(O._payload),B)}if(Go(O)||Vo(O))return k=k.get(A)||null,p(w,k,O,B,null);Ll(w,O)}return null}function b(k,w,A,O){for(var B=null,J=null,v=w,y=w=0,T=null;v!==null&&y<A.length;y++){v.index>y?(T=v,v=null):T=v.sibling;var S=_(k,v,A[y],O);if(S===null){v===null&&(v=T);break}t&&v&&S.alternate===null&&e(k,v),w=i(S,w,y),J===null?B=S:J.sibling=S,J=S,v=T}if(y===A.length)return n(k,v),Rt&&Hs(k,y),B;if(v===null){for(;y<A.length;y++)v=g(k,A[y],O),v!==null&&(w=i(v,w,y),J===null?B=v:J.sibling=v,J=v);return Rt&&Hs(k,y),B}for(v=r(k,v);y<A.length;y++)T=R(v,k,y,A[y],O),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?y:T.key),w=i(T,w,y),J===null?B=T:J.sibling=T,J=T);return t&&v.forEach(function(P){return e(k,P)}),Rt&&Hs(k,y),B}function N(k,w,A,O){var B=Vo(A);if(typeof B!="function")throw Error(le(150));if(A=B.call(A),A==null)throw Error(le(151));for(var J=B=null,v=w,y=w=0,T=null,S=A.next();v!==null&&!S.done;y++,S=A.next()){v.index>y?(T=v,v=null):T=v.sibling;var P=_(k,v,S.value,O);if(P===null){v===null&&(v=T);break}t&&v&&P.alternate===null&&e(k,v),w=i(P,w,y),J===null?B=P:J.sibling=P,J=P,v=T}if(S.done)return n(k,v),Rt&&Hs(k,y),B;if(v===null){for(;!S.done;y++,S=A.next())S=g(k,S.value,O),S!==null&&(w=i(S,w,y),J===null?B=S:J.sibling=S,J=S);return Rt&&Hs(k,y),B}for(v=r(k,v);!S.done;y++,S=A.next())S=R(v,k,y,S.value,O),S!==null&&(t&&S.alternate!==null&&v.delete(S.key===null?y:S.key),w=i(S,w,y),J===null?B=S:J.sibling=S,J=S);return t&&v.forEach(function(D){return e(k,D)}),Rt&&Hs(k,y),B}function F(k,w,A,O){if(typeof A=="object"&&A!==null&&A.type===Di&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case xl:e:{for(var B=A.key,J=w;J!==null;){if(J.key===B){if(B=A.type,B===Di){if(J.tag===7){n(k,J.sibling),w=s(J,A.props.children),w.return=k,k=w;break e}}else if(J.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===cs&&Ym(B)===J.type){n(k,J.sibling),w=s(J,A.props),w.ref=$o(k,J,A),w.return=k,k=w;break e}n(k,J);break}else e(k,J);J=J.sibling}A.type===Di?(w=ti(A.props.children,k.mode,O,A.key),w.return=k,k=w):(O=oc(A.type,A.key,A.props,null,k.mode,O),O.ref=$o(k,w,A),O.return=k,k=O)}return o(k);case ji:e:{for(J=A.key;w!==null;){if(w.key===J)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(k,w.sibling),w=s(w,A.children||[]),w.return=k,k=w;break e}else{n(k,w);break}else e(k,w);w=w.sibling}w=_d(A,k.mode,O),w.return=k,k=w}return o(k);case cs:return J=A._init,F(k,w,J(A._payload),O)}if(Go(A))return b(k,w,A,O);if(Vo(A))return N(k,w,A,O);Ll(k,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(k,w.sibling),w=s(w,A),w.return=k,k=w):(n(k,w),w=yd(A,k.mode,O),w.return=k,k=w),o(k)):n(k,w)}return F}var oo=o_(!0),a_=o_(!1),Nc=Vs(null),Pc=null,zi=null,_f=null;function wf(){_f=zi=Pc=null}function Ef(t){var e=Nc.current;Nt(Nc),t._currentValue=e}function oh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qi(t,e){Pc=t,_f=zi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Un=!0),t.firstContext=null)}function or(t){var e=t._currentValue;if(_f!==t)if(t={context:t,memoizedValue:e,next:null},zi===null){if(Pc===null)throw Error(le(308));zi=t,Pc.dependencies={lanes:0,firstContext:t}}else zi=zi.next=t;return e}var Ys=null;function Sf(t){Ys===null?Ys=[t]:Ys.push(t)}function l_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Sf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Gr(t,r)}function Gr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var us=!1;function Tf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Is(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gr(t,n)}return s=r.interleaved,s===null?(e.next=e,Sf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gr(t,n)}function ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}function Xm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rc(t,e,n,r){var s=t.updateQueue;us=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=h:c.next=h,p.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;o=0,p=h=u=null,c=i;do{var _=c.lane,R=c.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:R,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=t,N=c;switch(_=e,R=n,N.tag){case 1:if(b=N.payload,typeof b=="function"){g=b.call(R,g,_);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,_=typeof b=="function"?b.call(R,g,_):b,_==null)break e;g=Mt({},g,_);break e;case 2:us=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[c]:_.push(c))}else R={eventTime:R,lane:_,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(h=p=R,u=g):p=p.next=R,o|=_;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;_=c,c=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(p===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);oi|=o,t.lanes=o,t.memoizedState=g}}function Jm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(le(191,s));s.call(r)}}}var Ja={},Cr=Vs(Ja),Na=Vs(Ja),Pa=Vs(Ja);function Xs(t){if(t===Ja)throw Error(le(174));return t}function If(t,e){switch(It(Pa,e),It(Na,t),It(Cr,Ja),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ud(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ud(e,t)}Nt(Cr),It(Cr,e)}function ao(){Nt(Cr),Nt(Na),Nt(Pa)}function u_(t){Xs(Pa.current);var e=Xs(Cr.current),n=Ud(e,t.type);e!==n&&(It(Na,t),It(Cr,n))}function Cf(t){Na.current===t&&(Nt(Cr),Nt(Na))}var Dt=Vs(0);function jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hd=[];function xf(){for(var t=0;t<hd.length;t++)hd[t]._workInProgressVersionPrimary=null;hd.length=0}var tc=ts.ReactCurrentDispatcher,fd=ts.ReactCurrentBatchConfig,ii=0,bt=null,Yt=null,nn=null,Dc=!1,la=!1,Ra=0,jT=0;function _n(){throw Error(le(321))}function Af(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vr(t[n],e[n]))return!1;return!0}function kf(t,e,n,r,s,i){if(ii=i,bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tc.current=t===null||t.memoizedState===null?OT:LT,t=n(r,s),la){i=0;do{if(la=!1,Ra=0,25<=i)throw Error(le(301));i+=1,nn=Yt=null,e.updateQueue=null,tc.current=VT,t=n(r,s)}while(la)}if(tc.current=bc,e=Yt!==null&&Yt.next!==null,ii=0,nn=Yt=bt=null,Dc=!1,e)throw Error(le(300));return t}function Nf(){var t=Ra!==0;return Ra=0,t}function Er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?bt.memoizedState=nn=t:nn=nn.next=t,nn}function ar(){if(Yt===null){var t=bt.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var e=nn===null?bt.memoizedState:nn.next;if(e!==null)nn=e,Yt=t;else{if(t===null)throw Error(le(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},nn===null?bt.memoizedState=nn=t:nn=nn.next=t}return nn}function ja(t,e){return typeof e=="function"?e(t):e}function pd(t){var e=ar(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=Yt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,h=i;do{var p=h.lane;if((ii&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=g,o=r):u=u.next=g,bt.lanes|=p,oi|=p}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=c,vr(r,e.memoizedState)||(Un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,bt.lanes|=i,oi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function md(t){var e=ar(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vr(i,e.memoizedState)||(Un=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function d_(){}function h_(t,e){var n=bt,r=ar(),s=e(),i=!vr(r.memoizedState,s);if(i&&(r.memoizedState=s,Un=!0),r=r.queue,Pf(m_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||nn!==null&&nn.memoizedState.tag&1){if(n.flags|=2048,Da(9,p_.bind(null,n,r,s,e),void 0,null),rn===null)throw Error(le(349));ii&30||f_(n,e,s)}return s}function f_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function p_(t,e,n,r){e.value=n,e.getSnapshot=r,g_(e)&&v_(t)}function m_(t,e,n){return n(function(){g_(e)&&v_(t)})}function g_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vr(t,n)}catch{return!0}}function v_(t){var e=Gr(t,1);e!==null&&gr(e,t,1,-1)}function Zm(t){var e=Er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:t},e.queue=t,t=t.dispatch=MT.bind(null,bt,t),[e.memoizedState,t]}function Da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function y_(){return ar().memoizedState}function nc(t,e,n,r){var s=Er();bt.flags|=t,s.memoizedState=Da(1|e,n,void 0,r===void 0?null:r)}function cu(t,e,n,r){var s=ar();r=r===void 0?null:r;var i=void 0;if(Yt!==null){var o=Yt.memoizedState;if(i=o.destroy,r!==null&&Af(r,o.deps)){s.memoizedState=Da(e,n,i,r);return}}bt.flags|=t,s.memoizedState=Da(1|e,n,i,r)}function eg(t,e){return nc(8390656,8,t,e)}function Pf(t,e){return cu(2048,8,t,e)}function __(t,e){return cu(4,2,t,e)}function w_(t,e){return cu(4,4,t,e)}function E_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function S_(t,e,n){return n=n!=null?n.concat([t]):null,cu(4,4,E_.bind(null,e,t),n)}function Rf(){}function T_(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Af(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function I_(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Af(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function C_(t,e,n){return ii&21?(vr(n,e)||(n=Py(),bt.lanes|=n,oi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Un=!0),t.memoizedState=n)}function DT(t,e){var n=mt;mt=n!==0&&4>n?n:4,t(!0);var r=fd.transition;fd.transition={};try{t(!1),e()}finally{mt=n,fd.transition=r}}function x_(){return ar().memoizedState}function bT(t,e,n){var r=xs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A_(t))k_(e,n);else if(n=l_(t,e,n,r),n!==null){var s=Dn();gr(n,t,r,s),N_(n,e,r)}}function MT(t,e,n){var r=xs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A_(t))k_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,vr(c,o)){var u=e.interleaved;u===null?(s.next=s,Sf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=l_(t,e,s,r),n!==null&&(s=Dn(),gr(n,t,r,s),N_(n,e,r))}}function A_(t){var e=t.alternate;return t===bt||e!==null&&e===bt}function k_(t,e){la=Dc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function N_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}var bc={readContext:or,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},OT={readContext:or,useCallback:function(t,e){return Er().memoizedState=[t,e===void 0?null:e],t},useContext:or,useEffect:eg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nc(4194308,4,E_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var n=Er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Er();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bT.bind(null,bt,t),[r.memoizedState,t]},useRef:function(t){var e=Er();return t={current:t},e.memoizedState=t},useState:Zm,useDebugValue:Rf,useDeferredValue:function(t){return Er().memoizedState=t},useTransition:function(){var t=Zm(!1),e=t[0];return t=DT.bind(null,t[1]),Er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=bt,s=Er();if(Rt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),rn===null)throw Error(le(349));ii&30||f_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,eg(m_.bind(null,r,i,t),[t]),r.flags|=2048,Da(9,p_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Er(),e=rn.identifierPrefix;if(Rt){var n=Fr,r=Vr;n=(r&~(1<<32-mr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ra++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LT={readContext:or,useCallback:T_,useContext:or,useEffect:Pf,useImperativeHandle:S_,useInsertionEffect:__,useLayoutEffect:w_,useMemo:I_,useReducer:pd,useRef:y_,useState:function(){return pd(ja)},useDebugValue:Rf,useDeferredValue:function(t){var e=ar();return C_(e,Yt.memoizedState,t)},useTransition:function(){var t=pd(ja)[0],e=ar().memoizedState;return[t,e]},useMutableSource:d_,useSyncExternalStore:h_,useId:x_,unstable_isNewReconciler:!1},VT={readContext:or,useCallback:T_,useContext:or,useEffect:Pf,useImperativeHandle:S_,useInsertionEffect:__,useLayoutEffect:w_,useMemo:I_,useReducer:md,useRef:y_,useState:function(){return md(ja)},useDebugValue:Rf,useDeferredValue:function(t){var e=ar();return Yt===null?e.memoizedState=t:C_(e,Yt.memoizedState,t)},useTransition:function(){var t=md(ja)[0],e=ar().memoizedState;return[t,e]},useMutableSource:d_,useSyncExternalStore:h_,useId:x_,unstable_isNewReconciler:!1};function dr(t,e){if(t&&t.defaultProps){e=Mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ah(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uu={isMounted:function(t){return(t=t._reactInternals)?mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dn(),s=xs(t),i=$r(r,s);i.payload=e,n!=null&&(i.callback=n),e=Is(t,i,s),e!==null&&(gr(e,t,s,r),ec(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dn(),s=xs(t),i=$r(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Is(t,i,s),e!==null&&(gr(e,t,s,r),ec(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dn(),r=xs(t),s=$r(n,r);s.tag=2,e!=null&&(s.callback=e),e=Is(t,s,r),e!==null&&(gr(e,t,r,n),ec(e,t,r))}};function tg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ca(n,r)||!Ca(s,i):!0}function P_(t,e,n){var r=!1,s=js,i=e.contextType;return typeof i=="object"&&i!==null?i=or(i):(s=Bn(e)?ri:Cn.current,r=e.contextTypes,i=(r=r!=null)?so(t,s):js),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ng(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uu.enqueueReplaceState(e,e.state,null)}function lh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Tf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=or(i):(i=Bn(e)?ri:Cn.current,s.context=so(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ah(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&uu.enqueueReplaceState(s,s.state,null),Rc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function lo(t,e){try{var n="",r=e;do n+=hS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function gd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ch(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FT=typeof WeakMap=="function"?WeakMap:Map;function R_(t,e,n){n=$r(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Oc||(Oc=!0,_h=r),ch(t,e)},n}function j_(t,e,n){n=$r(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ch(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ch(t,e),typeof r!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function rg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new FT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ZT.bind(null,t,e,n),e.then(t,t))}function sg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ig(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$r(-1,1),e.tag=2,Is(n,e,1))),n.lanes|=1),t)}var UT=ts.ReactCurrentOwner,Un=!1;function Rn(t,e,n,r){e.child=t===null?a_(e,null,n,r):oo(e,t.child,n,r)}function og(t,e,n,r,s){n=n.render;var i=e.ref;return Qi(e,s),r=kf(t,e,n,r,i,s),n=Nf(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qr(t,e,s)):(Rt&&n&&gf(e),e.flags|=1,Rn(t,e,r,s),e.child)}function ag(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ff(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,D_(t,e,i,r,s)):(t=oc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ca,n(o,r)&&t.ref===e.ref)return Qr(t,e,s)}return e.flags|=1,t=As(i,r),t.ref=e.ref,t.return=e,e.child=t}function D_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ca(i,r)&&t.ref===e.ref)if(Un=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Un=!0);else return e.lanes=t.lanes,Qr(t,e,s)}return uh(t,e,n,r,s)}function b_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},It($i,Hn),Hn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,It($i,Hn),Hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,It($i,Hn),Hn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,It($i,Hn),Hn|=r;return Rn(t,e,s,n),e.child}function M_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uh(t,e,n,r,s){var i=Bn(n)?ri:Cn.current;return i=so(e,i),Qi(e,s),n=kf(t,e,n,r,i,s),r=Nf(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qr(t,e,s)):(Rt&&r&&gf(e),e.flags|=1,Rn(t,e,n,s),e.child)}function lg(t,e,n,r,s){if(Bn(n)){var i=!0;xc(e)}else i=!1;if(Qi(e,s),e.stateNode===null)rc(t,e),P_(e,n,r),lh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=or(h):(h=Bn(n)?ri:Cn.current,h=so(e,h));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==h)&&ng(e,o,r,h),us=!1;var _=e.memoizedState;o.state=_,Rc(e,r,o,s),u=e.memoizedState,c!==r||_!==u||zn.current||us?(typeof p=="function"&&(ah(e,n,p,r),u=e.memoizedState),(c=us||tg(e,n,c,r,_,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,c_(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:dr(e.type,c),o.props=h,g=e.pendingProps,_=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=or(u):(u=Bn(n)?ri:Cn.current,u=so(e,u));var R=n.getDerivedStateFromProps;(p=typeof R=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==g||_!==u)&&ng(e,o,r,u),us=!1,_=e.memoizedState,o.state=_,Rc(e,r,o,s);var b=e.memoizedState;c!==g||_!==b||zn.current||us?(typeof R=="function"&&(ah(e,n,R,r),b=e.memoizedState),(h=us||tg(e,n,h,r,_,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return dh(t,e,n,r,i,s)}function dh(t,e,n,r,s,i){M_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Km(e,n,!1),Qr(t,e,i);r=e.stateNode,UT.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=oo(e,t.child,null,i),e.child=oo(e,null,c,i)):Rn(t,e,c,i),e.memoizedState=r.state,s&&Km(e,n,!0),e.child}function O_(t){var e=t.stateNode;e.pendingContext?Wm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wm(t,e.context,!1),If(t,e.containerInfo)}function cg(t,e,n,r,s){return io(),yf(s),e.flags|=256,Rn(t,e,n,r),e.child}var hh={dehydrated:null,treeContext:null,retryLane:0};function fh(t){return{baseLanes:t,cachePool:null,transitions:null}}function L_(t,e,n){var r=e.pendingProps,s=Dt.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),It(Dt,s&1),t===null)return ih(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=fu(o,r,0,null),t=ti(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fh(n),e.memoizedState=hh,t):jf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return zT(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=As(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=As(c,i):(i=ti(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?fh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hh,r}return i=t.child,t=i.sibling,r=As(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jf(t,e){return e=fu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,r){return r!==null&&yf(r),oo(e,t.child,null,n),t=jf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=gd(Error(le(422))),Vl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=fu({mode:"visible",children:r.children},s,0,null),i=ti(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&oo(e,t.child,null,o),e.child.memoizedState=fh(o),e.memoizedState=hh,i);if(!(e.mode&1))return Vl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(le(419)),r=gd(i,r,void 0),Vl(t,e,o,r)}if(c=(o&t.childLanes)!==0,Un||c){if(r=rn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gr(t,s),gr(r,t,s,-1))}return Vf(),r=gd(Error(le(421))),Vl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Wn=Ts(s.nextSibling),Gn=e,Rt=!0,fr=null,t!==null&&(er[tr++]=Vr,er[tr++]=Fr,er[tr++]=si,Vr=t.id,Fr=t.overflow,si=e),e=jf(e,r.children),e.flags|=4096,e)}function ug(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oh(t.return,e,n)}function vd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function V_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Rn(t,e,r.children,n),r=Dt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ug(t,n,e);else if(t.tag===19)ug(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(It(Dt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&jc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&jc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vd(e,!0,n,null,i);break;case"together":vd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=As(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=As(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BT(t,e,n){switch(e.tag){case 3:O_(e),io();break;case 5:u_(e);break;case 1:Bn(e.type)&&xc(e);break;case 4:If(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;It(Nc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(It(Dt,Dt.current&1),e.flags|=128,null):n&e.child.childLanes?L_(t,e,n):(It(Dt,Dt.current&1),t=Qr(t,e,n),t!==null?t.sibling:null);It(Dt,Dt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return V_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),It(Dt,Dt.current),r)break;return null;case 22:case 23:return e.lanes=0,b_(t,e,n)}return Qr(t,e,n)}var F_,ph,U_,z_;F_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ph=function(){};U_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xs(Cr.current);var i=null;switch(n){case"input":s=Od(t,s),r=Od(t,r),i=[];break;case"select":s=Mt({},s,{value:void 0}),r=Mt({},r,{value:void 0}),i=[];break;case"textarea":s=Fd(t,s),r=Fd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ic)}zd(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var c=s[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ya.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(c=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ya.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&At("scroll",t),i||c===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};z_=function(t,e,n,r){n!==r&&(e.flags|=4)};function qo(t,e){if(!Rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $T(t,e,n){var r=e.pendingProps;switch(vf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(e),null;case 1:return Bn(e.type)&&Cc(),wn(e),null;case 3:return r=e.stateNode,ao(),Nt(zn),Nt(Cn),xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fr!==null&&(Sh(fr),fr=null))),ph(t,e),wn(e),null;case 5:Cf(e);var s=Xs(Pa.current);if(n=e.type,t!==null&&e.stateNode!=null)U_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return wn(e),null}if(t=Xs(Cr.current),Ol(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Sr]=e,r[ka]=i,t=(e.mode&1)!==0,n){case"dialog":At("cancel",r),At("close",r);break;case"iframe":case"object":case"embed":At("load",r);break;case"video":case"audio":for(s=0;s<Yo.length;s++)At(Yo[s],r);break;case"source":At("error",r);break;case"img":case"image":case"link":At("error",r),At("load",r);break;case"details":At("toggle",r);break;case"input":_m(r,i),At("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},At("invalid",r);break;case"textarea":Em(r,i),At("invalid",r)}zd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ml(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ml(r.textContent,c,t),s=["children",""+c]):ya.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&At("scroll",r)}switch(n){case"input":Al(r),wm(r,i,!0);break;case"textarea":Al(r),Sm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ic)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=my(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sr]=e,t[ka]=r,F_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bd(n,r),n){case"dialog":At("cancel",t),At("close",t),s=r;break;case"iframe":case"object":case"embed":At("load",t),s=r;break;case"video":case"audio":for(s=0;s<Yo.length;s++)At(Yo[s],t);s=r;break;case"source":At("error",t),s=r;break;case"img":case"image":case"link":At("error",t),At("load",t),s=r;break;case"details":At("toggle",t),s=r;break;case"input":_m(t,r),s=Od(t,r),At("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Mt({},r,{value:void 0}),At("invalid",t);break;case"textarea":Em(t,r),s=Fd(t,r),At("invalid",t);break;default:s=r}zd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?yy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&gy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&_a(t,u):typeof u=="number"&&_a(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ya.hasOwnProperty(i)?u!=null&&i==="onScroll"&&At("scroll",t):u!=null&&tf(t,i,u,o))}switch(n){case"input":Al(t),wm(t,r,!1);break;case"textarea":Al(t),Sm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Hi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Hi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ic)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wn(e),null;case 6:if(t&&e.stateNode!=null)z_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=Xs(Pa.current),Xs(Cr.current),Ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sr]=e,(i=r.nodeValue!==n)&&(t=Gn,t!==null))switch(t.tag){case 3:Ml(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ml(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sr]=e,e.stateNode=r}return wn(e),null;case 13:if(Nt(Dt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rt&&Wn!==null&&e.mode&1&&!(e.flags&128))i_(),io(),e.flags|=98560,i=!1;else if(i=Ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(le(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[Sr]=e}else io(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wn(e),i=!1}else fr!==null&&(Sh(fr),fr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Dt.current&1?Xt===0&&(Xt=3):Vf())),e.updateQueue!==null&&(e.flags|=4),wn(e),null);case 4:return ao(),ph(t,e),t===null&&xa(e.stateNode.containerInfo),wn(e),null;case 10:return Ef(e.type._context),wn(e),null;case 17:return Bn(e.type)&&Cc(),wn(e),null;case 19:if(Nt(Dt),i=e.memoizedState,i===null)return wn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qo(i,!1);else{if(Xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jc(t),o!==null){for(e.flags|=128,qo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return It(Dt,Dt.current&1|2),e.child}t=t.sibling}i.tail!==null&&zt()>co&&(e.flags|=128,r=!0,qo(i,!1),e.lanes=4194304)}else{if(!r)if(t=jc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Rt)return wn(e),null}else 2*zt()-i.renderingStartTime>co&&n!==1073741824&&(e.flags|=128,r=!0,qo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=zt(),e.sibling=null,n=Dt.current,It(Dt,r?n&1|2:n&1),e):(wn(e),null);case 22:case 23:return Lf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Hn&1073741824&&(wn(e),e.subtreeFlags&6&&(e.flags|=8192)):wn(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function qT(t,e){switch(vf(e),e.tag){case 1:return Bn(e.type)&&Cc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ao(),Nt(zn),Nt(Cn),xf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cf(e),null;case 13:if(Nt(Dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));io()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nt(Dt),null;case 4:return ao(),null;case 10:return Ef(e.type._context),null;case 22:case 23:return Lf(),null;case 24:return null;default:return null}}var Fl=!1,Sn=!1,HT=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ft(t,e,r)}else n.current=null}function mh(t,e,n){try{n()}catch(r){Ft(t,e,r)}}var dg=!1;function WT(t,e){if(Jd=Ec,t=Wy(),mf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,h=0,p=0,g=t,_=null;t:for(;;){for(var R;g!==n||s!==0&&g.nodeType!==3||(c=o+s),g!==i||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(R=g.firstChild)!==null;)_=g,g=R;for(;;){if(g===t)break t;if(_===n&&++h===s&&(c=o),_===i&&++p===r&&(u=o),(R=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=R}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zd={focusedElem:t,selectionRange:n},Ec=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,F=b.memoizedState,k=e.stateNode,w=k.getSnapshotBeforeUpdate(e.elementType===e.type?N:dr(e.type,N),F);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(O){Ft(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return b=dg,dg=!1,b}function ca(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&mh(e,n,i)}s=s.next}while(s!==r)}}function du(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function B_(t){var e=t.alternate;e!==null&&(t.alternate=null,B_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sr],delete e[ka],delete e[nh],delete e[kT],delete e[NT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $_(t){return t.tag===5||t.tag===3||t.tag===4}function hg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ic));else if(r!==4&&(t=t.child,t!==null))for(vh(t,e,n),t=t.sibling;t!==null;)vh(t,e,n),t=t.sibling}function yh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yh(t,e,n),t=t.sibling;t!==null;)yh(t,e,n),t=t.sibling}var ln=null,hr=!1;function os(t,e,n){for(n=n.child;n!==null;)q_(t,e,n),n=n.sibling}function q_(t,e,n){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(ru,n)}catch{}switch(n.tag){case 5:Sn||Bi(n,e);case 6:var r=ln,s=hr;ln=null,os(t,e,n),ln=r,hr=s,ln!==null&&(hr?(t=ln,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ln.removeChild(n.stateNode));break;case 18:ln!==null&&(hr?(t=ln,n=n.stateNode,t.nodeType===8?ud(t.parentNode,n):t.nodeType===1&&ud(t,n),Ta(t)):ud(ln,n.stateNode));break;case 4:r=ln,s=hr,ln=n.stateNode.containerInfo,hr=!0,os(t,e,n),ln=r,hr=s;break;case 0:case 11:case 14:case 15:if(!Sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&mh(n,e,o),s=s.next}while(s!==r)}os(t,e,n);break;case 1:if(!Sn&&(Bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ft(n,e,c)}os(t,e,n);break;case 21:os(t,e,n);break;case 22:n.mode&1?(Sn=(r=Sn)||n.memoizedState!==null,os(t,e,n),Sn=r):os(t,e,n);break;default:os(t,e,n)}}function fg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HT),e.forEach(function(r){var s=tI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ur(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:ln=c.stateNode,hr=!1;break e;case 3:ln=c.stateNode.containerInfo,hr=!0;break e;case 4:ln=c.stateNode.containerInfo,hr=!0;break e}c=c.return}if(ln===null)throw Error(le(160));q_(i,o,s),ln=null,hr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Ft(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)H_(e,t),e=e.sibling}function H_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ur(e,t),wr(t),r&4){try{ca(3,t,t.return),du(3,t)}catch(N){Ft(t,t.return,N)}try{ca(5,t,t.return)}catch(N){Ft(t,t.return,N)}}break;case 1:ur(e,t),wr(t),r&512&&n!==null&&Bi(n,n.return);break;case 5:if(ur(e,t),wr(t),r&512&&n!==null&&Bi(n,n.return),t.flags&32){var s=t.stateNode;try{_a(s,"")}catch(N){Ft(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&fy(s,i),Bd(c,o);var h=Bd(c,i);for(o=0;o<u.length;o+=2){var p=u[o],g=u[o+1];p==="style"?yy(s,g):p==="dangerouslySetInnerHTML"?gy(s,g):p==="children"?_a(s,g):tf(s,p,g,h)}switch(c){case"input":Ld(s,i);break;case"textarea":py(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var R=i.value;R!=null?Hi(s,!!i.multiple,R,!1):_!==!!i.multiple&&(i.defaultValue!=null?Hi(s,!!i.multiple,i.defaultValue,!0):Hi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ka]=i}catch(N){Ft(t,t.return,N)}}break;case 6:if(ur(e,t),wr(t),r&4){if(t.stateNode===null)throw Error(le(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Ft(t,t.return,N)}}break;case 3:if(ur(e,t),wr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ta(e.containerInfo)}catch(N){Ft(t,t.return,N)}break;case 4:ur(e,t),wr(t);break;case 13:ur(e,t),wr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Mf=zt())),r&4&&fg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Sn=(h=Sn)||p,ur(e,t),Sn=h):ur(e,t),wr(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Ie=t,p=t.child;p!==null;){for(g=Ie=p;Ie!==null;){switch(_=Ie,R=_.child,_.tag){case 0:case 11:case 14:case 15:ca(4,_,_.return);break;case 1:Bi(_,_.return);var b=_.stateNode;if(typeof b.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){Ft(r,n,N)}}break;case 5:Bi(_,_.return);break;case 22:if(_.memoizedState!==null){mg(g);continue}}R!==null?(R.return=_,Ie=R):mg(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=vy("display",o))}catch(N){Ft(t,t.return,N)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(N){Ft(t,t.return,N)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ur(e,t),wr(t),r&4&&fg(t);break;case 21:break;default:ur(e,t),wr(t)}}function wr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($_(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_a(s,""),r.flags&=-33);var i=hg(t);yh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=hg(t);vh(t,c,o);break;default:throw Error(le(161))}}catch(u){Ft(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function KT(t,e,n){Ie=t,W_(t)}function W_(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var s=Ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Sn;c=Fl;var h=Sn;if(Fl=o,(Sn=u)&&!h)for(Ie=s;Ie!==null;)o=Ie,u=o.child,o.tag===22&&o.memoizedState!==null?gg(s):u!==null?(u.return=o,Ie=u):gg(s);for(;i!==null;)Ie=i,W_(i),i=i.sibling;Ie=s,Fl=c,Sn=h}pg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ie=i):pg(t)}}function pg(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sn||du(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Sn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:dr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Jm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Jm(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&Ta(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Sn||e.flags&512&&gh(e)}catch(_){Ft(e,e.return,_)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function mg(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function gg(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{du(4,e)}catch(u){Ft(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ft(e,s,u)}}var i=e.return;try{gh(e)}catch(u){Ft(e,i,u)}break;case 5:var o=e.return;try{gh(e)}catch(u){Ft(e,o,u)}}}catch(u){Ft(e,e.return,u)}if(e===t){Ie=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Ie=c;break}Ie=e.return}}var GT=Math.ceil,Mc=ts.ReactCurrentDispatcher,Df=ts.ReactCurrentOwner,sr=ts.ReactCurrentBatchConfig,st=0,rn=null,Wt=null,dn=0,Hn=0,$i=Vs(0),Xt=0,ba=null,oi=0,hu=0,bf=0,ua=null,Vn=null,Mf=0,co=1/0,Mr=null,Oc=!1,_h=null,Cs=null,Ul=!1,ys=null,Lc=0,da=0,wh=null,sc=-1,ic=0;function Dn(){return st&6?zt():sc!==-1?sc:sc=zt()}function xs(t){return t.mode&1?st&2&&dn!==0?dn&-dn:RT.transition!==null?(ic===0&&(ic=Py()),ic):(t=mt,t!==0||(t=window.event,t=t===void 0?16:Ly(t.type)),t):1}function gr(t,e,n,r){if(50<da)throw da=0,wh=null,Error(le(185));Qa(t,n,r),(!(st&2)||t!==rn)&&(t===rn&&(!(st&2)&&(hu|=n),Xt===4&&hs(t,dn)),$n(t,r),n===1&&st===0&&!(e.mode&1)&&(co=zt()+500,lu&&Fs()))}function $n(t,e){var n=t.callbackNode;RS(t,e);var r=wc(t,t===rn?dn:0);if(r===0)n!==null&&Cm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cm(n),e===1)t.tag===0?PT(vg.bind(null,t)):n_(vg.bind(null,t)),xT(function(){!(st&6)&&Fs()}),n=null;else{switch(Ry(r)){case 1:n=af;break;case 4:n=ky;break;case 16:n=_c;break;case 536870912:n=Ny;break;default:n=_c}n=e0(n,K_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function K_(t,e){if(sc=-1,ic=0,st&6)throw Error(le(327));var n=t.callbackNode;if(Yi()&&t.callbackNode!==n)return null;var r=wc(t,t===rn?dn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vc(t,r);else{e=r;var s=st;st|=2;var i=Q_();(rn!==t||dn!==e)&&(Mr=null,co=zt()+500,ei(t,e));do try{XT();break}catch(c){G_(t,c)}while(!0);wf(),Mc.current=i,st=s,Wt!==null?e=0:(rn=null,dn=0,e=Xt)}if(e!==0){if(e===2&&(s=Kd(t),s!==0&&(r=s,e=Eh(t,s))),e===1)throw n=ba,ei(t,0),hs(t,r),$n(t,zt()),n;if(e===6)hs(t,r);else{if(s=t.current.alternate,!(r&30)&&!QT(s)&&(e=Vc(t,r),e===2&&(i=Kd(t),i!==0&&(r=i,e=Eh(t,i))),e===1))throw n=ba,ei(t,0),hs(t,r),$n(t,zt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:Ws(t,Vn,Mr);break;case 3:if(hs(t,r),(r&130023424)===r&&(e=Mf+500-zt(),10<e)){if(wc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Dn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=th(Ws.bind(null,t,Vn,Mr),e);break}Ws(t,Vn,Mr);break;case 4:if(hs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-mr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=zt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GT(r/1960))-r,10<r){t.timeoutHandle=th(Ws.bind(null,t,Vn,Mr),r);break}Ws(t,Vn,Mr);break;case 5:Ws(t,Vn,Mr);break;default:throw Error(le(329))}}}return $n(t,zt()),t.callbackNode===n?K_.bind(null,t):null}function Eh(t,e){var n=ua;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=Vc(t,e),t!==2&&(e=Vn,Vn=n,e!==null&&Sh(e)),t}function Sh(t){Vn===null?Vn=t:Vn.push.apply(Vn,t)}function QT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hs(t,e){for(e&=~bf,e&=~hu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mr(e),r=1<<n;t[n]=-1,e&=~r}}function vg(t){if(st&6)throw Error(le(327));Yi();var e=wc(t,0);if(!(e&1))return $n(t,zt()),null;var n=Vc(t,e);if(t.tag!==0&&n===2){var r=Kd(t);r!==0&&(e=r,n=Eh(t,r))}if(n===1)throw n=ba,ei(t,0),hs(t,e),$n(t,zt()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ws(t,Vn,Mr),$n(t,zt()),null}function Of(t,e){var n=st;st|=1;try{return t(e)}finally{st=n,st===0&&(co=zt()+500,lu&&Fs())}}function ai(t){ys!==null&&ys.tag===0&&!(st&6)&&Yi();var e=st;st|=1;var n=sr.transition,r=mt;try{if(sr.transition=null,mt=1,t)return t()}finally{mt=r,sr.transition=n,st=e,!(st&6)&&Fs()}}function Lf(){Hn=$i.current,Nt($i)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,CT(n)),Wt!==null)for(n=Wt.return;n!==null;){var r=n;switch(vf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cc();break;case 3:ao(),Nt(zn),Nt(Cn),xf();break;case 5:Cf(r);break;case 4:ao();break;case 13:Nt(Dt);break;case 19:Nt(Dt);break;case 10:Ef(r.type._context);break;case 22:case 23:Lf()}n=n.return}if(rn=t,Wt=t=As(t.current,null),dn=Hn=e,Xt=0,ba=null,bf=hu=oi=0,Vn=ua=null,Ys!==null){for(e=0;e<Ys.length;e++)if(n=Ys[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ys=null}return t}function G_(t,e){do{var n=Wt;try{if(wf(),tc.current=bc,Dc){for(var r=bt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dc=!1}if(ii=0,nn=Yt=bt=null,la=!1,Ra=0,Df.current=null,n===null||n.return===null){Xt=1,ba=e,Wt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=dn,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=c,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var R=sg(o);if(R!==null){R.flags&=-257,ig(R,o,c,i,e),R.mode&1&&rg(i,h,e),e=R,u=h;var b=e.updateQueue;if(b===null){var N=new Set;N.add(u),e.updateQueue=N}else b.add(u);break e}else{if(!(e&1)){rg(i,h,e),Vf();break e}u=Error(le(426))}}else if(Rt&&c.mode&1){var F=sg(o);if(F!==null){!(F.flags&65536)&&(F.flags|=256),ig(F,o,c,i,e),yf(lo(u,c));break e}}i=u=lo(u,c),Xt!==4&&(Xt=2),ua===null?ua=[i]:ua.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var k=R_(i,u,e);Xm(i,k);break e;case 1:c=u;var w=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Cs===null||!Cs.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=j_(i,c,e);Xm(i,O);break e}}i=i.return}while(i!==null)}X_(n)}catch(B){e=B,Wt===n&&n!==null&&(Wt=n=n.return);continue}break}while(!0)}function Q_(){var t=Mc.current;return Mc.current=bc,t===null?bc:t}function Vf(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),rn===null||!(oi&268435455)&&!(hu&268435455)||hs(rn,dn)}function Vc(t,e){var n=st;st|=2;var r=Q_();(rn!==t||dn!==e)&&(Mr=null,ei(t,e));do try{YT();break}catch(s){G_(t,s)}while(!0);if(wf(),st=n,Mc.current=r,Wt!==null)throw Error(le(261));return rn=null,dn=0,Xt}function YT(){for(;Wt!==null;)Y_(Wt)}function XT(){for(;Wt!==null&&!SS();)Y_(Wt)}function Y_(t){var e=Z_(t.alternate,t,Hn);t.memoizedProps=t.pendingProps,e===null?X_(t):Wt=e,Df.current=null}function X_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qT(n,e),n!==null){n.flags&=32767,Wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xt=6,Wt=null;return}}else if(n=$T(n,e,Hn),n!==null){Wt=n;return}if(e=e.sibling,e!==null){Wt=e;return}Wt=e=t}while(e!==null);Xt===0&&(Xt=5)}function Ws(t,e,n){var r=mt,s=sr.transition;try{sr.transition=null,mt=1,JT(t,e,n,r)}finally{sr.transition=s,mt=r}return null}function JT(t,e,n,r){do Yi();while(ys!==null);if(st&6)throw Error(le(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jS(t,i),t===rn&&(Wt=rn=null,dn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ul||(Ul=!0,e0(_c,function(){return Yi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=sr.transition,sr.transition=null;var o=mt;mt=1;var c=st;st|=4,Df.current=null,WT(t,n),H_(n,t),yT(Zd),Ec=!!Jd,Zd=Jd=null,t.current=n,KT(n),TS(),st=c,mt=o,sr.transition=i}else t.current=n;if(Ul&&(Ul=!1,ys=t,Lc=s),i=t.pendingLanes,i===0&&(Cs=null),xS(n.stateNode),$n(t,zt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Oc)throw Oc=!1,t=_h,_h=null,t;return Lc&1&&t.tag!==0&&Yi(),i=t.pendingLanes,i&1?t===wh?da++:(da=0,wh=t):da=0,Fs(),null}function Yi(){if(ys!==null){var t=Ry(Lc),e=sr.transition,n=mt;try{if(sr.transition=null,mt=16>t?16:t,ys===null)var r=!1;else{if(t=ys,ys=null,Lc=0,st&6)throw Error(le(331));var s=st;for(st|=4,Ie=t.current;Ie!==null;){var i=Ie,o=i.child;if(Ie.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(Ie=h;Ie!==null;){var p=Ie;switch(p.tag){case 0:case 11:case 15:ca(8,p,i)}var g=p.child;if(g!==null)g.return=p,Ie=g;else for(;Ie!==null;){p=Ie;var _=p.sibling,R=p.return;if(B_(p),p===h){Ie=null;break}if(_!==null){_.return=R,Ie=_;break}Ie=R}}}var b=i.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var F=N.sibling;N.sibling=null,N=F}while(N!==null)}}Ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ie=o;else e:for(;Ie!==null;){if(i=Ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ca(9,i,i.return)}var k=i.sibling;if(k!==null){k.return=i.return,Ie=k;break e}Ie=i.return}}var w=t.current;for(Ie=w;Ie!==null;){o=Ie;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Ie=A;else e:for(o=w;Ie!==null;){if(c=Ie,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:du(9,c)}}catch(B){Ft(c,c.return,B)}if(c===o){Ie=null;break e}var O=c.sibling;if(O!==null){O.return=c.return,Ie=O;break e}Ie=c.return}}if(st=s,Fs(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(ru,t)}catch{}r=!0}return r}finally{mt=n,sr.transition=e}}return!1}function yg(t,e,n){e=lo(n,e),e=R_(t,e,1),t=Is(t,e,1),e=Dn(),t!==null&&(Qa(t,1,e),$n(t,e))}function Ft(t,e,n){if(t.tag===3)yg(t,t,n);else for(;e!==null;){if(e.tag===3){yg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cs===null||!Cs.has(r))){t=lo(n,t),t=j_(e,t,1),e=Is(e,t,1),t=Dn(),e!==null&&(Qa(e,1,t),$n(e,t));break}}e=e.return}}function ZT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dn(),t.pingedLanes|=t.suspendedLanes&n,rn===t&&(dn&n)===n&&(Xt===4||Xt===3&&(dn&130023424)===dn&&500>zt()-Mf?ei(t,0):bf|=n),$n(t,e)}function J_(t,e){e===0&&(t.mode&1?(e=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):e=1);var n=Dn();t=Gr(t,e),t!==null&&(Qa(t,e,n),$n(t,n))}function eI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),J_(t,n)}function tI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),J_(t,n)}var Z_;Z_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zn.current)Un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Un=!1,BT(t,e,n);Un=!!(t.flags&131072)}else Un=!1,Rt&&e.flags&1048576&&r_(e,kc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rc(t,e),t=e.pendingProps;var s=so(e,Cn.current);Qi(e,n),s=kf(null,e,r,t,s,n);var i=Nf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bn(r)?(i=!0,xc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tf(e),s.updater=uu,e.stateNode=s,s._reactInternals=e,lh(e,r,t,n),e=dh(null,e,r,!0,i,n)):(e.tag=0,Rt&&i&&gf(e),Rn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rI(r),t=dr(r,t),s){case 0:e=uh(null,e,r,t,n);break e;case 1:e=lg(null,e,r,t,n);break e;case 11:e=og(null,e,r,t,n);break e;case 14:e=ag(null,e,r,dr(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),uh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),lg(t,e,r,s,n);case 3:e:{if(O_(e),t===null)throw Error(le(387));r=e.pendingProps,i=e.memoizedState,s=i.element,c_(t,e),Rc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=lo(Error(le(423)),e),e=cg(t,e,r,n,s);break e}else if(r!==s){s=lo(Error(le(424)),e),e=cg(t,e,r,n,s);break e}else for(Wn=Ts(e.stateNode.containerInfo.firstChild),Gn=e,Rt=!0,fr=null,n=a_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(io(),r===s){e=Qr(t,e,n);break e}Rn(t,e,r,n)}e=e.child}return e;case 5:return u_(e),t===null&&ih(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,eh(r,s)?o=null:i!==null&&eh(r,i)&&(e.flags|=32),M_(t,e),Rn(t,e,o,n),e.child;case 6:return t===null&&ih(e),null;case 13:return L_(t,e,n);case 4:return If(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oo(e,null,r,n):Rn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),og(t,e,r,s,n);case 7:return Rn(t,e,e.pendingProps,n),e.child;case 8:return Rn(t,e,e.pendingProps.children,n),e.child;case 12:return Rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,It(Nc,r._currentValue),r._currentValue=o,i!==null)if(vr(i.value,o)){if(i.children===s.children&&!zn.current){e=Qr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=$r(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),oh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(le(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),oh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Rn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Qi(e,n),s=or(s),r=r(s),e.flags|=1,Rn(t,e,r,n),e.child;case 14:return r=e.type,s=dr(r,e.pendingProps),s=dr(r.type,s),ag(t,e,r,s,n);case 15:return D_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),rc(t,e),e.tag=1,Bn(r)?(t=!0,xc(e)):t=!1,Qi(e,n),P_(e,r,s),lh(e,r,s,n),dh(null,e,r,!0,t,n);case 19:return V_(t,e,n);case 22:return b_(t,e,n)}throw Error(le(156,e.tag))};function e0(t,e){return Ay(t,e)}function nI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(t,e,n,r){return new nI(t,e,n,r)}function Ff(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rI(t){if(typeof t=="function")return Ff(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rf)return 11;if(t===sf)return 14}return 2}function As(t,e){var n=t.alternate;return n===null?(n=rr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ff(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Di:return ti(n.children,s,i,e);case nf:o=8,s|=8;break;case jd:return t=rr(12,n,e,s|2),t.elementType=jd,t.lanes=i,t;case Dd:return t=rr(13,n,e,s),t.elementType=Dd,t.lanes=i,t;case bd:return t=rr(19,n,e,s),t.elementType=bd,t.lanes=i,t;case uy:return fu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ly:o=10;break e;case cy:o=9;break e;case rf:o=11;break e;case sf:o=14;break e;case cs:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=rr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ti(t,e,n,r){return t=rr(7,t,r,e),t.lanes=n,t}function fu(t,e,n,r){return t=rr(22,t,r,e),t.elementType=uy,t.lanes=n,t.stateNode={isHidden:!1},t}function yd(t,e,n){return t=rr(6,t,null,e),t.lanes=n,t}function _d(t,e,n){return e=rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zu(0),this.expirationTimes=Zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uf(t,e,n,r,s,i,o,c,u){return t=new sI(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=rr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tf(i),t}function iI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function t0(t){if(!t)return js;t=t._reactInternals;e:{if(mi(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Bn(n))return t_(t,n,e)}return e}function n0(t,e,n,r,s,i,o,c,u){return t=Uf(n,r,!0,t,s,i,o,c,u),t.context=t0(null),n=t.current,r=Dn(),s=xs(n),i=$r(r,s),i.callback=e??null,Is(n,i,s),t.current.lanes=s,Qa(t,s,r),$n(t,r),t}function pu(t,e,n,r){var s=e.current,i=Dn(),o=xs(s);return n=t0(n),e.context===null?e.context=n:e.pendingContext=n,e=$r(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Is(s,e,o),t!==null&&(gr(t,s,o,i),ec(t,s,o)),o}function Fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _g(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zf(t,e){_g(t,e),(t=t.alternate)&&_g(t,e)}function oI(){return null}var r0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bf(t){this._internalRoot=t}mu.prototype.render=Bf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));pu(t,e,null,null)};mu.prototype.unmount=Bf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ai(function(){pu(null,t,null,null)}),e[Kr]=null}};function mu(t){this._internalRoot=t}mu.prototype.unstable_scheduleHydration=function(t){if(t){var e=by();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ds.length&&e!==0&&e<ds[n].priority;n++);ds.splice(n,0,t),n===0&&Oy(t)}};function $f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wg(){}function aI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Fc(o);i.call(h)}}var o=n0(e,r,t,0,null,!1,!1,"",wg);return t._reactRootContainer=o,t[Kr]=o.current,xa(t.nodeType===8?t.parentNode:t),ai(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var h=Fc(u);c.call(h)}}var u=Uf(t,0,!1,null,null,!1,!1,"",wg);return t._reactRootContainer=u,t[Kr]=u.current,xa(t.nodeType===8?t.parentNode:t),ai(function(){pu(e,u,n,r)}),u}function vu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Fc(o);c.call(u)}}pu(e,o,t,s)}else o=aI(n,e,t,s,r);return Fc(o)}jy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qo(e.pendingLanes);n!==0&&(lf(e,n|1),$n(e,zt()),!(st&6)&&(co=zt()+500,Fs()))}break;case 13:ai(function(){var r=Gr(t,1);if(r!==null){var s=Dn();gr(r,t,1,s)}}),zf(t,1)}};cf=function(t){if(t.tag===13){var e=Gr(t,134217728);if(e!==null){var n=Dn();gr(e,t,134217728,n)}zf(t,134217728)}};Dy=function(t){if(t.tag===13){var e=xs(t),n=Gr(t,e);if(n!==null){var r=Dn();gr(n,t,e,r)}zf(t,e)}};by=function(){return mt};My=function(t,e){var n=mt;try{return mt=t,e()}finally{mt=n}};qd=function(t,e,n){switch(e){case"input":if(Ld(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=au(r);if(!s)throw Error(le(90));hy(r),Ld(r,s)}}}break;case"textarea":py(t,n);break;case"select":e=n.value,e!=null&&Hi(t,!!n.multiple,e,!1)}};Ey=Of;Sy=ai;var lI={usingClientEntryPoint:!1,Events:[Xa,Li,au,_y,wy,Of]},Ho={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cI={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cy(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||oI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{ru=zl.inject(cI),Ir=zl}catch{}}Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lI;Xn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$f(e))throw Error(le(200));return iI(t,e,null,n)};Xn.createRoot=function(t,e){if(!$f(t))throw Error(le(299));var n=!1,r="",s=r0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uf(t,1,!1,null,null,n,!1,r,s),t[Kr]=e.current,xa(t.nodeType===8?t.parentNode:t),new Bf(e)};Xn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=Cy(e),t=t===null?null:t.stateNode,t};Xn.flushSync=function(t){return ai(t)};Xn.hydrate=function(t,e,n){if(!gu(e))throw Error(le(200));return vu(null,t,e,!0,n)};Xn.hydrateRoot=function(t,e,n){if(!$f(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=r0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=n0(e,null,t,1,n??null,s,!1,i,o),t[Kr]=e.current,xa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new mu(e)};Xn.render=function(t,e,n){if(!gu(e))throw Error(le(200));return vu(null,t,e,!1,n)};Xn.unmountComponentAtNode=function(t){if(!gu(t))throw Error(le(40));return t._reactRootContainer?(ai(function(){vu(null,null,t,!1,function(){t._reactRootContainer=null,t[Kr]=null})}),!0):!1};Xn.unstable_batchedUpdates=Of;Xn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gu(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return vu(t,e,n,!1,r)};Xn.version="18.3.1-next-f1338f8080-20240426";function s0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s0)}catch(t){console.error(t)}}s0(),sy.exports=Xn;var uI=sy.exports,i0,Eg=uI;i0=Eg.createRoot,Eg.hydrateRoot;var Sg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},a0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,g=(i&3)<<4|c>>4;let _=(c&15)<<2|h>>6,R=h&63;u||(R=64,o||(_=64)),r.push(n[p],n[g],n[_],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||g==null)throw new hI;const _=i<<2|c>>4;if(r.push(_),h!==64){const R=c<<4&240|h>>2;if(r.push(R),g!==64){const b=h<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fI=function(t){const e=o0(t);return a0.encodeByteArray(e,!0)},l0=function(t){return fI(t).replace(/\./g,"")},c0=function(t){try{return a0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=()=>pI().__FIREBASE_DEFAULTS__,gI=()=>{if(typeof process>"u"||typeof Sg>"u")return;const t=Sg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&c0(t[1]);return e&&JSON.parse(e)},yu=()=>{try{return mI()||gI()||vI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},u0=t=>{var e,n;return(n=(e=yu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yI=t=>{const e=u0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},d0=()=>{var t;return(t=yu())===null||t===void 0?void 0:t.config},h0=t=>{var e;return(e=yu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xn())}function EI(){var t;const e=(t=yu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function II(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CI(){const t=xn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xI(){return!EI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AI(){try{return typeof indexedDB=="object"}catch{return!1}}function kI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="FirebaseError";class jr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NI,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Za.prototype.create)}}class Za{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?PI(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new jr(s,c,r)}}function PI(t,e){return t.replace(RI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const RI=/\{\$([^}]+)}/g;function jI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ma(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Tg(i)&&Tg(o)){if(!Ma(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Tg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DI(t,e){const n=new bI(t,e);return n.subscribe.bind(n)}class bI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=wd),s.error===void 0&&(s.error=wd),s.complete===void 0&&(s.complete=wd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){return t&&t._delegate?t._delegate:t}class Ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _I;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VI(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LI(t){return t===Ks?void 0:t}function VI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const UI={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},zI=Ze.INFO,BI={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},$I=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=BI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qf{constructor(e){this.name=e,this._logLevel=zI,this._logHandler=$I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const qI=(t,e)=>e.some(n=>t instanceof n);let Ig,Cg;function HI(){return Ig||(Ig=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WI(){return Cg||(Cg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const f0=new WeakMap,Th=new WeakMap,p0=new WeakMap,Ed=new WeakMap,Hf=new WeakMap;function KI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ks(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&f0.set(n,t)}).catch(()=>{}),Hf.set(e,t),e}function GI(t){if(Th.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Th.set(t,e)}let Ih={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Th.get(t);if(e==="objectStoreNames")return t.objectStoreNames||p0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ks(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QI(t){Ih=t(Ih)}function YI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Sd(this),e,...n);return p0.set(r,e.sort?e.sort():[e]),ks(r)}:WI().includes(t)?function(...e){return t.apply(Sd(this),e),ks(f0.get(this))}:function(...e){return ks(t.apply(Sd(this),e))}}function XI(t){return typeof t=="function"?YI(t):(t instanceof IDBTransaction&&GI(t),qI(t,HI())?new Proxy(t,Ih):t)}function ks(t){if(t instanceof IDBRequest)return KI(t);if(Ed.has(t))return Ed.get(t);const e=XI(t);return e!==t&&(Ed.set(t,e),Hf.set(e,t)),e}const Sd=t=>Hf.get(t);function JI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=ks(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ks(o.result),u.oldVersion,u.newVersion,ks(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const ZI=["get","getKey","getAll","getAllKeys","count"],e1=["put","add","delete","clear"],Td=new Map;function xg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Td.get(e))return Td.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=e1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ZI.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return Td.set(e,i),i}QI(t=>({...t,get:(e,n,r)=>xg(e,n)||t.get(e,n,r),has:(e,n)=>!!xg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(n1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function n1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ch="@firebase/app",Ag="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new qf("@firebase/app"),r1="@firebase/app-compat",s1="@firebase/analytics-compat",i1="@firebase/analytics",o1="@firebase/app-check-compat",a1="@firebase/app-check",l1="@firebase/auth",c1="@firebase/auth-compat",u1="@firebase/database",d1="@firebase/data-connect",h1="@firebase/database-compat",f1="@firebase/functions",p1="@firebase/functions-compat",m1="@firebase/installations",g1="@firebase/installations-compat",v1="@firebase/messaging",y1="@firebase/messaging-compat",_1="@firebase/performance",w1="@firebase/performance-compat",E1="@firebase/remote-config",S1="@firebase/remote-config-compat",T1="@firebase/storage",I1="@firebase/storage-compat",C1="@firebase/firestore",x1="@firebase/vertexai-preview",A1="@firebase/firestore-compat",k1="firebase",N1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh="[DEFAULT]",P1={[Ch]:"fire-core",[r1]:"fire-core-compat",[i1]:"fire-analytics",[s1]:"fire-analytics-compat",[a1]:"fire-app-check",[o1]:"fire-app-check-compat",[l1]:"fire-auth",[c1]:"fire-auth-compat",[u1]:"fire-rtdb",[d1]:"fire-data-connect",[h1]:"fire-rtdb-compat",[f1]:"fire-fn",[p1]:"fire-fn-compat",[m1]:"fire-iid",[g1]:"fire-iid-compat",[v1]:"fire-fcm",[y1]:"fire-fcm-compat",[_1]:"fire-perf",[w1]:"fire-perf-compat",[E1]:"fire-rc",[S1]:"fire-rc-compat",[T1]:"fire-gcs",[I1]:"fire-gcs-compat",[C1]:"fire-fst",[A1]:"fire-fst-compat",[x1]:"fire-vertex","fire-js":"fire-js",[k1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new Map,R1=new Map,Ah=new Map;function kg(t,e){try{t.container.addComponent(e)}catch(n){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function li(t){const e=t.name;if(Ah.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;Ah.set(e,t);for(const n of Uc.values())kg(n,t);for(const n of R1.values())kg(n,t);return!0}function _u(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Tr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new Za("app","Firebase",j1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=N1;function m0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ns.create("bad-app-name",{appName:String(s)});if(n||(n=d0()),!n)throw Ns.create("no-options");const i=Uc.get(s);if(i){if(Ma(n,i.options)&&Ma(r,i.config))return i;throw Ns.create("duplicate-app",{appName:s})}const o=new FI(s);for(const u of Ah.values())o.addComponent(u);const c=new D1(n,r,o);return Uc.set(s,c),c}function g0(t=xh){const e=Uc.get(t);if(!e&&t===xh&&d0())return m0();if(!e)throw Ns.create("no-app",{appName:t});return e}function xr(t,e,n){var r;let s=(r=P1[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(c.join(" "));return}li(new Ds(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firebase-heartbeat-database",M1=1,Oa="firebase-heartbeat-store";let Id=null;function v0(){return Id||(Id=JI(b1,M1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ns.create("idb-open",{originalErrorMessage:t.message})})),Id}async function O1(t){try{const n=(await v0()).transaction(Oa),r=await n.objectStore(Oa).get(y0(t));return await n.done,r}catch(e){if(e instanceof jr)Yr.warn(e.message);else{const n=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yr.warn(n.message)}}}async function Ng(t,e){try{const r=(await v0()).transaction(Oa,"readwrite");await r.objectStore(Oa).put(e,y0(t)),await r.done}catch(n){if(n instanceof jr)Yr.warn(n.message);else{const r=Ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yr.warn(r.message)}}}function y0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=1024,V1=30*24*60*60*1e3;class F1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new z1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Pg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=V1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Pg(),{heartbeatsToSend:r,unsentEntries:s}=U1(this._heartbeatsCache.heartbeats),i=l0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Yr.warn(n),""}}}function Pg(){return new Date().toISOString().substring(0,10)}function U1(t,e=L1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Rg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class z1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AI()?kI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await O1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Rg(t){return l0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t){li(new Ds("platform-logger",e=>new t1(e),"PRIVATE")),li(new Ds("heartbeat",e=>new F1(e),"PRIVATE")),xr(Ch,Ag,t),xr(Ch,Ag,"esm2017"),xr("fire-js","")}B1("");var $1="firebase",q1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xr($1,q1,"app");var jg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ni,_0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function T(){}T.prototype=y.prototype,v.D=y.prototype,v.prototype=new T,v.prototype.constructor=v,v.C=function(S,P,D){for(var C=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)C[qe-2]=arguments[qe];return y.prototype[P].apply(S,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,T){T||(T=0);var S=Array(16);if(typeof y=="string")for(var P=0;16>P;++P)S[P]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(P=0;16>P;++P)S[P]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=v.g[0],T=v.g[1],P=v.g[2];var D=v.g[3],C=y+(D^T&(P^D))+S[0]+3614090360&4294967295;y=T+(C<<7&4294967295|C>>>25),C=D+(P^y&(T^P))+S[1]+3905402710&4294967295,D=y+(C<<12&4294967295|C>>>20),C=P+(T^D&(y^T))+S[2]+606105819&4294967295,P=D+(C<<17&4294967295|C>>>15),C=T+(y^P&(D^y))+S[3]+3250441966&4294967295,T=P+(C<<22&4294967295|C>>>10),C=y+(D^T&(P^D))+S[4]+4118548399&4294967295,y=T+(C<<7&4294967295|C>>>25),C=D+(P^y&(T^P))+S[5]+1200080426&4294967295,D=y+(C<<12&4294967295|C>>>20),C=P+(T^D&(y^T))+S[6]+2821735955&4294967295,P=D+(C<<17&4294967295|C>>>15),C=T+(y^P&(D^y))+S[7]+4249261313&4294967295,T=P+(C<<22&4294967295|C>>>10),C=y+(D^T&(P^D))+S[8]+1770035416&4294967295,y=T+(C<<7&4294967295|C>>>25),C=D+(P^y&(T^P))+S[9]+2336552879&4294967295,D=y+(C<<12&4294967295|C>>>20),C=P+(T^D&(y^T))+S[10]+4294925233&4294967295,P=D+(C<<17&4294967295|C>>>15),C=T+(y^P&(D^y))+S[11]+2304563134&4294967295,T=P+(C<<22&4294967295|C>>>10),C=y+(D^T&(P^D))+S[12]+1804603682&4294967295,y=T+(C<<7&4294967295|C>>>25),C=D+(P^y&(T^P))+S[13]+4254626195&4294967295,D=y+(C<<12&4294967295|C>>>20),C=P+(T^D&(y^T))+S[14]+2792965006&4294967295,P=D+(C<<17&4294967295|C>>>15),C=T+(y^P&(D^y))+S[15]+1236535329&4294967295,T=P+(C<<22&4294967295|C>>>10),C=y+(P^D&(T^P))+S[1]+4129170786&4294967295,y=T+(C<<5&4294967295|C>>>27),C=D+(T^P&(y^T))+S[6]+3225465664&4294967295,D=y+(C<<9&4294967295|C>>>23),C=P+(y^T&(D^y))+S[11]+643717713&4294967295,P=D+(C<<14&4294967295|C>>>18),C=T+(D^y&(P^D))+S[0]+3921069994&4294967295,T=P+(C<<20&4294967295|C>>>12),C=y+(P^D&(T^P))+S[5]+3593408605&4294967295,y=T+(C<<5&4294967295|C>>>27),C=D+(T^P&(y^T))+S[10]+38016083&4294967295,D=y+(C<<9&4294967295|C>>>23),C=P+(y^T&(D^y))+S[15]+3634488961&4294967295,P=D+(C<<14&4294967295|C>>>18),C=T+(D^y&(P^D))+S[4]+3889429448&4294967295,T=P+(C<<20&4294967295|C>>>12),C=y+(P^D&(T^P))+S[9]+568446438&4294967295,y=T+(C<<5&4294967295|C>>>27),C=D+(T^P&(y^T))+S[14]+3275163606&4294967295,D=y+(C<<9&4294967295|C>>>23),C=P+(y^T&(D^y))+S[3]+4107603335&4294967295,P=D+(C<<14&4294967295|C>>>18),C=T+(D^y&(P^D))+S[8]+1163531501&4294967295,T=P+(C<<20&4294967295|C>>>12),C=y+(P^D&(T^P))+S[13]+2850285829&4294967295,y=T+(C<<5&4294967295|C>>>27),C=D+(T^P&(y^T))+S[2]+4243563512&4294967295,D=y+(C<<9&4294967295|C>>>23),C=P+(y^T&(D^y))+S[7]+1735328473&4294967295,P=D+(C<<14&4294967295|C>>>18),C=T+(D^y&(P^D))+S[12]+2368359562&4294967295,T=P+(C<<20&4294967295|C>>>12),C=y+(T^P^D)+S[5]+4294588738&4294967295,y=T+(C<<4&4294967295|C>>>28),C=D+(y^T^P)+S[8]+2272392833&4294967295,D=y+(C<<11&4294967295|C>>>21),C=P+(D^y^T)+S[11]+1839030562&4294967295,P=D+(C<<16&4294967295|C>>>16),C=T+(P^D^y)+S[14]+4259657740&4294967295,T=P+(C<<23&4294967295|C>>>9),C=y+(T^P^D)+S[1]+2763975236&4294967295,y=T+(C<<4&4294967295|C>>>28),C=D+(y^T^P)+S[4]+1272893353&4294967295,D=y+(C<<11&4294967295|C>>>21),C=P+(D^y^T)+S[7]+4139469664&4294967295,P=D+(C<<16&4294967295|C>>>16),C=T+(P^D^y)+S[10]+3200236656&4294967295,T=P+(C<<23&4294967295|C>>>9),C=y+(T^P^D)+S[13]+681279174&4294967295,y=T+(C<<4&4294967295|C>>>28),C=D+(y^T^P)+S[0]+3936430074&4294967295,D=y+(C<<11&4294967295|C>>>21),C=P+(D^y^T)+S[3]+3572445317&4294967295,P=D+(C<<16&4294967295|C>>>16),C=T+(P^D^y)+S[6]+76029189&4294967295,T=P+(C<<23&4294967295|C>>>9),C=y+(T^P^D)+S[9]+3654602809&4294967295,y=T+(C<<4&4294967295|C>>>28),C=D+(y^T^P)+S[12]+3873151461&4294967295,D=y+(C<<11&4294967295|C>>>21),C=P+(D^y^T)+S[15]+530742520&4294967295,P=D+(C<<16&4294967295|C>>>16),C=T+(P^D^y)+S[2]+3299628645&4294967295,T=P+(C<<23&4294967295|C>>>9),C=y+(P^(T|~D))+S[0]+4096336452&4294967295,y=T+(C<<6&4294967295|C>>>26),C=D+(T^(y|~P))+S[7]+1126891415&4294967295,D=y+(C<<10&4294967295|C>>>22),C=P+(y^(D|~T))+S[14]+2878612391&4294967295,P=D+(C<<15&4294967295|C>>>17),C=T+(D^(P|~y))+S[5]+4237533241&4294967295,T=P+(C<<21&4294967295|C>>>11),C=y+(P^(T|~D))+S[12]+1700485571&4294967295,y=T+(C<<6&4294967295|C>>>26),C=D+(T^(y|~P))+S[3]+2399980690&4294967295,D=y+(C<<10&4294967295|C>>>22),C=P+(y^(D|~T))+S[10]+4293915773&4294967295,P=D+(C<<15&4294967295|C>>>17),C=T+(D^(P|~y))+S[1]+2240044497&4294967295,T=P+(C<<21&4294967295|C>>>11),C=y+(P^(T|~D))+S[8]+1873313359&4294967295,y=T+(C<<6&4294967295|C>>>26),C=D+(T^(y|~P))+S[15]+4264355552&4294967295,D=y+(C<<10&4294967295|C>>>22),C=P+(y^(D|~T))+S[6]+2734768916&4294967295,P=D+(C<<15&4294967295|C>>>17),C=T+(D^(P|~y))+S[13]+1309151649&4294967295,T=P+(C<<21&4294967295|C>>>11),C=y+(P^(T|~D))+S[4]+4149444226&4294967295,y=T+(C<<6&4294967295|C>>>26),C=D+(T^(y|~P))+S[11]+3174756917&4294967295,D=y+(C<<10&4294967295|C>>>22),C=P+(y^(D|~T))+S[2]+718787259&4294967295,P=D+(C<<15&4294967295|C>>>17),C=T+(D^(P|~y))+S[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,v.g[2]=v.g[2]+P&4294967295,v.g[3]=v.g[3]+D&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var T=y-this.blockSize,S=this.B,P=this.h,D=0;D<y;){if(P==0)for(;D<=T;)s(this,v,D),D+=this.blockSize;if(typeof v=="string"){for(;D<y;)if(S[P++]=v.charCodeAt(D++),P==this.blockSize){s(this,S),P=0;break}}else for(;D<y;)if(S[P++]=v[D++],P==this.blockSize){s(this,S),P=0;break}}this.h=P,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var T=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=T&255,T/=256;for(this.u(v),v=Array(16),y=T=0;4>y;++y)for(var S=0;32>S;S+=8)v[T++]=this.g[y]>>>S&255;return v};function i(v,y){var T=c;return Object.prototype.hasOwnProperty.call(T,v)?T[v]:T[v]=y(v)}function o(v,y){this.h=y;for(var T=[],S=!0,P=v.length-1;0<=P;P--){var D=v[P]|0;S&&D==y||(T[P]=D,S=!1)}this.g=T}var c={};function u(v){return-128<=v&&128>v?i(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return g;if(0>v)return F(h(-v));for(var y=[],T=1,S=0;v>=T;S++)y[S]=v/T|0,T*=4294967296;return new o(y,0)}function p(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return F(p(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(y,8)),S=g,P=0;P<v.length;P+=8){var D=Math.min(8,v.length-P),C=parseInt(v.substring(P,P+D),y);8>D?(D=h(Math.pow(y,D)),S=S.j(D).add(h(C))):(S=S.j(T),S=S.add(h(C)))}return S}var g=u(0),_=u(1),R=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-F(this).m();for(var v=0,y=1,T=0;T<this.g.length;T++){var S=this.i(T);v+=(0<=S?S:4294967296+S)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b(this))return"0";if(N(this))return"-"+F(this).toString(v);for(var y=h(Math.pow(v,6)),T=this,S="";;){var P=O(T,y).g;T=k(T,P.j(y));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(v);if(T=P,b(T))return D+S;for(;6>D.length;)D="0"+D;S=D+S}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function b(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function N(v){return v.h==-1}t.l=function(v){return v=k(this,v),N(v)?-1:b(v)?0:1};function F(v){for(var y=v.g.length,T=[],S=0;S<y;S++)T[S]=~v.g[S];return new o(T,~v.h).add(_)}t.abs=function(){return N(this)?F(this):this},t.add=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],S=0,P=0;P<=y;P++){var D=S+(this.i(P)&65535)+(v.i(P)&65535),C=(D>>>16)+(this.i(P)>>>16)+(v.i(P)>>>16);S=C>>>16,D&=65535,C&=65535,T[P]=C<<16|D}return new o(T,T[T.length-1]&-2147483648?-1:0)};function k(v,y){return v.add(F(y))}t.j=function(v){if(b(this)||b(v))return g;if(N(this))return N(v)?F(this).j(F(v)):F(F(this).j(v));if(N(v))return F(this.j(F(v)));if(0>this.l(R)&&0>v.l(R))return h(this.m()*v.m());for(var y=this.g.length+v.g.length,T=[],S=0;S<2*y;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var P=0;P<v.g.length;P++){var D=this.i(S)>>>16,C=this.i(S)&65535,qe=v.i(P)>>>16,Ye=v.i(P)&65535;T[2*S+2*P]+=C*Ye,w(T,2*S+2*P),T[2*S+2*P+1]+=D*Ye,w(T,2*S+2*P+1),T[2*S+2*P+1]+=C*qe,w(T,2*S+2*P+1),T[2*S+2*P+2]+=D*qe,w(T,2*S+2*P+2)}for(S=0;S<y;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=y;S<2*y;S++)T[S]=0;return new o(T,0)};function w(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function A(v,y){this.g=v,this.h=y}function O(v,y){if(b(y))throw Error("division by zero");if(b(v))return new A(g,g);if(N(v))return y=O(F(v),y),new A(F(y.g),F(y.h));if(N(y))return y=O(v,F(y)),new A(F(y.g),y.h);if(30<v.g.length){if(N(v)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var T=_,S=y;0>=S.l(v);)T=B(T),S=B(S);var P=J(T,1),D=J(S,1);for(S=J(S,2),T=J(T,2);!b(S);){var C=D.add(S);0>=C.l(v)&&(P=P.add(T),D=C),S=J(S,1),T=J(T,1)}return y=k(v,P.j(y)),new A(P,y)}for(P=g;0<=v.l(y);){for(T=Math.max(1,Math.floor(v.m()/y.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),D=h(T),C=D.j(y);N(C)||0<C.l(v);)T-=S,D=h(T),C=D.j(y);b(D)&&(D=_),P=P.add(D),v=k(v,C)}return new A(P,v)}t.A=function(v){return O(this,v).h},t.and=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)&v.i(S);return new o(T,this.h&v.h)},t.or=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)|v.i(S);return new o(T,this.h|v.h)},t.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)^v.i(S);return new o(T,this.h^v.h)};function B(v){for(var y=v.g.length+1,T=[],S=0;S<y;S++)T[S]=v.i(S)<<1|v.i(S-1)>>>31;return new o(T,v.h)}function J(v,y){var T=y>>5;y%=32;for(var S=v.g.length-T,P=[],D=0;D<S;D++)P[D]=0<y?v.i(D+T)>>>y|v.i(D+T+1)<<32-y:v.i(D+T);return new o(P,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,ni=o}).apply(typeof jg<"u"?jg:typeof self<"u"?self:typeof window<"u"?window:{});var Bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var w0,Zo,E0,ac,kh,S0,T0,I0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bl=="object"&&Bl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var E=0;E<a.length-1;E++){var q=a[E];if(!(q in f))break e;f=f[q]}a=a[a.length-1],E=f[a],d=d(E),d!=E&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,E=!1,q={next:function(){if(!E&&f<a.length){var Y=f++;return{value:d(Y,a[Y]),done:!1}}return E=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function g(a,d,f){if(!a)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,E),a.apply(d,q)}}return function(){return a.apply(d,arguments)}}function _(a,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,_.apply(null,arguments)}function R(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var E=f.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function b(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(E,q,Y){for(var fe=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)fe[Et-2]=arguments[Et];return d.prototype[q].apply(E,fe)}}function N(a){const d=a.length;if(0<d){const f=Array(d);for(let E=0;E<d;E++)f[E]=a[E];return f}return[]}function F(a,d){for(let f=1;f<arguments.length;f++){const E=arguments[f];if(u(E)){const q=a.length||0,Y=E.length||0;a.length=q+Y;for(let fe=0;fe<Y;fe++)a[q+fe]=E[fe]}else a.push(E)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function O(a){return O[" "](a),a}O[" "]=function(){};var B=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function J(a,d,f){for(const E in a)d.call(f,a[E],E,a)}function v(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function y(a){const d={};for(const f in a)d[f]=a[f];return d}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,d){let f,E;for(let q=1;q<arguments.length;q++){E=arguments[q];for(f in E)a[f]=E[f];for(let Y=0;Y<T.length;Y++)f=T[Y],Object.prototype.hasOwnProperty.call(E,f)&&(a[f]=E[f])}}function P(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function D(a){c.setTimeout(()=>{throw a},0)}function C(){var a=ee;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class qe{constructor(){this.h=this.g=null}add(d,f){const E=Ye.get();E.set(d,f),this.h?this.h.next=E:this.g=E,this.h=E}}var Ye=new k(()=>new vt,a=>a.reset());class vt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ct,L=!1,ee=new qe,ie=()=>{const a=c.Promise.resolve(void 0);Ct=()=>{a.then(ve)}};var ve=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){D(f)}var d=Ye;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}L=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var yt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function nt(a,d){if(Re.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(B){e:{try{O(d.nodeName);var q=!0;break e}catch{}q=!1}q||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ct[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&nt.aa.h.call(this)}}b(nt,Re);var ct={2:"touch",3:"pen",4:"mouse"};nt.prototype.h=function(){nt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),ue=0;function ke(a,d,f,E,q){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!E,this.ha=q,this.key=++ue,this.da=this.fa=!1}function Me(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ue(a){this.src=a,this.g={},this.h=0}Ue.prototype.add=function(a,d,f,E,q){var Y=a.toString();a=this.g[Y],a||(a=this.g[Y]=[],this.h++);var fe=Bt(a,d,E,q);return-1<fe?(d=a[fe],f||(d.fa=!1)):(d=new ke(d,this.src,Y,!!E,q),d.fa=f,a.push(d)),d};function it(a,d){var f=d.type;if(f in a.g){var E=a.g[f],q=Array.prototype.indexOf.call(E,d,void 0),Y;(Y=0<=q)&&Array.prototype.splice.call(E,q,1),Y&&(Me(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Bt(a,d,f,E){for(var q=0;q<a.length;++q){var Y=a[q];if(!Y.da&&Y.listener==d&&Y.capture==!!f&&Y.ha==E)return q}return-1}var $t="closure_lm_"+(1e6*Math.random()|0),qt={};function _t(a,d,f,E,q){if(Array.isArray(d)){for(var Y=0;Y<d.length;Y++)_t(a,d[Y],f,E,q);return null}return f=G(f),a&&a[te]?a.K(d,f,h(E)?!!E.capture:!1,q):pt(a,d,f,!1,E,q)}function pt(a,d,f,E,q,Y){if(!d)throw Error("Invalid event type");var fe=h(q)?!!q.capture:!!q,Et=j(a);if(Et||(a[$t]=Et=new Ue(a)),f=Et.add(d,f,E,fe,Y),f.proxy)return f;if(E=M(),f.proxy=E,E.src=a,E.listener=f,a.addEventListener)yt||(q=fe),q===void 0&&(q=!1),a.addEventListener(d.toString(),E,q);else if(a.attachEvent)a.attachEvent(se(d.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return f}function M(){function a(f){return d.call(a.src,a.listener,f)}const d=me;return a}function W(a,d,f,E,q){if(Array.isArray(d))for(var Y=0;Y<d.length;Y++)W(a,d[Y],f,E,q);else E=h(E)?!!E.capture:!!E,f=G(f),a&&a[te]?(a=a.i,d=String(d).toString(),d in a.g&&(Y=a.g[d],f=Bt(Y,f,E,q),-1<f&&(Me(Y[f]),Array.prototype.splice.call(Y,f,1),Y.length==0&&(delete a.g[d],a.h--)))):a&&(a=j(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Bt(d,f,E,q)),(f=-1<a?d[a]:null)&&V(f))}function V(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[te])it(d.i,a);else{var f=a.type,E=a.proxy;d.removeEventListener?d.removeEventListener(f,E,a.capture):d.detachEvent?d.detachEvent(se(f),E):d.addListener&&d.removeListener&&d.removeListener(E),(f=j(d))?(it(f,a),f.h==0&&(f.src=null,d[$t]=null)):Me(a)}}}function se(a){return a in qt?qt[a]:qt[a]="on"+a}function me(a,d){if(a.da)a=!0;else{d=new nt(d,this);var f=a.listener,E=a.ha||a.src;a.fa&&V(a),a=f.call(E,d)}return a}function j(a){return a=a[$t],a instanceof Ue?a:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function G(a){return typeof a=="function"?a:(a[Z]||(a[Z]=function(d){return a.handleEvent(d)}),a[Z])}function pe(){Se.call(this),this.i=new Ue(this),this.M=this,this.F=null}b(pe,Se),pe.prototype[te]=!0,pe.prototype.removeEventListener=function(a,d,f,E){W(this,a,d,f,E)};function xe(a,d){var f,E=a.F;if(E)for(f=[];E;E=E.F)f.push(E);if(a=a.M,E=d.type||d,typeof d=="string")d=new Re(d,a);else if(d instanceof Re)d.target=d.target||a;else{var q=d;d=new Re(E,a),S(d,q)}if(q=!0,f)for(var Y=f.length-1;0<=Y;Y--){var fe=d.g=f[Y];q=_e(fe,E,!0,d)&&q}if(fe=d.g=a,q=_e(fe,E,!0,d)&&q,q=_e(fe,E,!1,d)&&q,f)for(Y=0;Y<f.length;Y++)fe=d.g=f[Y],q=_e(fe,E,!1,d)&&q}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],E=0;E<f.length;E++)Me(f[E]);delete a.g[d],a.h--}}this.F=null},pe.prototype.K=function(a,d,f,E){return this.i.add(String(a),d,!1,f,E)},pe.prototype.L=function(a,d,f,E){return this.i.add(String(a),d,!0,f,E)};function _e(a,d,f,E){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var q=!0,Y=0;Y<d.length;++Y){var fe=d[Y];if(fe&&!fe.da&&fe.capture==f){var Et=fe.listener,on=fe.ha||fe.src;fe.fa&&it(a.i,fe),q=Et.call(on,E)!==!1&&q}}return q&&!E.defaultPrevented}function ze(a,d,f){if(typeof a=="function")f&&(a=_(a,f));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function De(a){a.g=ze(()=>{a.g=null,a.i&&(a.i=!1,De(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class ot extends Se{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:De(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ht(a){Se.call(this),this.h=a,this.g={}}b(ht,Se);var Ne=[];function Xe(a){J(a.g,function(d,f){this.g.hasOwnProperty(f)&&V(d)},a),a.g={}}ht.prototype.N=function(){ht.aa.N.call(this),Xe(this)},ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var m=c.JSON.stringify,x=c.JSON.parse,I=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function H(){}H.prototype.h=null;function he(a){return a.h||(a.h=a.i())}function Le(){}var We={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zt(){Re.call(this,"d")}b(Zt,Re);function wt(){Re.call(this,"c")}b(wt,Re);var rt={},Be=null;function He(){return Be=Be||new pe}rt.La="serverreachability";function $(a){Re.call(this,rt.La,a)}b($,Re);function Te(a){const d=He();xe(d,new $(d))}rt.STAT_EVENT="statevent";function Ae(a,d){Re.call(this,rt.STAT_EVENT,a),this.stat=d}b(Ae,Re);function ge(a){const d=He();xe(d,new Ae(d,a))}rt.Ma="timingevent";function U(a,d){Re.call(this,rt.Ma,a),this.size=d}b(U,Re);function z(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function K(){this.g=!0}K.prototype.xa=function(){this.g=!1};function ce(a,d,f,E,q,Y){a.info(function(){if(a.g)if(Y)for(var fe="",Et=Y.split("&"),on=0;on<Et.length;on++){var at=Et[on].split("=");if(1<at.length){var vn=at[0];at=at[1];var yn=vn.split("_");fe=2<=yn.length&&yn[1]=="type"?fe+(vn+"="+at+"&"):fe+(vn+"=redacted&")}}else fe=null;else fe=Y;return"XMLHTTP REQ ("+E+") [attempt "+q+"]: "+d+`
`+f+`
`+fe})}function oe(a,d,f,E,q,Y,fe){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+q+"]: "+d+`
`+f+`
`+Y+" "+fe})}function de(a,d,f,E){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+ne(a,f)+(E?" "+E:"")})}function X(a,d){a.info(function(){return"TIMEOUT: "+d})}K.prototype.info=function(){};function ne(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var E=f[a];if(!(2>E.length)){var q=E[1];if(Array.isArray(q)&&!(1>q.length)){var Y=q[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var fe=1;fe<q.length;fe++)q[fe]=""}}}}return m(f)}catch{return d}}var ye={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},je={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$e;function ut(){}b(ut,H),ut.prototype.g=function(){return new XMLHttpRequest},ut.prototype.i=function(){return{}},$e=new ut;function Ke(a,d,f,E){this.j=a,this.i=d,this.l=f,this.R=E||1,this.U=new ht(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new An}function An(){this.i=null,this.g="",this.h=!1}var Pt={},mn={};function sn(a,d,f){a.L=1,a.v=$s(lr(d)),a.m=f,a.P=!0,Zn(a,null)}function Zn(a,d){a.F=Date.now(),St(a),a.A=lr(a.v);var f=a.A,E=a.R;Array.isArray(E)||(E=[String(E)]),Hp(f.i,"t",E),a.C=0,f=a.j.J,a.h=new An,a.g=cm(a.j,f?d:null,!a.m),0<a.O&&(a.M=new ot(_(a.Y,a,a.g),a.O)),d=a.U,f=a.g,E=a.ca;var q="readystatechange";Array.isArray(q)||(q&&(Ne[0]=q.toString()),q=Ne);for(var Y=0;Y<q.length;Y++){var fe=_t(f,q[Y],E||d.handleEvent,!1,d.h||d);if(!fe)break;d.g[fe.key]=fe}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Te(),ce(a.i,a.u,a.A,a.l,a.R,a.m)}Ke.prototype.ca=function(a){a=a.target;const d=this.M;d&&br(a)==3?d.j():this.Y(a)},Ke.prototype.Y=function(a){try{if(a==this.g)e:{const yn=br(this.g);var d=this.g.Ba();const Ci=this.g.Z();if(!(3>yn)&&(yn!=3||this.g&&(this.h.h||this.g.oa()||Jp(this.g)))){this.J||yn!=4||d==7||(d==8||0>=Ci?Te(3):Te(2)),gn(this);var f=this.g.Z();this.X=f;t:if(en(this)){var E=Jp(this.g);a="";var q=E.length,Y=br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),Gt(this);var fe="";break t}this.h.i=new c.TextDecoder}for(d=0;d<q;d++)this.h.h=!0,a+=this.h.i.decode(E[d],{stream:!(Y&&d==q-1)});E.length=0,this.h.g+=a,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=f==200,oe(this.i,this.u,this.A,this.l,this.R,yn,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,on=this.g;if((Et=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Et)){var at=Et;break t}}at=null}if(f=at)de(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dt(this,f);else{this.o=!1,this.s=3,ge(12),kn(this),Gt(this);break e}}if(this.P){f=!0;let cr;for(;!this.J&&this.C<fe.length;)if(cr=xt(this,fe),cr==mn){yn==4&&(this.s=4,ge(14),f=!1),de(this.i,this.l,null,"[Incomplete Response]");break}else if(cr==Pt){this.s=4,ge(15),de(this.i,this.l,fe,"[Invalid Chunk]"),f=!1;break}else de(this.i,this.l,cr,null),dt(this,cr);if(en(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yn!=4||fe.length!=0||this.h.h||(this.s=1,ge(16),f=!1),this.o=this.o&&f,!f)de(this.i,this.l,fe,"[Invalid Chunked Response]"),kn(this),Gt(this);else if(0<fe.length&&!this.W){this.W=!0;var vn=this.j;vn.g==this&&vn.ba&&!vn.M&&(vn.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Wu(vn),vn.M=!0,ge(11))}}else de(this.i,this.l,fe,null),dt(this,fe);yn==4&&kn(this),this.o&&!this.J&&(yn==4?im(this.j,this):(this.o=!1,St(this)))}else OE(this.g),f==400&&0<fe.indexOf("Unknown SID")?(this.s=3,ge(12)):(this.s=0,ge(13)),kn(this),Gt(this)}}}catch{}finally{}};function en(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function xt(a,d){var f=a.C,E=d.indexOf(`
`,f);return E==-1?mn:(f=Number(d.substring(f,E)),isNaN(f)?Pt:(E+=1,E+f>d.length?mn:(d=d.slice(E,E+f),a.C=E+f,d)))}Ke.prototype.cancel=function(){this.J=!0,kn(this)};function St(a){a.S=Date.now()+a.I,On(a,a.I)}function On(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=z(_(a.ba,a),d)}function gn(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Ke.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(X(this.i,this.A),this.L!=2&&(Te(),ge(17)),kn(this),this.s=2,Gt(this)):On(this,this.S-a)};function Gt(a){a.j.G==0||a.J||im(a.j,a)}function kn(a){gn(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Xe(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function dt(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Ei(f.h,a))){if(!a.K&&Ei(f.h,a)&&f.G==3){try{var E=f.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var q=E;if(q[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Sl(f),wl(f);else break e;Hu(f),ge(18)}}else f.za=q[1],0<f.za-f.T&&37500>q[2]&&f.F&&f.v==0&&!f.C&&(f.C=z(_(f.Za,f),6e3));if(1>=ko(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else qs(f,11)}else if((a.K||f.g==a)&&Sl(f),!w(d))for(q=f.Da.g.parse(d),d=0;d<q.length;d++){let at=q[d];if(f.T=at[0],at=at[1],f.G==2)if(at[0]=="c"){f.K=at[1],f.ia=at[2];const vn=at[3];vn!=null&&(f.la=vn,f.j.info("VER="+f.la));const yn=at[4];yn!=null&&(f.Aa=yn,f.j.info("SVER="+f.Aa));const Ci=at[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(E=1.5*Ci,f.L=E,f.j.info("backChannelRequestTimeoutMs_="+E)),E=f;const cr=a.g;if(cr){const Il=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var Y=E.h;Y.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(No(Y,Y.h),Y.h=null))}if(E.D){const Ku=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ku&&(E.ya=Ku,ft(E.I,E.D,Ku))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),E=f;var fe=a;if(E.qa=lm(E,E.J?E.ia:null,E.W),fe.K){Po(E.h,fe);var Et=fe,on=E.L;on&&(Et.I=on),Et.B&&(gn(Et),St(Et)),E.g=fe}else rm(E);0<f.i.length&&El(f)}else at[0]!="stop"&&at[0]!="close"||qs(f,7);else f.G==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?qs(f,7):qu(f):at[0]!="noop"&&f.l&&f.l.ta(at),f.v=0)}}Te(4)}catch{}}var ns=class{constructor(a,d){this.g=a,this.map=d}};function wi(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fl(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ko(a){return a.h?1:a.g?a.g.size:0}function Ei(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function No(a,d){a.g?a.g.add(d):a.h=d}function Po(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}wi.prototype.cancel=function(){if(this.i=zu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function zu(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return N(a.i)}function pl(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,E=0;E<f;E++)d.push(a[E]);return d}d=[],f=0;for(E in a)d[f++]=a[E];return d}function Ro(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const E in a)d[f++]=E;return d}}}function ml(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=Ro(a),E=pl(a),q=E.length,Y=0;Y<q;Y++)d.call(void 0,E[Y],f&&f[Y],a)}var gl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bu(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var E=a[f].indexOf("="),q=null;if(0<=E){var Y=a[f].substring(0,E);q=a[f].substring(E+1)}else Y=a[f];d(Y,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Dr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Dr){this.h=a.h,Si(this,a.j),this.o=a.o,this.g=a.g,Tt(this,a.s),this.l=a.l;var d=a.i,f=new Do;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Nn(this,f),this.m=a.m}else a&&(d=String(a).match(gl))?(this.h=!1,Si(this,d[1]||"",!0),this.o=rs(d[2]||""),this.g=rs(d[3]||"",!0),Tt(this,d[4]),this.l=rs(d[5]||"",!0),Nn(this,d[6]||"",!0),this.m=rs(d[7]||"")):(this.h=!1,this.i=new Do(null,this.h))}Dr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(jo(d,Bp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(jo(d,Bp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(jo(f,f.charAt(0)=="/"?xE:CE,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",jo(f,kE)),a.join("")};function lr(a){return new Dr(a)}function Si(a,d,f){a.j=f?rs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Tt(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Nn(a,d,f){d instanceof Do?(a.i=d,NE(a.i,a.h)):(f||(d=jo(d,AE)),a.i=new Do(d,a.h))}function ft(a,d,f){a.i.set(d,f)}function $s(a){return ft(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function rs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function jo(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,IE),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function IE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Bp=/[#\/\?@]/g,CE=/[#\?:]/g,xE=/[#\?]/g,AE=/[#\?@]/g,kE=/#/g;function Do(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function ss(a){a.g||(a.g=new Map,a.h=0,a.i&&Bu(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Do.prototype,t.add=function(a,d){ss(this),this.i=null,a=Ti(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function $p(a,d){ss(a),d=Ti(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function qp(a,d){return ss(a),d=Ti(a,d),a.g.has(d)}t.forEach=function(a,d){ss(this),this.g.forEach(function(f,E){f.forEach(function(q){a.call(d,q,E,this)},this)},this)},t.na=function(){ss(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let E=0;E<d.length;E++){const q=a[E];for(let Y=0;Y<q.length;Y++)f.push(d[E])}return f},t.V=function(a){ss(this);let d=[];if(typeof a=="string")qp(this,a)&&(d=d.concat(this.g.get(Ti(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return ss(this),this.i=null,a=Ti(this,a),qp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Hp(a,d,f){$p(a,d),0<f.length&&(a.i=null,a.g.set(Ti(a,d),N(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var E=d[f];const Y=encodeURIComponent(String(E)),fe=this.V(E);for(E=0;E<fe.length;E++){var q=Y;fe[E]!==""&&(q+="="+encodeURIComponent(String(fe[E]))),a.push(q)}}return this.i=a.join("&")};function Ti(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function NE(a,d){d&&!a.j&&(ss(a),a.i=null,a.g.forEach(function(f,E){var q=E.toLowerCase();E!=q&&($p(this,E),Hp(this,q,f))},a)),a.j=d}function PE(a,d){const f=new K;if(c.Image){const E=new Image;E.onload=R(is,f,"TestLoadImage: loaded",!0,d,E),E.onerror=R(is,f,"TestLoadImage: error",!1,d,E),E.onabort=R(is,f,"TestLoadImage: abort",!1,d,E),E.ontimeout=R(is,f,"TestLoadImage: timeout",!1,d,E),c.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else d(!1)}function RE(a,d){const f=new K,E=new AbortController,q=setTimeout(()=>{E.abort(),is(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:E.signal}).then(Y=>{clearTimeout(q),Y.ok?is(f,"TestPingServer: ok",!0,d):is(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(q),is(f,"TestPingServer: error",!1,d)})}function is(a,d,f,E,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),E(f)}catch{}}function jE(){this.g=new I}function DE(a,d,f){const E=f||"";try{ml(a,function(q,Y){let fe=q;h(q)&&(fe=m(q)),d.push(E+Y+"="+encodeURIComponent(fe))})}catch(q){throw d.push(E+"type="+encodeURIComponent("_badmap")),q}}function vl(a){this.l=a.Ub||null,this.j=a.eb||!1}b(vl,H),vl.prototype.g=function(){return new yl(this.l,this.j)},vl.prototype.i=function(a){return function(){return a}}({});function yl(a,d){pe.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(yl,pe),t=yl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Mo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Mo(this)),this.g&&(this.readyState=3,Mo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?bo(this):Mo(this),this.readyState==3&&Wp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,bo(this))},t.Qa=function(a){this.g&&(this.response=a,bo(this))},t.ga=function(){this.g&&bo(this)};function bo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Mo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Mo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Kp(a){let d="";return J(a,function(f,E){d+=E,d+=":",d+=f,d+=`\r
`}),d}function $u(a,d,f){e:{for(E in f){var E=!1;break e}E=!0}E||(f=Kp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):ft(a,d,f))}function Lt(a){pe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Lt,pe);var bE=/^https?$/i,ME=["POST","PUT"];t=Lt.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$e.g(),this.v=this.o?he(this.o):he($e),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(Y){Gp(this,Y);return}if(a=f||"",f=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var q in E)f.set(q,E[q]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const Y of E.keys())f.set(Y,E.get(Y));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(f.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ME,d,void 0))||E||q||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,fe]of f)this.g.setRequestHeader(Y,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xp(this),this.u=!0,this.g.send(a),this.u=!1}catch(Y){Gp(this,Y)}};function Gp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Qp(a),_l(a)}function Qp(a){a.A||(a.A=!0,xe(a,"complete"),xe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,xe(this,"complete"),xe(this,"abort"),_l(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_l(this,!0)),Lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yp(this):this.bb())},t.bb=function(){Yp(this)};function Yp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||br(a)!=4||a.Z()!=2)){if(a.u&&br(a)==4)ze(a.Ea,0,a);else if(xe(a,"readystatechange"),br(a)==4){a.h=!1;try{const fe=a.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var E;if(E=fe===0){var q=String(a.D).match(gl)[1]||null;!q&&c.self&&c.self.location&&(q=c.self.location.protocol.slice(0,-1)),E=!bE.test(q?q.toLowerCase():"")}f=E}if(f)xe(a,"complete"),xe(a,"success");else{a.m=6;try{var Y=2<br(a)?a.g.statusText:""}catch{Y=""}a.l=Y+" ["+a.Z()+"]",Qp(a)}}finally{_l(a)}}}}function _l(a,d){if(a.g){Xp(a);const f=a.g,E=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||xe(a,"ready");try{f.onreadystatechange=E}catch{}}}function Xp(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function br(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<br(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),x(d)}};function Jp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function OE(a){const d={};a=(a.g&&2<=br(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(w(a[E]))continue;var f=P(a[E]);const q=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const Y=d[q]||[];d[q]=Y,Y.push(f)}v(d,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oo(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Zp(a){this.Aa=0,this.i=[],this.j=new K,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oo("baseRetryDelayMs",5e3,a),this.cb=Oo("retryDelaySeedMs",1e4,a),this.Wa=Oo("forwardChannelMaxRetries",2,a),this.wa=Oo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new wi(a&&a.concurrentRequestLimit),this.Da=new jE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,E){ge(0),this.W=a,this.H=d||{},f&&E!==void 0&&(this.H.OSID=f,this.H.OAID=E),this.F=this.X,this.I=lm(this,null,this.W),El(this)};function qu(a){if(em(a),a.G==3){var d=a.U++,f=lr(a.I);if(ft(f,"SID",a.K),ft(f,"RID",d),ft(f,"TYPE","terminate"),Lo(a,f),d=new Ke(a,a.j,d),d.L=2,d.v=$s(lr(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=cm(d.j,null),d.g.ea(d.v)),d.F=Date.now(),St(d)}am(a)}function wl(a){a.g&&(Wu(a),a.g.cancel(),a.g=null)}function em(a){wl(a),a.u&&(c.clearTimeout(a.u),a.u=null),Sl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function El(a){if(!fl(a.h)&&!a.s){a.s=!0;var d=a.Ga;Ct||ie(),L||(Ct(),L=!0),ee.add(d,a),a.B=0}}function LE(a,d){return ko(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=z(_(a.Ga,a,d),om(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const q=new Ke(this,this.j,a);let Y=this.o;if(this.S&&(Y?(Y=y(Y),S(Y,this.S)):Y=this.S),this.m!==null||this.O||(q.H=Y,Y=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var E=this.i[f];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=nm(this,q,d),f=lr(this.I),ft(f,"RID",a),ft(f,"CVER",22),this.D&&ft(f,"X-HTTP-Session-Id",this.D),Lo(this,f),Y&&(this.O?d="headers="+encodeURIComponent(String(Kp(Y)))+"&"+d:this.m&&$u(f,this.m,Y)),No(this.h,q),this.Ua&&ft(f,"TYPE","init"),this.P?(ft(f,"$req",d),ft(f,"SID","null"),q.T=!0,sn(q,f,null)):sn(q,f,d),this.G=2}}else this.G==3&&(a?tm(this,a):this.i.length==0||fl(this.h)||tm(this))};function tm(a,d){var f;d?f=d.l:f=a.U++;const E=lr(a.I);ft(E,"SID",a.K),ft(E,"RID",f),ft(E,"AID",a.T),Lo(a,E),a.m&&a.o&&$u(E,a.m,a.o),f=new Ke(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=nm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),No(a.h,f),sn(f,E,d)}function Lo(a,d){a.H&&J(a.H,function(f,E){ft(d,E,f)}),a.l&&ml({},function(f,E){ft(d,E,f)})}function nm(a,d,f){f=Math.min(a.i.length,f);var E=a.l?_(a.l.Na,a.l,a):null;e:{var q=a.i;let Y=-1;for(;;){const fe=["count="+f];Y==-1?0<f?(Y=q[0].g,fe.push("ofs="+Y)):Y=0:fe.push("ofs="+Y);let Et=!0;for(let on=0;on<f;on++){let at=q[on].g;const vn=q[on].map;if(at-=Y,0>at)Y=Math.max(0,q[on].g-100),Et=!1;else try{DE(vn,fe,"req"+at+"_")}catch{E&&E(vn)}}if(Et){E=fe.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,E}function rm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Ct||ie(),L||(Ct(),L=!0),ee.add(d,a),a.v=0}}function Hu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=z(_(a.Fa,a),om(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,sm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=z(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ge(10),wl(this),sm(this))};function Wu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function sm(a){a.g=new Ke(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=lr(a.qa);ft(d,"RID","rpc"),ft(d,"SID",a.K),ft(d,"AID",a.T),ft(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&ft(d,"TO",a.ja),ft(d,"TYPE","xmlhttp"),Lo(a,d),a.m&&a.o&&$u(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=$s(lr(d)),f.m=null,f.P=!0,Zn(f,a)}t.Za=function(){this.C!=null&&(this.C=null,wl(this),Hu(this),ge(19))};function Sl(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function im(a,d){var f=null;if(a.g==d){Sl(a),Wu(a),a.g=null;var E=2}else if(Ei(a.h,d))f=d.D,Po(a.h,d),E=1;else return;if(a.G!=0){if(d.o)if(E==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var q=a.B;E=He(),xe(E,new U(E,f)),El(a)}else rm(a);else if(q=d.s,q==3||q==0&&0<d.X||!(E==1&&LE(a,d)||E==2&&Hu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),q){case 1:qs(a,5);break;case 4:qs(a,10);break;case 3:qs(a,6);break;default:qs(a,2)}}}function om(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function qs(a,d){if(a.j.info("Error code "+d),d==2){var f=_(a.fb,a),E=a.Xa;const q=!E;E=new Dr(E||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Si(E,"https"),$s(E),q?PE(E.toString(),f):RE(E.toString(),f)}else ge(2);a.G=0,a.l&&a.l.sa(d),am(a),em(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ge(2)):(this.j.info("Failed to ping google.com"),ge(1))};function am(a){if(a.G=0,a.ka=[],a.l){const d=zu(a.h);(d.length!=0||a.i.length!=0)&&(F(a.ka,d),F(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function lm(a,d,f){var E=f instanceof Dr?lr(f):new Dr(f);if(E.g!="")d&&(E.g=d+"."+E.g),Tt(E,E.s);else{var q=c.location;E=q.protocol,d=d?d+"."+q.hostname:q.hostname,q=+q.port;var Y=new Dr(null);E&&Si(Y,E),d&&(Y.g=d),q&&Tt(Y,q),f&&(Y.l=f),E=Y}return f=a.D,d=a.ya,f&&d&&ft(E,f,d),ft(E,"VER",a.la),Lo(a,E),E}function cm(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Lt(new vl({eb:f})):new Lt(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function um(){}t=um.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(a,d){return new qn(a,d)};function qn(a,d){pe.call(this),this.g=new Zp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ii(this)}b(qn,pe),qn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){qu(this.g)},qn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=m(a),a=f);d.i.push(new ns(d.Ya++,a)),d.G==3&&El(d)},qn.prototype.N=function(){this.g.l=null,delete this.j,qu(this.g),delete this.g,qn.aa.N.call(this)};function dm(a){Zt.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}b(dm,Zt);function hm(){wt.call(this),this.status=1}b(hm,wt);function Ii(a){this.g=a}b(Ii,um),Ii.prototype.ua=function(){xe(this.g,"a")},Ii.prototype.ta=function(a){xe(this.g,new dm(a))},Ii.prototype.sa=function(a){xe(this.g,new hm)},Ii.prototype.ra=function(){xe(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,I0=function(){return new Tl},T0=function(){return He()},S0=rt,kh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ye.NO_ERROR=0,ye.TIMEOUT=8,ye.HTTP_ERROR=6,ac=ye,je.COMPLETE="complete",E0=je,Le.EventType=We,We.OPEN="a",We.CLOSE="b",We.ERROR="c",We.MESSAGE="d",pe.prototype.listen=pe.prototype.K,Zo=Le,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,w0=Lt}).apply(typeof Bl<"u"?Bl:typeof self<"u"?self:typeof window<"u"?window:{});const Dg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new qf("@firebase/firestore");function Wo(){return ci.logLevel}function Ce(t,...e){if(ci.logLevel<=Ze.DEBUG){const n=e.map(Wf);ci.debug(`Firestore (${Io}): ${t}`,...n)}}function Xr(t,...e){if(ci.logLevel<=Ze.ERROR){const n=e.map(Wf);ci.error(`Firestore (${Io}): ${t}`,...n)}}function La(t,...e){if(ci.logLevel<=Ze.WARN){const n=e.map(Wf);ci.warn(`Firestore (${Io}): ${t}`,...n)}}function Wf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t="Unexpected state"){const e=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: `+t;throw Xr(e),new Error(e)}function gt(t,e){t||Oe()}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ln.UNAUTHENTICATED))}shutdown(){}}class K1{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){gt(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string"),new H1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string"),new Ln(e)}}class G1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Q1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new G1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Y1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){gt(this.o===void 0);const r=i=>{i.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(gt(typeof n.token=="string"),this.R=n.token,new Y1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=J1(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function lt(t,e){return t<e?-1:t>e?1:0}function uo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ee(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Jt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Jt(0,0))}static max(){return new Ve(new Jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n,r){n===void 0?n=0:n>e.length&&Oe(),r===void 0?r=e.length-n:r>e.length-n&&Oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Va.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Va?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class kt extends Va{construct(e,n,r){return new kt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new kt(n)}static emptyPath(){return new kt([])}}const Z1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Va{construct(e,n,r){return new un(e,n,r)}static isValidIdentifier(e){return Z1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new un(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Ee(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ee(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ee(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new Ee(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(n)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(kt.fromString(e))}static fromName(e){return new Pe(kt.fromString(e).popFirst(5))}static empty(){return new Pe(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new kt(e.slice()))}}function eC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ve.fromTimestamp(r===1e9?new Jt(n+1,0):new Jt(n,r));return new bs(s,Pe.empty(),e)}function tC(t){return new bs(t.readTime,t.key,-1)}class bs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new bs(Ve.min(),Pe.empty(),-1)}static max(){return new bs(Ve.max(),Pe.empty(),-1)}}function nC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Pe.comparator(t.documentKey,e.documentKey),n!==0?n:lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==rC)throw t;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.reject(n)}static resolve(e){return new ae((n,r)=>{n(e)})}static reject(e){return new ae((n,r)=>{r(e)})}static waitFor(e){return new ae((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=ae.resolve(!1);for(const r of e)n=n.next(s=>s?ae.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ae((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++c,c===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new ae((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function iC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Kf.oe=-1;function wu(t){return t==null}function zc(t){return t===0&&1/t==-1/0}function oC(t){return typeof t=="number"&&Number.isInteger(t)&&!zc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function x0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.comparator=e,this.root=n||cn.EMPTY}insert(e,n){return new Ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $l(this.root,e,this.comparator,!1)}getReverseIterator(){return new $l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $l(this.root,e,this.comparator,!0)}}class $l{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??cn.RED,this.left=s??cn.EMPTY,this.right=i??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new cn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return cn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mg(this.data.getIterator())}getIteratorFrom(e){return new Mg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new hn(this.comparator);return n.data=e,n}}class Mg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new Kn([])}unionWith(e){let n=new hn(un.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new A0("Invalid base64 string: "+i):i}}(e);return new pn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const aC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ms(t){if(gt(!!t),typeof t=="string"){let e=0;const n=aC.exec(t);if(gt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ui(t){return typeof t=="string"?pn.fromBase64String(t):pn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qf(t){const e=t.mapValue.fields.__previous_value__;return Gf(e)?Qf(e):e}function Fa(t){const e=Ms(t.mapValue.fields.__local_write_time__.timestampValue);return new Jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n,r,s,i,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class Ua{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ua("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql={mapValue:{}};function di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gf(t)?4:uC(t)?9007199254740991:cC(t)?10:11:Oe()}function Rr(t,e){if(t===e)return!0;const n=di(t);if(n!==di(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fa(t).isEqual(Fa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ms(s.timestampValue),c=Ms(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ui(s.bytesValue).isEqual(ui(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ut(s.geoPointValue.latitude)===Ut(i.geoPointValue.latitude)&&Ut(s.geoPointValue.longitude)===Ut(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ut(s.integerValue)===Ut(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ut(s.doubleValue),c=Ut(i.doubleValue);return o===c?zc(o)===zc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return uo(t.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(bg(o)!==bg(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Rr(o[u],c[u])))return!1;return!0}(t,e);default:return Oe()}}function za(t,e){return(t.values||[]).find(n=>Rr(n,e))!==void 0}function ho(t,e){if(t===e)return 0;const n=di(t),r=di(e);if(n!==r)return lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Ut(i.integerValue||i.doubleValue),u=Ut(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Og(t.timestampValue,e.timestampValue);case 4:return Og(Fa(t),Fa(e));case 5:return lt(t.stringValue,e.stringValue);case 6:return function(i,o){const c=ui(i),u=ui(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=lt(c[h],u[h]);if(p!==0)return p}return lt(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=lt(Ut(i.latitude),Ut(o.latitude));return c!==0?c:lt(Ut(i.longitude),Ut(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,h,p;const g=i.fields||{},_=o.fields||{},R=(c=g.value)===null||c===void 0?void 0:c.arrayValue,b=(u=_.value)===null||u===void 0?void 0:u.arrayValue,N=lt(((h=R==null?void 0:R.values)===null||h===void 0?void 0:h.length)||0,((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:Lg(R,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ql.mapValue&&o===ql.mapValue)return 0;if(i===ql.mapValue)return 1;if(o===ql.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const _=lt(u[g],p[g]);if(_!==0)return _;const R=ho(c[u[g]],h[p[g]]);if(R!==0)return R}return lt(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Oe()}}function Og(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lt(t,e);const n=Ms(t),r=Ms(e),s=lt(n.seconds,r.seconds);return s!==0?s:lt(n.nanos,r.nanos)}function Lg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ho(n[s],r[s]);if(i)return i}return lt(n.length,r.length)}function fo(t){return Nh(t)}function Nh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ms(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ui(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Nh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Nh(n.fields[o])}`;return s+"}"}(t.mapValue):Oe()}function Vg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ph(t){return!!t&&"integerValue"in t}function Yf(t){return!!t&&"arrayValue"in t}function Fg(t){return!!t&&"nullValue"in t}function Ug(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lc(t){return!!t&&"mapValue"in t}function cC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(n)}setAll(e){let n=un.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=ha(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];lc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){gi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Fn(ha(this.value))}}function k0(t){const e=[];return gi(t.fields,(n,r)=>{const s=new un([n]);if(lc(r)){const i=k0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Tn(e,0,Ve.min(),Ve.min(),Ve.min(),Fn.empty(),0)}static newFoundDocument(e,n,r,s){return new Tn(e,1,n,Ve.min(),r,s,0)}static newNoDocument(e,n){return new Tn(e,2,n,Ve.min(),Ve.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new Tn(e,3,n,Ve.min(),Ve.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n){this.position=e,this.inclusive=n}}function zg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Pe.comparator(Pe.fromName(o.referenceValue),n.key):r=ho(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n="asc"){this.field=e,this.dir=n}}function dC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{}class Kt extends N0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fC(e,n,r):n==="array-contains"?new gC(e,r):n==="in"?new vC(e,r):n==="not-in"?new yC(e,r):n==="array-contains-any"?new _C(e,r):new Kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pC(e,r):new mC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ho(n,this.value)):n!==null&&di(this.value)===di(n)&&this.matchesComparison(ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends N0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new yr(e,n)}matches(e){return P0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function P0(t){return t.op==="and"}function R0(t){return hC(t)&&P0(t)}function hC(t){for(const e of t.filters)if(e instanceof yr)return!1;return!0}function Rh(t){if(t instanceof Kt)return t.field.canonicalString()+t.op.toString()+fo(t.value);if(R0(t))return t.filters.map(e=>Rh(e)).join(",");{const e=t.filters.map(n=>Rh(n)).join(",");return`${t.op}(${e})`}}function j0(t,e){return t instanceof Kt?function(r,s){return s instanceof Kt&&r.op===s.op&&r.field.isEqual(s.field)&&Rr(r.value,s.value)}(t,e):t instanceof yr?function(r,s){return s instanceof yr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&j0(o,s.filters[c]),!0):!1}(t,e):void Oe()}function D0(t){return t instanceof Kt?function(n){return`${n.field.canonicalString()} ${n.op} ${fo(n.value)}`}(t):t instanceof yr?function(n){return n.op.toString()+" {"+n.getFilters().map(D0).join(" ,")+"}"}(t):"Filter"}class fC extends Kt{constructor(e,n,r){super(e,n,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const n=Pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class pC extends Kt{constructor(e,n){super(e,"in",n),this.keys=b0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mC extends Kt{constructor(e,n){super(e,"not-in",n),this.keys=b0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function b0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class gC extends Kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yf(n)&&za(n.arrayValue,this.value)}}class vC extends Kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&za(this.value.arrayValue,n)}}class yC extends Kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!za(this.value.arrayValue,n)}}class _C extends Kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>za(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function $g(t,e=null,n=[],r=[],s=null,i=null,o=null){return new wC(t,e,n,r,s,i,o)}function Xf(t){const e=Fe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),wu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fo(r)).join(",")),e.ue=n}return e.ue}function Jf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!j0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bg(t.startAt,e.startAt)&&Bg(t.endAt,e.endAt)}function jh(t){return Pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function EC(t,e,n,r,s,i,o,c){return new rl(t,e,n,r,s,i,o,c)}function Eu(t){return new rl(t)}function qg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M0(t){return t.collectionGroup!==null}function fa(t){const e=Fe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new hn(un.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new $c(i,r))}),n.has(un.keyField().canonicalString())||e.ce.push(new $c(un.keyField(),r))}return e.ce}function Ar(t){const e=Fe(t);return e.le||(e.le=SC(e,fa(t))),e.le}function SC(t,e){if(t.limitType==="F")return $g(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $c(s.field,i)});const n=t.endAt?new Bc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bc(t.startAt.position,t.startAt.inclusive):null;return $g(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dh(t,e){const n=t.filters.concat([e]);return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bh(t,e,n){return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Su(t,e){return Jf(Ar(t),Ar(e))&&t.limitType===e.limitType}function O0(t){return`${Xf(Ar(t))}|lt:${t.limitType}`}function Ni(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>D0(s)).join(", ")}]`),wu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>fo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>fo(s)).join(",")),`Target(${r})`}(Ar(t))}; limitType=${t.limitType})`}function Tu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Pe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const h=zg(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,fa(r),s)||r.endAt&&!function(o,c,u){const h=zg(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,fa(r),s))}(t,e)}function TC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function L0(t){return(e,n)=>{let r=!1;for(const s of fa(t)){const i=IC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function IC(t,e,n){const r=t.field.isKeyField()?Pe.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),h=c.data.field(i);return u!==null&&h!==null?ho(u,h):Oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){gi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return x0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new Ot(Pe.comparator);function Jr(){return CC}const V0=new Ot(Pe.comparator);function ea(...t){let e=V0;for(const n of t)e=e.insert(n.key,n);return e}function F0(t){let e=V0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Js(){return pa()}function U0(){return pa()}function pa(){return new Co(t=>t.toString(),(t,e)=>t.isEqual(e))}const xC=new Ot(Pe.comparator),AC=new hn(Pe.comparator);function Je(...t){let e=AC;for(const n of t)e=e.add(n);return e}const kC=new hn(lt);function NC(){return kC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function z0(t){return{integerValue:""+t}}function PC(t,e){return oC(e)?z0(e):Zf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this._=void 0}}function RC(t,e,n){return t instanceof Ba?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Gf(i)&&(i=Qf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof $a?$0(t,e):t instanceof qa?q0(t,e):function(s,i){const o=B0(s,i),c=Hg(o)+Hg(s.Pe);return Ph(o)&&Ph(s.Pe)?z0(c):Zf(s.serializer,c)}(t,e)}function jC(t,e,n){return t instanceof $a?$0(t,e):t instanceof qa?q0(t,e):n}function B0(t,e){return t instanceof qc?function(r){return Ph(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ba extends Iu{}class $a extends Iu{constructor(e){super(),this.elements=e}}function $0(t,e){const n=H0(e);for(const r of t.elements)n.some(s=>Rr(s,r))||n.push(r);return{arrayValue:{values:n}}}class qa extends Iu{constructor(e){super(),this.elements=e}}function q0(t,e){let n=H0(e);for(const r of t.elements)n=n.filter(s=>!Rr(s,r));return{arrayValue:{values:n}}}class qc extends Iu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Hg(t){return Ut(t.integerValue||t.doubleValue)}function H0(t){return Yf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.field=e,this.transform=n}}function bC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof $a&&s instanceof $a||r instanceof qa&&s instanceof qa?uo(r.elements,s.elements,Rr):r instanceof qc&&s instanceof qc?Rr(r.Pe,s.Pe):r instanceof Ba&&s instanceof Ba}(t.transform,e.transform)}class MC{constructor(e,n){this.version=e,this.transformResults=n}}class ir{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cu{}function W0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ep(t.key,ir.none()):new sl(t.key,t.data,ir.none());{const n=t.data,r=Fn.empty();let s=new hn(un.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Us(t.key,r,new Kn(s.toArray()),ir.none())}}function OC(t,e,n){t instanceof sl?function(s,i,o){const c=s.value.clone(),u=Kg(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Us?function(s,i,o){if(!cc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Kg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(K0(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ma(t,e,n,r){return t instanceof sl?function(i,o,c,u){if(!cc(i.precondition,o))return c;const h=i.value.clone(),p=Gg(i.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Us?function(i,o,c,u){if(!cc(i.precondition,o))return c;const h=Gg(i.fieldTransforms,u,o),p=o.data;return p.setAll(K0(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,c){return cc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function LC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=B0(r.transform,s||null);i!=null&&(n===null&&(n=Fn.empty()),n.set(r.field,i))}return n||null}function Wg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&uo(r,s,(i,o)=>bC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sl extends Cu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Us extends Cu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function K0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Kg(t,e,n){const r=new Map;gt(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,jC(o,c,n[s]))}return r}function Gg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,RC(i,o,e))}return r}class ep extends Cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VC extends Cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&OC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=U0();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=W0(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Je())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,r)=>Wg(n,r))&&uo(this.baseMutations,e.baseMutations,(n,r)=>Wg(n,r))}}class tp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){gt(e.mutations.length===r.length);let s=function(){return xC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new tp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,tt;function BC(t){switch(t){default:return Oe();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function G0(t){if(t===void 0)return Xr("GRPC error has no .code"),re.UNKNOWN;switch(t){case Ht.OK:return re.OK;case Ht.CANCELLED:return re.CANCELLED;case Ht.UNKNOWN:return re.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return re.INTERNAL;case Ht.UNAVAILABLE:return re.UNAVAILABLE;case Ht.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Ht.NOT_FOUND:return re.NOT_FOUND;case Ht.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Ht.ABORTED:return re.ABORTED;case Ht.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Ht.DATA_LOSS:return re.DATA_LOSS;default:return Oe()}}(tt=Ht||(Ht={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new ni([4294967295,4294967295],0);function Qg(t){const e=$C().encode(t),n=new _0;return n.update(e),new Uint8Array(n.digest())}function Yg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ni([n,r],0),new ni([s,i],0)]}class np{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ta(`Invalid padding: ${n}`);if(r<0)throw new ta(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ta(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ta(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ni.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ni.fromNumber(r)));return s.compare(qC)===1&&(s=new ni([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Qg(e),[r,s]=Yg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new np(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=Qg(e),[r,s]=Yg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ta extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xu(Ve.min(),s,new Ot(lt),Jr(),Je())}}class il{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new il(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Q0{constructor(e,n){this.targetId=e,this.me=n}}class Y0{constructor(e,n,r=pn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Xg{constructor(){this.fe=0,this.ge=Zg(),this.pe=pn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Je(),n=Je(),r=Je();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Oe()}}),new il(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Zg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,gt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class HC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jr(),this.qe=Jg(),this.Qe=new Ot(lt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(jh(i))if(r===0){const o=new Pe(i.path);this.Ue(n,o,Tn.newNoDocument(o,Ve.min()))}else gt(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=ui(r).toUint8Array()}catch(u){if(u instanceof A0)return La("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new np(o,s,i)}catch(u){return La(u instanceof ta?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&jh(c.target)){const u=new Pe(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Tn.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Je();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new xu(e,n,this.Qe,this.ke,r);return this.ke=Jr(),this.qe=Jg(),this.Qe=new Ot(lt),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Xg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new hn(lt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ce("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Jg(){return new Ot(Pe.comparator)}function Zg(){return new Ot(Pe.comparator)}const WC={asc:"ASCENDING",desc:"DESCENDING"},KC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GC={and:"AND",or:"OR"};class QC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mh(t,e){return t.useProto3Json||wu(e)?e:{value:e}}function Hc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function X0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YC(t,e){return Hc(t,e.toTimestamp())}function kr(t){return gt(!!t),Ve.fromTimestamp(function(n){const r=Ms(n);return new Jt(r.seconds,r.nanos)}(t))}function rp(t,e){return Oh(t,e).canonicalString()}function Oh(t,e){const n=function(s){return new kt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function J0(t){const e=kt.fromString(t);return gt(rw(e)),e}function Lh(t,e){return rp(t.databaseId,e.path)}function Cd(t,e){const n=J0(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Pe(ew(n))}function Z0(t,e){return rp(t.databaseId,e)}function XC(t){const e=J0(t);return e.length===4?kt.emptyPath():ew(e)}function Vh(t){return new kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ew(t){return gt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ev(t,e,n){return{name:Lh(t,e),fields:n.value.mapValue.fields}}function JC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(gt(p===void 0||typeof p=="string"),pn.fromBase64String(p||"")):(gt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),pn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const p=h.code===void 0?re.UNKNOWN:G0(h.code);return new Ee(p,h.message||"")}(o);n=new Y0(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Cd(t,r.document.name),i=kr(r.document.updateTime),o=r.document.createTime?kr(r.document.createTime):Ve.min(),c=new Fn({mapValue:{fields:r.document.fields}}),u=Tn.newFoundDocument(s,i,o,c),h=r.targetIds||[],p=r.removedTargetIds||[];n=new uc(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Cd(t,r.document),i=r.readTime?kr(r.readTime):Ve.min(),o=Tn.newNoDocument(s,i),c=r.removedTargetIds||[];n=new uc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Cd(t,r.document),i=r.removedTargetIds||[];n=new uc([],i,s,null)}else{if(!("filter"in e))return Oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new zC(s,i),c=r.targetId;n=new Q0(c,o)}}return n}function ZC(t,e){let n;if(e instanceof sl)n={update:ev(t,e.key,e.value)};else if(e instanceof ep)n={delete:Lh(t,e.key)};else if(e instanceof Us)n={update:ev(t,e.key,e.data),updateMask:lx(e.fieldMask)};else{if(!(e instanceof VC))return Oe();n={verify:Lh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Ba)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof $a)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof qc)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:YC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Oe()}(t,e.precondition)),n}function ex(t,e){return t&&t.length>0?(gt(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?kr(s.updateTime):kr(i);return o.isEqual(Ve.min())&&(o=kr(i)),new MC(o,s.transformResults||[])}(n,e))):[]}function tx(t,e){return{documents:[Z0(t,e.path)]}}function nx(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Z0(t,s);const i=function(h){if(h.length!==0)return nw(yr.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(_){return{field:Pi(_.field),direction:ix(_.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Mh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function rx(t){let e=XC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){gt(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(g){const _=tw(g);return _ instanceof yr&&R0(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(_=>function(b){return new $c(Ri(b.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(_))}(n.orderBy));let c=null;n.limit&&(c=function(g){let _;return _=typeof g=="object"?g.value:g,wu(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(g){const _=!!g.before,R=g.values||[];return new Bc(R,_)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const _=!g.before,R=g.values||[];return new Bc(R,_)}(n.endAt)),EC(e,s,o,i,c,"F",u,h)}function sx(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ri(n.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ri(n.unaryFilter.field);return Kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ri(n.unaryFilter.field);return Kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ri(n.unaryFilter.field);return Kt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}}(t):t.fieldFilter!==void 0?function(n){return Kt.create(Ri(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yr.create(n.compositeFilter.filters.map(r=>tw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe()}}(n.compositeFilter.op))}(t):Oe()}function ix(t){return WC[t]}function ox(t){return KC[t]}function ax(t){return GC[t]}function Pi(t){return{fieldPath:t.canonicalString()}}function Ri(t){return un.fromServerFormat(t.fieldPath)}function nw(t){return t instanceof Kt?function(n){if(n.op==="=="){if(Ug(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NAN"}};if(Fg(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ug(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NOT_NAN"}};if(Fg(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pi(n.field),op:ox(n.op),value:n.value}}}(t):t instanceof yr?function(n){const r=n.getFilters().map(s=>nw(s));return r.length===1?r[0]:{compositeFilter:{op:ax(n.op),filters:r}}}(t):Oe()}function lx(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r,s,i=Ve.min(),o=Ve.min(),c=pn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.ct=e}}function ux(t){const e=rx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.un=new hx}addToCollectionParentIndex(e,n){return this.un.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(bs.min())}updateCollectionGroup(e,n,r){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class hx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new hn(kt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new hn(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new po(0)}static kn(){return new po(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.changes=new Co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ma(r.mutation,s,Kn.empty(),Jt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Je()){const s=Js();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ea();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Je()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=Jr();const o=pa(),c=function(){return pa()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Us)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),ma(p.mutation,h,p.mutation.getFieldMask(),Jt.now())):o.set(h.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var g;return c.set(h,new px(p,(g=o.get(h))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){const r=pa();let s=new Ot((o,c)=>o-c),i=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Kn.empty();p=c.applyToLocalView(h,p),r.set(u,p);const g=(s.get(c.batchId)||Je()).add(u);s=s.insert(c.batchId,g)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,g=U0();p.forEach(_=>{if(!i.has(_)){const R=W0(n.get(_),r.get(_));R!==null&&g.set(_,R),i=i.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return ae.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ae.resolve(Js());let c=-1,u=i;return o.next(h=>ae.forEach(h,(p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),i.get(p)?ae.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{u=u.insert(p,_)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,Je())).next(p=>({batchId:c,changes:F0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Pe(n)).next(r=>{let s=ea();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ea();return this.indexManager.getCollectionParents(e,i).next(c=>ae.forEach(c,u=>{const h=function(g,_){return new rl(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Tn.newInvalidDocument(p)))});let c=ea();return o.forEach((u,h)=>{const p=i.get(u);p!==void 0&&ma(p.mutation,h,Kn.empty(),Jt.now()),Tu(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ae.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:kr(s.createTime)}}(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:ux(s.bundledQuery),readTime:kr(s.readTime)}}(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.overlays=new Ot(Pe.comparator),this.Ir=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Js();return ae.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),ae.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),ae.resolve()}getOverlaysForCollection(e,n,r){const s=Js(),i=n.length+1,o=new Pe(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ot((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Js(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Js(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=s)););return ae.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UC(n,r));let i=this.Ir.get(n);i===void 0&&(i=Je(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.Tr=new hn(tn.Er),this.dr=new hn(tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new tn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new tn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Pe(new kt([])),r=new tn(n,e),s=new tn(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Pe(new kt([])),r=new tn(n,e),s=new tn(n,e+1);let i=Je();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new tn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Pe.comparator(e.key,n.key)||lt(e.wr,n.wr)}static Ar(e,n){return lt(e.wr,n.wr)||Pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new hn(tn.Er)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FC(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new tn(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ae.resolve(o)}lookupMutationBatch(e,n){return ae.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return ae.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tn(n,0),s=new tn(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);i.push(c)}),ae.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new hn(lt);return n.forEach(s=>{const i=new tn(s,0),o=new tn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{r=r.add(c.wr)})}),ae.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Pe.isDocumentKey(i)||(i=i.child(""));const o=new tn(new Pe(i),0);let c=new hn(lt);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.wr)),!0)},o),ae.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){gt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ae.forEach(n.mutations,s=>{const i=new tn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new tn(n,0),s=this.br.firstAfterOrEqual(r);return ae.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.Mr=e,this.docs=function(){return new Ot(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ae.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(e,n){let r=Jr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Tn.newInvalidDocument(s))}),ae.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Jr();const o=n.path,c=new Pe(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||nC(tC(p),r)<=0||(s.has(p.key)||Tu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Oe()}Or(e,n){return ae.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ex(this)}getSize(e){return ae.resolve(this.size)}}class Ex extends fx{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),ae.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.persistence=e,this.Nr=new Co(n=>Xf(n),Jf),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sp,this.targetCount=0,this.kr=po.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ae.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new po(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Kn(n),ae.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),ae.waitFor(i).next(()=>s)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ae.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ae.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ae.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ae.resolve(r)}containsKey(e,n){return ae.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Kf(0),this.Kr=!1,this.Kr=!0,this.$r=new yx,this.referenceDelegate=e(this),this.Ur=new Sx(this),this.indexManager=new dx,this.remoteDocumentCache=function(s){return new wx(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new cx(n),this.Gr=new gx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new _x(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ce("MemoryPersistence","Starting transaction:",e);const s=new Ix(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return ae.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Ix extends sC{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Jr=new sp,this.Yr=null}static Zr(e){return new ip(e)}get Xr(){if(this.Yr)return this.Yr;throw Oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ae.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Xr,r=>{const s=Pe.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Ve.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ae.or([()=>ae.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Je(),s=Je();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new op(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xI()?8:iC(xn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Cx;return this.Xi(e,n,o).next(c=>{if(i.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Wo()<=Ze.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",Ni(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ae.resolve()):(Wo()<=Ze.DEBUG&&Ce("QueryEngine","Query:",Ni(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Wo()<=Ze.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",Ni(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ar(n))):ae.resolve())}Yi(e,n){if(qg(n))return ae.resolve(null);let r=Ar(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=bh(n,null,"F"),r=Ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Je(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,c);return this.ns(n,h,o,u.readTime)?this.Yi(e,bh(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return qg(n)||s.isEqual(Ve.min())?ae.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?ae.resolve(null):(Wo()<=Ze.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ni(n)),this.rs(e,o,n,eC(s,-1)).next(c=>c))})}ts(e,n){let r=new hn(L0(e));return n.forEach((s,i)=>{Tu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Wo()<=Ze.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",Ni(n)),this.Ji.getDocumentsMatchingQuery(e,n,bs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ot(lt),this._s=new Co(i=>Xf(i),Jf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mx(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function kx(t,e,n,r){return new Ax(t,e,n,r)}async function sw(t,e){const n=Fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=Je();for(const h of s){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})}function Nx(t,e){const n=Fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,p){const g=h.batch,_=g.keys();let R=ae.resolve();return _.forEach(b=>{R=R.next(()=>p.getEntry(u,b)).next(N=>{const F=h.docVersions.get(b);gt(F!==null),N.version.compareTo(F)<0&&(g.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=Je();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function iw(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Px(t,e){const n=Fe(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((p,g)=>{const _=s.get(g);if(!_)return;c.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,g)));let R=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?R=R.withResumeToken(pn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):p.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(p.resumeToken,r)),s=s.insert(g,R),function(N,F,k){return N.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(_,R,p)&&c.push(n.Ur.updateTargetData(i,R))});let u=Jr(),h=Je();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(Rx(i,o,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(Ve.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return ae.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function Rx(t,e,n){let r=Je(),s=Je();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Jr();return n.forEach((c,u)=>{const h=i.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Ve.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Ce("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function jx(t,e){const n=Fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dx(t,e){const n=Fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,ae.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new _s(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Fh(t,e,n){const r=Fe(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!nl(o))throw o;Ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function tv(t,e,n){const r=Fe(t);let s=Ve.min(),i=Je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const g=Fe(u),_=g._s.get(p);return _!==void 0?ae.resolve(g.os.get(_)):g.Ur.getTargetData(h,p)}(r,o,Ar(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Ve.min(),n?i:Je())).next(c=>(bx(r,TC(e),c),{documents:c,Ts:i})))}function bx(t,e,n){let r=t.us.get(e)||Ve.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class nv{constructor(){this.activeTargetIds=NC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mx{constructor(){this.so=new nv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl=null;function xd(){return Hl===null?Hl=function(){return 268435456+Math.round(2147483648*Math.random())}():Hl++,"0x"+Hl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class Fx extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const c=xd(),u=this.xo(n,r.toUriEncodedString());Ce("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,u,h,s).then(p=>(Ce("RestConnection",`Received RPC '${n}' ${c}: `,p),p),p=>{throw La("RestConnection",`RPC '${n}' ${c} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,c){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Io}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=Lx[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=xd();return new Promise((o,c)=>{const u=new w0;u.setWithCredentials(!0),u.listenOnce(E0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ac.NO_ERROR:const p=u.getResponseJson();Ce(En,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case ac.TIMEOUT:Ce(En,`RPC '${e}' ${i} timed out`),c(new Ee(re.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:const g=u.getStatus();if(Ce(En,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const R=_==null?void 0:_.error;if(R&&R.status&&R.message){const b=function(F){const k=F.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(k)>=0?k:re.UNKNOWN}(R.status);c(new Ee(b,R.message))}else c(new Ee(re.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Ee(re.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{Ce(En,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);Ce(En,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=xd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I0(),c=T0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");Ce(En,`Creating RPC '${e}' stream ${s}: ${p}`,u);const g=o.createWebChannel(p,u);let _=!1,R=!1;const b=new Vx({Io:F=>{R?Ce(En,`Not sending because RPC '${e}' stream ${s} is closed:`,F):(_||(Ce(En,`Opening RPC '${e}' stream ${s} transport.`),g.open(),_=!0),Ce(En,`RPC '${e}' stream ${s} sending:`,F),g.send(F))},To:()=>g.close()}),N=(F,k,w)=>{F.listen(k,A=>{try{w(A)}catch(O){setTimeout(()=>{throw O},0)}})};return N(g,Zo.EventType.OPEN,()=>{R||(Ce(En,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),N(g,Zo.EventType.CLOSE,()=>{R||(R=!0,Ce(En,`RPC '${e}' stream ${s} transport closed`),b.So())}),N(g,Zo.EventType.ERROR,F=>{R||(R=!0,La(En,`RPC '${e}' stream ${s} transport errored:`,F),b.So(new Ee(re.UNAVAILABLE,"The operation could not be completed")))}),N(g,Zo.EventType.MESSAGE,F=>{var k;if(!R){const w=F.data[0];gt(!!w);const A=w,O=A.error||((k=A[0])===null||k===void 0?void 0:k.error);if(O){Ce(En,`RPC '${e}' stream ${s} received error:`,O);const B=O.status;let J=function(T){const S=Ht[T];if(S!==void 0)return G0(S)}(B),v=O.message;J===void 0&&(J=re.INTERNAL,v="Unknown error status: "+B+" with message "+O.message),R=!0,b.So(new Ee(J,v)),g.close()}else Ce(En,`RPC '${e}' stream ${s} received:`,w),b.bo(w)}}),N(c,S0.STAT_EVENT,F=>{F.stat===kh.PROXY?Ce(En,`RPC '${e}' stream ${s} detected buffering proxy`):F.stat===kh.NOPROXY&&Ce(En,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Ad(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){return new QC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n,r,s,i,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ow(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(Xr(n.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Ee(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ux extends aw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=JC(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ve.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ve.min():o.readTime?kr(o.readTime):Ve.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Vh(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=jh(u)?{documents:tx(i,u)}:{query:nx(i,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=X0(i,o.resumeToken);const h=Mh(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Ve.min())>0){c.readTime=Hc(i,o.snapshotVersion.toTimestamp());const h=Mh(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=sx(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Vh(this.serializer),n.removeTarget=e,this.a_(n)}}class zx extends aw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return gt(!!e.streamToken),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ex(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Vh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ZC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ee(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Oh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ee(re.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Oh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(re.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class $x{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xr(n),this.D_=!1):Ce("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{vi(this)&&(Ce("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=Fe(u);h.L_.add(4),await ol(h),h.q_.set("Unknown"),h.L_.delete(4),await ku(h)}(this))})}),this.q_=new $x(r,s)}}async function ku(t){if(vi(t))for(const e of t.B_)await e(!0)}async function ol(t){for(const e of t.B_)await e(!1)}function lw(t,e){const n=Fe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),up(n)?cp(n):xo(n).r_()&&lp(n,e))}function ap(t,e){const n=Fe(t),r=xo(n);n.N_.delete(e),r.r_()&&cw(n,e),n.N_.size===0&&(r.r_()?r.o_():vi(n)&&n.q_.set("Unknown"))}function lp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xo(t).A_(e)}function cw(t,e){t.Q_.xe(e),xo(t).R_(e)}function cp(t){t.Q_=new HC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),xo(t).start(),t.q_.v_()}function up(t){return vi(t)&&!xo(t).n_()&&t.N_.size>0}function vi(t){return Fe(t).L_.size===0}function uw(t){t.Q_=void 0}async function Hx(t){t.q_.set("Online")}async function Wx(t){t.N_.forEach((e,n)=>{lp(t,e)})}async function Kx(t,e){uw(t),up(t)?(t.q_.M_(e),cp(t)):t.q_.set("Unknown")}async function Gx(t,e,n){if(t.q_.set("Online"),e instanceof Y0&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){Ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wc(t,r)}else if(e instanceof uc?t.Q_.Ke(e):e instanceof Q0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ve.min()))try{const r=await iw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(pn.EMPTY_BYTE_STRING,p.snapshotVersion)),cw(i,u);const g=new _s(p.target,u,h,p.sequenceNumber);lp(i,g)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Ce("RemoteStore","Failed to raise snapshot:",r),await Wc(t,r)}}async function Wc(t,e,n){if(!nl(e))throw e;t.L_.add(1),await ol(t),t.q_.set("Offline"),n||(n=()=>iw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ce("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ku(t)})}function dw(t,e){return e().catch(n=>Wc(t,n,e))}async function Nu(t){const e=Fe(t),n=Os(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Qx(e);)try{const s=await jx(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Yx(e,s)}catch(s){await Wc(e,s)}hw(e)&&fw(e)}function Qx(t){return vi(t)&&t.O_.length<10}function Yx(t,e){t.O_.push(e);const n=Os(t);n.r_()&&n.V_&&n.m_(e.mutations)}function hw(t){return vi(t)&&!Os(t).n_()&&t.O_.length>0}function fw(t){Os(t).start()}async function Xx(t){Os(t).p_()}async function Jx(t){const e=Os(t);for(const n of t.O_)e.m_(n.mutations)}async function Zx(t,e,n){const r=t.O_.shift(),s=tp.from(r,e,n);await dw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Nu(t)}async function eA(t,e){e&&Os(t).V_&&await async function(r,s){if(function(o){return BC(o)&&o!==re.ABORTED}(s.code)){const i=r.O_.shift();Os(r).s_(),await dw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Nu(r)}}(t,e),hw(t)&&fw(t)}async function sv(t,e){const n=Fe(t);n.asyncQueue.verifyOperationInProgress(),Ce("RemoteStore","RemoteStore received new credentials");const r=vi(n);n.L_.add(3),await ol(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ku(n)}async function tA(t,e){const n=Fe(t);e?(n.L_.delete(2),await ku(n)):e||(n.L_.add(2),await ol(n),n.q_.set("Unknown"))}function xo(t){return t.K_||(t.K_=function(n,r,s){const i=Fe(n);return i.w_(),new Ux(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Hx.bind(null,t),Ro:Wx.bind(null,t),mo:Kx.bind(null,t),d_:Gx.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),up(t)?cp(t):t.q_.set("Unknown")):(await t.K_.stop(),uw(t))})),t.K_}function Os(t){return t.U_||(t.U_=function(n,r,s){const i=Fe(n);return i.w_(),new zx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Xx.bind(null,t),mo:eA.bind(null,t),f_:Jx.bind(null,t),g_:Zx.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Nu(t)):(await t.U_.stop(),t.O_.length>0&&(Ce("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new dp(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(t,e){if(Xr("AsyncQueue",`${e}: ${t}`),nl(t))return new Ee(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Pe.comparator(n.key,r.key):(n,r)=>Pe.comparator(n.key,r.key),this.keyedMap=ea(),this.sortedSet=new Ot(this.comparator)}static emptySet(e){return new Xi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.W_=new Ot(Pe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class mo{constructor(e,n,r,s,i,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new mo(e,n,Xi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class rA{constructor(){this.queries=ov(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Fe(n),i=s.queries;s.queries=ov(),i.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new Ee(re.ABORTED,"Firestore shutting down"))}}function ov(){return new Co(t=>O0(t),Su)}async function fp(t,e){const n=Fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new nA,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=hp(o,`Initialization of query '${Ni(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&mp(n)}async function pp(t,e){const n=Fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sA(t,e){const n=Fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&mp(n)}function iA(t,e,n){const r=Fe(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function mp(t){t.Y_.forEach(e=>{e.next()})}var Uh,av;(av=Uh||(Uh={})).ea="default",av.Cache="cache";class gp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Uh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this.key=e}}class mw{constructor(e){this.key=e}}class oA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Je(),this.mutatedKeys=Je(),this.Aa=L0(e),this.Ra=new Xi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new iv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,g)=>{const _=s.get(p),R=Tu(this.query,g)?g:null,b=!!_&&this.mutatedKeys.has(_.key),N=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let F=!1;_&&R?_.data.isEqual(R.data)?b!==N&&(r.track({type:3,doc:R}),F=!0):this.ga(_,R)||(r.track({type:2,doc:R}),F=!0,(u&&this.Aa(R,u)>0||h&&this.Aa(R,h)<0)&&(c=!0)):!_&&R?(r.track({type:0,doc:R}),F=!0):_&&!R&&(r.track({type:1,doc:_}),F=!0,(u||h)&&(c=!0)),F&&(R?(o=o.add(R),i=N?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,g)=>function(R,b){const N=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return N(R)-N(b)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new mo(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new mw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new pw(r))}),n}ba(e){this.Ta=e.Ts,this.da=Je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return mo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class aA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class lA{constructor(e){this.key=e,this.va=!1}}class cA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Co(c=>O0(c),Su),this.Ma=new Map,this.xa=new Set,this.Oa=new Ot(Pe.comparator),this.Na=new Map,this.La=new sp,this.Ba={},this.ka=new Map,this.qa=po.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uA(t,e,n=!0){const r=Ew(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await gw(r,e,n,!0),s}async function dA(t,e){const n=Ew(t);await gw(n,e,!0,!1)}async function gw(t,e,n,r){const s=await Dx(t.localStore,Ar(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await hA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&lw(t.remoteStore,s),c}async function hA(t,e,n,r,s){t.Ka=(g,_,R)=>async function(N,F,k,w){let A=F.view.ma(k);A.ns&&(A=await tv(N.localStore,F.query,!1).then(({documents:v})=>F.view.ma(v,A)));const O=w&&w.targetChanges.get(F.targetId),B=w&&w.targetMismatches.get(F.targetId)!=null,J=F.view.applyChanges(A,N.isPrimaryClient,O,B);return cv(N,F.targetId,J.wa),J.snapshot}(t,g,_,R);const i=await tv(t.localStore,e,!0),o=new oA(e,i.Ts),c=o.ma(i.documents),u=il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(c,t.isPrimaryClient,u);cv(t,n,h.wa);const p=new aA(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function fA(t,e,n){const r=Fe(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Su(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ap(r.remoteStore,s.targetId),zh(r,s.targetId)}).catch(tl)):(zh(r,s.targetId),await Fh(r.localStore,s.targetId,!0))}async function pA(t,e){const n=Fe(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ap(n.remoteStore,r.targetId))}async function mA(t,e,n){const r=SA(t);try{const s=await function(o,c){const u=Fe(o),h=Jt.now(),p=c.reduce((R,b)=>R.add(b.key),Je());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let b=Jr(),N=Je();return u.cs.getEntries(R,p).next(F=>{b=F,b.forEach((k,w)=>{w.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,b)).next(F=>{g=F;const k=[];for(const w of c){const A=LC(w,g.get(w.key).overlayedDocument);A!=null&&k.push(new Us(w.key,A,k0(A.value.mapValue),ir.exists(!0)))}return u.mutationQueue.addMutationBatch(R,h,k,c)}).next(F=>{_=F;const k=F.applyToLocalDocumentSet(g,N);return u.documentOverlayCache.saveOverlays(R,F.batchId,k)})}).then(()=>({batchId:_.batchId,changes:F0(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ot(lt)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await al(r,s.changes),await Nu(r.remoteStore)}catch(s){const i=hp(s,"Failed to persist write");n.reject(i)}}async function vw(t,e){const n=Fe(t);try{const r=await Px(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(gt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?gt(o.va):s.removedDocuments.size>0&&(gt(o.va),o.va=!1))}),await al(n,r,e)}catch(r){await tl(r)}}function lv(t,e,n){const r=Fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=Fe(o);u.onlineState=c;let h=!1;u.queries.forEach((p,g)=>{for(const _ of g.j_)_.Z_(c)&&(h=!0)}),h&&mp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gA(t,e,n){const r=Fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ot(Pe.comparator);o=o.insert(i,Tn.newNoDocument(i,Ve.min()));const c=Je().add(i),u=new xu(Ve.min(),new Map,new Ot(lt),o,c);await vw(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),vp(r)}else await Fh(r.localStore,e,!1).then(()=>zh(r,e,n)).catch(tl)}async function vA(t,e){const n=Fe(t),r=e.batch.batchId;try{const s=await Nx(n.localStore,e);_w(n,r,null),yw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await al(n,s)}catch(s){await tl(s)}}async function yA(t,e,n){const r=Fe(t);try{const s=await function(o,c){const u=Fe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next(g=>(gt(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);_w(r,e,n),yw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await al(r,s)}catch(s){await tl(s)}}function yw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function _w(t,e,n){const r=Fe(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function zh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ww(t,r)})}function ww(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ap(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vp(t))}function cv(t,e,n){for(const r of n)r instanceof pw?(t.La.addReference(r.key,e),_A(t,r)):r instanceof mw?(Ce("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ww(t,r.key)):Oe()}function _A(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ce("SyncEngine","New document in limbo: "+n),t.xa.add(r),vp(t))}function vp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Pe(kt.fromString(e)),r=t.qa.next();t.Na.set(r,new lA(n)),t.Oa=t.Oa.insert(n,r),lw(t.remoteStore,new _s(Ar(Eu(n.path)),r,"TargetPurposeLimboResolution",Kf.oe))}}async function al(t,e,n){const r=Fe(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=op.Wi(u.targetId,h);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const p=Fe(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>ae.forEach(h,_=>ae.forEach(_.$i,R=>p.persistence.referenceDelegate.addReference(g,_.targetId,R)).next(()=>ae.forEach(_.Ui,R=>p.persistence.referenceDelegate.removeReference(g,_.targetId,R)))))}catch(g){if(!nl(g))throw g;Ce("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const R=p.os.get(_),b=R.snapshotVersion,N=R.withLastLimboFreeSnapshotVersion(b);p.os=p.os.insert(_,N)}}}(r.localStore,i))}async function wA(t,e){const n=Fe(t);if(!n.currentUser.isEqual(e)){Ce("SyncEngine","User change. New user:",e.toKey());const r=await sw(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new Ee(re.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await al(n,r.hs)}}function EA(t,e){const n=Fe(t),r=n.Na.get(e);if(r&&r.va)return Je().add(r.key);{let s=Je();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function Ew(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gA.bind(null,e),e.Ca.d_=sA.bind(null,e.eventManager),e.Ca.$a=iA.bind(null,e.eventManager),e}function SA(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yA.bind(null,e),e}class Ha{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Au(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return kx(this.persistence,new xx,e.initialUser,this.serializer)}Ga(e){return new Tx(ip.Zr,this.serializer)}Wa(e){return new Mx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ha.provider={build:()=>new Ha};class Kc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wA.bind(null,this.syncEngine),await tA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rA}()}createDatastore(e){const n=Au(e.databaseInfo.databaseId),r=function(i){return new Fx(i)}(e.databaseInfo);return function(i,o,c,u){return new Bx(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new qx(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>lv(this.syncEngine,n,0),function(){return rv.D()?new rv:new Ox}())}createSyncEngine(e,n){return function(s,i,o,c,u,h,p){const g=new cA(s,i,o,c,u,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Fe(s);Ce("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ol(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Kc.provider={build:()=>new Kc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ln.UNAUTHENTICATED,this.clientId=C0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Ce("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kd(t,e){t.asyncQueue.verifyOperationInProgress(),Ce("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await sw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IA(t);Ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>sv(e.remoteStore,s)),t._onlineComponents=e}async function IA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await kd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;La("Error using user provided cache. Falling back to memory cache: "+n),await kd(t,new Ha)}}else Ce("FirestoreClient","Using default OfflineComponentProvider"),await kd(t,new Ha);return t._offlineComponents}async function Sw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ce("FirestoreClient","Using user provided OnlineComponentProvider"),await uv(t,t._uninitializedComponentsProvider._online)):(Ce("FirestoreClient","Using default OnlineComponentProvider"),await uv(t,new Kc))),t._onlineComponents}function CA(t){return Sw(t).then(e=>e.syncEngine)}async function Gc(t){const e=await Sw(t),n=e.eventManager;return n.onListen=uA.bind(null,e.syncEngine),n.onUnlisten=fA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pA.bind(null,e.syncEngine),n}function xA(t,e,n={}){const r=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,h){const p=new yp({next:_=>{p.Za(),o.enqueueAndForget(()=>pp(i,g));const R=_.docs.has(c);!R&&_.fromCache?h.reject(new Ee(re.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&_.fromCache&&u&&u.source==="server"?h.reject(new Ee(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new gp(Eu(c.path),p,{includeMetadataChanges:!0,_a:!0});return fp(i,g)}(await Gc(t),t.asyncQueue,e,n,r)),r.promise}function AA(t,e,n={}){const r=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,h){const p=new yp({next:_=>{p.Za(),o.enqueueAndForget(()=>pp(i,g)),_.fromCache&&u.source==="server"?h.reject(new Ee(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new gp(c,p,{includeMetadataChanges:!0,_a:!0});return fp(i,g)}(await Gc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t,e,n){if(!n)throw new Ee(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kA(t,e,n,r){if(e===!0&&r===!0)throw new Ee(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hv(t){if(!Pe.isDocumentKey(t))throw new Ee(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fv(t){if(Pe.isDocumentKey(t))throw new Ee(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe()}function Qn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pu(t);throw new Ee(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ee(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _p{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new W1;switch(r.type){case"firstParty":return new Q1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=dv.get(n);r&&(Ce("ComponentProvider","Removing Datastore"),dv.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class In{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class Ps extends yi{constructor(e,n,r){super(e,n,Eu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new Pe(e))}withConverter(e){return new Ps(this.firestore,e,this._path)}}function Qt(t,e,...n){if(t=jt(t),Iw("collection","path",e),t instanceof _p){const r=kt.fromString(e,...n);return fv(r),new Ps(t,null,r)}{if(!(t instanceof In||t instanceof Ps))throw new Ee(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kt.fromString(e,...n));return fv(r),new Ps(t.firestore,null,r)}}function Vt(t,e,...n){if(t=jt(t),arguments.length===1&&(e=C0.newId()),Iw("doc","path",e),t instanceof _p){const r=kt.fromString(e,...n);return hv(r),new In(t,null,new Pe(r))}{if(!(t instanceof In||t instanceof Ps))throw new Ee(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kt.fromString(e,...n));return hv(r),new In(t.firestore,t instanceof Ps?t.converter:null,new Pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ow(this,"async_queue_retry"),this.Vu=()=>{const r=Ad();r&&Ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ad();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ad();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new qr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!nl(e))throw e;Ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Xr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=dp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function gv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Zr extends _p{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new mv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mv(e),this._firestoreClient=void 0,await e}}}function NA(t,e,n){n||(n="(default)");const r=_u(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Ma(i,e))return s;throw new Ee(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ee(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ee(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Ru(t){if(t._terminated)throw new Ee(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PA(t),t._firestoreClient}function PA(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,h,p){return new lC(c,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Tw(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new TA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new go(pn.fromBase64String(e))}catch(n){throw new Ee(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new go(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=/^__.*__$/;class jA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Us(e,this.data,this.fieldMask,n,this.fieldTransforms):new sl(e,this.data,n,this.fieldTransforms)}}class Cw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class Sp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xw(this.Cu)&&RA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class DA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Au(e)}Qu(e,n,r,s=!1){return new Sp({Cu:e,methodName:n,qu:r,path:un.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bu(t){const e=t._freezeSettings(),n=Au(t._databaseId);return new DA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Aw(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Ip("Data must be an object, but it was:",o,r);const c=kw(r,o);let u,h;if(i.merge)u=new Kn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const g of i.mergeFields){const _=Bh(e,g,n);if(!o.contains(_))throw new Ee(re.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Pw(p,_)||p.push(_)}u=new Kn(p),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new jA(new Fn(c),u,h)}class Mu extends Du{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mu}}class Tp extends Du{_toFieldTransform(e){return new DC(e.path,new Ba)}isEqual(e){return e instanceof Tp}}function bA(t,e,n,r){const s=t.Qu(1,e,n);Ip("Data must be an object, but it was:",s,r);const i=[],o=Fn.empty();gi(r,(u,h)=>{const p=Cp(e,u,n);h=jt(h);const g=s.Nu(p);if(h instanceof Mu)i.push(p);else{const _=ll(h,g);_!=null&&(i.push(p),o.set(p,_))}});const c=new Kn(i);return new Cw(o,c,s.fieldTransforms)}function MA(t,e,n,r,s,i){const o=t.Qu(1,e,n),c=[Bh(e,r,n)],u=[s];if(i.length%2!=0)throw new Ee(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<i.length;_+=2)c.push(Bh(e,i[_])),u.push(i[_+1]);const h=[],p=Fn.empty();for(let _=c.length-1;_>=0;--_)if(!Pw(h,c[_])){const R=c[_];let b=u[_];b=jt(b);const N=o.Nu(R);if(b instanceof Mu)h.push(R);else{const F=ll(b,N);F!=null&&(h.push(R),p.set(R,F))}}const g=new Kn(h);return new Cw(p,g,o.fieldTransforms)}function OA(t,e,n,r=!1){return ll(n,t.Qu(r?4:3,e))}function ll(t,e){if(Nw(t=jt(t)))return Ip("Unsupported field value:",e,t),kw(t,e);if(t instanceof Du)return function(r,s){if(!xw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=ll(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Jt.fromDate(r);return{timestampValue:Hc(s.serializer,i)}}if(r instanceof Jt){const i=new Jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hc(s.serializer,i)}}if(r instanceof wp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof go)return{bytesValue:X0(s.serializer,r._byteString)};if(r instanceof In){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ep)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Zf(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Pu(r)}`)}(t,e)}function kw(t,e){const n={};return x0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gi(t,(r,s)=>{const i=ll(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Nw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Jt||t instanceof wp||t instanceof go||t instanceof In||t instanceof Du||t instanceof Ep)}function Ip(t,e,n){if(!Nw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Pu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Bh(t,e,n){if((e=jt(e))instanceof ju)return e._internalPath;if(typeof e=="string")return Cp(t,e);throw Qc("Field path arguments must be of type string or ",t,!1,void 0,n)}const LA=new RegExp("[~\\*/\\[\\]]");function Cp(t,e,n){if(e.search(LA)>=0)throw Qc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ju(...e.split("."))._internalPath}catch{throw Qc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Ee(re.INVALID_ARGUMENT,c+t+u)}function Pw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VA extends Rw{data(){return super.data()}}function xp(t,e){return typeof e=="string"?Cp(t,e):e instanceof ju?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}class FA extends Ap{}function Ai(t,e,...n){let r=[];e instanceof Ap&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof kp).length,c=i.filter(u=>u instanceof Ou).length;if(o>1||o>0&&c>0)throw new Ee(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ou extends FA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ou(e,n,r)}_apply(e){const n=this._parse(e);return Dw(e._query,n),new yi(e.firestore,e.converter,Dh(e._query,n))}_parse(e){const n=bu(e.firestore);return function(i,o,c,u,h,p,g){let _;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ee(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){yv(g,p);const R=[];for(const b of g)R.push(vv(u,i,b));_={arrayValue:{values:R}}}else _=vv(u,i,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||yv(g,p),_=OA(c,o,g,p==="in"||p==="not-in");return Kt.create(h,p,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ki(t,e,n){const r=e,s=xp("where",t);return Ou._create(s,r,n)}class kp extends Ap{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)Dw(o,u),o=Dh(o,u)}(e._query,n),new yi(e.firestore,e.converter,Dh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function vv(t,e,n){if(typeof(n=jt(n))=="string"){if(n==="")throw new Ee(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M0(e)&&n.indexOf("/")!==-1)throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(kt.fromString(n));if(!Pe.isDocumentKey(r))throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vg(t,new Pe(r))}if(n instanceof In)return Vg(t,n._key);throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pu(n)}.`)}function yv(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dw(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ee(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UA{convertValue(e,n="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return gi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ut(o.doubleValue));return new Ep(i)}convertGeoPoint(e){return new wp(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fa(e));default:return null}}convertTimestamp(e){const n=Ms(e);return new Jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=kt.fromString(e);gt(rw(r));const s=new Ua(r.get(1),r.get(3)),i=new Pe(r.popFirst(5));return s.isEqual(n)||Xr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mw extends Rw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class dc extends Mw{data(e={}){return super.data(e)}}class Ow{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new na(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new dc(this._firestore,this._userDataWriter,r.key,r,new na(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new dc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new na(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new dc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new na(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:zA(c.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){t=Qn(t,In);const e=Qn(t.firestore,Zr);return xA(Ru(e),t._key).then(n=>Lw(e,t,n))}class Np extends UA{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,n)}}function as(t){t=Qn(t,yi);const e=Qn(t.firestore,Zr),n=Ru(e),r=new Np(e);return jw(t._query),AA(n,t._query).then(s=>new Ow(e,r,t,s))}function ga(t,e,n){t=Qn(t,In);const r=Qn(t.firestore,Zr),s=bw(t.converter,e,n);return Lu(r,[Aw(bu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ir.none())])}function Lr(t,e,n,...r){t=Qn(t,In);const s=Qn(t.firestore,Zr),i=bu(s);let o;return o=typeof(e=jt(e))=="string"||e instanceof ju?MA(i,"updateDoc",t._key,e,n,r):bA(i,"updateDoc",t._key,e),Lu(s,[o.toMutation(t._key,ir.exists(!0))])}function Ji(t){return Lu(Qn(t.firestore,Zr),[new ep(t._key,ir.none())])}function Wl(t,e){const n=Qn(t.firestore,Zr),r=Vt(t),s=bw(t.converter,e);return Lu(n,[Aw(bu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}function Gs(t,...e){var n,r,s;t=jt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||gv(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(gv(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,h,p;if(t instanceof In)h=Qn(t.firestore,Zr),p=Eu(t._key.path),u={next:g=>{e[o]&&e[o](Lw(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=Qn(t,yi);h=Qn(g.firestore,Zr),p=g._query;const _=new Np(h);u={next:R=>{e[o]&&e[o](new Ow(h,_,g,R))},error:e[o+1],complete:e[o+2]},jw(t._query)}return function(_,R,b,N){const F=new yp(N),k=new gp(R,F,b);return _.asyncQueue.enqueueAndForget(async()=>fp(await Gc(_),k)),()=>{F.Za(),_.asyncQueue.enqueueAndForget(async()=>pp(await Gc(_),k))}}(Ru(h),p,c,u)}function Lu(t,e){return function(r,s){const i=new qr;return r.asyncQueue.enqueueAndForget(async()=>mA(await CA(r),s,i)),i.promise}(Ru(t),e)}function Lw(t,e,n){const r=n.docs.get(e._key),s=new Np(t);return new Mw(t,s,e._key,r,new na(n.hasPendingWrites,n.fromCache),e.converter)}class $A{constructor(e){this.kind="memory",this._onlineComponentProvider=Kc.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Ha.provider}toJSON(){return{kind:this.kind}}}function qA(t){return new $A(t)}function _v(){return new Tp("serverTimestamp")}(function(e,n=!0){(function(s){Io=s})(To),li(new Ds("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Zr(new K1(r.getProvider("auth-internal")),new X1(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ee(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),xr(Dg,"4.7.3",e),xr(Dg,"4.7.3","esm2017")})();function Pp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HA=Vw,Fw=new Za("auth","Firebase",Vw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new qf("@firebase/auth");function WA(t,...e){Yc.logLevel<=Ze.WARN&&Yc.warn(`Auth (${To}): ${t}`,...e)}function hc(t,...e){Yc.logLevel<=Ze.ERROR&&Yc.error(`Auth (${To}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,...e){throw Rp(t,...e)}function Nr(t,...e){return Rp(t,...e)}function Uw(t,e,n){const r=Object.assign(Object.assign({},HA()),{[e]:n});return new Za("auth","Firebase",r).create(e,{appName:t.name})}function Hr(t){return Uw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Fw.create(t,...e)}function be(t,e,...n){if(!t)throw Rp(e,...n)}function Ur(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hc(e),new Error(e)}function es(t,e){t||Ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function KA(){return wv()==="http:"||wv()==="https:"}function wv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KA()||TI()||"connection"in navigator)?navigator.onLine:!0}function QA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.shortDelay=e,this.longDelay=n,es(n>e,"Short delay should be less than long delay!"),this.isMobile=wI()||II()}get(){return GA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t,e){es(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new cl(3e4,6e4);function zs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Bs(t,e,n,r,s={}){return Bw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=el(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return SI()||(h.referrerPolicy="no-referrer"),zw.fetch()($w(t,t.config.apiHost,n,c),h)})}async function Bw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},YA),e);try{const s=new ZA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Kl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Kl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Kl(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Uw(t,p,h);_r(t,p)}}catch(s){if(s instanceof jr)throw s;_r(t,"network-request-failed",{message:String(s)})}}async function ul(t,e,n,r,s={}){const i=await Bs(t,e,n,r,s);return"mfaPendingCredential"in i&&_r(t,"multi-factor-auth-required",{_serverResponse:i}),i}function $w(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?jp(t.config,s):`${t.config.apiScheme}://${s}`}function JA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nr(this.auth,"network-request-failed")),XA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Nr(t,e,r);return s.customData._tokenResponse=n,s}function Ev(t){return t!==void 0&&t.enterprise!==void 0}class ek{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return JA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function tk(t,e){return Bs(t,"GET","/v2/recaptchaConfig",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(t,e){return Bs(t,"POST","/v1/accounts:delete",e)}async function qw(t,e){return Bs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rk(t,e=!1){const n=jt(t),r=await n.getIdToken(e),s=Dp(r);be(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:va(Nd(s.auth_time)),issuedAtTime:va(Nd(s.iat)),expirationTime:va(Nd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Nd(t){return Number(t)*1e3}function Dp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hc("JWT malformed, contained fewer than 3 sections"),null;try{const s=c0(n);return s?JSON.parse(s):(hc("Failed to decode base64 JWT payload"),null)}catch(s){return hc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Sv(t){const e=Dp(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jr&&sk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=va(this.lastLoginAt),this.creationTime=va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Wa(t,qw(n,{idToken:r}));be(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Hw(i.providerUserInfo):[],c=ak(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new qh(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function ok(t){const e=jt(t);await Xc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ak(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Hw(t){return t.map(e=>{var{providerId:n}=e,r=Pp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(t,e){const n=await Bw(t,{},async()=>{const r=el({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=$w(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",zw.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ck(t,e){return Bs(t,"POST","/v2/accounts:revokeToken",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=Sv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await lk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Zi;return r&&(be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(be(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(be(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zi,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Pp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ik(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Wa(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rk(this,e)}reload(){return ok(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tr(this.auth.app))return Promise.reject(Hr(this.auth));const e=await this.getIdToken();return await Wa(this,nk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,h,p;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(s=n.email)!==null&&s!==void 0?s:void 0,R=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,F=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(h=n.createdAt)!==null&&h!==void 0?h:void 0,w=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:A,emailVerified:O,isAnonymous:B,providerData:J,stsTokenManager:v}=n;be(A&&v,e,"internal-error");const y=Zi.fromJSON(this.name,v);be(typeof A=="string",e,"internal-error"),ls(g,e.name),ls(_,e.name),be(typeof O=="boolean",e,"internal-error"),be(typeof B=="boolean",e,"internal-error"),ls(R,e.name),ls(b,e.name),ls(N,e.name),ls(F,e.name),ls(k,e.name),ls(w,e.name);const T=new zr({uid:A,auth:e,email:_,emailVerified:O,displayName:g,isAnonymous:B,photoURL:b,phoneNumber:R,tenantId:N,stsTokenManager:y,createdAt:k,lastLoginAt:w});return J&&Array.isArray(J)&&(T.providerData=J.map(S=>Object.assign({},S))),F&&(T._redirectEventId=F),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new Zi;s.updateFromServerResponse(n);const i=new zr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Xc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];be(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Hw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Zi;c.updateFromIdToken(r);const u=new zr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new qh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Map;function Br(t){es(t instanceof Function,"Expected a class definition");let e=Tv.get(t);return e?(es(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ww.type="NONE";const Iv=Ww;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e,n){return`firebase:${t}:${e}:${n}`}class eo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=fc(this.userKey,s.apiKey,i),this.fullPersistenceKey=fc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new eo(Br(Iv),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Br(Iv);const o=fc(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const p=await h._get(o);if(p){const g=zr._fromJSON(e,p);h!==i&&(c=g),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new eo(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new eo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jw(e))return"Blackberry";if(Zw(e))return"Webos";if(Gw(e))return"Safari";if((e.includes("chrome/")||Qw(e))&&!e.includes("edge/"))return"Chrome";if(Xw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Kw(t=xn()){return/firefox\//i.test(t)}function Gw(t=xn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qw(t=xn()){return/crios\//i.test(t)}function Yw(t=xn()){return/iemobile/i.test(t)}function Xw(t=xn()){return/android/i.test(t)}function Jw(t=xn()){return/blackberry/i.test(t)}function Zw(t=xn()){return/webos/i.test(t)}function bp(t=xn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uk(t=xn()){var e;return bp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dk(){return CI()&&document.documentMode===10}function eE(t=xn()){return bp(t)||Xw(t)||Zw(t)||Jw(t)||/windows phone/i.test(t)||Yw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e=[]){let n;switch(t){case"Browser":n=Cv(xn());break;case"Worker":n=`${Cv(xn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${To}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e={}){return Bs(t,"GET","/v2/passwordPolicy",zs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=6;class mk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xv(this),this.idTokenSubscription=new xv(this),this.beforeStateQueue=new hk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Br(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await eo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qw(this,{idToken:e}),r=await zr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Tr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tr(this.app))return Promise.reject(Hr(this));const n=e?jt(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tr(this.app)?Promise.reject(Hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tr(this.app)?Promise.reject(Hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fk(this),n=new mk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Za("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ck(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Br(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await eo.create(this,[Br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&WA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _i(t){return jt(t)}class xv{constructor(e){this.auth=e,this.observer=null,this.addObserver=DI(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vk(t){Vu=t}function nE(t){return Vu.loadJS(t)}function yk(){return Vu.recaptchaEnterpriseScript}function _k(){return Vu.gapiScript}function wk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Ek="recaptcha-enterprise",Sk="NO_RECAPTCHA";class Tk{constructor(e){this.type=Ek,this.auth=_i(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{tk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new ek(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;Ev(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(Sk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Ev(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=yk();u.length!==0&&(u+=c),nE(u).then(()=>{s(c,i,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function Av(t,e,n,r=!1){const s=new Tk(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Hh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Av(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Av(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e){const n=_u(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ma(i,e??{}))return s;_r(s,"already-initialized")}return n.initialize({options:e})}function Ck(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Br);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function xk(t,e,n){const r=_i(t);be(r._canInitEmulator,r,"emulator-config-failed"),be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=rE(e),{host:o,port:c}=Ak(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),kk()}function rE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ak(t){const e=rE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:kv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:kv(o)}}}function kv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,n){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function Nk(t,e){return Bs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(t,e){return ul(t,"POST","/v1/accounts:signInWithPassword",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(t,e){return ul(t,"POST","/v1/accounts:signInWithEmailLink",zs(t,e))}async function jk(t,e){return ul(t,"POST","/v1/accounts:signInWithEmailLink",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends Mp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ka(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ka(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hh(e,n,"signInWithPassword",Pk);case"emailLink":return Rk(e,{email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hh(e,r,"signUpPassword",Nk);case"emailLink":return jk(e,{idToken:n,email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(t,e){return ul(t,"POST","/v1/accounts:signInWithIdp",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="http://localhost";class hi extends Mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Pp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new hi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return to(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,to(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,to(e,n)}buildRequest(){const e={requestUri:Dk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=el(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Mk(t){const e=Xo(Jo(t)).link,n=e?Xo(Jo(e)).deep_link_id:null,r=Xo(Jo(t)).deep_link_id;return(r?Xo(Jo(r)).link:null)||r||n||e||t}class Op{constructor(e){var n,r,s,i,o,c;const u=Xo(Jo(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,g=bk((s=u.mode)!==null&&s!==void 0?s:null);be(h&&p&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=p,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=Mk(e);try{return new Op(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.providerId=Ao.PROVIDER_ID}static credential(e,n){return Ka._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Op.parseLink(n);return be(r,"argument-error"),Ka._fromEmailAndCode(e,r.code,r.tenantId)}}Ao.PROVIDER_ID="password";Ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends sE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends dl{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hi._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ps.credential(n,r)}catch{return null}}}ps.GOOGLE_SIGN_IN_METHOD="google.com";ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends dl{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.GITHUB_SIGN_IN_METHOD="github.com";ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends dl{constructor(){super("twitter.com")}static credential(e,n){return hi._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return gs.credential(n,r)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(t,e){return ul(t,"POST","/v1/accounts:signUp",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zr._fromIdTokenResponse(e,r,s),o=Nv(r);return new fi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Nv(r);return new fi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Nv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends jr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Jc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Jc(e,n,r,s)}}function iE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Jc._fromErrorAndOperation(t,i,e,r):i})}async function Lk(t,e,n=!1){const r=await Wa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(t,e,n=!1){const{auth:r}=t;if(Tr(r.app))return Promise.reject(Hr(r));const s="reauthenticate";try{const i=await Wa(t,iE(r,s,e,t),n);be(i.idToken,r,"internal-error");const o=Dp(i.idToken);be(o,r,"internal-error");const{sub:c}=o;return be(t.uid===c,r,"user-mismatch"),fi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_r(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(t,e,n=!1){if(Tr(t.app))return Promise.reject(Hr(t));const r="signIn",s=await iE(t,r,e),i=await fi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Fk(t,e){return oE(_i(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(t){const e=_i(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Pv(t,e,n){if(Tr(t.app))return Promise.reject(Hr(t));const r=_i(t),o=await Hh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ok).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&aE(t),u}),c=await fi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function Gl(t,e,n){return Tr(t.app)?Promise.reject(Hr(t)):Fk(jt(t),Ao.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&aE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t,e){return jt(t).setPersistence(e)}function zk(t,e,n,r){return jt(t).onIdTokenChanged(e,n,r)}function Bk(t,e,n){return jt(t).beforeAuthStateChanged(e,n)}function $k(t,e,n,r){return jt(t).onAuthStateChanged(e,n,r)}function qk(t){return jt(t).signOut()}const Zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zc,"1"),this.storage.removeItem(Zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=1e3,Wk=10;class cE extends lE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);dk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Wk):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cE.type="LOCAL";const uE=cE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE extends lE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dE.type="SESSION";const hE=dE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Fu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async h=>h(n.origin,i)),u=await Kk(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const h=Lp("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(_.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(){return window}function Qk(t){Pr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(){return typeof Pr().WorkerGlobalScope<"u"&&typeof Pr().importScripts=="function"}async function Yk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Jk(){return fE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firebaseLocalStorageDb",Zk=1,eu="firebaseLocalStorage",mE="fbase_key";class hl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Uu(t,e){return t.transaction([eu],e?"readwrite":"readonly").objectStore(eu)}function eN(){const t=indexedDB.deleteDatabase(pE);return new hl(t).toPromise()}function Wh(){const t=indexedDB.open(pE,Zk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(eu,{keyPath:mE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(eu)?e(r):(r.close(),await eN(),e(await Wh()))})})}async function Rv(t,e,n){const r=Uu(t,!0).put({[mE]:e,value:n});return new hl(r).toPromise()}async function tN(t,e){const n=Uu(t,!1).get(e),r=await new hl(n).toPromise();return r===void 0?null:r.value}function jv(t,e){const n=Uu(t,!0).delete(e);return new hl(n).toPromise()}const nN=800,rN=3;class gE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fu._getInstance(Jk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Yk(),!this.activeServiceWorker)return;this.sender=new Gk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wh();return await Rv(e,Zc,"1"),await jv(e,Zc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Uu(s,!1).getAll();return new hl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gE.type="LOCAL";const sN=gE;new cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t,e){return e?Br(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return to(e,this._buildIdpRequest())}_linkToIdToken(e,n){return to(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return to(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oN(t){return oE(t.auth,new Vp(t),t.bypassAuthState)}function aN(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),Vk(n,new Vp(t),t.bypassAuthState)}async function lN(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),Lk(n,new Vp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oN;case"linkViaPopup":case"linkViaRedirect":return lN;case"reauthViaPopup":case"reauthViaRedirect":return aN;default:_r(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new cl(2e3,1e4);class qi extends vE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,qi.currentPopupAction&&qi.currentPopupAction.cancel(),qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=Lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cN.get())};e()}}qi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="pendingRedirect",pc=new Map;class dN extends vE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pc.get(this.auth._key());if(!e){try{const r=await hN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pc.set(this.auth._key(),e)}return this.bypassAuthState||pc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hN(t,e){const n=mN(e),r=pN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function fN(t,e){pc.set(t._key(),e)}function pN(t){return Br(t._redirectPersistence)}function mN(t){return fc(uN,t.config.apiKey,t.name)}async function gN(t,e,n=!1){if(Tr(t.app))return Promise.reject(Hr(t));const r=_i(t),s=iN(r,e),o=await new dN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=10*60*1e3;class yN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_N(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(e))}saveEventToCache(e){this.cachedEventUids.add(Dv(e)),this.lastProcessedEventTime=Date.now()}}function Dv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _N(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e={}){return Bs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SN=/^https?/;async function TN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wN(t);for(const n of e)try{if(IN(n))return}catch{}_r(t,"unauthorized-domain")}function IN(t){const e=$h(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!SN.test(n))return!1;if(EN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new cl(3e4,6e4);function bv(){const t=Pr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xN(t){return new Promise((e,n)=>{var r,s,i;function o(){bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bv(),n(Nr(t,"network-request-failed"))},timeout:CN.get()})}if(!((s=(r=Pr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Pr().gapi)===null||i===void 0)&&i.load)o();else{const c=wk("iframefcb");return Pr()[c]=()=>{gapi.load?o():n(Nr(t,"network-request-failed"))},nE(`${_k()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw mc=null,e})}let mc=null;function AN(t){return mc=mc||xN(t),mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new cl(5e3,15e3),NN="__/auth/iframe",PN="emulator/auth/iframe",RN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DN(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jp(e,PN):`https://${t.config.authDomain}/${NN}`,r={apiKey:e.apiKey,appName:t.name,v:To},s=jN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${el(r).slice(1)}`}async function bN(t){const e=await AN(t),n=Pr().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:DN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Nr(t,"network-request-failed"),c=Pr().setTimeout(()=>{i(o)},kN.get());function u(){Pr().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ON=500,LN=600,VN="_blank",FN="http://localhost";class Mv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UN(t,e,n,r=ON,s=LN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},MN),{width:r.toString(),height:s.toString(),top:i,left:o}),h=xn().toLowerCase();n&&(c=Qw(h)?VN:n),Kw(h)&&(e=e||FN,u.scrollbars="yes");const p=Object.entries(u).reduce((_,[R,b])=>`${_}${R}=${b},`,"");if(uk(h)&&c!=="_self")return zN(e||"",c),new Mv(null);const g=window.open(e||"",c,p);be(g,t,"popup-blocked");try{g.focus()}catch{}return new Mv(g)}function zN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="__/auth/handler",$N="emulator/auth/handler",qN=encodeURIComponent("fac");async function Ov(t,e,n,r,s,i){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:To,eventId:s};if(e instanceof sE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof dl){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),h=u?`#${qN}=${encodeURIComponent(u)}`:"";return`${HN(t)}?${el(c).slice(1)}${h}`}function HN({config:t}){return t.emulator?jp(t,$N):`https://${t.authDomain}/${BN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="webStorageSupport";class WN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hE,this._completeRedirectFn=gN,this._overrideRedirectResult=fN}async _openPopup(e,n,r,s){var i;es((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Ov(e,n,r,$h(),s);return UN(e,o,Lp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Ov(e,n,r,$h(),s);return Qk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(es(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bN(e),r=new yN(e);return n.register("authEvent",s=>(be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pd,{type:Pd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Pd];o!==void 0&&n(!!o),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eE()||Gw()||bp()}}const KN=WN;var Lv="@firebase/auth",Vv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YN(t){li(new Ds("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tE(t)},h=new gk(r,s,i,u);return Ck(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),li(new Ds("auth-internal",e=>{const n=_i(e.getProvider("auth").getImmediate());return(r=>new GN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xr(Lv,Vv,QN(t)),xr(Lv,Vv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=5*60,JN=h0("authIdTokenMaxAge")||XN;let Fv=null;const ZN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JN)return;const s=n==null?void 0:n.token;Fv!==s&&(Fv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function eP(t=g0()){const e=_u(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ik(t,{popupRedirectResolver:KN,persistence:[sN,uE,hE]}),r=h0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=ZN(i.toString());Bk(n,o,()=>o(n.currentUser)),zk(n,c=>o(c))}}const s=u0("auth");return s&&xk(n,`http://${s}`),n}function tP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Nr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",tP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YN("Browser");const nP={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"};let vo=null;try{vo=m0(nP)}catch{}const we=vo?NA(vo,{localCache:qA(),experimentalForceLongPolling:!0,useFetchStreams:!1}):null,Pn=vo?eP(vo):null;if(Pn)try{Uk(Pn,uE).catch(()=>{})}catch{}const Uv=vo;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="type.googleapis.com/google.protobuf.Int64Value",sP="type.googleapis.com/google.protobuf.UInt64Value";function _E(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Kh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Kh(e));if(typeof t=="function"||typeof t=="object")return _E(t,e=>Kh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function tu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case rP:case sP:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>tu(e)):typeof t=="function"||typeof t=="object"?_E(t,e=>tu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class no extends jr{constructor(e,n,r){super(`${Fp}/${e}`,n||""),this.details=r}}function iP(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function oP(t,e){let n=iP(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!zv[o])return new no("internal","internal");n=zv[o],r=o}const c=i.message;typeof c=="string"&&(r=c),s=i.details,s!==void 0&&(s=tu(s))}}catch{}return n==="ok"?null:new no(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="us-central1";function lP(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new no("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class cP{constructor(e,n,r,s,i=Gh,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new aP(n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Gh}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function uP(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function dP(t,e,n){return r=>pP(t,e,r,{})}function hP(t,e,n){return r=>wE(t,e,r,{})}async function fP(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function pP(t,e,n,r){const s=t._url(e);return wE(t,s,n,r)}async function wE(t,e,n,r){n=Kh(n);const s={data:n},i={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const c=r.timeout||7e4,u=lP(c),h=await Promise.race([fP(e,s,i,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!h)throw new no("cancelled","Firebase Functions instance was deleted.");const p=oP(h.status,h.json);if(p)throw p;if(!h.json)throw new no("internal","Response is not valid JSON object.");let g=h.json.data;if(typeof g>"u"&&(g=h.json.result),typeof g>"u")throw new no("internal","Response is missing data field.");return{data:tu(g)}}const Bv="@firebase/functions",$v="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="auth-internal",gP="app-check-internal",vP="messaging-internal";function yP(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),o=r.getProvider(mP),c=r.getProvider(vP),u=r.getProvider(gP);return new cP(i,o,c,u,s,t)};li(new Ds(Fp,n,"PUBLIC").setMultipleInstances(!0)),xr(Bv,$v,e),xr(Bv,$v,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t=g0(),e=Gh){const r=_u(jt(t),Fp).getImmediate({identifier:e}),s=yI("functions");return s&&wP(r,...s),r}function wP(t,e,n){uP(jt(t),e,n)}function qv(t,e,n){return dP(jt(t),e)}function EP(t,e,n){return hP(jt(t),e)}yP(fetch.bind(self));const SP={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://gerencimaneto-mkt-betaki.onrender.com",VITE_FIREBASE_API_KEY:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",VITE_FIREBASE_APP_ID:"1:992627837568:web:48019ba22070fd9af03465",VITE_FIREBASE_AUTH_DOMAIN:"mkt-betaki.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"992627837568",VITE_FIREBASE_PROJECT_ID:"mkt-betaki",VITE_FIREBASE_STORAGE_BUCKET:"mkt-betaki.firebasestorage.app"},yo=["Pendente","Em produo","Aguardando Feedback","Aprovada","Revisar","Concluida"],EE=["Instagram","Trfego Pago","CRM","Influencers","Site","Branding","Outros"],an="demandas_v2",TP=t=>t==="Aberta"?"Aberta":t==="Em Progresso"?"Em Progresso":t==="Concluda"?"Concluda":t,Up=t=>TP(t),SE=t=>{const e=(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")?"st-pending":e.includes("progresso")||e.includes("produo")?"st-progress":e.includes("feedback")?"st-feedback":e.includes("revisar")?"st-review":e.includes("aprov")?"st-approved":e.includes("conclu")?"st-concluded":e.includes("atras")?"st-late":""},_o=t=>{const e=String(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")||t==="Aberta"||t==="Pendente"},pr=t=>{const e=String(t||"").toLowerCase();return e.includes("produo")||e.includes("progresso")||t==="Em Progresso"||t==="Em produo"},Ge=t=>{const e=String(t||"").toLowerCase();return e.includes("conclu")||e.includes("aprov")||t==="Concluda"||t==="Aprovada"},IP=t=>{const e=String(t||"").match(/@([a-zA-Z0-9_]+)/g);return e?e.map(n=>n.slice(1)):[]},Hv=t=>{if(t==null)return"";const e=Math.max(0,Math.round(t)),n=Math.floor(e/60),r=e%60;return n>0?`${n}h ${r}m`:`${r}m`},Wv=(t,e)=>{const n=t.filter(B=>String(B.status||"").toLowerCase().includes("conclu")||B.status==="Concluda"),r=n.filter(B=>(B.designer||"")===(e.designer||"")),s=n.filter(B=>(B.tipoMidia||"")===(e.tipoMidia||"")),i=n.filter(B=>(B.origem||"")===(e.origem||"")),o=n.filter(B=>(B.plataforma||"")===(e.plataforma||"")),c=(B,J)=>{const v=S=>{const[P,D,C]=String(S||"").split("-").map(Number);return P?new Date(P,D-1,C):null},y=v(B),T=v(J);return!y||!T?null:Math.max(0,Math.round((T-y)/864e5))},u=(()=>{const B=n.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),J=B.reduce((v,y)=>v+y,0)/(B.length||1);return Math.max(1,Math.round(J))})(),h=(()=>{const B=r.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),J=B.reduce((v,y)=>v+y,0)/(B.length||1);return B.length?Math.max(1,Math.round(J)):null})(),p=(()=>{const B=s.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),J=B.reduce((v,y)=>v+y,0)/(B.length||1);return B.length?Math.max(1,Math.round(J)):null})(),g=(()=>{const B=i.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),J=B.reduce((v,y)=>v+y,0)/(B.length||1);return B.length?Math.max(1,Math.round(J)):null})(),_=(()=>{const B=o.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),J=B.reduce((v,y)=>v+y,0)/(B.length||1);return B.length?Math.max(1,Math.round(J)):null})(),R=(()=>{const B=r.map(v=>v.revisoes||0),J=B.reduce((v,y)=>v+y,0)/(B.length||1);return Math.round(J)})(),b=t.filter(B=>(B.designer||"")===(e.designer||"")&&!/conclu/i.test(String(B.status||""))).length,F=Math.min(100,Math.round(b/4*100)),k=h??p??_??g??u,w=(F>=80?1:0)+(R>=2?1:0),A=Math.max(1,k+w),O=[];return O.push(`Estimativa: ${A} dia${A>1?"s":""} teis`),F>=80&&O.push("Alta probabilidade de atraso devido  carga acima de 80%"),A===1&&O.push("Pea deve ser concluda ainda hoje  Hoje at s 17h"),R>=2&&O.push("Revises esperadas acima da mdia para este designer"),O.join("  ")},TE={bg:"#070707",panel:"#0E0E0E",text:"#F2F2F2",muted:"#BDBDBD",border:"#ffffff1a",accent:"#BCD200",hover:"rgba(255,255,255,0.03)",btnBg:"#BCD200",btnText:"#111111",btnHoverBg:"#C7DB00",btnBorder:"#ffffff1a",shadow:"0 10px 30px rgba(0,0,0,.15)",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",chart:"#3b82f6"},jn=()=>{try{return new Intl.DateTimeFormat("en-CA",{timeZone:"America/Sao_Paulo",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date)}catch{const t=new Date,e=n=>String(n).padStart(2,"0");return`${t.getFullYear()}-${e(t.getMonth()+1)}-${e(t.getDate())}`}};function et({name:t,size:e=18}){const n={width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};return t==="dashboard"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"})]}):t==="demandas"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M8 3h8"}),l.jsx("path",{d:"M8 7h8"}),l.jsx("rect",{x:"5",y:"3",width:"14",height:"18",rx:"2"})]}):t==="config"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.7 1.7 0 0 0 .3 1.8l.1.1-1.5 2.6-.1.1a1.8 1.8 0 0 0-2.2.8h-.2l-3-.4h-.2a1.8 1.8 0 0 0-1.6 0h-.2l-3 .4h-.2a1.8 1.8 0 0 0-2.2-.8l-.1-.1-1.5-2.6.1-.1a1.8 1.8 0 0 0 .3-1.8v-.2l-.4-3v-.2a1.8 1.8 0 0 0 0-1.6v-.2l.4-3v-.2a1.7 1.7 0 0 0-.3-1.8l-.1-.1L4.4 4l.1-.1a1.8 1.8 0 0 0 2.2-.8h.2l3 .4h.2a1.8 1.8 0 0 0 1.6 0h.2l3-.4h.2a1.8 1.8 0 0 0 2.2.8l.1.1 1.5 2.6-.1.1a1.8 1.8 0 0 0-.3 1.8v.2l.4 3v.2a1.8 1.8 0 0 0 0 1.6v.2Z"})]}):t==="cadastros"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M4 6h16"}),l.jsx("path",{d:"M4 12h10"}),l.jsx("path",{d:"M4 18h7"})]}):t==="relatorios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 20h18"}),l.jsx("rect",{x:"6",y:"14",width:"3",height:"6"}),l.jsx("rect",{x:"11",y:"10",width:"3",height:"10"}),l.jsx("rect",{x:"16",y:"6",width:"3",height:"14"})]}):t==="usuarios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"3"}),l.jsx("path",{d:"M19 8v6"}),l.jsx("path",{d:"M22 11h-6"})]}):t==="filter"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"11",cy:"11",r:"7"}),l.jsx("path",{d:"M20 20l-3.5-3.5"})]}):t==="table"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M3 10h18"}),l.jsx("path",{d:"M10 4v16"})]}):t==="board"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"10",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"17",y:"4",width:"4",height:"16",rx:"2"})]}):t==="calendar"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M16 3v4"}),l.jsx("path",{d:"M8 3v4"}),l.jsx("path",{d:"M3 11h18"})]}):t==="close"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M18 6L6 18"}),l.jsx("path",{d:"M6 6l12 12"})]}):t==="clock"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"9"}),l.jsx("path",{d:"M12 7v5l3 3"})]}):t==="paperclip"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21.44 11.05 12.5 20a5 5 0 1 1-7.07-7.07L14.36 4a3.5 3.5 0 0 1 4.95 4.95l-9.19 9.19"})}):t==="chat"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4Z"})}):t==="check"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M20 6 9 17l-5-5"})}):t==="plus"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"})]}):t==="dot"?l.jsx("svg",{...n,children:l.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor",stroke:"none"})}):t==="alert"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"}),l.jsx("path",{d:"M12 9v4"}),l.jsx("path",{d:"M12 17h.01"})]}):t==="trash"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 6h18"}),l.jsx("path",{d:"M8 6V4h8v2"}),l.jsx("rect",{x:"5",y:"6",width:"14",height:"14",rx:"2"})]}):t==="logout"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("path",{d:"M16 17l5-5-5-5"}),l.jsx("path",{d:"M21 12H9"})]}):t==="link"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 1 0-7.07-7.07L10 4"}),l.jsx("path",{d:"M14 11a5 5 0 0 1-7.07 0L3.39 7.46a5 5 0 1 1 7.07-7.07L14 4"})]}):t==="tag"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M20 10V4H14L4 14l6 6 10-10Z"}),l.jsx("circle",{cx:"16.5",cy:"7.5",r:"1.5"})]}):t==="edit"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M4 13v4h4"}),l.jsx("path",{d:"M14.5 3.5l6 6"}),l.jsx("path",{d:"M12 6l6 6L9 21H4v-5z"})]}):t==="minus"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M5 12h14"})}):null}function CP({onNew:t,view:e,setView:n,showNew:r,user:s,onLogout:i,mentions:o,onOpenDemanda:c}){const[u,h]=Q.useState(!1);return l.jsxs("div",{className:"topbar",children:[l.jsx("div",{className:"topbar-left",children:l.jsx("div",{className:"team",children:"Equipe de Marketing"})}),l.jsx("div",{className:"topbar-right",children:s?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{className:"chip",children:s.name||s.username}),l.jsxs("button",{className:"icon notif-btn",onClick:()=>h(p=>!p),title:"Menes",children:[l.jsx("span",{className:"icon",children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2Z"}),l.jsx("path",{d:"M18 8a6 6 0 0 0-12 0c0 7-3 7-3 7h18s-3 0-3-7Z"})]})}),Array.isArray(o)&&o.length>0?l.jsx("span",{className:"notif-dot",children:o.length}):null]}),u?l.jsxs("div",{className:"notif-dropdown",onMouseLeave:()=>h(!1),children:[(o||[]).slice(0,6).map(p=>l.jsxs("button",{className:"notif-item",type:"button",onClick:()=>{c&&c(p.id),h(!1)},children:[l.jsx("span",{className:"title",children:p.titulo}),l.jsx("span",{className:"msg",children:p.msg})]},`${p.id}-${p.quando||""}`)),!o||o.length===0?l.jsx("div",{className:"notif-empty",children:"Sem menes"}):null]}):null,l.jsxs("button",{className:"primary",onClick:i,children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"logout"})}),l.jsx("span",{children:"Sair"})]})]}):null})]})}function xP({view:t,setView:e}){return l.jsxs("div",{className:"tabs-inline",children:[l.jsxs("button",{className:`tab-btn ${t==="table"?"active":""}`,onClick:()=>e("table"),children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"table"})}),l.jsx("span",{children:"Table"})]}),l.jsxs("button",{className:`tab-btn ${t==="calendar"?"active":""}`,onClick:()=>e("calendar"),children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"calendar"})}),l.jsx("span",{children:"Calendar"})]})]})}function AP({onLogin:t}){const[e,n]=Q.useState(""),[r,s]=Q.useState(""),[i,o]=Q.useState(!1),[c,u]=Q.useState(""),h=async p=>{if(p.preventDefault(),!i){u(""),o(!0);try{await t(e,r)}catch(g){const R=String((g==null?void 0:g.code)||"")==="auth/operation-not-allowed"?"Domnio no autorizado no Firebase Auth. Adicione o domnio do site nas configuraes.":g&&(g.code||g.message)||"Falha ao entrar";u(String(R))}finally{o(!1)}}};return l.jsxs("div",{className:"login-wrap",children:[l.jsx("div",{className:"login-banner",children:"BANNER TELA LOGIN"}),l.jsxs("div",{className:"login-card",children:[l.jsx("div",{className:"login-title",children:"Gerenciamento Mkt!"}),l.jsxs("form",{onSubmit:h,className:"login-form",children:[l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",placeholder:"Usurio",value:e,onChange:p=>n(p.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"8",r:"4"}),l.jsx("path",{d:"M4 20c0-4 4-6 8-6s8 2 8 6"})]})})]}),l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",type:"password",placeholder:"Insira sua senha",value:r,onChange:p=>s(p.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),c?l.jsx("div",{className:"login-error",role:"alert",children:c}):null,l.jsx("div",{className:"login-links",children:l.jsx("a",{href:"#",onClick:p=>p.preventDefault(),children:"Esqueceu sua senha?"})}),l.jsx("button",{className:"primary btn-lg",type:"submit",disabled:i,children:i?"Entrando...":"Entrar"})]})]})]})}function kP({open:t,filtros:e,setFiltros:n,designers:r,onClose:s,cadStatus:i,cadTipos:o,origens:c,campanhas:u}){const h=(g,_)=>n(R=>({...R,[g]:_})),p=()=>n({designer:"",status:"",cIni:"",cFim:"",sIni:"",sFim:""});return t?l.jsx("div",{className:"modal",onClick:s,children:l.jsxs("div",{className:"modal-dialog",onClick:g=>g.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"filter"})}),l.jsx("span",{children:"Filtros"})]}),l.jsx("button",{className:"icon",onClick:s,children:l.jsx(et,{name:"close"})})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Comparativo Mensal"}),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Produo"})}),(()=>{const g=concluidos.filter(k=>inMonth(k.dataConclusao,mesAtual)).length,_=concluidos.filter(k=>inMonth(k.dataConclusao,mesPassado)).length,R=Math.max(g,_,1),b=220,N=80,F=(k,w)=>l.jsx("rect",{x:w,y:N-k/R*N,width:"40",height:k/R*N,rx:"6"});return l.jsxs("svg",{width:b,height:N,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:F(g,40)}),l.jsx("g",{fill:"#4DA3FF",children:F(_,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Qualidade (retrabalho)"})}),(()=>{const g=concluidos.filter(A=>inMonth(A.dataConclusao,mesAtual)).map(A=>A.revisoes||0),_=concluidos.filter(A=>inMonth(A.dataConclusao,mesPassado)).map(A=>A.revisoes||0),R=+(g.reduce((A,O)=>A+O,0)/(g.length||1)).toFixed(2),b=+(_.reduce((A,O)=>A+O,0)/(_.length||1)).toFixed(2),N=Math.max(R,b,1),F=220,k=80,w=(A,O)=>l.jsx("rect",{x:O,y:k-A/N*k,width:"40",height:A/N*k,rx:"6"});return l.jsxs("svg",{width:F,height:k,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:w(R,40)}),l.jsx("g",{fill:"#FF5E5E",children:w(b,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Lead-time"})}),(()=>{const g=compMesAtual,_=compMesPassado,R=Math.max(g,_,1),b=220,N=80,F=(k,w)=>l.jsx("rect",{x:w,y:N-k/R*N,width:"40",height:k/R*N,rx:"6"});return l.jsxs("svg",{width:b,height:N,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:F(g,40)}),l.jsx("g",{fill:"#9B59B6",children:F(_,140)})]})})()]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Insights Automticos"}),l.jsx("div",{className:"insights-grid",children:(()=>{const g=(()=>{const k={};return concluidos.forEach(A=>{const O=A.designer||"",B=A.prazo&&A.dataConclusao&&A.dataConclusao<=A.prazo,J=A.prazo&&A.dataConclusao,v=k[O]||{ok:0,total:0};k[O]={ok:v.ok+(B?1:0),total:v.total+(J?1:0)}}),Object.entries(k).map(([A,O])=>({designer:A,pct:Math.round(100*(O.ok/(O.total||1)))})).sort((A,O)=>O.pct-A.pct)[0]})(),_=(()=>{const k={};return items.forEach(A=>{const O=A.origem||"Outros";k[O]=(k[O]||0)+1}),Object.entries(k).map(([A,O])=>({origem:A,q:O})).sort((A,O)=>O.q-A.q)[0]})(),R=concluidos.filter(k=>(k.revisoes||0)===0).length===concluidos.length,b=compMesAtual<=compMesPassado,N=(()=>{const k=concluidos.filter(A=>/stor/i.test(String(A.tipoMidia||""))),w=+(k.reduce((A,O)=>A+(O.revisoes||0),0)/(k.length||1)).toFixed(2);return{qtd:k.length,avg:w}})(),F=[];return g&&F.push(`O designer ${g.designer} teve o melhor SLA do ms (${g.pct}%)`),_&&F.push(`${_.origem} foi o canal mais solicitado`),R&&F.push("Nenhuma demanda apresentou retrabalho neste ms"),b&&F.push("Seu lead-time melhorou em relao ao ms anterior"),N.qtd>0&&F.push("A categoria Stories teve o maior retrabalho do ms"),F})().map((g,_)=>l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:g})]},_))})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:e.designer,onChange:g=>h("designer",g.target.value),children:[l.jsx("option",{value:"",children:"Designer"}),r.map(g=>l.jsx("option",{value:g,children:g},g))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{className:"status-select",value:e.status,onChange:g=>h("status",g.target.value),children:[l.jsx("option",{value:"",children:"Status"}),yo.map(g=>l.jsx("option",{value:g,children:Up(g)},g))]}),l.jsx("div",{className:"chips",children:yo.map(g=>l.jsx("button",{className:`chip ${e.status===g?"active":""}`,onClick:()=>h("status",e.status===g?"":g),children:g},g))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("div",{className:"chips",children:o.map(g=>l.jsx("button",{className:`chip ${e.tipoMidia===g?"active":""}`,onClick:()=>h("tipoMidia",e.tipoMidia===g?"":g),children:g},g))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem"}),l.jsx("div",{className:"chips",children:(c||EE).map(g=>l.jsx("button",{className:`chip ${e.origem===g?"active":""}`,onClick:()=>h("origem",e.origem===g?"":g),children:g},g))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsxs("select",{value:e.campanha||"",onChange:g=>h("campanha",g.target.value),children:[l.jsx("option",{value:"",children:"Campanha"}),(u||[]).map(g=>l.jsx("option",{value:g,children:g},g))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.cIni,onChange:g=>h("cIni",g.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.cFim,onChange:g=>h("cFim",g.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.sIni,onChange:g=>h("sIni",g.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.sFim,onChange:g=>h("sFim",g.target.value)})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsxs("button",{className:"icon",onClick:p,children:[l.jsx(et,{name:"close"}),l.jsx("span",{children:"Limpar"})]}),l.jsx("button",{className:"primary",onClick:s,children:"Aplicar"})]})]})}):null}function NP(t,e){const n=s=>String(s||"").toLowerCase(),r=(s,i)=>{if(!i)return!0;const o=String(i);return o==="Pendente"?_o(s):o==="Em produo"?pr(s):o==="Aguardando Feedback"?n(s).includes("feedback"):o==="Revisar"?n(s).includes("revisar"):o==="Aprovada"?n(s).includes("aprov"):o==="Concluida"||o==="Concluda"?n(s).includes("conclu")||s==="Concluda":String(s)===o};return t.filter(s=>!(e.q&&!(s.titulo||"").toLowerCase().includes(e.q.toLowerCase())||e.designer&&s.designer!==e.designer||e.status&&!r(s.status,e.status)||e.tipoMidia&&s.tipoMidia!==e.tipoMidia||e.plataforma&&(s.plataforma||"")!==e.plataforma||e.origem&&(s.origem||"")!==e.origem||e.campanha&&(s.campanha||"")!==e.campanha||e.cIni&&s.prazo&&s.prazo<e.cIni||e.cFim&&s.prazo&&s.prazo>e.cFim||e.sIni&&s.prazo&&s.prazo<e.sIni||e.sFim&&s.prazo&&s.prazo>e.sFim))}function PP({items:t,onEdit:e,onStatus:n,cadStatus:r,cadTipos:s,cadOrigens:i,designers:o,onBulkUpdate:c,onDelete:u,onDuplicate:h,hasMore:p,showMore:g,canCollapse:_,showLess:R,shown:b,total:N,compact:F,canEdit:k,canChangeStatus:w,loading:A}){const[O,B]=Q.useState(null),J=te=>String(te).padStart(2,"0");(te=>{const ue=new Date(Date.UTC(te.getFullYear(),te.getMonth(),te.getDate())),ke=ue.getUTCDay()||7;ue.setUTCDate(ue.getUTCDate()+4-ke);const Me=new Date(Date.UTC(ue.getUTCFullYear(),0,1)),Ue=Math.ceil(((ue-Me)/864e5+1)/7);return`${ue.getUTCFullYear()}-W${J(Ue)}`})(new Date);const y=te=>{if(!te)return"";const[ue,ke,Me]=String(te).split("-").map(Number),Ue=String(Me).padStart(2,"0"),it=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"][Math.max(0,Math.min(11,ke-1||0))];return`${Ue}.${it}`},[T,S]=Q.useState("created"),[P,D]=Q.useState("desc"),[C,qe]=Q.useState(()=>new Set),[Ye,vt]=Q.useState({status:"",tipoMidia:"",origem:"",designer:"",dataCriacao:""}),[Ct,L]=Q.useState(!1),ee=(te,ue)=>{if(ue==="created"){const Me=te.createdAt,Ue=Me&&typeof Me=="object"&&"seconds"in Me?(Me.seconds||0)*1e3+(Me.nanoseconds||0)/1e6:Me?Date.parse(Me):0,it=Date.parse(te.dataCriacao||"")||0,Bt=Date.parse(te.dataSolicitacao||"")||0;return Ue||it||Bt||0}if(ue==="prazo"||ue==="dataCriacao"||ue==="dataSolicitacao")return Date.parse(te[ue]||"")||0;if(ue==="drive")return te.linkDrive?1:0;const ke=te[ue];return typeof ke=="string"?ke.toLowerCase():ke||""},ie=Q.useMemo(()=>(Array.isArray(t)?t.slice():[]).sort((ue,ke)=>{const Me=ee(ue,T),Ue=ee(ke,T);if(typeof Me=="number"&&typeof Ue=="number")return P==="desc"?Ue-Me:Me-Ue;const it=String(Ue||"").localeCompare(String(Me||""));return P==="desc"?it:-it}),[t,T,P]),ve=(te,ue)=>l.jsxs("th",{onClick:()=>{T===ue?D(ke=>ke==="desc"?"asc":"desc"):(S(ue),D("desc"))},children:[te," ",T===ue?P==="desc"?"":"":""]}),Se=ie.length>0&&ie.every(te=>C.has(String(te.id))),Re=()=>qe(te=>{const ue=new Set(te);return Se?ie.forEach(ke=>ue.delete(String(ke.id))):ie.forEach(ke=>ue.add(String(ke.id))),ue}),yt=te=>qe(ue=>{const ke=new Set(ue),Me=String(te);return ke.has(Me)?ke.delete(Me):ke.add(Me),ke}),nt=()=>qe(new Set),ct=async()=>{if(Ct)return;L(!0);const te=Array.from(C),ue={};Object.entries(Ye).forEach(([ke,Me])=>{Me&&(ue[ke]=Me)}),te.length&&Object.keys(ue).length&&c&&(await c(te,ue),nt(),vt({status:"",tipoMidia:"",origem:"",designer:"",dataCriacao:""})),L(!1)};return A?l.jsxs("div",{className:`table ${F?"compact":""}`,children:[l.jsx("div",{className:"skeleton row",style:{width:"60%"}}),Array.from({length:8}).map((te,ue)=>l.jsx("div",{className:"skeleton row",style:{width:`${90-ue*6}%`}},ue))]}):l.jsxs("div",{className:`table ${F?"compact":""}`,style:C.size>0?{paddingBottom:80}:void 0,children:[C.size>0&&l.jsxs("div",{className:"bulk-bar",style:{position:"fixed",left:0,right:0,bottom:0,display:"flex",gap:12,alignItems:"center",padding:"10px 16px",background:"#fff",boxShadow:"0 -8px 24px rgba(0,0,0,0.12)",borderTop:"1px solid #e5e7eb",zIndex:999},children:[l.jsxs("span",{style:{color:"var(--muted)"},children:["Selecionadas: ",C.size]}),l.jsxs("select",{value:Ye.status,onChange:te=>vt(ue=>({...ue,status:te.target.value})),children:[l.jsx("option",{value:"",children:"Status"}),yo.map(te=>l.jsx("option",{value:te,children:te},te))]}),l.jsxs("select",{value:Ye.tipoMidia,onChange:te=>vt(ue=>({...ue,tipoMidia:te.target.value})),children:[l.jsx("option",{value:"",children:"Tipo"}),(s||[]).map(te=>l.jsx("option",{value:te,children:te},te))]}),l.jsxs("select",{value:Ye.origem,onChange:te=>vt(ue=>({...ue,origem:te.target.value})),children:[l.jsx("option",{value:"",children:"Origem"}),(i||[]).map(te=>l.jsx("option",{value:te,children:te},te))]}),l.jsxs("select",{value:Ye.designer,onChange:te=>vt(ue=>({...ue,designer:te.target.value})),children:[l.jsx("option",{value:"",children:"Designer"}),(o||[]).map(te=>l.jsx("option",{value:te,children:te},te))]}),l.jsx("input",{type:"date",value:Ye.dataCriacao||"",onChange:te=>vt(ue=>({...ue,dataCriacao:te.target.value}))}),l.jsx("button",{className:"primary",type:"button",onClick:ct,disabled:!k||Ct,children:"Salvar"}),l.jsx("button",{className:"tertiary",type:"button",onClick:nt,children:"Limpar seleo"})]}),l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:l.jsx("input",{type:"checkbox",checked:Se,onChange:Re})}),ve("Nome","titulo"),ve("Designer","designer"),ve("Status","status"),ve("Data de Solicitao","dataSolicitacao"),ve("Data de Criao","created"),ve("Prazo","prazo"),ve("Tipo","tipoMidia"),ve("Origem","origem"),ve("Drive","drive")]})}),l.jsx("tbody",{children:ie.map(te=>l.jsxs("tr",{className:"row-clickable",onClick:()=>e(te),children:[l.jsx("td",{children:l.jsx("input",{type:"checkbox",checked:C.has(String(te.id)),onClick:ue=>ue.stopPropagation(),onChange:()=>yt(te.id)})}),l.jsx("td",{className:"name",children:te.titulo}),l.jsx("td",{children:l.jsx("div",{children:te.designer})}),l.jsx("td",{children:l.jsx("select",{className:`status-select ${SE(te.status)}`,value:te.status,onChange:ue=>n(te.id,ue.target.value),onClick:ue=>ue.stopPropagation(),disabled:!w,children:yo.map(ue=>l.jsx("option",{value:ue,children:Up(ue)},ue))})}),l.jsx("td",{children:y(te.dataSolicitacao)}),l.jsx("td",{children:y(te.dataCriacao)}),l.jsx("td",{children:y(te.prazo)}),l.jsx("td",{children:te.tipoMidia}),l.jsx("td",{children:te.origem||""}),l.jsx("td",{children:te.linkDrive?l.jsx("a",{href:te.linkDrive,target:"_blank",rel:"noreferrer",onClick:ue=>ue.stopPropagation(),children:"Abrir Drive"}):""}),l.jsx("td",{children:Array.isArray(te.arquivos)&&te.arquivos.length?l.jsx("div",{className:"files",children:te.arquivos.slice(0,5).map(ue=>l.jsx("a",{href:ue.url,target:"_blank",rel:"noreferrer",title:ue.name,onClick:ke=>ke.stopPropagation(),children:l.jsx("img",{className:"file-thumb",src:ue.url,alt:ue.name})},ue.name))}):te.arquivoNome||""})]},te.id))})]}),l.jsxs("div",{className:"table-footer",children:[p&&l.jsx("button",{className:"primary",onClick:g,children:"Mostrar mais demandas"}),_&&l.jsx("button",{className:"tertiary",onClick:R,children:"Mostrar menos demandas"})]})]})}function RP({items:t,refDate:e}){const n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0),s=n.getDay(),i=r.getDate(),o={};t.forEach(u=>{const h=u.dataSolicitacao,p=new Date(h);p.getMonth()===e.getMonth()&&p.getFullYear()===e.getFullYear()&&(o[h]||(o[h]=[])).push(u)});const c=[];for(let u=0;u<s;u++)c.push(null);for(let u=1;u<=i;u++)c.push(u);return l.jsxs("div",{className:"calendar",children:[l.jsx("div",{className:"cal-head",children:l.jsx("div",{className:"month",children:e.toLocaleString("pt-BR",{month:"long",year:"numeric"})})}),l.jsxs("div",{className:"cal-grid",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(u=>l.jsx("div",{className:"cal-cell head",children:u},u)),c.map((u,h)=>{if(!u)return l.jsx("div",{className:"cal-cell"},h);const p=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`,g=o[p]||[];return l.jsxs("div",{className:"cal-cell",children:[l.jsx("div",{className:"day",children:u}),g.map(_=>l.jsxs("div",{className:"cal-item",children:[_.titulo," (",_.designer,")"]},_.id))]},h)})]})]})}function jP({open:t,mode:e,onClose:n,onSubmit:r,initial:s,cadTipos:i,designers:o,cadPlataformas:c,onDelete:u,userLabel:h,canDelete:p,onAddComment:g,cadOrigens:_,currentUser:R,usersAll:b,canEdit:N,canChangeStatus:F,displayUser:k,onStatus:w}){const[A,O]=Q.useState((s==null?void 0:s.designer)||R||""),[B,J]=Q.useState((s==null?void 0:s.tipoMidia)||"Post"),[v,y]=Q.useState((s==null?void 0:s.titulo)||""),[T,S]=Q.useState((s==null?void 0:s.link)||""),[P,D]=Q.useState((s==null?void 0:s.linkDrive)||""),[C,qe]=Q.useState(""),[Ye,vt]=Q.useState((s==null?void 0:s.dataSolicitacao)||jn()),[Ct,L]=Q.useState((s==null?void 0:s.plataforma)||""),[ee,ie]=Q.useState((s==null?void 0:s.arquivos)||[]),[ve,Se]=Q.useState((s==null?void 0:s.dataCriacao)||""),[Re,yt]=Q.useState((s==null?void 0:s.dataFeedback)||""),[nt,ct]=Q.useState((s==null?void 0:s.descricao)||""),[te,ue]=Q.useState((s==null?void 0:s.prazo)||""),[ke,Me]=Q.useState((s==null?void 0:s.comentarios)||[]),[Ue,it]=Q.useState(""),[Bt,$t]=Q.useState(""),[qt,_t]=Q.useState(!1),[pt,M]=Q.useState([]),W=Q.useRef(null),[V,se]=Q.useState(!1),[me,j]=Q.useState((s==null?void 0:s.historico)||[]),[Z,G]=Q.useState((s==null?void 0:s.origem)||""),[pe,xe]=Q.useState((s==null?void 0:s.campanha)||""),[_e,ze]=Q.useState(""),[De,ot]=Q.useState(!1);Q.useEffect(()=>{O((s==null?void 0:s.designer)||R||""),J((s==null?void 0:s.tipoMidia)||"Post"),y((s==null?void 0:s.titulo)||""),S((s==null?void 0:s.link)||""),D((s==null?void 0:s.linkDrive)||""),qe(""),vt((s==null?void 0:s.dataSolicitacao)??(e==="create"?jn():"")),L((s==null?void 0:s.plataforma)||(c==null?void 0:c[0])||""),ie((s==null?void 0:s.arquivos)||[]),Se((s==null?void 0:s.dataCriacao)||""),yt((s==null?void 0:s.dataFeedback)||""),ct((s==null?void 0:s.descricao)||""),ue((s==null?void 0:s.prazo)||""),Me((s==null?void 0:s.comentarios)||[]),it(""),j((s==null?void 0:s.historico)||[]),G((s==null?void 0:s.origem)||""),xe((s==null?void 0:s.campanha)||"")},[s,t,o,i,c,_]);const ht=$=>{$.preventDefault(),r({designer:A,tipoMidia:B,titulo:v,link:T,linkDrive:P,arquivoNome:C,dataSolic:Ye,dataCriacao:ve,dataFeedback:Re,plataforma:Ct,arquivos:ee,descricao:nt,prazo:te,comentarios:ke,historico:me,origem:Z,campanha:pe})},Ne=()=>{const $=Ue.trim();if(!$)return;const Te=IP($),Ae={texto:$,data:jn(),mentions:Te,autor:h},ge={tipo:"comentario",autor:h,data:Ae.data,texto:$,mentions:Te};Me(U=>[Ae,...U]),j(U=>[ge,...U]),it("");try{g&&g(s==null?void 0:s.id,Ae,ge)}catch{}},Xe=$=>{if(!$)return"";try{return new Date($).toLocaleString("pt-BR",{timeZone:"America/Sao_Paulo",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return $}},[m,x]=Q.useState(Date.now());Q.useEffect(()=>{const $=setInterval(()=>x(Date.now()),1e3);return()=>clearInterval($)},[]);const I=$=>{if(!$||$<=0)return"00:00:00";const Te=Math.floor($/1e3),Ae=String(Math.floor(Te/3600)).padStart(2,"0"),ge=String(Math.floor(Te%3600/60)).padStart(2,"0"),U=String(Te%60).padStart(2,"0");return`${Ae}:${ge}:${U}`},H=Number((s==null?void 0:s.tempoProducaoMs)||0),he=s!=null&&s.startedAt?Date.parse(s.startedAt):null,Le=/produ|progresso/i.test(String((s==null?void 0:s.status)||"")),We=Q.useRef(null);Q.useEffect(()=>{!he&&Le&&!We.current&&(We.current=Date.now()),(he||!Le)&&(We.current=null)},[he,Le]);const Zt=he??We.current,wt=H+(Zt?Math.max(0,m-Zt):0),[rt,Be]=Q.useState(null),He=$=>String($||"").replace(/[&<>]/g,U=>U==="&"?"&amp;":U==="<"?"&lt;":"&gt;").replace(/((https?:\/\/|www\.)[^\s]+)/gi,U=>`<a href="${/^https?:\/\//i.test(U)?U:`https://${U}`}" target="_blank" rel="noreferrer">${U}</a>`).replace(/\n/g,"<br/>");return t?l.jsx("div",{className:"modal",children:l.jsxs("div",{className:`modal-dialog ${e!=="create"?"tall":""}`,onClick:$=>$.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[e==="create"?l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}):l.jsx("input",{className:"title editable",type:"text",dir:"ltr",placeholder:"Sem ttulo",value:v,onChange:$=>y($.target.value)}),l.jsx("button",{className:"icon",onClick:n,children:l.jsx(et,{name:"close"})})]}),l.jsxs("div",{className:"modal-actions-inline",children:[l.jsx("button",{className:"action-btn",type:"button",onClick:()=>ot($=>!$),children:""}),De&&l.jsx("div",{className:"context-menu",onClick:$=>$.stopPropagation(),children:e==="edit"&&p&&l.jsx("button",{className:"tertiary",type:"button",onClick:()=>{ot(!1),window.confirm("Confirmar excluso desta demanda?")&&(u(s.id),n())},children:"Excluir demanda"})})]}),l.jsxs("div",{className:`status-bar ${SE((s==null?void 0:s.status)||"Aberta")}`,children:[l.jsx("div",{children:(s==null?void 0:s.status)||"Aberta"}),e!=="create"&&l.jsx("select",{value:(s==null?void 0:s.status)||"Aberta",onChange:$=>{try{w&&w(s==null?void 0:s.id,$.target.value)}catch{}},disabled:!F,style:{marginLeft:8},children:yo.map($=>l.jsx("option",{value:$,children:Up($)},$))}),e!=="create"&&l.jsxs("div",{className:"timer",children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"clock"})}),l.jsx("span",{children:I(wt)})]})]}),l.jsx("form",{id:"modalForm",className:"modal-body",onSubmit:ht,children:l.jsxs("div",{className:`modal-columns ${e==="create"?"single":"cols3"}`,children:[l.jsxs("div",{className:"modal-main",children:[l.jsxs("div",{className:e==="create"?"form-grid":"form-stack",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:A,onChange:$=>O($.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Designer"}),(o||[]).map($=>l.jsx("option",{value:$,children:$},$))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("select",{value:B,onChange:$=>J($.target.value),children:(i||["Post","Story","Banner","Vdeo","Outro"]).map($=>l.jsx("option",{value:$,children:$},$))})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Titulo"}),l.jsx("input",{value:v,onChange:$=>y($.target.value),required:!0})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link de Referncia"}),l.jsx("input",{type:"url",value:T,onChange:$=>S($.target.value),placeholder:"https://"})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem da Demanda"}),l.jsxs("select",{value:Z,onChange:$=>G($.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Origem"}),(_||EE).map($=>l.jsx("option",{value:$,children:$},$))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsx("input",{value:pe,onChange:$=>xe($.target.value),placeholder:"Ex: Black Friday"})]}),e!=="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link de Referncia"}),l.jsx("input",{type:"url",value:T,onChange:$=>S($.target.value),placeholder:"https://"}),T?l.jsx("div",{style:{marginTop:6},children:l.jsx("a",{href:T,target:"_blank",rel:"noreferrer",children:"Abrir link"})}):null]}),e!=="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link do Drive"}),l.jsx("input",{type:"url",value:P,onChange:$=>D($.target.value),placeholder:"https://"}),P?l.jsx("div",{style:{marginTop:6},children:l.jsx("a",{href:P,target:"_blank",rel:"noreferrer",children:"Abrir Drive"})}):null]}),e==="create"?l.jsxs("div",{className:"row-2",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsx("input",{type:"date",value:Ye,onChange:$=>vt($.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:te,onChange:$=>ue($.target.value)})]})]}):l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:$=>{const Ae=Array.from($.target.files||[]).filter(z=>(z.size||0)<=1048576).slice(0,5),ge=new Date().toISOString(),U=Ae.map(z=>new Promise(K=>{const ce=new FileReader;ce.onload=()=>K({name:z.name,url:ce.result,addedBy:h,addedAt:ge}),ce.readAsDataURL(z)}));Promise.all(U).then(z=>{ie(z),j(ce=>[{tipo:"arquivo",autor:h,data:jn(),arquivos:z},...ce]);const K=z.map(ce=>ce.name).join(", ");Me(ce=>[{texto:`Arquivos anexados: ${K||z.length}`,data:jn()},...ce])})}}),Array.isArray(ee)&&ee.length>0&&l.jsx("div",{className:"thumbs",children:ee.map(($,Te)=>l.jsxs("div",{className:"file-item",children:[l.jsx("img",{className:"file-thumb",src:$.url,alt:$.name}),l.jsxs("div",{className:"file-meta",children:[$.name,$.addedBy?`  ${$.addedBy}`:""]}),l.jsxs("div",{className:"file-actions",children:[l.jsx("a",{href:$.url,download:!0,target:"_blank",rel:"noreferrer",children:"Baixar"}),l.jsxs("label",{className:"replace-btn",children:["Substituir",l.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:Ae=>{var K;const ge=(K=Ae.target.files)==null?void 0:K[0];if(!ge)return;const U=new FileReader,z=new Date().toISOString();U.onload=()=>{const ce={name:ge.name,url:U.result,addedBy:h,addedAt:z};ie(oe=>oe.map((de,X)=>X===Te?ce:de))},U.readAsDataURL(ge)}})]}),l.jsx("button",{type:"button",onClick:()=>ie(Ae=>Ae.filter((ge,U)=>U!==Te)),children:"Excluir"})]})]},$.name+Te))})]})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:8,className:"desc-input",value:nt,onChange:$=>ct($.target.value)}),/(https?:\/\/|www\.)/i.test(String(nt||""))?l.jsx("div",{className:"desc-preview",dangerouslySetInnerHTML:{__html:He(nt)}}):null]}),e==="create"&&l.jsxs("div",{className:"activity",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Comentrios"}),l.jsx("input",{ref:W,placeholder:"Escreva um comentrio use @ para mencionar",value:Ue,onChange:$=>{const Te=$.target.value,Ae=$.target.selectionStart||Te.length;it(Te);const ge=Te.lastIndexOf("@",(Ae||Te.length)-1);if(ge>=0){const U=Te.slice(ge+1),z=U.indexOf(" "),K=U.indexOf(`
`),ce=z>=0&&K>=0?Math.min(z,K):z>=0?z:K>=0?K:-1,oe=ce>=0?U.slice(0,ce):U.slice(0,Ae-(ge+1)),de=String(oe||"").trim();if($t(de),de.length>0){const X=de.toLowerCase(),ne=(b||[]).filter(ye=>String(ye.username||"").toLowerCase().includes(X)||String(ye.name||"").toLowerCase().includes(X)).slice(0,6);M(ne),_t(ne.length>0)}else _t(!1),M([])}else _t(!1),M([])},onBlur:()=>setTimeout(()=>_t(!1),80)}),qt&&pt.length>0&&l.jsx("div",{className:"mentions-suggest",children:pt.map($=>l.jsxs("div",{className:"suggest-item",onMouseDown:Te=>{Te.preventDefault();const Ae=W.current,ge=String(Ue||""),U=Ae&&Ae.selectionStart||ge.length,z=ge.lastIndexOf("@",(U||ge.length)-1),K=ge.slice(0,z),ce=ge.slice(z+1),oe=ce.indexOf(" "),de=ce.indexOf(`
`),X=oe>=0&&de>=0?Math.min(oe,de):oe>=0?oe:de>=0?de:-1,ne=X>=0?z+1+X:U,ye=ge.slice(ne),je=`@${$.username||$.name}`,$e=`${K}${je} ${ye}`;it($e),_t(!1),M([]),$t(""),setTimeout(()=>{try{const ut=W.current;if(ut){const Ke=K.length+je.length+1;ut.focus(),ut.setSelectionRange(Ke,Ke)}}catch{}},0)},children:["@",$.username||"","  ",$.name||$.username]},$.id||$.username))}),Ue.trim().length>0&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:l.jsx("button",{className:"primary",type:"button",onClick:Ne,children:"Adicionar"})})]}),l.jsxs("div",{className:"activity-list",children:[(ke||[]).length===0?l.jsx("div",{className:"empty",children:"Sem comentrios"}):(V?ke||[]:(ke||[]).slice(0,2)).map(($,Te)=>l.jsx("div",{className:"activity-item",children:l.jsxs("div",{className:"activity-entry",children:[l.jsx("div",{className:"avatar",children:"V"}),l.jsxs("div",{className:"entry-content",children:[l.jsx("div",{className:"entry-title",children:l.jsxs("span",{children:[l.jsx("strong",{children:k($.autor||"")})," comentou: ",$.texto]})}),l.jsx("div",{className:"entry-time",children:Xe($.data)}),Array.isArray($.mentions)&&$.mentions.length>0&&l.jsx("div",{className:"mentions-row",children:$.mentions.map(Ae=>l.jsxs("span",{className:`mention-pill ${String(h||"").toLowerCase()===String(Ae||"").toLowerCase()?"you":""}`,children:["@",Ae,String(h||"").toLowerCase()===String(Ae||"").toLowerCase()?"  Voc foi mencionado":""]},Ae))})]})]})},Te)),(ke||[]).length>2&&l.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:l.jsx("button",{className:"tertiary",type:"button",onClick:()=>se($=>!$),children:V?"Mostrar menos":`Ver todos os comentrios (${(ke||[]).length-2} mais)`})})]})]})]}),e!=="create"&&l.jsxs("div",{className:"modal-center",children:[l.jsxs("div",{className:"date-row",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsx("input",{type:"date",value:Ye,onChange:$=>vt($.target.value),disabled:!N})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsx("input",{type:"date",value:ve,onChange:$=>Se($.target.value),disabled:!N})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:te,onChange:$=>ue($.target.value)})]}),String((s==null?void 0:s.status)||"").toLowerCase().includes("feedback")&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Feedback"}),l.jsx("input",{type:"date",value:Re,onChange:$=>yt($.target.value),disabled:!N})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:12,className:"desc-input",value:nt,onChange:$=>ct($.target.value)}),/(https?:\/\/|www\.)/i.test(String(nt||""))?l.jsx("div",{className:"desc-preview",dangerouslySetInnerHTML:{__html:He(nt)}}):null]}),l.jsxs("div",{className:"activity",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Comentrios"}),l.jsx("input",{ref:W,placeholder:"Escreva um comentrio use @ para mencionar",value:Ue,onChange:$=>{const Te=$.target.value,Ae=$.target.selectionStart||Te.length;it(Te);const ge=Te.lastIndexOf("@",(Ae||Te.length)-1);if(ge>=0){const U=Te.slice(ge+1),z=U.indexOf(" "),K=U.indexOf(`
`),ce=z>=0&&K>=0?Math.min(z,K):z>=0?z:K>=0?K:-1,oe=ce>=0?U.slice(0,ce):U.slice(0,Ae-(ge+1)),de=String(oe||"").trim();if($t(de),de.length>0){const X=de.toLowerCase(),ne=(b||[]).filter(ye=>String(ye.username||"").toLowerCase().includes(X)||String(ye.name||"").toLowerCase().includes(X)).slice(0,6);M(ne),_t(ne.length>0)}else _t(!1),M([])}else _t(!1),M([])},onBlur:()=>setTimeout(()=>_t(!1),80)}),qt&&pt.length>0&&l.jsx("div",{className:"mentions-suggest",children:pt.map($=>l.jsxs("div",{className:"suggest-item",onMouseDown:Te=>{Te.preventDefault();const Ae=W.current,ge=String(Ue||""),U=Ae&&Ae.selectionStart||ge.length,z=ge.lastIndexOf("@",(U||ge.length)-1),K=ge.slice(0,z),ce=ge.slice(z+1),oe=ce.indexOf(" "),de=ce.indexOf(`
`),X=oe>=0&&de>=0?Math.min(oe,de):oe>=0?oe:de>=0?de:-1,ne=X>=0?z+1+X:U,ye=ge.slice(ne),je=`@${$.username||$.name}`,$e=`${K}${je} ${ye}`;it($e),_t(!1),M([]),$t(""),setTimeout(()=>{try{const ut=W.current;if(ut){const Ke=K.length+je.length+1;ut.focus(),ut.setSelectionRange(Ke,Ke)}}catch{}},0)},children:["@",$.username||"","  ",$.name||$.username]},$.id||$.username))}),Ue.trim().length>0&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:l.jsx("button",{className:"primary",type:"button",onClick:Ne,children:"Adicionar"})})]}),l.jsxs("div",{className:"activity-list",children:[(ke||[]).length===0?l.jsx("div",{className:"empty",children:"Sem comentrios"}):(V?ke||[]:(ke||[]).slice(0,2)).map(($,Te)=>l.jsx("div",{className:"activity-item",children:l.jsxs("div",{className:"activity-entry",children:[l.jsx("div",{className:"avatar",children:"V"}),l.jsxs("div",{className:"entry-content",children:[l.jsx("div",{className:"entry-title",children:l.jsxs("span",{children:[l.jsx("strong",{children:k($.autor||"")})," comentou: ",$.texto]})}),l.jsx("div",{className:"entry-time",children:Xe($.data)}),Array.isArray($.mentions)&&$.mentions.length>0&&l.jsx("div",{className:"mentions-row",children:$.mentions.map(Ae=>l.jsxs("span",{className:`mention-pill ${String(h||"").toLowerCase()===String(Ae||"").toLowerCase()?"you":""}`,children:["@",Ae,String(h||"").toLowerCase()===String(Ae||"").toLowerCase()?"  Voc foi mencionado":""]},Ae))})]})]})},Te)),(ke||[]).length>2&&l.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:l.jsx("button",{className:"tertiary",type:"button",onClick:()=>se($=>!$),children:V?"Mostrar menos":`Ver todos os comentrios (${(ke||[]).length-2} mais)`})})]})]})]}),e!=="create"&&l.jsx("div",{className:"modal-side",children:l.jsxs("div",{className:"timeline",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Linha do tempo"})}),["Criado","Em produo","Aguardando Feedback","Revisar","Aprovada","Concluda","Postado"].map($=>{const Te=(X,ne)=>{const ye=String(X.status_novo||X.para||""||"").toLowerCase();return ne==="Criado"?ye==="aberta":ne==="Em produo"?ye.includes("produ")||ye.includes("progresso"):ne==="Aguardando Feedback"?ye.includes("feedback"):ne==="Revisar"?ye.includes("revisar"):ne==="Aprovada"?ye.includes("aprov"):ne==="Concluda"?ye.includes("conclu"):!1};let ge=$==="Postado"?(me||[]).filter(X=>X.tipo==="mlabs"):(me||[]).filter(X=>X.tipo==="status"&&Te(X,$));if($==="Concluda"&&(!ge||ge.length===0)&&String((s==null?void 0:s.status)||"").toLowerCase().includes("conclu")){const X=(s==null?void 0:s.finishedAt)||(s!=null&&s.dataConclusao?`${s.dataConclusao}T00:00:00Z`:null);ge=[{tipo:"status",autor:(s==null?void 0:s.autor)||h,data_hora_evento:X,data:s==null?void 0:s.dataConclusao,status_novo:"Concluda",responsavel:(s==null?void 0:s.designer)||""}]}const U=ge&&ge.length?ge[ge.length-1]:null,z=(U==null?void 0:U.duracao_em_minutos)!=null?Hv(U.duracao_em_minutos):"",K=U!=null&&U.data_hora_evento?Xe(U.data_hora_evento):Xe(U==null?void 0:U.data),ce=k((U==null?void 0:U.responsavel)||(U==null?void 0:U.autor)||""),oe=ge.length,de=rt===$;return l.jsxs("div",{className:"timeline-item",onClick:()=>Be(X=>X===$?null:$),children:[l.jsx("div",{className:"timeline-left",children:l.jsx("span",{className:"timeline-icon",children:""})}),l.jsxs("div",{className:"timeline-body",children:[l.jsxs("div",{className:"timeline-title",children:[$,oe>1?`  ${oe}`:""]}),l.jsxs("div",{className:"timeline-meta",children:[K,ce?`  ${ce}`:"",z?`  ${z}`:""]}),de&&oe>0&&l.jsx("div",{className:"timeline-details",children:ge.map((X,ne)=>l.jsxs("div",{className:"timeline-detail-row",children:[l.jsx("div",{children:X!=null&&X.data_hora_evento?Xe(X.data_hora_evento):Xe(X==null?void 0:X.data)}),l.jsx("div",{children:k((X==null?void 0:X.responsavel)||(X==null?void 0:X.autor)||"")}),l.jsx("div",{children:(X==null?void 0:X.duracao_em_minutos)!=null?Hv(X.duracao_em_minutos):""})]},ne))})]})]},$)})]})})]})}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"primary",type:"submit",form:"modalForm",children:"Salvar"})})]})}):null}function DP({cadStatus:t,setCadStatus:e,cadTipos:n,setCadTipos:r,cadPlataformas:s,setCadPlataformas:i,cadOrigens:o,setCadOrigens:c,cadStatusColors:u,setCadStatusColors:h}){const[p,g]=Q.useState("tipo"),[_,R]=Q.useState(""),[b,N]=Q.useState("#f59e0b"),F=p==="status"?t:p==="tipo"?n:p==="plataforma"?s:o,k=S=>{p==="status"?e(S):p==="tipo"?r(S):p==="plataforma"?i(S):c(S)},[w,A]=Q.useState({}),O=S=>A(P=>({...P,[S]:S})),B=S=>A(P=>{const D={...P};return delete D[S],D}),J=async S=>{const P=String(w[S]||"").trim();if(!P||P===S){B(S);return}const D=F.map(C=>C===S?P:C);if(k(D),p==="status"){const C=u[S];h(qe=>{const Ye={...qe};return C&&(delete Ye[S],Ye[P]=C),Ye})}if(we){const C=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await ga(Vt(we,C,P),{name:P,active:!0},{merge:!0});try{await Ji(Vt(we,C,S))}catch{}}catch(qe){try{window.alert(String((qe==null?void 0:qe.code)||(qe==null?void 0:qe.message)||"Falha ao renomear"))}catch{}}}B(S)},v=async()=>{const S=_.trim();if(!S||F.includes(S))return;const P=[...F,S];if(k(P),R(""),p==="status"&&h(D=>({...D,[S]:b})),we){const D=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await ga(Vt(we,D,S),{name:S,active:!0})}catch(C){try{window.alert(String((C==null?void 0:C.code)||(C==null?void 0:C.message)||"Falha ao gravar cadastro"))}catch{}}}},y=async S=>{const P=F.filter(D=>D!==S);if(k(P),we){const D=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await Ji(Vt(we,D,S))}catch(C){try{window.alert(String((C==null?void 0:C.code)||(C==null?void 0:C.message)||"Falha ao remover cadastro"))}catch{}}}},T=async S=>{if(!we)return;const P=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await ga(Vt(we,P,S),{active:!1},{merge:!0})}catch(D){try{window.alert(String((D==null?void 0:D.code)||(D==null?void 0:D.message)||"Falha ao desativar cadastro"))}catch{}}};return l.jsxs("div",{className:"panel",children:[l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${p==="tipo"?"active":""}`,onClick:()=>g("tipo"),children:"Tipo"}),l.jsx("button",{className:`tab ${p==="origem"?"active":""}`,onClick:()=>g("origem"),children:"Origem"})]}),l.jsxs("div",{className:"form-row",style:{marginTop:10},children:[l.jsx("label",{children:p==="status"?"Novo Status":p==="tipo"?"Novo Tipo":"Nova Origem"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{value:_,onChange:S=>R(S.target.value)}),p==="status"&&l.jsx("input",{type:"color",value:b,onChange:S=>N(S.target.value),title:"Cor"}),l.jsx("button",{className:"primary",onClick:v,children:"Adicionar"})]})]}),l.jsx("div",{className:"form-row",style:{marginTop:10},children:l.jsx("select",{children:F.map(S=>l.jsx("option",{value:S,children:S},S))})}),l.jsx("div",{className:"list",style:{marginTop:12},children:F.length===0?l.jsx("div",{className:"empty",children:"Sem itens"}):F.map(S=>l.jsxs("div",{className:"list-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",border:"1px solid var(--border)",borderRadius:8,background:"#0b0e12",marginBottom:6},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[p==="status"&&l.jsx("span",{className:"status-dot",style:{background:u[S]||"#3b82f6"}}),w[S]!=null?l.jsx("input",{value:w[S],onChange:P=>A(D=>({...D,[S]:P.target.value}))}):l.jsx("div",{children:S})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[p==="status"&&l.jsx("input",{type:"color",value:u[S]||"#3b82f6",onChange:P=>h(D=>({...D,[S]:P.target.value}))}),w[S]==null?l.jsx("button",{className:"icon",onClick:()=>O(S),title:"Editar",children:l.jsx(et,{name:"edit"})}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"icon",onClick:()=>J(S),title:"Salvar",children:l.jsx(et,{name:"check"})}),l.jsx("button",{className:"icon",onClick:()=>B(S),title:"Cancelar",children:l.jsx(et,{name:"close"})})]}),l.jsx("button",{className:"icon",onClick:()=>T(S),title:"Desativar",children:l.jsx(et,{name:"minus"})}),l.jsx("button",{className:"icon",onClick:()=>y(S),children:l.jsx(et,{name:"trash"})})]})]},S))})]})}function bP(){var Te,Ae,ge;const[t,e]=Q.useState(null),[n,r]=Q.useState([]),s=Q.useRef({}),[i,o]=Q.useState({}),[c,u]=Q.useState(!0),[h,p]=Q.useState("table"),[g,_]=Q.useState(!1),[R,b]=Q.useState("dashboard"),[N,F]=Q.useState({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""}),[k,w]=Q.useState(!1),[A,O]=Q.useState(!1),[B,J]=Q.useState("create"),[v,y]=Q.useState(null),[T,S]=Q.useState(TE),[P,D]=Q.useState({autoPostMLabs:!1}),[C,qe]=Q.useState(["Aberta","Em Progresso","Concluda"]),[Ye,vt]=Q.useState(["Post","Story","Banner","Vdeo","Outro"]),[Ct,L]=Q.useState([]),[ee,ie]=Q.useState([]),[ve,Se]=Q.useState([]),Re=Q.useMemo(()=>{const U={};return(ve||[]).forEach(z=>{const K=String(z.username||"").toLowerCase(),ce=String(z.email||"").toLowerCase(),oe=z.name||K||"";K&&(U[K]=oe),ce&&(U[ce]=oe)}),U},[ve]),yt=U=>{const z=String(U||"").toLowerCase();return Re[z]||U||""},[nt,ct]=Q.useState({Aberta:"#f59e0b","Em Progresso":"#3b82f6",Concluda:"#10b981"}),te=Q.useMemo(()=>Array.from(new Set(n.map(U=>U.designer).filter(Boolean))).sort(),[n]),ue=Q.useMemo(()=>ve.filter(U=>(U.cargo||"")==="Designer").map(U=>U.username).filter(Boolean).sort(),[ve]),ke=Q.useMemo(()=>Array.from(new Set([...ue,...te])).sort(),[ue,te]),Me=Q.useMemo(()=>Array.from(new Set(n.map(U=>U.campanha).filter(Boolean))).sort(),[n]),Ue=(t==null?void 0:t.role)||"comum",it=Q.useMemo(()=>NP(n,N),[n,N]),Bt=Q.useMemo(()=>n,[n]),$t=Q.useMemo(()=>Array.isArray(ke)?ke:[],[ke]),qt=Q.useMemo(()=>Array.isArray(it)?it.slice().sort((U,z)=>{const K=de=>{try{const X=de.createdAt,ne=X&&typeof X=="object"&&"seconds"in X?(X.seconds||0)*1e3+(X.nanoseconds||0)/1e6:X?Date.parse(X):0,ye=Date.parse(de.dataCriacao||"")||0,je=Date.parse(de.dataSolicitacao||"")||0,$e=Date.parse(de.prazo||"")||0,ut=Number(de.id)||0;return ne||ye||je||$e||ut}catch{return Number(de.id)||0}},ce=K(U),oe=K(z);return oe!==ce?oe-ce:String(z.id||"").localeCompare(String(U.id||""))}):[],[it]),_t=Q.useMemo(()=>Array.isArray(ke)?ke:[],[ke]),pt=Q.useMemo(()=>Array.isArray(qt)?qt:[],[qt]),M=Q.useMemo(()=>{try{if(!t)return[];const U=new Set([String(t.username||"").toLowerCase(),String(t.name||"").toLowerCase()]),z=[](n||[]).forEach(K=>{(K.historico||[]).forEach(ce=>{ce.tipo==="notificacao"&&Array.isArray(ce.mentions)&&ce.mentions.some(de=>U.has(String(de||"").toLowerCase()))&&z.push({id:K.id,titulo:K.titulo||"(sem ttulo)",quando:ce.data_hora_evento||ce.data||"",msg:ce.mensagem||"Voc foi mencionado"})})});return z.sort((K,ce)=>String(ce.quando||"").localeCompare(String(K.quando||"")))}catch{return[]}},[n,t]);Q.useEffect(()=>{try{const U=localStorage.getItem("mk_filtros");if(U){const z=JSON.parse(U);z&&typeof z=="object"&&F(K=>({...K,...z}))}}catch{}},[]),Q.useEffect(()=>{try{localStorage.setItem("mk_filtros",JSON.stringify(N))}catch{}},[N]);const W=Q.useMemo(()=>pt.filter(U=>/revisar/i.test(String(U.status||""))).length,[pt]);Q.useMemo(()=>pt.filter(U=>/aprovada/i.test(String(U.status||""))).length,[pt]);const V=Q.useMemo(()=>Array.from(new Set(pt.filter(U=>/revisar/i.test(String(U.status||""))).map(U=>yt(U.designer||"")))).filter(Boolean),[pt,yt]),se=Q.useMemo(()=>{const U=pt,z=K=>String(K||"").toLowerCase();return{Pendente:U.filter(K=>_o(K.status)).length,"Em produo":U.filter(K=>pr(K.status)).length,"Aguardando Feedback":U.filter(K=>z(K.status).includes("feedback")).length,Aprovada:U.filter(K=>z(K.status).includes("aprov")).length,Revisar:U.filter(K=>z(K.status).includes("revisar")).length,Concluida:U.filter(K=>z(K.status).includes("conclu")).length}},[pt]),[me,j]=Q.useState(10),[Z,G]=Q.useState(new Date),[pe,xe]=Q.useState("status"),_e=Q.useMemo(()=>(t==null?void 0:t.name)||(t==null?void 0:t.username)||"Voc",[t]),ze=["executivo","dashboard","demandas","config","cadastros","relatorios","usuarios"],De=Q.useMemo(()=>{const U=t==null?void 0:t.pages,z=(t==null?void 0:t.role)||"comum";if(U&&typeof U=="object"){const K=Object.keys(U).filter(ce=>U[ce]);return Array.isArray(K)?z==="admin"?ze:K:z==="admin"?ze:["dashboard","demandas"]}return z==="admin"?ze:["dashboard","demandas"]},[t]);Q.useEffect(()=>{},[n,we]),Q.useEffect(()=>{we||u(!1)},[we]),Q.useEffect(()=>{(async()=>{try{const z=SP&&!1||typeof window<"u"&&new URLSearchParams(window.location.search).get("purge")==="1";if(!we||!z||typeof window<"u"&&window.__PURGED__)return;if(typeof window<"u"&&(window.__PURGED__=!0),Pn)try{await Gl(Pn,"purger@betaki.bet.br","purge12345")}catch{try{await Pv(Pn,"purger@betaki.bet.br","purge12345"),await Gl(Pn,"purger@betaki.bet.br","purge12345")}catch{}}const K=["demandas_v2","demandas","cad_status","cad_tipos","cad_designers","cad_plataformas","cad_origens","historico_status","usuarios"];for(const ce of K)try{const oe=await as(Qt(we,ce)),de=[];oe.forEach(X=>de.push(Ji(Vt(we,ce,X.id)))),de.length&&await Promise.all(de)}catch{}try{window.alert("Purge Firebase concludo")}catch{}}catch{}})()},[we,Pn]),Q.useEffect(()=>{},[we]),Q.useEffect(()=>{if(!Pn)return;const U=$k(Pn,async z=>{if(z){let K=null;const ce=z.email||"",oe=(ce.split("@")[0]||"").trim();if(we&&oe)try{const X=await BA(Vt(we,"usuarios",oe));K=X.exists()?X.data():null}catch{}const de={username:(K==null?void 0:K.username)||oe,name:(K==null?void 0:K.name)||ce,role:(K==null?void 0:K.role)||"comum",pages:(K==null?void 0:K.pages)||null,actions:(K==null?void 0:K.actions)||null,cargo:(K==null?void 0:K.cargo)||""};e(de),u(!1)}else e(null),u(!1)});return()=>{try{U()}catch{}}},[Pn,we]),Q.useEffect(()=>{Object.entries(T||{}).forEach(([U,z])=>{try{document.documentElement.style.setProperty(`--${U}`,z)}catch{}})},[T]),Q.useEffect(()=>{if(!we||!t)return;const U=Gs(Qt(we,an),X=>{const ne=[];X.forEach(je=>ne.push({id:je.data().id||je.id,...je.data()}));const ye=ne.map(je=>({...je,...s.current[String(je.id)]||{}}));r(ye),u(!1)}),z=Gs(Qt(we,"usuarios"),X=>{const ne=[];X.forEach(ye=>ne.push({id:ye.id,...ye.data()})),Se(ne)}),K=Gs(Qt(we,"cad_status"),X=>qe(X.docs.map(ne=>ne.data().name||ne.id))),ce=Gs(Qt(we,"cad_tipos"),X=>vt(X.docs.filter(ne=>ne.data().active!==!1).map(ne=>ne.data().name||ne.id))),oe=Gs(Qt(we,"cad_plataformas"),X=>L(X.docs.filter(ne=>ne.data().active!==!1).map(ne=>ne.data().name||ne.id))),de=Gs(Qt(we,"cad_origens"),X=>ie(X.docs.filter(ne=>ne.data().active!==!1).map(ne=>ne.data().name||ne.id)));return()=>{try{U()}catch{}try{z()}catch{}try{K()}catch{}try{ce()}catch{}try{oe()}catch{}try{de()}catch{}}},[we,t]),Q.useEffect(()=>{t&&!De.includes(R)&&b(De[0]||"dashboard"),!t&&R!=="dashboard"&&R!=="demandas"&&R!=="config"&&R!=="cadastros"&&R!=="relatorios"&&R!=="usuarios"&&b("dashboard")},[t,De,R]),Q.useEffect(()=>{if(!A||!v)return;const U=n.find(z=>String(z.id)===String(v.id));if(U)try{y(U)}catch{}},[n,A,v]);const ot=async()=>{try{await qk(Pn)}catch{}e(null)},ht=async(U,z)=>{const K=String(U||"").trim();if(!K||!z)throw new Error("Credenciais ausentes");if(!Pn)throw new Error("Firebase no configurado");const ce=/@/.test(K)?K:`${K}@betaki.bet.br`;try{await Gl(Pn,ce,z)}catch{if(await Pv(Pn,ce,z),await Gl(Pn,ce,z),we)try{await ga(Vt(we,"usuarios",K),{username:K,email:ce,name:K,role:"comum",cargo:"",pages:null,actions:null})}catch{}}},Ne=(t==null?void 0:t.role)==="admin",Xe=(t==null?void 0:t.cargo)==="Designer",m=Ne||Xe||((Te=t==null?void 0:t.actions)==null?void 0:Te.criar)!==!1,x=Ne||Xe||((Ae=t==null?void 0:t.actions)==null?void 0:Ae.excluir)!==!1,I=Ne||Xe||((ge=t==null?void 0:t.actions)==null?void 0:ge.visualizar)!==!1,H=()=>{!t||!m||(J("create"),y(null),O(!0))},he=U=>{!t||!I||(J("edit"),y(U),O(!0))},Le=async U=>{const z={...U,status:"Aberta",dataSolicitacao:jn(),dataCriacao:null};if(we)try{const K=String(Date.now());await Wl(Qt(we,an),{...z,id:K,createdAt:_v()})}catch{}},We=async(U,z)=>{const K=jn();let ce=null;if(s.current[String(U)]={...s.current[String(U)]||{},status:z},r(de=>de.map(X=>{if(String(X.id)!==String(U))return X;const ne=X.status!==z,ye=String(X.status||"").toLowerCase().includes("produ")||String(X.status||"").toLowerCase().includes("progresso"),je=String(z||"").toLowerCase().includes("produ")||String(z||"").toLowerCase().includes("progresso"),$e=Date.now();let ut=Number(X.tempoProducaoMs||0),Ke=X.startedAt||null,An=X.finishedAt||null;const Pt=String(z||"").toLowerCase().includes("feedback"),mn=String(X.status||"").toLowerCase().includes("feedback");let sn=X.slaStartAt||null,Zn=X.slaStopAt||null,en=Number(X.slaPauseMs||0),xt=X.pauseStartedAt||null;if(ne){if(ye&&!je&&Ke){const Tt=Date.parse(Ke);isNaN(Tt)||(ut+=Math.max(0,$e-Tt)),Ke=null}if(!ye&&je&&!Ke&&(Ke=new Date($e).toISOString(),sn||(sn=Ke)),!mn&&Pt&&!xt&&(xt=new Date($e).toISOString()),mn&&!Pt&&xt){const Tt=Date.parse(xt);isNaN(Tt)||(en+=Math.max(0,$e-Tt)),xt=null}}const St=String(z||"").toLowerCase().includes("revisar"),On=ne&&St?(X.revisoes||0)+1:X.revisoes||0,gn=String(z||"").toLowerCase().includes("concluida")||z==="Concluda",Gt=gn?X.dataConclusao||K:X.dataConclusao,kn=ne&&(Pt||gn)&&!X.dataCriacao?K:X.dataCriacao;ne&&gn&&(An=new Date($e).toISOString(),Zn=An);const dt=(X.historico||[]).find(Tt=>Tt.tipo==="status"),ns=dt!=null&&dt.data_hora_evento?Date.parse(dt.data_hora_evento):dt!=null&&dt.data?Date.parse(`${dt.data}T00:00:00Z`):null,wi=new Date($e).toISOString(),fl=ne&&ns?Math.round(($e-ns)/6e4):null,ko=ne?{tipo:"status",autor:_e,data:K,data_hora_evento:wi,status_anterior:X.status,status_novo:z,duracao_em_minutos:fl,responsavel:_e,id_demanda:X.id,de:X.status,para:z}:null,Ei=(()=>{if(!X.prazo)return null;const[Tt,Nn,ft]=String(X.prazo).split("-").map(Number),$s=new Date(Tt,(Nn||1)-1,ft||1);$s.setHours(0,0,0,0);const rs=new Date;return rs.setHours(0,0,0,0),$s-rs})(),No=!!(X.prazo&&!gn&&typeof Ei=="number"&&Ei<=864e5),Po=ne&&No?{tipo:"alerta",autor:_e,data:K,data_hora_evento:wi,mensagem:"Prazo menor que 24h",id_demanda:X.id}:null,pl=!!(ne&&(String(z||"").toLowerCase().includes("aprov")||String(z||"").toLowerCase().includes("conclu"))&&P.autoPostMLabs)?{tipo:"mlabs",autor:_e,data:K,data_hora_evento:wi,mensagem:"Postagem agendada via mLabs",id_demanda:X.id}:null,Ro=ko?[ko,...Po?[Po]:[],...pl?[pl]:[],...X.historico||[]]:X.historico||[],ml=ne&&Pt&&!X.dataFeedback?K:X.dataFeedback,gl=(Ro||[]).filter(Tt=>Tt.tipo==="status"&&Tt.duracao_em_minutos!=null).reduce((Tt,Nn)=>Tt+(Nn.duracao_em_minutos||0),0),Bu=(()=>{const Tt={};return(Ro||[]).forEach(Nn=>{if(Nn.tipo==="status"&&Nn.duracao_em_minutos!=null){const ft=Nn.status_anterior||Nn.de||"Aberta";Tt[ft]=(Tt[ft]||0)+(Nn.duracao_em_minutos||0)}}),Tt})(),Dr=(()=>{if(!sn)return 0;const Tt=Zn?Date.parse(Zn):$e,Nn=Date.parse(sn);return isNaN(Nn)||isNaN(Tt)?0:Math.max(0,Tt-Nn-en)})(),lr=(()=>{if(!Gt||!X.prazo)return null;try{return String(Gt)<=String(X.prazo)}catch{return null}})(),Si=Wv(de,{...X});return ce={...X,status:z,revisoes:On,dataConclusao:Gt,dataCriacao:kn,dataFeedback:ml,historico:Ro,tempoProducaoMs:ut,startedAt:Ke,finishedAt:An,previsaoIA:Si,fxBounceAt:ne?$e:X.fxBounceAt||0,slaStartAt:sn,slaStopAt:Zn,slaPauseMs:en,pauseStartedAt:xt,slaNetMs:Dr,slaOk:lr,leadTotalMin:gl,leadPorFase:Bu},ce})),v&&String(v.id)===String(U)&&ce)try{y(ce)}catch{}const oe=ce;if(we&&oe)try{const de=(oe.historico||[]).find(St=>St.tipo==="status"),X=de!=null&&de.data_hora_evento?Date.parse(de.data_hora_evento):de!=null&&de.data?Date.parse(`${de.data}T00:00:00Z`):null,ne=new Date().toISOString(),ye=oe.status!==z&&X?Math.round((Date.now()-X)/6e4):null,je=(()=>{if(!oe.prazo)return null;const[St,On,gn]=String(oe.prazo).split("-").map(Number),Gt=new Date(St,(On||1)-1,gn||1);Gt.setHours(0,0,0,0);const kn=new Date;return kn.setHours(0,0,0,0),Gt-kn})(),$e=!!(oe.prazo&&!(String(z||"").toLowerCase().includes("concluida")||z==="Concluda")&&typeof je=="number"&&je<=864e5),ut={tipo:"status",autor:_e,data:K,data_hora_evento:ne,status_anterior:oe.status,status_novo:z,duracao_em_minutos:ye,responsavel:_e,id_demanda:oe.id,de:oe.status,para:z},Ke=$e?{tipo:"alerta",autor:_e,data:K,data_hora_evento:ne,mensagem:"Prazo menor que 24h",id_demanda:oe.id}:null,Pt=!!((String(z||"").toLowerCase().includes("aprov")||String(z||"").toLowerCase().includes("conclu"))&&P.autoPostMLabs)?{tipo:"mlabs",autor:_e,data:K,data_hora_evento:ne,mensagem:"Postagem agendada via mLabs",id_demanda:oe.id}:null,mn=[ut,...Ke?[Ke]:[],...Pt?[Pt]:[],...oe.historico||[]],sn=Ai(Qt(we,an),ki("id","==",String(U))),Zn=await as(sn),en={...oe,status:z,dataCriacao:oe.status!==z&&(String(z||"").toLowerCase().includes("feedback")||String(z||"").toLowerCase().includes("conclu"))&&!oe.dataCriacao?K:oe.dataCriacao??null,dataConclusao:String(z||"").toLowerCase().includes("concluida")||z==="Concluda"?oe.dataConclusao||K:oe.dataConclusao||null,dataFeedback:oe.status!==z&&String(z||"").toLowerCase().includes("feedback")&&!oe.dataFeedback?K:oe.dataFeedback??null,revisoes:(oe.revisoes||0)+(oe.status!==z&&String(z||"").toLowerCase().includes("revisar")?1:0),historico:mn,tempoProducaoMs:oe.tempoProducaoMs,startedAt:oe.startedAt,finishedAt:String(z||"").toLowerCase().includes("concluida")||z==="Concluda"?new Date().toISOString():oe.finishedAt||null,slaStartAt:oe.slaStartAt,slaStopAt:String(z||"").toLowerCase().includes("concluida")||z==="Concluda"?new Date().toISOString():oe.slaStopAt||null,slaPauseMs:oe.slaPauseMs,pauseStartedAt:oe.pauseStartedAt,slaNetMs:oe.slaNetMs,slaOk:oe.slaOk??null,leadTotalMin:oe.leadTotalMin,leadPorFase:oe.leadPorFase},xt=[];Zn.forEach(St=>xt.push(Lr(Vt(we,an,St.id),en))),xt.length&&await Promise.all(xt);try{await Wl(Qt(we,"historico_status"),ut)}catch{}}catch{}},Zt=async(U,z,K)=>{r(oe=>oe.map(de=>{if(String(de.id)!==String(U))return de;const X=[z,...de.comentarios||[]],ne=Array.isArray(z.mentions)&&z.mentions.length>0?{tipo:"notificacao",autor:_e,data:z.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:z.mentions,id_demanda:de.id}:null,ye=ne?[ne,K,...de.historico||[]]:[K,...de.historico||[]];return{...de,comentarios:X,historico:ye,fxSavedAt:Date.now()}})),y(oe=>oe&&String(oe.id)===String(U)?{...oe,comentarios:[z,...oe.comentarios||[]],historico:[K,...oe.historico||[]]}:oe);const ce=n.find(oe=>String(oe.id)===String(U));if(we&&ce)try{const oe=Array.isArray(z.mentions)&&z.mentions.length>0?{tipo:"notificacao",autor:_e,data:z.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:z.mentions,id_demanda:ce.id}:null,de=oe?[oe,K,...ce.historico||[]]:[K,...ce.historico||[]],X=Ai(Qt(we,an),ki("id","==",String(U))),ne=await as(X),ye=[];ne.forEach(je=>ye.push(Lr(Vt(we,an,je.id),{comentarios:[z,...ce.comentarios||[]],historico:de}))),ye.length&&await Promise.all(ye);try{const je=s.current[String(U)]||{};delete je.status,s.current[String(U)]=je}catch{}}catch{}},wt=async(U,z)=>{try{const K=(t==null?void 0:t.role)==="admin",ce=(t==null?void 0:t.cargo)==="Designer";if(!K&&!ce)return;const oe=Array.isArray(U)?U.map(String):[],de=z||{},X=jn();for(const ne of oe){if(de.status){s.current[String(ne)]={...s.current[String(ne)]||{},status:de.status};try{await We(ne,de.status)}catch{}}for(const ye of["tipoMidia","origem","designer","dataCriacao"])if(de[ye])try{if(s.current[String(ne)]={...s.current[String(ne)]||{},[ye]:de[ye]},r(je=>je.map($e=>{if(String($e.id)!==String(ne))return $e;const ut={tipo:"grupo",autor:_e,data:X,campo:ye,valor:de[ye],id_demanda:$e.id};return{...$e,[ye]:de[ye],historico:[ut,...$e.historico||[]]}})),we){const je=n.find(Pt=>String(Pt.id)===String(ne)),$e={tipo:"grupo",autor:_e,data:X,campo:ye,valor:de[ye],id_demanda:ne},ut=Ai(Qt(we,an),ki("id","==",String(ne))),Ke=await as(ut),An=[];Ke.forEach(Pt=>An.push(Lr(Vt(we,an,Pt.id),{[ye]:de[ye],historico:[$e,...(je==null?void 0:je.historico)||[]]}))),An.length&&await Promise.all(An);try{const Pt=s.current[String(ne)]||{};delete Pt[ye],s.current[String(ne)]=Pt}catch{}}}catch{}}}catch{}},rt=async U=>{if(r(z=>z.map(K=>K.id===U?{...K,fxDeleting:!0}:K)),setTimeout(()=>{r(z=>z.filter(K=>K.id!==U))},180),we)try{const z=Ai(Qt(we,an),ki("id","==",String(U))),K=await as(z),ce=[];K.forEach(oe=>ce.push(Ji(Vt(we,an,oe.id)))),ce.length&&await Promise.all(ce)}catch{}},Be=async(U,z)=>{const K=jn();let ce=null;r(de=>de.map(X=>{if(X.id!==U)return X;if((X.historico||[]).some($e=>$e.tipo==="alerta"&&$e.data===K&&$e.mensagem===z))return ce=X,X;const ye={tipo:"alerta",autor:_e,data:K,data_hora_evento:new Date().toISOString(),mensagem:z,id_demanda:X.id},je={...X,historico:[ye,...X.historico||[]]};return ce=je,je}));const oe=ce||n.find(de=>de.id===U);if(oe&&we)try{const de={tipo:"alerta",autor:_e,data:K,data_hora_evento:new Date().toISOString(),mensagem:z,id_demanda:oe.id},X=Ai(Qt(we,an),ki("id","==",String(U))),ne=await as(X),ye=[];ne.forEach(je=>ye.push(Lr(Vt(we,an,je.id),{...oe,historico:[de,...oe.historico||[]]}))),ye.length&&await Promise.all(ye)}catch{}};Q.useEffect(()=>{const U=setInterval(()=>{jn();const z=n.filter(ne=>!Ge(ne.status)),K=z.reduce((ne,ye)=>{const je=ye.designer||"";return ne[je]=(ne[je]||0)+1,ne},{});z.forEach(ne=>{if(ne.prazo)try{const[Ke,An,Pt]=String(ne.prazo).split("-").map(Number),mn=new Date(Ke,(An||1)-1,Pt||1);mn.setHours(0,0,0,0);const sn=new Date;sn.setHours(0,0,0,0),mn-sn<=864e5&&Be(ne.id,"Prazo menor que 24h")}catch{}const ye=(ne.historico||[]).find(Ke=>Ke.tipo==="status");if(ye!=null&&ye.data_hora_evento||ye!=null&&ye.data){const Ke=ye.data_hora_evento?Date.parse(ye.data_hora_evento):Date.parse(`${ye.data}T00:00:00Z`);!isNaN(Ke)&&Date.now()-Ke>=1728e5&&Be(ne.id,"Demanda estagnada h 48h")}const je=ne.designer||"",$e=K[je]||0,ut=Math.min(100,Math.round($e/4*100));ut>=100?Be(ne.id,`Capacidade 100% para ${je}  Risco mximo`):ut>=85&&Be(ne.id,`Designer ${je} est com ${ut}% da capacidade utilizada. Risco de atraso.`),(ne.revisoes||0)>=2&&Be(ne.id,"Retrabalho acima do limite")});const ce=n.filter(ne=>Ge(ne.status)),oe=ce.filter(ne=>ne.prazo&&ne.dataConclusao&&ne.dataConclusao<=ne.prazo).length,de=ce.filter(ne=>ne.prazo&&ne.dataConclusao).length;Math.round(100*(oe/Math.max(1,de)))<80&&z.forEach(ne=>Be(ne.id,"SLA geral abaixo de 80%"))},6e4);return()=>clearInterval(U)},[n]);const He=async({designer:U,tipoMidia:z,titulo:K,link:ce,linkDrive:oe,arquivoNome:de,dataSolic:X,dataCriacao:ne,dataFeedback:ye,plataforma:je,arquivos:$e,descricao:ut,prazo:Ke,comentarios:An,historico:Pt,origem:mn,campanha:sn})=>{const Zn=async()=>{if(!we)return;const en=async(xt,St)=>{if(St)try{await ga(Vt(we,xt,String(St)),{name:St,active:!0},{merge:!0})}catch{}};try{await en("cad_tipos",z)}catch{}try{await en("cad_plataformas",je)}catch{}try{await en("cad_origens",mn)}catch{}try{if(Pt&&Array.isArray(Pt)){const xt=Pt[0],St=(xt==null?void 0:xt.para)||(xt==null?void 0:xt.de)||"Aberta";await en("cad_status",St)}}catch{}};if(B==="edit"&&v){const en={...v,designer:U,tipoMidia:z,titulo:K,link:ce,linkDrive:oe,descricao:ut,comentarios:An??v.comentarios,historico:Pt??v.historico,arquivos:$e&&$e.length?$e:v.arquivos,arquivoNome:de||v.arquivoNome,dataSolicitacao:X||v.dataSolicitacao,dataCriacao:ne||v.dataCriacao,dataFeedback:ye||v.dataFeedback,plataforma:je,prazo:Ke,origem:mn,campanha:sn},xt={...en,fxSavedAt:Date.now()};if(r(St=>St.map(On=>On.id===v.id?xt:On)),we)try{const St=Ai(Qt(we,an),ki("id","==",String(v.id))),On=await as(St),gn=[];On.forEach(Gt=>gn.push(Lr(Vt(we,an,Gt.id),en))),gn.length&&await Promise.all(gn)}catch{}await Zn();try{await Be(v.id,"Demanda salva")}catch{}try{window.alert("Demanda salva com sucesso!")}catch{}}else{const en=jn(),xt=new Date().toISOString(),St=U||(t==null?void 0:t.username)||"",On={tipo:"status",autor:_e,data:en,data_hora_evento:xt,status_anterior:"",status_novo:"Aberta",duracao_em_minutos:null,responsavel:St,id_demanda:null,de:"",para:"Aberta"},gn=Wv(n,{designer:St,tipoMidia:z,plataforma:je,origem:mn}),Gt=`tmp-${Date.now()}`,kn={id:Gt,designer:St,tipoMidia:z,titulo:K,link:ce,linkDrive:oe,descricao:ut,comentarios:[],historico:[On],arquivos:$e||[],arquivoNome:de,plataforma:je,origem:mn,campanha:sn,dataSolicitacao:X,dataCriacao:void 0,dataFeedback:void 0,status:"Aberta",prazo:Ke,tempoProducaoMs:0,startedAt:null,finishedAt:null,revisoes:0,createdBy:_e,previsaoIA:gn,slaStartAt:null,slaStopAt:null,slaPauseMs:0,pauseStartedAt:null,slaNetMs:0,slaOk:null,leadTotalMin:0,leadPorFase:{}};if(r(dt=>[kn,...dt]),we)try{const dt={...kn,id:String(Gt),createdAt:_v()};dt.dataSolicitacao===void 0&&(dt.dataSolicitacao=null),dt.dataCriacao===void 0&&(dt.dataCriacao=null),dt.dataFeedback===void 0&&(dt.dataFeedback=null),dt.arquivoNome===void 0&&(dt.arquivoNome=null),await Wl(Qt(we,an),dt);const ns={...On,id_demanda:Gt};try{await Wl(Qt(we,"historico_status"),ns)}catch{}}catch(dt){const ns=(dt==null?void 0:dt.code)||(dt==null?void 0:dt.message)||"Falha ao gravar";try{window.alert(String(ns))}catch{}}await Zn();try{await Be(Gt,"Demanda salva")}catch{}try{window.alert("Demanda salva com sucesso!")}catch{}}O(!1),b("demandas")},$=async()=>{if(window.confirm("Confirmar: apagar TODAS as demandas e limpar relatrios?")){r([]);try{F({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""})}catch{}if(we)try{const U=await as(Qt(we,an)),z=[];U.forEach(K=>z.push(Ji(Vt(we,an,K.id)))),z.length&&await Promise.all(z)}catch{}}};return l.jsxs("div",{className:"layout",children:[t?l.jsx(LP,{route:R,setRoute:b,allowedRoutes:De}):null,l.jsx("div",{className:`content ${t?"":"no-sidebar"} page`,children:l.jsxs("div",{className:"app",children:[t?l.jsx(CP,{onNew:H,view:h,setView:p,showNew:!!t,user:t,onLogout:ot,mentions:M,onOpenDemanda:U=>{const z=n.find(K=>String(K.id)===String(U));z&&(b("demandas"),he(z))}}):null,!t&&l.jsx(AP,{onLogin:ht}),t&&R==="executivo"&&De.includes("executivo")&&l.jsx($P,{demandas:n,designers:_t,filtros:N,setFiltros:F,loading:c,user:t,onEdit:he,setRoute:b,setView:p}),t&&R==="dashboard"&&De.includes("dashboard")&&l.jsx(zP,{demandas:n,items:Bt,designers:$t,setView:p,onEdit:he,onStatus:We,cadStatus:C,onDelete:rt,onDuplicate:Le,compact:g,calRef:Z,setCalRef:G,loading:c,setRoute:b,setFiltros:F,user:t}),t&&R==="demandas"&&De.includes("demandas")&&l.jsx("div",{className:"demandas-layout",children:l.jsxs("div",{className:"content-col",children:[l.jsx("div",{className:"top-filters",children:l.jsx(UP,{filtros:N,setFiltros:F,designers:_t,showSearch:!1,statusCounts:se})}),l.jsxs("div",{className:"top-search",children:[l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:N.q||"",onChange:U=>F(z=>({...z,q:U.target.value}))}),l.jsxs("button",{className:"primary",onClick:H,disabled:!m,children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto"},children:l.jsx(xP,{view:h,setView:p})})]}),W>0&&l.jsx("div",{className:"alert-banner",title:"Demandas em reviso",children:(()=>{const U=V,z=U.length<=2?U.join(" e "):`${U.slice(0,U.length-1).join(", ")} e ${U[U.length-1]}`,K=U.length>1?"tm":"tem",ce=W>1?"demandas":"demanda",oe=U.length?`Ateno ${z} ${K} ${W} ${ce} com status para revisar  verifique e priorize`:`Ateno: ${W} ${ce} com status para revisar  verifique e priorize`;return l.jsx("div",{className:"alert-text",children:oe})})()}),h==="table"&&l.jsx("div",{className:"table-scroll",children:l.jsx(PP,{items:pt.slice(0,me),onEdit:he,onStatus:We,cadStatus:C,cadTipos:Ye,cadOrigens:ee,designers:_t,onBulkUpdate:wt,onDelete:rt,onDuplicate:Le,hasMore:pt.length>me,showMore:()=>j(U=>Math.min(U+10,pt.length)),canCollapse:me>10,showLess:()=>j(10),shown:Math.min(me,pt.length),total:pt.length,compact:g,canEdit:(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.cargo)==="Designer",canChangeStatus:!!t,loading:c})}),h==="calendar"&&l.jsx(RP,{items:pt,refDate:Z}),l.jsx(jP,{open:A,mode:B,onClose:()=>O(!1),onSubmit:He,initial:v,cadTipos:Ye,designers:_t,cadPlataformas:Ct,onDelete:rt,userLabel:_e,canDelete:x,onAddComment:Zt,cadOrigens:ee,currentUser:(t==null?void 0:t.username)||"",usersAll:ve,canEdit:(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.cargo)==="Designer",canChangeStatus:!!t,displayUser:yt,onStatus:We}),l.jsx(kP,{open:k,filtros:N,setFiltros:F,designers:_t,onClose:()=>w(!1),cadStatus:C,cadTipos:Ye,origens:ee,campanhas:Me})]})}),t&&R==="config"&&De.includes("config")&&l.jsx(FP,{themeVars:T,setThemeVars:S,onReset:$,appSettings:P,setAppSettings:D}),t&&R==="cadastros"&&De.includes("cadastros")&&l.jsx(DP,{cadStatus:C,setCadStatus:qe,cadTipos:Ye,setCadTipos:vt,cadPlataformas:Ct,setCadPlataformas:L,cadOrigens:ee,setCadOrigens:ie,cadStatusColors:nt,setCadStatusColors:ct}),t&&R==="relatorios"&&De.includes("relatorios")&&l.jsx(BP,{demandas:n,items:pt,designers:_t,filtros:N,setFiltros:F,loading:c,onEdit:he,setRoute:b,setView:p}),t&&R==="usuarios"&&De.includes("usuarios")&&l.jsx(VP,{role:Ue})]})})]})}class MP extends Zs.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){try{console.error(e,n)}catch{}}render(){return this.state.hasError?l.jsxs("div",{className:"page",style:{padding:20},children:[l.jsx("div",{className:"panel",role:"alert",children:"Ocorreu um erro na aplicao."}),l.jsx("button",{className:"primary",onClick:()=>{try{window.location.reload()}catch{}},children:"Recarregar"})]}):this.props.children}}function OP(){return l.jsx(MP,{children:l.jsx(bP,{})})}function LP({route:t,setRoute:e,allowedRoutes:n}){return l.jsx("aside",{className:"sidebar",children:l.jsx("nav",{children:l.jsx("ul",{className:"nav-list",children:n.map(r=>l.jsx("li",{children:l.jsxs("a",{href:"#",className:`nav-link ${t===r?"active":""}`,onClick:s=>{s.preventDefault(),e(r)},children:[l.jsx("span",{className:"nav-ico",children:r==="executivo"?l.jsx(et,{name:"dashboard"}):r==="dashboard"?l.jsx(et,{name:"dashboard"}):r==="demandas"?l.jsx(et,{name:"demandas"}):r==="config"?l.jsx(et,{name:"config"}):r==="cadastros"?l.jsx(et,{name:"cadastros"}):r==="relatorios"?l.jsx(et,{name:"relatorios"}):l.jsx(et,{name:"usuarios"})}),l.jsx("span",{children:r==="executivo"?"Executivo":r==="dashboard"?"Dashboard":r==="demandas"?"Demandas":r==="config"?"Configuraes":r==="cadastros"?"Cadastros":r==="relatorios"?"Relatrios":"Usurios"})]})},r))})})})}function VP({users:t,onCreate:e,onDelete:n,onUpdate:r,role:s}){const[i,o]=Q.useState(""),[c,u]=Q.useState(""),[h,p]=Q.useState(""),[g,_]=Q.useState(""),[R,b]=Q.useState("comum"),[N,F]=Q.useState("Designer"),[k,w]=Q.useState([]),A=Q.useMemo(()=>Uv?_P(Uv,"us-central1"):null,[]),[O,B]=Q.useState({});Q.useEffect(()=>{if(we){const L=Gs(Qt(we,"usuarios"),ee=>{const ie=[];ee.forEach(ve=>ie.push({id:ve.id,...ve.data()})),w(ie)});return()=>{try{L()}catch{}}}else w([])},[]);const[J,v]=Q.useState({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),[y,T]=Q.useState({criar:!0,excluir:!0,visualizar:!0}),S=(L,ee)=>L(ie=>({...ie,[ee]:!ie[ee]})),P=async()=>{if(s!=="admin"){try{window.alert("Apenas usurios com perfil admin podem criar novos usurios.")}catch{}return}const L=i.trim(),ee=g.trim()||`${L}@betaki.bet.br`;if(!L||!h)return;const ie={name:c||L,role:R,cargo:N,pages:J,actions:y};try{if(A){await qv(A,"createUser")({username:L,password:h,email:ee,profile:ie});try{window.alert("Usurio criado com sucesso!")}catch{}}}catch(ve){try{if(A){await EP(A,"https://us-central1-mkt-betaki.cloudfunctions.net/createUser")({username:L,password:h,email:ee,profile:ie});try{window.alert("Usurio criado com sucesso!")}catch{}}else throw ve}catch(Se){try{window.alert(String((Se==null?void 0:Se.code)||(Se==null?void 0:Se.message)||"Falha ao criar usurio"))}catch{}}}o(""),u(""),p(""),_(""),b("comum"),F("Designer"),v({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),T({criar:!0,excluir:!0,visualizar:!0})},D=async L=>{if((L.username||L.id)!=="admin"&&we)try{await Ji(Vt(we,"usuarios",L.username||L.id)),w(ee=>ee.filter(ie=>(ie.username||ie.id)!==(L.username||L.id)))}catch{}},C=async L=>{const ee=String(O[L.username||L.id]||"").trim();if(ee&&A)try{await qv(A,"updateUserPassword")({username:L.username||L.id,password:ee,email:L.email||void 0}),B(ve=>({...ve,[L.username||L.id]:""}));try{window.alert("Senha atualizada com sucesso!")}catch{}}catch(ie){try{window.alert(String((ie==null?void 0:ie.code)||(ie==null?void 0:ie.message)||"Falha ao atualizar senha"))}catch{}}},qe=async(L,ee)=>{const ie=L.pages||{},ve={pages:{...ie,[ee]:!ie[ee]}};if(we)try{await Lr(Vt(we,"usuarios",L.username||L.id),ve),w(Se=>Se.map(Re=>Re.username===L.username||Re.id===L.id?{...Re,...ve}:Re))}catch{}},Ye=async(L,ee)=>{const ie=L.actions||{},ve={actions:{...ie,[ee]:!ie[ee]}};if(we)try{await Lr(Vt(we,"usuarios",L.username||L.id),ve),w(Se=>Se.map(Re=>Re.username===L.username||Re.id===L.id?{...Re,...ve}:Re))}catch{}},vt=async(L,ee)=>{const ie={cargo:ee};if(we)try{await Lr(Vt(we,"usuarios",L.username||L.id),ie),w(ve=>ve.map(Se=>Se.username===L.username||Se.id===L.id?{...Se,...ie}:Se))}catch{}},Ct=async(L,ee)=>{const ie={role:ee};if(we)try{await Lr(Vt(we,"usuarios",L.username||L.id),ie),w(ve=>ve.map(Se=>Se.username===L.username||Se.id===L.id?{...Se,...ie}:Se))}catch{}};return l.jsxs("div",{className:"panel users-panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Usurios"})}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Usurio"}),l.jsx("input",{value:i,onChange:L=>o(L.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Nome"}),l.jsx("input",{value:c,onChange:L=>u(L.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Senha"}),l.jsx("input",{type:"password",value:h,onChange:L=>p(L.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",value:g,onChange:L=>_(L.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Perfil"}),l.jsxs("select",{value:R,onChange:L=>b(L.target.value),children:[l.jsx("option",{value:"comum",children:"Comum"}),l.jsx("option",{value:"gerente",children:"Gerente"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Cargo"}),l.jsxs("select",{value:N,onChange:L=>F(L.target.value),children:[l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Pginas"}),l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(L=>l.jsxs("button",{className:`btn-md ${J[L]?"active":""}`,type:"button",onClick:()=>S(v,L),children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:L==="dashboard"?"dashboard":L==="demandas"?"demandas":L==="config"?"config":L==="cadastros"?"cadastros":L==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:L==="dashboard"?"Dashboard":L==="demandas"?"Demandas":L==="config"?"Configuraes":L==="cadastros"?"Cadastros":L==="relatorios"?"Relatrios":"Usurios"})]},L))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Aes"}),l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([L,ee,ie])=>l.jsxs("button",{className:`btn-md ${y[L]?"active":""}`,type:"button",onClick:()=>S(T,L),children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:ee})}),l.jsx("span",{children:ie})]},L))})]}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"primary",type:"button",onClick:P,disabled:s!=="admin",children:"Criar usurio"})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usurio"}),l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Perfil"}),l.jsx("th",{children:"Cargo"}),l.jsx("th",{children:"Pginas"}),l.jsx("th",{children:"Aes"}),l.jsx("th",{children:"Senha"}),l.jsx("th",{children:"Gerenciar"})]})}),l.jsx("tbody",{children:(k||[]).map(L=>l.jsxs("tr",{children:[l.jsx("td",{children:L.username}),l.jsx("td",{children:L.name||L.username}),l.jsx("td",{children:s==="admin"?l.jsxs("select",{value:L.role||"comum",onChange:ee=>Ct(L,ee.target.value),children:[l.jsx("option",{value:"comum",children:"Comum"}),l.jsx("option",{value:"gerente",children:"Gerente"}),l.jsx("option",{value:"admin",children:"Admin"})]}):L.role||"comum"}),l.jsx("td",{children:l.jsxs("select",{value:L.cargo||"",onChange:ee=>vt(L,ee.target.value),children:[l.jsx("option",{value:"",children:"Selecione"}),l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(ee=>{var ie;return l.jsxs("button",{className:`btn-md ${((ie=L.pages)==null?void 0:ie[ee])===!0?"active":""}`,type:"button",onClick:()=>qe(L,ee),disabled:s!=="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:ee==="dashboard"?"dashboard":ee==="demandas"?"demandas":ee==="config"?"config":ee==="cadastros"?"cadastros":ee==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:ee==="dashboard"?"Dashboard":ee==="demandas"?"Demandas":ee==="config"?"Configuraes":ee==="cadastros"?"Cadastros":ee==="relatorios"?"Relatrios":"Usurios"})]},ee)})})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([ee,ie,ve])=>{var Se;return l.jsxs("button",{className:`btn-md ${((Se=L.actions)==null?void 0:Se[ee])===!0?"active":""}`,type:"button",onClick:()=>Ye(L,ee),disabled:s!=="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:ie})}),l.jsx("span",{children:ve})]},ee)})})}),l.jsx("td",{children:l.jsxs("div",{className:"form-row",children:[l.jsx("input",{type:"password",placeholder:"Nova senha",value:O[L.username||L.id]||"",onChange:ee=>B(ie=>({...ie,[L.username||L.id]:ee.target.value}))}),l.jsx("button",{className:"primary",type:"button",onClick:()=>C(L),children:"Salvar"})]})}),l.jsx("td",{children:l.jsxs("button",{className:"icon",onClick:()=>D(L),disabled:L.username==="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"trash"})}),l.jsx("span",{children:"Excluir"})]})})]},L.username))})]})]})}function FP({themeVars:t,setThemeVars:e,onReset:n,appSettings:r,setAppSettings:s}){const[i,o]=Q.useState(t||{}),[c,u]=Q.useState(""),[h,p]=Q.useState("");Q.useEffect(()=>{o(t||{})},[t]);const g=v=>/^#[0-9a-fA-F]{6}$/.test(v||""),_=v=>/^#[0-9a-fA-F]{8}$/.test(v||""),R=v=>/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0|1|0?\.\d+)\)$/.exec(v||""),b=v=>Math.max(0,Math.min(255,v|0)).toString(16).padStart(2,"0"),N=v=>({r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16)}),F=v=>{if(g(v))return{fmt:"hex6",base:v,a:1};if(_(v))return{fmt:"hex8",base:"#"+v.slice(1,7),a:parseInt(v.slice(7,9),16)/255};const y=R(v);return y?{fmt:"rgba",base:"#"+b(+y[1])+b(+y[2])+b(+y[3]),a:parseFloat(y[4])}:{fmt:"other",base:v,a:1}},k=(v,y,T)=>{const S=v==="hover"?"rgba":v==="border"||v==="btnBorder"?"hex8":"hex6";if(S==="hex6"||T>=1)return y;if(S==="hex8")return y+b(Math.round(T*255));const{r:P,g:D,b:C}=N(y);return`rgba(${P},${D},${C},${T})`},w=(v,y)=>{const T={...i,[v]:y};o(T),e(T)},A=(v,y)=>{const T=F(i[v]||""),S=Math.max(0,Math.min(100,Number(y)||0))/100,P=k(v,T.base,S);w(v,P)},O=()=>{if(!c)return;const v={...i,[c]:h||""};o(v),e(v),u(""),p("")},B=()=>e(TE),J=[{title:"Base",keys:["bg","panel","accent"]},{title:"Texto",keys:["text","muted"]},{title:"Traado",keys:["border"]},{title:"Botes",keys:["btnBg","btnText","btnHoverBg","btnBorder"]},{title:"Hover/Efeitos",keys:["hover","shadow"]},{title:"Extras",keys:["green","yellow","red","chart"]}];return l.jsxs("div",{className:"panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Tema"})}),l.jsxs("div",{className:"config-grid",children:[J.map(v=>l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"title",children:v.title}),v.keys.map(y=>{const T=i[y]||"",S=F(T),P=S.fmt!=="other",D=y==="hover"||y==="border"||y==="btnBorder";return l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:y}),l.jsxs("div",{className:"color-row",children:[P?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"color",value:S.base,onChange:C=>w(y,k(y,C.target.value,S.a))}),D&&l.jsx("input",{className:"alpha",type:"range",min:"0",max:"100",step:"1",value:Math.round(S.a*100),onChange:C=>A(y,C.target.value),title:`Alpha ${Math.round(S.a*100)}%`})]}):l.jsx("input",{value:T,onChange:C=>w(y,C.target.value)}),l.jsx("div",{className:"swatch",style:{background:T}})]})]},y)})]},v.title)),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Adicionar varivel"}),l.jsxs("div",{className:"color-row",children:[l.jsx("input",{placeholder:"nome",value:c,onChange:v=>u(v.target.value)}),l.jsx("input",{placeholder:"valor",value:h,onChange:v=>p(v.target.value)}),l.jsx("button",{className:"primary",type:"button",onClick:O,children:"Adicionar"})]})]}),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Integraes"}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Autopost via mLabs"}),l.jsx("input",{type:"checkbox",checked:!!r.autoPostMLabs,onChange:v=>s(y=>({...y,autoPostMLabs:v.target.checked}))})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"danger",type:"button",onClick:n,children:"Resetar sistema"}),l.jsx("button",{className:"primary",type:"button",onClick:B,children:"Restaurar padro"})]})]})}function UP({filtros:t,setFiltros:e,designers:n,showSearch:r,statusCounts:s}){const[i,o]=Q.useState("today"),[c,u]=Q.useState(!1);Q.useEffect(()=>{const N=new Date,F=v=>{const y=T=>String(T).padStart(2,"0");return`${v.getFullYear()}-${y(v.getMonth()+1)}-${y(v.getDate())}`},k=v=>{const y=new Date(v),T=y.getDay()||7;return y.setDate(y.getDate()-(T-1)),new Date(y.getFullYear(),y.getMonth(),y.getDate())},w=v=>{const y=k(v),T=new Date(y);return T.setDate(T.getDate()+6),T},A=new Date(N.getFullYear(),N.getMonth(),1),O=new Date(N.getFullYear(),N.getMonth()+1,0),B=new Date(N.getFullYear(),N.getMonth()-1,1),J=new Date(N.getFullYear(),N.getMonth(),0);if(i==="today"&&e(v=>({...v,sIni:F(N),sFim:F(N),cIni:"",cFim:""})),i==="week"){const v=k(N),y=w(N);e(T=>({...T,sIni:F(v),sFim:F(y),cIni:"",cFim:""}))}if(i==="nextweek"){const v=k(N);v.setDate(v.getDate()+7);const y=w(v);e(T=>({...T,sIni:F(v),sFim:F(y),cIni:"",cFim:""}))}if(i==="month"&&e(v=>({...v,sIni:F(A),sFim:F(O),cIni:"",cFim:""})),i==="lastmonth"&&e(v=>({...v,sIni:F(B),sFim:F(J),cIni:"",cFim:""})),i==="last30"){const v=new Date(N);v.setDate(v.getDate()-29),e(y=>({...y,sIni:F(v),sFim:F(N),cIni:"",cFim:""}))}},[i]);const h=N=>e(F=>({...F,designer:N==="Todos"?"":N})),p=["Hoje","Semana","Prxima semana","Ms","Ms passado","Perodo customizado"],g=N=>N==="Hoje"?"today":N==="Semana"?"week":N==="Prxima semana"?"nextweek":N==="Ms"?"month":N==="Ms passado"?"lastmonth":"custom",_=["Todos",...n],R=N=>N==="Pendente"?"gray":N==="Em produo"?"yellow":N==="Revisar"?"red":N==="Aguardando Feedback"?"purple":N==="Aprovada"?"green-approve":N==="Concluida"||N==="Concluda"?"green-dark":"",b=N=>N==="Pendente"?"":N==="Em produo"?"":N==="Aguardando Feedback"?"":N==="Revisar"?"":N==="Aprovada"?"":N==="Concluida"||N==="Concluda"?"":"";return l.jsxs("div",{className:"filterbar",children:[r!==!1&&l.jsx("div",{className:"seg",style:{flex:1,minWidth:220},children:l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:t.q||"",onChange:N=>e(F=>({...F,q:N.target.value}))})}),l.jsxs("div",{className:"filters-row",children:[l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Perodo"}),p.map(N=>N==="Perodo customizado"?l.jsxs("div",{className:"date-pill",title:"Perodo customizado",children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"calendar"})}),l.jsx("input",{type:"date",value:t.cIni||"",onChange:F=>{e(k=>({...k,cIni:F.target.value})),o("custom")}}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:t.cFim||"",onChange:F=>{e(k=>({...k,cFim:F.target.value})),o("custom")}})]},N):l.jsxs("button",{className:`btn-md ${i===g(N)?"active":""}`,onClick:()=>o(g(N)),children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"calendar"})}),l.jsx("span",{children:N})]},N))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Status"}),yo.map(N=>l.jsxs("button",{className:`btn-md ${R(N)} ${(t.status||"")===N?"active":""}`,onClick:()=>e(F=>({...F,status:F.status===N?void 0:N})),children:[l.jsx("span",{className:"emoji",children:b(N)}),l.jsx("span",{children:N}),(s==null?void 0:s[N])>0?l.jsx("span",{className:"alert-count",children:s[N]}):null]},N))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Designer"}),_.map(N=>l.jsxs("button",{className:`btn-md ${(t.designer||"")===N||N==="Todos"&&!t.designer?"active":""}`,onClick:()=>h(N),children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"usuarios"})}),l.jsx("span",{children:N})]},N))]}),l.jsx("div",{className:"seg",style:{marginLeft:"auto"},children:l.jsx("button",{className:"tertiary",type:"button",onClick:()=>u(N=>!N),children:c?"Ocultar Filtros Avanados":"Filtros Avanados"})})]})]})}function zP({demandas:t,items:e,designers:n,setView:r,onEdit:s,onStatus:i,cadStatus:o,onDelete:c,onDuplicate:u,compact:h,calRef:p,setCalRef:g,loading:_,setRoute:R,setFiltros:b,user:N}){const F=(N==null?void 0:N.role)==="admin",k=(N==null?void 0:N.username)||"",w=F?e||[]:(e||[]).filter(M=>{const W=String(M.designer||"").toLowerCase(),V=String(k||"").toLowerCase(),se=String((N==null?void 0:N.name)||"").toLowerCase();return W===V||W===se}),A=w.length,O=w.filter(M=>Ge(M.status)),B=O.length;w.filter(M=>pr(M.status)).length,w.reduce((M,W)=>M+(W.revisoes||0),0),Math.round(100*(w.filter(M=>(M.revisoes||0)>0).length/Math.max(1,A)));const J=(()=>{const M=O.filter(V=>V.prazo&&V.dataConclusao&&V.dataConclusao<=V.prazo).length,W=O.filter(V=>V.prazo&&V.dataConclusao).length;return Math.round(100*(M/Math.max(1,W)))})(),v=(()=>{const M=me=>{if(!me)return null;const[j,Z,G]=String(me).split("-").map(Number);return new Date(j,Z-1,G)},W=w.map(me=>M(me.dataCriacao||me.dataSolicitacao)).filter(Boolean).sort((me,j)=>me-j);if(!W.length)return 0;const V=W[0],se=W[W.length-1];return Math.max(1,Math.round((se-V)/864e5)+1)})(),y=4,T=n.length*y*v,S=(()=>{const M=T;return M?Math.round(100*(B/M)):0})();w.filter(M=>pr(M.status)).length,w.filter(M=>_o(M.status)).length;const P=F?n:[k],D=(()=>{const M={};O.forEach(V=>{const se=V.designer||"";M[se]=(M[se]||0)+1});const W=y*v;return P.map(V=>{const se=M[V]||0,me=W?Math.round(100*(se/W)):0,j=W===0||me<=90?"Verde":me<=110?"Amarelo":"Vermelho";return{designer:V,ideal:W,real:se,used:me,status:j}})})(),C=(()=>{const M={};return w.forEach(W=>{if(!Ge(W.status)){const V=W.designer||"";M[V]=(M[V]||0)+1}}),M})();(()=>{const M=[];return D.forEach(V=>{V.used>=110?M.push(`Designer ${V.designer} sobrecarregado (${V.used}%)  risco de atraso`):V.used>=90&&M.push(`Designer ${V.designer} com carga alta (${V.used}%)  monitorar prazos`);const se=C[V.designer]||0;se>=y*2&&M.push(`Designer ${V.designer} com ${se} demandas ativas  priorizar distribuio`)}),w.filter(V=>{if(Ge(V.status)||!V.prazo)return!1;const[se,me,j]=String(V.prazo).split("-").map(Number),Z=new Date(se,(me||1)-1,j||1),G=new Date;return G.setHours(0,0,0,0),Z.setHours(0,0,0,0),Z-G<=864e5}).slice(0,5).forEach(V=>M.push(`Prazo crtico: ${V.titulo} (${V.designer||""})`)),M.length===0&&(S<=70&&M.push("Bom momento para antecipar demandas futuras."),M.push("Capacidade disponvel para novos projetos.")),M})();const qe=(()=>{const M=new Map;return O.forEach(W=>M.set(W.designer||"",(M.get(W.designer||"")||0)+1)),Array.from(M.entries()).map(([W,V])=>({designer:W,qty:V}))})(),Ye=(()=>{const M=(V,se)=>{const me=j=>{const[Z,G,pe]=String(j).split("-").map(Number);return new Date(Z,G-1,pe)};return!V||!se?null:Math.max(0,Math.round((me(se)-me(V))/864e5))},W={};return w.forEach(V=>{if(V.dataConclusao){const se=V.designer||"",me=M(V.dataCriacao||V.dataSolicitacao,V.dataConclusao);if(me!=null){const j=W[se]||{cnt:0,sum:0,min:9999,max:0};W[se]={cnt:j.cnt+1,sum:j.sum+me,min:Math.min(j.min,me),max:Math.max(j.max,me)}}}}),Object.entries(W).map(([V,se])=>({designer:V,media:se.sum/se.cnt||0}))})(),vt=(()=>{const M={};return w.forEach(W=>{if(W.prazo&&W.dataConclusao){const V=W.designer||"",se=W.dataConclusao<=W.prazo,me=M[V]||{ok:0,total:0};M[V]={ok:me.ok+(se?1:0),total:me.total+1}}}),Object.entries(M).map(([W,V])=>({designer:W,pct:Math.round(100*(V.ok/(V.total||1)))}))})(),Ct=(()=>{const M={};return w.forEach(W=>{const V=W.designer||"",se=W.revisoes||0,me=M[V]||{rTot:0,cnt:0};M[V]={rTot:me.rTot+se,cnt:me.cnt+1}}),Object.entries(M).map(([W,V])=>({designer:W,porPeca:+(V.rTot/(V.cnt||1)).toFixed(2)}))})();(()=>{const M=qe.reduce((Ne,{designer:Xe,qty:m})=>(Ne[Xe]=m,Ne),{}),W=vt.reduce((Ne,{designer:Xe,pct:m})=>(Ne[Xe]=m,Ne),{}),V=Ye.reduce((Ne,{designer:Xe,media:m})=>(Ne[Xe]=m,Ne),{}),se=Ct.reduce((Ne,{designer:Xe,porPeca:m})=>(Ne[Xe]=m,Ne),{}),me=Array.from(new Set([...Object.keys(M),...Object.keys(W),...Object.keys(V),...Object.keys(se)])).filter(Boolean),j=(Ne,Xe,m)=>m===Xe?1:Math.max(0,Math.min(1,(Ne-Xe)/(m-Xe))),Z=Math.max(...Object.values(M||{_:-1}),0),G=Math.min(...Object.values(M||{_:-1}),0),pe=100,xe=0,_e=Math.max(...Object.values(V||{_:-1}),0),ze=Math.min(...Object.values(V||{_:-1}),0),De=Math.max(...Object.values(se||{_:-1}),0),ot=Math.min(...Object.values(se||{_:-1}),0);return me.map(Ne=>{const Xe=j(M[Ne]||0,G,Z),m=j(W[Ne]||0,xe,pe),x=1-j(V[Ne]||0,ze,_e),I=1-j(se[Ne]||0,ot,De),H=Math.round((Xe*.4+m*.3+x*.2+I*.1)*100);return{designer:Ne,score:H,sla:W[Ne]||0,retrab:se[Ne]||0}}).sort((Ne,Xe)=>Xe.score-Ne.score).slice(0,5)})(),(()=>{const M=Array.from({length:11},(V,se)=>se+8),W={};return n.forEach(V=>W[V]=M.map(se=>0)),w.forEach(V=>{if(V.startedAt)try{const me=new Date(V.startedAt).getHours();if(me>=8&&me<=18){const j=V.designer||"",Z=me-8;W[j]&&W[j][Z]++}}catch{}}),{horas:M,per:W}})();const L=new Date,ee=new Date(L.getFullYear(),L.getMonth(),1),ie=new Date(L.getFullYear(),L.getMonth()+1,0),ve=new Date(L.getFullYear(),L.getMonth()-1,1),Se=new Date(L.getFullYear(),L.getMonth(),0),Re=M=>{if(!M)return null;const[W,V,se]=String(M).split("-").map(Number);return W?new Date(W,V-1,se):null},yt=(M,W,V)=>M?(M.setHours(0,0,0,0),M>=W&&M<=V):!1,nt=w.filter(M=>Ge(M.status)&&yt(Re(M.dataConclusao),ee,ie)),ct=w.filter(M=>Ge(M.status)&&yt(Re(M.dataConclusao),ve,Se)),te=w.filter(M=>yt(Re(M.dataCriacao||M.dataSolicitacao),ee,ie)),ue=w.filter(M=>yt(Re(M.dataCriacao||M.dataSolicitacao),ve,Se)),ke=w.filter(M=>{if(Ge(M.status)||!M.prazo)return!1;const W=Re(M.prazo),V=new Date;return V.setHours(0,0,0,0),W&&W<V});w.filter(M=>{if(Ge(M.status)||!M.prazo)return!1;const W=Re(M.prazo),V=new Date;return V.setHours(0,0,0,0),W?W-V<=864e5:!1}).length;const Me=(()=>{const M=nt.filter(V=>V.prazo&&V.dataConclusao&&V.dataConclusao<=V.prazo).length,W=nt.filter(V=>V.prazo&&V.dataConclusao).length;return Math.round(100*(M/Math.max(1,W)))})();(()=>{const M=ct.filter(V=>V.prazo&&V.dataConclusao&&V.dataConclusao<=V.prazo).length,W=ct.filter(V=>V.prazo&&V.dataConclusao).length;return Math.round(100*(M/Math.max(1,W)))})();const Ue=(M,W)=>{const V=Re(M),se=Re(W);return!V||!se?null:Math.max(0,Math.round((se-V)/864e5))},it=M=>{const W=M.map(se=>Ue(se.dataCriacao||se.dataSolicitacao,se.dataConclusao)).filter(se=>se!=null);return+(W.reduce((se,me)=>se+me,0)/(W.length||1)||0).toFixed(1)};it(nt),it(ct);const Bt=(()=>{const M=nt.length,W=nt.filter(V=>(V.revisoes||0)>0).length;return Math.round(100*(W/Math.max(1,M)))})();(()=>{const M=ct.length,W=ct.filter(V=>(V.revisoes||0)>0).length;return Math.round(100*(W/Math.max(1,M)))})();const $t=nt.length;ct.length,te.length,ue.length;const qt=(M,W)=>{const V=[],se=new Date;for(let me=M-1;me>=0;me--){const j=new Date(se);j.setDate(j.getDate()-me);const Z=`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}-${String(j.getDate()).padStart(2,"0")}`;V.push(W(Z,j))}return V};qt(30,(M,W)=>{const V=w.filter(j=>String(j.dataConclusao||"")===String(M)),se=V.filter(j=>j.prazo&&j.dataConclusao&&j.dataConclusao<=j.prazo).length,me=V.filter(j=>j.prazo&&j.dataConclusao).length;return Math.round(100*(se/Math.max(1,me)))}),qt(30,(M,W)=>{const se=w.filter(j=>String(j.dataConclusao||"")===String(M)).map(j=>Ue(j.dataCriacao||j.dataSolicitacao,j.dataConclusao)).filter(j=>j!=null),me=se.reduce((j,Z)=>j+Z,0)/(se.length||1);return Math.round(me||0)}),qt(30,(M,W)=>w.filter(V=>String(V.dataConclusao||"")===String(M)).length),qt(30,(M,W)=>W.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})),(()=>{if(ke.length>0)return{text:` Existem ${ke.length} demandas atrasadas hoje.`,tone:"alert",onClick:()=>_t({sFim:(()=>{const V=new Date;V.setDate(V.getDate()-1);const se=me=>String(me).padStart(2,"0");return`${V.getFullYear()}-${se(V.getMonth()+1)}-${se(V.getDate())}`})(),status:""})};const W=P.map(V=>{const se=C[V]||0,me=Math.min(100,Math.round(100*(se/(y*2))));return{d:V,used:me}}).sort((V,se)=>se.used-V.used).find(V=>V.used>=80);return W?{text:` ${W.d} est acima da capacidade ideal.`,tone:"warn",onClick:()=>_t({designer:W.d})}:{text:" Nenhuma ao necessria hoje.",tone:"ok",onClick:null}})();const _t=M=>{R&&R("demandas"),r&&r("table"),b&&b(W=>({...W,...M}))};return(()=>{const M=w.length||1,W=w.length,V=w.filter(Z=>pr(Z.status)).length,se=w.filter(Z=>String(Z.status||"").toLowerCase().includes("revis")).length,me=O.length,j=Z=>Math.round(100*(Z/Math.max(1,M)));return[{label:"Criadas",q:W,pct:j(W),color:"#4DA3FF"},{label:"Em Produo",q:V,pct:j(V),color:"#9AA0A6"},{label:"Em Reviso",q:se,pct:j(se),color:"#FFE55C"},{label:"Concludas",q:me,pct:j(me),color:"#00C58E"}]})(),P.map(M=>{const W=w.filter(_e=>(_e.designer||"")===M),V=O.filter(_e=>(_e.designer||"")===M),se=V.length,me=(()=>{const _e=V.filter(De=>De.prazo&&De.dataConclusao&&De.dataConclusao<=De.prazo).length,ze=V.filter(De=>De.prazo&&De.dataConclusao).length;return Math.round(100*(_e/Math.max(1,ze)))})(),j=(()=>{const _e=V.map(De=>Ue(De.dataCriacao||De.dataSolicitacao,De.dataConclusao)).filter(De=>De!=null);return+(_e.reduce((De,ot)=>De+ot,0)/(_e.length||1)||0).toFixed(1)})(),Z=(()=>{const _e=W.length||1,ze=W.filter(De=>(De.revisoes||0)>0).length;return Math.round(100*(ze/Math.max(1,_e)))})(),G=y*v,pe=C[M]||0,xe=G?Math.min(100,Math.round(100*(pe/G))):0;return{designer:M,concl:se,sla:me,lead:j,ret:Z,used:xe}}).slice().sort((M,W)=>W.sla!==M.sla?W.sla-M.sla:W.concl!==M.concl?W.concl-M.concl:W.ret!==M.ret?M.ret-W.ret:M.lead-W.lead),(()=>{const M={};return w.forEach(V=>{if(!Ge(V.status)&&V.prazo&&String(V.prazo)<String(jn())){const se=V.designer||"";M[se]=(M[se]||0)+1}}),Object.entries(M).map(([V,se])=>({designer:V,q:se})).sort((V,se)=>se.q-V.q)[0]||null})(),(()=>{const M={};return P.forEach(V=>{const se=O.filter(j=>(j.designer||"")===V).map(j=>Ue(j.dataCriacao||j.dataSolicitacao,j.dataConclusao)).filter(j=>j!=null),me=se.length?+(se.reduce((j,Z)=>j+Z,0)/se.length).toFixed(1):null;me!=null&&(M[V]=me)}),Object.entries(M).map(([V,se])=>({designer:V,lead:se})).sort((V,se)=>se.lead-V.lead)[0]||null})(),(()=>{const M={};return P.forEach(V=>{const se=w.filter(j=>(j.designer||"")===V),me=se.length?+(se.reduce((j,Z)=>j+(Z.revisoes||0),0)/se.length).toFixed(2):null;me!=null&&(M[V]=me)}),Object.entries(M).map(([V,se])=>({designer:V,ret:se})).sort((V,se)=>se.ret-V.ret)[0]||null})(),_?l.jsxs("div",{className:"dashboard",children:[l.jsx("div",{className:"exec-summary",children:Array.from({length:5}).map((M,W)=>l.jsx("div",{className:"skeleton row"},W))}),l.jsx("div",{className:"section-grid",children:Array.from({length:2}).map((M,W)=>l.jsx("div",{className:"skeleton card",style:{height:160}},W))})]}):l.jsx("div",{className:"reports","data-loading":_?"true":"false",children:l.jsxs("div",{className:"reports-stack",style:{display:"block"},children:[l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32},children:[l.jsx("div",{className:"report-title",children:"Resumo Pessoal"}),l.jsxs("div",{className:"kpi-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(180px, 1fr))",gap:16},children:[l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",marginBottom:6},children:"Demandas atribudas"}),l.jsx("div",{className:"kpi-number",style:{fontSize:32,fontWeight:800},children:l.jsx(nr,{value:A})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",marginBottom:6},children:"Demandas concludas"}),l.jsx("div",{className:"kpi-number",style:{fontSize:32,fontWeight:800},children:l.jsx(nr,{value:B})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",marginBottom:6},children:"Demandas em andamento"}),l.jsx("div",{className:"kpi-number",style:{fontSize:32,fontWeight:800},children:l.jsx(nr,{value:w.filter(M=>pr(M.status)).length})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",marginBottom:6},children:"SLA pessoal"}),(()=>{const M=J>=90?"var(--status-success)":J>=70?"var(--status-warning)":"var(--status-danger)",W=J>=90?"ok":J>=70?"warn":"danger";return l.jsx("div",{className:`progress sla ${W}`,style:{height:16,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},title:"SLA pessoal",children:l.jsx("div",{className:"progress-fill",style:{width:`${J}%`,height:"100%",background:M}})})})()]})]})]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32},children:[l.jsx("div",{className:"report-title",children:"Funil Pessoal"}),l.jsx("div",{className:"section-divider"}),(()=>{const M=w.length||1,W=w.length,V=w.filter(G=>pr(G.status)).length,se=w.filter(G=>String(G.status||"").toLowerCase().includes("revis")).length,me=O.length,j=G=>Math.round(100*(G/Math.max(1,M))),Z=[{label:"Criadas",q:W,pct:j(W),color:"var(--status-info)"},{label:"Em produo",q:V,pct:j(V),color:"var(--text-muted)"},{label:"Em reviso",q:se,pct:j(se),color:"var(--status-warning)"},{label:"Concludas",q:me,pct:j(me),color:"var(--status-success)"}];return l.jsx("div",{children:Z.map((G,pe)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,margin:"10px 0"},children:[l.jsx("div",{style:{minWidth:160,color:"var(--muted)"},children:G.label}),l.jsx("div",{style:{flex:1,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},title:`${G.label}: ${G.q}`,children:l.jsx(zp,{pct:G.pct,color:G.color,height:18})}),l.jsx("div",{style:{minWidth:80,textAlign:"right"},children:G.q})]},pe))})})()]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32},children:[l.jsx("div",{className:"report-title",children:"Progresso Pessoal"}),l.jsx("div",{className:"section-divider"}),(()=>{const M=te.length||1,W=Math.round(100*($t/Math.max(1,M))),V=Bt,me=Me>=90?"var(--status-success)":Me>=70?"var(--status-warning)":"var(--status-danger)",j=W>=70?"var(--status-success)":W>=40?"var(--status-warning)":"var(--status-danger)",Z=V<=15?"var(--status-success)":V<=30?"var(--status-warning)":"var(--status-danger)";return l.jsxs("div",{className:"kpi-grid",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(220px, 1fr))",gap:16},children:[l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"Taxa de concluso no perodo"}),l.jsx("div",{className:"progress",style:{height:16,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},children:l.jsx("div",{className:"progress-fill",style:{width:`${W}%`,height:"100%",background:j}})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"Retrabalho pessoal"}),l.jsx("div",{className:"progress",style:{height:16,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},children:l.jsx("div",{className:"progress-fill",style:{width:`${V}%`,height:"100%",background:Z}})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"SLA pessoal vs meta"}),l.jsx("div",{className:"progress",style:{height:16,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},children:l.jsx("div",{className:"progress-fill",style:{width:`${Me}%`,height:"100%",background:me}})})]})]})})()]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)"},children:[l.jsx("div",{className:"report-title",children:"Minhas Demandas"}),l.jsx("div",{className:"section-divider"}),w.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"table"})}),l.jsx("span",{children:"Nenhuma demanda atribuda."})]}):l.jsxs("table",{className:"report-matrix",style:{whiteSpace:"nowrap",tableLayout:"fixed",width:"100%"},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Demanda"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Prazo"}),l.jsx("th",{children:"SLA"})]})}),l.jsx("tbody",{children:w.map(M=>{const W=!!(M.prazo&&M.dataConclusao&&M.dataConclusao<=M.prazo),V=Ge(M.status)?W?"No prazo":"Estourado":(M.prazo,"");return l.jsxs("tr",{className:"row-clickable",onClick:()=>s&&s(M),children:[l.jsx("td",{children:M.titulo||"(sem ttulo)"}),l.jsx("td",{children:M.status||""}),l.jsx("td",{children:M.tipoMidia||""}),l.jsx("td",{children:M.prazo||""}),l.jsx("td",{style:{color:Ge(M.status)?W?"#00C58E":"#FF5E5E":"var(--muted)"},children:V})]},M.id)})})]})]})]})})}function BP({demandas:t,items:e,designers:n,filtros:r,setFiltros:s,loading:i,onEdit:o,setRoute:c,setView:u}){const[h,p]=Q.useState("month"),[g,_]=Q.useState(n[0]||""),[R,b]=Q.useState(n[1]||"");Q.useEffect(()=>{const m=new Date,x=wt=>{const rt=Be=>String(Be).padStart(2,"0");return`${wt.getFullYear()}-${rt(wt.getMonth()+1)}-${rt(wt.getDate())}`},I=wt=>{const rt=new Date(wt),Be=rt.getDay()||7;return rt.setDate(rt.getDate()-(Be-1)),new Date(rt.getFullYear(),rt.getMonth(),rt.getDate())},H=wt=>{const rt=I(wt),Be=new Date(rt);return Be.setDate(Be.getDate()+6),Be},he=new Date(m.getFullYear(),m.getMonth(),1),Le=new Date(m.getFullYear(),m.getMonth()+1,0),We=new Date(m.getFullYear(),m.getMonth()-1,1),Zt=new Date(m.getFullYear(),m.getMonth(),0);if(h==="today"&&s(wt=>({...wt,cIni:x(m),cFim:x(m)})),h==="week"){const wt=I(m),rt=H(m);s(Be=>({...Be,cIni:x(wt),cFim:x(rt)}))}h==="month"&&s(wt=>({...wt,cIni:x(he),cFim:x(Le)})),h==="lastmonth"&&s(wt=>({...wt,cIni:x(We),cFim:x(Zt)}))},[h]);const N=["Todos",...n],F=m=>s(x=>({...x,designer:m==="Todos"?"":m})),[k,w]=Q.useState(10),A=m=>{if(!m)return null;const[x,I,H]=String(m).split("-").map(Number);return x?new Date(x,I-1,H):null},O=(m,x)=>{const I=A(m),H=A(x);return!I||!H?null:Math.max(0,Math.round((H-I)/864e5))},B=Q.useMemo(()=>Array.isArray(t)?t:[],[t]),J=B.length,v=B.filter(m=>Ge(m.status)),y=(()=>{const m=v.filter(I=>I.prazo&&I.dataConclusao&&I.dataConclusao<=I.prazo).length,x=v.filter(I=>I.prazo&&I.dataConclusao).length;return Math.round(100*(m/Math.max(1,x)))})(),T=B.filter(m=>{if(Ge(m.status)||!m.prazo)return!1;const x=A(m.prazo),I=new Date;return I.setHours(0,0,0,0),x&&x<I}),S=Math.round(100*(T.length/Math.max(1,J))),P=(()=>{const m=v.map(I=>O(I.dataCriacao||I.dataSolicitacao,I.dataConclusao)).filter(I=>I!=null);return+(m.reduce((I,H)=>I+H,0)/(m.length||1)||0).toFixed(1)})(),D=(()=>{const m=v.map(I=>I.revisoes||0);return+(m.reduce((I,H)=>I+H,0)/(m.length||1)||0).toFixed(2)})(),C=4,qe=n.length||1,Ye=(()=>{const m=B.map(x=>A(x.dataCriacao||x.dataSolicitacao)).filter(Boolean).sort((x,I)=>x-I);return m.length?Math.max(1,Math.round((m[m.length-1]-m[0])/864e5)+1):1})(),vt=(()=>{const m=qe*C*Ye,x=v.length;return Math.round(100*(x/Math.max(1,m)))})(),Ct=(()=>{const m={};B.forEach(I=>{const H=I.designer||"";m[H]=(m[H]||0)+1});const x=J||1;return Object.entries(m).map(([I,H])=>({designer:I,q:H,pct:Math.round(100*(H/x))})).sort((I,H)=>H.q-I.q)})(),L=(()=>{const m={};return B.forEach(x=>{const I=x.status||"";m[I]=(m[I]||0)+1}),Object.entries(m).map(([x,I])=>({status:x,q:I})).sort((x,I)=>I.q-x.q)})(),ee=(()=>{const m={};return B.forEach(x=>{const I=x.tipoMidia||"Outro";m[I]=(m[I]||0)+1}),Object.entries(m).map(([x,I])=>({tipo:x,q:I})).sort((x,I)=>I.q-x.q)})(),ie=(()=>{const m={};return B.forEach(x=>{const I=x.origem||"Outros";m[I]=(m[I]||0)+1}),Object.entries(m).map(([x,I])=>({origem:x,q:I})).sort((x,I)=>I.q-x.q)})(),ve=(()=>{const m={};return v.forEach(x=>{const I=x.designer||"",H=O(x.dataCriacao||x.dataSolicitacao,x.dataConclusao);if(H!=null){const he=m[I]||{cnt:0,sum:0};m[I]={cnt:he.cnt+1,sum:he.sum+H}}}),Object.entries(m).map(([x,I])=>({designer:x,media:+(I.sum/(I.cnt||1)).toFixed(1)})).sort((x,I)=>x.media-I.media)})(),Se=(()=>{const m={};return v.forEach(x=>{const I=x.tipoMidia||"Outro",H=x.revisoes||0,he=m[I]||{rTot:0,cnt:0};m[I]={rTot:he.rTot+H,cnt:he.cnt+1}}),Object.entries(m).map(([x,I])=>({tipo:x,porPeca:+(I.rTot/(I.cnt||1)).toFixed(2)})).sort((x,I)=>I.porPeca-x.porPeca)})(),Re=T.map(m=>{const x=A(m.prazo),I=new Date;I.setHours(0,0,0,0);const H=x?Math.max(0,Math.round((I-x)/864e5)):0;return{...m,atrasoDias:H}}).sort((m,x)=>x.atrasoDias-m.atrasoDias).slice(0,5),yt=v.map(m=>{const x=O(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)||0;return{...m,leadDias:x}}).sort((m,x)=>x.leadDias-m.leadDias).slice(0,5),nt=v.slice().sort((m,x)=>(x.revisoes||0)-(m.revisoes||0)).slice(0,5),ct=(()=>{const m=H=>{if(!H)return null;const[he,Le,We]=H.split("-").map(Number);return new Date(he,Le-1,We)},x=m(r.cIni),I=m(r.cFim);return!x||!I?1:Math.max(1,Math.round((I-x)/864e5)+1)})(),te=B.filter(m=>Ge(m.status));B.filter(m=>_o(m.status)),B.filter(m=>pr(m.status)),B.reduce((m,x)=>m+(x.revisoes||0),0),te.length/ct;const ue=B.filter(m=>!Ge(m.status)),ke=m=>{if(!m)return null;const[x,I,H]=String(m).split("-").map(Number),he=new Date(x,(I||1)-1,H||1),Le=new Date;return Le.setHours(0,0,0,0),he.setHours(0,0,0,0),Math.round((he-Le)/864e5)};ue.filter(m=>{const x=ke(m.prazo);return x!=null&&x<=2}),(()=>{const m=ue.map(I=>ke(I.prazo)).filter(I=>I!=null);return+(m.reduce((I,H)=>I+H,0)/(m.length||1)).toFixed(1)})(),(()=>{const m=ue.filter(I=>{const H=ke(I.prazo);return H!=null&&H<0}).length,x=ue.length||1;return Math.round(100*(m/x))})();const Me=te.map(m=>O(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)).filter(m=>m!=null);+(Me.reduce((m,x)=>m+x,0)/(Me.length||1)).toFixed(1),(()=>{const m={};return te.forEach(x=>{const I=x.tipoMidia||"Outro",H=O(x.dataCriacao||x.dataSolicitacao,x.dataConclusao);if(H!=null){const he=m[I]||{cnt:0,sum:0};m[I]={cnt:he.cnt+1,sum:he.sum+H}}}),Object.entries(m).map(([x,I])=>({tipo:x,media:+(I.sum/I.cnt).toFixed(1)}))})(),(()=>{const m={};return te.forEach(x=>{const I=x.designer||"",H=O(x.dataCriacao||x.dataSolicitacao,x.dataConclusao);if(H!=null){const he=m[I]||{cnt:0,sum:0};m[I]={cnt:he.cnt+1,sum:he.sum+H}}}),Object.entries(m).map(([x,I])=>({designer:x,media:+(I.sum/I.cnt).toFixed(1)}))})();const Ue=new Date,it=new Date(Ue.getFullYear(),Ue.getMonth()-1,1),Bt=(m,x)=>{if(!m)return!1;const[I,H,he]=m.split("-").map(Number),Le=new Date(I,H-1,he);return Le.getMonth()===x.getMonth()&&Le.getFullYear()===x.getFullYear()},$t=te.filter(m=>Bt(m.dataConclusao,Ue)).map(m=>O(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)).filter(m=>m!=null),qt=te.filter(m=>Bt(m.dataConclusao,it)).map(m=>O(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)).filter(m=>m!=null);+($t.reduce((m,x)=>m+x,0)/($t.length||1)).toFixed(1),+(qt.reduce((m,x)=>m+x,0)/(qt.length||1)).toFixed(1),(()=>{const m=te.map(he=>he.revisoes||0),x=m.length||1,I=he=>Math.round(100*(m.filter(Le=>Le===he).length/x)),H=he=>Math.round(100*(m.filter(he).length/x));return{sRev:I(0),umaRev:I(1),duasMais:H(he=>he>=2)}})();const _t=(()=>{const m={};return B.forEach(x=>{const I=x.designer||"",H=x.revisoes||0,he=m[I]||{rTot:0,cnt:0};m[I]={rTot:he.rTot+H,cnt:he.cnt+1}}),Object.entries(m).map(([x,I])=>({designer:x,porPeca:+(I.rTot/(I.cnt||1)).toFixed(2)})).sort((x,I)=>I.porPeca-x.porPeca)})();(()=>{const m={};return B.forEach(x=>{const I=x.tipoMidia||"Outro",H=x.revisoes||0,he=m[I]||{rTot:0,cnt:0};m[I]={rTot:he.rTot+H,cnt:he.cnt+1}}),Object.entries(m).map(([x,I])=>({tipo:x,porPeca:+(I.rTot/(I.cnt||1)).toFixed(2)})).sort((x,I)=>I.porPeca-x.porPeca)})(),(()=>{const m={};B.forEach(I=>{const H=I.origem||"Outros";m[H]=(m[H]||0)+1});const x=J||1;return Object.entries(m).map(([I,H])=>({origem:I,q:H,pct:Math.round(100*(H/x))}))})(),(()=>{const m={};return B.forEach(x=>{const I=x.origem||"Outros",H=x.revisoes||0,he=m[I]||{rTot:0,cnt:0};m[I]={rTot:he.rTot+H,cnt:he.cnt+1}}),Object.entries(m).map(([x,I])=>({origem:x,porPeca:+(I.rTot/(I.cnt||1)).toFixed(2)})).sort((x,I)=>I.porPeca-x.porPeca)})(),(()=>{const m={};return v.forEach(x=>{const I=x.origem||"Outros";m[I]=(m[I]||0)+1}),Object.entries(m).map(([x,I])=>({origem:x,q:I})).sort((x,I)=>I.q-x.q)})(),(()=>{const m={};return te.forEach(x=>{const I=x.finishedAt;if(!I)return;const H=new Date(I).getHours();m[H]=(m[H]||0)+1}),m})(),(()=>{const m=te.map(H=>Number(H.tempoProducaoMs||0)).filter(H=>H>0),x=m.reduce((H,he)=>H+he,0)/(m.length||1);return+(H=>H/36e5)(x).toFixed(2)})(),(()=>{const m={};return te.forEach(x=>{const I=x.designer||"",H=Number(x.tempoProducaoMs||0),he=m[I]||{cnt:0,sum:0};m[I]={cnt:he.cnt+1,sum:he.sum+H}}),Object.entries(m).map(([x,I])=>({designer:x,horas:+(I.sum/(I.cnt||1)/36e5).toFixed(2)})).sort((x,I)=>x.horas-I.horas)})(),_t.slice().sort((m,x)=>m.porPeca-x.porPeca),(()=>{const m={};return B.forEach(x=>{const I=x.campanha||"";m[I]=(m[I]||0)+1}),Object.entries(m).map(([x,I])=>({campanha:x,q:I})).sort((x,I)=>I.q-x.q)})(),(()=>{const m={};return B.forEach(x=>{const I=x.campanha||"",H=x.revisoes||0,he=m[I]||{rTot:0,cnt:0};m[I]={rTot:he.rTot+H,cnt:he.cnt+1}}),Object.entries(m).map(([x,I])=>({campanha:x,porPeca:+(I.rTot/(I.cnt||1)).toFixed(2)})).sort((x,I)=>I.porPeca-x.porPeca)})(),(()=>{const m={};return B.forEach(x=>{if(x.campanha){const I=x.campanha,H=!!(x.prazo&&x.dataConclusao&&x.dataConclusao<=x.prazo),he=!!(x.prazo&&x.dataConclusao),Le=m[I]||{ok:0,total:0};m[I]={ok:Le.ok+(H?1:0),total:Le.total+(he?1:0)}}}),Object.entries(m).map(([x,I])=>({campanha:x,sla:Math.round(100*(I.ok/(I.total||1)))}))})();const pt=m=>{if(!m)return!1;const[x,I,H]=String(m).split("-").map(Number);if(!x)return!1;const he=new Date(x,I-1,H),Le=A(r.cIni),We=A(r.cFim);return!Le||!We?!0:(he.setHours(0,0,0,0),Le.setHours(0,0,0,0),We.setHours(0,0,0,0),he>=Le&&he<=We)},M=B.filter(m=>pt(m.prazo)),W=M.filter(m=>_o(m.status)).length,V=M.filter(m=>pr(m.status)).length,se=M.filter(m=>String(m.status||"").toLowerCase().includes("revisar")).length,me=B.filter(m=>Ge(m.status)&&pt(m.prazo)).length,j=(()=>{const m={};M.forEach(I=>{const H=I.status||"";m[H]=(m[H]||0)+1});const x=M.length||1;return Object.entries(m).map(([I,H])=>({status:I,q:H,pct:Math.round(100*(H/x))})).sort((I,H)=>H.q-I.q)})(),Z=(()=>{const m={};M.forEach(I=>{const H=I.designer||"";m[H]=(m[H]||0)+1});const x=M.length||1;return Object.entries(m).map(([I,H])=>({designer:I,q:H,pct:Math.round(100*(H/x))})).sort((I,H)=>H.q-I.q)})(),G=(()=>{const m={};M.forEach(I=>{const H=I.tipoMidia||"Outro";m[H]=(m[H]||0)+1});const x=M.length||1;return Object.entries(m).map(([I,H])=>({tipo:I,q:H,pct:Math.round(100*(H/x))})).sort((I,H)=>H.q-I.q)})(),pe=(()=>{const m=M.length||1,x=W,I=V,H=se,he=B.filter(We=>Ge(We.status)&&pt(We.prazo)).length,Le=We=>Math.round(100*(We/Math.max(1,m)));return[{label:"Criadas",q:x,pct:Le(x),color:"#4DA3FF"},{label:"Em produo",q:I,pct:Le(I),color:"#3b82f6"},{label:"Em reviso",q:H,pct:Le(H),color:"#9B59B6"},{label:"Concludas",q:he,pct:Le(he),color:"#10b981"}]})();(()=>{const m=new Date;return m.setHours(0,0,0,0),M.filter(x=>{if(Ge(x.status)||!x.prazo)return!1;const[I,H,he]=String(x.prazo).split("-").map(Number),Le=new Date(I,H-1,he);return Le.setHours(0,0,0,0),Le<m}).map(x=>{const[I,H,he]=String(x.prazo).split("-").map(Number),Le=new Date(I,H-1,he);Le.setHours(0,0,0,0);const We=Math.max(0,Math.round((m-Le)/864e5));return{...x,atrasoDias:We}}).sort((x,I)=>I.atrasoDias-x.atrasoDias).slice(0,5)})(),M.filter(x=>Ge(x.status)).map(x=>({...x,leadDias:O(x.dataCriacao||x.dataSolicitacao,x.dataConclusao)||0})).sort((x,I)=>I.leadDias-x.leadDias).slice(0,5),M.slice().sort((m,x)=>(x.revisoes||0)-(m.revisoes||0)).slice(0,5);const xe=B.filter(m=>Ge(m.status)&&Bt(m.dataConclusao,Ue)),_e=B.filter(m=>Ge(m.status)&&Bt(m.dataConclusao,it));xe.length,_e.length,(()=>{const m=xe.filter(I=>I.prazo&&I.dataConclusao&&I.dataConclusao<=I.prazo).length,x=xe.filter(I=>I.prazo&&I.dataConclusao).length;return Math.round(100*(m/Math.max(1,x)))})(),(()=>{const m=_e.filter(I=>I.prazo&&I.dataConclusao&&I.dataConclusao<=I.prazo).length,x=_e.filter(I=>I.prazo&&I.dataConclusao).length;return Math.round(100*(m/Math.max(1,x)))})(),(()=>{const m=xe.map(I=>O(I.dataCriacao||I.dataSolicitacao,I.dataConclusao)).filter(I=>I!=null);return+(m.reduce((I,H)=>I+H,0)/(m.length||1)||0).toFixed(1)})(),(()=>{const m=_e.map(I=>O(I.dataCriacao||I.dataSolicitacao,I.dataConclusao)).filter(I=>I!=null);return+(m.reduce((I,H)=>I+H,0)/(m.length||1)||0).toFixed(1)})(),(()=>{const m=xe.length||1;return+(xe.reduce((I,H)=>I+(H.revisoes||0),0)/m).toFixed(2)})(),(()=>{const m=_e.length||1;return+(_e.reduce((I,H)=>I+(H.revisoes||0),0)/m).toFixed(2)})(),(()=>{const x=[],I=new Date;for(let H=13;H>=0;H--){const he=new Date(I);he.setDate(he.getDate()-H);const Le=`${he.getFullYear()}-${String(he.getMonth()+1).padStart(2,"0")}-${String(he.getDate()).padStart(2,"0")}`;x.push(B.filter(We=>String(We.dataConclusao||"")===Le).length)}return x})();const ze=(()=>{const m=A(r.cIni),x=A(r.cFim);return!m||!x?1:Math.max(1,Math.round((x-m)/864e5)+1)})(),De=(()=>{const m={};return M.forEach(x=>{if(!Ge(x.status)){const I=x.designer||"";m[I]=(m[I]||0)+1}}),m})(),ot=n.map(m=>{const x=M.filter(Be=>(Be.designer||"")===m),I=x.filter(Be=>Ge(Be.status)),H=I.length,he=(()=>{const Be=I.filter($=>$.prazo&&$.dataConclusao&&$.dataConclusao<=$.prazo).length,He=I.filter($=>$.prazo&&$.dataConclusao).length;return Math.round(100*(Be/Math.max(1,He)))})(),Le=(()=>{const Be=I.map($=>O($.dataCriacao||$.dataSolicitacao,$.dataConclusao)).filter($=>$!=null);return+(Be.reduce(($,Te)=>$+Te,0)/(Be.length||1)||0).toFixed(1)})(),We=(()=>{const Be=x.length||1,He=x.filter($=>($.revisoes||0)>0).length;return Math.round(100*(He/Math.max(1,Be)))})(),Zt=C*ze,wt=De[m]||0,rt=Zt?Math.min(100,Math.round(100*(wt/Zt))):0;return{designer:m,concl:H,sla:he,lead:Le,ret:We,used:rt}}),[ht,Ne]=Q.useState("concl"),Xe=ot.slice().sort((m,x)=>ht==="sla"?x.sla-m.sla:ht==="lead"?m.lead-x.lead:ht==="ret"?m.ret-x.ret:x.concl-m.concl);return i?l.jsxs("div",{className:"reports",children:[l.jsx("div",{className:"reports-toolbar",children:l.jsx("div",{className:"skeleton row",style:{width:"50%"}})}),l.jsxs("div",{className:"reports-grid",id:"master-report",children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Dashboard Analtico 360"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Total: ",total]}),l.jsxs("span",{className:"chip",children:["SLA: ",y,"%"]}),l.jsxs("span",{className:"chip",children:["Atrasadas: ",S,"%"]}),l.jsxs("span",{className:"chip",children:["Lead mdio: ",P,"d"]}),l.jsxs("span",{className:"chip",children:["Retrabalho mdio: ",retrabahoMedio??D]}),l.jsxs("span",{className:"chip",children:["Capacidade mdia: ",vt,"%"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"reports-grid",children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Distribuies"}),l.jsx("div",{className:"chips",children:Ct.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.designer,": ",m.pct,"%"]},m.designer))}),l.jsx("div",{className:"chips",children:L.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.status,": ",m.q]},m.status))}),l.jsx("div",{className:"chips",children:ee.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.tipo,": ",m.q]},m.tipo))}),l.jsx("div",{className:"chips",children:ie.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.origem,": ",m.q]},m.origem))}),l.jsx("div",{className:"chips",children:ve.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.designer,": ",m.media,"d"]},m.designer))}),l.jsx("div",{className:"chips",children:Se.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.tipo,": ",m.porPeca]},m.tipo))})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Alertas Operacionais"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Mais atrasadas"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Atraso(d)"})]})}),l.jsx("tbody",{children:Re.map(m=>l.jsxs("tr",{children:[l.jsx("td",{children:m.titulo}),l.jsx("td",{children:m.designer||""}),l.jsx("td",{style:{color:"#FF5E5E"},children:m.atrasoDias})]},m.id))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Maiores lead times"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Lead(d)"})]})}),l.jsx("tbody",{children:yt.map(m=>l.jsxs("tr",{children:[l.jsx("td",{children:m.titulo}),l.jsx("td",{children:m.designer||""}),l.jsx("td",{children:m.leadDias})]},m.id))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Mais revises"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Revises"})]})}),l.jsx("tbody",{children:nt.map(m=>l.jsxs("tr",{children:[l.jsx("td",{children:m.titulo}),l.jsx("td",{children:m.designer||""}),l.jsx("td",{children:m.revisoes||0})]},m.id))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Tabela Resumida"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Ttulo"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Prazo"}),l.jsx("th",{children:"Atraso(d)"}),l.jsx("th",{children:"Lead(d)"}),l.jsx("th",{children:"Revises"})]})}),l.jsx("tbody",{children:e.slice(0,k).map(m=>{const x=!Ge(m.status)&&m.prazo&&String(m.prazo)<String(jn())?Math.max(0,Math.round((new Date().setHours(0,0,0,0)-A(m.prazo).setHours(0,0,0,0))/864e5)):0,I=Ge(m.status)?O(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)||0:null;return l.jsxs("tr",{className:"row-clickable",onClick:()=>{var H;try{(H=document.getElementById("master-report"))==null||H.scrollIntoView({behavior:"smooth"})}catch{}},children:[l.jsx("td",{children:m.titulo||"(sem ttulo)"}),l.jsx("td",{children:m.designer||""}),l.jsx("td",{children:m.status||""}),l.jsx("td",{children:m.prazo||""}),l.jsx("td",{style:{color:x>0?"#FF5E5E":"var(--muted)"},children:x||0}),l.jsx("td",{children:I??""}),l.jsx("td",{children:m.revisoes||0})]},m.id)})})]}),l.jsxs("div",{className:"table-footer",children:[e.length>k&&l.jsx("button",{className:"primary",type:"button",onClick:()=>w(m=>Math.min(m+10,e.length)),children:"Mostrar mais"}),k>10&&l.jsx("button",{className:"tertiary",type:"button",onClick:()=>w(10),children:"Mostrar menos"})]})]})]})]}),Array.from({length:3}).map((m,x)=>l.jsx("div",{className:"skeleton card",style:{height:180}},x))]})]}):(J>0&&e.length,l.jsxs("div",{className:"reports","data-loading":i?"true":"false",children:[l.jsxs("div",{className:"reports-toolbar",children:[l.jsx("div",{className:"chips",children:l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"calendar"})}),l.jsx("input",{type:"date",value:r.cIni||"",onChange:m=>s(x=>({...x,cIni:m.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:r.cFim||"",onChange:m=>s(x=>({...x,cFim:m.target.value}))})]})}),l.jsx("div",{className:"chips",children:N.map(m=>l.jsxs("button",{className:`btn-md ${(r.designer||"")===m||m==="Todos"&&!r.designer?"active":""}`,onClick:()=>F(m),children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"usuarios"})}),l.jsx("span",{children:m})]},m))})]}),l.jsxs("div",{className:"reports-stack",style:{display:"block"},children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Resumo Geral das Demandas"}),l.jsxs("div",{className:"kpi-grid",style:{display:"grid",gridTemplateColumns:"repeat(6, minmax(160px, 1fr))",gap:16},children:[l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(nr,{value:W})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Criadas"})]}),l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(nr,{value:V})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Em produo"})]}),l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(nr,{value:se})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Em reviso"})]}),l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(nr,{value:me})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Concludas"})]}),l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(nr,{value:y,suffix:"%"})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"SLA geral"})]}),l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(nr,{value:P,suffix:"d"})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Lead Time mdio"})]})]})]}),l.jsxs("div",{className:"report-card",style:{gridColumn:"1",padding:24,borderRadius:8,boxShadow:"0 6px 16px rgba(0,0,0,0.12)"},children:[l.jsx("div",{className:"report-title",children:"Funil de Status"}),l.jsx("div",{className:"section-divider"}),l.jsx("div",{children:pe.map((m,x)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,margin:"6px 0"},children:[l.jsx("div",{style:{minWidth:140,color:"var(--muted)"},children:m.label}),l.jsx("div",{style:{flex:1,background:"#222",borderRadius:6,overflow:"hidden"},title:`${m.label}: ${m.q} (${m.pct}%)`,children:l.jsx(zp,{pct:m.pct,color:m.color,height:14})}),l.jsxs("div",{style:{minWidth:80,textAlign:"right"},children:[m.q,"  ",m.pct,"%"]})]},x))})]}),l.jsxs("div",{className:"report-card",style:{gridColumn:"2",padding:24,borderRadius:8,boxShadow:"0 6px 16px rgba(0,0,0,0.12)"},children:[l.jsx("div",{className:"report-title",children:"Scorecard por Designer"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",style:{whiteSpace:"nowrap",tableLayout:"fixed",width:"100%"},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Concludas"}),l.jsx("th",{children:"SLA %"}),l.jsx("th",{children:"Lead Time(d)"}),l.jsx("th",{children:"Retrabalho %"})]})}),l.jsx("tbody",{children:Xe.map(m=>l.jsxs("tr",{children:[l.jsx("td",{children:m.designer}),l.jsx("td",{children:m.concl}),l.jsx("td",{style:{color:m.sla>=90?"#00C58E":m.sla>=70?"#FFE55C":"#FF5E5E"},children:m.sla}),l.jsx("td",{style:{color:m.lead<=2?"#00C58E":"var(--muted)"},children:m.lead}),l.jsx("td",{children:m.ret>=30?l.jsxs("span",{style:{background:"#FF5E5E22",color:"#FF5E5E",padding:"2px 6px",borderRadius:8},children:[m.ret,"%"]}):l.jsxs("span",{children:[m.ret,"%"]})})]},m.designer))})]})]}),l.jsxs("div",{className:"report-card",style:{gridColumn:"2",padding:24,borderRadius:8,boxShadow:"0 6px 16px rgba(0,0,0,0.12)"},children:[l.jsx("div",{className:"report-title",children:"Visualizaes"}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:16},children:[l.jsxs("div",{children:[l.jsx("div",{className:"widget-title",children:"Demandas por Status"}),(()=>{const m=j.slice(0,6).map(x=>{const I=String(x.status||"").toLowerCase(),H=I.includes("pendente")||I.includes("aberta")?"#f59e0b":I.includes("progresso")||I.includes("produo")?"#3b82f6":I.includes("feedback")?"#FFE55C":I.includes("revis")?"#9B59B6":I.includes("aprov")||I.includes("conclu")?"#10b981":"#4DA3FF";return{pct:x.pct,color:H,label:`${x.status} ${x.q}`}});return l.jsxs("div",{children:[l.jsx("div",{className:"stacked-bar",style:{display:"flex",height:18,overflow:"hidden",borderRadius:6},children:m.map((x,I)=>l.jsx("div",{style:{width:`${x.pct}%`,background:x.color},title:x.label},I))}),l.jsx("div",{className:"pie-legend",style:{marginTop:8},children:m.map((x,I)=>l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot",style:{background:x.color}}),x.label]},I))})]})})()]}),l.jsxs("div",{children:[l.jsx("div",{className:"widget-title",children:"Demandas por Designer"}),l.jsx("div",{children:Z.slice(0,6).map(m=>l.jsxs("div",{className:"bar-row",style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[l.jsx("div",{style:{minWidth:80,color:"var(--muted)"},children:m.designer}),l.jsx("div",{style:{flex:1,background:"#222",borderRadius:6,overflow:"hidden"},title:`${m.designer}: ${m.q}`,children:l.jsx("div",{style:{width:`${m.pct}%`,height:12,background:"#4DA3FF"}})}),l.jsx("div",{style:{minWidth:28,textAlign:"right"},children:m.q})]},m.designer))})]}),l.jsxs("div",{children:[l.jsx("div",{className:"widget-title",children:"Demandas por Tipo"}),l.jsx("div",{children:G.slice(0,6).map(m=>l.jsxs("div",{className:"bar-row",style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[l.jsx("div",{style:{minWidth:80,color:"var(--muted)"},children:m.tipo}),l.jsx("div",{style:{flex:1,background:"#222",borderRadius:6,overflow:"hidden"},title:`${m.tipo}: ${m.q}`,children:l.jsx("div",{style:{width:`${m.pct}%`,height:12,background:"#9B59B6"}})}),l.jsx("div",{style:{minWidth:28,textAlign:"right"},children:m.q})]},m.tipo))})]})]})]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:8,boxShadow:"0 6px 16px rgba(0,0,0,0.12)"},children:[l.jsx("div",{className:"report-title",children:"Relatrio de Backlog"}),l.jsx("div",{className:"section-divider"}),(()=>{const m=ue.filter(H=>pr(H.status)).length,x=ue.filter(H=>String(H.status||"").toLowerCase().includes("revis")).length,I=ue.filter(H=>{const he=ke(H.prazo);return he!=null&&he<0}).length;return l.jsxs("div",{className:"kpi-grid",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(160px, 1fr))",gap:16},children:[l.jsxs("div",{className:"kpi-card",style:{padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:m}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Em andamento"}),l.jsx("div",{style:{marginTop:8,color:m===0?"var(--status-success)":"var(--status-warning)"},children:m===0?"Controlado":"Ateno"})]}),l.jsxs("div",{className:"kpi-card",style:{padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:x}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Em reviso"}),l.jsx("div",{style:{marginTop:8,color:x===0?"var(--status-success)":"var(--status-warning)"},children:x===0?"Controlado":"Ateno"})]}),l.jsxs("div",{className:"kpi-card",style:{padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:I}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"SLA estourado"}),l.jsx("div",{style:{marginTop:8,color:I===0?"var(--status-success)":"var(--status-danger)"},children:I===0?"Controlado":"Crtico"})]})]})})()]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"O que aprendemos neste perodo"}),l.jsx("div",{className:"insights-grid",children:(()=>{const m=new Date,x=new Date(m.getFullYear(),m.getMonth(),1),I=new Date(m.getFullYear(),m.getMonth()+1,0),H=He=>{if(!He)return null;const[$,Te,Ae]=String(He).split("-").map(Number);return $?new Date($,Te-1,Ae):null},he=He=>He?(He.setHours(0,0,0,0),He>=x&&He<=I):!1,Le=e.filter(He=>Ge(He.status)&&he(H(He.dataConclusao))),We=(()=>{const He={};return Le.forEach(Te=>{const Ae=Te.designer||"",ge=Te.prazo&&Te.dataConclusao&&Te.dataConclusao<=Te.prazo,U=Te.prazo&&Te.dataConclusao,z=He[Ae]||{ok:0,total:0};He[Ae]={ok:z.ok+(ge?1:0),total:z.total+(U?1:0)}}),Object.entries(He).map(([Te,Ae])=>({designer:Te,pct:Math.round(100*(Ae.ok/(Ae.total||1)))})).sort((Te,Ae)=>Ae.pct-Te.pct)[0]})(),Zt=(()=>{const He={};e.forEach(ge=>{const U=ge.tipoMidia||"";He[U]=(He[U]||0)+1});const $=Object.entries(He).map(([ge,U])=>({tipo:ge,q:U})).sort((ge,U)=>U.q-ge.q),Te=$.reduce((ge,U)=>ge+U.q,0)||1,Ae=$[0];return Ae?{tipo:Ae.tipo,pct:Math.round(100*(Ae.q/Te))}:null})(),wt=e.filter(He=>!Ge(He.status)&&He.prazo&&String(He.prazo)<String(jn())).length===0,rt=(()=>{const $=n.length||1,Te=e.map(z=>H(z.dataCriacao||z.dataSolicitacao)).filter(Boolean).sort((z,K)=>z-K),Ae=Te.length?Math.max(1,Math.round((Te[Te.length-1]-Te[0])/864e5)+1):1,ge=$*4*Ae,U=e.filter(z=>Ge(z.status)).length;return Math.round(100*(U/Math.max(1,ge)))})(),Be=[];return rt>=80?Be.push({msg:`Capacidade mdia do time est em ${rt}%`,act:"Considere redistribuir demandas."}):Be.push({msg:`Capacidade mdia do time est em ${rt}%`,act:"Antecipe demandas futuras."}),wt&&Be.push({msg:"Nenhuma demanda apresentou atraso.",act:"Mantenha o ritmo atual de capacidade."}),We&&Be.push({msg:`O designer ${We.designer} teve o melhor SLA do perodo.`,act:"Priorize peas complexas com ele."}),Zt&&Be.push({msg:`${Zt.tipo} representa ${Zt.pct}% das demandas.`,act:`Ajuste prioridades para ${Zt.tipo}.`}),Be.slice(0,3)})().map((m,x)=>l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:m.msg}),l.jsxs("div",{className:"insight-text",style:{color:"var(--muted)"},children:[" ",m.act]})]},x))})]})]})]}))}function nr({value:t,duration:e=200,suffix:n=""}){const[r,s]=Zs.useState(0);Zs.useEffect(()=>{const o=Number(r)||0,u=(Number(t)||0)-o,h=performance.now();let p;const g=_=>{const R=Math.min(1,(_-h)/(e||200)),b=o+u*R;s(b),R<1&&(p=requestAnimationFrame(g))};return p=requestAnimationFrame(g),()=>{try{cancelAnimationFrame(p)}catch{}}},[t,e]);const i=Math.round(Number(r)||0);return Zs.createElement("span",null,`${i}${n}`)}function zp({pct:t,color:e,height:n=18}){const[r,s]=Zs.useState(0);return Zs.useEffect(()=>{const i=setTimeout(()=>s(Math.max(0,Math.min(100,t||0))),10);return()=>clearTimeout(i)},[t]),l.jsx("div",{style:{width:`${r}%`,height:n,background:e}})}function $P({demandas:t,designers:e,filtros:n,setFiltros:r,loading:s,user:i,onEdit:o,setRoute:c,setView:u}){const h=(i==null?void 0:i.role)==="admin",p=(i==null?void 0:i.username)||"",g=Q.useMemo(()=>Array.isArray(t)?t:[],[t]);[...e],Q.useMemo(()=>["Todos",...Array.from(new Set(g.map(j=>j.status||""))).filter(Boolean)],[g]),Q.useMemo(()=>["Todos",...Array.from(new Set(g.map(j=>j.tipoMidia||""))).filter(Boolean)],[g]);const[_,R]=Q.useState("month");Q.useEffect(()=>{const j=new Date,Z=ot=>{const ht=Ne=>String(Ne).padStart(2,"0");return`${ot.getFullYear()}-${ht(ot.getMonth()+1)}-${ht(ot.getDate())}`},G=ot=>{const ht=new Date(ot),Ne=ht.getDay()||7;return ht.setDate(ht.getDate()-(Ne-1)),new Date(ht.getFullYear(),ht.getMonth(),ht.getDate())},pe=ot=>{const ht=G(ot),Ne=new Date(ht);return Ne.setDate(Ne.getDate()+6),Ne},xe=new Date(j.getFullYear(),j.getMonth(),1),_e=new Date(j.getFullYear(),j.getMonth()+1,0),ze=new Date(j.getFullYear(),j.getMonth()-1,1),De=new Date(j.getFullYear(),j.getMonth(),0);if(_==="today"&&r(ot=>({...ot,cIni:Z(j),cFim:Z(j)})),_==="week"){const ot=G(j),ht=pe(j);r(Ne=>({...Ne,cIni:Z(ot),cFim:Z(ht)}))}_==="month"&&r(ot=>({...ot,cIni:Z(xe),cFim:Z(_e)})),_==="lastmonth"&&r(ot=>({...ot,cIni:Z(ze),cFim:Z(De)}))},[_]);const b=j=>{if(!j)return null;const[Z,G,pe]=String(j).split("-").map(Number);return Z?new Date(Z,G-1,pe):null},N=j=>{if(!j)return!1;const[Z,G,pe]=String(j).split("-").map(Number);if(!Z)return!1;const xe=new Date(Z,G-1,pe),_e=b(n.cIni),ze=b(n.cFim);return!_e||!ze?!0:(xe.setHours(0,0,0,0),_e.setHours(0,0,0,0),ze.setHours(0,0,0,0),xe>=_e&&xe<=ze)},F=j=>N(j.prazo),w=g.filter(F),A=w.length,O=w.filter(j=>{const Z=String(j.status||"").toLowerCase();return _o(j.status)||pr(j.status)||Z.includes("feedback")}).length,B=w.filter(j=>String(j.status||"").toLowerCase().includes("revisar")).length,J=g.filter(j=>Ge(j.status)&&N(j.prazo)).length,v=j=>{if(!j)return null;const[Z,G,pe]=String(j).split("-").map(Number),xe=new Date(Z,(G||1)-1,pe||1),_e=new Date;return _e.setHours(0,0,0,0),xe.setHours(0,0,0,0),Math.round((xe-_e)/864e5)},y=w.filter(j=>{const Z=v(j.prazo);return!Ge(j.status)&&Z!=null&&Z<=2}).length,T=(j,Z)=>{const G=b(j),pe=b(Z);return!G||!pe?null:Math.max(0,Math.round((pe-G)/864e5))},S=g.filter(j=>F(j)&&Ge(j.status)),P=(()=>{const j=S.filter(G=>G.prazo&&G.dataConclusao&&G.dataConclusao<=G.prazo).length,Z=S.filter(G=>G.prazo&&G.dataConclusao).length;return Math.round(100*(j/Math.max(1,Z)))})(),D=(()=>{const j=S.map(G=>T(G.dataCriacao||G.dataSolicitacao,G.dataConclusao)).filter(G=>G!=null);return+(j.reduce((G,pe)=>G+pe,0)/(j.length||1)||0).toFixed(1)})(),C=(()=>{const j=S.length||1,Z=S.filter(G=>(G.revisoes||0)>0).length;return Math.round(100*(Z/Math.max(1,j)))})(),qe=(()=>{const j=w.length||1,Z=A,G=O,pe=B,xe=J,_e=ze=>Math.round(100*(ze/Math.max(1,j)));return[{label:"Criadas",q:Z,pct:_e(Z),color:"var(--status-info)"},{label:"Em Produo",q:G,pct:_e(G),color:"var(--text-muted)"},{label:"Em Reviso",q:pe,pct:_e(pe),color:"var(--status-warning)"},{label:"Concludas",q:xe,pct:_e(xe),color:"var(--status-success)"}]})(),Ye=4,vt=(()=>{const j=b(n.cIni),Z=b(n.cFim);return!j||!Z?1:Math.max(1,Math.round((Z-j)/864e5)+1)})(),Ct=(()=>{const j={};return w.forEach(Z=>{if(!Ge(Z.status)){const G=Z.designer||"";j[G]=(j[G]||0)+1}}),j})(),L=h&&e.length||1,ee=w.filter(j=>!Ge(j.status)).length,ie=Ye*vt*L,ve=ie?Math.min(100,Math.round(100*(ee/ie))):0;(h?e:[p]).map(j=>{const Z=w.filter(Ne=>(Ne.designer||"")===j),G=S.filter(Ne=>(Ne.designer||"")===j),pe=G.length,xe=(()=>{const Ne=G.filter(m=>m.prazo&&m.dataConclusao&&m.dataConclusao<=m.prazo).length,Xe=G.filter(m=>m.prazo&&m.dataConclusao).length;return Math.round(100*(Ne/Math.max(1,Xe)))})(),_e=(()=>{const Ne=G.map(m=>T(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)).filter(m=>m!=null);return+(Ne.reduce((m,x)=>m+x,0)/(Ne.length||1)||0).toFixed(1)})(),ze=(()=>{const Ne=Z.length||1,Xe=Z.filter(m=>(m.revisoes||0)>0).length;return Math.round(100*(Xe/Math.max(1,Ne)))})(),De=Ye*vt,ot=Ct[j]||0,ht=De?Math.min(100,Math.round(100*(ot/De))):0;return{designer:j,concl:pe,sla:xe,lead:_e,ret:ze,used:ht}}).slice().sort((j,Z)=>Z.sla!==j.sla?Z.sla-j.sla:Z.concl!==j.concl?Z.concl-j.concl:Z.ret!==j.ret?j.ret-Z.ret:j.lead-Z.lead);const Re=h?e:[p];(()=>{const j={};return w.forEach(G=>{if(!Ge(G.status)&&G.prazo&&String(G.prazo)<String(jn())){const pe=G.designer||"";j[pe]=(j[pe]||0)+1}}),Object.entries(j).map(([G,pe])=>({designer:G,q:pe})).sort((G,pe)=>pe.q-G.q)[0]||null})(),(()=>{const j={};return Re.forEach(G=>{const xe=S.filter(ze=>(ze.designer||"")===G&&N(ze.prazo)).map(ze=>T(ze.dataCriacao||ze.dataSolicitacao,ze.dataConclusao)).filter(ze=>ze!=null),_e=xe.length?+(xe.reduce((ze,De)=>ze+De,0)/xe.length).toFixed(1):null;_e!=null&&(j[G]=_e)}),Object.entries(j).map(([G,pe])=>({designer:G,lead:pe})).sort((G,pe)=>pe.lead-G.lead)[0]||null})();const yt=(()=>{const j={};return Re.forEach(G=>{const pe=w.filter(_e=>(_e.designer||"")===G),xe=pe.length?+(pe.reduce((_e,ze)=>_e+(ze.revisoes||0),0)/pe.length).toFixed(2):null;xe!=null&&(j[G]=xe)}),Object.entries(j).map(([G,pe])=>({designer:G,ret:pe})).sort((G,pe)=>pe.ret-G.ret)[0]||null})(),nt=j=>(h?n.designer?(j.designer||"")===n.designer:!0:(j.designer||"")===p)&&(n.status?(j.status||"")===n.status:!0)&&(n.tipoMidia?(j.tipoMidia||"")===n.tipoMidia:!0)&&(n.origem?(j.origem||"")===n.origem:!0)&&(n.campanha?(j.campanha||"")===n.campanha:!0),ct=g.filter(nt),te=b(n.cIni),ue=b(n.cFim),ke=te&&ue?Math.max(1,Math.round((ue-te)/864e5)+1):0,Me=te?new Date(te):null,Ue=ue?new Date(ue):null;Me&&Me.setDate(Me.getDate()-ke),Ue&&Ue.setDate(Ue.getDate()-ke);const it=(j,Z,G)=>!j||!Z||!G?!1:(j.setHours(0,0,0,0),Z.setHours(0,0,0,0),G.setHours(0,0,0,0),j>=Z&&j<=G),Bt=ct.filter(j=>Ge(j.status)&&it(b(j.prazo),te,ue)),$t=ct.filter(j=>Ge(j.status)&&it(b(j.prazo),Me,Ue)),qt=Bt.length,_t=$t.length;(()=>{const j=Bt.filter(G=>G.prazo&&G.dataConclusao&&G.dataConclusao<=G.prazo).length,Z=Bt.filter(G=>G.prazo&&G.dataConclusao).length;return Math.round(100*(j/Math.max(1,Z)))})(),(()=>{const j=$t.filter(G=>G.prazo&&G.dataConclusao&&G.dataConclusao<=G.prazo).length,Z=$t.filter(G=>G.prazo&&G.dataConclusao).length;return Math.round(100*(j/Math.max(1,Z)))})();const pt=(()=>{const j=Bt.map(G=>T(G.dataCriacao||G.dataSolicitacao,G.dataConclusao)).filter(G=>G!=null);return+(j.reduce((G,pe)=>G+pe,0)/(j.length||1)||0).toFixed(1)})(),M=(()=>{const j=$t.map(G=>T(G.dataCriacao||G.dataSolicitacao,G.dataConclusao)).filter(G=>G!=null);return+(j.reduce((G,pe)=>G+pe,0)/(j.length||1)||0).toFixed(1)})(),W=ct.filter(j=>it(b(j.prazo),te,ue)),V=ct.filter(j=>it(b(j.prazo),Me,Ue));+(W.reduce((j,Z)=>j+(Z.revisoes||0),0)/Math.max(1,W.length)).toFixed(2),+(V.reduce((j,Z)=>j+(Z.revisoes||0),0)/Math.max(1,V.length)).toFixed(2);const[se,me]=Q.useState(10);return s?l.jsx("div",{className:"dashboard",children:l.jsx("div",{className:"exec-summary",children:Array.from({length:6}).map((j,Z)=>l.jsx("div",{className:"skeleton row"},Z))})}):l.jsxs("div",{className:"reports","data-loading":s?"true":"false",children:[l.jsx("div",{className:"reports-toolbar",children:l.jsx("div",{className:"chips",children:l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"calendar"})}),l.jsx("input",{type:"date",value:n.cIni||"",onChange:j=>r(Z=>({...Z,cIni:j.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:n.cFim||"",onChange:j=>r(Z=>({...Z,cFim:j.target.value}))})]})})}),l.jsxs("div",{className:"reports-stack",style:{display:"block"},children:[l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32},children:[l.jsx("div",{className:"report-title",children:"Sade Geral"}),(()=>{const j=+(pt-M).toFixed(1),Z=j>0,G=j<0,pe=G?"var(--status-success)":Z?"var(--status-danger)":"var(--muted)",xe=P>=90?"var(--status-success)":P>=70?"var(--status-warning)":"var(--status-danger)",_e=P>=90?"ok":P>=70?"warn":"danger";return l.jsxs("div",{className:"kpi-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(220px, 1fr))",gap:20},children:[l.jsxs("div",{className:"kpi-card",style:{padding:28,border:"1px solid var(--border)",borderRadius:16,height:180,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:13,marginBottom:8},children:"Concludas"}),l.jsx("div",{className:"kpi-number",style:{fontSize:40,fontWeight:800},children:l.jsx(nr,{value:J})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:28,border:"1px solid var(--border)",borderRadius:16,height:180,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:13,marginBottom:8},children:"SLA geral"}),l.jsx("div",{className:`progress sla ${_e}`,style:{height:18,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},title:"Percentual de entregas no prazo",children:l.jsx("div",{className:"progress-fill",style:{width:`${P}%`,height:"100%",background:xe}})}),_e==="danger"?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:"var(--status-danger)"},children:[l.jsx("span",{className:"icon",children:l.jsx(et,{name:"alert"})}),l.jsx("span",{children:"SLA em risco"})]}):null]}),l.jsxs("div",{className:"kpi-card",style:{padding:28,border:"1px solid var(--border)",borderRadius:16,height:180,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:13,marginBottom:8},children:"Lead Time mdio"}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:10},children:[l.jsx("div",{className:"kpi-number",style:{fontSize:40,fontWeight:800},children:l.jsx(nr,{value:D,suffix:"d"})}),l.jsx("div",{style:{fontSize:16,color:pe},children:Z?"":G?"":""})]})]}),l.jsxs("div",{className:"kpi-card",style:{padding:28,border:"1px solid var(--border)",borderRadius:16,height:180,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:13,marginBottom:8},children:"Backlog em risco"}),l.jsx("div",{className:"kpi-number",style:{fontSize:32,fontWeight:800,color:y>0?"var(--status-danger)":"var(--status-success)"},children:y>0?l.jsx(nr,{value:y}):"Nenhum risco"})]})]})})()]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32,minHeight:140},children:[l.jsx("div",{className:"report-title",children:"Funil de Status"}),l.jsx("div",{className:"section-divider"}),l.jsx("div",{children:qe.map((j,Z)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,margin:"10px 0"},children:[l.jsx("div",{style:{minWidth:160,color:"var(--muted)"},children:j.label}),l.jsx("div",{style:{flex:1,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},title:`${j.label}: ${j.q}`,children:l.jsx(zp,{pct:j.pct,color:j.color,height:18})}),l.jsx("div",{style:{minWidth:80,textAlign:"right"},children:j.q})]},Z))})]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32,minHeight:140},children:[l.jsx("div",{className:"report-title",children:"Prioridades do Perodo"}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(220px, 1fr))",gap:16},children:[l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"Risco atual"}),l.jsx("div",{style:{fontSize:18,fontWeight:700,color:y>0?"#FF5E5E":"#00C58E"},children:y>0?`${y} demandas em risco`:"Nenhuma demanda crtica"})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"Maior retrabalho"}),l.jsx("div",{style:{fontSize:18,fontWeight:700},children:yt?yt.designer:"Nenhum"})]}),(()=>{const Z=[{k:"Em Produo",q:O},{k:"Reviso",q:B},{k:"Criadas",q:A}].sort((pe,xe)=>xe.q-pe.q)[0],G=Z.q>0;return l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"Gargalo atual"}),l.jsx("div",{style:{fontSize:18,fontWeight:700},children:G?`Foco em ${Z.k}`:"Nenhum gargalo"})]})})()]})]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32},children:[l.jsx("div",{className:"report-title",children:"O que aprendemos neste perodo"}),l.jsx("div",{className:"section-divider"}),l.jsx("div",{className:"insights-grid",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(220px, 1fr))",gap:16},children:(()=>{const j=[],Z=ve>=110?"Redistribuir cargas para aliviar capacidade.":ve>=90?"Monitorar capacidade e priorizar entregas.":"Aproveitar capacidade para antecipar demandas.";j.push({t:ve>=90?`Ajustar capacidade (${ve}%)`:`Planejar capacidade (${ve}%)`,a:Z});const G=C>=30?"Padronizar revises e reduzir retrabalho.":C>=15?"Refinar briefing para diminuir revises.":"Manter qualidade consistente.";j.push({t:C>=15?`Reduzir retrabalho (${C}%)`:`Manter qualidade (${C}%)`,a:G});const pe=qt-_t,xe=pe>0,_e=pe<0,ze=_e?"Remover bloqueios e acelerar fluxo.":xe?"Manter ritmo e consolidar ganhos.":"Estabilizar fluxo de produo.";return j.push({t:_e?"Acelerar ritmo":xe?"Sustentar ritmo":"Estabilizar ritmo",a:ze}),j.slice(0,3).map((De,ot)=>l.jsxs("div",{className:"insight-card",style:{padding:18,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{className:"insight-text",style:{fontSize:16,fontWeight:700},children:De.t}),l.jsxs("div",{className:"insight-text",style:{color:"var(--muted)"},children:[" ",De.a]})]},ot))})()})]})]})]})}i0(document.getElementById("root")).render(l.jsx(Zs.StrictMode,{children:l.jsx(OP,{})}));
