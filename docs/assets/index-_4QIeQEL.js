(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function bE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hv={exports:{}},Xc={},Wv={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ua=Symbol.for("react.element"),VE=Symbol.for("react.portal"),LE=Symbol.for("react.fragment"),FE=Symbol.for("react.strict_mode"),UE=Symbol.for("react.profiler"),BE=Symbol.for("react.provider"),zE=Symbol.for("react.context"),$E=Symbol.for("react.forward_ref"),qE=Symbol.for("react.suspense"),HE=Symbol.for("react.memo"),WE=Symbol.for("react.lazy"),dm=Symbol.iterator;function KE(t){return t===null||typeof t!="object"?null:(t=dm&&t[dm]||t["@@iterator"],typeof t=="function"?t:null)}var Kv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gv=Object.assign,Qv={};function lo(t,e,n){this.props=t,this.context=e,this.refs=Qv,this.updater=n||Kv}lo.prototype.isReactComponent={};lo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};lo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yv(){}Yv.prototype=lo.prototype;function Hh(t,e,n){this.props=t,this.context=e,this.refs=Qv,this.updater=n||Kv}var Wh=Hh.prototype=new Yv;Wh.constructor=Hh;Gv(Wh,lo.prototype);Wh.isPureReactComponent=!0;var hm=Array.isArray,Xv=Object.prototype.hasOwnProperty,Kh={current:null},Jv={key:!0,ref:!0,__self:!0,__source:!0};function Zv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Xv.call(e,r)&&!Jv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Ua,type:t,key:i,ref:o,props:s,_owner:Kh.current}}function GE(t,e){return{$$typeof:Ua,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ua}function QE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fm=/\/+/g;function qu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QE(""+t.key):e.toString(36)}function ql(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ua:case VE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+qu(o,0):r,hm(s)?(n="",t!=null&&(n=t.replace(fm,"$&/")+"/"),ql(s,e,n,"",function(h){return h})):s!=null&&(Gh(s)&&(s=GE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",hm(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+qu(i,c);o+=ql(i,e,n,u,s)}else if(u=KE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+qu(i,c++),o+=ql(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wl(t,e,n){if(t==null)return t;var r=[],s=0;return ql(t,r,"","",function(i){return e.call(n,i,s++)}),r}function YE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},Hl={transition:null},XE={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:Hl,ReactCurrentOwner:Kh};function ey(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:wl,forEach:function(t,e,n){wl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wl(t,function(){e++}),e},toArray:function(t){return wl(t,function(e){return e})||[]},only:function(t){if(!Gh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=lo;Se.Fragment=LE;Se.Profiler=UE;Se.PureComponent=Hh;Se.StrictMode=FE;Se.Suspense=qE;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XE;Se.act=ey;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Gv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Kh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Xv.call(e,u)&&!Jv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:Ua,type:t.type,key:s,ref:i,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:zE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BE,_context:t},t.Consumer=t};Se.createElement=Zv;Se.createFactory=function(t){var e=Zv.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:$E,render:t}};Se.isValidElement=Gh;Se.lazy=function(t){return{$$typeof:WE,_payload:{_status:-1,_result:t},_init:YE}};Se.memo=function(t,e){return{$$typeof:HE,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=Hl.transition;Hl.transition={};try{t()}finally{Hl.transition=e}};Se.unstable_act=ey;Se.useCallback=function(t,e){return fn.current.useCallback(t,e)};Se.useContext=function(t){return fn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return fn.current.useEffect(t,e)};Se.useId=function(){return fn.current.useId()};Se.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return fn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};Se.useRef=function(t){return fn.current.useRef(t)};Se.useState=function(t){return fn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return fn.current.useTransition()};Se.version="18.3.1";Wv.exports=Se;var Q=Wv.exports;const ty=bE(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE=Q,ZE=Symbol.for("react.element"),eT=Symbol.for("react.fragment"),tT=Object.prototype.hasOwnProperty,nT=JE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rT={key:!0,ref:!0,__self:!0,__source:!0};function ny(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tT.call(e,r)&&!rT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ZE,type:t,key:i,ref:o,props:s,_owner:nT.current}}Xc.Fragment=eT;Xc.jsx=ny;Xc.jsxs=ny;Hv.exports=Xc;var l=Hv.exports,ry={exports:{}},bn={},sy={exports:{}},iy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,D){var F=O.length;O.push(D);e:for(;0<F;){var K=F-1>>>1,J=O[K];if(0<s(J,D))O[K]=D,O[F]=J,F=K;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var D=O[0],F=O.pop();if(F!==D){O[0]=F;e:for(var K=0,J=O.length,se=J>>>1;K<se;){var ve=2*(K+1)-1,Ve=O[ve],ze=ve+1,ct=O[ze];if(0>s(Ve,F))ze<J&&0>s(ct,Ve)?(O[K]=ct,O[ze]=F,K=ze):(O[K]=Ve,O[ve]=F,K=ve);else if(ze<J&&0>s(ct,F))O[K]=ct,O[ze]=F,K=ze;else break e}}return D}function s(O,D){var F=O.sortIndex-D.sortIndex;return F!==0?F:O.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],p=1,m=null,y=3,E=!1,N=!1,b=!1,$=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(O){for(var D=n(h);D!==null;){if(D.callback===null)r(h);else if(D.startTime<=O)r(h),D.sortIndex=D.expirationTime,e(u,D);else break;D=n(h)}}function R(O){if(b=!1,x(O),!N)if(n(u)!==null)N=!0,pt(j);else{var D=n(h);D!==null&&mt(R,D.startTime-O)}}function j(O,D){N=!1,b&&(b=!1,C(v),v=-1),E=!0;var F=y;try{for(x(D),m=n(u);m!==null&&(!(m.expirationTime>D)||O&&!P());){var K=m.callback;if(typeof K=="function"){m.callback=null,y=m.priorityLevel;var J=K(m.expirationTime<=D);D=t.unstable_now(),typeof J=="function"?m.callback=J:m===n(u)&&r(u),x(D)}else r(u);m=n(u)}if(m!==null)var se=!0;else{var ve=n(h);ve!==null&&mt(R,ve.startTime-D),se=!1}return se}finally{m=null,y=F,E=!1}}var B=!1,g=null,v=-1,I=5,w=-1;function P(){return!(t.unstable_now()-w<I)}function k(){if(g!==null){var O=t.unstable_now();w=O;var D=!0;try{D=g(!0,O)}finally{D?A():(B=!1,g=null)}}else B=!1}var A;if(typeof S=="function")A=function(){S(k)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,tt=Ne.port2;Ne.port1.onmessage=k,A=function(){tt.postMessage(null)}}else A=function(){$(k,0)};function pt(O){g=O,B||(B=!0,A())}function mt(O,D){v=$(function(){O(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){N||E||(N=!0,pt(j))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(y){case 1:case 2:case 3:var D=3;break;default:D=y}var F=y;y=D;try{return O()}finally{y=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,D){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=y;y=O;try{return D()}finally{y=F}},t.unstable_scheduleCallback=function(O,D,F){var K=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?K+F:K):F=K,O){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=F+J,O={id:p++,callback:D,priorityLevel:O,startTime:F,expirationTime:J,sortIndex:-1},F>K?(O.sortIndex=F,e(h,O),n(u)===null&&O===n(h)&&(b?(C(v),v=-1):b=!0,mt(R,F-K))):(O.sortIndex=J,e(u,O),N||E||(N=!0,pt(j))),O},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(O){var D=y;return function(){var F=y;y=D;try{return O.apply(this,arguments)}finally{y=F}}}})(iy);sy.exports=iy;var sT=sy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT=Q,On=sT;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oy=new Set,ua={};function ai(t,e){Ki(t,e),Ki(t+"Capture",e)}function Ki(t,e){for(ua[t]=e,t=0;t<e.length;t++)oy.add(e[t])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cd=Object.prototype.hasOwnProperty,oT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pm={},mm={};function aT(t){return Cd.call(mm,t)?!0:Cd.call(pm,t)?!1:oT.test(t)?mm[t]=!0:(pm[t]=!0,!1)}function lT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cT(t,e,n,r){if(e===null||typeof e>"u"||lT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qh=/[\-:]([a-z])/g;function Yh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qh,Yh);Ht[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qh,Yh);Ht[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qh,Yh);Ht[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xh(t,e,n,r){var s=Ht.hasOwnProperty(e)?Ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cT(e,n,s,r)&&(n=null),r||s===null?aT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wr=iT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,El=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),Ii=Symbol.for("react.fragment"),Jh=Symbol.for("react.strict_mode"),Pd=Symbol.for("react.profiler"),ay=Symbol.for("react.provider"),ly=Symbol.for("react.context"),Zh=Symbol.for("react.forward_ref"),Nd=Symbol.for("react.suspense"),kd=Symbol.for("react.suspense_list"),ef=Symbol.for("react.memo"),es=Symbol.for("react.lazy"),cy=Symbol.for("react.offscreen"),gm=Symbol.iterator;function Po(t){return t===null||typeof t!="object"?null:(t=gm&&t[gm]||t["@@iterator"],typeof t=="function"?t:null)}var at=Object.assign,Hu;function Fo(t){if(Hu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hu=e&&e[1]||""}return`
`+Hu+t}var Wu=!1;function Ku(t,e){if(!t||Wu)return"";Wu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Wu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fo(t):""}function uT(t){switch(t.tag){case 5:return Fo(t.type);case 16:return Fo("Lazy");case 13:return Fo("Suspense");case 19:return Fo("SuspenseList");case 0:case 2:case 15:return t=Ku(t.type,!1),t;case 11:return t=Ku(t.type.render,!1),t;case 1:return t=Ku(t.type,!0),t;default:return""}}function Rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ii:return"Fragment";case Ti:return"Portal";case Pd:return"Profiler";case Jh:return"StrictMode";case Nd:return"Suspense";case kd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ly:return(t.displayName||"Context")+".Consumer";case ay:return(t._context.displayName||"Context")+".Provider";case Zh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ef:return e=t.displayName||null,e!==null?e:Rd(t.type)||"Memo";case es:e=t._payload,t=t._init;try{return Rd(t(e))}catch{}}return null}function dT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rd(e);case 8:return e===Jh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ss(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hT(t){var e=uy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tl(t){t._valueTracker||(t._valueTracker=hT(t))}function dy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jd(t,e){var n=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ss(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hy(t,e){e=e.checked,e!=null&&Xh(t,"checked",e,!1)}function Dd(t,e){hy(t,e);var n=Ss(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Md(t,e.type,n):e.hasOwnProperty("defaultValue")&&Md(t,e.type,Ss(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ym(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Md(t,e,n){(e!=="number"||dc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Uo=Array.isArray;function Oi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ss(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Od(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _m(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(te(92));if(Uo(n)){if(1<n.length)throw Error(te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ss(n)}}function fy(t,e){var n=Ss(e.value),r=Ss(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function py(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?py(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Il,my=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Il=Il||document.createElement("div"),Il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fT=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(t){fT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qo[e]=Qo[t]})});function gy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qo.hasOwnProperty(t)&&Qo[t]?(""+e).trim():e+"px"}function vy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=gy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var pT=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vd(t,e){if(e){if(pT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function Ld(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=null;function tf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ud=null,bi=null,Vi=null;function Em(t){if(t=$a(t)){if(typeof Ud!="function")throw Error(te(280));var e=t.stateNode;e&&(e=nu(e),Ud(t.stateNode,t.type,e))}}function yy(t){bi?Vi?Vi.push(t):Vi=[t]:bi=t}function _y(){if(bi){var t=bi,e=Vi;if(Vi=bi=null,Em(t),e)for(t=0;t<e.length;t++)Em(e[t])}}function wy(t,e){return t(e)}function Ey(){}var Gu=!1;function Ty(t,e,n){if(Gu)return t(e,n);Gu=!0;try{return wy(t,e,n)}finally{Gu=!1,(bi!==null||Vi!==null)&&(Ey(),_y())}}function ha(t,e){var n=t.stateNode;if(n===null)return null;var r=nu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var Bd=!1;if(Vr)try{var No={};Object.defineProperty(No,"passive",{get:function(){Bd=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{Bd=!1}function mT(t,e,n,r,s,i,o,c,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Yo=!1,hc=null,fc=!1,zd=null,gT={onError:function(t){Yo=!0,hc=t}};function vT(t,e,n,r,s,i,o,c,u){Yo=!1,hc=null,mT.apply(gT,arguments)}function yT(t,e,n,r,s,i,o,c,u){if(vT.apply(this,arguments),Yo){if(Yo){var h=hc;Yo=!1,hc=null}else throw Error(te(198));fc||(fc=!0,zd=h)}}function li(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Iy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tm(t){if(li(t)!==t)throw Error(te(188))}function _T(t){var e=t.alternate;if(!e){if(e=li(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Tm(s),t;if(i===r)return Tm(s),e;i=i.sibling}throw Error(te(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function Sy(t){return t=_T(t),t!==null?xy(t):null}function xy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xy(t);if(e!==null)return e;t=t.sibling}return null}var Ay=On.unstable_scheduleCallback,Im=On.unstable_cancelCallback,wT=On.unstable_shouldYield,ET=On.unstable_requestPaint,_t=On.unstable_now,TT=On.unstable_getCurrentPriorityLevel,nf=On.unstable_ImmediatePriority,Cy=On.unstable_UserBlockingPriority,pc=On.unstable_NormalPriority,IT=On.unstable_LowPriority,Py=On.unstable_IdlePriority,Jc=null,gr=null;function ST(t){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(Jc,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:CT,xT=Math.log,AT=Math.LN2;function CT(t){return t>>>=0,t===0?32:31-(xT(t)/AT|0)|0}var Sl=64,xl=4194304;function Bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Bo(c):(i&=o,i!==0&&(r=Bo(i)))}else o=n&~s,o!==0?r=Bo(o):i!==0&&(r=Bo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-or(e),s=1<<n,r|=t[n],e&=~s;return r}function PT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-or(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=PT(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function $d(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ny(){var t=Sl;return Sl<<=1,!(Sl&4194240)&&(Sl=64),t}function Qu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ba(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-or(e),t[e]=n}function kT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-or(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function rf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-or(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Fe=0;function ky(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ry,sf,jy,Dy,My,qd=!1,Al=[],fs=null,ps=null,ms=null,fa=new Map,pa=new Map,ns=[],RT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sm(t,e){switch(t){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pa.delete(e.pointerId)}}function ko(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=$a(e),e!==null&&sf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function jT(t,e,n,r,s){switch(e){case"focusin":return fs=ko(fs,t,e,n,r,s),!0;case"dragenter":return ps=ko(ps,t,e,n,r,s),!0;case"mouseover":return ms=ko(ms,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fa.set(i,ko(fa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,pa.set(i,ko(pa.get(i)||null,t,e,n,r,s)),!0}return!1}function Oy(t){var e=$s(t.target);if(e!==null){var n=li(e);if(n!==null){if(e=n.tag,e===13){if(e=Iy(n),e!==null){t.blockedOn=e,My(t.priority,function(){jy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fd=r,n.target.dispatchEvent(r),Fd=null}else return e=$a(n),e!==null&&sf(e),t.blockedOn=n,!1;e.shift()}return!0}function xm(t,e,n){Wl(t)&&n.delete(e)}function DT(){qd=!1,fs!==null&&Wl(fs)&&(fs=null),ps!==null&&Wl(ps)&&(ps=null),ms!==null&&Wl(ms)&&(ms=null),fa.forEach(xm),pa.forEach(xm)}function Ro(t,e){t.blockedOn===e&&(t.blockedOn=null,qd||(qd=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,DT)))}function ma(t){function e(s){return Ro(s,t)}if(0<Al.length){Ro(Al[0],t);for(var n=1;n<Al.length;n++){var r=Al[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fs!==null&&Ro(fs,t),ps!==null&&Ro(ps,t),ms!==null&&Ro(ms,t),fa.forEach(e),pa.forEach(e),n=0;n<ns.length;n++)r=ns[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ns.length&&(n=ns[0],n.blockedOn===null);)Oy(n),n.blockedOn===null&&ns.shift()}var Li=Wr.ReactCurrentBatchConfig,gc=!0;function MT(t,e,n,r){var s=Fe,i=Li.transition;Li.transition=null;try{Fe=1,of(t,e,n,r)}finally{Fe=s,Li.transition=i}}function OT(t,e,n,r){var s=Fe,i=Li.transition;Li.transition=null;try{Fe=4,of(t,e,n,r)}finally{Fe=s,Li.transition=i}}function of(t,e,n,r){if(gc){var s=Hd(t,e,n,r);if(s===null)id(t,e,r,vc,n),Sm(t,r);else if(jT(s,t,e,n,r))r.stopPropagation();else if(Sm(t,r),e&4&&-1<RT.indexOf(t)){for(;s!==null;){var i=$a(s);if(i!==null&&Ry(i),i=Hd(t,e,n,r),i===null&&id(t,e,r,vc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else id(t,e,r,null,n)}}var vc=null;function Hd(t,e,n,r){if(vc=null,t=tf(r),t=$s(t),t!==null)if(e=li(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Iy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vc=t,null}function by(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TT()){case nf:return 1;case Cy:return 4;case pc:case IT:return 16;case Py:return 536870912;default:return 16}default:return 16}}var ls=null,af=null,Kl=null;function Vy(){if(Kl)return Kl;var t,e=af,n=e.length,r,s="value"in ls?ls.value:ls.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Kl=s.slice(t,1<r?1-r:void 0)}function Gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cl(){return!0}function Am(){return!1}function Vn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cl:Am,this.isPropagationStopped=Am,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),e}var co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lf=Vn(co),za=at({},co,{view:0,detail:0}),bT=Vn(za),Yu,Xu,jo,Zc=at({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jo&&(jo&&t.type==="mousemove"?(Yu=t.screenX-jo.screenX,Xu=t.screenY-jo.screenY):Xu=Yu=0,jo=t),Yu)},movementY:function(t){return"movementY"in t?t.movementY:Xu}}),Cm=Vn(Zc),VT=at({},Zc,{dataTransfer:0}),LT=Vn(VT),FT=at({},za,{relatedTarget:0}),Ju=Vn(FT),UT=at({},co,{animationName:0,elapsedTime:0,pseudoElement:0}),BT=Vn(UT),zT=at({},co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$T=Vn(zT),qT=at({},co,{data:0}),Pm=Vn(qT),HT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KT[t])?!!e[t]:!1}function cf(){return GT}var QT=at({},za,{key:function(t){if(t.key){var e=HT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cf,charCode:function(t){return t.type==="keypress"?Gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YT=Vn(QT),XT=at({},Zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nm=Vn(XT),JT=at({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cf}),ZT=Vn(JT),eI=at({},co,{propertyName:0,elapsedTime:0,pseudoElement:0}),tI=Vn(eI),nI=at({},Zc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rI=Vn(nI),sI=[9,13,27,32],uf=Vr&&"CompositionEvent"in window,Xo=null;Vr&&"documentMode"in document&&(Xo=document.documentMode);var iI=Vr&&"TextEvent"in window&&!Xo,Ly=Vr&&(!uf||Xo&&8<Xo&&11>=Xo),km=" ",Rm=!1;function Fy(t,e){switch(t){case"keyup":return sI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Si=!1;function oI(t,e){switch(t){case"compositionend":return Uy(e);case"keypress":return e.which!==32?null:(Rm=!0,km);case"textInput":return t=e.data,t===km&&Rm?null:t;default:return null}}function aI(t,e){if(Si)return t==="compositionend"||!uf&&Fy(t,e)?(t=Vy(),Kl=af=ls=null,Si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ly&&e.locale!=="ko"?null:e.data;default:return null}}var lI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lI[t.type]:e==="textarea"}function By(t,e,n,r){yy(r),e=yc(e,"onChange"),0<e.length&&(n=new lf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jo=null,ga=null;function cI(t){Jy(t,0)}function eu(t){var e=Ci(t);if(dy(e))return t}function uI(t,e){if(t==="change")return e}var zy=!1;if(Vr){var Zu;if(Vr){var ed="oninput"in document;if(!ed){var Dm=document.createElement("div");Dm.setAttribute("oninput","return;"),ed=typeof Dm.oninput=="function"}Zu=ed}else Zu=!1;zy=Zu&&(!document.documentMode||9<document.documentMode)}function Mm(){Jo&&(Jo.detachEvent("onpropertychange",$y),ga=Jo=null)}function $y(t){if(t.propertyName==="value"&&eu(ga)){var e=[];By(e,ga,t,tf(t)),Ty(cI,e)}}function dI(t,e,n){t==="focusin"?(Mm(),Jo=e,ga=n,Jo.attachEvent("onpropertychange",$y)):t==="focusout"&&Mm()}function hI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eu(ga)}function fI(t,e){if(t==="click")return eu(e)}function pI(t,e){if(t==="input"||t==="change")return eu(e)}function mI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lr=typeof Object.is=="function"?Object.is:mI;function va(t,e){if(lr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cd.call(e,s)||!lr(t[s],e[s]))return!1}return!0}function Om(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bm(t,e){var n=Om(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Om(n)}}function qy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hy(){for(var t=window,e=dc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dc(t.document)}return e}function df(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gI(t){var e=Hy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qy(n.ownerDocument.documentElement,n)){if(r!==null&&df(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=bm(n,i);var o=bm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vI=Vr&&"documentMode"in document&&11>=document.documentMode,xi=null,Wd=null,Zo=null,Kd=!1;function Vm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kd||xi==null||xi!==dc(r)||(r=xi,"selectionStart"in r&&df(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&va(Zo,r)||(Zo=r,r=yc(Wd,"onSelect"),0<r.length&&(e=new lf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xi)))}function Pl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ai={animationend:Pl("Animation","AnimationEnd"),animationiteration:Pl("Animation","AnimationIteration"),animationstart:Pl("Animation","AnimationStart"),transitionend:Pl("Transition","TransitionEnd")},td={},Wy={};Vr&&(Wy=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function tu(t){if(td[t])return td[t];if(!Ai[t])return t;var e=Ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Wy)return td[t]=e[n];return t}var Ky=tu("animationend"),Gy=tu("animationiteration"),Qy=tu("animationstart"),Yy=tu("transitionend"),Xy=new Map,Lm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(t,e){Xy.set(t,e),ai(e,[t])}for(var nd=0;nd<Lm.length;nd++){var rd=Lm[nd],yI=rd.toLowerCase(),_I=rd[0].toUpperCase()+rd.slice(1);ks(yI,"on"+_I)}ks(Ky,"onAnimationEnd");ks(Gy,"onAnimationIteration");ks(Qy,"onAnimationStart");ks("dblclick","onDoubleClick");ks("focusin","onFocus");ks("focusout","onBlur");ks(Yy,"onTransitionEnd");Ki("onMouseEnter",["mouseout","mouseover"]);Ki("onMouseLeave",["mouseout","mouseover"]);Ki("onPointerEnter",["pointerout","pointerover"]);Ki("onPointerLeave",["pointerout","pointerover"]);ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wI=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function Fm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yT(r,e,void 0,t),t.currentTarget=null}function Jy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Fm(s,c,h),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,h=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Fm(s,c,h),i=u}}}if(fc)throw t=zd,fc=!1,zd=null,t}function Je(t,e){var n=e[Jd];n===void 0&&(n=e[Jd]=new Set);var r=t+"__bubble";n.has(r)||(Zy(e,t,2,!1),n.add(r))}function sd(t,e,n){var r=0;e&&(r|=4),Zy(n,t,r,e)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function ya(t){if(!t[Nl]){t[Nl]=!0,oy.forEach(function(n){n!=="selectionchange"&&(wI.has(n)||sd(n,!1,t),sd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nl]||(e[Nl]=!0,sd("selectionchange",!1,e))}}function Zy(t,e,n,r){switch(by(e)){case 1:var s=MT;break;case 4:s=OT;break;default:s=of}n=s.bind(null,e,n,t),s=void 0,!Bd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function id(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=$s(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Ty(function(){var h=i,p=tf(n),m=[];e:{var y=Xy.get(t);if(y!==void 0){var E=lf,N=t;switch(t){case"keypress":if(Gl(n)===0)break e;case"keydown":case"keyup":E=YT;break;case"focusin":N="focus",E=Ju;break;case"focusout":N="blur",E=Ju;break;case"beforeblur":case"afterblur":E=Ju;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Cm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=LT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=ZT;break;case Ky:case Gy:case Qy:E=BT;break;case Yy:E=tI;break;case"scroll":E=bT;break;case"wheel":E=rI;break;case"copy":case"cut":case"paste":E=$T;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Nm}var b=(e&4)!==0,$=!b&&t==="scroll",C=b?y!==null?y+"Capture":null:y;b=[];for(var S=h,x;S!==null;){x=S;var R=x.stateNode;if(x.tag===5&&R!==null&&(x=R,C!==null&&(R=ha(S,C),R!=null&&b.push(_a(S,R,x)))),$)break;S=S.return}0<b.length&&(y=new E(y,N,null,n,p),m.push({event:y,listeners:b}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",y&&n!==Fd&&(N=n.relatedTarget||n.fromElement)&&($s(N)||N[Lr]))break e;if((E||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,E?(N=n.relatedTarget||n.toElement,E=h,N=N?$s(N):null,N!==null&&($=li(N),N!==$||N.tag!==5&&N.tag!==6)&&(N=null)):(E=null,N=h),E!==N)){if(b=Cm,R="onMouseLeave",C="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(b=Nm,R="onPointerLeave",C="onPointerEnter",S="pointer"),$=E==null?y:Ci(E),x=N==null?y:Ci(N),y=new b(R,S+"leave",E,n,p),y.target=$,y.relatedTarget=x,R=null,$s(p)===h&&(b=new b(C,S+"enter",N,n,p),b.target=x,b.relatedTarget=$,R=b),$=R,E&&N)t:{for(b=E,C=N,S=0,x=b;x;x=yi(x))S++;for(x=0,R=C;R;R=yi(R))x++;for(;0<S-x;)b=yi(b),S--;for(;0<x-S;)C=yi(C),x--;for(;S--;){if(b===C||C!==null&&b===C.alternate)break t;b=yi(b),C=yi(C)}b=null}else b=null;E!==null&&Um(m,y,E,b,!1),N!==null&&$!==null&&Um(m,$,N,b,!0)}}e:{if(y=h?Ci(h):window,E=y.nodeName&&y.nodeName.toLowerCase(),E==="select"||E==="input"&&y.type==="file")var j=uI;else if(jm(y))if(zy)j=pI;else{j=hI;var B=dI}else(E=y.nodeName)&&E.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(j=fI);if(j&&(j=j(t,h))){By(m,j,n,p);break e}B&&B(t,y,h),t==="focusout"&&(B=y._wrapperState)&&B.controlled&&y.type==="number"&&Md(y,"number",y.value)}switch(B=h?Ci(h):window,t){case"focusin":(jm(B)||B.contentEditable==="true")&&(xi=B,Wd=h,Zo=null);break;case"focusout":Zo=Wd=xi=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,Vm(m,n,p);break;case"selectionchange":if(vI)break;case"keydown":case"keyup":Vm(m,n,p)}var g;if(uf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Si?Fy(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Ly&&n.locale!=="ko"&&(Si||v!=="onCompositionStart"?v==="onCompositionEnd"&&Si&&(g=Vy()):(ls=p,af="value"in ls?ls.value:ls.textContent,Si=!0)),B=yc(h,v),0<B.length&&(v=new Pm(v,t,null,n,p),m.push({event:v,listeners:B}),g?v.data=g:(g=Uy(n),g!==null&&(v.data=g)))),(g=iI?oI(t,n):aI(t,n))&&(h=yc(h,"onBeforeInput"),0<h.length&&(p=new Pm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=g))}Jy(m,e)})}function _a(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ha(t,n),i!=null&&r.unshift(_a(t,i,s)),i=ha(t,e),i!=null&&r.push(_a(t,i,s))),t=t.return}return r}function yi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Um(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,s?(u=ha(n,i),u!=null&&o.unshift(_a(n,u,c))):s||(u=ha(n,i),u!=null&&o.push(_a(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var EI=/\r\n?/g,TI=/\u0000|\uFFFD/g;function Bm(t){return(typeof t=="string"?t:""+t).replace(EI,`
`).replace(TI,"")}function kl(t,e,n){if(e=Bm(e),Bm(t)!==e&&n)throw Error(te(425))}function _c(){}var Gd=null,Qd=null;function Yd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xd=typeof setTimeout=="function"?setTimeout:void 0,II=typeof clearTimeout=="function"?clearTimeout:void 0,zm=typeof Promise=="function"?Promise:void 0,SI=typeof queueMicrotask=="function"?queueMicrotask:typeof zm<"u"?function(t){return zm.resolve(null).then(t).catch(xI)}:Xd;function xI(t){setTimeout(function(){throw t})}function od(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ma(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ma(e)}function gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $m(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var uo=Math.random().toString(36).slice(2),fr="__reactFiber$"+uo,wa="__reactProps$"+uo,Lr="__reactContainer$"+uo,Jd="__reactEvents$"+uo,AI="__reactListeners$"+uo,CI="__reactHandles$"+uo;function $s(t){var e=t[fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lr]||n[fr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$m(t);t!==null;){if(n=t[fr])return n;t=$m(t)}return e}t=n,n=t.parentNode}return null}function $a(t){return t=t[fr]||t[Lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ci(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function nu(t){return t[wa]||null}var Zd=[],Pi=-1;function Rs(t){return{current:t}}function et(t){0>Pi||(t.current=Zd[Pi],Zd[Pi]=null,Pi--)}function Ge(t,e){Pi++,Zd[Pi]=t.current,t.current=e}var xs={},sn=Rs(xs),En=Rs(!1),Ys=xs;function Gi(t,e){var n=t.type.contextTypes;if(!n)return xs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Tn(t){return t=t.childContextTypes,t!=null}function wc(){et(En),et(sn)}function qm(t,e,n){if(sn.current!==xs)throw Error(te(168));Ge(sn,e),Ge(En,n)}function e_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(te(108,dT(t)||"Unknown",s));return at({},n,r)}function Ec(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xs,Ys=sn.current,Ge(sn,t),Ge(En,En.current),!0}function Hm(t,e,n){var r=t.stateNode;if(!r)throw Error(te(169));n?(t=e_(t,e,Ys),r.__reactInternalMemoizedMergedChildContext=t,et(En),et(sn),Ge(sn,t)):et(En),Ge(En,n)}var Pr=null,ru=!1,ad=!1;function t_(t){Pr===null?Pr=[t]:Pr.push(t)}function PI(t){ru=!0,t_(t)}function js(){if(!ad&&Pr!==null){ad=!0;var t=0,e=Fe;try{var n=Pr;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pr=null,ru=!1}catch(s){throw Pr!==null&&(Pr=Pr.slice(t+1)),Ay(nf,js),s}finally{Fe=e,ad=!1}}return null}var Ni=[],ki=0,Tc=null,Ic=0,Bn=[],zn=0,Xs=null,Nr=1,kr="";function Fs(t,e){Ni[ki++]=Ic,Ni[ki++]=Tc,Tc=t,Ic=e}function n_(t,e,n){Bn[zn++]=Nr,Bn[zn++]=kr,Bn[zn++]=Xs,Xs=t;var r=Nr;t=kr;var s=32-or(r)-1;r&=~(1<<s),n+=1;var i=32-or(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Nr=1<<32-or(e)+s|n<<s|r,kr=i+t}else Nr=1<<i|n<<s|r,kr=t}function hf(t){t.return!==null&&(Fs(t,1),n_(t,1,0))}function ff(t){for(;t===Tc;)Tc=Ni[--ki],Ni[ki]=null,Ic=Ni[--ki],Ni[ki]=null;for(;t===Xs;)Xs=Bn[--zn],Bn[zn]=null,kr=Bn[--zn],Bn[zn]=null,Nr=Bn[--zn],Bn[zn]=null}var Dn=null,Rn=null,nt=!1,ir=null;function r_(t,e){var n=$n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dn=t,Rn=gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dn=t,Rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xs!==null?{id:Nr,overflow:kr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dn=t,Rn=null,!0):!1;default:return!1}}function eh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function th(t){if(nt){var e=Rn;if(e){var n=e;if(!Wm(t,e)){if(eh(t))throw Error(te(418));e=gs(n.nextSibling);var r=Dn;e&&Wm(t,e)?r_(r,n):(t.flags=t.flags&-4097|2,nt=!1,Dn=t)}}else{if(eh(t))throw Error(te(418));t.flags=t.flags&-4097|2,nt=!1,Dn=t}}}function Km(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dn=t}function Rl(t){if(t!==Dn)return!1;if(!nt)return Km(t),nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yd(t.type,t.memoizedProps)),e&&(e=Rn)){if(eh(t))throw s_(),Error(te(418));for(;e;)r_(t,e),e=gs(e.nextSibling)}if(Km(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rn=gs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rn=null}}else Rn=Dn?gs(t.stateNode.nextSibling):null;return!0}function s_(){for(var t=Rn;t;)t=gs(t.nextSibling)}function Qi(){Rn=Dn=null,nt=!1}function pf(t){ir===null?ir=[t]:ir.push(t)}var NI=Wr.ReactCurrentBatchConfig;function Do(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,t))}return t}function jl(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gm(t){var e=t._init;return e(t._payload)}function i_(t){function e(C,S){if(t){var x=C.deletions;x===null?(C.deletions=[S],C.flags|=16):x.push(S)}}function n(C,S){if(!t)return null;for(;S!==null;)e(C,S),S=S.sibling;return null}function r(C,S){for(C=new Map;S!==null;)S.key!==null?C.set(S.key,S):C.set(S.index,S),S=S.sibling;return C}function s(C,S){return C=ws(C,S),C.index=0,C.sibling=null,C}function i(C,S,x){return C.index=x,t?(x=C.alternate,x!==null?(x=x.index,x<S?(C.flags|=2,S):x):(C.flags|=2,S)):(C.flags|=1048576,S)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function c(C,S,x,R){return S===null||S.tag!==6?(S=pd(x,C.mode,R),S.return=C,S):(S=s(S,x),S.return=C,S)}function u(C,S,x,R){var j=x.type;return j===Ii?p(C,S,x.props.children,R,x.key):S!==null&&(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===es&&Gm(j)===S.type)?(R=s(S,x.props),R.ref=Do(C,S,x),R.return=C,R):(R=tc(x.type,x.key,x.props,null,C.mode,R),R.ref=Do(C,S,x),R.return=C,R)}function h(C,S,x,R){return S===null||S.tag!==4||S.stateNode.containerInfo!==x.containerInfo||S.stateNode.implementation!==x.implementation?(S=md(x,C.mode,R),S.return=C,S):(S=s(S,x.children||[]),S.return=C,S)}function p(C,S,x,R,j){return S===null||S.tag!==7?(S=Gs(x,C.mode,R,j),S.return=C,S):(S=s(S,x),S.return=C,S)}function m(C,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return S=pd(""+S,C.mode,x),S.return=C,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case El:return x=tc(S.type,S.key,S.props,null,C.mode,x),x.ref=Do(C,null,S),x.return=C,x;case Ti:return S=md(S,C.mode,x),S.return=C,S;case es:var R=S._init;return m(C,R(S._payload),x)}if(Uo(S)||Po(S))return S=Gs(S,C.mode,x,null),S.return=C,S;jl(C,S)}return null}function y(C,S,x,R){var j=S!==null?S.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:c(C,S,""+x,R);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case El:return x.key===j?u(C,S,x,R):null;case Ti:return x.key===j?h(C,S,x,R):null;case es:return j=x._init,y(C,S,j(x._payload),R)}if(Uo(x)||Po(x))return j!==null?null:p(C,S,x,R,null);jl(C,x)}return null}function E(C,S,x,R,j){if(typeof R=="string"&&R!==""||typeof R=="number")return C=C.get(x)||null,c(S,C,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case El:return C=C.get(R.key===null?x:R.key)||null,u(S,C,R,j);case Ti:return C=C.get(R.key===null?x:R.key)||null,h(S,C,R,j);case es:var B=R._init;return E(C,S,x,B(R._payload),j)}if(Uo(R)||Po(R))return C=C.get(x)||null,p(S,C,R,j,null);jl(S,R)}return null}function N(C,S,x,R){for(var j=null,B=null,g=S,v=S=0,I=null;g!==null&&v<x.length;v++){g.index>v?(I=g,g=null):I=g.sibling;var w=y(C,g,x[v],R);if(w===null){g===null&&(g=I);break}t&&g&&w.alternate===null&&e(C,g),S=i(w,S,v),B===null?j=w:B.sibling=w,B=w,g=I}if(v===x.length)return n(C,g),nt&&Fs(C,v),j;if(g===null){for(;v<x.length;v++)g=m(C,x[v],R),g!==null&&(S=i(g,S,v),B===null?j=g:B.sibling=g,B=g);return nt&&Fs(C,v),j}for(g=r(C,g);v<x.length;v++)I=E(g,C,v,x[v],R),I!==null&&(t&&I.alternate!==null&&g.delete(I.key===null?v:I.key),S=i(I,S,v),B===null?j=I:B.sibling=I,B=I);return t&&g.forEach(function(P){return e(C,P)}),nt&&Fs(C,v),j}function b(C,S,x,R){var j=Po(x);if(typeof j!="function")throw Error(te(150));if(x=j.call(x),x==null)throw Error(te(151));for(var B=j=null,g=S,v=S=0,I=null,w=x.next();g!==null&&!w.done;v++,w=x.next()){g.index>v?(I=g,g=null):I=g.sibling;var P=y(C,g,w.value,R);if(P===null){g===null&&(g=I);break}t&&g&&P.alternate===null&&e(C,g),S=i(P,S,v),B===null?j=P:B.sibling=P,B=P,g=I}if(w.done)return n(C,g),nt&&Fs(C,v),j;if(g===null){for(;!w.done;v++,w=x.next())w=m(C,w.value,R),w!==null&&(S=i(w,S,v),B===null?j=w:B.sibling=w,B=w);return nt&&Fs(C,v),j}for(g=r(C,g);!w.done;v++,w=x.next())w=E(g,C,v,w.value,R),w!==null&&(t&&w.alternate!==null&&g.delete(w.key===null?v:w.key),S=i(w,S,v),B===null?j=w:B.sibling=w,B=w);return t&&g.forEach(function(k){return e(C,k)}),nt&&Fs(C,v),j}function $(C,S,x,R){if(typeof x=="object"&&x!==null&&x.type===Ii&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case El:e:{for(var j=x.key,B=S;B!==null;){if(B.key===j){if(j=x.type,j===Ii){if(B.tag===7){n(C,B.sibling),S=s(B,x.props.children),S.return=C,C=S;break e}}else if(B.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===es&&Gm(j)===B.type){n(C,B.sibling),S=s(B,x.props),S.ref=Do(C,B,x),S.return=C,C=S;break e}n(C,B);break}else e(C,B);B=B.sibling}x.type===Ii?(S=Gs(x.props.children,C.mode,R,x.key),S.return=C,C=S):(R=tc(x.type,x.key,x.props,null,C.mode,R),R.ref=Do(C,S,x),R.return=C,C=R)}return o(C);case Ti:e:{for(B=x.key;S!==null;){if(S.key===B)if(S.tag===4&&S.stateNode.containerInfo===x.containerInfo&&S.stateNode.implementation===x.implementation){n(C,S.sibling),S=s(S,x.children||[]),S.return=C,C=S;break e}else{n(C,S);break}else e(C,S);S=S.sibling}S=md(x,C.mode,R),S.return=C,C=S}return o(C);case es:return B=x._init,$(C,S,B(x._payload),R)}if(Uo(x))return N(C,S,x,R);if(Po(x))return b(C,S,x,R);jl(C,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,S!==null&&S.tag===6?(n(C,S.sibling),S=s(S,x),S.return=C,C=S):(n(C,S),S=pd(x,C.mode,R),S.return=C,C=S),o(C)):n(C,S)}return $}var Yi=i_(!0),o_=i_(!1),Sc=Rs(null),xc=null,Ri=null,mf=null;function gf(){mf=Ri=xc=null}function vf(t){var e=Sc.current;et(Sc),t._currentValue=e}function nh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fi(t,e){xc=t,mf=Ri=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function Wn(t){var e=t._currentValue;if(mf!==t)if(t={context:t,memoizedValue:e,next:null},Ri===null){if(xc===null)throw Error(te(308));Ri=t,xc.dependencies={lanes:0,firstContext:t}}else Ri=Ri.next=t;return e}var qs=null;function yf(t){qs===null?qs=[t]:qs.push(t)}function a_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,yf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ts=!1;function _f(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Fr(t,n)}return s=r.interleaved,s===null?(e.next=e,yf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Fr(t,n)}function Ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rf(t,n)}}function Qm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ac(t,e,n,r){var s=t.updateQueue;ts=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=h:c.next=h,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=h=u=null,c=i;do{var y=c.lane,E=c.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:E,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=t,b=c;switch(y=e,E=n,b.tag){case 1:if(N=b.payload,typeof N=="function"){m=N.call(E,m,y);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=b.payload,y=typeof N=="function"?N.call(E,m,y):N,y==null)break e;m=at({},m,y);break e;case 2:ts=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[c]:y.push(c))}else E={eventTime:E,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(h=p=E,u=m):p=p.next=E,o|=y;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;y=c,c=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Zs|=o,t.lanes=o,t.memoizedState=m}}function Ym(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(te(191,s));s.call(r)}}}var qa={},vr=Rs(qa),Ea=Rs(qa),Ta=Rs(qa);function Hs(t){if(t===qa)throw Error(te(174));return t}function wf(t,e){switch(Ge(Ta,e),Ge(Ea,t),Ge(vr,qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bd(e,t)}et(vr),Ge(vr,e)}function Xi(){et(vr),et(Ea),et(Ta)}function c_(t){Hs(Ta.current);var e=Hs(vr.current),n=bd(e,t.type);e!==n&&(Ge(Ea,t),Ge(vr,n))}function Ef(t){Ea.current===t&&(et(vr),et(Ea))}var it=Rs(0);function Cc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ld=[];function Tf(){for(var t=0;t<ld.length;t++)ld[t]._workInProgressVersionPrimary=null;ld.length=0}var Yl=Wr.ReactCurrentDispatcher,cd=Wr.ReactCurrentBatchConfig,Js=0,ot=null,Nt=null,Ot=null,Pc=!1,ea=!1,Ia=0,kI=0;function Jt(){throw Error(te(321))}function If(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!lr(t[n],e[n]))return!1;return!0}function Sf(t,e,n,r,s,i){if(Js=i,ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=t===null||t.memoizedState===null?MI:OI,t=n(r,s),ea){i=0;do{if(ea=!1,Ia=0,25<=i)throw Error(te(301));i+=1,Ot=Nt=null,e.updateQueue=null,Yl.current=bI,t=n(r,s)}while(ea)}if(Yl.current=Nc,e=Nt!==null&&Nt.next!==null,Js=0,Ot=Nt=ot=null,Pc=!1,e)throw Error(te(300));return t}function xf(){var t=Ia!==0;return Ia=0,t}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ot.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function Kn(){if(Nt===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Ot===null?ot.memoizedState:Ot.next;if(e!==null)Ot=e,Nt=t;else{if(t===null)throw Error(te(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Ot===null?ot.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Sa(t,e){return typeof e=="function"?e(t):e}function ud(t){var e=Kn(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=Nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,h=i;do{var p=h.lane;if((Js&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,ot.lanes|=p,Zs|=p}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=c,lr(r,e.memoizedState)||(wn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ot.lanes|=i,Zs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dd(t){var e=Kn(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);lr(i,e.memoizedState)||(wn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function u_(){}function d_(t,e){var n=ot,r=Kn(),s=e(),i=!lr(r.memoizedState,s);if(i&&(r.memoizedState=s,wn=!0),r=r.queue,Af(p_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,xa(9,f_.bind(null,n,r,s,e),void 0,null),bt===null)throw Error(te(349));Js&30||h_(n,e,s)}return s}function h_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f_(t,e,n,r){e.value=n,e.getSnapshot=r,m_(e)&&g_(t)}function p_(t,e,n){return n(function(){m_(e)&&g_(t)})}function m_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!lr(t,n)}catch{return!0}}function g_(t){var e=Fr(t,1);e!==null&&ar(e,t,1,-1)}function Xm(t){var e=hr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:t},e.queue=t,t=t.dispatch=DI.bind(null,ot,t),[e.memoizedState,t]}function xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function v_(){return Kn().memoizedState}function Xl(t,e,n,r){var s=hr();ot.flags|=t,s.memoizedState=xa(1|e,n,void 0,r===void 0?null:r)}function su(t,e,n,r){var s=Kn();r=r===void 0?null:r;var i=void 0;if(Nt!==null){var o=Nt.memoizedState;if(i=o.destroy,r!==null&&If(r,o.deps)){s.memoizedState=xa(e,n,i,r);return}}ot.flags|=t,s.memoizedState=xa(1|e,n,i,r)}function Jm(t,e){return Xl(8390656,8,t,e)}function Af(t,e){return su(2048,8,t,e)}function y_(t,e){return su(4,2,t,e)}function __(t,e){return su(4,4,t,e)}function w_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function E_(t,e,n){return n=n!=null?n.concat([t]):null,su(4,4,w_.bind(null,e,t),n)}function Cf(){}function T_(t,e){var n=Kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&If(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function I_(t,e){var n=Kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&If(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function S_(t,e,n){return Js&21?(lr(n,e)||(n=Ny(),ot.lanes|=n,Zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function RI(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=cd.transition;cd.transition={};try{t(!1),e()}finally{Fe=n,cd.transition=r}}function x_(){return Kn().memoizedState}function jI(t,e,n){var r=_s(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A_(t))C_(e,n);else if(n=a_(t,e,n,r),n!==null){var s=hn();ar(n,t,r,s),P_(n,e,r)}}function DI(t,e,n){var r=_s(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A_(t))C_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,lr(c,o)){var u=e.interleaved;u===null?(s.next=s,yf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=a_(t,e,s,r),n!==null&&(s=hn(),ar(n,t,r,s),P_(n,e,r))}}function A_(t){var e=t.alternate;return t===ot||e!==null&&e===ot}function C_(t,e){ea=Pc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function P_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rf(t,n)}}var Nc={readContext:Wn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},MI={readContext:Wn,useCallback:function(t,e){return hr().memoizedState=[t,e===void 0?null:e],t},useContext:Wn,useEffect:Jm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xl(4194308,4,w_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xl(4,2,t,e)},useMemo:function(t,e){var n=hr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jI.bind(null,ot,t),[r.memoizedState,t]},useRef:function(t){var e=hr();return t={current:t},e.memoizedState=t},useState:Xm,useDebugValue:Cf,useDeferredValue:function(t){return hr().memoizedState=t},useTransition:function(){var t=Xm(!1),e=t[0];return t=RI.bind(null,t[1]),hr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ot,s=hr();if(nt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),bt===null)throw Error(te(349));Js&30||h_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Jm(p_.bind(null,r,i,t),[t]),r.flags|=2048,xa(9,f_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hr(),e=bt.identifierPrefix;if(nt){var n=kr,r=Nr;n=(r&~(1<<32-or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ia++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},OI={readContext:Wn,useCallback:T_,useContext:Wn,useEffect:Af,useImperativeHandle:E_,useInsertionEffect:y_,useLayoutEffect:__,useMemo:I_,useReducer:ud,useRef:v_,useState:function(){return ud(Sa)},useDebugValue:Cf,useDeferredValue:function(t){var e=Kn();return S_(e,Nt.memoizedState,t)},useTransition:function(){var t=ud(Sa)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:u_,useSyncExternalStore:d_,useId:x_,unstable_isNewReconciler:!1},bI={readContext:Wn,useCallback:T_,useContext:Wn,useEffect:Af,useImperativeHandle:E_,useInsertionEffect:y_,useLayoutEffect:__,useMemo:I_,useReducer:dd,useRef:v_,useState:function(){return dd(Sa)},useDebugValue:Cf,useDeferredValue:function(t){var e=Kn();return Nt===null?e.memoizedState=t:S_(e,Nt.memoizedState,t)},useTransition:function(){var t=dd(Sa)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:u_,useSyncExternalStore:d_,useId:x_,unstable_isNewReconciler:!1};function rr(t,e){if(t&&t.defaultProps){e=at({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:at({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var iu={isMounted:function(t){return(t=t._reactInternals)?li(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hn(),s=_s(t),i=Mr(r,s);i.payload=e,n!=null&&(i.callback=n),e=vs(t,i,s),e!==null&&(ar(e,t,s,r),Ql(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hn(),s=_s(t),i=Mr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=vs(t,i,s),e!==null&&(ar(e,t,s,r),Ql(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),r=_s(t),s=Mr(n,r);s.tag=2,e!=null&&(s.callback=e),e=vs(t,s,r),e!==null&&(ar(e,t,r,n),Ql(e,t,r))}};function Zm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!va(n,r)||!va(s,i):!0}function N_(t,e,n){var r=!1,s=xs,i=e.contextType;return typeof i=="object"&&i!==null?i=Wn(i):(s=Tn(e)?Ys:sn.current,r=e.contextTypes,i=(r=r!=null)?Gi(t,s):xs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=iu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function eg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&iu.enqueueReplaceState(e,e.state,null)}function sh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_f(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wn(i):(i=Tn(e)?Ys:sn.current,s.context=Gi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(rh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&iu.enqueueReplaceState(s,s.state,null),Ac(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ji(t,e){try{var n="",r=e;do n+=uT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function hd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ih(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VI=typeof WeakMap=="function"?WeakMap:Map;function k_(t,e,n){n=Mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Rc||(Rc=!0,mh=r),ih(t,e)},n}function R_(t,e,n){n=Mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ih(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ih(t,e),typeof r!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function tg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new VI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=XI.bind(null,t,e,n),e.then(t,t))}function ng(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mr(-1,1),e.tag=2,vs(n,e,1))),n.lanes|=1),t)}var LI=Wr.ReactCurrentOwner,wn=!1;function dn(t,e,n,r){e.child=t===null?o_(e,null,n,r):Yi(e,t.child,n,r)}function sg(t,e,n,r,s){n=n.render;var i=e.ref;return Fi(e,s),r=Sf(t,e,n,r,i,s),n=xf(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ur(t,e,s)):(nt&&n&&hf(e),e.flags|=1,dn(t,e,r,s),e.child)}function ig(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Of(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,j_(t,e,i,r,s)):(t=tc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:va,n(o,r)&&t.ref===e.ref)return Ur(t,e,s)}return e.flags|=1,t=ws(i,r),t.ref=e.ref,t.return=e,e.child=t}function j_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(va(i,r)&&t.ref===e.ref)if(wn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,Ur(t,e,s)}return oh(t,e,n,r,s)}function D_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Di,kn),kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ge(Di,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ge(Di,kn),kn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ge(Di,kn),kn|=r;return dn(t,e,s,n),e.child}function M_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function oh(t,e,n,r,s){var i=Tn(n)?Ys:sn.current;return i=Gi(e,i),Fi(e,s),n=Sf(t,e,n,r,i,s),r=xf(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ur(t,e,s)):(nt&&r&&hf(e),e.flags|=1,dn(t,e,n,s),e.child)}function og(t,e,n,r,s){if(Tn(n)){var i=!0;Ec(e)}else i=!1;if(Fi(e,s),e.stateNode===null)Jl(t,e),N_(e,n,r),sh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Wn(h):(h=Tn(n)?Ys:sn.current,h=Gi(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==h)&&eg(e,o,r,h),ts=!1;var y=e.memoizedState;o.state=y,Ac(e,r,o,s),u=e.memoizedState,c!==r||y!==u||En.current||ts?(typeof p=="function"&&(rh(e,n,p,r),u=e.memoizedState),(c=ts||Zm(e,n,c,r,y,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l_(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:rr(e.type,c),o.props=h,m=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Wn(u):(u=Tn(n)?Ys:sn.current,u=Gi(e,u));var E=n.getDerivedStateFromProps;(p=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||y!==u)&&eg(e,o,r,u),ts=!1,y=e.memoizedState,o.state=y,Ac(e,r,o,s);var N=e.memoizedState;c!==m||y!==N||En.current||ts?(typeof E=="function"&&(rh(e,n,E,r),N=e.memoizedState),(h=ts||Zm(e,n,h,r,y,N,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return ah(t,e,n,r,i,s)}function ah(t,e,n,r,s,i){M_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Hm(e,n,!1),Ur(t,e,i);r=e.stateNode,LI.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Yi(e,t.child,null,i),e.child=Yi(e,null,c,i)):dn(t,e,c,i),e.memoizedState=r.state,s&&Hm(e,n,!0),e.child}function O_(t){var e=t.stateNode;e.pendingContext?qm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qm(t,e.context,!1),wf(t,e.containerInfo)}function ag(t,e,n,r,s){return Qi(),pf(s),e.flags|=256,dn(t,e,n,r),e.child}var lh={dehydrated:null,treeContext:null,retryLane:0};function ch(t){return{baseLanes:t,cachePool:null,transitions:null}}function b_(t,e,n){var r=e.pendingProps,s=it.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ge(it,s&1),t===null)return th(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=lu(o,r,0,null),t=Gs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ch(n),e.memoizedState=lh,t):Pf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return FI(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ws(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=ws(c,i):(i=Gs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ch(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=lh,r}return i=t.child,t=i.sibling,r=ws(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pf(t,e){return e=lu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dl(t,e,n,r){return r!==null&&pf(r),Yi(e,t.child,null,n),t=Pf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=hd(Error(te(422))),Dl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=lu({mode:"visible",children:r.children},s,0,null),i=Gs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Yi(e,t.child,null,o),e.child.memoizedState=ch(o),e.memoizedState=lh,i);if(!(e.mode&1))return Dl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(te(419)),r=hd(i,r,void 0),Dl(t,e,o,r)}if(c=(o&t.childLanes)!==0,wn||c){if(r=bt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Fr(t,s),ar(r,t,s,-1))}return Mf(),r=hd(Error(te(421))),Dl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=JI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Rn=gs(s.nextSibling),Dn=e,nt=!0,ir=null,t!==null&&(Bn[zn++]=Nr,Bn[zn++]=kr,Bn[zn++]=Xs,Nr=t.id,kr=t.overflow,Xs=e),e=Pf(e,r.children),e.flags|=4096,e)}function lg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nh(t.return,e,n)}function fd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function V_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(dn(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lg(t,n,e);else if(t.tag===19)lg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ge(it,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Cc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),fd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Cc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}fd(e,!0,n,null,i);break;case"together":fd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ur(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=ws(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ws(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function UI(t,e,n){switch(e.tag){case 3:O_(e),Qi();break;case 5:c_(e);break;case 1:Tn(e.type)&&Ec(e);break;case 4:wf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ge(Sc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ge(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?b_(t,e,n):(Ge(it,it.current&1),t=Ur(t,e,n),t!==null?t.sibling:null);Ge(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return V_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ge(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,D_(t,e,n)}return Ur(t,e,n)}var L_,uh,F_,U_;L_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uh=function(){};F_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Hs(vr.current);var i=null;switch(n){case"input":s=jd(t,s),r=jd(t,r),i=[];break;case"select":s=at({},s,{value:void 0}),r=at({},r,{value:void 0}),i=[];break;case"textarea":s=Od(t,s),r=Od(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_c)}Vd(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var c=s[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ua.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(c=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ua.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Je("scroll",t),i||c===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};U_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mo(t,e){if(!nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function BI(t,e,n){var r=e.pendingProps;switch(ff(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return Tn(e.type)&&wc(),Zt(e),null;case 3:return r=e.stateNode,Xi(),et(En),et(sn),Tf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ir!==null&&(yh(ir),ir=null))),uh(t,e),Zt(e),null;case 5:Ef(e);var s=Hs(Ta.current);if(n=e.type,t!==null&&e.stateNode!=null)F_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(te(166));return Zt(e),null}if(t=Hs(vr.current),Rl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fr]=e,r[wa]=i,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(s=0;s<zo.length;s++)Je(zo[s],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":vm(r,i),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Je("invalid",r);break;case"textarea":_m(r,i),Je("invalid",r)}Vd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&kl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&kl(r.textContent,c,t),s=["children",""+c]):ua.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":Tl(r),ym(r,i,!0);break;case"textarea":Tl(r),wm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_c)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=py(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fr]=e,t[wa]=r,L_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ld(n,r),n){case"dialog":Je("cancel",t),Je("close",t),s=r;break;case"iframe":case"object":case"embed":Je("load",t),s=r;break;case"video":case"audio":for(s=0;s<zo.length;s++)Je(zo[s],t);s=r;break;case"source":Je("error",t),s=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),s=r;break;case"details":Je("toggle",t),s=r;break;case"input":vm(t,r),s=jd(t,r),Je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=at({},r,{value:void 0}),Je("invalid",t);break;case"textarea":_m(t,r),s=Od(t,r),Je("invalid",t);break;default:s=r}Vd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?vy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&my(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&da(t,u):typeof u=="number"&&da(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ua.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Je("scroll",t):u!=null&&Xh(t,i,u,o))}switch(n){case"input":Tl(t),ym(t,r,!1);break;case"textarea":Tl(t),wm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ss(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Oi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Oi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_c)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)U_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(te(166));if(n=Hs(Ta.current),Hs(vr.current),Rl(e)){if(r=e.stateNode,n=e.memoizedProps,r[fr]=e,(i=r.nodeValue!==n)&&(t=Dn,t!==null))switch(t.tag){case 3:kl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fr]=e,e.stateNode=r}return Zt(e),null;case 13:if(et(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&Rn!==null&&e.mode&1&&!(e.flags&128))s_(),Qi(),e.flags|=98560,i=!1;else if(i=Rl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[fr]=e}else Qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),i=!1}else ir!==null&&(yh(ir),ir=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?kt===0&&(kt=3):Mf())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return Xi(),uh(t,e),t===null&&ya(e.stateNode.containerInfo),Zt(e),null;case 10:return vf(e.type._context),Zt(e),null;case 17:return Tn(e.type)&&wc(),Zt(e),null;case 19:if(et(it),i=e.memoizedState,i===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Mo(i,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cc(t),o!==null){for(e.flags|=128,Mo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ge(it,it.current&1|2),e.child}t=t.sibling}i.tail!==null&&_t()>Zi&&(e.flags|=128,r=!0,Mo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Cc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!nt)return Zt(e),null}else 2*_t()-i.renderingStartTime>Zi&&n!==1073741824&&(e.flags|=128,r=!0,Mo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=_t(),e.sibling=null,n=it.current,Ge(it,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return Df(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function zI(t,e){switch(ff(e),e.tag){case 1:return Tn(e.type)&&wc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xi(),et(En),et(sn),Tf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ef(e),null;case 13:if(et(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));Qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(it),null;case 4:return Xi(),null;case 10:return vf(e.type._context),null;case 22:case 23:return Df(),null;case 24:return null;default:return null}}var Ml=!1,tn=!1,$I=typeof WeakSet=="function"?WeakSet:Set,ue=null;function ji(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ft(t,e,r)}else n.current=null}function dh(t,e,n){try{n()}catch(r){ft(t,e,r)}}var cg=!1;function qI(t,e){if(Gd=gc,t=Hy(),df(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,h=0,p=0,m=t,y=null;t:for(;;){for(var E;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(E=m.firstChild)!==null;)y=m,m=E;for(;;){if(m===t)break t;if(y===n&&++h===s&&(c=o),y===i&&++p===r&&(u=o),(E=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=E}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qd={focusedElem:t,selectionRange:n},gc=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var b=N.memoizedProps,$=N.memoizedState,C=e.stateNode,S=C.getSnapshotBeforeUpdate(e.elementType===e.type?b:rr(e.type,b),$);C.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(R){ft(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return N=cg,cg=!1,N}function ta(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&dh(e,n,i)}s=s.next}while(s!==r)}}function ou(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function B_(t){var e=t.alternate;e!==null&&(t.alternate=null,B_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fr],delete e[wa],delete e[Jd],delete e[AI],delete e[CI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function z_(t){return t.tag===5||t.tag===3||t.tag===4}function ug(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||z_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_c));else if(r!==4&&(t=t.child,t!==null))for(fh(t,e,n),t=t.sibling;t!==null;)fh(t,e,n),t=t.sibling}function ph(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ph(t,e,n),t=t.sibling;t!==null;)ph(t,e,n),t=t.sibling}var Ut=null,sr=!1;function Jr(t,e,n){for(n=n.child;n!==null;)$_(t,e,n),n=n.sibling}function $_(t,e,n){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(Jc,n)}catch{}switch(n.tag){case 5:tn||ji(n,e);case 6:var r=Ut,s=sr;Ut=null,Jr(t,e,n),Ut=r,sr=s,Ut!==null&&(sr?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(sr?(t=Ut,n=n.stateNode,t.nodeType===8?od(t.parentNode,n):t.nodeType===1&&od(t,n),ma(t)):od(Ut,n.stateNode));break;case 4:r=Ut,s=sr,Ut=n.stateNode.containerInfo,sr=!0,Jr(t,e,n),Ut=r,sr=s;break;case 0:case 11:case 14:case 15:if(!tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&dh(n,e,o),s=s.next}while(s!==r)}Jr(t,e,n);break;case 1:if(!tn&&(ji(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){ft(n,e,c)}Jr(t,e,n);break;case 21:Jr(t,e,n);break;case 22:n.mode&1?(tn=(r=tn)||n.memoizedState!==null,Jr(t,e,n),tn=r):Jr(t,e,n);break;default:Jr(t,e,n)}}function dg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $I),e.forEach(function(r){var s=ZI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function nr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Ut=c.stateNode,sr=!1;break e;case 3:Ut=c.stateNode.containerInfo,sr=!0;break e;case 4:Ut=c.stateNode.containerInfo,sr=!0;break e}c=c.return}if(Ut===null)throw Error(te(160));$_(i,o,s),Ut=null,sr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){ft(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)q_(e,t),e=e.sibling}function q_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nr(e,t),dr(t),r&4){try{ta(3,t,t.return),ou(3,t)}catch(b){ft(t,t.return,b)}try{ta(5,t,t.return)}catch(b){ft(t,t.return,b)}}break;case 1:nr(e,t),dr(t),r&512&&n!==null&&ji(n,n.return);break;case 5:if(nr(e,t),dr(t),r&512&&n!==null&&ji(n,n.return),t.flags&32){var s=t.stateNode;try{da(s,"")}catch(b){ft(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&hy(s,i),Ld(c,o);var h=Ld(c,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?vy(s,m):p==="dangerouslySetInnerHTML"?my(s,m):p==="children"?da(s,m):Xh(s,p,m,h)}switch(c){case"input":Dd(s,i);break;case"textarea":fy(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?Oi(s,!!i.multiple,E,!1):y!==!!i.multiple&&(i.defaultValue!=null?Oi(s,!!i.multiple,i.defaultValue,!0):Oi(s,!!i.multiple,i.multiple?[]:"",!1))}s[wa]=i}catch(b){ft(t,t.return,b)}}break;case 6:if(nr(e,t),dr(t),r&4){if(t.stateNode===null)throw Error(te(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){ft(t,t.return,b)}}break;case 3:if(nr(e,t),dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ma(e.containerInfo)}catch(b){ft(t,t.return,b)}break;case 4:nr(e,t),dr(t);break;case 13:nr(e,t),dr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Rf=_t())),r&4&&dg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(h=tn)||p,nr(e,t),tn=h):nr(e,t),dr(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(ue=t,p=t.child;p!==null;){for(m=ue=p;ue!==null;){switch(y=ue,E=y.child,y.tag){case 0:case 11:case 14:case 15:ta(4,y,y.return);break;case 1:ji(y,y.return);var N=y.stateNode;if(typeof N.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(b){ft(r,n,b)}}break;case 5:ji(y,y.return);break;case 22:if(y.memoizedState!==null){fg(m);continue}}E!==null?(E.return=y,ue=E):fg(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=gy("display",o))}catch(b){ft(t,t.return,b)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(b){ft(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:nr(e,t),dr(t),r&4&&dg(t);break;case 21:break;default:nr(e,t),dr(t)}}function dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(z_(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(da(s,""),r.flags&=-33);var i=ug(t);ph(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=ug(t);fh(t,c,o);break;default:throw Error(te(161))}}catch(u){ft(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HI(t,e,n){ue=t,H_(t)}function H_(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var s=ue,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ml;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||tn;c=Ml;var h=tn;if(Ml=o,(tn=u)&&!h)for(ue=s;ue!==null;)o=ue,u=o.child,o.tag===22&&o.memoizedState!==null?pg(s):u!==null?(u.return=o,ue=u):pg(s);for(;i!==null;)ue=i,H_(i),i=i.sibling;ue=s,Ml=c,tn=h}hg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ue=i):hg(t)}}function hg(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||ou(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ym(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ym(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&ma(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}tn||e.flags&512&&hh(e)}catch(y){ft(e,e.return,y)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function fg(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function pg(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ou(4,e)}catch(u){ft(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){ft(e,s,u)}}var i=e.return;try{hh(e)}catch(u){ft(e,i,u)}break;case 5:var o=e.return;try{hh(e)}catch(u){ft(e,o,u)}}}catch(u){ft(e,e.return,u)}if(e===t){ue=null;break}var c=e.sibling;if(c!==null){c.return=e.return,ue=c;break}ue=e.return}}var WI=Math.ceil,kc=Wr.ReactCurrentDispatcher,Nf=Wr.ReactCurrentOwner,qn=Wr.ReactCurrentBatchConfig,je=0,bt=null,Tt=null,$t=0,kn=0,Di=Rs(0),kt=0,Aa=null,Zs=0,au=0,kf=0,na=null,yn=null,Rf=0,Zi=1/0,Cr=null,Rc=!1,mh=null,ys=null,Ol=!1,cs=null,jc=0,ra=0,gh=null,Zl=-1,ec=0;function hn(){return je&6?_t():Zl!==-1?Zl:Zl=_t()}function _s(t){return t.mode&1?je&2&&$t!==0?$t&-$t:NI.transition!==null?(ec===0&&(ec=Ny()),ec):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:by(t.type)),t):1}function ar(t,e,n,r){if(50<ra)throw ra=0,gh=null,Error(te(185));Ba(t,n,r),(!(je&2)||t!==bt)&&(t===bt&&(!(je&2)&&(au|=n),kt===4&&rs(t,$t)),In(t,r),n===1&&je===0&&!(e.mode&1)&&(Zi=_t()+500,ru&&js()))}function In(t,e){var n=t.callbackNode;NT(t,e);var r=mc(t,t===bt?$t:0);if(r===0)n!==null&&Im(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Im(n),e===1)t.tag===0?PI(mg.bind(null,t)):t_(mg.bind(null,t)),SI(function(){!(je&6)&&js()}),n=null;else{switch(ky(r)){case 1:n=nf;break;case 4:n=Cy;break;case 16:n=pc;break;case 536870912:n=Py;break;default:n=pc}n=Z_(n,W_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function W_(t,e){if(Zl=-1,ec=0,je&6)throw Error(te(327));var n=t.callbackNode;if(Ui()&&t.callbackNode!==n)return null;var r=mc(t,t===bt?$t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Dc(t,r);else{e=r;var s=je;je|=2;var i=G_();(bt!==t||$t!==e)&&(Cr=null,Zi=_t()+500,Ks(t,e));do try{QI();break}catch(c){K_(t,c)}while(!0);gf(),kc.current=i,je=s,Tt!==null?e=0:(bt=null,$t=0,e=kt)}if(e!==0){if(e===2&&(s=$d(t),s!==0&&(r=s,e=vh(t,s))),e===1)throw n=Aa,Ks(t,0),rs(t,r),In(t,_t()),n;if(e===6)rs(t,r);else{if(s=t.current.alternate,!(r&30)&&!KI(s)&&(e=Dc(t,r),e===2&&(i=$d(t),i!==0&&(r=i,e=vh(t,i))),e===1))throw n=Aa,Ks(t,0),rs(t,r),In(t,_t()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(te(345));case 2:Us(t,yn,Cr);break;case 3:if(rs(t,r),(r&130023424)===r&&(e=Rf+500-_t(),10<e)){if(mc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){hn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xd(Us.bind(null,t,yn,Cr),e);break}Us(t,yn,Cr);break;case 4:if(rs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-or(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=_t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WI(r/1960))-r,10<r){t.timeoutHandle=Xd(Us.bind(null,t,yn,Cr),r);break}Us(t,yn,Cr);break;case 5:Us(t,yn,Cr);break;default:throw Error(te(329))}}}return In(t,_t()),t.callbackNode===n?W_.bind(null,t):null}function vh(t,e){var n=na;return t.current.memoizedState.isDehydrated&&(Ks(t,e).flags|=256),t=Dc(t,e),t!==2&&(e=yn,yn=n,e!==null&&yh(e)),t}function yh(t){yn===null?yn=t:yn.push.apply(yn,t)}function KI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!lr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rs(t,e){for(e&=~kf,e&=~au,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-or(e),r=1<<n;t[n]=-1,e&=~r}}function mg(t){if(je&6)throw Error(te(327));Ui();var e=mc(t,0);if(!(e&1))return In(t,_t()),null;var n=Dc(t,e);if(t.tag!==0&&n===2){var r=$d(t);r!==0&&(e=r,n=vh(t,r))}if(n===1)throw n=Aa,Ks(t,0),rs(t,e),In(t,_t()),n;if(n===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Us(t,yn,Cr),In(t,_t()),null}function jf(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(Zi=_t()+500,ru&&js())}}function ei(t){cs!==null&&cs.tag===0&&!(je&6)&&Ui();var e=je;je|=1;var n=qn.transition,r=Fe;try{if(qn.transition=null,Fe=1,t)return t()}finally{Fe=r,qn.transition=n,je=e,!(je&6)&&js()}}function Df(){kn=Di.current,et(Di)}function Ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,II(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(ff(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wc();break;case 3:Xi(),et(En),et(sn),Tf();break;case 5:Ef(r);break;case 4:Xi();break;case 13:et(it);break;case 19:et(it);break;case 10:vf(r.type._context);break;case 22:case 23:Df()}n=n.return}if(bt=t,Tt=t=ws(t.current,null),$t=kn=e,kt=0,Aa=null,kf=au=Zs=0,yn=na=null,qs!==null){for(e=0;e<qs.length;e++)if(n=qs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}qs=null}return t}function K_(t,e){do{var n=Tt;try{if(gf(),Yl.current=Nc,Pc){for(var r=ot.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pc=!1}if(Js=0,Ot=Nt=ot=null,ea=!1,Ia=0,Nf.current=null,n===null||n.return===null){kt=1,Aa=e,Tt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=$t,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=c,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var E=ng(o);if(E!==null){E.flags&=-257,rg(E,o,c,i,e),E.mode&1&&tg(i,h,e),e=E,u=h;var N=e.updateQueue;if(N===null){var b=new Set;b.add(u),e.updateQueue=b}else N.add(u);break e}else{if(!(e&1)){tg(i,h,e),Mf();break e}u=Error(te(426))}}else if(nt&&c.mode&1){var $=ng(o);if($!==null){!($.flags&65536)&&($.flags|=256),rg($,o,c,i,e),pf(Ji(u,c));break e}}i=u=Ji(u,c),kt!==4&&(kt=2),na===null?na=[i]:na.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var C=k_(i,u,e);Qm(i,C);break e;case 1:c=u;var S=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ys===null||!ys.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=R_(i,c,e);Qm(i,R);break e}}i=i.return}while(i!==null)}Y_(n)}catch(j){e=j,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function G_(){var t=kc.current;return kc.current=Nc,t===null?Nc:t}function Mf(){(kt===0||kt===3||kt===2)&&(kt=4),bt===null||!(Zs&268435455)&&!(au&268435455)||rs(bt,$t)}function Dc(t,e){var n=je;je|=2;var r=G_();(bt!==t||$t!==e)&&(Cr=null,Ks(t,e));do try{GI();break}catch(s){K_(t,s)}while(!0);if(gf(),je=n,kc.current=r,Tt!==null)throw Error(te(261));return bt=null,$t=0,kt}function GI(){for(;Tt!==null;)Q_(Tt)}function QI(){for(;Tt!==null&&!wT();)Q_(Tt)}function Q_(t){var e=J_(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?Y_(t):Tt=e,Nf.current=null}function Y_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zI(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,Tt=null;return}}else if(n=BI(n,e,kn),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);kt===0&&(kt=5)}function Us(t,e,n){var r=Fe,s=qn.transition;try{qn.transition=null,Fe=1,YI(t,e,n,r)}finally{qn.transition=s,Fe=r}return null}function YI(t,e,n,r){do Ui();while(cs!==null);if(je&6)throw Error(te(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(kT(t,i),t===bt&&(Tt=bt=null,$t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,Z_(pc,function(){return Ui(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qn.transition,qn.transition=null;var o=Fe;Fe=1;var c=je;je|=4,Nf.current=null,qI(t,n),q_(n,t),gI(Qd),gc=!!Gd,Qd=Gd=null,t.current=n,HI(n),ET(),je=c,Fe=o,qn.transition=i}else t.current=n;if(Ol&&(Ol=!1,cs=t,jc=s),i=t.pendingLanes,i===0&&(ys=null),ST(n.stateNode),In(t,_t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Rc)throw Rc=!1,t=mh,mh=null,t;return jc&1&&t.tag!==0&&Ui(),i=t.pendingLanes,i&1?t===gh?ra++:(ra=0,gh=t):ra=0,js(),null}function Ui(){if(cs!==null){var t=ky(jc),e=qn.transition,n=Fe;try{if(qn.transition=null,Fe=16>t?16:t,cs===null)var r=!1;else{if(t=cs,cs=null,jc=0,je&6)throw Error(te(331));var s=je;for(je|=4,ue=t.current;ue!==null;){var i=ue,o=i.child;if(ue.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(ue=h;ue!==null;){var p=ue;switch(p.tag){case 0:case 11:case 15:ta(8,p,i)}var m=p.child;if(m!==null)m.return=p,ue=m;else for(;ue!==null;){p=ue;var y=p.sibling,E=p.return;if(B_(p),p===h){ue=null;break}if(y!==null){y.return=E,ue=y;break}ue=E}}}var N=i.alternate;if(N!==null){var b=N.child;if(b!==null){N.child=null;do{var $=b.sibling;b.sibling=null,b=$}while(b!==null)}}ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ue=o;else e:for(;ue!==null;){if(i=ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ta(9,i,i.return)}var C=i.sibling;if(C!==null){C.return=i.return,ue=C;break e}ue=i.return}}var S=t.current;for(ue=S;ue!==null;){o=ue;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ue=x;else e:for(o=S;ue!==null;){if(c=ue,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ou(9,c)}}catch(j){ft(c,c.return,j)}if(c===o){ue=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,ue=R;break e}ue=c.return}}if(je=s,js(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(Jc,t)}catch{}r=!0}return r}finally{Fe=n,qn.transition=e}}return!1}function gg(t,e,n){e=Ji(n,e),e=k_(t,e,1),t=vs(t,e,1),e=hn(),t!==null&&(Ba(t,1,e),In(t,e))}function ft(t,e,n){if(t.tag===3)gg(t,t,n);else for(;e!==null;){if(e.tag===3){gg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ys===null||!ys.has(r))){t=Ji(n,t),t=R_(e,t,1),e=vs(e,t,1),t=hn(),e!==null&&(Ba(e,1,t),In(e,t));break}}e=e.return}}function XI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&($t&n)===n&&(kt===4||kt===3&&($t&130023424)===$t&&500>_t()-Rf?Ks(t,0):kf|=n),In(t,e)}function X_(t,e){e===0&&(t.mode&1?(e=xl,xl<<=1,!(xl&130023424)&&(xl=4194304)):e=1);var n=hn();t=Fr(t,e),t!==null&&(Ba(t,e,n),In(t,n))}function JI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),X_(t,n)}function ZI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(e),X_(t,n)}var J_;J_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,UI(t,e,n);wn=!!(t.flags&131072)}else wn=!1,nt&&e.flags&1048576&&n_(e,Ic,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jl(t,e),t=e.pendingProps;var s=Gi(e,sn.current);Fi(e,n),s=Sf(null,e,r,t,s,n);var i=xf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tn(r)?(i=!0,Ec(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_f(e),s.updater=iu,e.stateNode=s,s._reactInternals=e,sh(e,r,t,n),e=ah(null,e,r,!0,i,n)):(e.tag=0,nt&&i&&hf(e),dn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=tS(r),t=rr(r,t),s){case 0:e=oh(null,e,r,t,n);break e;case 1:e=og(null,e,r,t,n);break e;case 11:e=sg(null,e,r,t,n);break e;case 14:e=ig(null,e,r,rr(r.type,t),n);break e}throw Error(te(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),oh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),og(t,e,r,s,n);case 3:e:{if(O_(e),t===null)throw Error(te(387));r=e.pendingProps,i=e.memoizedState,s=i.element,l_(t,e),Ac(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ji(Error(te(423)),e),e=ag(t,e,r,n,s);break e}else if(r!==s){s=Ji(Error(te(424)),e),e=ag(t,e,r,n,s);break e}else for(Rn=gs(e.stateNode.containerInfo.firstChild),Dn=e,nt=!0,ir=null,n=o_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qi(),r===s){e=Ur(t,e,n);break e}dn(t,e,r,n)}e=e.child}return e;case 5:return c_(e),t===null&&th(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Yd(r,s)?o=null:i!==null&&Yd(r,i)&&(e.flags|=32),M_(t,e),dn(t,e,o,n),e.child;case 6:return t===null&&th(e),null;case 13:return b_(t,e,n);case 4:return wf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yi(e,null,r,n):dn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),sg(t,e,r,s,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ge(Sc,r._currentValue),r._currentValue=o,i!==null)if(lr(i.value,o)){if(i.children===s.children&&!En.current){e=Ur(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Mr(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),nh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(te(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),nh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Fi(e,n),s=Wn(s),r=r(s),e.flags|=1,dn(t,e,r,n),e.child;case 14:return r=e.type,s=rr(r,e.pendingProps),s=rr(r.type,s),ig(t,e,r,s,n);case 15:return j_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),Jl(t,e),e.tag=1,Tn(r)?(t=!0,Ec(e)):t=!1,Fi(e,n),N_(e,r,s),sh(e,r,s,n),ah(null,e,r,!0,t,n);case 19:return V_(t,e,n);case 22:return D_(t,e,n)}throw Error(te(156,e.tag))};function Z_(t,e){return Ay(t,e)}function eS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,e,n,r){return new eS(t,e,n,r)}function Of(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tS(t){if(typeof t=="function")return Of(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zh)return 11;if(t===ef)return 14}return 2}function ws(t,e){var n=t.alternate;return n===null?(n=$n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Of(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ii:return Gs(n.children,s,i,e);case Jh:o=8,s|=8;break;case Pd:return t=$n(12,n,e,s|2),t.elementType=Pd,t.lanes=i,t;case Nd:return t=$n(13,n,e,s),t.elementType=Nd,t.lanes=i,t;case kd:return t=$n(19,n,e,s),t.elementType=kd,t.lanes=i,t;case cy:return lu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ay:o=10;break e;case ly:o=9;break e;case Zh:o=11;break e;case ef:o=14;break e;case es:o=16,r=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=$n(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Gs(t,e,n,r){return t=$n(7,t,r,e),t.lanes=n,t}function lu(t,e,n,r){return t=$n(22,t,r,e),t.elementType=cy,t.lanes=n,t.stateNode={isHidden:!1},t}function pd(t,e,n){return t=$n(6,t,null,e),t.lanes=n,t}function md(t,e,n){return e=$n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qu(0),this.expirationTimes=Qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bf(t,e,n,r,s,i,o,c,u){return t=new nS(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=$n(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_f(i),t}function rS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function e0(t){if(!t)return xs;t=t._reactInternals;e:{if(li(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var n=t.type;if(Tn(n))return e_(t,n,e)}return e}function t0(t,e,n,r,s,i,o,c,u){return t=bf(n,r,!0,t,s,i,o,c,u),t.context=e0(null),n=t.current,r=hn(),s=_s(n),i=Mr(r,s),i.callback=e??null,vs(n,i,s),t.current.lanes=s,Ba(t,s,r),In(t,r),t}function cu(t,e,n,r){var s=e.current,i=hn(),o=_s(s);return n=e0(n),e.context===null?e.context=n:e.pendingContext=n,e=Mr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vs(s,e,o),t!==null&&(ar(t,s,o,i),Ql(t,s,o)),o}function Mc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vf(t,e){vg(t,e),(t=t.alternate)&&vg(t,e)}function sS(){return null}var n0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lf(t){this._internalRoot=t}uu.prototype.render=Lf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));cu(t,e,null,null)};uu.prototype.unmount=Lf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ei(function(){cu(null,t,null,null)}),e[Lr]=null}};function uu(t){this._internalRoot=t}uu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Dy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ns.length&&e!==0&&e<ns[n].priority;n++);ns.splice(n,0,t),n===0&&Oy(t)}};function Ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function du(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yg(){}function iS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Mc(o);i.call(h)}}var o=t0(e,r,t,0,null,!1,!1,"",yg);return t._reactRootContainer=o,t[Lr]=o.current,ya(t.nodeType===8?t.parentNode:t),ei(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var h=Mc(u);c.call(h)}}var u=bf(t,0,!1,null,null,!1,!1,"",yg);return t._reactRootContainer=u,t[Lr]=u.current,ya(t.nodeType===8?t.parentNode:t),ei(function(){cu(e,u,n,r)}),u}function hu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Mc(o);c.call(u)}}cu(e,o,t,s)}else o=iS(n,e,t,s,r);return Mc(o)}Ry=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bo(e.pendingLanes);n!==0&&(rf(e,n|1),In(e,_t()),!(je&6)&&(Zi=_t()+500,js()))}break;case 13:ei(function(){var r=Fr(t,1);if(r!==null){var s=hn();ar(r,t,1,s)}}),Vf(t,1)}};sf=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=hn();ar(e,t,134217728,n)}Vf(t,134217728)}};jy=function(t){if(t.tag===13){var e=_s(t),n=Fr(t,e);if(n!==null){var r=hn();ar(n,t,e,r)}Vf(t,e)}};Dy=function(){return Fe};My=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};Ud=function(t,e,n){switch(e){case"input":if(Dd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=nu(r);if(!s)throw Error(te(90));dy(r),Dd(r,s)}}}break;case"textarea":fy(t,n);break;case"select":e=n.value,e!=null&&Oi(t,!!n.multiple,e,!1)}};wy=jf;Ey=ei;var oS={usingClientEntryPoint:!1,Events:[$a,Ci,nu,yy,_y,jf]},Oo={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aS={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sy(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||sS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{Jc=bl.inject(aS),gr=bl}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oS;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ff(e))throw Error(te(200));return rS(t,e,null,n)};bn.createRoot=function(t,e){if(!Ff(t))throw Error(te(299));var n=!1,r="",s=n0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bf(t,1,!1,null,null,n,!1,r,s),t[Lr]=e.current,ya(t.nodeType===8?t.parentNode:t),new Lf(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=Sy(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return ei(t)};bn.hydrate=function(t,e,n){if(!du(e))throw Error(te(200));return hu(null,t,e,!0,n)};bn.hydrateRoot=function(t,e,n){if(!Ff(t))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=n0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=t0(e,null,t,1,n??null,s,!1,i,o),t[Lr]=e.current,ya(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new uu(e)};bn.render=function(t,e,n){if(!du(e))throw Error(te(200));return hu(null,t,e,!1,n)};bn.unmountComponentAtNode=function(t){if(!du(t))throw Error(te(40));return t._reactRootContainer?(ei(function(){hu(null,null,t,!1,function(){t._reactRootContainer=null,t[Lr]=null})}),!0):!1};bn.unstable_batchedUpdates=jf;bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!du(n))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return hu(t,e,n,!1,r)};bn.version="18.3.1-next-f1338f8080-20240426";function r0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r0)}catch(t){console.error(t)}}r0(),ry.exports=bn;var lS=ry.exports,s0,_g=lS;s0=_g.createRoot,_g.hydrateRoot;var wg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},cS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},o0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let y=(c&15)<<2|h>>6,E=h&63;u||(E=64,o||(y=64)),r.push(n[p],n[m],n[y],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||m==null)throw new uS;const y=i<<2|c>>4;if(r.push(y),h!==64){const E=c<<4&240|h>>2;if(r.push(E),m!==64){const N=h<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dS=function(t){const e=i0(t);return o0.encodeByteArray(e,!0)},a0=function(t){return dS(t).replace(/\./g,"")},l0=function(t){try{return o0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=()=>hS().__FIREBASE_DEFAULTS__,pS=()=>{if(typeof process>"u"||typeof wg>"u")return;const t=wg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&l0(t[1]);return e&&JSON.parse(e)},fu=()=>{try{return fS()||pS()||mS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},c0=t=>{var e,n;return(n=(e=fu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gS=t=>{const e=c0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},u0=()=>{var t;return(t=fu())===null||t===void 0?void 0:t.config},d0=t=>{var e;return(e=fu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function _S(){var t;const e=(t=fu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ES(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IS(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SS(){return!_S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xS(){try{return typeof indexedDB=="object"}catch{return!1}}function AS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="FirebaseError";class Sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=CS,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ha.prototype.create)}}class Ha{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?PS(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Sr(s,c,r)}}function PS(t,e){return t.replace(NS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const NS=/\{\$([^}]+)}/g;function kS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ca(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Eg(i)&&Eg(o)){if(!Ca(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Eg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $o(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function qo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function RS(t,e){const n=new jS(t,e);return n.subscribe.bind(n)}class jS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");DS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=gd),s.error===void 0&&(s.error=gd),s.complete===void 0&&(s.complete=gd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class As{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bS(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OS(t){return t===Bs?void 0:t}function bS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const LS={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},FS=Pe.INFO,US={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},BS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=US[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uf{constructor(e){this.name=e,this._logLevel=FS,this._logHandler=BS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const zS=(t,e)=>e.some(n=>t instanceof n);let Tg,Ig;function $S(){return Tg||(Tg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qS(){return Ig||(Ig=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h0=new WeakMap,_h=new WeakMap,f0=new WeakMap,vd=new WeakMap,Bf=new WeakMap;function HS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Es(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&h0.set(n,t)}).catch(()=>{}),Bf.set(e,t),e}function WS(t){if(_h.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});_h.set(t,e)}let wh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _h.get(t);if(e==="objectStoreNames")return t.objectStoreNames||f0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KS(t){wh=t(wh)}function GS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yd(this),e,...n);return f0.set(r,e.sort?e.sort():[e]),Es(r)}:qS().includes(t)?function(...e){return t.apply(yd(this),e),Es(h0.get(this))}:function(...e){return Es(t.apply(yd(this),e))}}function QS(t){return typeof t=="function"?GS(t):(t instanceof IDBTransaction&&WS(t),zS(t,$S())?new Proxy(t,wh):t)}function Es(t){if(t instanceof IDBRequest)return HS(t);if(vd.has(t))return vd.get(t);const e=QS(t);return e!==t&&(vd.set(t,e),Bf.set(e,t)),e}const yd=t=>Bf.get(t);function YS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Es(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Es(o.result),u.oldVersion,u.newVersion,Es(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const XS=["get","getKey","getAll","getAllKeys","count"],JS=["put","add","delete","clear"],_d=new Map;function Sg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_d.get(e))return _d.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=JS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||XS.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return _d.set(e,i),i}KS(t=>({...t,get:(e,n,r)=>Sg(e,n)||t.get(e,n,r),has:(e,n)=>!!Sg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ex(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ex(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Eh="@firebase/app",xg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new Uf("@firebase/app"),tx="@firebase/app-compat",nx="@firebase/analytics-compat",rx="@firebase/analytics",sx="@firebase/app-check-compat",ix="@firebase/app-check",ox="@firebase/auth",ax="@firebase/auth-compat",lx="@firebase/database",cx="@firebase/data-connect",ux="@firebase/database-compat",dx="@firebase/functions",hx="@firebase/functions-compat",fx="@firebase/installations",px="@firebase/installations-compat",mx="@firebase/messaging",gx="@firebase/messaging-compat",vx="@firebase/performance",yx="@firebase/performance-compat",_x="@firebase/remote-config",wx="@firebase/remote-config-compat",Ex="@firebase/storage",Tx="@firebase/storage-compat",Ix="@firebase/firestore",Sx="@firebase/vertexai-preview",xx="@firebase/firestore-compat",Ax="firebase",Cx="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="[DEFAULT]",Px={[Eh]:"fire-core",[tx]:"fire-core-compat",[rx]:"fire-analytics",[nx]:"fire-analytics-compat",[ix]:"fire-app-check",[sx]:"fire-app-check-compat",[ox]:"fire-auth",[ax]:"fire-auth-compat",[lx]:"fire-rtdb",[cx]:"fire-data-connect",[ux]:"fire-rtdb-compat",[dx]:"fire-fn",[hx]:"fire-fn-compat",[fx]:"fire-iid",[px]:"fire-iid-compat",[mx]:"fire-fcm",[gx]:"fire-fcm-compat",[vx]:"fire-perf",[yx]:"fire-perf-compat",[_x]:"fire-rc",[wx]:"fire-rc-compat",[Ex]:"fire-gcs",[Tx]:"fire-gcs-compat",[Ix]:"fire-fst",[xx]:"fire-fst-compat",[Sx]:"fire-vertex","fire-js":"fire-js",[Ax]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Map,Nx=new Map,Ih=new Map;function Ag(t,e){try{t.container.addComponent(e)}catch(n){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ti(t){const e=t.name;if(Ih.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;Ih.set(e,t);for(const n of Oc.values())Ag(n,t);for(const n of Nx.values())Ag(n,t);return!0}function pu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new Ha("app","Firebase",kx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=Cx;function p0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Th,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ts.create("bad-app-name",{appName:String(s)});if(n||(n=u0()),!n)throw Ts.create("no-options");const i=Oc.get(s);if(i){if(Ca(n,i.options)&&Ca(r,i.config))return i;throw Ts.create("duplicate-app",{appName:s})}const o=new VS(s);for(const u of Ih.values())o.addComponent(u);const c=new Rx(n,r,o);return Oc.set(s,c),c}function m0(t=Th){const e=Oc.get(t);if(!e&&t===Th&&u0())return p0();if(!e)throw Ts.create("no-app",{appName:t});return e}function yr(t,e,n){var r;let s=(r=Px[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(c.join(" "));return}ti(new As(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="firebase-heartbeat-database",Dx=1,Pa="firebase-heartbeat-store";let wd=null;function g0(){return wd||(wd=YS(jx,Dx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ts.create("idb-open",{originalErrorMessage:t.message})})),wd}async function Mx(t){try{const n=(await g0()).transaction(Pa),r=await n.objectStore(Pa).get(v0(t));return await n.done,r}catch(e){if(e instanceof Sr)Br.warn(e.message);else{const n=Ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(n.message)}}}async function Cg(t,e){try{const r=(await g0()).transaction(Pa,"readwrite");await r.objectStore(Pa).put(e,v0(t)),await r.done}catch(n){if(n instanceof Sr)Br.warn(n.message);else{const r=Ts.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Br.warn(r.message)}}}function v0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=1024,bx=30*24*60*60*1e3;class Vx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Fx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Pg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=bx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Br.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Pg(),{heartbeatsToSend:r,unsentEntries:s}=Lx(this._heartbeatsCache.heartbeats),i=a0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Br.warn(n),""}}}function Pg(){return new Date().toISOString().substring(0,10)}function Lx(t,e=Ox){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ng(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ng(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Fx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xS()?AS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Mx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Cg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Cg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ng(t){return a0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){ti(new As("platform-logger",e=>new ZS(e),"PRIVATE")),ti(new As("heartbeat",e=>new Vx(e),"PRIVATE")),yr(Eh,xg,t),yr(Eh,xg,"esm2017"),yr("fire-js","")}Ux("");var Bx="firebase",zx="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(Bx,zx,"app");var kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qs,y0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,v){function I(){}I.prototype=v.prototype,g.D=v.prototype,g.prototype=new I,g.prototype.constructor=g,g.C=function(w,P,k){for(var A=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)A[Ne-2]=arguments[Ne];return v.prototype[P].apply(w,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(g,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var P=0;16>P;++P)w[P]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(P=0;16>P;++P)w[P]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=g.g[0],I=g.g[1],P=g.g[2];var k=g.g[3],A=v+(k^I&(P^k))+w[0]+3614090360&4294967295;v=I+(A<<7&4294967295|A>>>25),A=k+(P^v&(I^P))+w[1]+3905402710&4294967295,k=v+(A<<12&4294967295|A>>>20),A=P+(I^k&(v^I))+w[2]+606105819&4294967295,P=k+(A<<17&4294967295|A>>>15),A=I+(v^P&(k^v))+w[3]+3250441966&4294967295,I=P+(A<<22&4294967295|A>>>10),A=v+(k^I&(P^k))+w[4]+4118548399&4294967295,v=I+(A<<7&4294967295|A>>>25),A=k+(P^v&(I^P))+w[5]+1200080426&4294967295,k=v+(A<<12&4294967295|A>>>20),A=P+(I^k&(v^I))+w[6]+2821735955&4294967295,P=k+(A<<17&4294967295|A>>>15),A=I+(v^P&(k^v))+w[7]+4249261313&4294967295,I=P+(A<<22&4294967295|A>>>10),A=v+(k^I&(P^k))+w[8]+1770035416&4294967295,v=I+(A<<7&4294967295|A>>>25),A=k+(P^v&(I^P))+w[9]+2336552879&4294967295,k=v+(A<<12&4294967295|A>>>20),A=P+(I^k&(v^I))+w[10]+4294925233&4294967295,P=k+(A<<17&4294967295|A>>>15),A=I+(v^P&(k^v))+w[11]+2304563134&4294967295,I=P+(A<<22&4294967295|A>>>10),A=v+(k^I&(P^k))+w[12]+1804603682&4294967295,v=I+(A<<7&4294967295|A>>>25),A=k+(P^v&(I^P))+w[13]+4254626195&4294967295,k=v+(A<<12&4294967295|A>>>20),A=P+(I^k&(v^I))+w[14]+2792965006&4294967295,P=k+(A<<17&4294967295|A>>>15),A=I+(v^P&(k^v))+w[15]+1236535329&4294967295,I=P+(A<<22&4294967295|A>>>10),A=v+(P^k&(I^P))+w[1]+4129170786&4294967295,v=I+(A<<5&4294967295|A>>>27),A=k+(I^P&(v^I))+w[6]+3225465664&4294967295,k=v+(A<<9&4294967295|A>>>23),A=P+(v^I&(k^v))+w[11]+643717713&4294967295,P=k+(A<<14&4294967295|A>>>18),A=I+(k^v&(P^k))+w[0]+3921069994&4294967295,I=P+(A<<20&4294967295|A>>>12),A=v+(P^k&(I^P))+w[5]+3593408605&4294967295,v=I+(A<<5&4294967295|A>>>27),A=k+(I^P&(v^I))+w[10]+38016083&4294967295,k=v+(A<<9&4294967295|A>>>23),A=P+(v^I&(k^v))+w[15]+3634488961&4294967295,P=k+(A<<14&4294967295|A>>>18),A=I+(k^v&(P^k))+w[4]+3889429448&4294967295,I=P+(A<<20&4294967295|A>>>12),A=v+(P^k&(I^P))+w[9]+568446438&4294967295,v=I+(A<<5&4294967295|A>>>27),A=k+(I^P&(v^I))+w[14]+3275163606&4294967295,k=v+(A<<9&4294967295|A>>>23),A=P+(v^I&(k^v))+w[3]+4107603335&4294967295,P=k+(A<<14&4294967295|A>>>18),A=I+(k^v&(P^k))+w[8]+1163531501&4294967295,I=P+(A<<20&4294967295|A>>>12),A=v+(P^k&(I^P))+w[13]+2850285829&4294967295,v=I+(A<<5&4294967295|A>>>27),A=k+(I^P&(v^I))+w[2]+4243563512&4294967295,k=v+(A<<9&4294967295|A>>>23),A=P+(v^I&(k^v))+w[7]+1735328473&4294967295,P=k+(A<<14&4294967295|A>>>18),A=I+(k^v&(P^k))+w[12]+2368359562&4294967295,I=P+(A<<20&4294967295|A>>>12),A=v+(I^P^k)+w[5]+4294588738&4294967295,v=I+(A<<4&4294967295|A>>>28),A=k+(v^I^P)+w[8]+2272392833&4294967295,k=v+(A<<11&4294967295|A>>>21),A=P+(k^v^I)+w[11]+1839030562&4294967295,P=k+(A<<16&4294967295|A>>>16),A=I+(P^k^v)+w[14]+4259657740&4294967295,I=P+(A<<23&4294967295|A>>>9),A=v+(I^P^k)+w[1]+2763975236&4294967295,v=I+(A<<4&4294967295|A>>>28),A=k+(v^I^P)+w[4]+1272893353&4294967295,k=v+(A<<11&4294967295|A>>>21),A=P+(k^v^I)+w[7]+4139469664&4294967295,P=k+(A<<16&4294967295|A>>>16),A=I+(P^k^v)+w[10]+3200236656&4294967295,I=P+(A<<23&4294967295|A>>>9),A=v+(I^P^k)+w[13]+681279174&4294967295,v=I+(A<<4&4294967295|A>>>28),A=k+(v^I^P)+w[0]+3936430074&4294967295,k=v+(A<<11&4294967295|A>>>21),A=P+(k^v^I)+w[3]+3572445317&4294967295,P=k+(A<<16&4294967295|A>>>16),A=I+(P^k^v)+w[6]+76029189&4294967295,I=P+(A<<23&4294967295|A>>>9),A=v+(I^P^k)+w[9]+3654602809&4294967295,v=I+(A<<4&4294967295|A>>>28),A=k+(v^I^P)+w[12]+3873151461&4294967295,k=v+(A<<11&4294967295|A>>>21),A=P+(k^v^I)+w[15]+530742520&4294967295,P=k+(A<<16&4294967295|A>>>16),A=I+(P^k^v)+w[2]+3299628645&4294967295,I=P+(A<<23&4294967295|A>>>9),A=v+(P^(I|~k))+w[0]+4096336452&4294967295,v=I+(A<<6&4294967295|A>>>26),A=k+(I^(v|~P))+w[7]+1126891415&4294967295,k=v+(A<<10&4294967295|A>>>22),A=P+(v^(k|~I))+w[14]+2878612391&4294967295,P=k+(A<<15&4294967295|A>>>17),A=I+(k^(P|~v))+w[5]+4237533241&4294967295,I=P+(A<<21&4294967295|A>>>11),A=v+(P^(I|~k))+w[12]+1700485571&4294967295,v=I+(A<<6&4294967295|A>>>26),A=k+(I^(v|~P))+w[3]+2399980690&4294967295,k=v+(A<<10&4294967295|A>>>22),A=P+(v^(k|~I))+w[10]+4293915773&4294967295,P=k+(A<<15&4294967295|A>>>17),A=I+(k^(P|~v))+w[1]+2240044497&4294967295,I=P+(A<<21&4294967295|A>>>11),A=v+(P^(I|~k))+w[8]+1873313359&4294967295,v=I+(A<<6&4294967295|A>>>26),A=k+(I^(v|~P))+w[15]+4264355552&4294967295,k=v+(A<<10&4294967295|A>>>22),A=P+(v^(k|~I))+w[6]+2734768916&4294967295,P=k+(A<<15&4294967295|A>>>17),A=I+(k^(P|~v))+w[13]+1309151649&4294967295,I=P+(A<<21&4294967295|A>>>11),A=v+(P^(I|~k))+w[4]+4149444226&4294967295,v=I+(A<<6&4294967295|A>>>26),A=k+(I^(v|~P))+w[11]+3174756917&4294967295,k=v+(A<<10&4294967295|A>>>22),A=P+(v^(k|~I))+w[2]+718787259&4294967295,P=k+(A<<15&4294967295|A>>>17),A=I+(k^(P|~v))+w[9]+3951481745&4294967295,g.g[0]=g.g[0]+v&4294967295,g.g[1]=g.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,g.g[2]=g.g[2]+P&4294967295,g.g[3]=g.g[3]+k&4294967295}r.prototype.u=function(g,v){v===void 0&&(v=g.length);for(var I=v-this.blockSize,w=this.B,P=this.h,k=0;k<v;){if(P==0)for(;k<=I;)s(this,g,k),k+=this.blockSize;if(typeof g=="string"){for(;k<v;)if(w[P++]=g.charCodeAt(k++),P==this.blockSize){s(this,w),P=0;break}}else for(;k<v;)if(w[P++]=g[k++],P==this.blockSize){s(this,w),P=0;break}}this.h=P,this.o+=v},r.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var v=1;v<g.length-8;++v)g[v]=0;var I=8*this.o;for(v=g.length-8;v<g.length;++v)g[v]=I&255,I/=256;for(this.u(g),g=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)g[I++]=this.g[v]>>>w&255;return g};function i(g,v){var I=c;return Object.prototype.hasOwnProperty.call(I,g)?I[g]:I[g]=v(g)}function o(g,v){this.h=v;for(var I=[],w=!0,P=g.length-1;0<=P;P--){var k=g[P]|0;w&&k==v||(I[P]=k,w=!1)}this.g=I}var c={};function u(g){return-128<=g&&128>g?i(g,function(v){return new o([v|0],0>v?-1:0)}):new o([g|0],0>g?-1:0)}function h(g){if(isNaN(g)||!isFinite(g))return m;if(0>g)return $(h(-g));for(var v=[],I=1,w=0;g>=I;w++)v[w]=g/I|0,I*=4294967296;return new o(v,0)}function p(g,v){if(g.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(g.charAt(0)=="-")return $(p(g.substring(1),v));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(v,8)),w=m,P=0;P<g.length;P+=8){var k=Math.min(8,g.length-P),A=parseInt(g.substring(P,P+k),v);8>k?(k=h(Math.pow(v,k)),w=w.j(k).add(h(A))):(w=w.j(I),w=w.add(h(A)))}return w}var m=u(0),y=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-$(this).m();for(var g=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);g+=(0<=w?w:4294967296+w)*v,v*=4294967296}return g},t.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(N(this))return"0";if(b(this))return"-"+$(this).toString(g);for(var v=h(Math.pow(g,6)),I=this,w="";;){var P=R(I,v).g;I=C(I,P.j(v));var k=((0<I.g.length?I.g[0]:I.h)>>>0).toString(g);if(I=P,N(I))return k+w;for(;6>k.length;)k="0"+k;w=k+w}},t.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function N(g){if(g.h!=0)return!1;for(var v=0;v<g.g.length;v++)if(g.g[v]!=0)return!1;return!0}function b(g){return g.h==-1}t.l=function(g){return g=C(this,g),b(g)?-1:N(g)?0:1};function $(g){for(var v=g.g.length,I=[],w=0;w<v;w++)I[w]=~g.g[w];return new o(I,~g.h).add(y)}t.abs=function(){return b(this)?$(this):this},t.add=function(g){for(var v=Math.max(this.g.length,g.g.length),I=[],w=0,P=0;P<=v;P++){var k=w+(this.i(P)&65535)+(g.i(P)&65535),A=(k>>>16)+(this.i(P)>>>16)+(g.i(P)>>>16);w=A>>>16,k&=65535,A&=65535,I[P]=A<<16|k}return new o(I,I[I.length-1]&-2147483648?-1:0)};function C(g,v){return g.add($(v))}t.j=function(g){if(N(this)||N(g))return m;if(b(this))return b(g)?$(this).j($(g)):$($(this).j(g));if(b(g))return $(this.j($(g)));if(0>this.l(E)&&0>g.l(E))return h(this.m()*g.m());for(var v=this.g.length+g.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var P=0;P<g.g.length;P++){var k=this.i(w)>>>16,A=this.i(w)&65535,Ne=g.i(P)>>>16,tt=g.i(P)&65535;I[2*w+2*P]+=A*tt,S(I,2*w+2*P),I[2*w+2*P+1]+=k*tt,S(I,2*w+2*P+1),I[2*w+2*P+1]+=A*Ne,S(I,2*w+2*P+1),I[2*w+2*P+2]+=k*Ne,S(I,2*w+2*P+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new o(I,0)};function S(g,v){for(;(g[v]&65535)!=g[v];)g[v+1]+=g[v]>>>16,g[v]&=65535,v++}function x(g,v){this.g=g,this.h=v}function R(g,v){if(N(v))throw Error("division by zero");if(N(g))return new x(m,m);if(b(g))return v=R($(g),v),new x($(v.g),$(v.h));if(b(v))return v=R(g,$(v)),new x($(v.g),v.h);if(30<g.g.length){if(b(g)||b(v))throw Error("slowDivide_ only works with positive integers.");for(var I=y,w=v;0>=w.l(g);)I=j(I),w=j(w);var P=B(I,1),k=B(w,1);for(w=B(w,2),I=B(I,2);!N(w);){var A=k.add(w);0>=A.l(g)&&(P=P.add(I),k=A),w=B(w,1),I=B(I,1)}return v=C(g,P.j(v)),new x(P,v)}for(P=m;0<=g.l(v);){for(I=Math.max(1,Math.floor(g.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),k=h(I),A=k.j(v);b(A)||0<A.l(g);)I-=w,k=h(I),A=k.j(v);N(k)&&(k=y),P=P.add(k),g=C(g,A)}return new x(P,g)}t.A=function(g){return R(this,g).h},t.and=function(g){for(var v=Math.max(this.g.length,g.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&g.i(w);return new o(I,this.h&g.h)},t.or=function(g){for(var v=Math.max(this.g.length,g.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|g.i(w);return new o(I,this.h|g.h)},t.xor=function(g){for(var v=Math.max(this.g.length,g.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^g.i(w);return new o(I,this.h^g.h)};function j(g){for(var v=g.g.length+1,I=[],w=0;w<v;w++)I[w]=g.i(w)<<1|g.i(w-1)>>>31;return new o(I,g.h)}function B(g,v){var I=v>>5;v%=32;for(var w=g.g.length-I,P=[],k=0;k<w;k++)P[k]=0<v?g.i(k+I)>>>v|g.i(k+I+1)<<32-v:g.i(k+I);return new o(P,g.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,y0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Qs=o}).apply(typeof kg<"u"?kg:typeof self<"u"?self:typeof window<"u"?window:{});var Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _0,Ho,w0,nc,Sh,E0,T0,I0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vl=="object"&&Vl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var L=a[_];if(!(L in f))break e;f=f[L]}a=a[a.length-1],_=f[a],d=d(_),d!=_&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,_=!1,L={next:function(){if(!_&&f<a.length){var W=f++;return{value:d(W,a[W]),done:!1}}return _=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,_),a.apply(d,L)}}return function(){return a.apply(d,arguments)}}function y(a,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function E(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function N(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(_,L,W){for(var re=Array(arguments.length-2),He=2;He<arguments.length;He++)re[He-2]=arguments[He];return d.prototype[L].apply(_,re)}}function b(a){const d=a.length;if(0<d){const f=Array(d);for(let _=0;_<d;_++)f[_]=a[_];return f}return[]}function $(a,d){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(u(_)){const L=a.length||0,W=_.length||0;a.length=L+W;for(let re=0;re<W;re++)a[L+re]=_[re]}else a.push(_)}}class C{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function S(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function R(a){return R[" "](a),a}R[" "]=function(){};var j=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function B(a,d,f){for(const _ in a)d.call(f,a[_],_,a)}function g(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function v(a){const d={};for(const f in a)d[f]=a[f];return d}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let f,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(f in _)a[f]=_[f];for(let W=0;W<I.length;W++)f=I[W],Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])}}function P(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function k(a){c.setTimeout(()=>{throw a},0)}function A(){var a=D;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Ne{constructor(){this.h=this.g=null}add(d,f){const _=tt.get();_.set(d,f),this.h?this.h.next=_:this.g=_,this.h=_}}var tt=new C(()=>new pt,a=>a.reset());class pt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let mt,O=!1,D=new Ne,F=()=>{const a=c.Promise.resolve(void 0);mt=()=>{a.then(K)}};var K=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(f){k(f)}var d=tt;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}O=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function Ve(a,d){if(se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(j){e:{try{R(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ze[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ve.aa.h.call(this)}}N(Ve,se);var ze={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ct="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function Sn(a,d,f,_,L){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!_,this.ha=L,this.key=++Qe,this.da=this.fa=!1}function St(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function xt(a){this.src=a,this.g={},this.h=0}xt.prototype.add=function(a,d,f,_,L){var W=a.toString();a=this.g[W],a||(a=this.g[W]=[],this.h++);var re=xn(a,d,_,L);return-1<re?(d=a[re],f||(d.fa=!1)):(d=new Sn(d,this.src,W,!!_,L),d.fa=f,a.push(d)),d};function Ln(a,d){var f=d.type;if(f in a.g){var _=a.g[f],L=Array.prototype.indexOf.call(_,d,void 0),W;(W=0<=L)&&Array.prototype.splice.call(_,L,1),W&&(St(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function xn(a,d,f,_){for(var L=0;L<a.length;++L){var W=a[L];if(!W.da&&W.listener==d&&W.capture==!!f&&W.ha==_)return L}return-1}var xe="closure_lm_"+(1e6*Math.random()|0),Ie={};function Te(a,d,f,_,L){if(Array.isArray(d)){for(var W=0;W<d.length;W++)Te(a,d[W],f,_,L);return null}return f=T(f),a&&a[ct]?a.K(d,f,h(_)?!!_.capture:!1,L):Kt(a,d,f,!1,_,L)}function Kt(a,d,f,_,L,W){if(!d)throw Error("Invalid event type");var re=h(L)?!!L.capture:!!L,He=Fn(a);if(He||(a[xe]=He=new xt(a)),f=He.add(d,f,_,re,W),f.proxy)return f;if(_=Vt(),f.proxy=_,_.src=a,_.listener=f,a.addEventListener)ve||(L=re),L===void 0&&(L=!1),a.addEventListener(d.toString(),_,L);else if(a.attachEvent)a.attachEvent(mn(d.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Vt(){function a(f){return d.call(a.src,a.listener,f)}const d=Qn;return a}function An(a,d,f,_,L){if(Array.isArray(d))for(var W=0;W<d.length;W++)An(a,d[W],f,_,L);else _=h(_)?!!_.capture:!!_,f=T(f),a&&a[ct]?(a=a.i,d=String(d).toString(),d in a.g&&(W=a.g[d],f=xn(W,f,_,L),-1<f&&(St(W[f]),Array.prototype.splice.call(W,f,1),W.length==0&&(delete a.g[d],a.h--)))):a&&(a=Fn(a))&&(d=a.g[d.toString()],a=-1,d&&(a=xn(d,f,_,L)),(f=-1<a?d[a]:null)&&Gn(f))}function Gn(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[ct])Ln(d.i,a);else{var f=a.type,_=a.proxy;d.removeEventListener?d.removeEventListener(f,_,a.capture):d.detachEvent?d.detachEvent(mn(f),_):d.addListener&&d.removeListener&&d.removeListener(_),(f=Fn(d))?(Ln(f,a),f.h==0&&(f.src=null,d[xe]=null)):St(a)}}}function mn(a){return a in Ie?Ie[a]:Ie[a]="on"+a}function Qn(a,d){if(a.da)a=!0;else{d=new Ve(d,this);var f=a.listener,_=a.ha||a.src;a.fa&&Gn(a),a=f.call(_,d)}return a}function Fn(a){return a=a[xe],a instanceof xt?a:null}var Yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function T(a){return typeof a=="function"?a:(a[Yn]||(a[Yn]=function(d){return a.handleEvent(d)}),a[Yn])}function M(){J.call(this),this.i=new xt(this),this.M=this,this.F=null}N(M,J),M.prototype[ct]=!0,M.prototype.removeEventListener=function(a,d,f,_){An(this,a,d,f,_)};function V(a,d){var f,_=a.F;if(_)for(f=[];_;_=_.F)f.push(_);if(a=a.M,_=d.type||d,typeof d=="string")d=new se(d,a);else if(d instanceof se)d.target=d.target||a;else{var L=d;d=new se(_,a),w(d,L)}if(L=!0,f)for(var W=f.length-1;0<=W;W--){var re=d.g=f[W];L=oe(re,_,!0,d)&&L}if(re=d.g=a,L=oe(re,_,!0,d)&&L,L=oe(re,_,!1,d)&&L,f)for(W=0;W<f.length;W++)re=d.g=f[W],L=oe(re,_,!1,d)&&L}M.prototype.N=function(){if(M.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],_=0;_<f.length;_++)St(f[_]);delete a.g[d],a.h--}}this.F=null},M.prototype.K=function(a,d,f,_){return this.i.add(String(a),d,!1,f,_)},M.prototype.L=function(a,d,f,_){return this.i.add(String(a),d,!0,f,_)};function oe(a,d,f,_){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,W=0;W<d.length;++W){var re=d[W];if(re&&!re.da&&re.capture==f){var He=re.listener,Ft=re.ha||re.src;re.fa&&Ln(a.i,re),L=He.call(Ft,_)!==!1&&L}}return L&&!_.defaultPrevented}function ce(a,d,f){if(typeof a=="function")f&&(a=y(a,f));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function be(a){a.g=ce(()=>{a.g=null,a.i&&(a.i=!1,be(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class ke extends J{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:be(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gt(a){J.call(this),this.h=a,this.g={}}N(gt,J);var $e=[];function st(a){B(a.g,function(d,f){this.g.hasOwnProperty(f)&&Gn(d)},a),a.g={}}gt.prototype.N=function(){gt.aa.N.call(this),st(this)},gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wt=c.JSON.stringify,Xn=c.JSON.parse,Jn=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Cn(){}Cn.prototype.h=null;function Zn(a){return a.h||(a.h=a.i())}function Kr(){}var Pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lt(){se.call(this,"d")}N(Lt,se);function Gr(){se.call(this,"c")}N(Gr,se);var H={},Ee=null;function we(){return Ee=Ee||new M}H.La="serverreachability";function pe(a){se.call(this,H.La,a)}N(pe,se);function U(a){const d=we();V(d,new pe(d))}H.STAT_EVENT="statevent";function z(a,d){se.call(this,H.STAT_EVENT,a),this.stat=d}N(z,se);function q(a){const d=we();V(d,new z(d,a))}H.Ma="timingevent";function ne(a,d){se.call(this,H.Ma,a),this.size=d}N(ne,se);function X(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function ie(){this.g=!0}ie.prototype.xa=function(){this.g=!1};function G(a,d,f,_,L,W){a.info(function(){if(a.g)if(W)for(var re="",He=W.split("&"),Ft=0;Ft<He.length;Ft++){var Me=He[Ft].split("=");if(1<Me.length){var Yt=Me[0];Me=Me[1];var Xt=Yt.split("_");re=2<=Xt.length&&Xt[1]=="type"?re+(Yt+"="+Me+"&"):re+(Yt+"=redacted&")}}else re=null;else re=W;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+d+`
`+f+`
`+re})}function Z(a,d,f,_,L,W,re){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+d+`
`+f+`
`+W+" "+re})}function de(a,d,f,_){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+We(a,f)+(_?" "+_:"")})}function De(a,d){a.info(function(){return"TIMEOUT: "+d})}ie.prototype.info=function(){};function We(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var _=f[a];if(!(2>_.length)){var L=_[1];if(Array.isArray(L)&&!(1>L.length)){var W=L[0];if(W!="noop"&&W!="stop"&&W!="close")for(var re=1;re<L.length;re++)L[re]=""}}}}return wt(f)}catch{return d}}var Ye={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},an;function At(){}N(At,Cn),At.prototype.g=function(){return new XMLHttpRequest},At.prototype.i=function(){return{}},an=new At;function Ct(a,d,f,_){this.j=a,this.i=d,this.l=f,this.R=_||1,this.U=new gt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gt}function Gt(){this.i=null,this.g="",this.h=!1}var Pt={},ut={};function qe(a,d,f){a.L=1,a.v=dl(dt(d)),a.m=f,a.P=!0,jt(a,null)}function jt(a,d){a.F=Date.now(),gn(a),a.A=dt(a.v);var f=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),$p(f.i,"t",_),a.C=0,f=a.j.J,a.h=new Gt,a.g=am(a.j,f?d:null,!a.m),0<a.O&&(a.M=new ke(y(a.Y,a,a.g),a.O)),d=a.U,f=a.g,_=a.ca;var L="readystatechange";Array.isArray(L)||(L&&($e[0]=L.toString()),L=$e);for(var W=0;W<L.length;W++){var re=Te(f,L[W],_||d.handleEvent,!1,d.h||d);if(!re)break;d.g[re.key]=re}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),U(),G(a.i,a.u,a.A,a.l,a.R,a.m)}Ct.prototype.ca=function(a){a=a.target;const d=this.M;d&&Ar(a)==3?d.j():this.Y(a)},Ct.prototype.Y=function(a){try{if(a==this.g)e:{const Xt=Ar(this.g);var d=this.g.Ba();const vi=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||Yp(this.g)))){this.J||Xt!=4||d==7||(d==8||0>=vi?U(3):U(2)),Qt(this);var f=this.g.Z();this.X=f;t:if(Un(this)){var _=Yp(this.g);a="";var L=_.length,W=Ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){er(this),Qr(this);var re="";break t}this.h.i=new c.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,a+=this.h.i.decode(_[d],{stream:!(W&&d==L-1)});_.length=0,this.h.g+=a,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=f==200,Z(this.i,this.u,this.A,this.l,this.R,Xt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Ft=this.g;if((He=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(He)){var Me=He;break t}}Me=null}if(f=Me)de(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vo(this,f);else{this.o=!1,this.s=3,q(12),er(this),Qr(this);break e}}if(this.P){f=!0;let tr;for(;!this.J&&this.C<re.length;)if(tr=ln(this,re),tr==ut){Xt==4&&(this.s=4,q(14),f=!1),de(this.i,this.l,null,"[Incomplete Response]");break}else if(tr==Pt){this.s=4,q(15),de(this.i,this.l,re,"[Invalid Chunk]"),f=!1;break}else de(this.i,this.l,tr,null),vo(this,tr);if(Un(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||re.length!=0||this.h.h||(this.s=1,q(16),f=!1),this.o=this.o&&f,!f)de(this.i,this.l,re,"[Invalid Chunked Response]"),er(this),Qr(this);else if(0<re.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),zu(Yt),Yt.M=!0,q(11))}}else de(this.i,this.l,re,null),vo(this,re);Xt==4&&er(this),this.o&&!this.J&&(Xt==4?rm(this.j,this):(this.o=!1,gn(this)))}else ME(this.g),f==400&&0<re.indexOf("Unknown SID")?(this.s=3,q(12)):(this.s=0,q(13)),er(this),Qr(this)}}}catch{}finally{}};function Un(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function ln(a,d){var f=a.C,_=d.indexOf(`
`,f);return _==-1?ut:(f=Number(d.substring(f,_)),isNaN(f)?Pt:(_+=1,_+f>d.length?ut:(d=d.slice(_,_+f),a.C=_+f,d)))}Ct.prototype.cancel=function(){this.J=!0,er(this)};function gn(a){a.S=Date.now()+a.I,Ke(a,a.I)}function Ke(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=X(y(a.ba,a),d)}function Qt(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Ct.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(De(this.i,this.A),this.L!=2&&(U(),q(17)),er(this),this.s=2,Qr(this)):Ke(this,this.S-a)};function Qr(a){a.j.G==0||a.J||rm(a.j,a)}function er(a){Qt(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,st(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function vo(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||al(f.h,a))){if(!a.K&&al(f.h,a)&&f.G==3){try{var _=f.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)vl(f),ml(f);else break e;Bu(f),q(18)}}else f.za=L[1],0<f.za-f.T&&37500>L[2]&&f.F&&f.v==0&&!f.C&&(f.C=X(y(f.Za,f),6e3));if(1>=_o(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Vs(f,11)}else if((a.K||f.g==a)&&vl(f),!S(d))for(L=f.Da.g.parse(d),d=0;d<L.length;d++){let Me=L[d];if(f.T=Me[0],Me=Me[1],f.G==2)if(Me[0]=="c"){f.K=Me[1],f.ia=Me[2];const Yt=Me[3];Yt!=null&&(f.la=Yt,f.j.info("VER="+f.la));const Xt=Me[4];Xt!=null&&(f.Aa=Xt,f.j.info("SVER="+f.Aa));const vi=Me[5];vi!=null&&typeof vi=="number"&&0<vi&&(_=1.5*vi,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const tr=a.g;if(tr){const _l=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_l){var W=_.h;W.g||_l.indexOf("spdy")==-1&&_l.indexOf("quic")==-1&&_l.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(fi(W,W.h),W.h=null))}if(_.D){const $u=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;$u&&(_.ya=$u,Xe(_.I,_.D,$u))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var re=a;if(_.qa=om(_,_.J?_.ia:null,_.W),re.K){pi(_.h,re);var He=re,Ft=_.L;Ft&&(He.I=Ft),He.B&&(Qt(He),gn(He)),_.g=re}else tm(_);0<f.i.length&&gl(f)}else Me[0]!="stop"&&Me[0]!="close"||Vs(f,7);else f.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Vs(f,7):Uu(f):Me[0]!="noop"&&f.l&&f.l.ta(Me),f.v=0)}}U(4)}catch{}}var il=class{constructor(a,d){this.g=a,this.map=d}};function yo(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ol(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function _o(a){return a.h?1:a.g?a.g.size:0}function al(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function fi(a,d){a.g?a.g.add(d):a.h=d}function pi(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}yo.prototype.cancel=function(){if(this.i=ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ll(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return b(a.i)}function bu(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,_=0;_<f;_++)d.push(a[_]);return d}d=[],f=0;for(_ in a)d[f++]=a[_];return d}function Vu(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const _ in a)d[f++]=_;return d}}}function cl(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=Vu(a),_=bu(a),L=_.length,W=0;W<L;W++)d.call(void 0,_[W],f&&f[W],a)}var ul=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lu(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var _=a[f].indexOf("="),L=null;if(0<=_){var W=a[f].substring(0,_);L=a[f].substring(_+1)}else W=a[f];d(W,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Le(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Le){this.h=a.h,xr(this,a.j),this.o=a.o,this.g=a.g,bs(this,a.s),this.l=a.l;var d=a.i,f=new Io;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),wo(this,f),this.m=a.m}else a&&(d=String(a).match(ul))?(this.h=!1,xr(this,d[1]||"",!0),this.o=Eo(d[2]||""),this.g=Eo(d[3]||"",!0),bs(this,d[4]),this.l=Eo(d[5]||"",!0),wo(this,d[6]||"",!0),this.m=Eo(d[7]||"")):(this.h=!1,this.i=new Io(null,this.h))}Le.prototype.toString=function(){var a=[],d=this.j;d&&a.push(To(d,Up,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(To(d,Up,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(To(f,f.charAt(0)=="/"?SE:IE,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",To(f,AE)),a.join("")};function dt(a){return new Le(a)}function xr(a,d,f){a.j=f?Eo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function bs(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function wo(a,d,f){d instanceof Io?(a.i=d,CE(a.i,a.h)):(f||(d=To(d,xE)),a.i=new Io(d,a.h))}function Xe(a,d,f){a.i.set(d,f)}function dl(a){return Xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Eo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function To(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,TE),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function TE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Up=/[#\/\?@]/g,IE=/[#\?:]/g,SE=/[#\?]/g,xE=/[#\?@]/g,AE=/#/g;function Io(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Yr(a){a.g||(a.g=new Map,a.h=0,a.i&&Lu(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Io.prototype,t.add=function(a,d){Yr(this),this.i=null,a=mi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Bp(a,d){Yr(a),d=mi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function zp(a,d){return Yr(a),d=mi(a,d),a.g.has(d)}t.forEach=function(a,d){Yr(this),this.g.forEach(function(f,_){f.forEach(function(L){a.call(d,L,_,this)},this)},this)},t.na=function(){Yr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let _=0;_<d.length;_++){const L=a[_];for(let W=0;W<L.length;W++)f.push(d[_])}return f},t.V=function(a){Yr(this);let d=[];if(typeof a=="string")zp(this,a)&&(d=d.concat(this.g.get(mi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Yr(this),this.i=null,a=mi(this,a),zp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function $p(a,d,f){Bp(a,d),0<f.length&&(a.i=null,a.g.set(mi(a,d),b(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var _=d[f];const W=encodeURIComponent(String(_)),re=this.V(_);for(_=0;_<re.length;_++){var L=W;re[_]!==""&&(L+="="+encodeURIComponent(String(re[_]))),a.push(L)}}return this.i=a.join("&")};function mi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function CE(a,d){d&&!a.j&&(Yr(a),a.i=null,a.g.forEach(function(f,_){var L=_.toLowerCase();_!=L&&(Bp(this,_),$p(this,L,f))},a)),a.j=d}function PE(a,d){const f=new ie;if(c.Image){const _=new Image;_.onload=E(Xr,f,"TestLoadImage: loaded",!0,d,_),_.onerror=E(Xr,f,"TestLoadImage: error",!1,d,_),_.onabort=E(Xr,f,"TestLoadImage: abort",!1,d,_),_.ontimeout=E(Xr,f,"TestLoadImage: timeout",!1,d,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else d(!1)}function NE(a,d){const f=new ie,_=new AbortController,L=setTimeout(()=>{_.abort(),Xr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:_.signal}).then(W=>{clearTimeout(L),W.ok?Xr(f,"TestPingServer: ok",!0,d):Xr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Xr(f,"TestPingServer: error",!1,d)})}function Xr(a,d,f,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(f)}catch{}}function kE(){this.g=new Jn}function RE(a,d,f){const _=f||"";try{cl(a,function(L,W){let re=L;h(L)&&(re=wt(L)),d.push(_+W+"="+encodeURIComponent(re))})}catch(L){throw d.push(_+"type="+encodeURIComponent("_badmap")),L}}function hl(a){this.l=a.Ub||null,this.j=a.eb||!1}N(hl,Cn),hl.prototype.g=function(){return new fl(this.l,this.j)},hl.prototype.i=function(a){return function(){return a}}({});function fl(a,d){M.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(fl,M),t=fl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,xo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,So(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,xo(this)),this.g&&(this.readyState=3,xo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function qp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?So(this):xo(this),this.readyState==3&&qp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,So(this))},t.Qa=function(a){this.g&&(this.response=a,So(this))},t.ga=function(){this.g&&So(this)};function So(a){a.readyState=4,a.l=null,a.j=null,a.v=null,xo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function xo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Hp(a){let d="";return B(a,function(f,_){d+=_,d+=":",d+=f,d+=`\r
`}),d}function Fu(a,d,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=Hp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Xe(a,d,f))}function ht(a){M.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(ht,M);var jE=/^https?$/i,DE=["POST","PUT"];t=ht.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():an.g(),this.v=this.o?Zn(this.o):Zn(an),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(W){Wp(this,W);return}if(a=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)f.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const W of _.keys())f.set(W,_.get(W));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(W=>W.toLowerCase()=="content-type"),L=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(DE,d,void 0))||_||L||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,re]of f)this.g.setRequestHeader(W,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qp(this),this.u=!0,this.g.send(a),this.u=!1}catch(W){Wp(this,W)}};function Wp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Kp(a),pl(a)}function Kp(a){a.A||(a.A=!0,V(a,"complete"),V(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,V(this,"complete"),V(this,"abort"),pl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pl(this,!0)),ht.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gp(this):this.bb())},t.bb=function(){Gp(this)};function Gp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Ar(a)!=4||a.Z()!=2)){if(a.u&&Ar(a)==4)ce(a.Ea,0,a);else if(V(a,"readystatechange"),Ar(a)==4){a.h=!1;try{const re=a.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var _;if(_=re===0){var L=String(a.D).match(ul)[1]||null;!L&&c.self&&c.self.location&&(L=c.self.location.protocol.slice(0,-1)),_=!jE.test(L?L.toLowerCase():"")}f=_}if(f)V(a,"complete"),V(a,"success");else{a.m=6;try{var W=2<Ar(a)?a.g.statusText:""}catch{W=""}a.l=W+" ["+a.Z()+"]",Kp(a)}}finally{pl(a)}}}}function pl(a,d){if(a.g){Qp(a);const f=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||V(a,"ready");try{f.onreadystatechange=_}catch{}}}function Qp(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Ar(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Xn(d)}};function Yp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ME(a){const d={};a=(a.g&&2<=Ar(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(S(a[_]))continue;var f=P(a[_]);const L=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const W=d[L]||[];d[L]=W,W.push(f)}g(d,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ao(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Xp(a){this.Aa=0,this.i=[],this.j=new ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ao("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ao("baseRetryDelayMs",5e3,a),this.cb=Ao("retryDelaySeedMs",1e4,a),this.Wa=Ao("forwardChannelMaxRetries",2,a),this.wa=Ao("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new yo(a&&a.concurrentRequestLimit),this.Da=new kE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,_){q(0),this.W=a,this.H=d||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=om(this,null,this.W),gl(this)};function Uu(a){if(Jp(a),a.G==3){var d=a.U++,f=dt(a.I);if(Xe(f,"SID",a.K),Xe(f,"RID",d),Xe(f,"TYPE","terminate"),Co(a,f),d=new Ct(a,a.j,d),d.L=2,d.v=dl(dt(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=am(d.j,null),d.g.ea(d.v)),d.F=Date.now(),gn(d)}im(a)}function ml(a){a.g&&(zu(a),a.g.cancel(),a.g=null)}function Jp(a){ml(a),a.u&&(c.clearTimeout(a.u),a.u=null),vl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function gl(a){if(!ol(a.h)&&!a.s){a.s=!0;var d=a.Ga;mt||F(),O||(mt(),O=!0),D.add(d,a),a.B=0}}function OE(a,d){return _o(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=X(y(a.Ga,a,d),sm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const L=new Ct(this,this.j,a);let W=this.o;if(this.S&&(W?(W=v(W),w(W,this.S)):W=this.S),this.m!==null||this.O||(L.H=W,W=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=em(this,L,d),f=dt(this.I),Xe(f,"RID",a),Xe(f,"CVER",22),this.D&&Xe(f,"X-HTTP-Session-Id",this.D),Co(this,f),W&&(this.O?d="headers="+encodeURIComponent(String(Hp(W)))+"&"+d:this.m&&Fu(f,this.m,W)),fi(this.h,L),this.Ua&&Xe(f,"TYPE","init"),this.P?(Xe(f,"$req",d),Xe(f,"SID","null"),L.T=!0,qe(L,f,null)):qe(L,f,d),this.G=2}}else this.G==3&&(a?Zp(this,a):this.i.length==0||ol(this.h)||Zp(this))};function Zp(a,d){var f;d?f=d.l:f=a.U++;const _=dt(a.I);Xe(_,"SID",a.K),Xe(_,"RID",f),Xe(_,"AID",a.T),Co(a,_),a.m&&a.o&&Fu(_,a.m,a.o),f=new Ct(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=em(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),fi(a.h,f),qe(f,_,d)}function Co(a,d){a.H&&B(a.H,function(f,_){Xe(d,_,f)}),a.l&&cl({},function(f,_){Xe(d,_,f)})}function em(a,d,f){f=Math.min(a.i.length,f);var _=a.l?y(a.l.Na,a.l,a):null;e:{var L=a.i;let W=-1;for(;;){const re=["count="+f];W==-1?0<f?(W=L[0].g,re.push("ofs="+W)):W=0:re.push("ofs="+W);let He=!0;for(let Ft=0;Ft<f;Ft++){let Me=L[Ft].g;const Yt=L[Ft].map;if(Me-=W,0>Me)W=Math.max(0,L[Ft].g-100),He=!1;else try{RE(Yt,re,"req"+Me+"_")}catch{_&&_(Yt)}}if(He){_=re.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,_}function tm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;mt||F(),O||(mt(),O=!0),D.add(d,a),a.v=0}}function Bu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=X(y(a.Fa,a),sm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,nm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=X(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,q(10),ml(this),nm(this))};function zu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function nm(a){a.g=new Ct(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=dt(a.qa);Xe(d,"RID","rpc"),Xe(d,"SID",a.K),Xe(d,"AID",a.T),Xe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Xe(d,"TO",a.ja),Xe(d,"TYPE","xmlhttp"),Co(a,d),a.m&&a.o&&Fu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=dl(dt(d)),f.m=null,f.P=!0,jt(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ml(this),Bu(this),q(19))};function vl(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function rm(a,d){var f=null;if(a.g==d){vl(a),zu(a),a.g=null;var _=2}else if(al(a.h,d))f=d.D,pi(a.h,d),_=1;else return;if(a.G!=0){if(d.o)if(_==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var L=a.B;_=we(),V(_,new ne(_,f)),gl(a)}else tm(a);else if(L=d.s,L==3||L==0&&0<d.X||!(_==1&&OE(a,d)||_==2&&Bu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),L){case 1:Vs(a,5);break;case 4:Vs(a,10);break;case 3:Vs(a,6);break;default:Vs(a,2)}}}function sm(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Vs(a,d){if(a.j.info("Error code "+d),d==2){var f=y(a.fb,a),_=a.Xa;const L=!_;_=new Le(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||xr(_,"https"),dl(_),L?PE(_.toString(),f):NE(_.toString(),f)}else q(2);a.G=0,a.l&&a.l.sa(d),im(a),Jp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),q(2)):(this.j.info("Failed to ping google.com"),q(1))};function im(a){if(a.G=0,a.ka=[],a.l){const d=ll(a.h);(d.length!=0||a.i.length!=0)&&($(a.ka,d),$(a.ka,a.i),a.h.i.length=0,b(a.i),a.i.length=0),a.l.ra()}}function om(a,d,f){var _=f instanceof Le?dt(f):new Le(f);if(_.g!="")d&&(_.g=d+"."+_.g),bs(_,_.s);else{var L=c.location;_=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var W=new Le(null);_&&xr(W,_),d&&(W.g=d),L&&bs(W,L),f&&(W.l=f),_=W}return f=a.D,d=a.ya,f&&d&&Xe(_,f,d),Xe(_,"VER",a.la),Co(a,_),_}function am(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new ht(new hl({eb:f})):new ht(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lm(){}t=lm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yl(){}yl.prototype.g=function(a,d){return new Nn(a,d)};function Nn(a,d){M.call(this),this.g=new Xp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!S(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!S(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new gi(this)}N(Nn,M),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){Uu(this.g)},Nn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=wt(a),a=f);d.i.push(new il(d.Ya++,a)),d.G==3&&gl(d)},Nn.prototype.N=function(){this.g.l=null,delete this.j,Uu(this.g),delete this.g,Nn.aa.N.call(this)};function cm(a){Lt.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}N(cm,Lt);function um(){Gr.call(this),this.status=1}N(um,Gr);function gi(a){this.g=a}N(gi,lm),gi.prototype.ua=function(){V(this.g,"a")},gi.prototype.ta=function(a){V(this.g,new cm(a))},gi.prototype.sa=function(a){V(this.g,new um)},gi.prototype.ra=function(){V(this.g,"b")},yl.prototype.createWebChannel=yl.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,I0=function(){return new yl},T0=function(){return we()},E0=H,Sh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ye.NO_ERROR=0,Ye.TIMEOUT=8,Ye.HTTP_ERROR=6,nc=Ye,Be.COMPLETE="complete",w0=Be,Kr.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",M.prototype.listen=M.prototype.K,Ho=Kr,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,_0=ht}).apply(typeof Vl<"u"?Vl:typeof self<"u"?self:typeof window<"u"?window:{});const Rg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=new Uf("@firebase/firestore");function bo(){return ni.logLevel}function he(t,...e){if(ni.logLevel<=Pe.DEBUG){const n=e.map(zf);ni.debug(`Firestore (${fo}): ${t}`,...n)}}function zr(t,...e){if(ni.logLevel<=Pe.ERROR){const n=e.map(zf);ni.error(`Firestore (${fo}): ${t}`,...n)}}function Na(t,...e){if(ni.logLevel<=Pe.WARN){const n=e.map(zf);ni.warn(`Firestore (${fo}): ${t}`,...n)}}function zf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t="Unexpected state"){const e=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: `+t;throw zr(e),new Error(e)}function Ue(t,e){t||ge()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vn.UNAUTHENTICATED))}shutdown(){}}class Hx{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Or,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string"),new $x(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new vn(e)}}class Wx{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Kx{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Wx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Gx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ue(this.o===void 0);const r=i=>{i.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string"),this.R=n.token,new Gx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Yx(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Oe(t,e){return t<e?-1:t>e?1:0}function eo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Rt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Rt(0,0))}static max(){return new ye(new Rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(),r===void 0?r=e.length-n:r>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ka.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ka?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ze extends ka{construct(e,n,r){return new Ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ze(n)}static emptyPath(){return new Ze([])}}const Xx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends ka{construct(e,n,r){return new zt(e,n,r)}static isValidIdentifier(e){return Xx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new le(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new le(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new le(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new le(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(Ze.fromString(e))}static fromName(e){return new fe(Ze.fromString(e).popFirst(5))}static empty(){return new fe(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new Ze(e.slice()))}}function Jx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(r===1e9?new Rt(n+1,0):new Rt(n,r));return new Cs(s,fe.empty(),e)}function Zx(t){return new Cs(t.readTime,t.key,-1)}class Cs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cs(ye.min(),fe.empty(),-1)}static max(){return new Cs(ye.max(),fe.empty(),-1)}}function eA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==tA)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,r)=>{n(e)})}static reject(e){return new ee((n,r)=>{r(e)})}static waitFor(e){return new ee((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=ee.resolve(!1);for(const r of e)n=n.next(s=>s?ee.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ee((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++c,c===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new ee((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function rA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ga(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}$f.oe=-1;function mu(t){return t==null}function bc(t){return t===0&&1/t==-1/0}function sA(t){return typeof t=="number"&&Number.isInteger(t)&&!bc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ci(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function x0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ll(this.root,e,this.comparator,!0)}}class Ll{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Bt.RED,this.left=s??Bt.EMPTY,this.right=i??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Bt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Bt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dg(this.data.getIterator())}getIteratorFrom(e){return new Dg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class Dg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new jn([])}unionWith(e){let n=new qt(zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return eo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new A0("Invalid base64 string: "+i):i}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const iA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(Ue(!!t),typeof t=="string"){let e=0;const n=iA.exec(t);if(Ue(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(t.seconds),nanos:yt(t.nanos)}}function yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ri(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hf(t){const e=t.mapValue.fields.__previous_value__;return qf(e)?Hf(e):e}function Ra(t){const e=Ps(t.mapValue.fields.__local_write_time__.timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n,r,s,i,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class ja{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ja("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ja&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl={mapValue:{}};function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qf(t)?4:lA(t)?9007199254740991:aA(t)?10:11:ge()}function Ir(t,e){if(t===e)return!0;const n=si(t);if(n!==si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ra(t).isEqual(Ra(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ps(s.timestampValue),c=Ps(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ri(s.bytesValue).isEqual(ri(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return yt(s.geoPointValue.latitude)===yt(i.geoPointValue.latitude)&&yt(s.geoPointValue.longitude)===yt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return yt(s.integerValue)===yt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=yt(s.doubleValue),c=yt(i.doubleValue);return o===c?bc(o)===bc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return eo(t.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(jg(o)!==jg(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Ir(o[u],c[u])))return!1;return!0}(t,e);default:return ge()}}function Da(t,e){return(t.values||[]).find(n=>Ir(n,e))!==void 0}function to(t,e){if(t===e)return 0;const n=si(t),r=si(e);if(n!==r)return Oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=yt(i.integerValue||i.doubleValue),u=yt(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Mg(t.timestampValue,e.timestampValue);case 4:return Mg(Ra(t),Ra(e));case 5:return Oe(t.stringValue,e.stringValue);case 6:return function(i,o){const c=ri(i),u=ri(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=Oe(c[h],u[h]);if(p!==0)return p}return Oe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Oe(yt(i.latitude),yt(o.latitude));return c!==0?c:Oe(yt(i.longitude),yt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Og(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,h,p;const m=i.fields||{},y=o.fields||{},E=(c=m.value)===null||c===void 0?void 0:c.arrayValue,N=(u=y.value)===null||u===void 0?void 0:u.arrayValue,b=Oe(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((p=N==null?void 0:N.values)===null||p===void 0?void 0:p.length)||0);return b!==0?b:Og(E,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Fl.mapValue&&o===Fl.mapValue)return 0;if(i===Fl.mapValue)return 1;if(o===Fl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const y=Oe(u[m],p[m]);if(y!==0)return y;const E=to(c[u[m]],h[p[m]]);if(E!==0)return E}return Oe(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ge()}}function Mg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const n=Ps(t),r=Ps(e),s=Oe(n.seconds,r.seconds);return s!==0?s:Oe(n.nanos,r.nanos)}function Og(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=to(n[s],r[s]);if(i)return i}return Oe(n.length,r.length)}function no(t){return xh(t)}function xh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ps(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=xh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${xh(n.fields[o])}`;return s+"}"}(t.mapValue):ge()}function bg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ah(t){return!!t&&"integerValue"in t}function Wf(t){return!!t&&"arrayValue"in t}function Vg(t){return!!t&&"nullValue"in t}function Lg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rc(t){return!!t&&"mapValue"in t}function aA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ci(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(n)}setAll(e){let n=zt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=sa(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());rc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];rc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ci(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new _n(sa(this.value))}}function C0(t){const e=[];return ci(t.fields,(n,r)=>{const s=new zt([n]);if(rc(r)){const i=C0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new nn(e,0,ye.min(),ye.min(),ye.min(),_n.empty(),0)}static newFoundDocument(e,n,r,s){return new nn(e,1,n,ye.min(),r,s,0)}static newNoDocument(e,n){return new nn(e,2,n,ye.min(),ye.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,ye.min(),ye.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.position=e,this.inclusive=n}}function Fg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=to(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ug(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ir(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n="asc"){this.field=e,this.dir=n}}function cA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{}class It extends P0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new dA(e,n,r):n==="array-contains"?new pA(e,r):n==="in"?new mA(e,r):n==="not-in"?new gA(e,r):n==="array-contains-any"?new vA(e,r):new It(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hA(e,r):new fA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(to(n,this.value)):n!==null&&si(this.value)===si(n)&&this.matchesComparison(to(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends P0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new cr(e,n)}matches(e){return N0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function N0(t){return t.op==="and"}function k0(t){return uA(t)&&N0(t)}function uA(t){for(const e of t.filters)if(e instanceof cr)return!1;return!0}function Ch(t){if(t instanceof It)return t.field.canonicalString()+t.op.toString()+no(t.value);if(k0(t))return t.filters.map(e=>Ch(e)).join(",");{const e=t.filters.map(n=>Ch(n)).join(",");return`${t.op}(${e})`}}function R0(t,e){return t instanceof It?function(r,s){return s instanceof It&&r.op===s.op&&r.field.isEqual(s.field)&&Ir(r.value,s.value)}(t,e):t instanceof cr?function(r,s){return s instanceof cr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&R0(o,s.filters[c]),!0):!1}(t,e):void ge()}function j0(t){return t instanceof It?function(n){return`${n.field.canonicalString()} ${n.op} ${no(n.value)}`}(t):t instanceof cr?function(n){return n.op.toString()+" {"+n.getFilters().map(j0).join(" ,")+"}"}(t):"Filter"}class dA extends It{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class hA extends It{constructor(e,n){super(e,"in",n),this.keys=D0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fA extends It{constructor(e,n){super(e,"not-in",n),this.keys=D0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function D0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class pA extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wf(n)&&Da(n.arrayValue,this.value)}}class mA extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Da(this.value.arrayValue,n)}}class gA extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(Da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Da(this.value.arrayValue,n)}}class vA extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Da(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function Bg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new yA(t,e,n,r,s,i,o)}function Kf(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ch(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),mu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>no(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>no(r)).join(",")),e.ue=n}return e.ue}function Gf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!R0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ug(t.startAt,e.startAt)&&Ug(t.endAt,e.endAt)}function Ph(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _A(t,e,n,r,s,i,o,c){return new Qa(t,e,n,r,s,i,o,c)}function gu(t){return new Qa(t)}function zg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M0(t){return t.collectionGroup!==null}function ia(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new qt(zt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Lc(i,r))}),n.has(zt.keyField().canonicalString())||e.ce.push(new Lc(zt.keyField(),r))}return e.ce}function _r(t){const e=_e(t);return e.le||(e.le=wA(e,ia(t))),e.le}function wA(t,e){if(t.limitType==="F")return Bg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Lc(s.field,i)});const n=t.endAt?new Vc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vc(t.startAt.position,t.startAt.inclusive):null;return Bg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nh(t,e){const n=t.filters.concat([e]);return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kh(t,e,n){return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vu(t,e){return Gf(_r(t),_r(e))&&t.limitType===e.limitType}function O0(t){return`${Kf(_r(t))}|lt:${t.limitType}`}function _i(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>j0(s)).join(", ")}]`),mu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>no(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>no(s)).join(",")),`Target(${r})`}(_r(t))}; limitType=${t.limitType})`}function yu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):fe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ia(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const h=Fg(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,ia(r),s)||r.endAt&&!function(o,c,u){const h=Fg(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,ia(r),s))}(t,e)}function EA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function b0(t){return(e,n)=>{let r=!1;for(const s of ia(t)){const i=TA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function TA(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),h=c.data.field(i);return u!==null&&h!==null?to(u,h):ge()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ci(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return x0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new lt(fe.comparator);function $r(){return IA}const V0=new lt(fe.comparator);function Wo(...t){let e=V0;for(const n of t)e=e.insert(n.key,n);return e}function L0(t){let e=V0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ws(){return oa()}function F0(){return oa()}function oa(){return new po(t=>t.toString(),(t,e)=>t.isEqual(e))}const SA=new lt(fe.comparator),xA=new qt(fe.comparator);function Ce(...t){let e=xA;for(const n of t)e=e.add(n);return e}const AA=new qt(Oe);function CA(){return AA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bc(e)?"-0":e}}function U0(t){return{integerValue:""+t}}function PA(t,e){return sA(e)?U0(e):Qf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this._=void 0}}function NA(t,e,n){return t instanceof Ma?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&qf(i)&&(i=Hf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Oa?z0(t,e):t instanceof ba?$0(t,e):function(s,i){const o=B0(s,i),c=$g(o)+$g(s.Pe);return Ah(o)&&Ah(s.Pe)?U0(c):Qf(s.serializer,c)}(t,e)}function kA(t,e,n){return t instanceof Oa?z0(t,e):t instanceof ba?$0(t,e):n}function B0(t,e){return t instanceof Fc?function(r){return Ah(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ma extends _u{}class Oa extends _u{constructor(e){super(),this.elements=e}}function z0(t,e){const n=q0(e);for(const r of t.elements)n.some(s=>Ir(s,r))||n.push(r);return{arrayValue:{values:n}}}class ba extends _u{constructor(e){super(),this.elements=e}}function $0(t,e){let n=q0(e);for(const r of t.elements)n=n.filter(s=>!Ir(s,r));return{arrayValue:{values:n}}}class Fc extends _u{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function $g(t){return yt(t.integerValue||t.doubleValue)}function q0(t){return Wf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n){this.field=e,this.transform=n}}function jA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Oa&&s instanceof Oa||r instanceof ba&&s instanceof ba?eo(r.elements,s.elements,Ir):r instanceof Fc&&s instanceof Fc?Ir(r.Pe,s.Pe):r instanceof Ma&&s instanceof Ma}(t.transform,e.transform)}class DA{constructor(e,n){this.version=e,this.transformResults=n}}class Hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wu{}function H0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yf(t.key,Hn.none()):new Ya(t.key,t.data,Hn.none());{const n=t.data,r=_n.empty();let s=new qt(zt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ds(t.key,r,new jn(s.toArray()),Hn.none())}}function MA(t,e,n){t instanceof Ya?function(s,i,o){const c=s.value.clone(),u=Hg(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ds?function(s,i,o){if(!sc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Hg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(W0(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function aa(t,e,n,r){return t instanceof Ya?function(i,o,c,u){if(!sc(i.precondition,o))return c;const h=i.value.clone(),p=Wg(i.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ds?function(i,o,c,u){if(!sc(i.precondition,o))return c;const h=Wg(i.fieldTransforms,u,o),p=o.data;return p.setAll(W0(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return sc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function OA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=B0(r.transform,s||null);i!=null&&(n===null&&(n=_n.empty()),n.set(r.field,i))}return n||null}function qg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&eo(r,s,(i,o)=>jA(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ya extends wu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ds extends wu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function W0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Hg(t,e,n){const r=new Map;Ue(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,kA(o,c,n[s]))}return r}function Wg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,NA(i,o,e))}return r}class Yf extends wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bA extends wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&MA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=F0();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=H0(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ye.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&eo(this.mutations,e.mutations,(n,r)=>qg(n,r))&&eo(this.baseMutations,e.baseMutations,(n,r)=>qg(n,r))}}class Xf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ue(e.mutations.length===r.length);let s=function(){return SA}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Xf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,Re;function UA(t){switch(t){default:return ge();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function K0(t){if(t===void 0)return zr("GRPC error has no .code"),Y.UNKNOWN;switch(t){case Et.OK:return Y.OK;case Et.CANCELLED:return Y.CANCELLED;case Et.UNKNOWN:return Y.UNKNOWN;case Et.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Et.INTERNAL:return Y.INTERNAL;case Et.UNAVAILABLE:return Y.UNAVAILABLE;case Et.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Et.NOT_FOUND:return Y.NOT_FOUND;case Et.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Et.ABORTED:return Y.ABORTED;case Et.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Et.DATA_LOSS:return Y.DATA_LOSS;default:return ge()}}(Re=Et||(Et={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new Qs([4294967295,4294967295],0);function Kg(t){const e=BA().encode(t),n=new y0;return n.update(e),new Uint8Array(n.digest())}function Gg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qs([n,r],0),new Qs([s,i],0)]}class Jf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ko(`Invalid padding: ${n}`);if(r<0)throw new Ko(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ko(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ko(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Qs.fromNumber(r)));return s.compare(zA)===1&&(s=new Qs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Kg(e),[r,s]=Gg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Jf(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=Kg(e),[r,s]=Gg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Eu(ye.min(),s,new lt(Oe),$r(),Ce())}}class Xa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xa(r,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class G0{constructor(e,n){this.targetId=e,this.me=n}}class Q0{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Qg{constructor(){this.fe=0,this.ge=Xg(),this.pe=Wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ce(),n=Ce(),r=Ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ge()}}),new Xa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Xg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $A{constructor(e){this.Le=e,this.Be=new Map,this.ke=$r(),this.qe=Yg(),this.Qe=new lt(Oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Ph(i))if(r===0){const o=new fe(i.path);this.Ue(n,o,nn.newNoDocument(o,ye.min()))}else Ue(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=ri(r).toUint8Array()}catch(u){if(u instanceof A0)return Na("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Jf(o,s,i)}catch(u){return Na(u instanceof Ko?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Ph(c.target)){const u=new fe(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,nn.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Ce();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Eu(e,n,this.Qe,this.ke,r);return this.ke=$r(),this.qe=Yg(),this.Qe=new lt(Oe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Qg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qt(Oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Qg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Yg(){return new lt(fe.comparator)}function Xg(){return new lt(fe.comparator)}const qA={asc:"ASCENDING",desc:"DESCENDING"},HA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WA={and:"AND",or:"OR"};class KA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rh(t,e){return t.useProto3Json||mu(e)?e:{value:e}}function Uc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function GA(t,e){return Uc(t,e.toTimestamp())}function wr(t){return Ue(!!t),ye.fromTimestamp(function(n){const r=Ps(n);return new Rt(r.seconds,r.nanos)}(t))}function Zf(t,e){return jh(t,e).canonicalString()}function jh(t,e){const n=function(s){return new Ze(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function X0(t){const e=Ze.fromString(t);return Ue(nw(e)),e}function Dh(t,e){return Zf(t.databaseId,e.path)}function Ed(t,e){const n=X0(e);if(n.get(1)!==t.databaseId.projectId)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(Z0(n))}function J0(t,e){return Zf(t.databaseId,e)}function QA(t){const e=X0(t);return e.length===4?Ze.emptyPath():Z0(e)}function Mh(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Z0(t){return Ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Jg(t,e,n){return{name:Dh(t,e),fields:n.value.mapValue.fields}}function YA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(Ue(p===void 0||typeof p=="string"),Wt.fromBase64String(p||"")):(Ue(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Wt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const p=h.code===void 0?Y.UNKNOWN:K0(h.code);return new le(p,h.message||"")}(o);n=new Q0(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ed(t,r.document.name),i=wr(r.document.updateTime),o=r.document.createTime?wr(r.document.createTime):ye.min(),c=new _n({mapValue:{fields:r.document.fields}}),u=nn.newFoundDocument(s,i,o,c),h=r.targetIds||[],p=r.removedTargetIds||[];n=new ic(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ed(t,r.document),i=r.readTime?wr(r.readTime):ye.min(),o=nn.newNoDocument(s,i),c=r.removedTargetIds||[];n=new ic([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ed(t,r.document),i=r.removedTargetIds||[];n=new ic([],i,s,null)}else{if(!("filter"in e))return ge();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new FA(s,i),c=r.targetId;n=new G0(c,o)}}return n}function XA(t,e){let n;if(e instanceof Ya)n={update:Jg(t,e.key,e.value)};else if(e instanceof Yf)n={delete:Dh(t,e.key)};else if(e instanceof Ds)n={update:Jg(t,e.key,e.data),updateMask:oC(e.fieldMask)};else{if(!(e instanceof bA))return ge();n={verify:Dh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Ma)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Oa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ba)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Fc)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw ge()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:GA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge()}(t,e.precondition)),n}function JA(t,e){return t&&t.length>0?(Ue(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?wr(s.updateTime):wr(i);return o.isEqual(ye.min())&&(o=wr(i)),new DA(o,s.transformResults||[])}(n,e))):[]}function ZA(t,e){return{documents:[J0(t,e.path)]}}function eC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=J0(t,s);const i=function(h){if(h.length!==0)return tw(cr.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:wi(y.field),direction:rC(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Rh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function tC(t){let e=QA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ue(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const y=ew(m);return y instanceof cr&&k0(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(N){return new Lc(Ei(N.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(m){let y;return y=typeof m=="object"?m.value:m,mu(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(m){const y=!!m.before,E=m.values||[];return new Vc(E,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,E=m.values||[];return new Vc(E,y)}(n.endAt)),_A(e,s,o,i,c,"F",u,h)}function nC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ew(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ei(n.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ei(n.unaryFilter.field);return It.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ei(n.unaryFilter.field);return It.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ei(n.unaryFilter.field);return It.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(t):t.fieldFilter!==void 0?function(n){return It.create(Ei(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cr.create(n.compositeFilter.filters.map(r=>ew(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge()}}(n.compositeFilter.op))}(t):ge()}function rC(t){return qA[t]}function sC(t){return HA[t]}function iC(t){return WA[t]}function wi(t){return{fieldPath:t.canonicalString()}}function Ei(t){return zt.fromServerFormat(t.fieldPath)}function tw(t){return t instanceof It?function(n){if(n.op==="=="){if(Lg(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NAN"}};if(Vg(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lg(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NOT_NAN"}};if(Vg(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wi(n.field),op:sC(n.op),value:n.value}}}(t):t instanceof cr?function(n){const r=n.getFilters().map(s=>tw(s));return r.length===1?r[0]:{compositeFilter:{op:iC(n.op),filters:r}}}(t):ge()}function oC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r,s,i=ye.min(),o=ye.min(),c=Wt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.ct=e}}function lC(t){const e=tC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.un=new uC}addToCollectionParentIndex(e,n){return this.un.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(Cs.min())}updateCollectionGroup(e,n,r){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class uC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qt(Ze.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ro(0)}static kn(){return new ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.changes=new po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&aa(r.mutation,s,jn.empty(),Rt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){const s=Ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Wo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=$r();const o=oa(),c=function(){return oa()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Ds)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),aa(p.mutation,h,p.mutation.getFieldMask(),Rt.now())):o.set(h.key,jn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return c.set(h,new hC(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=oa();let s=new lt((o,c)=>o-c),i=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||jn.empty();p=c.applyToLocalView(h,p),r.set(u,p);const m=(s.get(c.batchId)||Ce()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,m=F0();p.forEach(y=>{if(!i.has(y)){const E=H0(n.get(y),r.get(y));E!==null&&m.set(y,E),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return ee.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ee.resolve(Ws());let c=-1,u=i;return o.next(h=>ee.forEach(h,(p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?ee.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,Ce())).next(p=>({batchId:c,changes:L0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let s=Wo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Wo();return this.indexManager.getCollectionParents(e,i).next(c=>ee.forEach(c,u=>{const h=function(m,y){return new Qa(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,nn.newInvalidDocument(p)))});let c=Wo();return o.forEach((u,h)=>{const p=i.get(u);p!==void 0&&aa(p.mutation,h,jn.empty(),Rt.now()),yu(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ee.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:wr(s.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:lC(s.bundledQuery),readTime:wr(s.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.overlays=new lt(fe.comparator),this.Ir=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ws();return ee.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),ee.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),ee.resolve()}getOverlaysForCollection(e,n,r){const s=Ws(),i=n.length+1,o=new fe(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new lt((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Ws(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Ws(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=s)););return ee.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new LA(n,r));let i=this.Ir.get(n);i===void 0&&(i=Ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.Tr=new qt(Mt.Er),this.dr=new qt(Mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new fe(new Ze([])),r=new Mt(n,e),s=new Mt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new fe(new Ze([])),r=new Mt(n,e),s=new Mt(n,e+1);let i=Ce();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return fe.comparator(e.key,n.key)||Oe(e.wr,n.wr)}static Ar(e,n){return Oe(e.wr,n.wr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new qt(Mt.Er)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VA(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new Mt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ee.resolve(o)}lookupMutationBatch(e,n){return ee.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return ee.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mt(n,0),s=new Mt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);i.push(c)}),ee.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qt(Oe);return n.forEach(s=>{const i=new Mt(s,0),o=new Mt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{r=r.add(c.wr)})}),ee.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;fe.isDocumentKey(i)||(i=i.child(""));const o=new Mt(new fe(i),0);let c=new qt(Oe);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.wr)),!0)},o),ee.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ue(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ee.forEach(n.mutations,s=>{const i=new Mt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Mt(n,0),s=this.br.firstAfterOrEqual(r);return ee.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.Mr=e,this.docs=function(){return new lt(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ee.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let r=$r();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():nn.newInvalidDocument(s))}),ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=$r();const o=n.path,c=new fe(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||eA(Zx(p),r)<=0||(s.has(p.key)||yu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return ee.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ge()}Or(e,n){return ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _C(this)}getSize(e){return ee.resolve(this.size)}}class _C extends dC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),ee.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.persistence=e,this.Nr=new po(n=>Kf(n),Gf),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ep,this.targetCount=0,this.kr=ro.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ee.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ro(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Kn(n),ee.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),ee.waitFor(i).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ee.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ee.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ee.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ee.resolve(r)}containsKey(e,n){return ee.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new $f(0),this.Kr=!1,this.Kr=!0,this.$r=new gC,this.referenceDelegate=e(this),this.Ur=new wC(this),this.indexManager=new cC,this.remoteDocumentCache=function(s){return new yC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new aC(n),this.Gr=new pC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const s=new TC(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return ee.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class TC extends nA{constructor(e){super(),this.currentSequenceNumber=e}}class tp{constructor(e){this.persistence=e,this.Jr=new ep,this.Yr=null}static Zr(e){return new tp(e)}get Xr(){if(this.Yr)return this.Yr;throw ge()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ee.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Xr,r=>{const s=fe.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ye.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ee.or([()=>ee.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ce(),s=Ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new np(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return SS()?8:rA(on())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new IC;return this.Xi(e,n,o).next(c=>{if(i.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(bo()<=Pe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",_i(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ee.resolve()):(bo()<=Pe.DEBUG&&he("QueryEngine","Query:",_i(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(bo()<=Pe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",_i(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):ee.resolve())}Yi(e,n){if(zg(n))return ee.resolve(null);let r=_r(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=kh(n,null,"F"),r=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ce(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,c);return this.ns(n,h,o,u.readTime)?this.Yi(e,kh(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return zg(n)||s.isEqual(ye.min())?ee.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?ee.resolve(null):(bo()<=Pe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_i(n)),this.rs(e,o,n,Jx(s,-1)).next(c=>c))})}ts(e,n){let r=new qt(b0(e));return n.forEach((s,i)=>{yu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return bo()<=Pe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",_i(n)),this.Ji.getDocumentsMatchingQuery(e,n,Cs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new lt(Oe),this._s=new po(i=>Kf(i),Gf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function AC(t,e,n,r){return new xC(t,e,n,r)}async function rw(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=Ce();for(const h of s){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})}function CC(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,p){const m=h.batch,y=m.keys();let E=ee.resolve();return y.forEach(N=>{E=E.next(()=>p.getEntry(u,N)).next(b=>{const $=h.docVersions.get(N);Ue($!==null),b.version.compareTo($)<0&&(m.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),p.addEntry(b)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=Ce();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function sw(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function PC(t,e){const n=_e(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((p,m)=>{const y=s.get(m);if(!y)return;c.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let E=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(Wt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),s=s.insert(m,E),function(b,$,C){return b.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(y,E,p)&&c.push(n.Ur.updateTargetData(i,E))});let u=$r(),h=Ce();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(NC(i,o,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(ye.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return ee.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function NC(t,e,n){let r=Ce(),s=Ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=$r();return n.forEach((c,u)=>{const h=i.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ye.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):he("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function kC(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function RC(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,ee.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new us(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Oh(t,e,n){const r=_e(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ga(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Zg(t,e,n){const r=_e(t);let s=ye.min(),i=Ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=_e(u),y=m._s.get(p);return y!==void 0?ee.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)}(r,o,_r(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ye.min(),n?i:Ce())).next(c=>(jC(r,EA(e),c),{documents:c,Ts:i})))}function jC(t,e,n){let r=t.us.get(e)||ye.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class ev{constructor(){this.activeTargetIds=CA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DC{constructor(){this.so=new ev,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ev,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=null;function Td(){return Ul===null?Ul=function(){return 268435456+Math.round(2147483648*Math.random())}():Ul++,"0x"+Ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class VC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const c=Td(),u=this.xo(n,r.toUriEncodedString());he("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,u,h,s).then(p=>(he("RestConnection",`Received RPC '${n}' ${c}: `,p),p),p=>{throw Na("RestConnection",`RPC '${n}' ${c} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,c){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=OC[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Td();return new Promise((o,c)=>{const u=new _0;u.setWithCredentials(!0),u.listenOnce(w0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nc.NO_ERROR:const p=u.getResponseJson();he(en,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case nc.TIMEOUT:he(en,`RPC '${e}' ${i} timed out`),c(new le(Y.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:const m=u.getStatus();if(he(en,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y==null?void 0:y.error;if(E&&E.status&&E.message){const N=function($){const C=$.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(C)>=0?C:Y.UNKNOWN}(E.status);c(new le(N,E.message))}else c(new le(Y.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new le(Y.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{he(en,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);he(en,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Td(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I0(),c=T0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");he(en,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);let y=!1,E=!1;const N=new bC({Io:$=>{E?he(en,`Not sending because RPC '${e}' stream ${s} is closed:`,$):(y||(he(en,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),he(en,`RPC '${e}' stream ${s} sending:`,$),m.send($))},To:()=>m.close()}),b=($,C,S)=>{$.listen(C,x=>{try{S(x)}catch(R){setTimeout(()=>{throw R},0)}})};return b(m,Ho.EventType.OPEN,()=>{E||(he(en,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),b(m,Ho.EventType.CLOSE,()=>{E||(E=!0,he(en,`RPC '${e}' stream ${s} transport closed`),N.So())}),b(m,Ho.EventType.ERROR,$=>{E||(E=!0,Na(en,`RPC '${e}' stream ${s} transport errored:`,$),N.So(new le(Y.UNAVAILABLE,"The operation could not be completed")))}),b(m,Ho.EventType.MESSAGE,$=>{var C;if(!E){const S=$.data[0];Ue(!!S);const x=S,R=x.error||((C=x[0])===null||C===void 0?void 0:C.error);if(R){he(en,`RPC '${e}' stream ${s} received error:`,R);const j=R.status;let B=function(I){const w=Et[I];if(w!==void 0)return K0(w)}(j),g=R.message;B===void 0&&(B=Y.INTERNAL,g="Unknown error status: "+j+" with message "+R.message),E=!0,N.So(new le(B,g)),m.close()}else he(en,`RPC '${e}' stream ${s} received:`,S),N.bo(S)}}),b(c,E0.STAT_EVENT,$=>{$.stat===Sh.PROXY?he(en,`RPC '${e}' stream ${s} detected buffering proxy`):$.stat===Sh.NOPROXY&&he(en,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){return new KA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n,r,s,i,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new iw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(zr(n.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new le(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LC extends ow{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=YA(this.serializer,e),r=function(i){if(!("targetChange"in i))return ye.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?wr(o.readTime):ye.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Mh(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Ph(u)?{documents:ZA(i,u)}:{query:eC(i,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Y0(i,o.resumeToken);const h=Rh(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(ye.min())>0){c.readTime=Uc(i,o.snapshotVersion.toTimestamp());const h=Rh(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=nC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Mh(this.serializer),n.removeTarget=e,this.a_(n)}}class FC extends ow{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=JA(e.writeResults,e.commitTime),r=wr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Mh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>XA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,jh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(Y.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,jh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(Y.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class BC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zr(n),this.D_=!1):he("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ui(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=_e(u);h.L_.add(4),await Ja(h),h.q_.set("Unknown"),h.L_.delete(4),await Iu(h)}(this))})}),this.q_=new BC(r,s)}}async function Iu(t){if(ui(t))for(const e of t.B_)await e(!0)}async function Ja(t){for(const e of t.B_)await e(!1)}function aw(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),op(n)?ip(n):mo(n).r_()&&sp(n,e))}function rp(t,e){const n=_e(t),r=mo(n);n.N_.delete(e),r.r_()&&lw(n,e),n.N_.size===0&&(r.r_()?r.o_():ui(n)&&n.q_.set("Unknown"))}function sp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mo(t).A_(e)}function lw(t,e){t.Q_.xe(e),mo(t).R_(e)}function ip(t){t.Q_=new $A({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),mo(t).start(),t.q_.v_()}function op(t){return ui(t)&&!mo(t).n_()&&t.N_.size>0}function ui(t){return _e(t).L_.size===0}function cw(t){t.Q_=void 0}async function $C(t){t.q_.set("Online")}async function qC(t){t.N_.forEach((e,n)=>{sp(t,e)})}async function HC(t,e){cw(t),op(t)?(t.q_.M_(e),ip(t)):t.q_.set("Unknown")}async function WC(t,e,n){if(t.q_.set("Online"),e instanceof Q0&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bc(t,r)}else if(e instanceof ic?t.Q_.Ke(e):e instanceof G0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ye.min()))try{const r=await sw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(Wt.EMPTY_BYTE_STRING,p.snapshotVersion)),lw(i,u);const m=new us(p.target,u,h,p.sequenceNumber);sp(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){he("RemoteStore","Failed to raise snapshot:",r),await Bc(t,r)}}async function Bc(t,e,n){if(!Ga(e))throw e;t.L_.add(1),await Ja(t),t.q_.set("Offline"),n||(n=()=>sw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Iu(t)})}function uw(t,e){return e().catch(n=>Bc(t,n,e))}async function Su(t){const e=_e(t),n=Ns(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;KC(e);)try{const s=await kC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,GC(e,s)}catch(s){await Bc(e,s)}dw(e)&&hw(e)}function KC(t){return ui(t)&&t.O_.length<10}function GC(t,e){t.O_.push(e);const n=Ns(t);n.r_()&&n.V_&&n.m_(e.mutations)}function dw(t){return ui(t)&&!Ns(t).n_()&&t.O_.length>0}function hw(t){Ns(t).start()}async function QC(t){Ns(t).p_()}async function YC(t){const e=Ns(t);for(const n of t.O_)e.m_(n.mutations)}async function XC(t,e,n){const r=t.O_.shift(),s=Xf.from(r,e,n);await uw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Su(t)}async function JC(t,e){e&&Ns(t).V_&&await async function(r,s){if(function(o){return UA(o)&&o!==Y.ABORTED}(s.code)){const i=r.O_.shift();Ns(r).s_(),await uw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Su(r)}}(t,e),dw(t)&&hw(t)}async function nv(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=ui(n);n.L_.add(3),await Ja(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Iu(n)}async function ZC(t,e){const n=_e(t);e?(n.L_.delete(2),await Iu(n)):e||(n.L_.add(2),await Ja(n),n.q_.set("Unknown"))}function mo(t){return t.K_||(t.K_=function(n,r,s){const i=_e(n);return i.w_(),new LC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:$C.bind(null,t),Ro:qC.bind(null,t),mo:HC.bind(null,t),d_:WC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),op(t)?ip(t):t.q_.set("Unknown")):(await t.K_.stop(),cw(t))})),t.K_}function Ns(t){return t.U_||(t.U_=function(n,r,s){const i=_e(n);return i.w_(),new FC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:QC.bind(null,t),mo:JC.bind(null,t),f_:YC.bind(null,t),g_:XC.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Su(t)):(await t.U_.stop(),t.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new ap(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lp(t,e){if(zr("AsyncQueue",`${e}: ${t}`),Ga(t))return new le(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=Wo(),this.sortedSet=new lt(this.comparator)}static emptySet(e){return new Bi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(){this.W_=new lt(fe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ge():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class so{constructor(e,n,r,s,i,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new so(e,n,Bi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class t1{constructor(){this.queries=sv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=_e(n),i=s.queries;s.queries=sv(),i.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new le(Y.ABORTED,"Firestore shutting down"))}}function sv(){return new po(t=>O0(t),vu)}async function cp(t,e){const n=_e(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new e1,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=lp(o,`Initialization of query '${_i(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&dp(n)}async function up(t,e){const n=_e(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function n1(t,e){const n=_e(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&dp(n)}function r1(t,e,n){const r=_e(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function dp(t){t.Y_.forEach(e=>{e.next()})}var bh,iv;(iv=bh||(bh={})).ea="default",iv.Cache="cache";class hp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new so(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=so.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.key=e}}class pw{constructor(e){this.key=e}}class s1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ce(),this.mutatedKeys=Ce(),this.Aa=b0(e),this.Ra=new Bi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new rv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const y=s.get(p),E=yu(this.query,m)?m:null,N=!!y&&this.mutatedKeys.has(y.key),b=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let $=!1;y&&E?y.data.isEqual(E.data)?N!==b&&(r.track({type:3,doc:E}),$=!0):this.ga(y,E)||(r.track({type:2,doc:E}),$=!0,(u&&this.Aa(E,u)>0||h&&this.Aa(E,h)<0)&&(c=!0)):!y&&E?(r.track({type:0,doc:E}),$=!0):y&&!E&&(r.track({type:1,doc:y}),$=!0,(u||h)&&(c=!0)),$&&(E?(o=o.add(E),i=b?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(E,N){const b=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return b(E)-b(N)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new so(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new pw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new fw(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return so.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class i1{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class o1{constructor(e){this.key=e,this.va=!1}}class a1{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new po(c=>O0(c),vu),this.Ma=new Map,this.xa=new Set,this.Oa=new lt(fe.comparator),this.Na=new Map,this.La=new ep,this.Ba={},this.ka=new Map,this.qa=ro.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function l1(t,e,n=!0){const r=ww(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await mw(r,e,n,!0),s}async function c1(t,e){const n=ww(t);await mw(n,e,!0,!1)}async function mw(t,e,n,r){const s=await RC(t.localStore,_r(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await u1(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&aw(t.remoteStore,s),c}async function u1(t,e,n,r,s){t.Ka=(m,y,E)=>async function(b,$,C,S){let x=$.view.ma(C);x.ns&&(x=await Zg(b.localStore,$.query,!1).then(({documents:g})=>$.view.ma(g,x)));const R=S&&S.targetChanges.get($.targetId),j=S&&S.targetMismatches.get($.targetId)!=null,B=$.view.applyChanges(x,b.isPrimaryClient,R,j);return av(b,$.targetId,B.wa),B.snapshot}(t,m,y,E);const i=await Zg(t.localStore,e,!0),o=new s1(e,i.Ts),c=o.ma(i.documents),u=Xa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(c,t.isPrimaryClient,u);av(t,n,h.wa);const p=new i1(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function d1(t,e,n){const r=_e(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!vu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Oh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&rp(r.remoteStore,s.targetId),Vh(r,s.targetId)}).catch(Ka)):(Vh(r,s.targetId),await Oh(r.localStore,s.targetId,!0))}async function h1(t,e){const n=_e(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rp(n.remoteStore,r.targetId))}async function f1(t,e,n){const r=w1(t);try{const s=await function(o,c){const u=_e(o),h=Rt.now(),p=c.reduce((E,N)=>E.add(N.key),Ce());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let N=$r(),b=Ce();return u.cs.getEntries(E,p).next($=>{N=$,N.forEach((C,S)=>{S.isValidDocument()||(b=b.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,N)).next($=>{m=$;const C=[];for(const S of c){const x=OA(S,m.get(S.key).overlayedDocument);x!=null&&C.push(new Ds(S.key,x,C0(x.value.mapValue),Hn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,h,C,c)}).next($=>{y=$;const C=$.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(E,$.batchId,C)})}).then(()=>({batchId:y.batchId,changes:L0(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new lt(Oe)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Za(r,s.changes),await Su(r.remoteStore)}catch(s){const i=lp(s,"Failed to persist write");n.reject(i)}}async function gw(t,e){const n=_e(t);try{const r=await PC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ue(o.va):s.removedDocuments.size>0&&(Ue(o.va),o.va=!1))}),await Za(n,r,e)}catch(r){await Ka(r)}}function ov(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=_e(o);u.onlineState=c;let h=!1;u.queries.forEach((p,m)=>{for(const y of m.j_)y.Z_(c)&&(h=!0)}),h&&dp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function p1(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new lt(fe.comparator);o=o.insert(i,nn.newNoDocument(i,ye.min()));const c=Ce().add(i),u=new Eu(ye.min(),new Map,new lt(Oe),o,c);await gw(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),fp(r)}else await Oh(r.localStore,e,!1).then(()=>Vh(r,e,n)).catch(Ka)}async function m1(t,e){const n=_e(t),r=e.batch.batchId;try{const s=await CC(n.localStore,e);yw(n,r,null),vw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Za(n,s)}catch(s){await Ka(s)}}async function g1(t,e,n){const r=_e(t);try{const s=await function(o,c){const u=_e(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next(m=>(Ue(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);yw(r,e,n),vw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Za(r,s)}catch(s){await Ka(s)}}function vw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function yw(t,e,n){const r=_e(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Vh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||_w(t,r)})}function _w(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(rp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),fp(t))}function av(t,e,n){for(const r of n)r instanceof fw?(t.La.addReference(r.key,e),v1(t,r)):r instanceof pw?(he("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||_w(t,r.key)):ge()}function v1(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(he("SyncEngine","New document in limbo: "+n),t.xa.add(r),fp(t))}function fp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new fe(Ze.fromString(e)),r=t.qa.next();t.Na.set(r,new o1(n)),t.Oa=t.Oa.insert(n,r),aw(t.remoteStore,new us(_r(gu(n.path)),r,"TargetPurposeLimboResolution",$f.oe))}}async function Za(t,e,n){const r=_e(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=np.Wi(u.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const p=_e(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>ee.forEach(h,y=>ee.forEach(y.$i,E=>p.persistence.referenceDelegate.addReference(m,y.targetId,E)).next(()=>ee.forEach(y.Ui,E=>p.persistence.referenceDelegate.removeReference(m,y.targetId,E)))))}catch(m){if(!Ga(m))throw m;he("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const E=p.os.get(y),N=E.snapshotVersion,b=E.withLastLimboFreeSnapshotVersion(N);p.os=p.os.insert(y,b)}}}(r.localStore,i))}async function y1(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=await rw(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new le(Y.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Za(n,r.hs)}}function _1(t,e){const n=_e(t),r=n.Na.get(e);if(r&&r.va)return Ce().add(r.key);{let s=Ce();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function ww(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p1.bind(null,e),e.Ca.d_=n1.bind(null,e.eventManager),e.Ca.$a=r1.bind(null,e.eventManager),e}function w1(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g1.bind(null,e),e}class Va{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return AC(this.persistence,new SC,e.initialUser,this.serializer)}Ga(e){return new EC(tp.Zr,this.serializer)}Wa(e){return new DC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Va.provider={build:()=>new Va};class zc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ov(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=y1.bind(null,this.syncEngine),await ZC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new t1}()}createDatastore(e){const n=Tu(e.databaseInfo.databaseId),r=function(i){return new VC(i)}(e.databaseInfo);return function(i,o,c,u){return new UC(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new zC(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>ov(this.syncEngine,n,0),function(){return tv.D()?new tv:new MC}())}createSyncEngine(e,n){return function(s,i,o,c,u,h,p){const m=new a1(s,i,o,c,u,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=_e(s);he("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ja(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}zc.provider={build:()=>new zc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=vn.UNAUTHENTICATED,this.clientId=S0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{he("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(he("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=lp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sd(t,e){t.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await rw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function lv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await T1(t);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>nv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>nv(e.remoteStore,s)),t._onlineComponents=e}async function T1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Na("Error using user provided cache. Falling back to memory cache: "+n),await Sd(t,new Va)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await Sd(t,new Va);return t._offlineComponents}async function Ew(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await lv(t,t._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await lv(t,new zc))),t._onlineComponents}function I1(t){return Ew(t).then(e=>e.syncEngine)}async function $c(t){const e=await Ew(t),n=e.eventManager;return n.onListen=l1.bind(null,e.syncEngine),n.onUnlisten=d1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=c1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=h1.bind(null,e.syncEngine),n}function S1(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,h){const p=new pp({next:y=>{p.Za(),o.enqueueAndForget(()=>up(i,m));const E=y.docs.has(c);!E&&y.fromCache?h.reject(new le(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&y.fromCache&&u&&u.source==="server"?h.reject(new le(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new hp(gu(c.path),p,{includeMetadataChanges:!0,_a:!0});return cp(i,m)}(await $c(t),t.asyncQueue,e,n,r)),r.promise}function x1(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,h){const p=new pp({next:y=>{p.Za(),o.enqueueAndForget(()=>up(i,m)),y.fromCache&&u.source==="server"?h.reject(new le(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new hp(c,p,{includeMetadataChanges:!0,_a:!0});return cp(i,m)}(await $c(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t,e,n){if(!n)throw new le(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function A1(t,e,n,r){if(e===!0&&r===!0)throw new le(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uv(t){if(!fe.isDocumentKey(t))throw new le(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dv(t){if(fe.isDocumentKey(t))throw new le(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge()}function Mn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xu(t);throw new le(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qx;switch(r.type){case"firstParty":return new Kx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cv.get(n);r&&(he("ComponentProvider","Removing Datastore"),cv.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new di(this.firestore,e,this._query)}}class rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}}class Is extends di{constructor(e,n,r){super(e,n,gu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new fe(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function Dt(t,e,...n){if(t=rt(t),Iw("collection","path",e),t instanceof mp){const r=Ze.fromString(e,...n);return dv(r),new Is(t,null,r)}{if(!(t instanceof rn||t instanceof Is))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ze.fromString(e,...n));return dv(r),new Is(t.firestore,null,r)}}function vt(t,e,...n){if(t=rt(t),arguments.length===1&&(e=S0.newId()),Iw("doc","path",e),t instanceof mp){const r=Ze.fromString(e,...n);return uv(r),new rn(t,null,new fe(r))}{if(!(t instanceof rn||t instanceof Is))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ze.fromString(e,...n));return uv(r),new rn(t.firestore,t instanceof Is?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new iw(this,"async_queue_retry"),this.Vu=()=>{const r=Id();r&&he("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Id();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Id();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Or;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ga(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw zr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=ap.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ge()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function pv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class qr extends mp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new fv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fv(e),this._firestoreClient=void 0,await e}}}function C1(t,e,n){n||(n="(default)");const r=pu(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Ca(i,e))return s;throw new le(Y.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new le(Y.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Au(t){if(t._terminated)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||P1(t),t._firestoreClient}function P1(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,h,p){return new oA(c,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Tw(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new E1(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this._byteString=e}static fromBase64String(e){try{return new io(Wt.fromBase64String(e))}catch(n){throw new le(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new io(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=/^__.*__$/;class k1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ya(e,this.data,n,this.fieldTransforms)}}class Sw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class yp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new yp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return qc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xw(this.Cu)&&N1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class R1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tu(e)}Qu(e,n,r,s=!1){return new yp({Cu:e,methodName:n,qu:r,path:zt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nu(t){const e=t._freezeSettings(),n=Tu(t._databaseId);return new R1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Aw(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);wp("Data must be an object, but it was:",o,r);const c=Cw(r,o);let u,h;if(i.merge)u=new jn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=Lh(e,m,n);if(!o.contains(y))throw new le(Y.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Nw(p,y)||p.push(y)}u=new jn(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new k1(new _n(c),u,h)}class ku extends Pu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ku}}class _p extends Pu{_toFieldTransform(e){return new RA(e.path,new Ma)}isEqual(e){return e instanceof _p}}function j1(t,e,n,r){const s=t.Qu(1,e,n);wp("Data must be an object, but it was:",s,r);const i=[],o=_n.empty();ci(r,(u,h)=>{const p=Ep(e,u,n);h=rt(h);const m=s.Nu(p);if(h instanceof ku)i.push(p);else{const y=el(h,m);y!=null&&(i.push(p),o.set(p,y))}});const c=new jn(i);return new Sw(o,c,s.fieldTransforms)}function D1(t,e,n,r,s,i){const o=t.Qu(1,e,n),c=[Lh(e,r,n)],u=[s];if(i.length%2!=0)throw new le(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)c.push(Lh(e,i[y])),u.push(i[y+1]);const h=[],p=_n.empty();for(let y=c.length-1;y>=0;--y)if(!Nw(h,c[y])){const E=c[y];let N=u[y];N=rt(N);const b=o.Nu(E);if(N instanceof ku)h.push(E);else{const $=el(N,b);$!=null&&(h.push(E),p.set(E,$))}}const m=new jn(h);return new Sw(p,m,o.fieldTransforms)}function M1(t,e,n,r=!1){return el(n,t.Qu(r?4:3,e))}function el(t,e){if(Pw(t=rt(t)))return wp("Unsupported field value:",e,t),Cw(t,e);if(t instanceof Pu)return function(r,s){if(!xw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=el(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Rt.fromDate(r);return{timestampValue:Uc(s.serializer,i)}}if(r instanceof Rt){const i=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uc(s.serializer,i)}}if(r instanceof gp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof io)return{bytesValue:Y0(s.serializer,r._byteString)};if(r instanceof rn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vp)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Qf(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${xu(r)}`)}(t,e)}function Cw(t,e){const n={};return x0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(t,(r,s)=>{const i=el(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Pw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rt||t instanceof gp||t instanceof io||t instanceof rn||t instanceof Pu||t instanceof vp)}function wp(t,e,n){if(!Pw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=xu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Lh(t,e,n){if((e=rt(e))instanceof Cu)return e._internalPath;if(typeof e=="string")return Ep(t,e);throw qc("Field path arguments must be of type string or ",t,!1,void 0,n)}const O1=new RegExp("[~\\*/\\[\\]]");function Ep(t,e,n){if(e.search(O1)>=0)throw qc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cu(...e.split("."))._internalPath}catch{throw qc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new le(Y.INVALID_ARGUMENT,c+t+u)}function Nw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class b1 extends kw{data(){return super.data()}}function Tp(t,e){return typeof e=="string"?Ep(t,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class V1 extends Ip{}function Vo(t,e,...n){let r=[];e instanceof Ip&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Sp).length,c=i.filter(u=>u instanceof Ru).length;if(o>1||o>0&&c>0)throw new le(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ru extends V1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ru(e,n,r)}_apply(e){const n=this._parse(e);return jw(e._query,n),new di(e.firestore,e.converter,Nh(e._query,n))}_parse(e){const n=Nu(e.firestore);return function(i,o,c,u,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new le(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){gv(m,p);const E=[];for(const N of m)E.push(mv(u,i,N));y={arrayValue:{values:E}}}else y=mv(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||gv(m,p),y=M1(c,o,m,p==="in"||p==="not-in");return It.create(h,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Lo(t,e,n){const r=e,s=Tp("where",t);return Ru._create(s,r,n)}class Sp extends Ip{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)jw(o,u),o=Nh(o,u)}(e._query,n),new di(e.firestore,e.converter,Nh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function mv(t,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new le(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M0(e)&&n.indexOf("/")!==-1)throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ze.fromString(n));if(!fe.isDocumentKey(r))throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bg(t,new fe(r))}if(n instanceof rn)return bg(t,n._key);throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xu(n)}.`)}function gv(t,e){if(!Array.isArray(t)||t.length===0)throw new le(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jw(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class L1{convertValue(e,n="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ci(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>yt(o.doubleValue));return new vp(i)}convertGeoPoint(e){return new gp(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ra(e));default:return null}}convertTimestamp(e){const n=Ps(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ze.fromString(e);Ue(nw(r));const s=new ja(r.get(1),r.get(3)),i=new fe(r.popFirst(5));return s.isEqual(n)||zr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mw extends kw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class oc extends Mw{data(e={}){return super.data(e)}}class Ow{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Go(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new oc(this._firestore,this._userDataWriter,r.key,r,new Go(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new oc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Go(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new oc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Go(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:F1(c.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function F1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t){t=Mn(t,rn);const e=Mn(t.firestore,qr);return S1(Au(e),t._key).then(n=>bw(e,t,n))}class xp extends L1{constructor(e){super(),this.firestore=e}convertBytes(e){return new io(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function Ls(t){t=Mn(t,di);const e=Mn(t.firestore,qr),n=Au(e),r=new xp(e);return Rw(t._query),x1(n,t._query).then(s=>new Ow(e,r,t,s))}function la(t,e,n){t=Mn(t,rn);const r=Mn(t.firestore,qr),s=Dw(t.converter,e,n);return ju(r,[Aw(Nu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Hn.none())])}function ds(t,e,n,...r){t=Mn(t,rn);const s=Mn(t.firestore,qr),i=Nu(s);let o;return o=typeof(e=rt(e))=="string"||e instanceof Cu?D1(i,"updateDoc",t._key,e,n,r):j1(i,"updateDoc",t._key,e),ju(s,[o.toMutation(t._key,Hn.exists(!0))])}function zi(t){return ju(Mn(t.firestore,qr),[new Yf(t._key,Hn.none())])}function Bl(t,e){const n=Mn(t.firestore,qr),r=vt(t),s=Dw(t.converter,e);return ju(n,[Aw(Nu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Hn.exists(!1))]).then(()=>r)}function zs(t,...e){var n,r,s;t=rt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||pv(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(pv(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,h,p;if(t instanceof rn)h=Mn(t.firestore,qr),p=gu(t._key.path),u={next:m=>{e[o]&&e[o](bw(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Mn(t,di);h=Mn(m.firestore,qr),p=m._query;const y=new xp(h);u={next:E=>{e[o]&&e[o](new Ow(h,y,m,E))},error:e[o+1],complete:e[o+2]},Rw(t._query)}return function(y,E,N,b){const $=new pp(b),C=new hp(E,$,N);return y.asyncQueue.enqueueAndForget(async()=>cp(await $c(y),C)),()=>{$.Za(),y.asyncQueue.enqueueAndForget(async()=>up(await $c(y),C))}}(Au(h),p,c,u)}function ju(t,e){return function(r,s){const i=new Or;return r.asyncQueue.enqueueAndForget(async()=>f1(await I1(r),s,i)),i.promise}(Au(t),e)}function bw(t,e,n){const r=n.docs.get(e._key),s=new xp(t);return new Mw(t,s,e._key,r,new Go(n.hasPendingWrites,n.fromCache),e.converter)}class B1{constructor(e){this.kind="memory",this._onlineComponentProvider=zc.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Va.provider}toJSON(){return{kind:this.kind}}}function z1(t){return new B1(t)}function vv(){return new _p("serverTimestamp")}(function(e,n=!0){(function(s){fo=s})(ho),ti(new As("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new qr(new Hx(r.getProvider("auth-internal")),new Qx(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new le(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ja(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),yr(Rg,"4.7.3",e),yr(Rg,"4.7.3","esm2017")})();function Ap(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $1=Vw,Lw=new Ha("auth","Firebase",Vw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Uf("@firebase/auth");function q1(t,...e){Hc.logLevel<=Pe.WARN&&Hc.warn(`Auth (${ho}): ${t}`,...e)}function ac(t,...e){Hc.logLevel<=Pe.ERROR&&Hc.error(`Auth (${ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,...e){throw Cp(t,...e)}function Er(t,...e){return Cp(t,...e)}function Fw(t,e,n){const r=Object.assign(Object.assign({},$1()),{[e]:n});return new Ha("auth","Firebase",r).create(e,{appName:t.name})}function br(t){return Fw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Lw.create(t,...e)}function me(t,e,...n){if(!t)throw Cp(e,...n)}function Rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ac(e),new Error(e)}function Hr(t,e){t||Rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function H1(){return yv()==="http:"||yv()==="https:"}function yv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(H1()||ES()||"connection"in navigator)?navigator.onLine:!0}function K1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hr(n>e,"Short delay should be less than long delay!"),this.isMobile=yS()||TS()}get(){return W1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t,e){Hr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new tl(3e4,6e4);function Ms(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Os(t,e,n,r,s={}){return Bw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Wa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return wS()||(h.referrerPolicy="no-referrer"),Uw.fetch()(zw(t,t.config.apiHost,n,c),h)})}async function Bw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},G1),e);try{const s=new X1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw zl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw zl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw zl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw zl(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Fw(t,p,h);ur(t,p)}}catch(s){if(s instanceof Sr)throw s;ur(t,"network-request-failed",{message:String(s)})}}async function nl(t,e,n,r,s={}){const i=await Os(t,e,n,r,s);return"mfaPendingCredential"in i&&ur(t,"multi-factor-auth-required",{_serverResponse:i}),i}function zw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Pp(t.config,s):`${t.config.apiScheme}://${s}`}function Y1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class X1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Er(this.auth,"network-request-failed")),Q1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Er(t,e,r);return s.customData._tokenResponse=n,s}function _v(t){return t!==void 0&&t.enterprise!==void 0}class J1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Y1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Z1(t,e){return Os(t,"GET","/v2/recaptchaConfig",Ms(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eP(t,e){return Os(t,"POST","/v1/accounts:delete",e)}async function $w(t,e){return Os(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tP(t,e=!1){const n=rt(t),r=await n.getIdToken(e),s=Np(r);me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ca(xd(s.auth_time)),issuedAtTime:ca(xd(s.iat)),expirationTime:ca(xd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function xd(t){return Number(t)*1e3}function Np(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ac("JWT malformed, contained fewer than 3 sections"),null;try{const s=l0(n);return s?JSON.parse(s):(ac("Failed to decode base64 JWT payload"),null)}catch(s){return ac("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function wv(t){const e=Np(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sr&&nP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ca(this.lastLoginAt),this.creationTime=ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await La(t,$w(n,{idToken:r}));me(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?qw(i.providerUserInfo):[],c=iP(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=u?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Uh(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function sP(t){const e=rt(t);await Wc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iP(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function qw(t){return t.map(e=>{var{providerId:n}=e,r=Ap(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(t,e){const n=await Bw(t,{},async()=>{const r=Wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=zw(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Uw.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aP(t,e){return Os(t,"POST","/v2/accounts:revokeToken",Ms(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=wv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await oP(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new $i;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(me(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $i,this.toJSON())}_performRefresh(){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ap(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Uh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await La(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tP(this,e)}reload(){return sP(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mr(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await La(this,eP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,E=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(c=n.tenantId)!==null&&c!==void 0?c:void 0,$=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,C=(h=n.createdAt)!==null&&h!==void 0?h:void 0,S=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:x,emailVerified:R,isAnonymous:j,providerData:B,stsTokenManager:g}=n;me(x&&g,e,"internal-error");const v=$i.fromJSON(this.name,g);me(typeof x=="string",e,"internal-error"),Zr(m,e.name),Zr(y,e.name),me(typeof R=="boolean",e,"internal-error"),me(typeof j=="boolean",e,"internal-error"),Zr(E,e.name),Zr(N,e.name),Zr(b,e.name),Zr($,e.name),Zr(C,e.name),Zr(S,e.name);const I=new jr({uid:x,auth:e,email:y,emailVerified:R,displayName:m,isAnonymous:j,photoURL:N,phoneNumber:E,tenantId:b,stsTokenManager:v,createdAt:C,lastLoginAt:S});return B&&Array.isArray(B)&&(I.providerData=B.map(w=>Object.assign({},w))),$&&(I._redirectEventId=$),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new $i;s.updateFromServerResponse(n);const i=new jr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];me(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?qw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new $i;c.updateFromIdToken(r);const u=new jr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Uh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=new Map;function Dr(t){Hr(t instanceof Function,"Expected a class definition");let e=Ev.get(t);return e?(Hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ev.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Hw.type="NONE";const Tv=Hw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t,e,n){return`firebase:${t}:${e}:${n}`}class qi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=lc(this.userKey,s.apiKey,i),this.fullPersistenceKey=lc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qi(Dr(Tv),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Dr(Tv);const o=lc(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const p=await h._get(o);if(p){const m=jr._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new qi(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new qi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ww(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xw(e))return"Blackberry";if(Jw(e))return"Webos";if(Kw(e))return"Safari";if((e.includes("chrome/")||Gw(e))&&!e.includes("edge/"))return"Chrome";if(Yw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ww(t=on()){return/firefox\//i.test(t)}function Kw(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gw(t=on()){return/crios\//i.test(t)}function Qw(t=on()){return/iemobile/i.test(t)}function Yw(t=on()){return/android/i.test(t)}function Xw(t=on()){return/blackberry/i.test(t)}function Jw(t=on()){return/webos/i.test(t)}function kp(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lP(t=on()){var e;return kp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cP(){return IS()&&document.documentMode===10}function Zw(t=on()){return kp(t)||Yw(t)||Jw(t)||Xw(t)||/windows phone/i.test(t)||Qw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e=[]){let n;switch(t){case"Browser":n=Iv(on());break;case"Worker":n=`${Iv(on())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ho}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(t,e={}){return Os(t,"GET","/v2/passwordPolicy",Ms(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=6;class fP{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:hP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sv(this),this.idTokenSubscription=new Sv(this),this.beforeStateQueue=new uP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await qi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $w(this,{idToken:e}),r=await jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mr(this.app))return Promise.reject(br(this));const n=e?rt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mr(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mr(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dP(this),n=new fP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ha("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await aP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dr(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await qi.create(this,[Dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&q1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hi(t){return rt(t)}class Sv{constructor(e){this.auth=e,this.observer=null,this.addObserver=RS(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mP(t){Du=t}function tE(t){return Du.loadJS(t)}function gP(){return Du.recaptchaEnterpriseScript}function vP(){return Du.gapiScript}function yP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const _P="recaptcha-enterprise",wP="NO_RECAPTCHA";class EP{constructor(e){this.type=_P,this.auth=hi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{Z1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new J1(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;_v(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(wP)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&_v(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=gP();u.length!==0&&(u+=c),tE(u).then(()=>{s(c,i,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function xv(t,e,n,r=!1){const s=new EP(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Bh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await xv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await xv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t,e){const n=pu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ca(i,e??{}))return s;ur(s,"already-initialized")}return n.initialize({options:e})}function IP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SP(t,e,n){const r=hi(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=nE(e),{host:o,port:c}=xP(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),AP()}function nE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xP(t){const e=nE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Av(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Av(o)}}}function Av(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function AP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,n){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}async function CP(t,e){return Os(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(t,e){return nl(t,"POST","/v1/accounts:signInWithPassword",Ms(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(t,e){return nl(t,"POST","/v1/accounts:signInWithEmailLink",Ms(t,e))}async function kP(t,e){return nl(t,"POST","/v1/accounts:signInWithEmailLink",Ms(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends Rp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Fa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Fa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bh(e,n,"signInWithPassword",PP);case"emailLink":return NP(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bh(e,r,"signUpPassword",CP);case"emailLink":return kP(e,{idToken:n,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(t,e){return nl(t,"POST","/v1/accounts:signInWithIdp",Ms(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="http://localhost";class ii extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ap(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ii(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Hi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hi(e,n)}buildRequest(){const e={requestUri:RP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DP(t){const e=$o(qo(t)).link,n=e?$o(qo(e)).deep_link_id:null,r=$o(qo(t)).deep_link_id;return(r?$o(qo(r)).link:null)||r||n||e||t}class jp{constructor(e){var n,r,s,i,o,c;const u=$o(qo(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,m=jP((s=u.mode)!==null&&s!==void 0?s:null);me(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=DP(e);try{return new jp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.providerId=go.PROVIDER_ID}static credential(e,n){return Fa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jp.parseLink(n);return me(r,"argument-error"),Fa._fromEmailAndCode(e,r.code,r.tenantId)}}go.PROVIDER_ID="password";go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends rE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends rl{constructor(){super("facebook.com")}static credential(e){return ii._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ii._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return is.credential(n,r)}catch{return null}}}is.GOOGLE_SIGN_IN_METHOD="google.com";is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends rl{constructor(){super("github.com")}static credential(e){return ii._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.GITHUB_SIGN_IN_METHOD="github.com";os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends rl{constructor(){super("twitter.com")}static credential(e,n){return ii._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return as.credential(n,r)}catch{return null}}}as.TWITTER_SIGN_IN_METHOD="twitter.com";as.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP(t,e){return nl(t,"POST","/v1/accounts:signUp",Ms(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await jr._fromIdTokenResponse(e,r,s),o=Cv(r);return new oi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Cv(r);return new oi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Cv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends Sr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Kc(e,n,r,s)}}function sE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(t,i,e,r):i})}async function OP(t,e,n=!1){const r=await La(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bP(t,e,n=!1){const{auth:r}=t;if(mr(r.app))return Promise.reject(br(r));const s="reauthenticate";try{const i=await La(t,sE(r,s,e,t),n);me(i.idToken,r,"internal-error");const o=Np(i.idToken);me(o,r,"internal-error");const{sub:c}=o;return me(t.uid===c,r,"user-mismatch"),oi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ur(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iE(t,e,n=!1){if(mr(t.app))return Promise.reject(br(t));const r="signIn",s=await sE(t,r,e),i=await oi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function VP(t,e){return iE(hi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(t){const e=hi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Pv(t,e,n){if(mr(t.app))return Promise.reject(br(t));const r=hi(t),o=await Bh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&oE(t),u}),c=await oi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function $l(t,e,n){return mr(t.app)?Promise.reject(br(t)):VP(rt(t),go.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t,e){return rt(t).setPersistence(e)}function FP(t,e,n,r){return rt(t).onIdTokenChanged(e,n,r)}function UP(t,e,n){return rt(t).beforeAuthStateChanged(e,n)}function BP(t,e,n,r){return rt(t).onAuthStateChanged(e,n,r)}function zP(t){return rt(t).signOut()}const Gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=1e3,qP=10;class lE extends aE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);cP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},$P)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lE.type="LOCAL";const cE=lE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends aE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uE.type="SESSION";const dE=uE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Mu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async h=>h(n.origin,i)),u=await HP(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const h=Dp("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(y.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return window}function KP(t){Tr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function GP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YP(){return hE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="firebaseLocalStorageDb",XP=1,Qc="firebaseLocalStorage",pE="fbase_key";class sl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ou(t,e){return t.transaction([Qc],e?"readwrite":"readonly").objectStore(Qc)}function JP(){const t=indexedDB.deleteDatabase(fE);return new sl(t).toPromise()}function zh(){const t=indexedDB.open(fE,XP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qc,{keyPath:pE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qc)?e(r):(r.close(),await JP(),e(await zh()))})})}async function Nv(t,e,n){const r=Ou(t,!0).put({[pE]:e,value:n});return new sl(r).toPromise()}async function ZP(t,e){const n=Ou(t,!1).get(e),r=await new sl(n).toPromise();return r===void 0?null:r.value}function kv(t,e){const n=Ou(t,!0).delete(e);return new sl(n).toPromise()}const eN=800,tN=3;class mE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>tN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mu._getInstance(YP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await GP(),!this.activeServiceWorker)return;this.sender=new WP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zh();return await Nv(e,Gc,"1"),await kv(e,Gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Nv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ou(s,!1).getAll();return new sl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mE.type="LOCAL";const nN=mE;new tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t,e){return e?Dr(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sN(t){return iE(t.auth,new Mp(t),t.bypassAuthState)}function iN(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),bP(n,new Mp(t),t.bypassAuthState)}async function oN(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),OP(n,new Mp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sN;case"linkViaPopup":case"linkViaRedirect":return oN;case"reauthViaPopup":case"reauthViaRedirect":return iN;default:ur(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new tl(2e3,1e4);class Mi extends gE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Mi.currentPopupAction&&Mi.currentPopupAction.cancel(),Mi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=Dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aN.get())};e()}}Mi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="pendingRedirect",cc=new Map;class cN extends gE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cc.get(this.auth._key());if(!e){try{const r=await uN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cc.set(this.auth._key(),e)}return this.bypassAuthState||cc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uN(t,e){const n=fN(e),r=hN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function dN(t,e){cc.set(t._key(),e)}function hN(t){return Dr(t._redirectPersistence)}function fN(t){return lc(lN,t.config.apiKey,t.name)}async function pN(t,e,n=!1){if(mr(t.app))return Promise.reject(br(t));const r=hi(t),s=rN(r,e),o=await new cN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=10*60*1e3;class gN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Er(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rv(e))}saveEventToCache(e){this.cachedEventUids.add(Rv(e)),this.lastProcessedEventTime=Date.now()}}function Rv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t,e={}){return Os(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wN=/^https?/;async function EN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yN(t);for(const n of e)try{if(TN(n))return}catch{}ur(t,"unauthorized-domain")}function TN(t){const e=Fh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wN.test(n))return!1;if(_N.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=new tl(3e4,6e4);function jv(){const t=Tr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SN(t){return new Promise((e,n)=>{var r,s,i;function o(){jv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jv(),n(Er(t,"network-request-failed"))},timeout:IN.get()})}if(!((s=(r=Tr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Tr().gapi)===null||i===void 0)&&i.load)o();else{const c=yP("iframefcb");return Tr()[c]=()=>{gapi.load?o():n(Er(t,"network-request-failed"))},tE(`${vP()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw uc=null,e})}let uc=null;function xN(t){return uc=uc||SN(t),uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new tl(5e3,15e3),CN="__/auth/iframe",PN="emulator/auth/iframe",NN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RN(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pp(e,PN):`https://${t.config.authDomain}/${CN}`,r={apiKey:e.apiKey,appName:t.name,v:ho},s=kN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Wa(r).slice(1)}`}async function jN(t){const e=await xN(t),n=Tr().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:RN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Er(t,"network-request-failed"),c=Tr().setTimeout(()=>{i(o)},AN.get());function u(){Tr().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MN=500,ON=600,bN="_blank",VN="http://localhost";class Dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LN(t,e,n,r=MN,s=ON){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},DN),{width:r.toString(),height:s.toString(),top:i,left:o}),h=on().toLowerCase();n&&(c=Gw(h)?bN:n),Ww(h)&&(e=e||VN,u.scrollbars="yes");const p=Object.entries(u).reduce((y,[E,N])=>`${y}${E}=${N},`,"");if(lP(h)&&c!=="_self")return FN(e||"",c),new Dv(null);const m=window.open(e||"",c,p);me(m,t,"popup-blocked");try{m.focus()}catch{}return new Dv(m)}function FN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="__/auth/handler",BN="emulator/auth/handler",zN=encodeURIComponent("fac");async function Mv(t,e,n,r,s,i){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ho,eventId:s};if(e instanceof rE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof rl){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),h=u?`#${zN}=${encodeURIComponent(u)}`:"";return`${$N(t)}?${Wa(c).slice(1)}${h}`}function $N({config:t}){return t.emulator?Pp(t,BN):`https://${t.authDomain}/${UN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="webStorageSupport";class qN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dE,this._completeRedirectFn=pN,this._overrideRedirectResult=dN}async _openPopup(e,n,r,s){var i;Hr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Mv(e,n,r,Fh(),s);return LN(e,o,Dp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Mv(e,n,r,Fh(),s);return KP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Hr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await jN(e),r=new gN(e);return n.register("authEvent",s=>(me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ad,{type:Ad},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ad];o!==void 0&&n(!!o),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Zw()||Kw()||kp()}}const HN=qN;var Ov="@firebase/auth",bv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GN(t){ti(new As("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eE(t)},h=new pP(r,s,i,u);return IP(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ti(new As("auth-internal",e=>{const n=hi(e.getProvider("auth").getImmediate());return(r=>new WN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(Ov,bv,KN(t)),yr(Ov,bv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=5*60,YN=d0("authIdTokenMaxAge")||QN;let Vv=null;const XN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YN)return;const s=n==null?void 0:n.token;Vv!==s&&(Vv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function JN(t=m0()){const e=pu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=TP(t,{popupRedirectResolver:HN,persistence:[nN,cE,dE]}),r=d0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=XN(i.toString());UP(n,o,()=>o(n.currentUser)),FP(n,c=>o(c))}}const s=c0("auth");return s&&SP(n,`http://${s}`),n}function ZN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Er("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",ZN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GN("Browser");const ek={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"};let oo=null;try{oo=p0(ek)}catch{}const ae=oo?C1(oo,{localCache:z1(),experimentalForceLongPolling:!0,useFetchStreams:!1}):null,un=oo?JN(oo):null;if(un)try{LP(un,cE).catch(()=>{})}catch{}const Lv=oo;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="type.googleapis.com/google.protobuf.Int64Value",nk="type.googleapis.com/google.protobuf.UInt64Value";function yE(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function $h(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>$h(e));if(typeof t=="function"||typeof t=="object")return yE(t,e=>$h(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Yc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case tk:case nk:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Yc(e)):typeof t=="function"||typeof t=="object"?yE(t,e=>Yc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wi extends Sr{constructor(e,n,r){super(`${Op}/${e}`,n||""),this.details=r}}function rk(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function sk(t,e){let n=rk(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Fv[o])return new Wi("internal","internal");n=Fv[o],r=o}const c=i.message;typeof c=="string"&&(r=c),s=i.details,s!==void 0&&(s=Yc(s))}}catch{}return n==="ok"?null:new Wi(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="us-central1";function ok(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Wi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class ak{constructor(e,n,r,s,i=qh,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new ik(n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=qh}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function lk(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function ck(t,e,n){return r=>hk(t,e,r,{})}function uk(t,e,n){return r=>_E(t,e,r,{})}async function dk(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function hk(t,e,n,r){const s=t._url(e);return _E(t,s,n,r)}async function _E(t,e,n,r){n=$h(n);const s={data:n},i={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const c=r.timeout||7e4,u=ok(c),h=await Promise.race([dk(e,s,i,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!h)throw new Wi("cancelled","Firebase Functions instance was deleted.");const p=sk(h.status,h.json);if(p)throw p;if(!h.json)throw new Wi("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new Wi("internal","Response is missing data field.");return{data:Yc(m)}}const Uv="@firebase/functions",Bv="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="auth-internal",pk="app-check-internal",mk="messaging-internal";function gk(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),o=r.getProvider(fk),c=r.getProvider(mk),u=r.getProvider(pk);return new ak(i,o,c,u,s,t)};ti(new As(Op,n,"PUBLIC").setMultipleInstances(!0)),yr(Uv,Bv,e),yr(Uv,Bv,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t=m0(),e=qh){const r=pu(rt(t),Op).getImmediate({identifier:e}),s=gS("functions");return s&&yk(r,...s),r}function yk(t,e,n){lk(rt(t),e,n)}function zv(t,e,n){return ck(rt(t),e)}function _k(t,e,n){return uk(rt(t),e)}gk(fetch.bind(self));const wk={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://gerencimaneto-mkt-betaki.onrender.com",VITE_FIREBASE_API_KEY:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",VITE_FIREBASE_APP_ID:"1:992627837568:web:48019ba22070fd9af03465",VITE_FIREBASE_AUTH_DOMAIN:"mkt-betaki.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"992627837568",VITE_FIREBASE_PROJECT_ID:"mkt-betaki",VITE_FIREBASE_STORAGE_BUCKET:"mkt-betaki.firebasestorage.app"},ao=["Pendente","Em produo","Aguardando Feedback","Aprovada","Revisar","Concluida"],bp=["Instagram","Trfego Pago","CRM","Influencers","Site","Branding","Outros"],cn="demandas_v2",Ek=t=>t==="Aberta"?"Aberta":t==="Em Progresso"?"Em Progresso":t==="Concluda"?"Concluda":t,Vp=t=>Ek(t),wE=t=>{const e=(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")?"st-pending":e.includes("progresso")||e.includes("produo")?"st-progress":e.includes("feedback")?"st-feedback":e.includes("revisar")?"st-review":e.includes("aprov")?"st-approved":e.includes("conclu")?"st-concluded":e.includes("atras")?"st-late":""},Lp=t=>{const e=String(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")||t==="Aberta"||t==="Pendente"},Fp=t=>{const e=String(t||"").toLowerCase();return e.includes("produo")||e.includes("progresso")||t==="Em Progresso"||t==="Em produo"},hs=t=>{const e=String(t||"").toLowerCase();return e.includes("conclu")||e.includes("aprov")||t==="Concluda"||t==="Aprovada"},Tk=t=>{const e=String(t||"").match(/@([a-zA-Z0-9_]+)/g);return e?e.map(n=>n.slice(1)):[]},$v=t=>{if(t==null)return"";const e=Math.max(0,Math.round(t)),n=Math.floor(e/60),r=e%60;return n>0?`${n}h ${r}m`:`${r}m`},qv=(t,e)=>{const n=t.filter(j=>String(j.status||"").toLowerCase().includes("conclu")||j.status==="Concluda"),r=n.filter(j=>(j.designer||"")===(e.designer||"")),s=n.filter(j=>(j.tipoMidia||"")===(e.tipoMidia||"")),i=n.filter(j=>(j.origem||"")===(e.origem||"")),o=n.filter(j=>(j.plataforma||"")===(e.plataforma||"")),c=(j,B)=>{const g=w=>{const[P,k,A]=String(w||"").split("-").map(Number);return P?new Date(P,k-1,A):null},v=g(j),I=g(B);return!v||!I?null:Math.max(0,Math.round((I-v)/864e5))},u=(()=>{const j=n.map(g=>c(g.dataCriacao||g.dataSolicitacao,g.dataConclusao)).filter(g=>g!=null),B=j.reduce((g,v)=>g+v,0)/(j.length||1);return Math.max(1,Math.round(B))})(),h=(()=>{const j=r.map(g=>c(g.dataCriacao||g.dataSolicitacao,g.dataConclusao)).filter(g=>g!=null),B=j.reduce((g,v)=>g+v,0)/(j.length||1);return j.length?Math.max(1,Math.round(B)):null})(),p=(()=>{const j=s.map(g=>c(g.dataCriacao||g.dataSolicitacao,g.dataConclusao)).filter(g=>g!=null),B=j.reduce((g,v)=>g+v,0)/(j.length||1);return j.length?Math.max(1,Math.round(B)):null})(),m=(()=>{const j=i.map(g=>c(g.dataCriacao||g.dataSolicitacao,g.dataConclusao)).filter(g=>g!=null),B=j.reduce((g,v)=>g+v,0)/(j.length||1);return j.length?Math.max(1,Math.round(B)):null})(),y=(()=>{const j=o.map(g=>c(g.dataCriacao||g.dataSolicitacao,g.dataConclusao)).filter(g=>g!=null),B=j.reduce((g,v)=>g+v,0)/(j.length||1);return j.length?Math.max(1,Math.round(B)):null})(),E=(()=>{const j=r.map(g=>g.revisoes||0),B=j.reduce((g,v)=>g+v,0)/(j.length||1);return Math.round(B)})(),N=t.filter(j=>(j.designer||"")===(e.designer||"")&&!/conclu/i.test(String(j.status||""))).length,$=Math.min(100,Math.round(N/4*100)),C=h??p??y??m??u,S=($>=80?1:0)+(E>=2?1:0),x=Math.max(1,C+S),R=[];return R.push(`Estimativa: ${x} dia${x>1?"s":""} teis`),$>=80&&R.push("Alta probabilidade de atraso devido  carga acima de 80%"),x===1&&R.push("Pea deve ser concluda ainda hoje  Hoje at s 17h"),E>=2&&R.push("Revises esperadas acima da mdia para este designer"),R.join("  ")},EE={bg:"#070707",panel:"#0E0E0E",text:"#F2F2F2",muted:"#BDBDBD",border:"#ffffff1a",accent:"#BCD200",hover:"rgba(255,255,255,0.03)",btnBg:"#BCD200",btnText:"#111111",btnHoverBg:"#C7DB00",btnBorder:"#ffffff1a",shadow:"0 10px 30px rgba(0,0,0,.15)",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",chart:"#3b82f6"},pr=()=>{try{return new Intl.DateTimeFormat("en-CA",{timeZone:"America/Sao_Paulo",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date)}catch{const t=new Date,e=n=>String(n).padStart(2,"0");return`${t.getFullYear()}-${e(t.getMonth()+1)}-${e(t.getDate())}`}};function Ik({series:t,color:e="#BCD200"}){const s=Math.max(...t,1),i=t.length>1?120/(t.length-1):120,o=t.map((u,h)=>({x:h*i,y:30-u/s*30})),c=o.map(u=>`${u.x},${u.y}`).join(" ");return l.jsxs("svg",{width:120,height:30,className:"sparkline",viewBox:"0 0 120 30",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"sg",x1:"0",x2:"1",y1:"0",y2:"0",children:[l.jsx("stop",{offset:"0%",stopColor:e,stopOpacity:"0.6"}),l.jsx("stop",{offset:"100%",stopColor:e,stopOpacity:"1"})]})}),l.jsx("polyline",{points:c,fill:"none",stroke:"url(#sg)",strokeWidth:"2.5"}),o.map((u,h)=>l.jsx("circle",{cx:u.x,cy:u.y,r:"2.5",fill:e},h))]})}function Ae({name:t,size:e=18}){const n={width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};return t==="dashboard"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"})]}):t==="demandas"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M8 3h8"}),l.jsx("path",{d:"M8 7h8"}),l.jsx("rect",{x:"5",y:"3",width:"14",height:"18",rx:"2"})]}):t==="config"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.7 1.7 0 0 0 .3 1.8l.1.1-1.5 2.6-.1.1a1.8 1.8 0 0 0-2.2.8h-.2l-3-.4h-.2a1.8 1.8 0 0 0-1.6 0h-.2l-3 .4h-.2a1.8 1.8 0 0 0-2.2-.8l-.1-.1-1.5-2.6.1-.1a1.8 1.8 0 0 0 .3-1.8v-.2l-.4-3v-.2a1.8 1.8 0 0 0 0-1.6v-.2l.4-3v-.2a1.7 1.7 0 0 0-.3-1.8l-.1-.1L4.4 4l.1-.1a1.8 1.8 0 0 0 2.2-.8h.2l3 .4h.2a1.8 1.8 0 0 0 1.6 0h.2l3-.4h.2a1.8 1.8 0 0 0 2.2.8l.1.1 1.5 2.6-.1.1a1.8 1.8 0 0 0-.3 1.8v.2l.4 3v.2a1.8 1.8 0 0 0 0 1.6v.2Z"})]}):t==="cadastros"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M4 6h16"}),l.jsx("path",{d:"M4 12h10"}),l.jsx("path",{d:"M4 18h7"})]}):t==="relatorios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 20h18"}),l.jsx("rect",{x:"6",y:"14",width:"3",height:"6"}),l.jsx("rect",{x:"11",y:"10",width:"3",height:"10"}),l.jsx("rect",{x:"16",y:"6",width:"3",height:"14"})]}):t==="usuarios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"3"}),l.jsx("path",{d:"M19 8v6"}),l.jsx("path",{d:"M22 11h-6"})]}):t==="filter"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"11",cy:"11",r:"7"}),l.jsx("path",{d:"M20 20l-3.5-3.5"})]}):t==="table"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M3 10h18"}),l.jsx("path",{d:"M10 4v16"})]}):t==="board"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"10",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"17",y:"4",width:"4",height:"16",rx:"2"})]}):t==="calendar"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M16 3v4"}),l.jsx("path",{d:"M8 3v4"}),l.jsx("path",{d:"M3 11h18"})]}):t==="close"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M18 6L6 18"}),l.jsx("path",{d:"M6 6l12 12"})]}):t==="clock"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"9"}),l.jsx("path",{d:"M12 7v5l3 3"})]}):t==="paperclip"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21.44 11.05 12.5 20a5 5 0 1 1-7.07-7.07L14.36 4a3.5 3.5 0 0 1 4.95 4.95l-9.19 9.19"})}):t==="chat"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4Z"})}):t==="check"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M20 6 9 17l-5-5"})}):t==="plus"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"})]}):t==="dot"?l.jsx("svg",{...n,children:l.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor",stroke:"none"})}):t==="trash"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 6h18"}),l.jsx("path",{d:"M8 6V4h8v2"}),l.jsx("rect",{x:"5",y:"6",width:"14",height:"14",rx:"2"})]}):t==="logout"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("path",{d:"M16 17l5-5-5-5"}),l.jsx("path",{d:"M21 12H9"})]}):t==="link"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 1 0-7.07-7.07L10 4"}),l.jsx("path",{d:"M14 11a5 5 0 0 1-7.07 0L3.39 7.46a5 5 0 1 1 7.07-7.07L14 4"})]}):t==="tag"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M20 10V4H14L4 14l6 6 10-10Z"}),l.jsx("circle",{cx:"16.5",cy:"7.5",r:"1.5"})]}):t==="edit"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M4 13v4h4"}),l.jsx("path",{d:"M14.5 3.5l6 6"}),l.jsx("path",{d:"M12 6l6 6L9 21H4v-5z"})]}):t==="minus"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M5 12h14"})}):null}function Sk({onNew:t,view:e,setView:n,showNew:r,user:s,onLogout:i,mentions:o,onOpenDemanda:c}){const[u,h]=Q.useState(!1);return l.jsxs("div",{className:"topbar",children:[l.jsx("div",{className:"topbar-left",children:l.jsx("div",{className:"team",children:"Equipe de Marketing"})}),l.jsx("div",{className:"topbar-right",children:s?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{className:"chip",children:s.name||s.username}),l.jsxs("button",{className:"icon notif-btn",onClick:()=>h(p=>!p),title:"Menes",children:[l.jsx("span",{className:"icon",children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2Z"}),l.jsx("path",{d:"M18 8a6 6 0 0 0-12 0c0 7-3 7-3 7h18s-3 0-3-7Z"})]})}),Array.isArray(o)&&o.length>0?l.jsx("span",{className:"notif-dot",children:o.length}):null]}),u?l.jsxs("div",{className:"notif-dropdown",onMouseLeave:()=>h(!1),children:[(o||[]).slice(0,6).map(p=>l.jsxs("button",{className:"notif-item",type:"button",onClick:()=>{c&&c(p.id),h(!1)},children:[l.jsx("span",{className:"title",children:p.titulo}),l.jsx("span",{className:"msg",children:p.msg})]},`${p.id}-${p.quando||""}`)),!o||o.length===0?l.jsx("div",{className:"notif-empty",children:"Sem menes"}):null]}):null,l.jsxs("button",{className:"primary",onClick:i,children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"logout"})}),l.jsx("span",{children:"Sair"})]})]}):null})]})}function xk({view:t,setView:e}){return l.jsxs("div",{className:"tabs-inline",children:[l.jsxs("button",{className:`tab-btn ${t==="table"?"active":""}`,onClick:()=>e("table"),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"table"})}),l.jsx("span",{children:"Table"})]}),l.jsxs("button",{className:`tab-btn ${t==="calendar"?"active":""}`,onClick:()=>e("calendar"),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"calendar"})}),l.jsx("span",{children:"Calendar"})]})]})}function Ak({onLogin:t}){const[e,n]=Q.useState(""),[r,s]=Q.useState(""),[i,o]=Q.useState(!1),[c,u]=Q.useState(""),h=async p=>{if(p.preventDefault(),!i){u(""),o(!0);try{await t(e,r)}catch(m){const E=String((m==null?void 0:m.code)||"")==="auth/operation-not-allowed"?"Domnio no autorizado no Firebase Auth. Adicione o domnio do site nas configuraes.":m&&(m.code||m.message)||"Falha ao entrar";u(String(E))}finally{o(!1)}}};return l.jsxs("div",{className:"login-wrap",children:[l.jsx("div",{className:"login-banner",children:"BANNER TELA LOGIN"}),l.jsxs("div",{className:"login-card",children:[l.jsx("div",{className:"login-title",children:"Gerenciamento Mkt!"}),l.jsxs("form",{onSubmit:h,className:"login-form",children:[l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",placeholder:"Usurio",value:e,onChange:p=>n(p.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"8",r:"4"}),l.jsx("path",{d:"M4 20c0-4 4-6 8-6s8 2 8 6"})]})})]}),l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",type:"password",placeholder:"Insira sua senha",value:r,onChange:p=>s(p.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),c?l.jsx("div",{className:"login-error",role:"alert",children:c}):null,l.jsx("div",{className:"login-links",children:l.jsx("a",{href:"#",onClick:p=>p.preventDefault(),children:"Esqueceu sua senha?"})}),l.jsx("button",{className:"primary btn-lg",type:"submit",disabled:i,children:i?"Entrando...":"Entrar"})]})]})]})}function Ck({open:t,filtros:e,setFiltros:n,designers:r,onClose:s,cadStatus:i,cadTipos:o,origens:c,campanhas:u}){const h=(m,y)=>n(E=>({...E,[m]:y})),p=()=>n({designer:"",status:"",cIni:"",cFim:"",sIni:"",sFim:""});return t?l.jsx("div",{className:"modal",onClick:s,children:l.jsxs("div",{className:"modal-dialog",onClick:m=>m.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"filter"})}),l.jsx("span",{children:"Filtros"})]}),l.jsx("button",{className:"icon",onClick:s,children:l.jsx(Ae,{name:"close"})})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Comparativo Mensal"}),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Produo"})}),(()=>{const m=concluidos.filter(C=>inMonth(C.dataConclusao,mesAtual)).length,y=concluidos.filter(C=>inMonth(C.dataConclusao,mesPassado)).length,E=Math.max(m,y,1),N=220,b=80,$=(C,S)=>l.jsx("rect",{x:S,y:b-C/E*b,width:"40",height:C/E*b,rx:"6"});return l.jsxs("svg",{width:N,height:b,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:$(m,40)}),l.jsx("g",{fill:"#4DA3FF",children:$(y,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Qualidade (retrabalho)"})}),(()=>{const m=concluidos.filter(x=>inMonth(x.dataConclusao,mesAtual)).map(x=>x.revisoes||0),y=concluidos.filter(x=>inMonth(x.dataConclusao,mesPassado)).map(x=>x.revisoes||0),E=+(m.reduce((x,R)=>x+R,0)/(m.length||1)).toFixed(2),N=+(y.reduce((x,R)=>x+R,0)/(y.length||1)).toFixed(2),b=Math.max(E,N,1),$=220,C=80,S=(x,R)=>l.jsx("rect",{x:R,y:C-x/b*C,width:"40",height:x/b*C,rx:"6"});return l.jsxs("svg",{width:$,height:C,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:S(E,40)}),l.jsx("g",{fill:"#FF5E5E",children:S(N,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Lead-time"})}),(()=>{const m=compMesAtual,y=compMesPassado,E=Math.max(m,y,1),N=220,b=80,$=(C,S)=>l.jsx("rect",{x:S,y:b-C/E*b,width:"40",height:C/E*b,rx:"6"});return l.jsxs("svg",{width:N,height:b,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:$(m,40)}),l.jsx("g",{fill:"#9B59B6",children:$(y,140)})]})})()]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Insights Automticos"}),l.jsx("div",{className:"insights-grid",children:(()=>{const m=(()=>{const C={};return concluidos.forEach(x=>{const R=x.designer||"",j=x.prazo&&x.dataConclusao&&x.dataConclusao<=x.prazo,B=x.prazo&&x.dataConclusao,g=C[R]||{ok:0,total:0};C[R]={ok:g.ok+(j?1:0),total:g.total+(B?1:0)}}),Object.entries(C).map(([x,R])=>({designer:x,pct:Math.round(100*(R.ok/(R.total||1)))})).sort((x,R)=>R.pct-x.pct)[0]})(),y=(()=>{const C={};return items.forEach(x=>{const R=x.origem||"Outros";C[R]=(C[R]||0)+1}),Object.entries(C).map(([x,R])=>({origem:x,q:R})).sort((x,R)=>R.q-x.q)[0]})(),E=concluidos.filter(C=>(C.revisoes||0)===0).length===concluidos.length,N=compMesAtual<=compMesPassado,b=(()=>{const C=concluidos.filter(x=>/stor/i.test(String(x.tipoMidia||""))),S=+(C.reduce((x,R)=>x+(R.revisoes||0),0)/(C.length||1)).toFixed(2);return{qtd:C.length,avg:S}})(),$=[];return m&&$.push(`O designer ${m.designer} teve o melhor SLA do ms (${m.pct}%)`),y&&$.push(`${y.origem} foi o canal mais solicitado`),E&&$.push("Nenhuma demanda apresentou retrabalho neste ms"),N&&$.push("Seu lead-time melhorou em relao ao ms anterior"),b.qtd>0&&$.push("A categoria Stories teve o maior retrabalho do ms"),$})().map((m,y)=>l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:m})]},y))})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:e.designer,onChange:m=>h("designer",m.target.value),children:[l.jsx("option",{value:"",children:"Designer"}),r.map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{className:"status-select",value:e.status,onChange:m=>h("status",m.target.value),children:[l.jsx("option",{value:"",children:"Status"}),ao.map(m=>l.jsx("option",{value:m,children:Vp(m)},m))]}),l.jsx("div",{className:"chips",children:ao.map(m=>l.jsx("button",{className:`chip ${e.status===m?"active":""}`,onClick:()=>h("status",e.status===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("div",{className:"chips",children:o.map(m=>l.jsx("button",{className:`chip ${e.tipoMidia===m?"active":""}`,onClick:()=>h("tipoMidia",e.tipoMidia===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem"}),l.jsx("div",{className:"chips",children:(c||bp).map(m=>l.jsx("button",{className:`chip ${e.origem===m?"active":""}`,onClick:()=>h("origem",e.origem===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsxs("select",{value:e.campanha||"",onChange:m=>h("campanha",m.target.value),children:[l.jsx("option",{value:"",children:"Campanha"}),(u||[]).map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.cIni,onChange:m=>h("cIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.cFim,onChange:m=>h("cFim",m.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.sIni,onChange:m=>h("sIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.sFim,onChange:m=>h("sFim",m.target.value)})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsxs("button",{className:"icon",onClick:p,children:[l.jsx(Ae,{name:"close"}),l.jsx("span",{children:"Limpar"})]}),l.jsx("button",{className:"primary",onClick:s,children:"Aplicar"})]})]})}):null}function Pk(t,e){return t.filter(n=>!(e.q&&!(n.titulo||"").toLowerCase().includes(e.q.toLowerCase())||e.designer&&n.designer!==e.designer||e.status&&n.status!==e.status||e.tipoMidia&&n.tipoMidia!==e.tipoMidia||e.plataforma&&(n.plataforma||"")!==e.plataforma||e.origem&&(n.origem||"")!==e.origem||e.campanha&&(n.campanha||"")!==e.campanha||e.cIni&&n.prazo&&n.prazo<e.cIni||e.cFim&&n.prazo&&n.prazo>e.cFim||e.sIni&&n.prazo&&n.prazo<e.sIni||e.sFim&&n.prazo&&n.prazo>e.sFim))}function Nk({items:t,onEdit:e,onStatus:n,cadStatus:r,onDelete:s,onDuplicate:i,hasMore:o,showMore:c,canCollapse:u,showLess:h,shown:p,total:m,compact:y,canEdit:E,loading:N}){const[b,$]=Q.useState(null),C=R=>String(R).padStart(2,"0");(R=>{const j=new Date(Date.UTC(R.getFullYear(),R.getMonth(),R.getDate())),B=j.getUTCDay()||7;j.setUTCDate(j.getUTCDate()+4-B);const g=new Date(Date.UTC(j.getUTCFullYear(),0,1)),v=Math.ceil(((j-g)/864e5+1)/7);return`${j.getUTCFullYear()}-W${C(v)}`})(new Date);const x=R=>{if(!R)return"";const[j,B,g]=String(R).split("-").map(Number),v=String(g).padStart(2,"0"),I=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"][Math.max(0,Math.min(11,B-1||0))];return`${v}.${I}`};return N?l.jsxs("div",{className:`table ${y?"compact":""}`,children:[l.jsx("div",{className:"skeleton row",style:{width:"60%"}}),Array.from({length:8}).map((R,j)=>l.jsx("div",{className:"skeleton row",style:{width:`${90-j*6}%`}},j))]}):l.jsxs("div",{className:`table ${y?"compact":""}`,children:[l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Data de Solicitao"}),l.jsx("th",{children:"Data de Criao"}),l.jsx("th",{children:"Prazo"}),l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Origem"}),l.jsx("th",{children:"Drive"})]})}),l.jsx("tbody",{children:t.map(R=>l.jsxs("tr",{className:"row-clickable",onClick:()=>e(R),children:[l.jsx("td",{className:"name",children:R.titulo}),l.jsx("td",{children:l.jsx("div",{children:R.designer})}),l.jsx("td",{children:l.jsx("select",{className:`status-select ${wE(R.status)}`,value:R.status,onChange:j=>n(R.id,j.target.value),onClick:j=>j.stopPropagation(),disabled:!E,children:ao.map(j=>l.jsx("option",{value:j,children:Vp(j)},j))})}),l.jsx("td",{children:x(R.dataSolicitacao)}),l.jsx("td",{children:x(R.dataCriacao)}),l.jsx("td",{children:x(R.prazo)}),l.jsx("td",{children:R.tipoMidia}),l.jsx("td",{children:R.origem||""}),l.jsx("td",{children:R.linkDrive?l.jsx("a",{href:R.linkDrive,target:"_blank",rel:"noreferrer",onClick:j=>j.stopPropagation(),children:"Abrir Drive"}):""}),l.jsx("td",{children:Array.isArray(R.arquivos)&&R.arquivos.length?l.jsx("div",{className:"files",children:R.arquivos.slice(0,5).map(j=>l.jsx("a",{href:j.url,target:"_blank",rel:"noreferrer",title:j.name,onClick:B=>B.stopPropagation(),children:l.jsx("img",{className:"file-thumb",src:j.url,alt:j.name})},j.name))}):R.arquivoNome||""})]},R.id))})]}),l.jsxs("div",{className:"table-footer",children:[o&&l.jsx("button",{className:"primary",onClick:c,children:"Mostrar mais demandas"}),u&&l.jsx("button",{className:"primary",onClick:h,children:"Mostrar menos demandas"})]})]})}function kk({items:t,refDate:e}){const n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0),s=n.getDay(),i=r.getDate(),o={};t.forEach(u=>{const h=u.dataSolicitacao,p=new Date(h);p.getMonth()===e.getMonth()&&p.getFullYear()===e.getFullYear()&&(o[h]||(o[h]=[])).push(u)});const c=[];for(let u=0;u<s;u++)c.push(null);for(let u=1;u<=i;u++)c.push(u);return l.jsxs("div",{className:"calendar",children:[l.jsx("div",{className:"cal-head",children:l.jsx("div",{className:"month",children:e.toLocaleString("pt-BR",{month:"long",year:"numeric"})})}),l.jsxs("div",{className:"cal-grid",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(u=>l.jsx("div",{className:"cal-cell head",children:u},u)),c.map((u,h)=>{if(!u)return l.jsx("div",{className:"cal-cell"},h);const p=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`,m=o[p]||[];return l.jsxs("div",{className:"cal-cell",children:[l.jsx("div",{className:"day",children:u}),m.map(y=>l.jsxs("div",{className:"cal-item",children:[y.titulo," (",y.designer,")"]},y.id))]},h)})]})]})}function Rk({open:t,mode:e,onClose:n,onSubmit:r,initial:s,cadTipos:i,designers:o,cadPlataformas:c,onDelete:u,userLabel:h,canDelete:p,onAddComment:m,cadOrigens:y,currentUser:E,usersAll:N,canEdit:b,displayUser:$,onStatus:C}){const[S,x]=Q.useState((s==null?void 0:s.designer)||E||""),[R,j]=Q.useState((s==null?void 0:s.tipoMidia)||"Post"),[B,g]=Q.useState((s==null?void 0:s.titulo)||""),[v,I]=Q.useState((s==null?void 0:s.link)||""),[w,P]=Q.useState((s==null?void 0:s.linkDrive)||""),[k,A]=Q.useState(""),[Ne,tt]=Q.useState((s==null?void 0:s.dataSolicitacao)||pr()),[pt,mt]=Q.useState((s==null?void 0:s.plataforma)||""),[O,D]=Q.useState((s==null?void 0:s.arquivos)||[]),[F,K]=Q.useState((s==null?void 0:s.dataCriacao)||""),[J,se]=Q.useState((s==null?void 0:s.dataFeedback)||""),[ve,Ve]=Q.useState((s==null?void 0:s.descricao)||""),[ze,ct]=Q.useState((s==null?void 0:s.prazo)||""),[Qe,Sn]=Q.useState((s==null?void 0:s.comentarios)||[]),[St,xt]=Q.useState(""),[Ln,xn]=Q.useState(""),[xe,Ie]=Q.useState(!1),[Te,Kt]=Q.useState([]),Vt=Q.useRef(null),[An,Gn]=Q.useState(!1),[mn,Qn]=Q.useState((s==null?void 0:s.historico)||[]),[Fn,Yn]=Q.useState((s==null?void 0:s.origem)||""),[T,M]=Q.useState((s==null?void 0:s.campanha)||""),[V,oe]=Q.useState("");Q.useEffect(()=>{x((s==null?void 0:s.designer)||E||""),j((s==null?void 0:s.tipoMidia)||"Post"),g((s==null?void 0:s.titulo)||""),I((s==null?void 0:s.link)||""),P((s==null?void 0:s.linkDrive)||""),A(""),tt((s==null?void 0:s.dataSolicitacao)??(e==="create"?pr():"")),mt((s==null?void 0:s.plataforma)||(c==null?void 0:c[0])||""),D((s==null?void 0:s.arquivos)||[]),K((s==null?void 0:s.dataCriacao)||""),se((s==null?void 0:s.dataFeedback)||""),Ve((s==null?void 0:s.descricao)||""),ct((s==null?void 0:s.prazo)||""),Sn((s==null?void 0:s.comentarios)||[]),xt(""),Qn((s==null?void 0:s.historico)||[]),Yn((s==null?void 0:s.origem)||""),M((s==null?void 0:s.campanha)||"")},[s,t,o,i,c,y]);const ce=H=>{H.preventDefault(),r({designer:S,tipoMidia:R,titulo:B,link:v,linkDrive:w,arquivoNome:k,dataSolic:Ne,dataCriacao:F,dataFeedback:J,plataforma:pt,arquivos:O,descricao:ve,prazo:ze,comentarios:Qe,historico:mn,origem:Fn,campanha:T})},be=()=>{const H=St.trim();if(!H)return;const Ee=Tk(H),we={texto:H,data:pr(),mentions:Ee,autor:h},pe={tipo:"comentario",autor:h,data:we.data,texto:H,mentions:Ee};Sn(U=>[we,...U]),Qn(U=>[pe,...U]),xt("");try{m&&m(s==null?void 0:s.id,we,pe)}catch{}},ke=H=>{if(!H)return"";try{return new Date(H).toLocaleString("pt-BR",{timeZone:"America/Sao_Paulo",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return H}},[gt,$e]=Q.useState(Date.now());Q.useEffect(()=>{const H=setInterval(()=>$e(Date.now()),1e3);return()=>clearInterval(H)},[]);const st=H=>{if(!H||H<=0)return"00:00:00";const Ee=Math.floor(H/1e3),we=String(Math.floor(Ee/3600)).padStart(2,"0"),pe=String(Math.floor(Ee%3600/60)).padStart(2,"0"),U=String(Ee%60).padStart(2,"0");return`${we}:${pe}:${U}`},wt=Number((s==null?void 0:s.tempoProducaoMs)||0),Xn=s!=null&&s.startedAt?Date.parse(s.startedAt):null,Jn=/produ|progresso/i.test(String((s==null?void 0:s.status)||"")),Cn=Q.useRef(null);Q.useEffect(()=>{!Xn&&Jn&&!Cn.current&&(Cn.current=Date.now()),(Xn||!Jn)&&(Cn.current=null)},[Xn,Jn]);const Zn=Xn??Cn.current,Kr=wt+(Zn?Math.max(0,gt-Zn):0),[Pn,Lt]=Q.useState(null),Gr=H=>String(H||"").replace(/[&<>]/g,U=>U==="&"?"&amp;":U==="<"?"&lt;":"&gt;").replace(/((https?:\/\/|www\.)[^\s]+)/gi,U=>`<a href="${/^https?:\/\//i.test(U)?U:`https://${U}`}" target="_blank" rel="noreferrer">${U}</a>`).replace(/\n/g,"<br/>");return t?l.jsx("div",{className:"modal",children:l.jsxs("div",{className:`modal-dialog ${e!=="create"?"tall":""}`,onClick:H=>H.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[e==="create"?l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}):l.jsx("input",{className:"title editable",type:"text",dir:"ltr",placeholder:"Sem ttulo",value:B,onChange:H=>g(H.target.value)}),l.jsx("button",{className:"icon",onClick:n,children:l.jsx(Ae,{name:"close"})})]}),l.jsxs("div",{className:`status-bar ${wE((s==null?void 0:s.status)||"Aberta")}`,children:[l.jsx("div",{children:(s==null?void 0:s.status)||"Aberta"}),e!=="create"&&l.jsx("select",{value:(s==null?void 0:s.status)||"Aberta",onChange:H=>{try{C&&C(s==null?void 0:s.id,H.target.value)}catch{}},disabled:!b,style:{marginLeft:8},children:ao.map(H=>l.jsx("option",{value:H,children:Vp(H)},H))}),e!=="create"&&l.jsxs("div",{className:"timer",children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"clock"})}),l.jsx("span",{children:st(Kr)})]})]}),l.jsx("form",{id:"modalForm",className:"modal-body",onSubmit:ce,children:l.jsxs("div",{className:`modal-columns ${e==="create"?"single":"cols3"}`,children:[l.jsxs("div",{className:"modal-main",children:[l.jsxs("div",{className:e==="create"?"form-grid":"form-stack",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:S,onChange:H=>x(H.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Designer"}),(o||[]).map(H=>l.jsx("option",{value:H,children:H},H))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("select",{value:R,onChange:H=>j(H.target.value),children:(i||["Post","Story","Banner","Vdeo","Outro"]).map(H=>l.jsx("option",{value:H,children:H},H))})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Titulo"}),l.jsx("input",{value:B,onChange:H=>g(H.target.value),required:!0})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link de Referncia"}),l.jsx("input",{type:"url",value:v,onChange:H=>I(H.target.value),placeholder:"https://"})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem da Demanda"}),l.jsxs("select",{value:Fn,onChange:H=>Yn(H.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Origem"}),(y||bp).map(H=>l.jsx("option",{value:H,children:H},H))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsx("input",{value:T,onChange:H=>M(H.target.value),placeholder:"Ex: Black Friday"})]}),e!=="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link de Referncia"}),l.jsx("input",{type:"url",value:v,onChange:H=>I(H.target.value),placeholder:"https://"}),v?l.jsx("div",{style:{marginTop:6},children:l.jsx("a",{href:v,target:"_blank",rel:"noreferrer",children:"Abrir link"})}):null]}),e!=="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link do Drive"}),l.jsx("input",{type:"url",value:w,onChange:H=>P(H.target.value),placeholder:"https://"}),w?l.jsx("div",{style:{marginTop:6},children:l.jsx("a",{href:w,target:"_blank",rel:"noreferrer",children:"Abrir Drive"})}):null]}),e==="create"?l.jsxs("div",{className:"row-2",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsx("input",{type:"date",value:Ne,onChange:H=>tt(H.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:ze,onChange:H=>ct(H.target.value)})]})]}):l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:H=>{const we=Array.from(H.target.files||[]).filter(z=>(z.size||0)<=1048576).slice(0,5),pe=new Date().toISOString(),U=we.map(z=>new Promise(q=>{const ne=new FileReader;ne.onload=()=>q({name:z.name,url:ne.result,addedBy:h,addedAt:pe}),ne.readAsDataURL(z)}));Promise.all(U).then(z=>{D(z),Qn(ne=>[{tipo:"arquivo",autor:h,data:pr(),arquivos:z},...ne]);const q=z.map(ne=>ne.name).join(", ");Sn(ne=>[{texto:`Arquivos anexados: ${q||z.length}`,data:pr()},...ne])})}}),Array.isArray(O)&&O.length>0&&l.jsx("div",{className:"thumbs",children:O.map((H,Ee)=>l.jsxs("div",{className:"file-item",children:[l.jsx("img",{className:"file-thumb",src:H.url,alt:H.name}),l.jsxs("div",{className:"file-meta",children:[H.name,H.addedBy?`  ${H.addedBy}`:""]}),l.jsxs("div",{className:"file-actions",children:[l.jsx("a",{href:H.url,download:!0,target:"_blank",rel:"noreferrer",children:"Baixar"}),l.jsxs("label",{className:"replace-btn",children:["Substituir",l.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:we=>{var q;const pe=(q=we.target.files)==null?void 0:q[0];if(!pe)return;const U=new FileReader,z=new Date().toISOString();U.onload=()=>{const ne={name:pe.name,url:U.result,addedBy:h,addedAt:z};D(X=>X.map((ie,G)=>G===Ee?ne:ie))},U.readAsDataURL(pe)}})]}),l.jsx("button",{type:"button",onClick:()=>D(we=>we.filter((pe,U)=>U!==Ee)),children:"Excluir"})]})]},H.name+Ee))})]})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:8,className:"desc-input",value:ve,onChange:H=>Ve(H.target.value)}),/(https?:\/\/|www\.)/i.test(String(ve||""))?l.jsx("div",{className:"desc-preview",dangerouslySetInnerHTML:{__html:Gr(ve)}}):null]}),e==="create"&&l.jsxs("div",{className:"activity",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Comentrios"}),l.jsx("input",{ref:Vt,placeholder:"Escreva um comentrio use @ para mencionar",value:St,onChange:H=>{const Ee=H.target.value,we=H.target.selectionStart||Ee.length;xt(Ee);const pe=Ee.lastIndexOf("@",(we||Ee.length)-1);if(pe>=0){const U=Ee.slice(pe+1),z=U.indexOf(" "),q=U.indexOf(`
`),ne=z>=0&&q>=0?Math.min(z,q):z>=0?z:q>=0?q:-1,X=ne>=0?U.slice(0,ne):U.slice(0,we-(pe+1)),ie=String(X||"").trim();if(xn(ie),ie.length>0){const G=ie.toLowerCase(),Z=(N||[]).filter(de=>String(de.username||"").toLowerCase().includes(G)||String(de.name||"").toLowerCase().includes(G)).slice(0,6);Kt(Z),Ie(Z.length>0)}else Ie(!1),Kt([])}else Ie(!1),Kt([])},onBlur:()=>setTimeout(()=>Ie(!1),80)}),xe&&Te.length>0&&l.jsx("div",{className:"mentions-suggest",children:Te.map(H=>l.jsxs("div",{className:"suggest-item",onMouseDown:Ee=>{Ee.preventDefault();const we=Vt.current,pe=String(St||""),U=we&&we.selectionStart||pe.length,z=pe.lastIndexOf("@",(U||pe.length)-1),q=pe.slice(0,z),ne=pe.slice(z+1),X=ne.indexOf(" "),ie=ne.indexOf(`
`),G=X>=0&&ie>=0?Math.min(X,ie):X>=0?X:ie>=0?ie:-1,Z=G>=0?z+1+G:U,de=pe.slice(Z),De=`@${H.username||H.name}`,We=`${q}${De} ${de}`;xt(We),Ie(!1),Kt([]),xn(""),setTimeout(()=>{try{const Ye=Vt.current;if(Ye){const Be=q.length+De.length+1;Ye.focus(),Ye.setSelectionRange(Be,Be)}}catch{}},0)},children:["@",H.username||"","  ",H.name||H.username]},H.id||H.username))}),St.trim().length>0&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:l.jsx("button",{className:"primary",type:"button",onClick:be,children:"Adicionar"})})]}),l.jsxs("div",{className:"activity-list",children:[(Qe||[]).length===0?l.jsx("div",{className:"empty",children:"Sem comentrios"}):(An?Qe||[]:(Qe||[]).slice(0,2)).map((H,Ee)=>l.jsx("div",{className:"activity-item",children:l.jsxs("div",{className:"activity-entry",children:[l.jsx("div",{className:"avatar",children:"V"}),l.jsxs("div",{className:"entry-content",children:[l.jsx("div",{className:"entry-title",children:l.jsxs("span",{children:[l.jsx("strong",{children:$(H.autor||"")})," comentou: ",H.texto]})}),l.jsx("div",{className:"entry-time",children:ke(H.data)}),Array.isArray(H.mentions)&&H.mentions.length>0&&l.jsx("div",{className:"mentions-row",children:H.mentions.map(we=>l.jsxs("span",{className:`mention-pill ${String(h||"").toLowerCase()===String(we||"").toLowerCase()?"you":""}`,children:["@",we,String(h||"").toLowerCase()===String(we||"").toLowerCase()?"  Voc foi mencionado":""]},we))})]})]})},Ee)),(Qe||[]).length>2&&l.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:l.jsx("button",{className:"tertiary",type:"button",onClick:()=>Gn(H=>!H),children:An?"Mostrar menos":`Ver todos os comentrios (${(Qe||[]).length-2} mais)`})})]})]})]}),e!=="create"&&l.jsxs("div",{className:"modal-center",children:[l.jsxs("div",{className:"date-row",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsx("input",{type:"date",value:Ne,onChange:H=>tt(H.target.value),disabled:!b})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsx("input",{type:"date",value:F,onChange:H=>K(H.target.value),disabled:!b})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:ze,onChange:H=>ct(H.target.value)})]}),String((s==null?void 0:s.status)||"").toLowerCase().includes("feedback")&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Feedback"}),l.jsx("input",{type:"date",value:J,onChange:H=>se(H.target.value),disabled:!b})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:12,className:"desc-input",value:ve,onChange:H=>Ve(H.target.value)}),/(https?:\/\/|www\.)/i.test(String(ve||""))?l.jsx("div",{className:"desc-preview",dangerouslySetInnerHTML:{__html:Gr(ve)}}):null]}),l.jsxs("div",{className:"activity",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Comentrios"}),l.jsx("input",{ref:Vt,placeholder:"Escreva um comentrio use @ para mencionar",value:St,onChange:H=>{const Ee=H.target.value,we=H.target.selectionStart||Ee.length;xt(Ee);const pe=Ee.lastIndexOf("@",(we||Ee.length)-1);if(pe>=0){const U=Ee.slice(pe+1),z=U.indexOf(" "),q=U.indexOf(`
`),ne=z>=0&&q>=0?Math.min(z,q):z>=0?z:q>=0?q:-1,X=ne>=0?U.slice(0,ne):U.slice(0,we-(pe+1)),ie=String(X||"").trim();if(xn(ie),ie.length>0){const G=ie.toLowerCase(),Z=(N||[]).filter(de=>String(de.username||"").toLowerCase().includes(G)||String(de.name||"").toLowerCase().includes(G)).slice(0,6);Kt(Z),Ie(Z.length>0)}else Ie(!1),Kt([])}else Ie(!1),Kt([])},onBlur:()=>setTimeout(()=>Ie(!1),80)}),xe&&Te.length>0&&l.jsx("div",{className:"mentions-suggest",children:Te.map(H=>l.jsxs("div",{className:"suggest-item",onMouseDown:Ee=>{Ee.preventDefault();const we=Vt.current,pe=String(St||""),U=we&&we.selectionStart||pe.length,z=pe.lastIndexOf("@",(U||pe.length)-1),q=pe.slice(0,z),ne=pe.slice(z+1),X=ne.indexOf(" "),ie=ne.indexOf(`
`),G=X>=0&&ie>=0?Math.min(X,ie):X>=0?X:ie>=0?ie:-1,Z=G>=0?z+1+G:U,de=pe.slice(Z),De=`@${H.username||H.name}`,We=`${q}${De} ${de}`;xt(We),Ie(!1),Kt([]),xn(""),setTimeout(()=>{try{const Ye=Vt.current;if(Ye){const Be=q.length+De.length+1;Ye.focus(),Ye.setSelectionRange(Be,Be)}}catch{}},0)},children:["@",H.username||"","  ",H.name||H.username]},H.id||H.username))}),St.trim().length>0&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:l.jsx("button",{className:"primary",type:"button",onClick:be,children:"Adicionar"})})]}),l.jsxs("div",{className:"activity-list",children:[(Qe||[]).length===0?l.jsx("div",{className:"empty",children:"Sem comentrios"}):(An?Qe||[]:(Qe||[]).slice(0,2)).map((H,Ee)=>l.jsx("div",{className:"activity-item",children:l.jsxs("div",{className:"activity-entry",children:[l.jsx("div",{className:"avatar",children:"V"}),l.jsxs("div",{className:"entry-content",children:[l.jsx("div",{className:"entry-title",children:l.jsxs("span",{children:[l.jsx("strong",{children:$(H.autor||"")})," comentou: ",H.texto]})}),l.jsx("div",{className:"entry-time",children:ke(H.data)}),Array.isArray(H.mentions)&&H.mentions.length>0&&l.jsx("div",{className:"mentions-row",children:H.mentions.map(we=>l.jsxs("span",{className:`mention-pill ${String(h||"").toLowerCase()===String(we||"").toLowerCase()?"you":""}`,children:["@",we,String(h||"").toLowerCase()===String(we||"").toLowerCase()?"  Voc foi mencionado":""]},we))})]})]})},Ee)),(Qe||[]).length>2&&l.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:l.jsx("button",{className:"tertiary",type:"button",onClick:()=>Gn(H=>!H),children:An?"Mostrar menos":`Ver todos os comentrios (${(Qe||[]).length-2} mais)`})})]})]})]}),e!=="create"&&l.jsx("div",{className:"modal-side",children:l.jsxs("div",{className:"timeline",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Linha do tempo"})}),["Criado","Em produo","Aguardando Feedback","Revisar","Aprovada","Concluda","Postado"].map(H=>{const Ee=(G,Z)=>{const de=String(G.status_novo||G.para||""||"").toLowerCase();return Z==="Criado"?de==="aberta":Z==="Em produo"?de.includes("produ")||de.includes("progresso"):Z==="Aguardando Feedback"?de.includes("feedback"):Z==="Revisar"?de.includes("revisar"):Z==="Aprovada"?de.includes("aprov"):Z==="Concluda"?de.includes("conclu"):!1};let pe=H==="Postado"?(mn||[]).filter(G=>G.tipo==="mlabs"):(mn||[]).filter(G=>G.tipo==="status"&&Ee(G,H));if(H==="Concluda"&&(!pe||pe.length===0)&&String((s==null?void 0:s.status)||"").toLowerCase().includes("conclu")){const G=(s==null?void 0:s.finishedAt)||(s!=null&&s.dataConclusao?`${s.dataConclusao}T00:00:00Z`:null);pe=[{tipo:"status",autor:(s==null?void 0:s.autor)||h,data_hora_evento:G,data:s==null?void 0:s.dataConclusao,status_novo:"Concluda",responsavel:(s==null?void 0:s.designer)||""}]}const U=pe&&pe.length?pe[pe.length-1]:null,z=(U==null?void 0:U.duracao_em_minutos)!=null?$v(U.duracao_em_minutos):"",q=U!=null&&U.data_hora_evento?ke(U.data_hora_evento):ke(U==null?void 0:U.data),ne=$((U==null?void 0:U.responsavel)||(U==null?void 0:U.autor)||""),X=pe.length,ie=Pn===H;return l.jsxs("div",{className:"timeline-item",onClick:()=>Lt(G=>G===H?null:H),children:[l.jsx("div",{className:"timeline-left",children:l.jsx("span",{className:"timeline-icon",children:""})}),l.jsxs("div",{className:"timeline-body",children:[l.jsxs("div",{className:"timeline-title",children:[H,X>1?`  ${X}`:""]}),l.jsxs("div",{className:"timeline-meta",children:[q,ne?`  ${ne}`:"",z?`  ${z}`:""]}),ie&&X>0&&l.jsx("div",{className:"timeline-details",children:pe.map((G,Z)=>l.jsxs("div",{className:"timeline-detail-row",children:[l.jsx("div",{children:G!=null&&G.data_hora_evento?ke(G.data_hora_evento):ke(G==null?void 0:G.data)}),l.jsx("div",{children:$((G==null?void 0:G.responsavel)||(G==null?void 0:G.autor)||"")}),l.jsx("div",{children:(G==null?void 0:G.duracao_em_minutos)!=null?$v(G.duracao_em_minutos):""})]},Z))})]})]},H)})]})})]})}),l.jsxs("div",{className:"modal-actions",children:[e==="edit"&&p&&l.jsx("button",{className:"danger",type:"button",onClick:()=>{window.confirm("Confirmar excluso desta demanda?")&&(u(s.id),n())},children:"Excluir"}),l.jsx("button",{className:"primary",type:"submit",form:"modalForm",children:"Salvar"})]})]})}):null}function jk({cadStatus:t,setCadStatus:e,cadTipos:n,setCadTipos:r,cadPlataformas:s,setCadPlataformas:i,cadOrigens:o,setCadOrigens:c,cadStatusColors:u,setCadStatusColors:h}){const[p,m]=Q.useState("tipo"),[y,E]=Q.useState(""),[N,b]=Q.useState("#f59e0b"),$=p==="status"?t:p==="tipo"?n:p==="plataforma"?s:o,C=w=>{p==="status"?e(w):p==="tipo"?r(w):p==="plataforma"?i(w):c(w)},[S,x]=Q.useState({}),R=w=>x(P=>({...P,[w]:w})),j=w=>x(P=>{const k={...P};return delete k[w],k}),B=async w=>{const P=String(S[w]||"").trim();if(!P||P===w){j(w);return}const k=$.map(A=>A===w?P:A);if(C(k),p==="status"){const A=u[w];h(Ne=>{const tt={...Ne};return A&&(delete tt[w],tt[P]=A),tt})}if(ae){const A=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await la(vt(ae,A,P),{name:P,active:!0},{merge:!0});try{await zi(vt(ae,A,w))}catch{}}catch(Ne){try{window.alert(String((Ne==null?void 0:Ne.code)||(Ne==null?void 0:Ne.message)||"Falha ao renomear"))}catch{}}}j(w)},g=async()=>{const w=y.trim();if(!w||$.includes(w))return;const P=[...$,w];if(C(P),E(""),p==="status"&&h(k=>({...k,[w]:N})),ae){const k=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await la(vt(ae,k,w),{name:w,active:!0})}catch(A){try{window.alert(String((A==null?void 0:A.code)||(A==null?void 0:A.message)||"Falha ao gravar cadastro"))}catch{}}}},v=async w=>{const P=$.filter(k=>k!==w);if(C(P),ae){const k=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await zi(vt(ae,k,w))}catch(A){try{window.alert(String((A==null?void 0:A.code)||(A==null?void 0:A.message)||"Falha ao remover cadastro"))}catch{}}}},I=async w=>{if(!ae)return;const P=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await la(vt(ae,P,w),{active:!1},{merge:!0})}catch(k){try{window.alert(String((k==null?void 0:k.code)||(k==null?void 0:k.message)||"Falha ao desativar cadastro"))}catch{}}};return l.jsxs("div",{className:"panel",children:[l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${p==="tipo"?"active":""}`,onClick:()=>m("tipo"),children:"Tipo"}),l.jsx("button",{className:`tab ${p==="origem"?"active":""}`,onClick:()=>m("origem"),children:"Origem"})]}),l.jsxs("div",{className:"form-row",style:{marginTop:10},children:[l.jsx("label",{children:p==="status"?"Novo Status":p==="tipo"?"Novo Tipo":"Nova Origem"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{value:y,onChange:w=>E(w.target.value)}),p==="status"&&l.jsx("input",{type:"color",value:N,onChange:w=>b(w.target.value),title:"Cor"}),l.jsx("button",{className:"primary",onClick:g,children:"Adicionar"})]})]}),l.jsx("div",{className:"form-row",style:{marginTop:10},children:l.jsx("select",{children:$.map(w=>l.jsx("option",{value:w,children:w},w))})}),l.jsx("div",{className:"list",style:{marginTop:12},children:$.length===0?l.jsx("div",{className:"empty",children:"Sem itens"}):$.map(w=>l.jsxs("div",{className:"list-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",border:"1px solid var(--border)",borderRadius:8,background:"#0b0e12",marginBottom:6},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[p==="status"&&l.jsx("span",{className:"status-dot",style:{background:u[w]||"#3b82f6"}}),S[w]!=null?l.jsx("input",{value:S[w],onChange:P=>x(k=>({...k,[w]:P.target.value}))}):l.jsx("div",{children:w})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[p==="status"&&l.jsx("input",{type:"color",value:u[w]||"#3b82f6",onChange:P=>h(k=>({...k,[w]:P.target.value}))}),S[w]==null?l.jsx("button",{className:"icon",onClick:()=>R(w),title:"Editar",children:l.jsx(Ae,{name:"edit"})}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"icon",onClick:()=>B(w),title:"Salvar",children:l.jsx(Ae,{name:"check"})}),l.jsx("button",{className:"icon",onClick:()=>j(w),title:"Cancelar",children:l.jsx(Ae,{name:"close"})})]}),l.jsx("button",{className:"icon",onClick:()=>I(w),title:"Desativar",children:l.jsx(Ae,{name:"minus"})}),l.jsx("button",{className:"icon",onClick:()=>v(w),children:l.jsx(Ae,{name:"trash"})})]})]},w))})]})}function Dk(){var Ee,we,pe;const[t,e]=Q.useState(null),[n,r]=Q.useState([]),[s,i]=Q.useState({}),[o,c]=Q.useState(!0),[u,h]=Q.useState("table"),[p,m]=Q.useState(!1),[y,E]=Q.useState("dashboard"),[N,b]=Q.useState({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""}),[$,C]=Q.useState(!1),[S,x]=Q.useState(!1),[R,j]=Q.useState("create"),[B,g]=Q.useState(null),[v,I]=Q.useState(EE),[w,P]=Q.useState({autoPostMLabs:!1}),[k,A]=Q.useState(["Aberta","Em Progresso","Concluda"]),[Ne,tt]=Q.useState(["Post","Story","Banner","Vdeo","Outro"]),[pt,mt]=Q.useState([]),[O,D]=Q.useState([]),[F,K]=Q.useState([]),J=Q.useMemo(()=>{const U={};return(F||[]).forEach(z=>{const q=String(z.username||"").toLowerCase(),ne=String(z.email||"").toLowerCase(),X=z.name||q||"";q&&(U[q]=X),ne&&(U[ne]=X)}),U},[F]),se=U=>{const z=String(U||"").toLowerCase();return J[z]||U||""},[ve,Ve]=Q.useState({Aberta:"#f59e0b","Em Progresso":"#3b82f6",Concluda:"#10b981"}),ze=Q.useMemo(()=>Array.from(new Set(n.map(U=>U.designer).filter(Boolean))).sort(),[n]),ct=Q.useMemo(()=>F.filter(U=>(U.cargo||"")==="Designer").map(U=>U.username).filter(Boolean).sort(),[F]),Qe=Q.useMemo(()=>Array.from(new Set([...ct,...ze])).sort(),[ct,ze]),Sn=Q.useMemo(()=>Array.from(new Set(n.map(U=>U.campanha).filter(Boolean))).sort(),[n]),St=(t==null?void 0:t.role)||"comum",xt=Q.useMemo(()=>Pk(n,N),[n,N]),Ln=Q.useMemo(()=>n,[n]),xn=Q.useMemo(()=>Array.isArray(Qe)?Qe:[],[Qe]),xe=Q.useMemo(()=>Array.isArray(xt)?xt.slice().sort((U,z)=>{const q=U.dataCriacao||"",X=(z.dataCriacao||"").localeCompare(q);if(X!==0)return X;const ie=U.id||0;return(z.id||0)-ie}):[],[xt]),Ie=Q.useMemo(()=>Array.isArray(Qe)?Qe:[],[Qe]),Te=Q.useMemo(()=>Array.isArray(xe)?xe:[],[xe]),Kt=Q.useMemo(()=>{try{if(!t)return[];const U=new Set([String(t.username||"").toLowerCase(),String(t.name||"").toLowerCase()]),z=[](n||[]).forEach(q=>{(q.historico||[]).forEach(ne=>{ne.tipo==="notificacao"&&Array.isArray(ne.mentions)&&ne.mentions.some(ie=>U.has(String(ie||"").toLowerCase()))&&z.push({id:q.id,titulo:q.titulo||"(sem ttulo)",quando:ne.data_hora_evento||ne.data||"",msg:ne.mensagem||"Voc foi mencionado"})})});return z.sort((q,ne)=>String(ne.quando||"").localeCompare(String(q.quando||"")))}catch{return[]}},[n,t]),Vt=Q.useMemo(()=>Te.filter(U=>/revisar/i.test(String(U.status||""))).length,[Te]);Q.useMemo(()=>Te.filter(U=>/aprovada/i.test(String(U.status||""))).length,[Te]);const An=Q.useMemo(()=>Array.from(new Set(Te.filter(U=>/revisar/i.test(String(U.status||""))).map(U=>se(U.designer||"")))).filter(Boolean),[Te,se]),Gn=Q.useMemo(()=>{const U=Te,z=q=>String(q||"").toLowerCase();return{Pendente:U.filter(q=>Lp(q.status)).length,"Em produo":U.filter(q=>Fp(q.status)).length,"Aguardando Feedback":U.filter(q=>z(q.status).includes("feedback")).length,Aprovada:U.filter(q=>z(q.status).includes("aprov")).length,Revisar:U.filter(q=>z(q.status).includes("revisar")).length,Concluida:U.filter(q=>z(q.status).includes("conclu")).length}},[Te]),[mn,Qn]=Q.useState(10),[Fn,Yn]=Q.useState(new Date),[T,M]=Q.useState("status"),V=Q.useMemo(()=>(t==null?void 0:t.name)||(t==null?void 0:t.username)||"Voc",[t]),oe=["dashboard","demandas","config","cadastros","relatorios","usuarios"],ce=Q.useMemo(()=>{const U=t==null?void 0:t.pages,z=(t==null?void 0:t.role)||"comum";if(U&&typeof U=="object"){const q=Object.keys(U).filter(ne=>U[ne]);return Array.isArray(q)?z==="admin"?oe:q:z==="admin"?oe:["dashboard","demandas"]}return z==="admin"?oe:["dashboard","demandas"]},[t]);Q.useEffect(()=>{},[n,ae]),Q.useEffect(()=>{ae||c(!1)},[ae]),Q.useEffect(()=>{(async()=>{try{const z=wk&&!1||typeof window<"u"&&new URLSearchParams(window.location.search).get("purge")==="1";if(!ae||!z||typeof window<"u"&&window.__PURGED__)return;if(typeof window<"u"&&(window.__PURGED__=!0),un)try{await $l(un,"purger@betaki.bet.br","purge12345")}catch{try{await Pv(un,"purger@betaki.bet.br","purge12345"),await $l(un,"purger@betaki.bet.br","purge12345")}catch{}}const q=["demandas_v2","demandas","cad_status","cad_tipos","cad_designers","cad_plataformas","cad_origens","historico_status","usuarios"];for(const ne of q)try{const X=await Ls(Dt(ae,ne)),ie=[];X.forEach(G=>ie.push(zi(vt(ae,ne,G.id)))),ie.length&&await Promise.all(ie)}catch{}try{window.alert("Purge Firebase concludo")}catch{}}catch{}})()},[ae,un]),Q.useEffect(()=>{},[ae]),Q.useEffect(()=>{if(!un)return;const U=BP(un,async z=>{if(z){let q=null;const ne=z.email||"",X=(ne.split("@")[0]||"").trim();if(ae&&X)try{const G=await U1(vt(ae,"usuarios",X));q=G.exists()?G.data():null}catch{}const ie={username:(q==null?void 0:q.username)||X,name:(q==null?void 0:q.name)||ne,role:(q==null?void 0:q.role)||"comum",pages:(q==null?void 0:q.pages)||null,actions:(q==null?void 0:q.actions)||null,cargo:(q==null?void 0:q.cargo)||""};e(ie),c(!1)}else e(null),c(!1)});return()=>{try{U()}catch{}}},[un,ae]),Q.useEffect(()=>{Object.entries(v||{}).forEach(([U,z])=>{try{document.documentElement.style.setProperty(`--${U}`,z)}catch{}})},[v]),Q.useEffect(()=>{if(!ae||!t)return;const U=zs(Dt(ae,cn),G=>{const Z=[];G.forEach(de=>Z.push({id:de.data().id||de.id,...de.data()})),r(Z),c(!1)}),z=zs(Dt(ae,"usuarios"),G=>{const Z=[];G.forEach(de=>Z.push({id:de.id,...de.data()})),K(Z)}),q=zs(Dt(ae,"cad_status"),G=>A(G.docs.map(Z=>Z.data().name||Z.id))),ne=zs(Dt(ae,"cad_tipos"),G=>tt(G.docs.filter(Z=>Z.data().active!==!1).map(Z=>Z.data().name||Z.id))),X=zs(Dt(ae,"cad_plataformas"),G=>mt(G.docs.filter(Z=>Z.data().active!==!1).map(Z=>Z.data().name||Z.id))),ie=zs(Dt(ae,"cad_origens"),G=>D(G.docs.filter(Z=>Z.data().active!==!1).map(Z=>Z.data().name||Z.id)));return()=>{try{U()}catch{}try{z()}catch{}try{q()}catch{}try{ne()}catch{}try{X()}catch{}try{ie()}catch{}}},[ae,t]),Q.useEffect(()=>{t&&!ce.includes(y)&&E(ce[0]||"dashboard"),!t&&y!=="dashboard"&&y!=="demandas"&&y!=="config"&&y!=="cadastros"&&y!=="relatorios"&&y!=="usuarios"&&E("dashboard")},[t,ce,y]),Q.useEffect(()=>{if(!S||!B)return;const U=n.find(z=>String(z.id)===String(B.id));if(U)try{g(U)}catch{}},[n,S,B]);const be=async()=>{try{await zP(un)}catch{}e(null)},ke=async(U,z)=>{const q=String(U||"").trim();if(!q||!z)throw new Error("Credenciais ausentes");if(!un)throw new Error("Firebase no configurado");const ne=/@/.test(q)?q:`${q}@betaki.bet.br`;try{await $l(un,ne,z)}catch{if(await Pv(un,ne,z),await $l(un,ne,z),ae)try{await la(vt(ae,"usuarios",q),{username:q,email:ne,name:q,role:"comum",cargo:"",pages:null,actions:null})}catch{}}},gt=(t==null?void 0:t.role)==="admin",$e=gt||((Ee=t==null?void 0:t.actions)==null?void 0:Ee.criar)!==!1,st=gt||((we=t==null?void 0:t.actions)==null?void 0:we.excluir)!==!1,wt=gt||((pe=t==null?void 0:t.actions)==null?void 0:pe.visualizar)!==!1,Xn=()=>{!t||!$e||(j("create"),g(null),x(!0))},Jn=U=>{!t||!wt||(j("edit"),g(U),x(!0))},Cn=async U=>{const z={...U,status:"Aberta",dataSolicitacao:pr(),dataCriacao:null};if(ae)try{const q=String(Date.now());await Bl(Dt(ae,cn),{...z,id:q,createdAt:vv()})}catch{}},Zn=async(U,z)=>{const q=pr();let ne=null;if(r(ie=>ie.map(G=>{if(String(G.id)!==String(U))return G;const Z=G.status!==z,de=String(G.status||"").toLowerCase().includes("produ")||String(G.status||"").toLowerCase().includes("progresso"),De=String(z||"").toLowerCase().includes("produ")||String(z||"").toLowerCase().includes("progresso"),We=Date.now();let Ye=Number(G.tempoProducaoMs||0),Be=G.startedAt||null,an=G.finishedAt||null;const At=String(z||"").toLowerCase().includes("feedback"),Ct=String(G.status||"").toLowerCase().includes("feedback");let Gt=G.slaStartAt||null,Pt=G.slaStopAt||null,ut=Number(G.slaPauseMs||0),qe=G.pauseStartedAt||null;if(Z){if(de&&!De&&Be){const Le=Date.parse(Be);isNaN(Le)||(Ye+=Math.max(0,We-Le)),Be=null}if(!de&&De&&!Be&&(Be=new Date(We).toISOString(),Gt||(Gt=Be)),!Ct&&At&&!qe&&(qe=new Date(We).toISOString()),Ct&&!At&&qe){const Le=Date.parse(qe);isNaN(Le)||(ut+=Math.max(0,We-Le)),qe=null}}const jt=String(z||"").toLowerCase().includes("revisar"),Un=Z&&jt?(G.revisoes||0)+1:G.revisoes||0,ln=String(z||"").toLowerCase().includes("concluida")||z==="Concluda",gn=ln?G.dataConclusao||q:G.dataConclusao,Ke=Z&&(At||ln)&&!G.dataCriacao?q:G.dataCriacao;Z&&ln&&(an=new Date(We).toISOString(),Pt=an);const Qt=(G.historico||[]).find(Le=>Le.tipo==="status"),Qr=Qt!=null&&Qt.data_hora_evento?Date.parse(Qt.data_hora_evento):Qt!=null&&Qt.data?Date.parse(`${Qt.data}T00:00:00Z`):null,er=new Date(We).toISOString(),vo=Z&&Qr?Math.round((We-Qr)/6e4):null,il=Z?{tipo:"status",autor:V,data:q,data_hora_evento:er,status_anterior:G.status,status_novo:z,duracao_em_minutos:vo,responsavel:V,id_demanda:G.id,de:G.status,para:z}:null,yo=(()=>{if(!G.prazo)return null;const[Le,dt,xr]=String(G.prazo).split("-").map(Number),bs=new Date(Le,(dt||1)-1,xr||1);bs.setHours(0,0,0,0);const wo=new Date;return wo.setHours(0,0,0,0),bs-wo})(),ol=!!(G.prazo&&!ln&&typeof yo=="number"&&yo<=864e5),_o=Z&&ol?{tipo:"alerta",autor:V,data:q,data_hora_evento:er,mensagem:"Prazo menor que 24h",id_demanda:G.id}:null,fi=!!(Z&&(String(z||"").toLowerCase().includes("aprov")||String(z||"").toLowerCase().includes("conclu"))&&w.autoPostMLabs)?{tipo:"mlabs",autor:V,data:q,data_hora_evento:er,mensagem:"Postagem agendada via mLabs",id_demanda:G.id}:null,pi=il?[il,..._o?[_o]:[],...fi?[fi]:[],...G.historico||[]]:G.historico||[],ll=Z&&At&&!G.dataFeedback?q:G.dataFeedback,bu=(pi||[]).filter(Le=>Le.tipo==="status"&&Le.duracao_em_minutos!=null).reduce((Le,dt)=>Le+(dt.duracao_em_minutos||0),0),Vu=(()=>{const Le={};return(pi||[]).forEach(dt=>{if(dt.tipo==="status"&&dt.duracao_em_minutos!=null){const xr=dt.status_anterior||dt.de||"Aberta";Le[xr]=(Le[xr]||0)+(dt.duracao_em_minutos||0)}}),Le})(),cl=(()=>{if(!Gt)return 0;const Le=Pt?Date.parse(Pt):We,dt=Date.parse(Gt);return isNaN(dt)||isNaN(Le)?0:Math.max(0,Le-dt-ut)})(),ul=(()=>{if(!gn||!G.prazo)return null;try{return String(gn)<=String(G.prazo)}catch{return null}})(),Lu=qv(ie,{...G});return ne={...G,status:z,revisoes:Un,dataConclusao:gn,dataCriacao:Ke,dataFeedback:ll,historico:pi,tempoProducaoMs:Ye,startedAt:Be,finishedAt:an,previsaoIA:Lu,fxBounceAt:Z?We:G.fxBounceAt||0,slaStartAt:Gt,slaStopAt:Pt,slaPauseMs:ut,pauseStartedAt:qe,slaNetMs:cl,slaOk:ul,leadTotalMin:bu,leadPorFase:Vu},ne})),B&&String(B.id)===String(U)&&ne)try{g(ne)}catch{}const X=ne;if(ae&&X)try{const ie=(X.historico||[]).find(jt=>jt.tipo==="status"),G=ie!=null&&ie.data_hora_evento?Date.parse(ie.data_hora_evento):ie!=null&&ie.data?Date.parse(`${ie.data}T00:00:00Z`):null,Z=new Date().toISOString(),de=X.status!==z&&G?Math.round((Date.now()-G)/6e4):null,De=(()=>{if(!X.prazo)return null;const[jt,Un,ln]=String(X.prazo).split("-").map(Number),gn=new Date(jt,(Un||1)-1,ln||1);gn.setHours(0,0,0,0);const Ke=new Date;return Ke.setHours(0,0,0,0),gn-Ke})(),We=!!(X.prazo&&!(String(z||"").toLowerCase().includes("concluida")||z==="Concluda")&&typeof De=="number"&&De<=864e5),Ye={tipo:"status",autor:V,data:q,data_hora_evento:Z,status_anterior:X.status,status_novo:z,duracao_em_minutos:de,responsavel:V,id_demanda:X.id,de:X.status,para:z},Be=We?{tipo:"alerta",autor:V,data:q,data_hora_evento:Z,mensagem:"Prazo menor que 24h",id_demanda:X.id}:null,At=!!((String(z||"").toLowerCase().includes("aprov")||String(z||"").toLowerCase().includes("conclu"))&&w.autoPostMLabs)?{tipo:"mlabs",autor:V,data:q,data_hora_evento:Z,mensagem:"Postagem agendada via mLabs",id_demanda:X.id}:null,Ct=[Ye,...Be?[Be]:[],...At?[At]:[],...X.historico||[]],Gt=Vo(Dt(ae,cn),Lo("id","==",String(U))),Pt=await Ls(Gt),ut={...X,status:z,dataCriacao:X.status!==z&&(String(z||"").toLowerCase().includes("feedback")||String(z||"").toLowerCase().includes("conclu"))&&!X.dataCriacao?q:X.dataCriacao??null,dataConclusao:String(z||"").toLowerCase().includes("concluida")||z==="Concluda"?X.dataConclusao||q:X.dataConclusao||null,dataFeedback:X.status!==z&&String(z||"").toLowerCase().includes("feedback")&&!X.dataFeedback?q:X.dataFeedback??null,revisoes:(X.revisoes||0)+(X.status!==z&&String(z||"").toLowerCase().includes("revisar")?1:0),historico:Ct,tempoProducaoMs:X.tempoProducaoMs,startedAt:X.startedAt,finishedAt:String(z||"").toLowerCase().includes("concluida")||z==="Concluda"?new Date().toISOString():X.finishedAt||null,slaStartAt:X.slaStartAt,slaStopAt:String(z||"").toLowerCase().includes("concluida")||z==="Concluda"?new Date().toISOString():X.slaStopAt||null,slaPauseMs:X.slaPauseMs,pauseStartedAt:X.pauseStartedAt,slaNetMs:X.slaNetMs,slaOk:X.slaOk??null,leadTotalMin:X.leadTotalMin,leadPorFase:X.leadPorFase},qe=[];Pt.forEach(jt=>qe.push(ds(vt(ae,cn,jt.id),ut))),qe.length&&await Promise.all(qe);try{await Bl(Dt(ae,"historico_status"),Ye)}catch{}}catch{}},Kr=async(U,z,q)=>{r(X=>X.map(ie=>{if(String(ie.id)!==String(U))return ie;const G=[z,...ie.comentarios||[]],Z=Array.isArray(z.mentions)&&z.mentions.length>0?{tipo:"notificacao",autor:V,data:z.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:z.mentions,id_demanda:ie.id}:null,de=Z?[Z,q,...ie.historico||[]]:[q,...ie.historico||[]];return{...ie,comentarios:G,historico:de,fxSavedAt:Date.now()}})),g(X=>X&&String(X.id)===String(U)?{...X,comentarios:[z,...X.comentarios||[]],historico:[q,...X.historico||[]]}:X);const ne=n.find(X=>String(X.id)===String(U));if(ae&&ne)try{const X=Array.isArray(z.mentions)&&z.mentions.length>0?{tipo:"notificacao",autor:V,data:z.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:z.mentions,id_demanda:ne.id}:null,ie=X?[X,q,...ne.historico||[]]:[q,...ne.historico||[]],G=Vo(Dt(ae,cn),Lo("id","==",String(U))),Z=await Ls(G),de=[];Z.forEach(De=>de.push(ds(vt(ae,cn,De.id),{comentarios:[z,...ne.comentarios||[]],historico:ie}))),de.length&&await Promise.all(de)}catch{}},Pn=async U=>{if(r(z=>z.map(q=>q.id===U?{...q,fxDeleting:!0}:q)),setTimeout(()=>{r(z=>z.filter(q=>q.id!==U))},180),ae)try{const z=Vo(Dt(ae,cn),Lo("id","==",String(U))),q=await Ls(z),ne=[];q.forEach(X=>ne.push(zi(vt(ae,cn,X.id)))),ne.length&&await Promise.all(ne)}catch{}},Lt=async(U,z)=>{const q=pr();let ne=null;r(ie=>ie.map(G=>{if(G.id!==U)return G;if((G.historico||[]).some(We=>We.tipo==="alerta"&&We.data===q&&We.mensagem===z))return ne=G,G;const de={tipo:"alerta",autor:V,data:q,data_hora_evento:new Date().toISOString(),mensagem:z,id_demanda:G.id},De={...G,historico:[de,...G.historico||[]]};return ne=De,De}));const X=ne||n.find(ie=>ie.id===U);if(X&&ae)try{const ie={tipo:"alerta",autor:V,data:q,data_hora_evento:new Date().toISOString(),mensagem:z,id_demanda:X.id},G=Vo(Dt(ae,cn),Lo("id","==",String(U))),Z=await Ls(G),de=[];Z.forEach(De=>de.push(ds(vt(ae,cn,De.id),{...X,historico:[ie,...X.historico||[]]}))),de.length&&await Promise.all(de)}catch{}};Q.useEffect(()=>{const U=setInterval(()=>{pr();const z=n.filter(Z=>!hs(Z.status)),q=z.reduce((Z,de)=>{const De=de.designer||"";return Z[De]=(Z[De]||0)+1,Z},{});z.forEach(Z=>{if(Z.prazo)try{const[Be,an,At]=String(Z.prazo).split("-").map(Number),Ct=new Date(Be,(an||1)-1,At||1);Ct.setHours(0,0,0,0);const Gt=new Date;Gt.setHours(0,0,0,0),Ct-Gt<=864e5&&Lt(Z.id,"Prazo menor que 24h")}catch{}const de=(Z.historico||[]).find(Be=>Be.tipo==="status");if(de!=null&&de.data_hora_evento||de!=null&&de.data){const Be=de.data_hora_evento?Date.parse(de.data_hora_evento):Date.parse(`${de.data}T00:00:00Z`);!isNaN(Be)&&Date.now()-Be>=1728e5&&Lt(Z.id,"Demanda estagnada h 48h")}const De=Z.designer||"",We=q[De]||0,Ye=Math.min(100,Math.round(We/4*100));Ye>=100?Lt(Z.id,`Capacidade 100% para ${De}  Risco mximo`):Ye>=85&&Lt(Z.id,`Designer ${De} est com ${Ye}% da capacidade utilizada. Risco de atraso.`),(Z.revisoes||0)>=2&&Lt(Z.id,"Retrabalho acima do limite")});const ne=n.filter(Z=>hs(Z.status)),X=ne.filter(Z=>Z.prazo&&Z.dataConclusao&&Z.dataConclusao<=Z.prazo).length,ie=ne.filter(Z=>Z.prazo&&Z.dataConclusao).length;Math.round(100*(X/Math.max(1,ie)))<80&&z.forEach(Z=>Lt(Z.id,"SLA geral abaixo de 80%"))},6e4);return()=>clearInterval(U)},[n]);const Gr=async({designer:U,tipoMidia:z,titulo:q,link:ne,arquivoNome:X,dataSolic:ie,dataCriacao:G,dataFeedback:Z,plataforma:de,arquivos:De,descricao:We,prazo:Ye,comentarios:Be,historico:an,origem:At,campanha:Ct})=>{const Gt=async()=>{if(!ae)return;const Pt=async(ut,qe)=>{if(qe)try{await la(vt(ae,ut,String(qe)),{name:qe,active:!0},{merge:!0})}catch{}};try{await Pt("cad_tipos",z)}catch{}try{await Pt("cad_plataformas",de)}catch{}try{await Pt("cad_origens",At)}catch{}try{if(an&&Array.isArray(an)){const ut=an[0],qe=(ut==null?void 0:ut.para)||(ut==null?void 0:ut.de)||"Aberta";await Pt("cad_status",qe)}}catch{}};if(R==="edit"&&B){const Pt={...B,designer:U,tipoMidia:z,titulo:q,link:ne,linkDrive,descricao:We,comentarios:Be??B.comentarios,historico:an??B.historico,arquivos:De&&De.length?De:B.arquivos,arquivoNome:X||B.arquivoNome,dataSolicitacao:ie||B.dataSolicitacao,dataCriacao:G||B.dataCriacao,dataFeedback:Z||B.dataFeedback,plataforma:de,prazo:Ye,origem:At,campanha:Ct},ut={...Pt,fxSavedAt:Date.now()};if(r(qe=>qe.map(jt=>jt.id===B.id?ut:jt)),ae)try{const qe=Vo(Dt(ae,cn),Lo("id","==",String(B.id))),jt=await Ls(qe),Un=[];jt.forEach(ln=>Un.push(ds(vt(ae,cn,ln.id),Pt))),Un.length&&await Promise.all(Un)}catch{}await Gt();try{await Lt(B.id,"Demanda salva")}catch{}try{window.alert("Demanda salva com sucesso!")}catch{}}else{const Pt=pr(),ut=new Date().toISOString(),qe={tipo:"status",autor:V,data:Pt,data_hora_evento:ut,status_anterior:"",status_novo:"Aberta",duracao_em_minutos:null,responsavel:V,id_demanda:null,de:"",para:"Aberta"},jt=(t==null?void 0:t.username)||U,Un=qv(n,{designer:jt,tipoMidia:z,plataforma:de,origem:At}),ln=`tmp-${Date.now()}`,gn={id:ln,designer:jt,tipoMidia:z,titulo:q,link:ne,linkDrive,descricao:We,comentarios:[],historico:[qe],arquivos:De||[],arquivoNome:X,plataforma:de,origem:At,campanha:Ct,dataSolicitacao:ie,dataCriacao:void 0,dataFeedback:void 0,status:"Aberta",prazo:Ye,tempoProducaoMs:0,startedAt:null,finishedAt:null,revisoes:0,createdBy:V,previsaoIA:Un,slaStartAt:null,slaStopAt:null,slaPauseMs:0,pauseStartedAt:null,slaNetMs:0,slaOk:null,leadTotalMin:0,leadPorFase:{}};if(r(Ke=>[gn,...Ke]),ae)try{const Ke={...gn,id:String(ln),createdAt:vv()};Ke.dataSolicitacao===void 0&&(Ke.dataSolicitacao=null),Ke.dataCriacao===void 0&&(Ke.dataCriacao=null),Ke.dataFeedback===void 0&&(Ke.dataFeedback=null),Ke.arquivoNome===void 0&&(Ke.arquivoNome=null),await Bl(Dt(ae,cn),Ke);const Qt={...qe,id_demanda:ln};try{await Bl(Dt(ae,"historico_status"),Qt)}catch{}}catch(Ke){const Qt=(Ke==null?void 0:Ke.code)||(Ke==null?void 0:Ke.message)||"Falha ao gravar";try{window.alert(String(Qt))}catch{}}await Gt();try{await Lt(ln,"Demanda salva")}catch{}}x(!1),E("demandas")},H=async()=>{if(window.confirm("Confirmar: apagar TODAS as demandas e limpar relatrios?")){r([]);try{b({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""})}catch{}if(ae)try{const U=await Ls(Dt(ae,cn)),z=[];U.forEach(q=>z.push(zi(vt(ae,cn,q.id)))),z.length&&await Promise.all(z)}catch{}}};return l.jsxs("div",{className:"layout",children:[t?l.jsx(bk,{route:y,setRoute:E,allowedRoutes:ce}):null,l.jsx("div",{className:`content ${t?"":"no-sidebar"} page`,children:l.jsxs("div",{className:"app",children:[t?l.jsx(Sk,{onNew:Xn,view:u,setView:h,showNew:!!t,user:t,onLogout:be,mentions:Kt,onOpenDemanda:U=>{const z=n.find(q=>String(q.id)===String(U));z&&(E("demandas"),Jn(z))}}):null,!t&&l.jsx(Ak,{onLogin:ke}),t&&y==="dashboard"&&ce.includes("dashboard")&&l.jsx(Uk,{demandas:n,items:Ln,designers:xn,setView:h,onEdit:Jn,onStatus:Zn,cadStatus:k,onDelete:Pn,onDuplicate:Cn,compact:p,calRef:Fn,setCalRef:Yn,loading:o}),t&&y==="demandas"&&ce.includes("demandas")&&l.jsx("div",{className:"demandas-layout",children:l.jsxs("div",{className:"content-col",children:[l.jsx("div",{className:"top-filters",children:l.jsx(Fk,{filtros:N,setFiltros:b,designers:Ie,showSearch:!1,statusCounts:Gn})}),l.jsxs("div",{className:"top-search",children:[l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:N.q||"",onChange:U=>b(z=>({...z,q:U.target.value}))}),l.jsxs("button",{className:"primary",onClick:Xn,disabled:!$e,children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto"},children:l.jsx(xk,{view:u,setView:h})})]}),Vt>0&&l.jsx("div",{className:"alert-banner",title:"Demandas em reviso",children:(()=>{const U=An,z=U.length<=2?U.join(" e "):`${U.slice(0,U.length-1).join(", ")} e ${U[U.length-1]}`,q=U.length>1?"tm":"tem",ne=Vt>1?"demandas":"demanda",X=U.length?`Ateno ${z} ${q} ${Vt} ${ne} com status para revisar  verifique e priorize`:`Ateno: ${Vt} ${ne} com status para revisar  verifique e priorize`;return l.jsx("div",{className:"alert-text",children:X})})()}),u==="table"&&l.jsx("div",{className:"table-scroll",children:l.jsx(Nk,{items:Te.slice(0,mn),onEdit:Jn,onStatus:Zn,cadStatus:k,onDelete:Pn,onDuplicate:Cn,hasMore:Te.length>mn,showMore:()=>Qn(U=>Math.min(U+10,Te.length)),canCollapse:mn>10,showLess:()=>Qn(10),shown:Math.min(mn,Te.length),total:Te.length,compact:p,canEdit:!!t,loading:o})}),u==="calendar"&&l.jsx(kk,{items:Te,refDate:Fn}),l.jsx(Rk,{open:S,mode:R,onClose:()=>x(!1),onSubmit:Gr,initial:B,cadTipos:Ne,designers:Ie,cadPlataformas:pt,onDelete:Pn,userLabel:V,canDelete:st,onAddComment:Kr,cadOrigens:O,currentUser:(t==null?void 0:t.username)||"",usersAll:F,canEdit:(t==null?void 0:t.role)==="admin",displayUser:se,onStatus:Zn}),l.jsx(Ck,{open:$,filtros:N,setFiltros:b,designers:Ie,onClose:()=>C(!1),cadStatus:k,cadTipos:Ne,origens:O,campanhas:Sn})]})}),t&&y==="config"&&ce.includes("config")&&l.jsx(Lk,{themeVars:v,setThemeVars:I,onReset:H,appSettings:w,setAppSettings:P}),t&&y==="cadastros"&&ce.includes("cadastros")&&l.jsx(jk,{cadStatus:k,setCadStatus:A,cadTipos:Ne,setCadTipos:tt,cadPlataformas:pt,setCadPlataformas:mt,cadOrigens:O,setCadOrigens:D,cadStatusColors:ve,setCadStatusColors:Ve}),t&&y==="relatorios"&&ce.includes("relatorios")&&l.jsx(Bk,{demandas:n,items:Te,designers:Ie,filtros:N,setFiltros:b,loading:o}),t&&y==="usuarios"&&ce.includes("usuarios")&&l.jsx(Vk,{role:St})]})})]})}class Mk extends ty.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){try{console.error(e,n)}catch{}}render(){return this.state.hasError?l.jsxs("div",{className:"page",style:{padding:20},children:[l.jsx("div",{className:"panel",role:"alert",children:"Ocorreu um erro na aplicao."}),l.jsx("button",{className:"primary",onClick:()=>{try{window.location.reload()}catch{}},children:"Recarregar"})]}):this.props.children}}function Ok(){return l.jsx(Mk,{children:l.jsx(Dk,{})})}function bk({route:t,setRoute:e,allowedRoutes:n}){return l.jsx("aside",{className:"sidebar",children:l.jsx("nav",{children:l.jsx("ul",{className:"nav-list",children:n.map(r=>l.jsx("li",{children:l.jsxs("a",{href:"#",className:`nav-link ${t===r?"active":""}`,onClick:s=>{s.preventDefault(),e(r)},children:[l.jsx("span",{className:"nav-ico",children:r==="dashboard"?l.jsx(Ae,{name:"dashboard"}):r==="demandas"?l.jsx(Ae,{name:"demandas"}):r==="config"?l.jsx(Ae,{name:"config"}):r==="cadastros"?l.jsx(Ae,{name:"cadastros"}):r==="relatorios"?l.jsx(Ae,{name:"relatorios"}):l.jsx(Ae,{name:"usuarios"})}),l.jsx("span",{children:r==="dashboard"?"Dashboard":r==="demandas"?"Demandas":r==="config"?"Configuraes":r==="cadastros"?"Cadastros":r==="relatorios"?"Relatrios":"Usurios"})]})},r))})})})}function Vk({users:t,onCreate:e,onDelete:n,onUpdate:r,role:s}){const[i,o]=Q.useState(""),[c,u]=Q.useState(""),[h,p]=Q.useState(""),[m,y]=Q.useState(""),[E,N]=Q.useState("comum"),[b,$]=Q.useState("Designer"),[C,S]=Q.useState([]),x=Q.useMemo(()=>Lv?vk(Lv,"us-central1"):null,[]),[R,j]=Q.useState({});Q.useEffect(()=>{if(ae){const O=zs(Dt(ae,"usuarios"),D=>{const F=[];D.forEach(K=>F.push({id:K.id,...K.data()})),S(F)});return()=>{try{O()}catch{}}}else S([])},[]);const[B,g]=Q.useState({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),[v,I]=Q.useState({criar:!0,excluir:!0,visualizar:!0}),w=(O,D)=>O(F=>({...F,[D]:!F[D]})),P=async()=>{const O=i.trim(),D=m.trim()||`${O}@betaki.bet.br`;if(!O||!h)return;const F={name:c||O,role:E,cargo:b,pages:B,actions:v};try{if(x){await zv(x,"createUser")({username:O,password:h,email:D,profile:F});try{window.alert("Usurio criado com sucesso!")}catch{}}}catch(K){try{if(x){await _k(x,"https://us-central1-mkt-betaki.cloudfunctions.net/createUser")({username:O,password:h,email:D,profile:F});try{window.alert("Usurio criado com sucesso!")}catch{}}else throw K}catch(J){try{window.alert(String((J==null?void 0:J.code)||(J==null?void 0:J.message)||"Falha ao criar usurio"))}catch{}}}o(""),u(""),p(""),y(""),N("comum"),$("Designer"),g({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),I({criar:!0,excluir:!0,visualizar:!0})},k=async O=>{if((O.username||O.id)!=="admin"&&ae)try{await zi(vt(ae,"usuarios",O.username||O.id)),S(D=>D.filter(F=>(F.username||F.id)!==(O.username||O.id)))}catch{}},A=async O=>{const D=String(R[O.username||O.id]||"").trim();if(D&&x)try{await zv(x,"updateUserPassword")({username:O.username||O.id,password:D,email:O.email||void 0}),j(K=>({...K,[O.username||O.id]:""}));try{window.alert("Senha atualizada com sucesso!")}catch{}}catch(F){try{window.alert(String((F==null?void 0:F.code)||(F==null?void 0:F.message)||"Falha ao atualizar senha"))}catch{}}},Ne=async(O,D)=>{const F=O.pages||{},K={pages:{...F,[D]:!F[D]}};if(ae)try{await ds(vt(ae,"usuarios",O.username||O.id),K),S(J=>J.map(se=>se.username===O.username||se.id===O.id?{...se,...K}:se))}catch{}},tt=async(O,D)=>{const F=O.actions||{},K={actions:{...F,[D]:!F[D]}};if(ae)try{await ds(vt(ae,"usuarios",O.username||O.id),K),S(J=>J.map(se=>se.username===O.username||se.id===O.id?{...se,...K}:se))}catch{}},pt=async(O,D)=>{const F={cargo:D};if(ae)try{await ds(vt(ae,"usuarios",O.username||O.id),F),S(K=>K.map(J=>J.username===O.username||J.id===O.id?{...J,...F}:J))}catch{}},mt=async(O,D)=>{const F={role:D};if(ae)try{await ds(vt(ae,"usuarios",O.username||O.id),F),S(K=>K.map(J=>J.username===O.username||J.id===O.id?{...J,...F}:J))}catch{}};return l.jsxs("div",{className:"panel users-panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Usurios"})}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Usurio"}),l.jsx("input",{value:i,onChange:O=>o(O.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Nome"}),l.jsx("input",{value:c,onChange:O=>u(O.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Senha"}),l.jsx("input",{type:"password",value:h,onChange:O=>p(O.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",value:m,onChange:O=>y(O.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Perfil"}),l.jsxs("select",{value:E,onChange:O=>N(O.target.value),children:[l.jsx("option",{value:"comum",children:"Comum"}),l.jsx("option",{value:"gerente",children:"Gerente"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Cargo"}),l.jsxs("select",{value:b,onChange:O=>$(O.target.value),children:[l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Pginas"}),l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(O=>l.jsxs("button",{className:`btn-md ${B[O]?"active":""}`,type:"button",onClick:()=>w(g,O),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:O==="dashboard"?"dashboard":O==="demandas"?"demandas":O==="config"?"config":O==="cadastros"?"cadastros":O==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:O==="dashboard"?"Dashboard":O==="demandas"?"Demandas":O==="config"?"Configuraes":O==="cadastros"?"Cadastros":O==="relatorios"?"Relatrios":"Usurios"})]},O))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Aes"}),l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([O,D,F])=>l.jsxs("button",{className:`btn-md ${v[O]?"active":""}`,type:"button",onClick:()=>w(I,O),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:D})}),l.jsx("span",{children:F})]},O))})]}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"primary",type:"button",onClick:P,children:"Criar usurio"})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usurio"}),l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Perfil"}),l.jsx("th",{children:"Cargo"}),l.jsx("th",{children:"Pginas"}),l.jsx("th",{children:"Aes"}),l.jsx("th",{children:"Senha"}),l.jsx("th",{children:"Gerenciar"})]})}),l.jsx("tbody",{children:(C||[]).map(O=>l.jsxs("tr",{children:[l.jsx("td",{children:O.username}),l.jsx("td",{children:O.name||O.username}),l.jsx("td",{children:s==="admin"?l.jsxs("select",{value:O.role||"comum",onChange:D=>mt(O,D.target.value),children:[l.jsx("option",{value:"comum",children:"Comum"}),l.jsx("option",{value:"gerente",children:"Gerente"}),l.jsx("option",{value:"admin",children:"Admin"})]}):O.role||"comum"}),l.jsx("td",{children:l.jsxs("select",{value:O.cargo||"",onChange:D=>pt(O,D.target.value),children:[l.jsx("option",{value:"",children:"Selecione"}),l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(D=>{var F;return l.jsxs("button",{className:`btn-md ${((F=O.pages)==null?void 0:F[D])===!0?"active":""}`,type:"button",onClick:()=>Ne(O,D),disabled:s!=="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:D==="dashboard"?"dashboard":D==="demandas"?"demandas":D==="config"?"config":D==="cadastros"?"cadastros":D==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:D==="dashboard"?"Dashboard":D==="demandas"?"Demandas":D==="config"?"Configuraes":D==="cadastros"?"Cadastros":D==="relatorios"?"Relatrios":"Usurios"})]},D)})})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([D,F,K])=>{var J;return l.jsxs("button",{className:`btn-md ${((J=O.actions)==null?void 0:J[D])===!0?"active":""}`,type:"button",onClick:()=>tt(O,D),disabled:s!=="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:F})}),l.jsx("span",{children:K})]},D)})})}),l.jsx("td",{children:l.jsxs("div",{className:"form-row",children:[l.jsx("input",{type:"password",placeholder:"Nova senha",value:R[O.username||O.id]||"",onChange:D=>j(F=>({...F,[O.username||O.id]:D.target.value}))}),l.jsx("button",{className:"primary",type:"button",onClick:()=>A(O),children:"Salvar"})]})}),l.jsx("td",{children:l.jsxs("button",{className:"icon",onClick:()=>k(O),disabled:O.username==="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"trash"})}),l.jsx("span",{children:"Excluir"})]})})]},O.username))})]})]})}function Lk({themeVars:t,setThemeVars:e,onReset:n,appSettings:r,setAppSettings:s}){const[i,o]=Q.useState(t||{}),[c,u]=Q.useState(""),[h,p]=Q.useState("");Q.useEffect(()=>{o(t||{})},[t]);const m=g=>/^#[0-9a-fA-F]{6}$/.test(g||""),y=g=>/^#[0-9a-fA-F]{8}$/.test(g||""),E=g=>/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0|1|0?\.\d+)\)$/.exec(g||""),N=g=>Math.max(0,Math.min(255,g|0)).toString(16).padStart(2,"0"),b=g=>({r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16)}),$=g=>{if(m(g))return{fmt:"hex6",base:g,a:1};if(y(g))return{fmt:"hex8",base:"#"+g.slice(1,7),a:parseInt(g.slice(7,9),16)/255};const v=E(g);return v?{fmt:"rgba",base:"#"+N(+v[1])+N(+v[2])+N(+v[3]),a:parseFloat(v[4])}:{fmt:"other",base:g,a:1}},C=(g,v,I)=>{const w=g==="hover"?"rgba":g==="border"||g==="btnBorder"?"hex8":"hex6";if(w==="hex6"||I>=1)return v;if(w==="hex8")return v+N(Math.round(I*255));const{r:P,g:k,b:A}=b(v);return`rgba(${P},${k},${A},${I})`},S=(g,v)=>{const I={...i,[g]:v};o(I),e(I)},x=(g,v)=>{const I=$(i[g]||""),w=Math.max(0,Math.min(100,Number(v)||0))/100,P=C(g,I.base,w);S(g,P)},R=()=>{if(!c)return;const g={...i,[c]:h||""};o(g),e(g),u(""),p("")},j=()=>e(EE),B=[{title:"Base",keys:["bg","panel","accent"]},{title:"Texto",keys:["text","muted"]},{title:"Traado",keys:["border"]},{title:"Botes",keys:["btnBg","btnText","btnHoverBg","btnBorder"]},{title:"Hover/Efeitos",keys:["hover","shadow"]},{title:"Extras",keys:["green","yellow","red","chart"]}];return l.jsxs("div",{className:"panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Tema"})}),l.jsxs("div",{className:"config-grid",children:[B.map(g=>l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"title",children:g.title}),g.keys.map(v=>{const I=i[v]||"",w=$(I),P=w.fmt!=="other",k=v==="hover"||v==="border"||v==="btnBorder";return l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:v}),l.jsxs("div",{className:"color-row",children:[P?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"color",value:w.base,onChange:A=>S(v,C(v,A.target.value,w.a))}),k&&l.jsx("input",{className:"alpha",type:"range",min:"0",max:"100",step:"1",value:Math.round(w.a*100),onChange:A=>x(v,A.target.value),title:`Alpha ${Math.round(w.a*100)}%`})]}):l.jsx("input",{value:I,onChange:A=>S(v,A.target.value)}),l.jsx("div",{className:"swatch",style:{background:I}})]})]},v)})]},g.title)),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Adicionar varivel"}),l.jsxs("div",{className:"color-row",children:[l.jsx("input",{placeholder:"nome",value:c,onChange:g=>u(g.target.value)}),l.jsx("input",{placeholder:"valor",value:h,onChange:g=>p(g.target.value)}),l.jsx("button",{className:"primary",type:"button",onClick:R,children:"Adicionar"})]})]}),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Integraes"}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Autopost via mLabs"}),l.jsx("input",{type:"checkbox",checked:!!r.autoPostMLabs,onChange:g=>s(v=>({...v,autoPostMLabs:g.target.checked}))})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"danger",type:"button",onClick:n,children:"Resetar sistema"}),l.jsx("button",{className:"primary",type:"button",onClick:j,children:"Restaurar padro"})]})]})}function Fk({filtros:t,setFiltros:e,designers:n,showSearch:r,statusCounts:s}){const[i,o]=Q.useState("today");Q.useEffect(()=>{const E=new Date,N=j=>{const B=g=>String(g).padStart(2,"0");return`${j.getFullYear()}-${B(j.getMonth()+1)}-${B(j.getDate())}`},b=j=>{const B=new Date(j),g=B.getDay()||7;return B.setDate(B.getDate()-(g-1)),new Date(B.getFullYear(),B.getMonth(),B.getDate())},$=j=>{const B=b(j),g=new Date(B);return g.setDate(g.getDate()+6),g},C=new Date(E.getFullYear(),E.getMonth(),1),S=new Date(E.getFullYear(),E.getMonth()+1,0),x=new Date(E.getFullYear(),E.getMonth()-1,1),R=new Date(E.getFullYear(),E.getMonth(),0);if(i==="today"&&e(j=>({...j,sIni:N(E),sFim:N(E),cIni:"",cFim:""})),i==="week"){const j=b(E),B=$(E);e(g=>({...g,sIni:N(j),sFim:N(B),cIni:"",cFim:""}))}if(i==="nextweek"){const j=b(E);j.setDate(j.getDate()+7);const B=$(j);e(g=>({...g,sIni:N(j),sFim:N(B),cIni:"",cFim:""}))}if(i==="month"&&e(j=>({...j,sIni:N(C),sFim:N(S),cIni:"",cFim:""})),i==="lastmonth"&&e(j=>({...j,sIni:N(x),sFim:N(R),cIni:"",cFim:""})),i==="last30"){const j=new Date(E);j.setDate(j.getDate()-29),e(B=>({...B,sIni:N(j),sFim:N(E),cIni:"",cFim:""}))}},[i]);const c=E=>e(N=>({...N,designer:E==="Todos"?"":E})),u=["Hoje","Semana","Prxima semana","Ms","Ms passado","ltimos 30 dias"],h=E=>E==="Hoje"?"today":E==="Semana"?"week":E==="Prxima semana"?"nextweek":E==="Ms"?"month":E==="Ms passado"?"lastmonth":"last30",p=["Todos",...n],m=E=>E==="Pendente"?"gray":E==="Em produo"?"yellow":E==="Revisar"?"red":E==="Aguardando Feedback"?"purple":E==="Aprovada"?"green-approve":E==="Concluida"||E==="Concluda"?"green-dark":"",y=E=>E==="Pendente"?"":E==="Em produo"?"":E==="Aguardando Feedback"?"":E==="Revisar"?"":E==="Aprovada"?"":E==="Concluida"||E==="Concluda"?"":"";return l.jsxs("div",{className:"filterbar",children:[r!==!1&&l.jsx("div",{className:"seg",style:{flex:1,minWidth:220},children:l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:t.q||"",onChange:E=>e(N=>({...N,q:E.target.value}))})}),l.jsxs("div",{className:"filters-row",children:[l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Perodo"}),u.map(E=>l.jsxs("button",{className:`btn-md ${i===h(E)?"active":""}`,onClick:()=>o(h(E)),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"calendar"})}),l.jsx("span",{children:E})]},E))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Designer"}),p.map(E=>l.jsxs("button",{className:`btn-md ${(t.designer||"")===E||E==="Todos"&&!t.designer?"active":""}`,onClick:()=>c(E),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"usuarios"})}),l.jsx("span",{children:E})]},E))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Status"}),ao.map(E=>l.jsxs("button",{className:`btn-md ${m(E)} ${(t.status||"")===E?"active":""}`,onClick:()=>e(N=>({...N,status:N.status===E?void 0:E})),children:[l.jsx("span",{className:"emoji",children:y(E)}),l.jsx("span",{children:E}),(s==null?void 0:s[E])>0?l.jsx("span",{className:"alert-count",children:s[E]}):null]},E))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Data"}),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"calendar"})}),l.jsx("input",{type:"date",value:t.cIni||"",onChange:E=>e(N=>({...N,cIni:E.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:t.cFim||"",onChange:E=>e(N=>({...N,cFim:E.target.value}))})]})]})]})]})}function Uk({demandas:t,items:e,designers:n,setView:r,onEdit:s,onStatus:i,cadStatus:o,onDelete:c,onDuplicate:u,compact:h,calRef:p,setCalRef:m,loading:y}){const E=e.length,N=e.filter(D=>hs(D.status)),b=N.length,$=e.filter(D=>!hs(D.status)).length,C=e.reduce((D,F)=>D+(F.revisoes||0),0),S=Math.round(100*(e.filter(D=>(D.revisoes||0)>0).length/Math.max(1,E))),x=(()=>{const D=N.filter(K=>K.prazo&&K.dataConclusao&&K.dataConclusao<=K.prazo).length,F=N.filter(K=>K.prazo&&K.dataConclusao).length;return Math.round(100*(D/Math.max(1,F)))})(),R=(()=>{const D=se=>{if(!se)return null;const[ve,Ve,ze]=String(se).split("-").map(Number);return new Date(ve,Ve-1,ze)},F=e.map(se=>D(se.dataCriacao||se.dataSolicitacao)).filter(Boolean).sort((se,ve)=>se-ve);if(!F.length)return 0;const K=F[0],J=F[F.length-1];return Math.max(1,Math.round((J-K)/864e5)+1)})(),j=4,B=n.length*j*R,g=(()=>{const D=B;return D?Math.round(100*(b/D)):0})(),v=e.filter(D=>Fp(D.status)).length,I=e.filter(D=>Lp(D.status)).length,w=(()=>{const D={};N.forEach(K=>{const J=K.designer||"";D[J]=(D[J]||0)+1});const F=j*R;return n.map(K=>{const J=D[K]||0,se=F?Math.round(100*(J/F)):0,ve=F===0||se<=90?"Verde":se<=110?"Amarelo":"Vermelho";return{designer:K,ideal:F,real:J,used:se,status:ve}})})(),P=(()=>{const D={};return e.forEach(F=>{if(!hs(F.status)){const K=F.designer||"";D[K]=(D[K]||0)+1}}),D})(),k=(()=>{const D=[];return w.forEach(K=>{K.used>=110?D.push(`Designer ${K.designer} sobrecarregado (${K.used}%)  risco de atraso`):K.used>=90&&D.push(`Designer ${K.designer} com carga alta (${K.used}%)  monitorar prazos`);const J=P[K.designer]||0;J>=j*2&&D.push(`Designer ${K.designer} com ${J} demandas ativas  priorizar distribuio`)}),e.filter(K=>{if(hs(K.status)||!K.prazo)return!1;const[J,se,ve]=String(K.prazo).split("-").map(Number),Ve=new Date(J,(se||1)-1,ve||1),ze=new Date;return ze.setHours(0,0,0,0),Ve.setHours(0,0,0,0),Ve-ze<=864e5}).slice(0,5).forEach(K=>D.push(`Prazo crtico: ${K.titulo} (${K.designer||""})`)),D})(),A=(()=>{const D=new Map;return N.forEach(F=>D.set(F.designer||"",(D.get(F.designer||"")||0)+1)),Array.from(D.entries()).map(([F,K])=>({designer:F,qty:K}))})(),Ne=(()=>{const D=(K,J)=>{const se=ve=>{const[Ve,ze,ct]=String(ve).split("-").map(Number);return new Date(Ve,ze-1,ct)};return!K||!J?null:Math.max(0,Math.round((se(J)-se(K))/864e5))},F={};return e.forEach(K=>{if(K.dataConclusao){const J=K.designer||"",se=D(K.dataCriacao||K.dataSolicitacao,K.dataConclusao);if(se!=null){const ve=F[J]||{cnt:0,sum:0,min:9999,max:0};F[J]={cnt:ve.cnt+1,sum:ve.sum+se,min:Math.min(ve.min,se),max:Math.max(ve.max,se)}}}}),Object.entries(F).map(([K,J])=>({designer:K,media:J.sum/J.cnt||0}))})(),tt=(()=>{const D={};return e.forEach(F=>{if(F.prazo&&F.dataConclusao){const K=F.designer||"",J=F.dataConclusao<=F.prazo,se=D[K]||{ok:0,total:0};D[K]={ok:se.ok+(J?1:0),total:se.total+1}}}),Object.entries(D).map(([F,K])=>({designer:F,pct:Math.round(100*(K.ok/(K.total||1)))}))})(),pt=(()=>{const D={};return e.forEach(F=>{const K=F.designer||"",J=F.revisoes||0,se=D[K]||{rTot:0,cnt:0};D[K]={rTot:se.rTot+J,cnt:se.cnt+1}}),Object.entries(D).map(([F,K])=>({designer:F,porPeca:+(K.rTot/(K.cnt||1)).toFixed(2)}))})(),mt=(()=>{const D=A.reduce((xe,{designer:Ie,qty:Te})=>(xe[Ie]=Te,xe),{}),F=tt.reduce((xe,{designer:Ie,pct:Te})=>(xe[Ie]=Te,xe),{}),K=Ne.reduce((xe,{designer:Ie,media:Te})=>(xe[Ie]=Te,xe),{}),J=pt.reduce((xe,{designer:Ie,porPeca:Te})=>(xe[Ie]=Te,xe),{}),se=Array.from(new Set([...Object.keys(D),...Object.keys(F),...Object.keys(K),...Object.keys(J)])).filter(Boolean),ve=(xe,Ie,Te)=>Te===Ie?1:Math.max(0,Math.min(1,(xe-Ie)/(Te-Ie))),Ve=Math.max(...Object.values(D||{_:-1}),0),ze=Math.min(...Object.values(D||{_:-1}),0),ct=100,Qe=0,Sn=Math.max(...Object.values(K||{_:-1}),0),St=Math.min(...Object.values(K||{_:-1}),0),xt=Math.max(...Object.values(J||{_:-1}),0),Ln=Math.min(...Object.values(J||{_:-1}),0);return se.map(xe=>{const Ie=ve(D[xe]||0,ze,Ve),Te=ve(F[xe]||0,Qe,ct),Kt=1-ve(K[xe]||0,St,Sn),Vt=1-ve(J[xe]||0,Ln,xt),An=Math.round((Ie*.4+Te*.3+Kt*.2+Vt*.1)*100);return{designer:xe,score:An,sla:F[xe]||0,retrab:J[xe]||0}}).sort((xe,Ie)=>Ie.score-xe.score).slice(0,5)})(),O=(()=>{const D=Array.from({length:11},(K,J)=>J+8),F={};return n.forEach(K=>F[K]=D.map(J=>0)),e.forEach(K=>{if(K.startedAt)try{const se=new Date(K.startedAt).getHours();if(se>=8&&se<=18){const ve=K.designer||"",Ve=se-8;F[ve]&&F[ve][Ve]++}}catch{}}),{horas:D,per:F}})();return y?l.jsxs("div",{className:"dashboard",children:[l.jsx("div",{className:"exec-summary",children:Array.from({length:5}).map((D,F)=>l.jsx("div",{className:"skeleton row"},F))}),l.jsx("div",{className:"section-grid",children:Array.from({length:2}).map((D,F)=>l.jsx("div",{className:"skeleton card",style:{height:160}},F))})]}):l.jsxs("div",{className:"dashboard",children:[l.jsxs("div",{className:"exec-summary",children:[l.jsx("div",{className:"exec-title",children:"RESUMO EXECUTIVO DO PERODO"}),l.jsxs("div",{className:"exec-grid",children:[l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Produo total"}),l.jsx("div",{className:"exec-value",children:b})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"SLA geral"}),l.jsxs("div",{className:"exec-value",style:{color:x>=90?"#BCD200":x>=70?"#FFE55C":"#FF5E5E"},children:[x,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"% retrabalho"}),l.jsxs("div",{className:"exec-value",children:[S,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Backlog atual"}),l.jsx("div",{className:"exec-value",children:$})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Capacidade usada"}),l.jsxs("div",{className:"exec-value",children:[g,"%"]}),l.jsx("div",{className:"progress",children:l.jsx("div",{className:"progress-fill",style:{width:`${g}%`,background:"#BCD200"}})})]})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PRODUO"}),l.jsxs("div",{className:"badge-grid",children:[l.jsxs("div",{className:"badge blue",children:[l.jsx("div",{children:"Criadas"}),l.jsx("div",{children:E})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"Concludas"}),l.jsx("div",{children:b})]}),l.jsxs("div",{className:"badge yellow",children:[l.jsx("div",{children:"Em produo"}),l.jsx("div",{children:v})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"Pendentes"}),l.jsx("div",{children:I})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"QUALIDADE"}),l.jsxs("div",{className:"badge-group",children:[l.jsxs("div",{className:"badge purple",children:[l.jsx("div",{children:"Revises"}),l.jsx("div",{children:C})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"% Retrabalho"}),l.jsxs("div",{children:[S,"%"]})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"SLA"}),l.jsxs("div",{children:[x,"%"]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PESSOAS"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Score"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"%Retrab"})]})}),l.jsx("tbody",{children:mt.map((D,F)=>l.jsxs("tr",{children:[l.jsx("td",{children:F+1}),l.jsx("td",{children:D.designer}),l.jsx("td",{children:D.score}),l.jsxs("td",{children:[D.sla,"%"]}),l.jsx("td",{children:Math.round((D.retrab||0)*100)/100})]},D.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"OPERAO"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Capacidade ideal"}),l.jsx("th",{children:"Produo real"}),l.jsx("th",{children:"Capacidade usada"}),l.jsx("th",{children:"Status"})]})}),l.jsx("tbody",{children:w.map(D=>l.jsxs("tr",{children:[l.jsx("td",{children:D.designer}),l.jsx("td",{children:D.ideal}),l.jsx("td",{children:D.real}),l.jsxs("td",{children:[D.used,"%"]}),l.jsx("td",{style:{color:D.status==="Verde"?"#00C58E":D.status==="Amarelo"?"#FFE55C":"#FF5E5E"},children:D.status})]},D.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"ASSISTENTE IA"}),l.jsx("div",{className:"insights-grid",children:k.map((D,F)=>l.jsxs("div",{className:"insight-card",style:{opacity:0,animation:"pageIn .6s forwards"},children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:D})]},F))})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"HEATMAP DE PRODUTIVIDADE POR HORRIO"}),l.jsxs("div",{className:"heatmap",children:[l.jsxs("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:[l.jsx("div",{className:"chart-label",style:{width:120}}),O.horas.map(D=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(D).padStart(2,"0"),"h"]},D))]}),n.map(D=>l.jsxs("div",{className:"heat-row",style:{alignItems:"center"},children:[l.jsx("div",{className:"chart-label",style:{width:120},children:D}),O.horas.map((F,K)=>{const J=(O.per[D]||[])[K]||0,se=J===0?"#222":J<2?"#4DA3FF33":"#4DA3FF";return l.jsx("div",{className:"heat-cell",style:{background:se,width:24,height:24},title:`${D} ${String(F).padStart(2,"0")}h: ${J}`},F)})]},D))]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"LINHA DO TEMPO DE PRODUO MENSAL"}),l.jsx("div",{className:"chips",children:A.map(({designer:D,qty:F})=>l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[l.jsx("span",{className:"chip",children:D}),l.jsx(Ik,{series:[Math.max(1,F-1),F,F+1],color:"#4DA3FF"})]},D))})]})]})]})}function Bk({demandas:t,items:e,designers:n,filtros:r,setFiltros:s,loading:i}){var Qn,Fn,Yn;const o=["Hoje","Semana","Ms","Ms passado"],c=T=>T==="Hoje"?"today":T==="Semana"?"week":T==="Ms"?"month":"lastmonth",[u,h]=Q.useState("month"),[p,m]=Q.useState(n[0]||""),[y,E]=Q.useState(n[1]||"");Q.useEffect(()=>{const T=new Date,M=$e=>{const st=wt=>String(wt).padStart(2,"0");return`${$e.getFullYear()}-${st($e.getMonth()+1)}-${st($e.getDate())}`},V=$e=>{const st=new Date($e),wt=st.getDay()||7;return st.setDate(st.getDate()-(wt-1)),new Date(st.getFullYear(),st.getMonth(),st.getDate())},oe=$e=>{const st=V($e),wt=new Date(st);return wt.setDate(wt.getDate()+6),wt},ce=new Date(T.getFullYear(),T.getMonth(),1),be=new Date(T.getFullYear(),T.getMonth()+1,0),ke=new Date(T.getFullYear(),T.getMonth()-1,1),gt=new Date(T.getFullYear(),T.getMonth(),0);if(u==="today"&&s($e=>({...$e,cIni:M(T),cFim:M(T)})),u==="week"){const $e=V(T),st=oe(T);s(wt=>({...wt,cIni:M($e),cFim:M(st)}))}u==="month"&&s($e=>({...$e,cIni:M(ce),cFim:M(be)})),u==="lastmonth"&&s($e=>({...$e,cIni:M(ke),cFim:M(gt)}))},[u]);const N=["Todos",...n],b=T=>s(M=>({...M,designer:T==="Todos"?"":T})),$=["Todos",...Array.from(new Set(t.map(T=>T.tipoMidia).filter(Boolean)))],C=T=>s(M=>({...M,tipoMidia:T==="Todos"?"":T})),S=["Todos",...bp],x=T=>s(M=>({...M,origem:T==="Todos"?"":T})),R=["Todos",...Array.from(new Set(t.map(T=>T.campanha).filter(Boolean)))],j=T=>s(M=>({...M,campanha:T==="Todos"?"":T})),B=["Todos",...ao],g=T=>s(M=>({...M,status:T==="Todos"?"":T})),v=(()=>{const T=oe=>{if(!oe)return null;const[ce,be,ke]=oe.split("-").map(Number);return new Date(ce,be-1,ke)},M=T(r.cIni),V=T(r.cFim);return!M||!V?1:Math.max(1,Math.round((V-M)/864e5)+1)})(),I=e.filter(T=>hs(T.status));e.filter(T=>Lp(T.status)),e.filter(T=>Fp(T.status)),e.reduce((T,M)=>T+(M.revisoes||0),0),I.length/v;const w=e.filter(T=>!hs(T.status)),P=T=>{if(!T)return null;const[M,V,oe]=String(T).split("-").map(Number),ce=new Date(M,(V||1)-1,oe||1),be=new Date;return be.setHours(0,0,0,0),ce.setHours(0,0,0,0),Math.round((ce-be)/864e5)},k=w.filter(T=>{const M=P(T.prazo);return M!=null&&M<=2}),A=(()=>{const T=w.map(V=>P(V.prazo)).filter(V=>V!=null);return+(T.reduce((V,oe)=>V+oe,0)/(T.length||1)).toFixed(1)})(),tt=(()=>{const T=w.filter(V=>{const oe=P(V.prazo);return oe!=null&&oe<0}).length,M=w.length||1;return Math.round(100*(T/M))})()>30?"Acumulando atraso":"Saudvel",pt=(T,M)=>{const V=oe=>{const[ce,be,ke]=String(oe).split("-").map(Number);return new Date(ce,be-1,ke)};return!T||!M?null:Math.max(0,Math.round((V(M)-V(T))/864e5))},mt=I.map(T=>pt(T.dataCriacao||T.dataSolicitacao,T.dataConclusao)).filter(T=>T!=null),O=+(mt.reduce((T,M)=>T+M,0)/(mt.length||1)).toFixed(1),D=(()=>{const T={};return I.forEach(M=>{const V=M.tipoMidia||"Outro",oe=pt(M.dataCriacao||M.dataSolicitacao,M.dataConclusao);if(oe!=null){const ce=T[V]||{cnt:0,sum:0};T[V]={cnt:ce.cnt+1,sum:ce.sum+oe}}}),Object.entries(T).map(([M,V])=>({tipo:M,media:+(V.sum/V.cnt).toFixed(1)}))})(),F=(()=>{const T={};return I.forEach(M=>{const V=M.designer||"",oe=pt(M.dataCriacao||M.dataSolicitacao,M.dataConclusao);if(oe!=null){const ce=T[V]||{cnt:0,sum:0};T[V]={cnt:ce.cnt+1,sum:ce.sum+oe}}}),Object.entries(T).map(([M,V])=>({designer:M,media:+(V.sum/V.cnt).toFixed(1)}))})(),K=new Date,J=new Date(K.getFullYear(),K.getMonth()-1,1),se=(T,M)=>{if(!T)return!1;const[V,oe,ce]=T.split("-").map(Number),be=new Date(V,oe-1,ce);return be.getMonth()===M.getMonth()&&be.getFullYear()===M.getFullYear()},ve=I.filter(T=>se(T.dataConclusao,K)).map(T=>pt(T.dataCriacao||T.dataSolicitacao,T.dataConclusao)).filter(T=>T!=null),Ve=I.filter(T=>se(T.dataConclusao,J)).map(T=>pt(T.dataCriacao||T.dataSolicitacao,T.dataConclusao)).filter(T=>T!=null),ze=+(ve.reduce((T,M)=>T+M,0)/(ve.length||1)).toFixed(1),ct=+(Ve.reduce((T,M)=>T+M,0)/(Ve.length||1)).toFixed(1),Qe=T=>{const M=I.filter(V=>(V.designer||"")===T).map(V=>pt(V.dataCriacao||V.dataSolicitacao,V.dataConclusao)).filter(V=>V!=null);return+(M.reduce((V,oe)=>V+oe,0)/(M.length||1)).toFixed(1)},Sn=(()=>{const T=I.map(ce=>ce.revisoes||0),M=T.length||1,V=ce=>Math.round(100*(T.filter(be=>be===ce).length/M)),oe=ce=>Math.round(100*(T.filter(ce).length/M));return{sRev:V(0),umaRev:V(1),duasMais:oe(ce=>ce>=2)}})(),St=(()=>{const T={};return e.forEach(M=>{const V=M.designer||"",oe=M.revisoes||0,ce=T[V]||{rTot:0,cnt:0};T[V]={rTot:ce.rTot+oe,cnt:ce.cnt+1}}),Object.entries(T).map(([M,V])=>({designer:M,porPeca:+(V.rTot/(V.cnt||1)).toFixed(2)})).sort((M,V)=>V.porPeca-M.porPeca)})(),xt=(()=>{const T={};return e.forEach(M=>{const V=M.tipoMidia||"Outro",oe=M.revisoes||0,ce=T[V]||{rTot:0,cnt:0};T[V]={rTot:ce.rTot+oe,cnt:ce.cnt+1}}),Object.entries(T).map(([M,V])=>({tipo:M,porPeca:+(V.rTot/(V.cnt||1)).toFixed(2)})).sort((M,V)=>V.porPeca-M.porPeca)})(),Ln=(()=>{const T={};e.forEach(V=>{const oe=V.origem||"Outros";T[oe]=(T[oe]||0)+1});const M=e.length||1;return Object.entries(T).map(([V,oe])=>({origem:V,q:oe,pct:Math.round(100*(oe/M))}))})(),xn=(()=>{const T={};return e.forEach(M=>{const V=M.origem||"Outros",oe=M.revisoes||0,ce=T[V]||{rTot:0,cnt:0};T[V]={rTot:ce.rTot+oe,cnt:ce.cnt+1}}),Object.entries(T).map(([M,V])=>({origem:M,porPeca:+(V.rTot/(V.cnt||1)).toFixed(2)})).sort((M,V)=>V.porPeca-M.porPeca)})(),xe=(()=>{const T={};return I.forEach(M=>{const V=M.origem||"Outros";T[V]=(T[V]||0)+1}),Object.entries(T).map(([M,V])=>({origem:M,q:V})).sort((M,V)=>V.q-M.q)})(),Ie=(()=>{const T={};return I.forEach(M=>{const V=M.finishedAt;if(!V)return;const oe=new Date(V).getHours();T[oe]=(T[oe]||0)+1}),T})(),Te=(()=>{const T=I.map(oe=>Number(oe.tempoProducaoMs||0)).filter(oe=>oe>0),M=T.reduce((oe,ce)=>oe+ce,0)/(T.length||1);return+(oe=>oe/36e5)(M).toFixed(2)})(),Kt=(()=>{const T={};return I.forEach(M=>{const V=M.designer||"",oe=Number(M.tempoProducaoMs||0),ce=T[V]||{cnt:0,sum:0};T[V]={cnt:ce.cnt+1,sum:ce.sum+oe}}),Object.entries(T).map(([M,V])=>({designer:M,horas:+(V.sum/(V.cnt||1)/36e5).toFixed(2)})).sort((M,V)=>M.horas-V.horas)})(),Vt=St.slice().sort((T,M)=>T.porPeca-M.porPeca),An=(()=>{const T={};return e.forEach(M=>{const V=M.campanha||"";T[V]=(T[V]||0)+1}),Object.entries(T).map(([M,V])=>({campanha:M,q:V})).sort((M,V)=>V.q-M.q)})(),Gn=(()=>{const T={};return e.forEach(M=>{const V=M.campanha||"",oe=M.revisoes||0,ce=T[V]||{rTot:0,cnt:0};T[V]={rTot:ce.rTot+oe,cnt:ce.cnt+1}}),Object.entries(T).map(([M,V])=>({campanha:M,porPeca:+(V.rTot/(V.cnt||1)).toFixed(2)})).sort((M,V)=>V.porPeca-M.porPeca)})(),mn=(()=>{const T={};return e.forEach(M=>{if(M.campanha){const V=M.campanha,oe=!!(M.prazo&&M.dataConclusao&&M.dataConclusao<=M.prazo),ce=!!(M.prazo&&M.dataConclusao),be=T[V]||{ok:0,total:0};T[V]={ok:be.ok+(oe?1:0),total:be.total+(ce?1:0)}}}),Object.entries(T).map(([M,V])=>({campanha:M,sla:Math.round(100*(V.ok/(V.total||1)))}))})();return i?l.jsxs("div",{className:"reports",children:[l.jsx("div",{className:"reports-toolbar",children:l.jsx("div",{className:"skeleton row",style:{width:"50%"}})}),l.jsx("div",{className:"reports-grid",children:Array.from({length:3}).map((T,M)=>l.jsx("div",{className:"skeleton card",style:{height:180}},M))})]}):l.jsxs("div",{className:"reports",children:[l.jsxs("div",{className:"reports-toolbar",children:[l.jsxs("div",{className:"chips",children:[o.map(T=>l.jsxs("button",{className:`btn-md ${u===c(T)?"active":""}`,onClick:()=>h(c(T)),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"calendar"})}),l.jsx("span",{children:T})]},T)),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"calendar"})}),l.jsx("input",{type:"date",value:r.cIni||"",onChange:T=>s(M=>({...M,cIni:T.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:r.cFim||"",onChange:T=>s(M=>({...M,cFim:T.target.value}))})]})]}),l.jsxs("div",{className:"chips",children:[N.map(T=>l.jsxs("button",{className:`btn-md ${(r.designer||"")===T||T==="Todos"&&!r.designer?"active":""}`,onClick:()=>b(T),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"usuarios"})}),l.jsx("span",{children:T})]},T)),$.map(T=>l.jsxs("button",{className:`btn-md ${(r.tipoMidia||"")===T||T==="Todos"&&!r.tipoMidia?"active":""}`,onClick:()=>C(T),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"tag"})}),l.jsx("span",{children:T})]},T)),S.map(T=>l.jsxs("button",{className:`btn-md ${(r.origem||"")===T||T==="Todos"&&!r.origem?"active":""}`,onClick:()=>x(T),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"link"})}),l.jsx("span",{children:T})]},T)),R.map(T=>l.jsxs("button",{className:`btn-md ${(r.campanha||"")===T||T==="Todos"&&!r.campanha?"active":""}`,onClick:()=>j(T),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"tag"})}),l.jsx("span",{children:T})]},T)),B.map(T=>l.jsxs("button",{className:`btn-md ${(r.status||"")===T||T==="Todos"&&!r.status?"active":""}`,onClick:()=>g(T),children:[l.jsx("span",{className:"icon",children:l.jsx(Ae,{name:"dot"})}),l.jsx("span",{children:T})]},T))]})]}),l.jsxs("div",{className:"reports-grid",children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Backlog"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Backlog total: ",w.length]}),l.jsxs("span",{className:"chip",children:["Em risco (48h): ",k.length]}),l.jsxs("span",{className:"chip",children:["Prazo mdio: ",A,"d"]}),l.jsxs("span",{className:"chip",children:["Estado: ",tt]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(w.reduce((T,M)=>{const V=M.tipoMidia||"Outro";return T[V]=(T[V]||0)+1,T},{})).map(([T,M])=>l.jsxs("tr",{children:[l.jsx("td",{children:T}),l.jsx("td",{children:M})]},T))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(w.reduce((T,M)=>{const V=M.designer||"";return T[V]=(T[V]||0)+1,T},{})).map(([T,M])=>l.jsxs("tr",{children:[l.jsx("td",{children:T}),l.jsx("td",{children:M})]},T))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Lead Time"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mdio geral: ",O,"d"]}),l.jsxs("span",{className:"chip",children:["Este ms: ",ze,"d"]}),l.jsxs("span",{className:"chip",children:["Ms passado: ",ct,"d"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:D.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.tipo}),l.jsxs("td",{children:[T.media,"d"]})]},T.tipo))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:F.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.designer}),l.jsxs("td",{children:[T.media,"d"]})]},T.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"chips",children:[l.jsx("span",{className:"chip",children:"Designer A"}),l.jsx("select",{value:p,onChange:T=>m(T.target.value),children:n.map(T=>l.jsx("option",{value:T,children:T},T))}),l.jsx("span",{className:"chip",children:"Designer B"}),l.jsx("select",{value:y,onChange:T=>E(T.target.value),children:n.map(T=>l.jsx("option",{value:T,children:T},T))}),l.jsxs("span",{className:"chip",children:["A: ",Qe(p),"d"]}),l.jsxs("span",{className:"chip",children:["B: ",Qe(y),"d"]})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Eficincia e Retrabalho"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Sem reviso: ",Sn.sRev,"%"]}),l.jsxs("span",{className:"chip",children:["1 reviso: ",Sn.umaRev,"%"]}),l.jsxs("span",{className:"chip",children:["2+ revises: ",Sn.duasMais,"%"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:St.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.designer}),l.jsx("td",{children:T.porPeca})]},T.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:xt.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.tipo}),l.jsx("td",{children:T.porPeca})]},T.tipo))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Demanda por Canal"}),l.jsx("div",{className:"chips",children:Ln.map(T=>l.jsxs("span",{className:"chip",children:[T.origem,": ",T.pct,"%"]},T.origem))}),l.jsx("div",{className:"section-divider"}),(()=>{const T=Ln.reduce((ke,gt)=>ke+gt.q,0)||1;let M=0;const V=50,oe=60,ce=60,be=Ln.slice(0,5).map((ke,gt)=>{const $e=ke.q/T,st=M*2*Math.PI,wt=(M+$e)*2*Math.PI;M+=$e;const Xn=oe+V*Math.cos(st),Jn=ce+V*Math.sin(st),Cn=oe+V*Math.cos(wt),Zn=ce+V*Math.sin(wt),Kr=$e>.5?1:0,Pn=`M ${oe} ${ce} L ${Xn} ${Jn} A ${V} ${V} 0 ${Kr} 1 ${Cn} ${Zn} Z`,Lt=["#4DA3FF","#BCD200","#FF5E5E","#9B59B6","#2ECC71"];return{path:Pn,color:Lt[gt%Lt.length],label:`${ke.origem} ${ke.pct}%`}});return l.jsxs("div",{className:"pie-wrap",children:[l.jsx("svg",{width:"140",height:"140",className:"pie-chart",children:be.map((ke,gt)=>l.jsx("path",{d:ke.path,fill:ke.color},gt))}),l.jsx("div",{className:"pie-legend",children:be.map((ke,gt)=>l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot",style:{background:ke.color}}),ke.label]},gt))})]})})(),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:xn.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.origem}),l.jsx("td",{children:T.porPeca})]},T.origem))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Concludas"})]})}),l.jsx("tbody",{children:xe.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.origem}),l.jsx("td",{children:T.q})]},T.origem))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Produtividade por Hora (Avanado)"}),l.jsx("div",{className:"chips",children:l.jsxs("span",{className:"chip",children:["Tempo mdio real/pea: ",Te,"h"]})}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"heatmap",children:[l.jsx("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:Array.from({length:11},(T,M)=>M+8).map(T=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(T).padStart(2,"0"),"h"]},T))}),l.jsx("div",{className:"heat-row",children:Array.from({length:11},(T,M)=>M+8).map(T=>{const M=Ie[T]||0,V=M===0?"#222":M<2?"#00C58E33":"#00C58E";return l.jsx("div",{className:"heat-cell",style:{background:V},title:`${String(T).padStart(2,"0")}h: ${M}`},T)})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Velocidade mdia (h)"})]})}),l.jsx("tbody",{children:Kt.map((T,M)=>l.jsxs("tr",{children:[l.jsx("td",{children:M+1}),l.jsx("td",{children:T.designer}),l.jsx("td",{children:T.horas})]},T.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qualidade (menos retrabalho)"})]})}),l.jsx("tbody",{children:Vt.map((T,M)=>l.jsxs("tr",{children:[l.jsx("td",{children:M+1}),l.jsx("td",{children:T.designer}),l.jsx("td",{children:T.porPeca})]},T.designer))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Campanhas"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mais demandada: ",((Qn=An[0])==null?void 0:Qn.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Maior retrabalho: ",((Fn=Gn[0])==null?void 0:Fn.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Melhor SLA: ",((Yn=mn.sort((T,M)=>M.sla-T.sla)[0])==null?void 0:Yn.campanha)||""]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Campanha"}),l.jsx("th",{children:"Produo (concludas)"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"Retrabalho/pea"})]})}),l.jsx("tbody",{children:Array.from(new Set(e.map(T=>T.campanha).filter(Boolean))).map(T=>{var ce,be;const M=I.filter(ke=>ke.campanha===T).length,V=((ce=mn.find(ke=>ke.campanha===T))==null?void 0:ce.sla)||0,oe=((be=Gn.find(ke=>ke.campanha===T))==null?void 0:be.porPeca)||0;return l.jsxs("tr",{children:[l.jsx("td",{children:T}),l.jsx("td",{children:M}),l.jsxs("td",{style:{color:V>=90?"#BCD200":V>=70?"#FFE55C":"#FF5E5E"},children:[V,"%"]}),l.jsx("td",{children:oe})]},T)})})]})]})]})]})}s0(document.getElementById("root")).render(l.jsx(ty.StrictMode,{children:l.jsx(Ok,{})}));
