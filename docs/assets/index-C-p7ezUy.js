(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function kT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Py={exports:{}},lu={},Ny={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qa=Symbol.for("react.element"),DT=Symbol.for("react.portal"),jT=Symbol.for("react.fragment"),bT=Symbol.for("react.strict_mode"),OT=Symbol.for("react.profiler"),MT=Symbol.for("react.provider"),VT=Symbol.for("react.context"),LT=Symbol.for("react.forward_ref"),FT=Symbol.for("react.suspense"),UT=Symbol.for("react.memo"),zT=Symbol.for("react.lazy"),Om=Symbol.iterator;function BT(t){return t===null||typeof t!="object"?null:(t=Om&&t[Om]||t["@@iterator"],typeof t=="function"?t:null)}var Ry={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ky=Object.assign,Dy={};function vo(t,e,n){this.props=t,this.context=e,this.refs=Dy,this.updater=n||Ry}vo.prototype.isReactComponent={};vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jy(){}jy.prototype=vo.prototype;function hf(t,e,n){this.props=t,this.context=e,this.refs=Dy,this.updater=n||Ry}var ff=hf.prototype=new jy;ff.constructor=hf;ky(ff,vo.prototype);ff.isPureReactComponent=!0;var Mm=Array.isArray,by=Object.prototype.hasOwnProperty,pf={current:null},Oy={key:!0,ref:!0,__self:!0,__source:!0};function My(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)by.call(e,r)&&!Oy.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:qa,type:t,key:i,ref:o,props:s,_owner:pf.current}}function $T(t,e){return{$$typeof:qa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mf(t){return typeof t=="object"&&t!==null&&t.$$typeof===qa}function HT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vm=/\/+/g;function rd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HT(""+t.key):e.toString(36)}function Kl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qa:case DT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+rd(o,0):r,Mm(s)?(n="",t!=null&&(n=t.replace(Vm,"$&/")+"/"),Kl(s,e,n,"",function(d){return d})):s!=null&&(mf(s)&&(s=$T(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Vm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Mm(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+rd(i,c);o+=Kl(i,e,n,u,s)}else if(u=BT(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+rd(i,c++),o+=Kl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sl(t,e,n){if(t==null)return t;var r=[],s=0;return Kl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function qT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Ql={transition:null},WT={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Ql,ReactCurrentOwner:pf};function Vy(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:Sl,forEach:function(t,e,n){Sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sl(t,function(){e++}),e},toArray:function(t){return Sl(t,function(e){return e})||[]},only:function(t){if(!mf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=vo;Re.Fragment=jT;Re.Profiler=OT;Re.PureComponent=hf;Re.StrictMode=bT;Re.Suspense=FT;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WT;Re.act=Vy;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ky({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=pf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)by.call(e,u)&&!Oy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:qa,type:t.type,key:s,ref:i,props:r,_owner:o}};Re.createContext=function(t){return t={$$typeof:VT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MT,_context:t},t.Consumer=t};Re.createElement=My;Re.createFactory=function(t){var e=My.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:LT,render:t}};Re.isValidElement=mf;Re.lazy=function(t){return{$$typeof:zT,_payload:{_status:-1,_result:t},_init:qT}};Re.memo=function(t,e){return{$$typeof:UT,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=Ql.transition;Ql.transition={};try{t()}finally{Ql.transition=e}};Re.unstable_act=Vy;Re.useCallback=function(t,e){return rn.current.useCallback(t,e)};Re.useContext=function(t){return rn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return rn.current.useEffect(t,e)};Re.useId=function(){return rn.current.useId()};Re.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return rn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};Re.useRef=function(t){return rn.current.useRef(t)};Re.useState=function(t){return rn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return rn.current.useTransition()};Re.version="18.3.1";Ny.exports=Re;var Y=Ny.exports;const GT=kT(Y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT=Y,QT=Symbol.for("react.element"),YT=Symbol.for("react.fragment"),XT=Object.prototype.hasOwnProperty,JT=KT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZT={key:!0,ref:!0,__self:!0,__source:!0};function Ly(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)XT.call(e,r)&&!ZT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:QT,type:t,key:i,ref:o,props:s,_owner:JT.current}}lu.Fragment=YT;lu.jsx=Ly;lu.jsxs=Ly;Py.exports=lu;var l=Py.exports,Fy={exports:{}},xn={},Uy={exports:{}},zy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,O){var B=$.length;$.push(O);e:for(;0<B;){var H=B-1>>>1,Z=$[H];if(0<s(Z,O))$[H]=O,$[B]=Z,B=H;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var O=$[0],B=$.pop();if(B!==O){$[0]=B;e:for(var H=0,Z=$.length,oe=Z>>>1;H<oe;){var Ie=2*(H+1)-1,Fe=$[Ie],Ne=Ie+1,$e=$[Ne];if(0>s(Fe,B))Ne<Z&&0>s($e,Fe)?($[H]=$e,$[Ne]=B,H=Ne):($[H]=Fe,$[Ie]=B,H=Ie);else if(Ne<Z&&0>s($e,B))$[H]=$e,$[Ne]=B,H=Ne;else break e}}return O}function s($,O){var B=$.sortIndex-O.sortIndex;return B!==0?B:$.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,g=3,w=!1,P=!1,b=!1,U=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S($){for(var O=n(d);O!==null;){if(O.callback===null)r(d);else if(O.startTime<=$)r(d),O.sortIndex=O.expirationTime,e(u,O);else break;O=n(d)}}function j($){if(b=!1,S($),!P)if(n(u)!==null)P=!0,rt(N);else{var O=n(d);O!==null&&W(j,O.startTime-$)}}function N($,O){P=!1,b&&(b=!1,A(y),y=-1),w=!0;var B=g;try{for(S(O),m=n(u);m!==null&&(!(m.expirationTime>O)||$&&!R());){var H=m.callback;if(typeof H=="function"){m.callback=null,g=m.priorityLevel;var Z=H(m.expirationTime<=O);O=t.unstable_now(),typeof Z=="function"?m.callback=Z:m===n(u)&&r(u),S(O)}else r(u);m=n(u)}if(m!==null)var oe=!0;else{var Ie=n(d);Ie!==null&&W(j,Ie.startTime-O),oe=!1}return oe}finally{m=null,g=B,w=!1}}var V=!1,v=null,y=-1,T=5,C=-1;function R(){return!(t.unstable_now()-C<T)}function D(){if(v!==null){var $=t.unstable_now();C=$;var O=!0;try{O=v(!0,$)}finally{O?x():(V=!1,v=null)}}else V=!1}var x;if(typeof I=="function")x=function(){I(D)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,Pt=nt.port2;nt.port1.onmessage=D,x=function(){Pt.postMessage(null)}}else x=function(){U(D,0)};function rt($){v=$,V||(V=!0,x())}function W($,O){y=U(function(){$(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){P||w||(P=!0,rt(N))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var O=3;break;default:O=g}var B=g;g=O;try{return $()}finally{g=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,O){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var B=g;g=$;try{return O()}finally{g=B}},t.unstable_scheduleCallback=function($,O,B){var H=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?H+B:H):B=H,$){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=B+Z,$={id:f++,callback:O,priorityLevel:$,startTime:B,expirationTime:Z,sortIndex:-1},B>H?($.sortIndex=B,e(d,$),n(u)===null&&$===n(d)&&(b?(A(y),y=-1):b=!0,W(j,B-H))):($.sortIndex=Z,e(u,$),P||w||(P=!0,rt(N))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var O=g;return function(){var B=g;g=O;try{return $.apply(this,arguments)}finally{g=B}}}})(zy);Uy.exports=zy;var eI=Uy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI=Y,Cn=eI;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var By=new Set,va={};function vi(t,e){ro(t,e),ro(t+"Capture",e)}function ro(t,e){for(va[t]=e,t=0;t<e.length;t++)By.add(e[t])}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$d=Object.prototype.hasOwnProperty,nI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lm={},Fm={};function rI(t){return $d.call(Fm,t)?!0:$d.call(Lm,t)?!1:nI.test(t)?Fm[t]=!0:(Lm[t]=!0,!1)}function sI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iI(t,e,n,r){if(e===null||typeof e>"u"||sI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var gf=/[\-:]([a-z])/g;function vf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gf,vf);Ut[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gf,vf);Ut[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gf,vf);Ut[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function yf(t,e,n,r){var s=Ut.hasOwnProperty(e)?Ut[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iI(e,n,s,r)&&(n=null),r||s===null?rI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qr=tI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Al=Symbol.for("react.element"),bi=Symbol.for("react.portal"),Oi=Symbol.for("react.fragment"),_f=Symbol.for("react.strict_mode"),Hd=Symbol.for("react.profiler"),$y=Symbol.for("react.provider"),Hy=Symbol.for("react.context"),wf=Symbol.for("react.forward_ref"),qd=Symbol.for("react.suspense"),Wd=Symbol.for("react.suspense_list"),Ef=Symbol.for("react.memo"),ns=Symbol.for("react.lazy"),qy=Symbol.for("react.offscreen"),Um=Symbol.iterator;function Vo(t){return t===null||typeof t!="object"?null:(t=Um&&t[Um]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,sd;function qo(t){if(sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sd=e&&e[1]||""}return`
`+sd+t}var id=!1;function od(t,e){if(!t||id)return"";id=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{id=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qo(t):""}function oI(t){switch(t.tag){case 5:return qo(t.type);case 16:return qo("Lazy");case 13:return qo("Suspense");case 19:return qo("SuspenseList");case 0:case 2:case 15:return t=od(t.type,!1),t;case 11:return t=od(t.type.render,!1),t;case 1:return t=od(t.type,!0),t;default:return""}}function Gd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oi:return"Fragment";case bi:return"Portal";case Hd:return"Profiler";case _f:return"StrictMode";case qd:return"Suspense";case Wd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hy:return(t.displayName||"Context")+".Consumer";case $y:return(t._context.displayName||"Context")+".Provider";case wf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ef:return e=t.displayName||null,e!==null?e:Gd(t.type)||"Memo";case ns:e=t._payload,t=t._init;try{return Gd(t(e))}catch{}}return null}function aI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gd(e);case 8:return e===_f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lI(t){var e=Wy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=lI(t))}function Gy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Kd(t,e){var n=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ky(t,e){e=e.checked,e!=null&&yf(t,"checked",e,!1)}function Qd(t,e){Ky(t,e);var n=Cs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yd(t,e.type,Cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yd(t,e,n){(e!=="number"||gc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wo=Array.isArray;function Gi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Xd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $m(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Wo(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cs(n)}}function Qy(t,e){var n=Cs(e.value),r=Cs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xl,Xy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xl=xl||document.createElement("div"),xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cI=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(t){cI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),na[e]=na[t]})});function Jy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||na.hasOwnProperty(t)&&na[t]?(""+e).trim():e+"px"}function Zy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Jy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var uI=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zd(t,e){if(e){if(uI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function eh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var th=null;function Tf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nh=null,Ki=null,Qi=null;function qm(t){if(t=Ka(t)){if(typeof nh!="function")throw Error(J(280));var e=t.stateNode;e&&(e=fu(e),nh(t.stateNode,t.type,e))}}function e_(t){Ki?Qi?Qi.push(t):Qi=[t]:Ki=t}function t_(){if(Ki){var t=Ki,e=Qi;if(Qi=Ki=null,qm(t),e)for(t=0;t<e.length;t++)qm(e[t])}}function n_(t,e){return t(e)}function r_(){}var ad=!1;function s_(t,e,n){if(ad)return t(e,n);ad=!0;try{return n_(t,e,n)}finally{ad=!1,(Ki!==null||Qi!==null)&&(r_(),t_())}}function _a(t,e){var n=t.stateNode;if(n===null)return null;var r=fu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var rh=!1;if(Ur)try{var Lo={};Object.defineProperty(Lo,"passive",{get:function(){rh=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{rh=!1}function dI(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ra=!1,vc=null,yc=!1,sh=null,hI={onError:function(t){ra=!0,vc=t}};function fI(t,e,n,r,s,i,o,c,u){ra=!1,vc=null,dI.apply(hI,arguments)}function pI(t,e,n,r,s,i,o,c,u){if(fI.apply(this,arguments),ra){if(ra){var d=vc;ra=!1,vc=null}else throw Error(J(198));yc||(yc=!0,sh=d)}}function yi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wm(t){if(yi(t)!==t)throw Error(J(188))}function mI(t){var e=t.alternate;if(!e){if(e=yi(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Wm(s),t;if(i===r)return Wm(s),e;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function o_(t){return t=mI(t),t!==null?a_(t):null}function a_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=a_(t);if(e!==null)return e;t=t.sibling}return null}var l_=Cn.unstable_scheduleCallback,Gm=Cn.unstable_cancelCallback,gI=Cn.unstable_shouldYield,vI=Cn.unstable_requestPaint,vt=Cn.unstable_now,yI=Cn.unstable_getCurrentPriorityLevel,If=Cn.unstable_ImmediatePriority,c_=Cn.unstable_UserBlockingPriority,_c=Cn.unstable_NormalPriority,_I=Cn.unstable_LowPriority,u_=Cn.unstable_IdlePriority,cu=null,cr=null;function wI(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(cu,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:II,EI=Math.log,TI=Math.LN2;function II(t){return t>>>=0,t===0?32:31-(EI(t)/TI|0)|0}var Pl=64,Nl=4194304;function Go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Go(c):(i&=o,i!==0&&(r=Go(i)))}else o=n&~s,o!==0?r=Go(o):i!==0&&(r=Go(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),s=1<<n,r|=t[n],e&=~s;return r}function SI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Kn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=SI(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function ih(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function d_(){var t=Pl;return Pl<<=1,!(Pl&4194240)&&(Pl=64),t}function ld(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function CI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Kn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Sf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ze=0;function h_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f_,Af,p_,m_,g_,oh=!1,Rl=[],ps=null,ms=null,gs=null,wa=new Map,Ea=new Map,ss=[],xI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Km(t,e){switch(t){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function Fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ka(e),e!==null&&Af(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function PI(t,e,n,r,s){switch(e){case"focusin":return ps=Fo(ps,t,e,n,r,s),!0;case"dragenter":return ms=Fo(ms,t,e,n,r,s),!0;case"mouseover":return gs=Fo(gs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return wa.set(i,Fo(wa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ea.set(i,Fo(Ea.get(i)||null,t,e,n,r,s)),!0}return!1}function v_(t){var e=Qs(t.target);if(e!==null){var n=yi(e);if(n!==null){if(e=n.tag,e===13){if(e=i_(n),e!==null){t.blockedOn=e,g_(t.priority,function(){p_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ah(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);th=r,n.target.dispatchEvent(r),th=null}else return e=Ka(n),e!==null&&Af(e),t.blockedOn=n,!1;e.shift()}return!0}function Qm(t,e,n){Yl(t)&&n.delete(e)}function NI(){oh=!1,ps!==null&&Yl(ps)&&(ps=null),ms!==null&&Yl(ms)&&(ms=null),gs!==null&&Yl(gs)&&(gs=null),wa.forEach(Qm),Ea.forEach(Qm)}function Uo(t,e){t.blockedOn===e&&(t.blockedOn=null,oh||(oh=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,NI)))}function Ta(t){function e(s){return Uo(s,t)}if(0<Rl.length){Uo(Rl[0],t);for(var n=1;n<Rl.length;n++){var r=Rl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ps!==null&&Uo(ps,t),ms!==null&&Uo(ms,t),gs!==null&&Uo(gs,t),wa.forEach(e),Ea.forEach(e),n=0;n<ss.length;n++)r=ss[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ss.length&&(n=ss[0],n.blockedOn===null);)v_(n),n.blockedOn===null&&ss.shift()}var Yi=Qr.ReactCurrentBatchConfig,Ec=!0;function RI(t,e,n,r){var s=ze,i=Yi.transition;Yi.transition=null;try{ze=1,Cf(t,e,n,r)}finally{ze=s,Yi.transition=i}}function kI(t,e,n,r){var s=ze,i=Yi.transition;Yi.transition=null;try{ze=4,Cf(t,e,n,r)}finally{ze=s,Yi.transition=i}}function Cf(t,e,n,r){if(Ec){var s=ah(t,e,n,r);if(s===null)yd(t,e,r,Tc,n),Km(t,r);else if(PI(s,t,e,n,r))r.stopPropagation();else if(Km(t,r),e&4&&-1<xI.indexOf(t)){for(;s!==null;){var i=Ka(s);if(i!==null&&f_(i),i=ah(t,e,n,r),i===null&&yd(t,e,r,Tc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else yd(t,e,r,null,n)}}var Tc=null;function ah(t,e,n,r){if(Tc=null,t=Tf(r),t=Qs(t),t!==null)if(e=yi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tc=t,null}function y_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yI()){case If:return 1;case c_:return 4;case _c:case _I:return 16;case u_:return 536870912;default:return 16}default:return 16}}var ds=null,xf=null,Xl=null;function __(){if(Xl)return Xl;var t,e=xf,n=e.length,r,s="value"in ds?ds.value:ds.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xl=s.slice(t,1<r?1-r:void 0)}function Jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kl(){return!0}function Ym(){return!1}function Pn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?kl:Ym,this.isPropagationStopped=Ym,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),e}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=Pn(yo),Ga=lt({},yo,{view:0,detail:0}),DI=Pn(Ga),cd,ud,zo,uu=lt({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zo&&(zo&&t.type==="mousemove"?(cd=t.screenX-zo.screenX,ud=t.screenY-zo.screenY):ud=cd=0,zo=t),cd)},movementY:function(t){return"movementY"in t?t.movementY:ud}}),Xm=Pn(uu),jI=lt({},uu,{dataTransfer:0}),bI=Pn(jI),OI=lt({},Ga,{relatedTarget:0}),dd=Pn(OI),MI=lt({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),VI=Pn(MI),LI=lt({},yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FI=Pn(LI),UI=lt({},yo,{data:0}),Jm=Pn(UI),zI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$I={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$I[t])?!!e[t]:!1}function Nf(){return HI}var qI=lt({},Ga,{key:function(t){if(t.key){var e=zI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nf,charCode:function(t){return t.type==="keypress"?Jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WI=Pn(qI),GI=lt({},uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zm=Pn(GI),KI=lt({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nf}),QI=Pn(KI),YI=lt({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),XI=Pn(YI),JI=lt({},uu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZI=Pn(JI),eS=[9,13,27,32],Rf=Ur&&"CompositionEvent"in window,sa=null;Ur&&"documentMode"in document&&(sa=document.documentMode);var tS=Ur&&"TextEvent"in window&&!sa,w_=Ur&&(!Rf||sa&&8<sa&&11>=sa),eg=" ",tg=!1;function E_(t,e){switch(t){case"keyup":return eS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mi=!1;function nS(t,e){switch(t){case"compositionend":return T_(e);case"keypress":return e.which!==32?null:(tg=!0,eg);case"textInput":return t=e.data,t===eg&&tg?null:t;default:return null}}function rS(t,e){if(Mi)return t==="compositionend"||!Rf&&E_(t,e)?(t=__(),Xl=xf=ds=null,Mi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return w_&&e.locale!=="ko"?null:e.data;default:return null}}var sS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ng(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sS[t.type]:e==="textarea"}function I_(t,e,n,r){e_(r),e=Ic(e,"onChange"),0<e.length&&(n=new Pf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ia=null,Ia=null;function iS(t){b_(t,0)}function du(t){var e=Fi(t);if(Gy(e))return t}function oS(t,e){if(t==="change")return e}var S_=!1;if(Ur){var hd;if(Ur){var fd="oninput"in document;if(!fd){var rg=document.createElement("div");rg.setAttribute("oninput","return;"),fd=typeof rg.oninput=="function"}hd=fd}else hd=!1;S_=hd&&(!document.documentMode||9<document.documentMode)}function sg(){ia&&(ia.detachEvent("onpropertychange",A_),Ia=ia=null)}function A_(t){if(t.propertyName==="value"&&du(Ia)){var e=[];I_(e,Ia,t,Tf(t)),s_(iS,e)}}function aS(t,e,n){t==="focusin"?(sg(),ia=e,Ia=n,ia.attachEvent("onpropertychange",A_)):t==="focusout"&&sg()}function lS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return du(Ia)}function cS(t,e){if(t==="click")return du(e)}function uS(t,e){if(t==="input"||t==="change")return du(e)}function dS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:dS;function Sa(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$d.call(e,s)||!Yn(t[s],e[s]))return!1}return!0}function ig(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function og(t,e){var n=ig(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ig(n)}}function C_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?C_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function x_(){for(var t=window,e=gc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gc(t.document)}return e}function kf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hS(t){var e=x_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&C_(n.ownerDocument.documentElement,n)){if(r!==null&&kf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=og(n,i);var o=og(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fS=Ur&&"documentMode"in document&&11>=document.documentMode,Vi=null,lh=null,oa=null,ch=!1;function ag(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ch||Vi==null||Vi!==gc(r)||(r=Vi,"selectionStart"in r&&kf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oa&&Sa(oa,r)||(oa=r,r=Ic(lh,"onSelect"),0<r.length&&(e=new Pf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vi)))}function Dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Li={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},pd={},P_={};Ur&&(P_=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function hu(t){if(pd[t])return pd[t];if(!Li[t])return t;var e=Li[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in P_)return pd[t]=e[n];return t}var N_=hu("animationend"),R_=hu("animationiteration"),k_=hu("animationstart"),D_=hu("transitionend"),j_=new Map,lg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(t,e){j_.set(t,e),vi(e,[t])}for(var md=0;md<lg.length;md++){var gd=lg[md],pS=gd.toLowerCase(),mS=gd[0].toUpperCase()+gd.slice(1);Os(pS,"on"+mS)}Os(N_,"onAnimationEnd");Os(R_,"onAnimationIteration");Os(k_,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(D_,"onTransitionEnd");ro("onMouseEnter",["mouseout","mouseover"]);ro("onMouseLeave",["mouseout","mouseover"]);ro("onPointerEnter",["pointerout","pointerover"]);ro("onPointerLeave",["pointerout","pointerover"]);vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function cg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pI(r,e,void 0,t),t.currentTarget=null}function b_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;cg(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;cg(s,c,d),i=u}}}if(yc)throw t=sh,yc=!1,sh=null,t}function Xe(t,e){var n=e[ph];n===void 0&&(n=e[ph]=new Set);var r=t+"__bubble";n.has(r)||(O_(e,t,2,!1),n.add(r))}function vd(t,e,n){var r=0;e&&(r|=4),O_(n,t,r,e)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Aa(t){if(!t[jl]){t[jl]=!0,By.forEach(function(n){n!=="selectionchange"&&(gS.has(n)||vd(n,!1,t),vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jl]||(e[jl]=!0,vd("selectionchange",!1,e))}}function O_(t,e,n,r){switch(y_(e)){case 1:var s=RI;break;case 4:s=kI;break;default:s=Cf}n=s.bind(null,e,n,t),s=void 0,!rh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function yd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Qs(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}s_(function(){var d=i,f=Tf(n),m=[];e:{var g=j_.get(t);if(g!==void 0){var w=Pf,P=t;switch(t){case"keypress":if(Jl(n)===0)break e;case"keydown":case"keyup":w=WI;break;case"focusin":P="focus",w=dd;break;case"focusout":P="blur",w=dd;break;case"beforeblur":case"afterblur":w=dd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Xm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=bI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=QI;break;case N_:case R_:case k_:w=VI;break;case D_:w=XI;break;case"scroll":w=DI;break;case"wheel":w=ZI;break;case"copy":case"cut":case"paste":w=FI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Zm}var b=(e&4)!==0,U=!b&&t==="scroll",A=b?g!==null?g+"Capture":null:g;b=[];for(var I=d,S;I!==null;){S=I;var j=S.stateNode;if(S.tag===5&&j!==null&&(S=j,A!==null&&(j=_a(I,A),j!=null&&b.push(Ca(I,j,S)))),U)break;I=I.return}0<b.length&&(g=new w(g,P,null,n,f),m.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==th&&(P=n.relatedTarget||n.fromElement)&&(Qs(P)||P[zr]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(P=n.relatedTarget||n.toElement,w=d,P=P?Qs(P):null,P!==null&&(U=yi(P),P!==U||P.tag!==5&&P.tag!==6)&&(P=null)):(w=null,P=d),w!==P)){if(b=Xm,j="onMouseLeave",A="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(b=Zm,j="onPointerLeave",A="onPointerEnter",I="pointer"),U=w==null?g:Fi(w),S=P==null?g:Fi(P),g=new b(j,I+"leave",w,n,f),g.target=U,g.relatedTarget=S,j=null,Qs(f)===d&&(b=new b(A,I+"enter",P,n,f),b.target=S,b.relatedTarget=U,j=b),U=j,w&&P)t:{for(b=w,A=P,I=0,S=b;S;S=Pi(S))I++;for(S=0,j=A;j;j=Pi(j))S++;for(;0<I-S;)b=Pi(b),I--;for(;0<S-I;)A=Pi(A),S--;for(;I--;){if(b===A||A!==null&&b===A.alternate)break t;b=Pi(b),A=Pi(A)}b=null}else b=null;w!==null&&ug(m,g,w,b,!1),P!==null&&U!==null&&ug(m,U,P,b,!0)}}e:{if(g=d?Fi(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var N=oS;else if(ng(g))if(S_)N=uS;else{N=lS;var V=aS}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(N=cS);if(N&&(N=N(t,d))){I_(m,N,n,f);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&Yd(g,"number",g.value)}switch(V=d?Fi(d):window,t){case"focusin":(ng(V)||V.contentEditable==="true")&&(Vi=V,lh=d,oa=null);break;case"focusout":oa=lh=Vi=null;break;case"mousedown":ch=!0;break;case"contextmenu":case"mouseup":case"dragend":ch=!1,ag(m,n,f);break;case"selectionchange":if(fS)break;case"keydown":case"keyup":ag(m,n,f)}var v;if(Rf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Mi?E_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(w_&&n.locale!=="ko"&&(Mi||y!=="onCompositionStart"?y==="onCompositionEnd"&&Mi&&(v=__()):(ds=f,xf="value"in ds?ds.value:ds.textContent,Mi=!0)),V=Ic(d,y),0<V.length&&(y=new Jm(y,t,null,n,f),m.push({event:y,listeners:V}),v?y.data=v:(v=T_(n),v!==null&&(y.data=v)))),(v=tS?nS(t,n):rS(t,n))&&(d=Ic(d,"onBeforeInput"),0<d.length&&(f=new Jm("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=v))}b_(m,e)})}function Ca(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ic(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_a(t,n),i!=null&&r.unshift(Ca(t,i,s)),i=_a(t,e),i!=null&&r.push(Ca(t,i,s))),t=t.return}return r}function Pi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ug(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=_a(n,i),u!=null&&o.unshift(Ca(n,u,c))):s||(u=_a(n,i),u!=null&&o.push(Ca(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vS=/\r\n?/g,yS=/\u0000|\uFFFD/g;function dg(t){return(typeof t=="string"?t:""+t).replace(vS,`
`).replace(yS,"")}function bl(t,e,n){if(e=dg(e),dg(t)!==e&&n)throw Error(J(425))}function Sc(){}var uh=null,dh=null;function hh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fh=typeof setTimeout=="function"?setTimeout:void 0,_S=typeof clearTimeout=="function"?clearTimeout:void 0,hg=typeof Promise=="function"?Promise:void 0,wS=typeof queueMicrotask=="function"?queueMicrotask:typeof hg<"u"?function(t){return hg.resolve(null).then(t).catch(ES)}:fh;function ES(t){setTimeout(function(){throw t})}function _d(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ta(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ta(e)}function vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _o=Math.random().toString(36).slice(2),lr="__reactFiber$"+_o,xa="__reactProps$"+_o,zr="__reactContainer$"+_o,ph="__reactEvents$"+_o,TS="__reactListeners$"+_o,IS="__reactHandles$"+_o;function Qs(t){var e=t[lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zr]||n[lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fg(t);t!==null;){if(n=t[lr])return n;t=fg(t)}return e}t=n,n=t.parentNode}return null}function Ka(t){return t=t[lr]||t[zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function fu(t){return t[xa]||null}var mh=[],Ui=-1;function Ms(t){return{current:t}}function Ze(t){0>Ui||(t.current=mh[Ui],mh[Ui]=null,Ui--)}function Ge(t,e){Ui++,mh[Ui]=t.current,t.current=e}var xs={},Jt=Ms(xs),pn=Ms(!1),si=xs;function so(t,e){var n=t.type.contextTypes;if(!n)return xs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mn(t){return t=t.childContextTypes,t!=null}function Ac(){Ze(pn),Ze(Jt)}function pg(t,e,n){if(Jt.current!==xs)throw Error(J(168));Ge(Jt,e),Ge(pn,n)}function M_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(J(108,aI(t)||"Unknown",s));return lt({},n,r)}function Cc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xs,si=Jt.current,Ge(Jt,t),Ge(pn,pn.current),!0}function mg(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=M_(t,e,si),r.__reactInternalMemoizedMergedChildContext=t,Ze(pn),Ze(Jt),Ge(Jt,t)):Ze(pn),Ge(pn,n)}var kr=null,pu=!1,wd=!1;function V_(t){kr===null?kr=[t]:kr.push(t)}function SS(t){pu=!0,V_(t)}function Vs(){if(!wd&&kr!==null){wd=!0;var t=0,e=ze;try{var n=kr;for(ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kr=null,pu=!1}catch(s){throw kr!==null&&(kr=kr.slice(t+1)),l_(If,Vs),s}finally{ze=e,wd=!1}}return null}var zi=[],Bi=0,xc=null,Pc=0,Rn=[],kn=0,ii=null,Dr=1,jr="";function Ws(t,e){zi[Bi++]=Pc,zi[Bi++]=xc,xc=t,Pc=e}function L_(t,e,n){Rn[kn++]=Dr,Rn[kn++]=jr,Rn[kn++]=ii,ii=t;var r=Dr;t=jr;var s=32-Kn(r)-1;r&=~(1<<s),n+=1;var i=32-Kn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Dr=1<<32-Kn(e)+s|n<<s|r,jr=i+t}else Dr=1<<i|n<<s|r,jr=t}function Df(t){t.return!==null&&(Ws(t,1),L_(t,1,0))}function jf(t){for(;t===xc;)xc=zi[--Bi],zi[Bi]=null,Pc=zi[--Bi],zi[Bi]=null;for(;t===ii;)ii=Rn[--kn],Rn[kn]=null,jr=Rn[--kn],Rn[kn]=null,Dr=Rn[--kn],Rn[kn]=null}var Sn=null,Tn=null,tt=!1,Wn=null;function F_(t,e){var n=jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sn=t,Tn=vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sn=t,Tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ii!==null?{id:Dr,overflow:jr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sn=t,Tn=null,!0):!1;default:return!1}}function gh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vh(t){if(tt){var e=Tn;if(e){var n=e;if(!gg(t,e)){if(gh(t))throw Error(J(418));e=vs(n.nextSibling);var r=Sn;e&&gg(t,e)?F_(r,n):(t.flags=t.flags&-4097|2,tt=!1,Sn=t)}}else{if(gh(t))throw Error(J(418));t.flags=t.flags&-4097|2,tt=!1,Sn=t}}}function vg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sn=t}function Ol(t){if(t!==Sn)return!1;if(!tt)return vg(t),tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hh(t.type,t.memoizedProps)),e&&(e=Tn)){if(gh(t))throw U_(),Error(J(418));for(;e;)F_(t,e),e=vs(e.nextSibling)}if(vg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tn=vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tn=null}}else Tn=Sn?vs(t.stateNode.nextSibling):null;return!0}function U_(){for(var t=Tn;t;)t=vs(t.nextSibling)}function io(){Tn=Sn=null,tt=!1}function bf(t){Wn===null?Wn=[t]:Wn.push(t)}var AS=Qr.ReactCurrentBatchConfig;function Bo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Ml(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yg(t){var e=t._init;return e(t._payload)}function z_(t){function e(A,I){if(t){var S=A.deletions;S===null?(A.deletions=[I],A.flags|=16):S.push(I)}}function n(A,I){if(!t)return null;for(;I!==null;)e(A,I),I=I.sibling;return null}function r(A,I){for(A=new Map;I!==null;)I.key!==null?A.set(I.key,I):A.set(I.index,I),I=I.sibling;return A}function s(A,I){return A=Es(A,I),A.index=0,A.sibling=null,A}function i(A,I,S){return A.index=S,t?(S=A.alternate,S!==null?(S=S.index,S<I?(A.flags|=2,I):S):(A.flags|=2,I)):(A.flags|=1048576,I)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function c(A,I,S,j){return I===null||I.tag!==6?(I=xd(S,A.mode,j),I.return=A,I):(I=s(I,S),I.return=A,I)}function u(A,I,S,j){var N=S.type;return N===Oi?f(A,I,S.props.children,j,S.key):I!==null&&(I.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ns&&yg(N)===I.type)?(j=s(I,S.props),j.ref=Bo(A,I,S),j.return=A,j):(j=ic(S.type,S.key,S.props,null,A.mode,j),j.ref=Bo(A,I,S),j.return=A,j)}function d(A,I,S,j){return I===null||I.tag!==4||I.stateNode.containerInfo!==S.containerInfo||I.stateNode.implementation!==S.implementation?(I=Pd(S,A.mode,j),I.return=A,I):(I=s(I,S.children||[]),I.return=A,I)}function f(A,I,S,j,N){return I===null||I.tag!==7?(I=ti(S,A.mode,j,N),I.return=A,I):(I=s(I,S),I.return=A,I)}function m(A,I,S){if(typeof I=="string"&&I!==""||typeof I=="number")return I=xd(""+I,A.mode,S),I.return=A,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Al:return S=ic(I.type,I.key,I.props,null,A.mode,S),S.ref=Bo(A,null,I),S.return=A,S;case bi:return I=Pd(I,A.mode,S),I.return=A,I;case ns:var j=I._init;return m(A,j(I._payload),S)}if(Wo(I)||Vo(I))return I=ti(I,A.mode,S,null),I.return=A,I;Ml(A,I)}return null}function g(A,I,S,j){var N=I!==null?I.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:c(A,I,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:return S.key===N?u(A,I,S,j):null;case bi:return S.key===N?d(A,I,S,j):null;case ns:return N=S._init,g(A,I,N(S._payload),j)}if(Wo(S)||Vo(S))return N!==null?null:f(A,I,S,j,null);Ml(A,S)}return null}function w(A,I,S,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return A=A.get(S)||null,c(I,A,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Al:return A=A.get(j.key===null?S:j.key)||null,u(I,A,j,N);case bi:return A=A.get(j.key===null?S:j.key)||null,d(I,A,j,N);case ns:var V=j._init;return w(A,I,S,V(j._payload),N)}if(Wo(j)||Vo(j))return A=A.get(S)||null,f(I,A,j,N,null);Ml(I,j)}return null}function P(A,I,S,j){for(var N=null,V=null,v=I,y=I=0,T=null;v!==null&&y<S.length;y++){v.index>y?(T=v,v=null):T=v.sibling;var C=g(A,v,S[y],j);if(C===null){v===null&&(v=T);break}t&&v&&C.alternate===null&&e(A,v),I=i(C,I,y),V===null?N=C:V.sibling=C,V=C,v=T}if(y===S.length)return n(A,v),tt&&Ws(A,y),N;if(v===null){for(;y<S.length;y++)v=m(A,S[y],j),v!==null&&(I=i(v,I,y),V===null?N=v:V.sibling=v,V=v);return tt&&Ws(A,y),N}for(v=r(A,v);y<S.length;y++)T=w(v,A,y,S[y],j),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?y:T.key),I=i(T,I,y),V===null?N=T:V.sibling=T,V=T);return t&&v.forEach(function(R){return e(A,R)}),tt&&Ws(A,y),N}function b(A,I,S,j){var N=Vo(S);if(typeof N!="function")throw Error(J(150));if(S=N.call(S),S==null)throw Error(J(151));for(var V=N=null,v=I,y=I=0,T=null,C=S.next();v!==null&&!C.done;y++,C=S.next()){v.index>y?(T=v,v=null):T=v.sibling;var R=g(A,v,C.value,j);if(R===null){v===null&&(v=T);break}t&&v&&R.alternate===null&&e(A,v),I=i(R,I,y),V===null?N=R:V.sibling=R,V=R,v=T}if(C.done)return n(A,v),tt&&Ws(A,y),N;if(v===null){for(;!C.done;y++,C=S.next())C=m(A,C.value,j),C!==null&&(I=i(C,I,y),V===null?N=C:V.sibling=C,V=C);return tt&&Ws(A,y),N}for(v=r(A,v);!C.done;y++,C=S.next())C=w(v,A,y,C.value,j),C!==null&&(t&&C.alternate!==null&&v.delete(C.key===null?y:C.key),I=i(C,I,y),V===null?N=C:V.sibling=C,V=C);return t&&v.forEach(function(D){return e(A,D)}),tt&&Ws(A,y),N}function U(A,I,S,j){if(typeof S=="object"&&S!==null&&S.type===Oi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:e:{for(var N=S.key,V=I;V!==null;){if(V.key===N){if(N=S.type,N===Oi){if(V.tag===7){n(A,V.sibling),I=s(V,S.props.children),I.return=A,A=I;break e}}else if(V.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ns&&yg(N)===V.type){n(A,V.sibling),I=s(V,S.props),I.ref=Bo(A,V,S),I.return=A,A=I;break e}n(A,V);break}else e(A,V);V=V.sibling}S.type===Oi?(I=ti(S.props.children,A.mode,j,S.key),I.return=A,A=I):(j=ic(S.type,S.key,S.props,null,A.mode,j),j.ref=Bo(A,I,S),j.return=A,A=j)}return o(A);case bi:e:{for(V=S.key;I!==null;){if(I.key===V)if(I.tag===4&&I.stateNode.containerInfo===S.containerInfo&&I.stateNode.implementation===S.implementation){n(A,I.sibling),I=s(I,S.children||[]),I.return=A,A=I;break e}else{n(A,I);break}else e(A,I);I=I.sibling}I=Pd(S,A.mode,j),I.return=A,A=I}return o(A);case ns:return V=S._init,U(A,I,V(S._payload),j)}if(Wo(S))return P(A,I,S,j);if(Vo(S))return b(A,I,S,j);Ml(A,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,I!==null&&I.tag===6?(n(A,I.sibling),I=s(I,S),I.return=A,A=I):(n(A,I),I=xd(S,A.mode,j),I.return=A,A=I),o(A)):n(A,I)}return U}var oo=z_(!0),B_=z_(!1),Nc=Ms(null),Rc=null,$i=null,Of=null;function Mf(){Of=$i=Rc=null}function Vf(t){var e=Nc.current;Ze(Nc),t._currentValue=e}function yh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xi(t,e){Rc=t,Of=$i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hn=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(Of!==t)if(t={context:t,memoizedValue:e,next:null},$i===null){if(Rc===null)throw Error(J(308));$i=t,Rc.dependencies={lanes:0,firstContext:t}}else $i=$i.next=t;return e}var Ys=null;function Lf(t){Ys===null?Ys=[t]:Ys.push(t)}function $_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Lf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Br(t,r)}function Br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rs=!1;function Ff(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ys(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Br(t,n)}return s=r.interleaved,s===null?(e.next=e,Lf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Br(t,n)}function Zl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sf(t,n)}}function _g(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kc(t,e,n,r){var s=t.updateQueue;rs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,c=i;do{var g=c.lane,w=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var P=t,b=c;switch(g=e,w=n,b.tag){case 1:if(P=b.payload,typeof P=="function"){m=P.call(w,m,g);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=b.payload,g=typeof P=="function"?P.call(w,m,g):P,g==null)break e;m=lt({},m,g);break e;case 2:rs=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=w,u=m):f=f.next=w,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ai|=o,t.lanes=o,t.memoizedState=m}}function wg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var Qa={},ur=Ms(Qa),Pa=Ms(Qa),Na=Ms(Qa);function Xs(t){if(t===Qa)throw Error(J(174));return t}function Uf(t,e){switch(Ge(Na,e),Ge(Pa,t),Ge(ur,Qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Jd(e,t)}Ze(ur),Ge(ur,e)}function ao(){Ze(ur),Ze(Pa),Ze(Na)}function q_(t){Xs(Na.current);var e=Xs(ur.current),n=Jd(e,t.type);e!==n&&(Ge(Pa,t),Ge(ur,n))}function zf(t){Pa.current===t&&(Ze(ur),Ze(Pa))}var ot=Ms(0);function Dc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ed=[];function Bf(){for(var t=0;t<Ed.length;t++)Ed[t]._workInProgressVersionPrimary=null;Ed.length=0}var ec=Qr.ReactCurrentDispatcher,Td=Qr.ReactCurrentBatchConfig,oi=0,at=null,At=null,Rt=null,jc=!1,aa=!1,Ra=0,CS=0;function Gt(){throw Error(J(321))}function $f(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function Hf(t,e,n,r,s,i){if(oi=i,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ec.current=t===null||t.memoizedState===null?RS:kS,t=n(r,s),aa){i=0;do{if(aa=!1,Ra=0,25<=i)throw Error(J(301));i+=1,Rt=At=null,e.updateQueue=null,ec.current=DS,t=n(r,s)}while(aa)}if(ec.current=bc,e=At!==null&&At.next!==null,oi=0,Rt=At=at=null,jc=!1,e)throw Error(J(300));return t}function qf(){var t=Ra!==0;return Ra=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?at.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Vn(){if(At===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var e=Rt===null?at.memoizedState:Rt.next;if(e!==null)Rt=e,At=t;else{if(t===null)throw Error(J(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Rt===null?at.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function ka(t,e){return typeof e=="function"?e(t):e}function Id(t){var e=Vn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=At,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((oi&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,at.lanes|=f,ai|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,Yn(r,e.memoizedState)||(hn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,at.lanes|=i,ai|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sd(t){var e=Vn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Yn(i,e.memoizedState)||(hn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function W_(){}function G_(t,e){var n=at,r=Vn(),s=e(),i=!Yn(r.memoizedState,s);if(i&&(r.memoizedState=s,hn=!0),r=r.queue,Wf(Y_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Da(9,Q_.bind(null,n,r,s,e),void 0,null),kt===null)throw Error(J(349));oi&30||K_(n,e,s)}return s}function K_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q_(t,e,n,r){e.value=n,e.getSnapshot=r,X_(e)&&J_(t)}function Y_(t,e,n){return n(function(){X_(e)&&J_(t)})}function X_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function J_(t){var e=Br(t,1);e!==null&&Qn(e,t,1,-1)}function Eg(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:t},e.queue=t,t=t.dispatch=NS.bind(null,at,t),[e.memoizedState,t]}function Da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Z_(){return Vn().memoizedState}function tc(t,e,n,r){var s=ir();at.flags|=t,s.memoizedState=Da(1|e,n,void 0,r===void 0?null:r)}function mu(t,e,n,r){var s=Vn();r=r===void 0?null:r;var i=void 0;if(At!==null){var o=At.memoizedState;if(i=o.destroy,r!==null&&$f(r,o.deps)){s.memoizedState=Da(e,n,i,r);return}}at.flags|=t,s.memoizedState=Da(1|e,n,i,r)}function Tg(t,e){return tc(8390656,8,t,e)}function Wf(t,e){return mu(2048,8,t,e)}function e0(t,e){return mu(4,2,t,e)}function t0(t,e){return mu(4,4,t,e)}function n0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function r0(t,e,n){return n=n!=null?n.concat([t]):null,mu(4,4,n0.bind(null,e,t),n)}function Gf(){}function s0(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$f(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function i0(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$f(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function o0(t,e,n){return oi&21?(Yn(n,e)||(n=d_(),at.lanes|=n,ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hn=!0),t.memoizedState=n)}function xS(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var r=Td.transition;Td.transition={};try{t(!1),e()}finally{ze=n,Td.transition=r}}function a0(){return Vn().memoizedState}function PS(t,e,n){var r=ws(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},l0(t))c0(e,n);else if(n=$_(t,e,n,r),n!==null){var s=nn();Qn(n,t,r,s),u0(n,e,r)}}function NS(t,e,n){var r=ws(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(l0(t))c0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,Yn(c,o)){var u=e.interleaved;u===null?(s.next=s,Lf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=$_(t,e,s,r),n!==null&&(s=nn(),Qn(n,t,r,s),u0(n,e,r))}}function l0(t){var e=t.alternate;return t===at||e!==null&&e===at}function c0(t,e){aa=jc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function u0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sf(t,n)}}var bc={readContext:Mn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},RS={readContext:Mn,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:Tg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tc(4194308,4,n0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tc(4194308,4,t,e)},useInsertionEffect:function(t,e){return tc(4,2,t,e)},useMemo:function(t,e){var n=ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ir();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=PS.bind(null,at,t),[r.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:Eg,useDebugValue:Gf,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=Eg(!1),e=t[0];return t=xS.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=at,s=ir();if(tt){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),kt===null)throw Error(J(349));oi&30||K_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Tg(Y_.bind(null,r,i,t),[t]),r.flags|=2048,Da(9,Q_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ir(),e=kt.identifierPrefix;if(tt){var n=jr,r=Dr;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ra++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kS={readContext:Mn,useCallback:s0,useContext:Mn,useEffect:Wf,useImperativeHandle:r0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:i0,useReducer:Id,useRef:Z_,useState:function(){return Id(ka)},useDebugValue:Gf,useDeferredValue:function(t){var e=Vn();return o0(e,At.memoizedState,t)},useTransition:function(){var t=Id(ka)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:G_,useId:a0,unstable_isNewReconciler:!1},DS={readContext:Mn,useCallback:s0,useContext:Mn,useEffect:Wf,useImperativeHandle:r0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:i0,useReducer:Sd,useRef:Z_,useState:function(){return Sd(ka)},useDebugValue:Gf,useDeferredValue:function(t){var e=Vn();return At===null?e.memoizedState=t:o0(e,At.memoizedState,t)},useTransition:function(){var t=Sd(ka)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:G_,useId:a0,unstable_isNewReconciler:!1};function Hn(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _h(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gu={isMounted:function(t){return(t=t._reactInternals)?yi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nn(),s=ws(t),i=Vr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ys(t,i,s),e!==null&&(Qn(e,t,s,r),Zl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nn(),s=ws(t),i=Vr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ys(t,i,s),e!==null&&(Qn(e,t,s,r),Zl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),r=ws(t),s=Vr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ys(t,s,r),e!==null&&(Qn(e,t,r,n),Zl(e,t,r))}};function Ig(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Sa(n,r)||!Sa(s,i):!0}function d0(t,e,n){var r=!1,s=xs,i=e.contextType;return typeof i=="object"&&i!==null?i=Mn(i):(s=mn(e)?si:Jt.current,r=e.contextTypes,i=(r=r!=null)?so(t,s):xs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Sg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gu.enqueueReplaceState(e,e.state,null)}function wh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ff(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mn(i):(i=mn(e)?si:Jt.current,s.context=so(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(_h(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gu.enqueueReplaceState(s,s.state,null),kc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function lo(t,e){try{var n="",r=e;do n+=oI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ad(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Eh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jS=typeof WeakMap=="function"?WeakMap:Map;function h0(t,e,n){n=Vr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mc||(Mc=!0,kh=r),Eh(t,e)},n}function f0(t,e,n){n=Vr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Eh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Eh(t,e),typeof r!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ag(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=GS.bind(null,t,e,n),e.then(t,t))}function Cg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vr(-1,1),e.tag=2,ys(n,e,1))),n.lanes|=1),t)}var bS=Qr.ReactCurrentOwner,hn=!1;function tn(t,e,n,r){e.child=t===null?B_(e,null,n,r):oo(e,t.child,n,r)}function Pg(t,e,n,r,s){n=n.render;var i=e.ref;return Xi(e,s),r=Hf(t,e,n,r,i,s),n=qf(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$r(t,e,s)):(tt&&n&&Df(e),e.flags|=1,tn(t,e,r,s),e.child)}function Ng(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!tp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,p0(t,e,i,r,s)):(t=ic(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Sa,n(o,r)&&t.ref===e.ref)return $r(t,e,s)}return e.flags|=1,t=Es(i,r),t.ref=e.ref,t.return=e,e.child=t}function p0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Sa(i,r)&&t.ref===e.ref)if(hn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(hn=!0);else return e.lanes=t.lanes,$r(t,e,s)}return Th(t,e,n,r,s)}function m0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(qi,_n),_n|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ge(qi,_n),_n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ge(qi,_n),_n|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ge(qi,_n),_n|=r;return tn(t,e,s,n),e.child}function g0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Th(t,e,n,r,s){var i=mn(n)?si:Jt.current;return i=so(e,i),Xi(e,s),n=Hf(t,e,n,r,i,s),r=qf(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$r(t,e,s)):(tt&&r&&Df(e),e.flags|=1,tn(t,e,n,s),e.child)}function Rg(t,e,n,r,s){if(mn(n)){var i=!0;Cc(e)}else i=!1;if(Xi(e,s),e.stateNode===null)nc(t,e),d0(e,n,r),wh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Mn(d):(d=mn(n)?si:Jt.current,d=so(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Sg(e,o,r,d),rs=!1;var g=e.memoizedState;o.state=g,kc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||pn.current||rs?(typeof f=="function"&&(_h(e,n,f,r),u=e.memoizedState),(c=rs||Ig(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,H_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Hn(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Mn(u):(u=mn(n)?si:Jt.current,u=so(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&Sg(e,o,r,u),rs=!1,g=e.memoizedState,o.state=g,kc(e,r,o,s);var P=e.memoizedState;c!==m||g!==P||pn.current||rs?(typeof w=="function"&&(_h(e,n,w,r),P=e.memoizedState),(d=rs||Ig(e,n,d,r,g,P,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ih(t,e,n,r,i,s)}function Ih(t,e,n,r,s,i){g0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&mg(e,n,!1),$r(t,e,i);r=e.stateNode,bS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=oo(e,t.child,null,i),e.child=oo(e,null,c,i)):tn(t,e,c,i),e.memoizedState=r.state,s&&mg(e,n,!0),e.child}function v0(t){var e=t.stateNode;e.pendingContext?pg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pg(t,e.context,!1),Uf(t,e.containerInfo)}function kg(t,e,n,r,s){return io(),bf(s),e.flags|=256,tn(t,e,n,r),e.child}var Sh={dehydrated:null,treeContext:null,retryLane:0};function Ah(t){return{baseLanes:t,cachePool:null,transitions:null}}function y0(t,e,n){var r=e.pendingProps,s=ot.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ge(ot,s&1),t===null)return vh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_u(o,r,0,null),t=ti(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ah(n),e.memoizedState=Sh,t):Kf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return OS(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Es(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Es(c,i):(i=ti(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ah(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Sh,r}return i=t.child,t=i.sibling,r=Es(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kf(t,e){return e=_u({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,r){return r!==null&&bf(r),oo(e,t.child,null,n),t=Kf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ad(Error(J(422))),Vl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=_u({mode:"visible",children:r.children},s,0,null),i=ti(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&oo(e,t.child,null,o),e.child.memoizedState=Ah(o),e.memoizedState=Sh,i);if(!(e.mode&1))return Vl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(J(419)),r=Ad(i,r,void 0),Vl(t,e,o,r)}if(c=(o&t.childLanes)!==0,hn||c){if(r=kt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Br(t,s),Qn(r,t,s,-1))}return ep(),r=Ad(Error(J(421))),Vl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tn=vs(s.nextSibling),Sn=e,tt=!0,Wn=null,t!==null&&(Rn[kn++]=Dr,Rn[kn++]=jr,Rn[kn++]=ii,Dr=t.id,jr=t.overflow,ii=e),e=Kf(e,r.children),e.flags|=4096,e)}function Dg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yh(t.return,e,n)}function Cd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function _0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(tn(t,e,r.children,n),r=ot.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dg(t,n,e);else if(t.tag===19)Dg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ge(ot,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Dc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Cd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Dc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Cd(e,!0,n,null,i);break;case"together":Cd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Es(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Es(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MS(t,e,n){switch(e.tag){case 3:v0(e),io();break;case 5:q_(e);break;case 1:mn(e.type)&&Cc(e);break;case 4:Uf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ge(Nc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ge(ot,ot.current&1),e.flags|=128,null):n&e.child.childLanes?y0(t,e,n):(Ge(ot,ot.current&1),t=$r(t,e,n),t!==null?t.sibling:null);Ge(ot,ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ge(ot,ot.current),r)break;return null;case 22:case 23:return e.lanes=0,m0(t,e,n)}return $r(t,e,n)}var w0,Ch,E0,T0;w0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ch=function(){};E0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xs(ur.current);var i=null;switch(n){case"input":s=Kd(t,s),r=Kd(t,r),i=[];break;case"select":s=lt({},s,{value:void 0}),r=lt({},r,{value:void 0}),i=[];break;case"textarea":s=Xd(t,s),r=Xd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sc)}Zd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(va.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(va.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Xe("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};T0=function(t,e,n,r){n!==r&&(e.flags|=4)};function $o(t,e){if(!tt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VS(t,e,n){var r=e.pendingProps;switch(jf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(e),null;case 1:return mn(e.type)&&Ac(),Kt(e),null;case 3:return r=e.stateNode,ao(),Ze(pn),Ze(Jt),Bf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&(bh(Wn),Wn=null))),Ch(t,e),Kt(e),null;case 5:zf(e);var s=Xs(Na.current);if(n=e.type,t!==null&&e.stateNode!=null)E0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Kt(e),null}if(t=Xs(ur.current),Ol(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[lr]=e,r[xa]=i,t=(e.mode&1)!==0,n){case"dialog":Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":case"embed":Xe("load",r);break;case"video":case"audio":for(s=0;s<Ko.length;s++)Xe(Ko[s],r);break;case"source":Xe("error",r);break;case"img":case"image":case"link":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"input":zm(r,i),Xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Xe("invalid",r);break;case"textarea":$m(r,i),Xe("invalid",r)}Zd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,c,t),s=["children",""+c]):va.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Xe("scroll",r)}switch(n){case"input":Cl(r),Bm(r,i,!0);break;case"textarea":Cl(r),Hm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[lr]=e,t[xa]=r,w0(t,e,!1,!1),e.stateNode=t;e:{switch(o=eh(n,r),n){case"dialog":Xe("cancel",t),Xe("close",t),s=r;break;case"iframe":case"object":case"embed":Xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ko.length;s++)Xe(Ko[s],t);s=r;break;case"source":Xe("error",t),s=r;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),s=r;break;case"details":Xe("toggle",t),s=r;break;case"input":zm(t,r),s=Kd(t,r),Xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=lt({},r,{value:void 0}),Xe("invalid",t);break;case"textarea":$m(t,r),s=Xd(t,r),Xe("invalid",t);break;default:s=r}Zd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Zy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Xy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ya(t,u):typeof u=="number"&&ya(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(va.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Xe("scroll",t):u!=null&&yf(t,i,u,o))}switch(n){case"input":Cl(t),Bm(t,r,!1);break;case"textarea":Cl(t),Hm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Gi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Gi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kt(e),null;case 6:if(t&&e.stateNode!=null)T0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=Xs(Na.current),Xs(ur.current),Ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[lr]=e,(i=r.nodeValue!==n)&&(t=Sn,t!==null))switch(t.tag){case 3:bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lr]=e,e.stateNode=r}return Kt(e),null;case 13:if(Ze(ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tt&&Tn!==null&&e.mode&1&&!(e.flags&128))U_(),io(),e.flags|=98560,i=!1;else if(i=Ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(J(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[lr]=e}else io(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kt(e),i=!1}else Wn!==null&&(bh(Wn),Wn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ot.current&1?Ct===0&&(Ct=3):ep())),e.updateQueue!==null&&(e.flags|=4),Kt(e),null);case 4:return ao(),Ch(t,e),t===null&&Aa(e.stateNode.containerInfo),Kt(e),null;case 10:return Vf(e.type._context),Kt(e),null;case 17:return mn(e.type)&&Ac(),Kt(e),null;case 19:if(Ze(ot),i=e.memoizedState,i===null)return Kt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$o(i,!1);else{if(Ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Dc(t),o!==null){for(e.flags|=128,$o(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ge(ot,ot.current&1|2),e.child}t=t.sibling}i.tail!==null&&vt()>co&&(e.flags|=128,r=!0,$o(i,!1),e.lanes=4194304)}else{if(!r)if(t=Dc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$o(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!tt)return Kt(e),null}else 2*vt()-i.renderingStartTime>co&&n!==1073741824&&(e.flags|=128,r=!0,$o(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=vt(),e.sibling=null,n=ot.current,Ge(ot,r?n&1|2:n&1),e):(Kt(e),null);case 22:case 23:return Zf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_n&1073741824&&(Kt(e),e.subtreeFlags&6&&(e.flags|=8192)):Kt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function LS(t,e){switch(jf(e),e.tag){case 1:return mn(e.type)&&Ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ao(),Ze(pn),Ze(Jt),Bf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zf(e),null;case 13:if(Ze(ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));io()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(ot),null;case 4:return ao(),null;case 10:return Vf(e.type._context),null;case 22:case 23:return Zf(),null;case 24:return null;default:return null}}var Ll=!1,Yt=!1,FS=typeof WeakSet=="function"?WeakSet:Set,le=null;function Hi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(t,e,r)}else n.current=null}function xh(t,e,n){try{n()}catch(r){pt(t,e,r)}}var jg=!1;function US(t,e){if(uh=Ec,t=x_(),kf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(w=m.firstChild)!==null;)g=m,m=w;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++f===r&&(u=o),(w=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(dh={focusedElem:t,selectionRange:n},Ec=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var b=P.memoizedProps,U=P.memoizedState,A=e.stateNode,I=A.getSnapshotBeforeUpdate(e.elementType===e.type?b:Hn(e.type,b),U);A.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(j){pt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return P=jg,jg=!1,P}function la(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&xh(e,n,i)}s=s.next}while(s!==r)}}function vu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ph(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function I0(t){var e=t.alternate;e!==null&&(t.alternate=null,I0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[xa],delete e[ph],delete e[TS],delete e[IS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function S0(t){return t.tag===5||t.tag===3||t.tag===4}function bg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||S0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sc));else if(r!==4&&(t=t.child,t!==null))for(Nh(t,e,n),t=t.sibling;t!==null;)Nh(t,e,n),t=t.sibling}function Rh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rh(t,e,n),t=t.sibling;t!==null;)Rh(t,e,n),t=t.sibling}var Mt=null,qn=!1;function Zr(t,e,n){for(n=n.child;n!==null;)A0(t,e,n),n=n.sibling}function A0(t,e,n){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(cu,n)}catch{}switch(n.tag){case 5:Yt||Hi(n,e);case 6:var r=Mt,s=qn;Mt=null,Zr(t,e,n),Mt=r,qn=s,Mt!==null&&(qn?(t=Mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mt.removeChild(n.stateNode));break;case 18:Mt!==null&&(qn?(t=Mt,n=n.stateNode,t.nodeType===8?_d(t.parentNode,n):t.nodeType===1&&_d(t,n),Ta(t)):_d(Mt,n.stateNode));break;case 4:r=Mt,s=qn,Mt=n.stateNode.containerInfo,qn=!0,Zr(t,e,n),Mt=r,qn=s;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&xh(n,e,o),s=s.next}while(s!==r)}Zr(t,e,n);break;case 1:if(!Yt&&(Hi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){pt(n,e,c)}Zr(t,e,n);break;case 21:Zr(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,Zr(t,e,n),Yt=r):Zr(t,e,n);break;default:Zr(t,e,n)}}function Og(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new FS),e.forEach(function(r){var s=QS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Mt=c.stateNode,qn=!1;break e;case 3:Mt=c.stateNode.containerInfo,qn=!0;break e;case 4:Mt=c.stateNode.containerInfo,qn=!0;break e}c=c.return}if(Mt===null)throw Error(J(160));A0(i,o,s),Mt=null,qn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){pt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)C0(e,t),e=e.sibling}function C0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),sr(t),r&4){try{la(3,t,t.return),vu(3,t)}catch(b){pt(t,t.return,b)}try{la(5,t,t.return)}catch(b){pt(t,t.return,b)}}break;case 1:$n(e,t),sr(t),r&512&&n!==null&&Hi(n,n.return);break;case 5:if($n(e,t),sr(t),r&512&&n!==null&&Hi(n,n.return),t.flags&32){var s=t.stateNode;try{ya(s,"")}catch(b){pt(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Ky(s,i),eh(c,o);var d=eh(c,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?Zy(s,m):f==="dangerouslySetInnerHTML"?Xy(s,m):f==="children"?ya(s,m):yf(s,f,m,d)}switch(c){case"input":Qd(s,i);break;case"textarea":Qy(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Gi(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?Gi(s,!!i.multiple,i.defaultValue,!0):Gi(s,!!i.multiple,i.multiple?[]:"",!1))}s[xa]=i}catch(b){pt(t,t.return,b)}}break;case 6:if($n(e,t),sr(t),r&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){pt(t,t.return,b)}}break;case 3:if($n(e,t),sr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ta(e.containerInfo)}catch(b){pt(t,t.return,b)}break;case 4:$n(e,t),sr(t);break;case 13:$n(e,t),sr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xf=vt())),r&4&&Og(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(d=Yt)||f,$n(e,t),Yt=d):$n(e,t),sr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(le=t,f=t.child;f!==null;){for(m=le=f;le!==null;){switch(g=le,w=g.child,g.tag){case 0:case 11:case 14:case 15:la(4,g,g.return);break;case 1:Hi(g,g.return);var P=g.stateNode;if(typeof P.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(b){pt(r,n,b)}}break;case 5:Hi(g,g.return);break;case 22:if(g.memoizedState!==null){Vg(m);continue}}w!==null?(w.return=g,le=w):Vg(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Jy("display",o))}catch(b){pt(t,t.return,b)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){pt(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:$n(e,t),sr(t),r&4&&Og(t);break;case 21:break;default:$n(e,t),sr(t)}}function sr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(S0(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ya(s,""),r.flags&=-33);var i=bg(t);Rh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=bg(t);Nh(t,c,o);break;default:throw Error(J(161))}}catch(u){pt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zS(t,e,n){le=t,x0(t)}function x0(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var s=le,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ll;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Yt;c=Ll;var d=Yt;if(Ll=o,(Yt=u)&&!d)for(le=s;le!==null;)o=le,u=o.child,o.tag===22&&o.memoizedState!==null?Lg(s):u!==null?(u.return=o,le=u):Lg(s);for(;i!==null;)le=i,x0(i),i=i.sibling;le=s,Ll=c,Yt=d}Mg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,le=i):Mg(t)}}function Mg(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||vu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Hn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&wg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ta(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Yt||e.flags&512&&Ph(e)}catch(g){pt(e,e.return,g)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function Vg(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function Lg(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vu(4,e)}catch(u){pt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){pt(e,s,u)}}var i=e.return;try{Ph(e)}catch(u){pt(e,i,u)}break;case 5:var o=e.return;try{Ph(e)}catch(u){pt(e,o,u)}}}catch(u){pt(e,e.return,u)}if(e===t){le=null;break}var c=e.sibling;if(c!==null){c.return=e.return,le=c;break}le=e.return}}var BS=Math.ceil,Oc=Qr.ReactCurrentDispatcher,Qf=Qr.ReactCurrentOwner,bn=Qr.ReactCurrentBatchConfig,Me=0,kt=null,wt=null,Ft=0,_n=0,qi=Ms(0),Ct=0,ja=null,ai=0,yu=0,Yf=0,ca=null,un=null,Xf=0,co=1/0,Rr=null,Mc=!1,kh=null,_s=null,Fl=!1,hs=null,Vc=0,ua=0,Dh=null,rc=-1,sc=0;function nn(){return Me&6?vt():rc!==-1?rc:rc=vt()}function ws(t){return t.mode&1?Me&2&&Ft!==0?Ft&-Ft:AS.transition!==null?(sc===0&&(sc=d_()),sc):(t=ze,t!==0||(t=window.event,t=t===void 0?16:y_(t.type)),t):1}function Qn(t,e,n,r){if(50<ua)throw ua=0,Dh=null,Error(J(185));Wa(t,n,r),(!(Me&2)||t!==kt)&&(t===kt&&(!(Me&2)&&(yu|=n),Ct===4&&is(t,Ft)),gn(t,r),n===1&&Me===0&&!(e.mode&1)&&(co=vt()+500,pu&&Vs()))}function gn(t,e){var n=t.callbackNode;AI(t,e);var r=wc(t,t===kt?Ft:0);if(r===0)n!==null&&Gm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gm(n),e===1)t.tag===0?SS(Fg.bind(null,t)):V_(Fg.bind(null,t)),wS(function(){!(Me&6)&&Vs()}),n=null;else{switch(h_(r)){case 1:n=If;break;case 4:n=c_;break;case 16:n=_c;break;case 536870912:n=u_;break;default:n=_c}n=O0(n,P0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function P0(t,e){if(rc=-1,sc=0,Me&6)throw Error(J(327));var n=t.callbackNode;if(Ji()&&t.callbackNode!==n)return null;var r=wc(t,t===kt?Ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lc(t,r);else{e=r;var s=Me;Me|=2;var i=R0();(kt!==t||Ft!==e)&&(Rr=null,co=vt()+500,ei(t,e));do try{qS();break}catch(c){N0(t,c)}while(!0);Mf(),Oc.current=i,Me=s,wt!==null?e=0:(kt=null,Ft=0,e=Ct)}if(e!==0){if(e===2&&(s=ih(t),s!==0&&(r=s,e=jh(t,s))),e===1)throw n=ja,ei(t,0),is(t,r),gn(t,vt()),n;if(e===6)is(t,r);else{if(s=t.current.alternate,!(r&30)&&!$S(s)&&(e=Lc(t,r),e===2&&(i=ih(t),i!==0&&(r=i,e=jh(t,i))),e===1))throw n=ja,ei(t,0),is(t,r),gn(t,vt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:Gs(t,un,Rr);break;case 3:if(is(t,r),(r&130023424)===r&&(e=Xf+500-vt(),10<e)){if(wc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){nn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=fh(Gs.bind(null,t,un,Rr),e);break}Gs(t,un,Rr);break;case 4:if(is(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Kn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BS(r/1960))-r,10<r){t.timeoutHandle=fh(Gs.bind(null,t,un,Rr),r);break}Gs(t,un,Rr);break;case 5:Gs(t,un,Rr);break;default:throw Error(J(329))}}}return gn(t,vt()),t.callbackNode===n?P0.bind(null,t):null}function jh(t,e){var n=ca;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=Lc(t,e),t!==2&&(e=un,un=n,e!==null&&bh(e)),t}function bh(t){un===null?un=t:un.push.apply(un,t)}function $S(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Yn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function is(t,e){for(e&=~Yf,e&=~yu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function Fg(t){if(Me&6)throw Error(J(327));Ji();var e=wc(t,0);if(!(e&1))return gn(t,vt()),null;var n=Lc(t,e);if(t.tag!==0&&n===2){var r=ih(t);r!==0&&(e=r,n=jh(t,r))}if(n===1)throw n=ja,ei(t,0),is(t,e),gn(t,vt()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,un,Rr),gn(t,vt()),null}function Jf(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(co=vt()+500,pu&&Vs())}}function li(t){hs!==null&&hs.tag===0&&!(Me&6)&&Ji();var e=Me;Me|=1;var n=bn.transition,r=ze;try{if(bn.transition=null,ze=1,t)return t()}finally{ze=r,bn.transition=n,Me=e,!(Me&6)&&Vs()}}function Zf(){_n=qi.current,Ze(qi)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_S(n)),wt!==null)for(n=wt.return;n!==null;){var r=n;switch(jf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ac();break;case 3:ao(),Ze(pn),Ze(Jt),Bf();break;case 5:zf(r);break;case 4:ao();break;case 13:Ze(ot);break;case 19:Ze(ot);break;case 10:Vf(r.type._context);break;case 22:case 23:Zf()}n=n.return}if(kt=t,wt=t=Es(t.current,null),Ft=_n=e,Ct=0,ja=null,Yf=yu=ai=0,un=ca=null,Ys!==null){for(e=0;e<Ys.length;e++)if(n=Ys[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ys=null}return t}function N0(t,e){do{var n=wt;try{if(Mf(),ec.current=bc,jc){for(var r=at.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jc=!1}if(oi=0,Rt=At=at=null,aa=!1,Ra=0,Qf.current=null,n===null||n.return===null){Ct=1,ja=e,wt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=Ft,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=Cg(o);if(w!==null){w.flags&=-257,xg(w,o,c,i,e),w.mode&1&&Ag(i,d,e),e=w,u=d;var P=e.updateQueue;if(P===null){var b=new Set;b.add(u),e.updateQueue=b}else P.add(u);break e}else{if(!(e&1)){Ag(i,d,e),ep();break e}u=Error(J(426))}}else if(tt&&c.mode&1){var U=Cg(o);if(U!==null){!(U.flags&65536)&&(U.flags|=256),xg(U,o,c,i,e),bf(lo(u,c));break e}}i=u=lo(u,c),Ct!==4&&(Ct=2),ca===null?ca=[i]:ca.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var A=h0(i,u,e);_g(i,A);break e;case 1:c=u;var I=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof I.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(_s===null||!_s.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=f0(i,c,e);_g(i,j);break e}}i=i.return}while(i!==null)}D0(n)}catch(N){e=N,wt===n&&n!==null&&(wt=n=n.return);continue}break}while(!0)}function R0(){var t=Oc.current;return Oc.current=bc,t===null?bc:t}function ep(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),kt===null||!(ai&268435455)&&!(yu&268435455)||is(kt,Ft)}function Lc(t,e){var n=Me;Me|=2;var r=R0();(kt!==t||Ft!==e)&&(Rr=null,ei(t,e));do try{HS();break}catch(s){N0(t,s)}while(!0);if(Mf(),Me=n,Oc.current=r,wt!==null)throw Error(J(261));return kt=null,Ft=0,Ct}function HS(){for(;wt!==null;)k0(wt)}function qS(){for(;wt!==null&&!gI();)k0(wt)}function k0(t){var e=b0(t.alternate,t,_n);t.memoizedProps=t.pendingProps,e===null?D0(t):wt=e,Qf.current=null}function D0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LS(n,e),n!==null){n.flags&=32767,wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ct=6,wt=null;return}}else if(n=VS(n,e,_n),n!==null){wt=n;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=t}while(e!==null);Ct===0&&(Ct=5)}function Gs(t,e,n){var r=ze,s=bn.transition;try{bn.transition=null,ze=1,WS(t,e,n,r)}finally{bn.transition=s,ze=r}return null}function WS(t,e,n,r){do Ji();while(hs!==null);if(Me&6)throw Error(J(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(CI(t,i),t===kt&&(wt=kt=null,Ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,O0(_c,function(){return Ji(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=bn.transition,bn.transition=null;var o=ze;ze=1;var c=Me;Me|=4,Qf.current=null,US(t,n),C0(n,t),hS(dh),Ec=!!uh,dh=uh=null,t.current=n,zS(n),vI(),Me=c,ze=o,bn.transition=i}else t.current=n;if(Fl&&(Fl=!1,hs=t,Vc=s),i=t.pendingLanes,i===0&&(_s=null),wI(n.stateNode),gn(t,vt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mc)throw Mc=!1,t=kh,kh=null,t;return Vc&1&&t.tag!==0&&Ji(),i=t.pendingLanes,i&1?t===Dh?ua++:(ua=0,Dh=t):ua=0,Vs(),null}function Ji(){if(hs!==null){var t=h_(Vc),e=bn.transition,n=ze;try{if(bn.transition=null,ze=16>t?16:t,hs===null)var r=!1;else{if(t=hs,hs=null,Vc=0,Me&6)throw Error(J(331));var s=Me;for(Me|=4,le=t.current;le!==null;){var i=le,o=i.child;if(le.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(le=d;le!==null;){var f=le;switch(f.tag){case 0:case 11:case 15:la(8,f,i)}var m=f.child;if(m!==null)m.return=f,le=m;else for(;le!==null;){f=le;var g=f.sibling,w=f.return;if(I0(f),f===d){le=null;break}if(g!==null){g.return=w,le=g;break}le=w}}}var P=i.alternate;if(P!==null){var b=P.child;if(b!==null){P.child=null;do{var U=b.sibling;b.sibling=null,b=U}while(b!==null)}}le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,le=o;else e:for(;le!==null;){if(i=le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:la(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,le=A;break e}le=i.return}}var I=t.current;for(le=I;le!==null;){o=le;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,le=S;else e:for(o=I;le!==null;){if(c=le,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:vu(9,c)}}catch(N){pt(c,c.return,N)}if(c===o){le=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,le=j;break e}le=c.return}}if(Me=s,Vs(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(cu,t)}catch{}r=!0}return r}finally{ze=n,bn.transition=e}}return!1}function Ug(t,e,n){e=lo(n,e),e=h0(t,e,1),t=ys(t,e,1),e=nn(),t!==null&&(Wa(t,1,e),gn(t,e))}function pt(t,e,n){if(t.tag===3)Ug(t,t,n);else for(;e!==null;){if(e.tag===3){Ug(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_s===null||!_s.has(r))){t=lo(n,t),t=f0(e,t,1),e=ys(e,t,1),t=nn(),e!==null&&(Wa(e,1,t),gn(e,t));break}}e=e.return}}function GS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,kt===t&&(Ft&n)===n&&(Ct===4||Ct===3&&(Ft&130023424)===Ft&&500>vt()-Xf?ei(t,0):Yf|=n),gn(t,e)}function j0(t,e){e===0&&(t.mode&1?(e=Nl,Nl<<=1,!(Nl&130023424)&&(Nl=4194304)):e=1);var n=nn();t=Br(t,e),t!==null&&(Wa(t,e,n),gn(t,n))}function KS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),j0(t,n)}function QS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),j0(t,n)}var b0;b0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return hn=!1,MS(t,e,n);hn=!!(t.flags&131072)}else hn=!1,tt&&e.flags&1048576&&L_(e,Pc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nc(t,e),t=e.pendingProps;var s=so(e,Jt.current);Xi(e,n),s=Hf(null,e,r,t,s,n);var i=qf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(i=!0,Cc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ff(e),s.updater=gu,e.stateNode=s,s._reactInternals=e,wh(e,r,t,n),e=Ih(null,e,r,!0,i,n)):(e.tag=0,tt&&i&&Df(e),tn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=XS(r),t=Hn(r,t),s){case 0:e=Th(null,e,r,t,n);break e;case 1:e=Rg(null,e,r,t,n);break e;case 11:e=Pg(null,e,r,t,n);break e;case 14:e=Ng(null,e,r,Hn(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),Th(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),Rg(t,e,r,s,n);case 3:e:{if(v0(e),t===null)throw Error(J(387));r=e.pendingProps,i=e.memoizedState,s=i.element,H_(t,e),kc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=lo(Error(J(423)),e),e=kg(t,e,r,n,s);break e}else if(r!==s){s=lo(Error(J(424)),e),e=kg(t,e,r,n,s);break e}else for(Tn=vs(e.stateNode.containerInfo.firstChild),Sn=e,tt=!0,Wn=null,n=B_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(io(),r===s){e=$r(t,e,n);break e}tn(t,e,r,n)}e=e.child}return e;case 5:return q_(e),t===null&&vh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,hh(r,s)?o=null:i!==null&&hh(r,i)&&(e.flags|=32),g0(t,e),tn(t,e,o,n),e.child;case 6:return t===null&&vh(e),null;case 13:return y0(t,e,n);case 4:return Uf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oo(e,null,r,n):tn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),Pg(t,e,r,s,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ge(Nc,r._currentValue),r._currentValue=o,i!==null)if(Yn(i.value,o)){if(i.children===s.children&&!pn.current){e=$r(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Vr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),yh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(J(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),yh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}tn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Xi(e,n),s=Mn(s),r=r(s),e.flags|=1,tn(t,e,r,n),e.child;case 14:return r=e.type,s=Hn(r,e.pendingProps),s=Hn(r.type,s),Ng(t,e,r,s,n);case 15:return p0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),nc(t,e),e.tag=1,mn(r)?(t=!0,Cc(e)):t=!1,Xi(e,n),d0(e,r,s),wh(e,r,s,n),Ih(null,e,r,!0,t,n);case 19:return _0(t,e,n);case 22:return m0(t,e,n)}throw Error(J(156,e.tag))};function O0(t,e){return l_(t,e)}function YS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,e,n,r){return new YS(t,e,n,r)}function tp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XS(t){if(typeof t=="function")return tp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wf)return 11;if(t===Ef)return 14}return 2}function Es(t,e){var n=t.alternate;return n===null?(n=jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ic(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")tp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oi:return ti(n.children,s,i,e);case _f:o=8,s|=8;break;case Hd:return t=jn(12,n,e,s|2),t.elementType=Hd,t.lanes=i,t;case qd:return t=jn(13,n,e,s),t.elementType=qd,t.lanes=i,t;case Wd:return t=jn(19,n,e,s),t.elementType=Wd,t.lanes=i,t;case qy:return _u(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $y:o=10;break e;case Hy:o=9;break e;case wf:o=11;break e;case Ef:o=14;break e;case ns:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=jn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ti(t,e,n,r){return t=jn(7,t,r,e),t.lanes=n,t}function _u(t,e,n,r){return t=jn(22,t,r,e),t.elementType=qy,t.lanes=n,t.stateNode={isHidden:!1},t}function xd(t,e,n){return t=jn(6,t,null,e),t.lanes=n,t}function Pd(t,e,n){return e=jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ld(0),this.expirationTimes=ld(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ld(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function np(t,e,n,r,s,i,o,c,u){return t=new JS(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=jn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ff(i),t}function ZS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function M0(t){if(!t)return xs;t=t._reactInternals;e:{if(yi(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(mn(n))return M_(t,n,e)}return e}function V0(t,e,n,r,s,i,o,c,u){return t=np(n,r,!0,t,s,i,o,c,u),t.context=M0(null),n=t.current,r=nn(),s=ws(n),i=Vr(r,s),i.callback=e??null,ys(n,i,s),t.current.lanes=s,Wa(t,s,r),gn(t,r),t}function wu(t,e,n,r){var s=e.current,i=nn(),o=ws(s);return n=M0(n),e.context===null?e.context=n:e.pendingContext=n,e=Vr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ys(s,e,o),t!==null&&(Qn(t,s,o,i),Zl(t,s,o)),o}function Fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rp(t,e){zg(t,e),(t=t.alternate)&&zg(t,e)}function e1(){return null}var L0=typeof reportError=="function"?reportError:function(t){console.error(t)};function sp(t){this._internalRoot=t}Eu.prototype.render=sp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));wu(t,e,null,null)};Eu.prototype.unmount=sp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;li(function(){wu(null,t,null,null)}),e[zr]=null}};function Eu(t){this._internalRoot=t}Eu.prototype.unstable_scheduleHydration=function(t){if(t){var e=m_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ss.length&&e!==0&&e<ss[n].priority;n++);ss.splice(n,0,t),n===0&&v_(t)}};function ip(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bg(){}function t1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Fc(o);i.call(d)}}var o=V0(e,r,t,0,null,!1,!1,"",Bg);return t._reactRootContainer=o,t[zr]=o.current,Aa(t.nodeType===8?t.parentNode:t),li(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Fc(u);c.call(d)}}var u=np(t,0,!1,null,null,!1,!1,"",Bg);return t._reactRootContainer=u,t[zr]=u.current,Aa(t.nodeType===8?t.parentNode:t),li(function(){wu(e,u,n,r)}),u}function Iu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Fc(o);c.call(u)}}wu(e,o,t,s)}else o=t1(n,e,t,s,r);return Fc(o)}f_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Go(e.pendingLanes);n!==0&&(Sf(e,n|1),gn(e,vt()),!(Me&6)&&(co=vt()+500,Vs()))}break;case 13:li(function(){var r=Br(t,1);if(r!==null){var s=nn();Qn(r,t,1,s)}}),rp(t,1)}};Af=function(t){if(t.tag===13){var e=Br(t,134217728);if(e!==null){var n=nn();Qn(e,t,134217728,n)}rp(t,134217728)}};p_=function(t){if(t.tag===13){var e=ws(t),n=Br(t,e);if(n!==null){var r=nn();Qn(n,t,e,r)}rp(t,e)}};m_=function(){return ze};g_=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};nh=function(t,e,n){switch(e){case"input":if(Qd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=fu(r);if(!s)throw Error(J(90));Gy(r),Qd(r,s)}}}break;case"textarea":Qy(t,n);break;case"select":e=n.value,e!=null&&Gi(t,!!n.multiple,e,!1)}};n_=Jf;r_=li;var n1={usingClientEntryPoint:!1,Events:[Ka,Fi,fu,e_,t_,Jf]},Ho={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r1={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=o_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||e1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{cu=Ul.inject(r1),cr=Ul}catch{}}xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n1;xn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ip(e))throw Error(J(200));return ZS(t,e,null,n)};xn.createRoot=function(t,e){if(!ip(t))throw Error(J(299));var n=!1,r="",s=L0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=np(t,1,!1,null,null,n,!1,r,s),t[zr]=e.current,Aa(t.nodeType===8?t.parentNode:t),new sp(e)};xn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=o_(e),t=t===null?null:t.stateNode,t};xn.flushSync=function(t){return li(t)};xn.hydrate=function(t,e,n){if(!Tu(e))throw Error(J(200));return Iu(null,t,e,!0,n)};xn.hydrateRoot=function(t,e,n){if(!ip(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=L0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=V0(e,null,t,1,n??null,s,!1,i,o),t[zr]=e.current,Aa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Eu(e)};xn.render=function(t,e,n){if(!Tu(e))throw Error(J(200));return Iu(null,t,e,!1,n)};xn.unmountComponentAtNode=function(t){if(!Tu(t))throw Error(J(40));return t._reactRootContainer?(li(function(){Iu(null,null,t,!1,function(){t._reactRootContainer=null,t[zr]=null})}),!0):!1};xn.unstable_batchedUpdates=Jf;xn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tu(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Iu(t,e,n,!1,r)};xn.version="18.3.1-next-f1338f8080-20240426";function F0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F0)}catch(t){console.error(t)}}F0(),Fy.exports=xn;var s1=Fy.exports,U0,$g=s1;U0=$g.createRoot,$g.hydrateRoot;const i1=()=>{};var Hg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},o1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},B0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[f],n[m],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(z0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):o1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new a1;const g=i<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),m!==64){const P=d<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class a1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l1=function(t){const e=z0(t);return B0.encodeByteArray(e,!0)},$0=function(t){return l1(t).replace(/\./g,"")},H0=function(t){try{return B0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=()=>c1().__FIREBASE_DEFAULTS__,d1=()=>{if(typeof process>"u"||typeof Hg>"u")return;const t=Hg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},h1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&H0(t[1]);return e&&JSON.parse(e)},Su=()=>{try{return i1()||u1()||d1()||h1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},q0=t=>{var e,n;return(n=(e=Su())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},f1=t=>{const e=q0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},W0=()=>{var t;return(t=Su())===null||t===void 0?void 0:t.config},G0=t=>{var e;return(e=Su())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function op(t){return(await fetch(t,{credentials:"include"})).ok}const da={};function m1(){const t={prod:[],emulator:[]};for(const e of Object.keys(da))da[e]?t.emulator.push(e):t.prod.push(e);return t}function g1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let qg=!1;function K0(t,e){if(typeof window>"u"||typeof document>"u"||!_i(window.location.host)||da[t]===e||da[t]||qg)return;da[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=m1().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{qg=!0,o()},g}function f(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=g1(r),w=n("text"),P=document.getElementById(w)||document.createElement("span"),b=n("learnmore"),U=document.getElementById(b)||document.createElement("a"),A=n("preprendIcon"),I=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;c(S),f(U,b);const j=d();u(I,A),S.append(I,P,U,j),document.body.appendChild(S)}i?(P.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function y1(){var t;const e=(t=Su())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function w1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function E1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function T1(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function I1(){return!y1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S1(){try{return typeof indexedDB=="object"}catch{return!1}}function A1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="FirebaseError";class _r extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=C1,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ya.prototype.create)}}class Ya{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?x1(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new _r(s,c,r)}}function x1(t,e){return t.replace(P1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const P1=/\{\$([^}]+)}/g;function N1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ci(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Wg(i)&&Wg(o)){if(!ci(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Wg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Yo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function R1(t,e){const n=new k1(t,e);return n.subscribe.bind(n)}class k1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");D1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Nd),s.error===void 0&&(s.error=Nd),s.complete===void 0&&(s.complete=Nd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new p1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O1(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:b1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function b1(t){return t===Ks?void 0:t}function O1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const V1={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},L1=De.INFO,F1={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},U1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=F1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ap{constructor(e){this.name=e,this._logLevel=L1,this._logHandler=U1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?V1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const z1=(t,e)=>e.some(n=>t instanceof n);let Gg,Kg;function B1(){return Gg||(Gg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $1(){return Kg||(Kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Q0=new WeakMap,Oh=new WeakMap,Y0=new WeakMap,Rd=new WeakMap,lp=new WeakMap;function H1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ts(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Q0.set(n,t)}).catch(()=>{}),lp.set(e,t),e}function q1(t){if(Oh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Oh.set(t,e)}let Mh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Oh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Y0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ts(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W1(t){Mh=t(Mh)}function G1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kd(this),e,...n);return Y0.set(r,e.sort?e.sort():[e]),Ts(r)}:$1().includes(t)?function(...e){return t.apply(kd(this),e),Ts(Q0.get(this))}:function(...e){return Ts(t.apply(kd(this),e))}}function K1(t){return typeof t=="function"?G1(t):(t instanceof IDBTransaction&&q1(t),z1(t,B1())?new Proxy(t,Mh):t)}function Ts(t){if(t instanceof IDBRequest)return H1(t);if(Rd.has(t))return Rd.get(t);const e=K1(t);return e!==t&&(Rd.set(t,e),lp.set(e,t)),e}const kd=t=>lp.get(t);function Q1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Ts(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ts(o.result),u.oldVersion,u.newVersion,Ts(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Y1=["get","getKey","getAll","getAllKeys","count"],X1=["put","add","delete","clear"],Dd=new Map;function Qg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=X1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Y1.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Dd.set(e,i),i}W1(t=>({...t,get:(e,n,r)=>Qg(e,n)||t.get(e,n,r),has:(e,n)=>!!Qg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Z1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Z1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vh="@firebase/app",Yg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new ap("@firebase/app"),eA="@firebase/app-compat",tA="@firebase/analytics-compat",nA="@firebase/analytics",rA="@firebase/app-check-compat",sA="@firebase/app-check",iA="@firebase/auth",oA="@firebase/auth-compat",aA="@firebase/database",lA="@firebase/data-connect",cA="@firebase/database-compat",uA="@firebase/functions",dA="@firebase/functions-compat",hA="@firebase/installations",fA="@firebase/installations-compat",pA="@firebase/messaging",mA="@firebase/messaging-compat",gA="@firebase/performance",vA="@firebase/performance-compat",yA="@firebase/remote-config",_A="@firebase/remote-config-compat",wA="@firebase/storage",EA="@firebase/storage-compat",TA="@firebase/firestore",IA="@firebase/ai",SA="@firebase/firestore-compat",AA="firebase",CA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="[DEFAULT]",xA={[Vh]:"fire-core",[eA]:"fire-core-compat",[nA]:"fire-analytics",[tA]:"fire-analytics-compat",[sA]:"fire-app-check",[rA]:"fire-app-check-compat",[iA]:"fire-auth",[oA]:"fire-auth-compat",[aA]:"fire-rtdb",[lA]:"fire-data-connect",[cA]:"fire-rtdb-compat",[uA]:"fire-fn",[dA]:"fire-fn-compat",[hA]:"fire-iid",[fA]:"fire-iid-compat",[pA]:"fire-fcm",[mA]:"fire-fcm-compat",[gA]:"fire-perf",[vA]:"fire-perf-compat",[yA]:"fire-rc",[_A]:"fire-rc-compat",[wA]:"fire-gcs",[EA]:"fire-gcs-compat",[TA]:"fire-fst",[SA]:"fire-fst-compat",[IA]:"fire-vertex","fire-js":"fire-js",[AA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new Map,PA=new Map,Fh=new Map;function Xg(t,e){try{t.container.addComponent(e)}catch(n){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ui(t){const e=t.name;if(Fh.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;Fh.set(e,t);for(const n of Uc.values())Xg(n,t);for(const n of PA.values())Xg(n,t);return!0}function Au(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function En(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new Ya("app","Firebase",NA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=CA;function Uh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Lh,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Is.create("bad-app-name",{appName:String(s)});if(n||(n=W0()),!n)throw Is.create("no-options");const i=Uc.get(s);if(i){if(ci(n,i.options)&&ci(r,i.config))return i;throw Is.create("duplicate-app",{appName:s})}const o=new M1(s);for(const u of Fh.values())o.addComponent(u);const c=new RA(n,r,o);return Uc.set(s,c),c}function X0(t=Lh){const e=Uc.get(t);if(!e&&t===Lh&&W0())return Uh();if(!e)throw Is.create("no-app",{appName:t});return e}function dr(t,e,n){var r;let s=(r=xA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(c.join(" "));return}ui(new Ps(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="firebase-heartbeat-database",DA=1,ba="firebase-heartbeat-store";let jd=null;function J0(){return jd||(jd=Q1(kA,DA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw Is.create("idb-open",{originalErrorMessage:t.message})})),jd}async function jA(t){try{const n=(await J0()).transaction(ba),r=await n.objectStore(ba).get(Z0(t));return await n.done,r}catch(e){if(e instanceof _r)Hr.warn(e.message);else{const n=Is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hr.warn(n.message)}}}async function Jg(t,e){try{const r=(await J0()).transaction(ba,"readwrite");await r.objectStore(ba).put(e,Z0(t)),await r.done}catch(n){if(n instanceof _r)Hr.warn(n.message);else{const r=Is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hr.warn(r.message)}}}function Z0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=1024,OA=30;class MA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Zg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>OA){const o=FA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zg(),{heartbeatsToSend:r,unsentEntries:s}=VA(this._heartbeatsCache.heartbeats),i=$0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hr.warn(n),""}}}function Zg(){return new Date().toISOString().substring(0,10)}function VA(t,e=bA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ev(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ev(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return S1()?A1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ev(t){return $0(JSON.stringify({version:2,heartbeats:t})).length}function FA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){ui(new Ps("platform-logger",e=>new J1(e),"PRIVATE")),ui(new Ps("heartbeat",e=>new MA(e),"PRIVATE")),dr(Vh,Yg,t),dr(Vh,Yg,"esm2017"),dr("fire-js","")}UA("");var zA="firebase",BA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(zA,BA,"app");var tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ss,ew;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function T(){}T.prototype=y.prototype,v.D=y.prototype,v.prototype=new T,v.prototype.constructor=v,v.C=function(C,R,D){for(var x=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)x[nt-2]=arguments[nt];return y.prototype[R].apply(C,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,T){T||(T=0);var C=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)C[R]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(R=0;16>R;++R)C[R]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=v.g[0],T=v.g[1],R=v.g[2];var D=v.g[3],x=y+(D^T&(R^D))+C[0]+3614090360&4294967295;y=T+(x<<7&4294967295|x>>>25),x=D+(R^y&(T^R))+C[1]+3905402710&4294967295,D=y+(x<<12&4294967295|x>>>20),x=R+(T^D&(y^T))+C[2]+606105819&4294967295,R=D+(x<<17&4294967295|x>>>15),x=T+(y^R&(D^y))+C[3]+3250441966&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(D^T&(R^D))+C[4]+4118548399&4294967295,y=T+(x<<7&4294967295|x>>>25),x=D+(R^y&(T^R))+C[5]+1200080426&4294967295,D=y+(x<<12&4294967295|x>>>20),x=R+(T^D&(y^T))+C[6]+2821735955&4294967295,R=D+(x<<17&4294967295|x>>>15),x=T+(y^R&(D^y))+C[7]+4249261313&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(D^T&(R^D))+C[8]+1770035416&4294967295,y=T+(x<<7&4294967295|x>>>25),x=D+(R^y&(T^R))+C[9]+2336552879&4294967295,D=y+(x<<12&4294967295|x>>>20),x=R+(T^D&(y^T))+C[10]+4294925233&4294967295,R=D+(x<<17&4294967295|x>>>15),x=T+(y^R&(D^y))+C[11]+2304563134&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(D^T&(R^D))+C[12]+1804603682&4294967295,y=T+(x<<7&4294967295|x>>>25),x=D+(R^y&(T^R))+C[13]+4254626195&4294967295,D=y+(x<<12&4294967295|x>>>20),x=R+(T^D&(y^T))+C[14]+2792965006&4294967295,R=D+(x<<17&4294967295|x>>>15),x=T+(y^R&(D^y))+C[15]+1236535329&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(R^D&(T^R))+C[1]+4129170786&4294967295,y=T+(x<<5&4294967295|x>>>27),x=D+(T^R&(y^T))+C[6]+3225465664&4294967295,D=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(D^y))+C[11]+643717713&4294967295,R=D+(x<<14&4294967295|x>>>18),x=T+(D^y&(R^D))+C[0]+3921069994&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(R^D&(T^R))+C[5]+3593408605&4294967295,y=T+(x<<5&4294967295|x>>>27),x=D+(T^R&(y^T))+C[10]+38016083&4294967295,D=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(D^y))+C[15]+3634488961&4294967295,R=D+(x<<14&4294967295|x>>>18),x=T+(D^y&(R^D))+C[4]+3889429448&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(R^D&(T^R))+C[9]+568446438&4294967295,y=T+(x<<5&4294967295|x>>>27),x=D+(T^R&(y^T))+C[14]+3275163606&4294967295,D=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(D^y))+C[3]+4107603335&4294967295,R=D+(x<<14&4294967295|x>>>18),x=T+(D^y&(R^D))+C[8]+1163531501&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(R^D&(T^R))+C[13]+2850285829&4294967295,y=T+(x<<5&4294967295|x>>>27),x=D+(T^R&(y^T))+C[2]+4243563512&4294967295,D=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(D^y))+C[7]+1735328473&4294967295,R=D+(x<<14&4294967295|x>>>18),x=T+(D^y&(R^D))+C[12]+2368359562&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(T^R^D)+C[5]+4294588738&4294967295,y=T+(x<<4&4294967295|x>>>28),x=D+(y^T^R)+C[8]+2272392833&4294967295,D=y+(x<<11&4294967295|x>>>21),x=R+(D^y^T)+C[11]+1839030562&4294967295,R=D+(x<<16&4294967295|x>>>16),x=T+(R^D^y)+C[14]+4259657740&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(T^R^D)+C[1]+2763975236&4294967295,y=T+(x<<4&4294967295|x>>>28),x=D+(y^T^R)+C[4]+1272893353&4294967295,D=y+(x<<11&4294967295|x>>>21),x=R+(D^y^T)+C[7]+4139469664&4294967295,R=D+(x<<16&4294967295|x>>>16),x=T+(R^D^y)+C[10]+3200236656&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(T^R^D)+C[13]+681279174&4294967295,y=T+(x<<4&4294967295|x>>>28),x=D+(y^T^R)+C[0]+3936430074&4294967295,D=y+(x<<11&4294967295|x>>>21),x=R+(D^y^T)+C[3]+3572445317&4294967295,R=D+(x<<16&4294967295|x>>>16),x=T+(R^D^y)+C[6]+76029189&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(T^R^D)+C[9]+3654602809&4294967295,y=T+(x<<4&4294967295|x>>>28),x=D+(y^T^R)+C[12]+3873151461&4294967295,D=y+(x<<11&4294967295|x>>>21),x=R+(D^y^T)+C[15]+530742520&4294967295,R=D+(x<<16&4294967295|x>>>16),x=T+(R^D^y)+C[2]+3299628645&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(R^(T|~D))+C[0]+4096336452&4294967295,y=T+(x<<6&4294967295|x>>>26),x=D+(T^(y|~R))+C[7]+1126891415&4294967295,D=y+(x<<10&4294967295|x>>>22),x=R+(y^(D|~T))+C[14]+2878612391&4294967295,R=D+(x<<15&4294967295|x>>>17),x=T+(D^(R|~y))+C[5]+4237533241&4294967295,T=R+(x<<21&4294967295|x>>>11),x=y+(R^(T|~D))+C[12]+1700485571&4294967295,y=T+(x<<6&4294967295|x>>>26),x=D+(T^(y|~R))+C[3]+2399980690&4294967295,D=y+(x<<10&4294967295|x>>>22),x=R+(y^(D|~T))+C[10]+4293915773&4294967295,R=D+(x<<15&4294967295|x>>>17),x=T+(D^(R|~y))+C[1]+2240044497&4294967295,T=R+(x<<21&4294967295|x>>>11),x=y+(R^(T|~D))+C[8]+1873313359&4294967295,y=T+(x<<6&4294967295|x>>>26),x=D+(T^(y|~R))+C[15]+4264355552&4294967295,D=y+(x<<10&4294967295|x>>>22),x=R+(y^(D|~T))+C[6]+2734768916&4294967295,R=D+(x<<15&4294967295|x>>>17),x=T+(D^(R|~y))+C[13]+1309151649&4294967295,T=R+(x<<21&4294967295|x>>>11),x=y+(R^(T|~D))+C[4]+4149444226&4294967295,y=T+(x<<6&4294967295|x>>>26),x=D+(T^(y|~R))+C[11]+3174756917&4294967295,D=y+(x<<10&4294967295|x>>>22),x=R+(y^(D|~T))+C[2]+718787259&4294967295,R=D+(x<<15&4294967295|x>>>17),x=T+(D^(R|~y))+C[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(R+(x<<21&4294967295|x>>>11))&4294967295,v.g[2]=v.g[2]+R&4294967295,v.g[3]=v.g[3]+D&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var T=y-this.blockSize,C=this.B,R=this.h,D=0;D<y;){if(R==0)for(;D<=T;)s(this,v,D),D+=this.blockSize;if(typeof v=="string"){for(;D<y;)if(C[R++]=v.charCodeAt(D++),R==this.blockSize){s(this,C),R=0;break}}else for(;D<y;)if(C[R++]=v[D++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var T=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=T&255,T/=256;for(this.u(v),v=Array(16),y=T=0;4>y;++y)for(var C=0;32>C;C+=8)v[T++]=this.g[y]>>>C&255;return v};function i(v,y){var T=c;return Object.prototype.hasOwnProperty.call(T,v)?T[v]:T[v]=y(v)}function o(v,y){this.h=y;for(var T=[],C=!0,R=v.length-1;0<=R;R--){var D=v[R]|0;C&&D==y||(T[R]=D,C=!1)}this.g=T}var c={};function u(v){return-128<=v&&128>v?i(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return m;if(0>v)return U(d(-v));for(var y=[],T=1,C=0;v>=T;C++)y[C]=v/T|0,T*=4294967296;return new o(y,0)}function f(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return U(f(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(y,8)),C=m,R=0;R<v.length;R+=8){var D=Math.min(8,v.length-R),x=parseInt(v.substring(R,R+D),y);8>D?(D=d(Math.pow(y,D)),C=C.j(D).add(d(x))):(C=C.j(T),C=C.add(d(x)))}return C}var m=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-U(this).m();for(var v=0,y=1,T=0;T<this.g.length;T++){var C=this.i(T);v+=(0<=C?C:4294967296+C)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(P(this))return"0";if(b(this))return"-"+U(this).toString(v);for(var y=d(Math.pow(v,6)),T=this,C="";;){var R=j(T,y).g;T=A(T,R.j(y));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(v);if(T=R,P(T))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function P(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function b(v){return v.h==-1}t.l=function(v){return v=A(this,v),b(v)?-1:P(v)?0:1};function U(v){for(var y=v.g.length,T=[],C=0;C<y;C++)T[C]=~v.g[C];return new o(T,~v.h).add(g)}t.abs=function(){return b(this)?U(this):this},t.add=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0,R=0;R<=y;R++){var D=C+(this.i(R)&65535)+(v.i(R)&65535),x=(D>>>16)+(this.i(R)>>>16)+(v.i(R)>>>16);C=x>>>16,D&=65535,x&=65535,T[R]=x<<16|D}return new o(T,T[T.length-1]&-2147483648?-1:0)};function A(v,y){return v.add(U(y))}t.j=function(v){if(P(this)||P(v))return m;if(b(this))return b(v)?U(this).j(U(v)):U(U(this).j(v));if(b(v))return U(this.j(U(v)));if(0>this.l(w)&&0>v.l(w))return d(this.m()*v.m());for(var y=this.g.length+v.g.length,T=[],C=0;C<2*y;C++)T[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<v.g.length;R++){var D=this.i(C)>>>16,x=this.i(C)&65535,nt=v.i(R)>>>16,Pt=v.i(R)&65535;T[2*C+2*R]+=x*Pt,I(T,2*C+2*R),T[2*C+2*R+1]+=D*Pt,I(T,2*C+2*R+1),T[2*C+2*R+1]+=x*nt,I(T,2*C+2*R+1),T[2*C+2*R+2]+=D*nt,I(T,2*C+2*R+2)}for(C=0;C<y;C++)T[C]=T[2*C+1]<<16|T[2*C];for(C=y;C<2*y;C++)T[C]=0;return new o(T,0)};function I(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function S(v,y){this.g=v,this.h=y}function j(v,y){if(P(y))throw Error("division by zero");if(P(v))return new S(m,m);if(b(v))return y=j(U(v),y),new S(U(y.g),U(y.h));if(b(y))return y=j(v,U(y)),new S(U(y.g),y.h);if(30<v.g.length){if(b(v)||b(y))throw Error("slowDivide_ only works with positive integers.");for(var T=g,C=y;0>=C.l(v);)T=N(T),C=N(C);var R=V(T,1),D=V(C,1);for(C=V(C,2),T=V(T,2);!P(C);){var x=D.add(C);0>=x.l(v)&&(R=R.add(T),D=x),C=V(C,1),T=V(T,1)}return y=A(v,R.j(y)),new S(R,y)}for(R=m;0<=v.l(y);){for(T=Math.max(1,Math.floor(v.m()/y.m())),C=Math.ceil(Math.log(T)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=d(T),x=D.j(y);b(x)||0<x.l(v);)T-=C,D=d(T),x=D.j(y);P(D)&&(D=g),R=R.add(D),v=A(v,x)}return new S(R,v)}t.A=function(v){return j(this,v).h},t.and=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0;C<y;C++)T[C]=this.i(C)&v.i(C);return new o(T,this.h&v.h)},t.or=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0;C<y;C++)T[C]=this.i(C)|v.i(C);return new o(T,this.h|v.h)},t.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0;C<y;C++)T[C]=this.i(C)^v.i(C);return new o(T,this.h^v.h)};function N(v){for(var y=v.g.length+1,T=[],C=0;C<y;C++)T[C]=v.i(C)<<1|v.i(C-1)>>>31;return new o(T,v.h)}function V(v,y){var T=y>>5;y%=32;for(var C=v.g.length-T,R=[],D=0;D<C;D++)R[D]=0<y?v.i(D+T)>>>y|v.i(D+T+1)<<32-y:v.i(D+T);return new o(R,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ew=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Ss=o}).apply(typeof tv<"u"?tv:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tw,Xo,nw,oc,zh,rw,sw,iw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var M=a[_];if(!(M in p))break e;p=p[M]}a=a[a.length-1],_=p[a],h=h(_),h!=_&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,_=!1,M={next:function(){if(!_&&p<a.length){var z=p++;return{value:h(z,a[z]),done:!1}}return _=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,_),a.apply(h,M)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function w(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function P(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(_,M,z){for(var ne=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ne[Be-2]=arguments[Be];return h.prototype[M].apply(_,ne)}}function b(a){const h=a.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=a[_];return p}return[]}function U(a,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(u(_)){const M=a.length||0,z=_.length||0;a.length=M+z;for(let ne=0;ne<z;ne++)a[M+ne]=_[ne]}else a.push(_)}}class A{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function I(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var N=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function V(a,h,p){for(const _ in a)h.call(p,a[_],_,a)}function v(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function y(a){const h={};for(const p in a)h[p]=a[p];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(a,h){let p,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(p in _)a[p]=_[p];for(let z=0;z<T.length;z++)p=T[z],Object.prototype.hasOwnProperty.call(_,p)&&(a[p]=_[p])}}function R(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function D(a){c.setTimeout(()=>{throw a},0)}function x(){var a=O;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class nt{constructor(){this.h=this.g=null}add(h,p){const _=Pt.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var Pt=new A(()=>new rt,a=>a.reset());class rt{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let W,$=!1,O=new nt,B=()=>{const a=c.Promise.resolve(void 0);W=()=>{a.then(H)}};var H=()=>{for(var a;a=x();){try{a.h.call(a.g)}catch(p){D(p)}var h=Pt;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return a}();function Fe(a,h){if(oe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(N){e:{try{j(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ne[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Fe.aa.h.call(this)}}P(Fe,oe);var Ne={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var $e="closure_listenable_"+(1e6*Math.random()|0),Ln=0;function Nn(a,h,p,_,M){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=M,this.key=++Ln,this.da=this.fa=!1}function Bt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $t(a){this.src=a,this.g={},this.h=0}$t.prototype.add=function(a,h,p,_,M){var z=a.toString();a=this.g[z],a||(a=this.g[z]=[],this.h++);var ne=wr(a,h,_,M);return-1<ne?(h=a[ne],p||(h.fa=!1)):(h=new Nn(h,this.src,z,!!_,M),h.fa=p,a.push(h)),h};function et(a,h){var p=h.type;if(p in a.g){var _=a.g[p],M=Array.prototype.indexOf.call(_,h,void 0),z;(z=0<=M)&&Array.prototype.splice.call(_,M,1),z&&(Bt(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function wr(a,h,p,_){for(var M=0;M<a.length;++M){var z=a[M];if(!z.da&&z.listener==h&&z.capture==!!p&&z.ha==_)return M}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),He={};function qe(a,h,p,_,M){if(Array.isArray(h)){for(var z=0;z<h.length;z++)qe(a,h[z],p,_,M);return null}return p=E(p),a&&a[$e]?a.K(h,p,d(_)?!!_.capture:!1,M):Er(a,h,p,!1,_,M)}function Er(a,h,p,_,M,z){if(!h)throw Error("Invalid event type");var ne=d(M)?!!M.capture:!!M,Be=er(a);if(Be||(a[ke]=Be=new $t(a)),p=Be.add(h,p,_,ne,z),p.proxy)return p;if(_=Yr(),p.proxy=_,_.src=a,_.listener=p,a.addEventListener)Ie||(M=ne),M===void 0&&(M=!1),a.addEventListener(h.toString(),_,M);else if(a.attachEvent)a.attachEvent(Zn(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Yr(){function a(p){return h.call(a.src,a.listener,p)}const h=Dt;return a}function Tr(a,h,p,_,M){if(Array.isArray(h))for(var z=0;z<h.length;z++)Tr(a,h[z],p,_,M);else _=d(_)?!!_.capture:!!_,p=E(p),a&&a[$e]?(a=a.i,h=String(h).toString(),h in a.g&&(z=a.g[h],p=wr(z,p,_,M),-1<p&&(Bt(z[p]),Array.prototype.splice.call(z,p,1),z.length==0&&(delete a.g[h],a.h--)))):a&&(a=er(a))&&(h=a.g[h.toString()],a=-1,h&&(a=wr(h,p,_,M)),(p=-1<a?h[a]:null)&&Ke(p))}function Ke(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[$e])et(h.i,a);else{var p=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(p,_,a.capture):h.detachEvent?h.detachEvent(Zn(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=er(h))?(et(p,a),p.h==0&&(p.src=null,h[ke]=null)):Bt(a)}}}function Zn(a){return a in He?He[a]:He[a]="on"+a}function Dt(a,h){if(a.da)a=!0;else{h=new Fe(h,this);var p=a.listener,_=a.ha||a.src;a.fa&&Ke(a),a=p.call(_,h)}return a}function er(a){return a=a[ke],a instanceof $t?a:null}var Fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function E(a){return typeof a=="function"?a:(a[Fn]||(a[Fn]=function(h){return a.handleEvent(h)}),a[Fn])}function k(){Z.call(this),this.i=new $t(this),this.M=this,this.F=null}P(k,Z),k.prototype[$e]=!0,k.prototype.removeEventListener=function(a,h,p,_){Tr(this,a,h,p,_)};function F(a,h){var p,_=a.F;if(_)for(p=[];_;_=_.F)p.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new oe(h,a);else if(h instanceof oe)h.target=h.target||a;else{var M=h;h=new oe(_,a),C(h,M)}if(M=!0,p)for(var z=p.length-1;0<=z;z--){var ne=h.g=p[z];M=L(ne,_,!0,h)&&M}if(ne=h.g=a,M=L(ne,_,!0,h)&&M,M=L(ne,_,!1,h)&&M,p)for(z=0;z<p.length;z++)ne=h.g=p[z],M=L(ne,_,!1,h)&&M}k.prototype.N=function(){if(k.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],_=0;_<p.length;_++)Bt(p[_]);delete a.g[h],a.h--}}this.F=null},k.prototype.K=function(a,h,p,_){return this.i.add(String(a),h,!1,p,_)},k.prototype.L=function(a,h,p,_){return this.i.add(String(a),h,!0,p,_)};function L(a,h,p,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,z=0;z<h.length;++z){var ne=h[z];if(ne&&!ne.da&&ne.capture==p){var Be=ne.listener,Ot=ne.ha||ne.src;ne.fa&&et(a.i,ne),M=Be.call(Ot,_)!==!1&&M}}return M&&!_.defaultPrevented}function re(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function we(a){a.g=re(()=>{a.g=null,a.i&&(a.i=!1,we(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class me extends Z{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:we(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ge(a){Z.call(this),this.h=a,this.g={}}P(ge,Z);var ve=[];function xe(a){V(a.g,function(h,p){this.g.hasOwnProperty(p)&&Ke(h)},a),a.g={}}ge.prototype.N=function(){ge.aa.N.call(this),xe(this)},ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=c.JSON.stringify,Un=c.JSON.parse,tr=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Ce(){}Ce.prototype.h=null;function jt(a){return a.h||(a.h=a.i())}function ee(){}var K={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function X(){oe.call(this,"d")}P(X,oe);function ae(){oe.call(this,"c")}P(ae,oe);var pe={},te=null;function Ee(){return te=te||new k}pe.La="serverreachability";function Q(a){oe.call(this,pe.La,a)}P(Q,oe);function ce(a){const h=Ee();F(h,new Q(h))}pe.STAT_EVENT="statevent";function he(a,h){oe.call(this,pe.STAT_EVENT,a),this.stat=h}P(he,oe);function ue(a){const h=Ee();F(h,new he(h,a))}pe.Ma="timingevent";function Ue(a,h){oe.call(this,pe.Ma,a),this.size=h}P(Ue,oe);function dt(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function ht(){this.g=!0}ht.prototype.xa=function(){this.g=!1};function en(a,h,p,_,M,z){a.info(function(){if(a.g)if(z)for(var ne="",Be=z.split("&"),Ot=0;Ot<Be.length;Ot++){var Ve=Be[Ot].split("=");if(1<Ve.length){var qt=Ve[0];Ve=Ve[1];var Wt=qt.split("_");ne=2<=Wt.length&&Wt[1]=="type"?ne+(qt+"="+Ve+"&"):ne+(qt+"=redacted&")}}else ne=null;else ne=z;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+h+`
`+p+`
`+ne})}function bt(a,h,p,_,M,z,ne){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+h+`
`+p+`
`+z+" "+ne})}function It(a,h,p,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+St(a,p)+(_?" "+_:"")})}function yt(a,h){a.info(function(){return"TIMEOUT: "+h})}ht.prototype.info=function(){};function St(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var _=p[a];if(!(2>_.length)){var M=_[1];if(Array.isArray(M)&&!(1>M.length)){var z=M[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ne=1;ne<M.length;ne++)M[ne]=""}}}}return Ae(p)}catch{return h}}var on={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rr;function zn(){}P(zn,Ce),zn.prototype.g=function(){return new XMLHttpRequest},zn.prototype.i=function(){return{}},rr=new zn;function vn(a,h,p,_){this.j=a,this.i=h,this.l=p,this.R=_||1,this.U=new ge(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new st}function st(){this.i=null,this.g="",this.h=!1}var Ir={},Sr={};function Ar(a,h,p){a.L=1,a.v=ml(Pr(h)),a.m=p,a.P=!0,Co(a,null)}function Co(a,h){a.F=Date.now(),Bs(a),a.A=Pr(a.v);var p=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),fm(p.i,"t",_),a.C=0,p=a.j.J,a.h=new st,a.g=km(a.j,p?h:null,!a.m),0<a.O&&(a.M=new me(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,_=a.ca;var M="readystatechange";Array.isArray(M)||(M&&(ve[0]=M.toString()),M=ve);for(var z=0;z<M.length;z++){var ne=qe(p,M[z],_||h.handleEvent,!1,h.h||h);if(!ne)break;h.g[ne.key]=ne}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),ce(),en(a.i,a.u,a.A,a.l,a.R,a.m)}vn.prototype.ca=function(a){a=a.target;const h=this.M;h&&Nr(a)==3?h.j():this.Y(a)},vn.prototype.Y=function(a){try{if(a==this.g)e:{const Wt=Nr(this.g);var h=this.g.Ba();const xi=this.g.Z();if(!(3>Wt)&&(Wt!=3||this.g&&(this.h.h||this.g.oa()||wm(this.g)))){this.J||Wt!=4||h==7||(h==8||0>=xi?ce(3):ce(2)),Si(this);var p=this.g.Z();this.X=p;t:if(xo(this)){var _=wm(this.g);a="";var M=_.length,z=Nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xr(this),Cr(this);var ne="";break t}this.h.i=new c.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(z&&h==M-1)});_.length=0,this.h.g+=a,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=p==200,bt(this.i,this.u,this.A,this.l,this.R,Wt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,Ot=this.g;if((Be=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Be)){var Ve=Be;break t}}Ve=null}if(p=Ve)It(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Po(this,p);else{this.o=!1,this.s=3,ue(12),xr(this),Cr(this);break e}}if(this.P){p=!0;let Bn;for(;!this.J&&this.C<ne.length;)if(Bn=Qu(this,ne),Bn==Sr){Wt==4&&(this.s=4,ue(14),p=!1),It(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==Ir){this.s=4,ue(15),It(this.i,this.l,ne,"[Invalid Chunk]"),p=!1;break}else It(this.i,this.l,Bn,null),Po(this,Bn);if(xo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||ne.length!=0||this.h.h||(this.s=1,ue(16),p=!1),this.o=this.o&&p,!p)It(this.i,this.l,ne,"[Invalid Chunked Response]"),xr(this),Cr(this);else if(0<ne.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),td(qt),qt.M=!0,ue(11))}}else It(this.i,this.l,ne,null),Po(this,ne);Wt==4&&xr(this),this.o&&!this.J&&(Wt==4?xm(this.j,this):(this.o=!1,Bs(this)))}else NT(this.g),p==400&&0<ne.indexOf("Unknown SID")?(this.s=3,ue(12)):(this.s=0,ue(13)),xr(this),Cr(this)}}}catch{}finally{}};function xo(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Qu(a,h){var p=a.C,_=h.indexOf(`
`,p);return _==-1?Sr:(p=Number(h.substring(p,_)),isNaN(p)?Ir:(_+=1,_+p>h.length?Sr:(h=h.slice(_,_+p),a.C=_+p,h)))}vn.prototype.cancel=function(){this.J=!0,xr(this)};function Bs(a){a.S=Date.now()+a.I,Yu(a,a.I)}function Yu(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=dt(g(a.ba,a),h)}function Si(a){a.B&&(c.clearTimeout(a.B),a.B=null)}vn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(yt(this.i,this.A),this.L!=2&&(ce(),ue(17)),xr(this),this.s=2,Cr(this)):Yu(this,this.S-a)};function Cr(a){a.j.G==0||a.J||xm(a.j,a)}function xr(a){Si(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,xe(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Po(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||Qe(p.h,a))){if(!a.K&&Qe(p.h,a)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)El(p),_l(p);else break e;ed(p),ue(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=dt(g(p.Za,p),6e3));if(1>=dl(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else qs(p,11)}else if((a.K||p.g==a)&&El(p),!I(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let Ve=M[h];if(p.T=Ve[0],Ve=Ve[1],p.G==2)if(Ve[0]=="c"){p.K=Ve[1],p.ia=Ve[2];const qt=Ve[3];qt!=null&&(p.la=qt,p.j.info("VER="+p.la));const Wt=Ve[4];Wt!=null&&(p.Aa=Wt,p.j.info("SVER="+p.Aa));const xi=Ve[5];xi!=null&&typeof xi=="number"&&0<xi&&(_=1.5*xi,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Bn=a.g;if(Bn){const Il=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var z=_.h;z.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Ht(z,z.h),z.h=null))}if(_.D){const nd=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;nd&&(_.ya=nd,Ye(_.I,_.D,nd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var ne=a;if(_.qa=Rm(_,_.J?_.ia:null,_.W),ne.K){$s(_.h,ne);var Be=ne,Ot=_.L;Ot&&(Be.I=Ot),Be.B&&(Si(Be),Bs(Be)),_.g=ne}else Am(_);0<p.i.length&&wl(p)}else Ve[0]!="stop"&&Ve[0]!="close"||qs(p,7);else p.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?qs(p,7):Zu(p):Ve[0]!="noop"&&p.l&&p.l.ta(Ve),p.v=0)}}ce(4)}catch{}}var Xu=class{constructor(a,h){this.g=a,this.map=h}};function cl(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ul(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function dl(a){return a.h?1:a.g?a.g.size:0}function Qe(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Ht(a,h){a.g?a.g.add(h):a.h=h}function $s(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}cl.prototype.cancel=function(){if(this.i=No(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function No(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return b(a.i)}function hl(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,_=0;_<p;_++)h.push(a[_]);return h}h=[],p=0;for(_ in a)h[p++]=a[_];return h}function mT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const _ in a)h[p++]=_;return h}}}function am(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=mT(a),_=hl(a),M=_.length,z=0;z<M;z++)h.call(void 0,_[z],p&&p[z],a)}var lm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gT(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var _=a[p].indexOf("="),M=null;if(0<=_){var z=a[p].substring(0,_);M=a[p].substring(_+1)}else z=a[p];h(z,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Hs(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Hs){this.h=a.h,fl(this,a.j),this.o=a.o,this.g=a.g,pl(this,a.s),this.l=a.l;var h=a.i,p=new Do;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),cm(this,p),this.m=a.m}else a&&(h=String(a).match(lm))?(this.h=!1,fl(this,h[1]||"",!0),this.o=Ro(h[2]||""),this.g=Ro(h[3]||"",!0),pl(this,h[4]),this.l=Ro(h[5]||"",!0),cm(this,h[6]||"",!0),this.m=Ro(h[7]||"")):(this.h=!1,this.i=new Do(null,this.h))}Hs.prototype.toString=function(){var a=[],h=this.j;h&&a.push(ko(h,um,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(ko(h,um,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(ko(p,p.charAt(0)=="/"?_T:yT,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",ko(p,ET)),a.join("")};function Pr(a){return new Hs(a)}function fl(a,h,p){a.j=p?Ro(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function pl(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function cm(a,h,p){h instanceof Do?(a.i=h,TT(a.i,a.h)):(p||(h=ko(h,wT)),a.i=new Do(h,a.h))}function Ye(a,h,p){a.i.set(h,p)}function ml(a){return Ye(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ro(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ko(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,vT),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function vT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var um=/[#\/\?@]/g,yT=/[#\?:]/g,_T=/[#\?]/g,wT=/[#\?@]/g,ET=/#/g;function Do(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Xr(a){a.g||(a.g=new Map,a.h=0,a.i&&gT(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Do.prototype,t.add=function(a,h){Xr(this),this.i=null,a=Ai(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function dm(a,h){Xr(a),h=Ai(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function hm(a,h){return Xr(a),h=Ai(a,h),a.g.has(h)}t.forEach=function(a,h){Xr(this),this.g.forEach(function(p,_){p.forEach(function(M){a.call(h,M,_,this)},this)},this)},t.na=function(){Xr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const M=a[_];for(let z=0;z<M.length;z++)p.push(h[_])}return p},t.V=function(a){Xr(this);let h=[];if(typeof a=="string")hm(this,a)&&(h=h.concat(this.g.get(Ai(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return Xr(this),this.i=null,a=Ai(this,a),hm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function fm(a,h,p){dm(a,h),0<p.length&&(a.i=null,a.g.set(Ai(a,h),b(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const z=encodeURIComponent(String(_)),ne=this.V(_);for(_=0;_<ne.length;_++){var M=z;ne[_]!==""&&(M+="="+encodeURIComponent(String(ne[_]))),a.push(M)}}return this.i=a.join("&")};function Ai(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function TT(a,h){h&&!a.j&&(Xr(a),a.i=null,a.g.forEach(function(p,_){var M=_.toLowerCase();_!=M&&(dm(this,_),fm(this,M,p))},a)),a.j=h}function IT(a,h){const p=new ht;if(c.Image){const _=new Image;_.onload=w(Jr,p,"TestLoadImage: loaded",!0,h,_),_.onerror=w(Jr,p,"TestLoadImage: error",!1,h,_),_.onabort=w(Jr,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=w(Jr,p,"TestLoadImage: timeout",!1,h,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function ST(a,h){const p=new ht,_=new AbortController,M=setTimeout(()=>{_.abort(),Jr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(z=>{clearTimeout(M),z.ok?Jr(p,"TestPingServer: ok",!0,h):Jr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),Jr(p,"TestPingServer: error",!1,h)})}function Jr(a,h,p,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(p)}catch{}}function AT(){this.g=new tr}function CT(a,h,p){const _=p||"";try{am(a,function(M,z){let ne=M;d(M)&&(ne=Ae(M)),h.push(_+z+"="+encodeURIComponent(ne))})}catch(M){throw h.push(_+"type="+encodeURIComponent("_badmap")),M}}function gl(a){this.l=a.Ub||null,this.j=a.eb||!1}P(gl,Ce),gl.prototype.g=function(){return new vl(this.l,this.j)},gl.prototype.i=function(a){return function(){return a}}({});function vl(a,h){k.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(vl,k),t=vl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,bo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,bo(this)),this.g&&(this.readyState=3,bo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function pm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?jo(this):bo(this),this.readyState==3&&pm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,jo(this))},t.Qa=function(a){this.g&&(this.response=a,jo(this))},t.ga=function(){this.g&&jo(this)};function jo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,bo(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function bo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function mm(a){let h="";return V(a,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Ju(a,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=mm(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Ye(a,h,p))}function ft(a){k.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(ft,k);var xT=/^https?$/i,PT=["POST","PUT"];t=ft.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rr.g(),this.v=this.o?jt(this.o):jt(rr),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(z){gm(this,z);return}if(a=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)p.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const z of _.keys())p.set(z,_.get(z));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(z=>z.toLowerCase()=="content-type"),M=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(PT,h,void 0))||_||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ne]of p)this.g.setRequestHeader(z,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_m(this),this.u=!0,this.g.send(a),this.u=!1}catch(z){gm(this,z)}};function gm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,vm(a),yl(a)}function vm(a){a.A||(a.A=!0,F(a,"complete"),F(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,F(this,"complete"),F(this,"abort"),yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ym(this):this.bb())},t.bb=function(){ym(this)};function ym(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Nr(a)!=4||a.Z()!=2)){if(a.u&&Nr(a)==4)re(a.Ea,0,a);else if(F(a,"readystatechange"),Nr(a)==4){a.h=!1;try{const ne=a.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=ne===0){var M=String(a.D).match(lm)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),_=!xT.test(M?M.toLowerCase():"")}p=_}if(p)F(a,"complete"),F(a,"success");else{a.m=6;try{var z=2<Nr(a)?a.g.statusText:""}catch{z=""}a.l=z+" ["+a.Z()+"]",vm(a)}}finally{yl(a)}}}}function yl(a,h){if(a.g){_m(a);const p=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||F(a,"ready");try{p.onreadystatechange=_}catch{}}}function _m(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Nr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Nr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Un(h)}};function wm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function NT(a){const h={};a=(a.g&&2<=Nr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(I(a[_]))continue;var p=R(a[_]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const z=h[M]||[];h[M]=z,z.push(p)}v(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oo(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Em(a){this.Aa=0,this.i=[],this.j=new ht,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oo("baseRetryDelayMs",5e3,a),this.cb=Oo("retryDelaySeedMs",1e4,a),this.Wa=Oo("forwardChannelMaxRetries",2,a),this.wa=Oo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new cl(a&&a.concurrentRequestLimit),this.Da=new AT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Em.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,_){ue(0),this.W=a,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=Rm(this,null,this.W),wl(this)};function Zu(a){if(Tm(a),a.G==3){var h=a.U++,p=Pr(a.I);if(Ye(p,"SID",a.K),Ye(p,"RID",h),Ye(p,"TYPE","terminate"),Mo(a,p),h=new vn(a,a.j,h),h.L=2,h.v=ml(Pr(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=km(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Bs(h)}Nm(a)}function _l(a){a.g&&(td(a),a.g.cancel(),a.g=null)}function Tm(a){_l(a),a.u&&(c.clearTimeout(a.u),a.u=null),El(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function wl(a){if(!ul(a.h)&&!a.s){a.s=!0;var h=a.Ga;W||B(),$||(W(),$=!0),O.add(h,a),a.B=0}}function RT(a,h){return dl(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=dt(g(a.Ga,a,h),Pm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const M=new vn(this,this.j,a);let z=this.o;if(this.S&&(z?(z=y(z),C(z,this.S)):z=this.S),this.m!==null||this.O||(M.H=z,z=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Sm(this,M,h),p=Pr(this.I),Ye(p,"RID",a),Ye(p,"CVER",22),this.D&&Ye(p,"X-HTTP-Session-Id",this.D),Mo(this,p),z&&(this.O?h="headers="+encodeURIComponent(String(mm(z)))+"&"+h:this.m&&Ju(p,this.m,z)),Ht(this.h,M),this.Ua&&Ye(p,"TYPE","init"),this.P?(Ye(p,"$req",h),Ye(p,"SID","null"),M.T=!0,Ar(M,p,null)):Ar(M,p,h),this.G=2}}else this.G==3&&(a?Im(this,a):this.i.length==0||ul(this.h)||Im(this))};function Im(a,h){var p;h?p=h.l:p=a.U++;const _=Pr(a.I);Ye(_,"SID",a.K),Ye(_,"RID",p),Ye(_,"AID",a.T),Mo(a,_),a.m&&a.o&&Ju(_,a.m,a.o),p=new vn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Sm(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ht(a.h,p),Ar(p,_,h)}function Mo(a,h){a.H&&V(a.H,function(p,_){Ye(h,_,p)}),a.l&&am({},function(p,_){Ye(h,_,p)})}function Sm(a,h,p){p=Math.min(a.i.length,p);var _=a.l?g(a.l.Na,a.l,a):null;e:{var M=a.i;let z=-1;for(;;){const ne=["count="+p];z==-1?0<p?(z=M[0].g,ne.push("ofs="+z)):z=0:ne.push("ofs="+z);let Be=!0;for(let Ot=0;Ot<p;Ot++){let Ve=M[Ot].g;const qt=M[Ot].map;if(Ve-=z,0>Ve)z=Math.max(0,M[Ot].g-100),Be=!1;else try{CT(qt,ne,"req"+Ve+"_")}catch{_&&_(qt)}}if(Be){_=ne.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,_}function Am(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;W||B(),$||(W(),$=!0),O.add(h,a),a.v=0}}function ed(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=dt(g(a.Fa,a),Pm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Cm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=dt(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ue(10),_l(this),Cm(this))};function td(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Cm(a){a.g=new vn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Pr(a.qa);Ye(h,"RID","rpc"),Ye(h,"SID",a.K),Ye(h,"AID",a.T),Ye(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ye(h,"TO",a.ja),Ye(h,"TYPE","xmlhttp"),Mo(a,h),a.m&&a.o&&Ju(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=ml(Pr(h)),p.m=null,p.P=!0,Co(p,a)}t.Za=function(){this.C!=null&&(this.C=null,_l(this),ed(this),ue(19))};function El(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function xm(a,h){var p=null;if(a.g==h){El(a),td(a),a.g=null;var _=2}else if(Qe(a.h,h))p=h.D,$s(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=a.B;_=Ee(),F(_,new Ue(_,p)),wl(a)}else Am(a);else if(M=h.s,M==3||M==0&&0<h.X||!(_==1&&RT(a,h)||_==2&&ed(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),M){case 1:qs(a,5);break;case 4:qs(a,10);break;case 3:qs(a,6);break;default:qs(a,2)}}}function Pm(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function qs(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),_=a.Xa;const M=!_;_=new Hs(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||fl(_,"https"),ml(_),M?IT(_.toString(),p):ST(_.toString(),p)}else ue(2);a.G=0,a.l&&a.l.sa(h),Nm(a),Tm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function Nm(a){if(a.G=0,a.ka=[],a.l){const h=No(a.h);(h.length!=0||a.i.length!=0)&&(U(a.ka,h),U(a.ka,a.i),a.h.i.length=0,b(a.i),a.i.length=0),a.l.ra()}}function Rm(a,h,p){var _=p instanceof Hs?Pr(p):new Hs(p);if(_.g!="")h&&(_.g=h+"."+_.g),pl(_,_.s);else{var M=c.location;_=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var z=new Hs(null);_&&fl(z,_),h&&(z.g=h),M&&pl(z,M),p&&(z.l=p),_=z}return p=a.D,h=a.ya,p&&h&&Ye(_,p,h),Ye(_,"VER",a.la),Mo(a,_),_}function km(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ft(new gl({eb:p})):new ft(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dm(){}t=Dm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(a,h){return new yn(a,h)};function yn(a,h){k.call(this),this.g=new Em(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!I(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ci(this)}P(yn,k),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Zu(this.g)},yn.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=Ae(a),a=p);h.i.push(new Xu(h.Ya++,a)),h.G==3&&wl(h)},yn.prototype.N=function(){this.g.l=null,delete this.j,Zu(this.g),delete this.g,yn.aa.N.call(this)};function jm(a){X.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}P(jm,X);function bm(){ae.call(this),this.status=1}P(bm,ae);function Ci(a){this.g=a}P(Ci,Dm),Ci.prototype.ua=function(){F(this.g,"a")},Ci.prototype.ta=function(a){F(this.g,new jm(a))},Ci.prototype.sa=function(a){F(this.g,new bm)},Ci.prototype.ra=function(){F(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,iw=function(){return new Tl},sw=function(){return Ee()},rw=pe,zh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,oc=on,nr.COMPLETE="complete",nw=nr,ee.EventType=K,K.OPEN="a",K.CLOSE="b",K.ERROR="c",K.MESSAGE="d",k.prototype.listen=k.prototype.K,Xo=ee,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,tw=ft}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const nv="@firebase/firestore",rv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new ap("@firebase/firestore");function Ni(){return di.logLevel}function ie(t,...e){if(di.logLevel<=De.DEBUG){const n=e.map(cp);di.debug(`Firestore (${Eo}): ${t}`,...n)}}function qr(t,...e){if(di.logLevel<=De.ERROR){const n=e.map(cp);di.error(`Firestore (${Eo}): ${t}`,...n)}}function hi(t,...e){if(di.logLevel<=De.WARN){const n=e.map(cp);di.warn(`Firestore (${Eo}): ${t}`,...n)}}function cp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ow(t,r,n)}function ow(t,e,n){let r=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qr(r),new Error(r)}function Le(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ow(e,s,r)}function Se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends _r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class qA{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Lr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Lr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string",31837,{l:r}),new $A(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class WA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new WA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,En(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Le(this.o===void 0,3512);const r=i=>{i.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=QA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Pe(t,e){return t<e?-1:t>e?1:0}function Bh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Pe(r,s);{const i=aw(),o=YA(i.encode(iv(t,n)),i.encode(iv(e,n)));return o!==0?o:Pe(r,s)}}n+=r>65535?2:1}return Pe(t.length,e.length)}function iv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function YA(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Pe(t[n],e[n]);return Pe(t.length,e.length)}function uo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="__name__";class or{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=or.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Pe(e.length,n.length)}static compareSegments(e,n){const r=or.isNumericId(e),s=or.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?or.extractNumericId(e).compare(or.extractNumericId(n)):Bh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class We extends or{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new We(n)}static emptyPath(){return new We([])}}const XA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends or{construct(e,n,r){return new Lt(e,n,r)}static isValidIdentifier(e){return XA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ov}static keyField(){return new Lt([ov])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new se(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new se(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new se(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(n)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(We.fromString(e))}static fromName(e){return new fe(We.fromString(e).popFirst(5))}static empty(){return new fe(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e,n){if(!n)throw new se(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JA(t,e,n,r){if(e===!0&&r===!0)throw new se(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function av(t){if(!fe.isDocumentKey(t))throw new se(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lv(t){if(fe.isDocumentKey(t))throw new se(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function An(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cu(t);throw new se(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ja(t,e){if(!cw(t))throw new se(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new se(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=-62135596800,uv=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*uv);return new Je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cv)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uv}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ja(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:Tt("string",Je._jsonSchemaVersion),seconds:Tt("number"),nanoseconds:Tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Je(0,0))}static max(){return new Te(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=-1;function ZA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Te.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new Ns(s,fe.empty(),e)}function eC(t){return new Ns(t.readTime,t.key,Oa)}class Ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ns(Te.min(),fe.empty(),Oa)}static max(){return new Ns(Te.max(),fe.empty(),Oa)}}function tC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==nC)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function sC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Io(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}xu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=-1;function Pu(t){return t==null}function zc(t){return t===0&&1/t==-1/0}function iC(t){return typeof t=="number"&&Number.isInteger(t)&&!zc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="";function oC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dv(e)),e=aC(t.get(n),e);return dv(e)}function aC(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case uw:n+="";break;default:n+=i}}return n}function dv(t){return t+uw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Vt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Vt.RED,this.left=s??Vt.EMPTY,this.right=i??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Vt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Vt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(e){return new fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new In([])}unionWith(e){let n=new xt(Lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hw("Invalid base64 string: "+i):i}}(e);return new zt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const lC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(t){if(Le(!!t,39018),typeof t=="string"){let e=0;const n=lC.exec(t);if(Le(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ks(t){return typeof t=="string"?zt.fromBase64String(t):zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="server_timestamp",pw="__type__",mw="__previous_value__",gw="__local_write_time__";function hp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[pw])===null||n===void 0?void 0:n.stringValue)===fw}function Nu(t){const e=t.mapValue.fields[mw];return hp(e)?Nu(e):e}function Ma(t){const e=Rs(t.mapValue.fields[gw].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n,r,s,i,o,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Bc="(default)";class Va{constructor(e,n){this.projectId=e,this.database=n||Bc}static empty(){return new Va("","")}get isDefaultDatabase(){return this.database===Bc}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="__type__",uC="__max__",$l={mapValue:{}},yw="__vector__",$c="value";function Ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hp(t)?4:hC(t)?9007199254740991:dC(t)?10:11:_e(28295,{value:t})}function yr(t,e){if(t===e)return!0;const n=Ds(t);if(n!==Ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ma(t).isEqual(Ma(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Rs(s.timestampValue),c=Rs(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ks(s.bytesValue).isEqual(ks(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return gt(s.geoPointValue.latitude)===gt(i.geoPointValue.latitude)&&gt(s.geoPointValue.longitude)===gt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return gt(s.integerValue)===gt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=gt(s.doubleValue),c=gt(i.doubleValue);return o===c?zc(o)===zc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return uo(t.arrayValue.values||[],e.arrayValue.values||[],yr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(hv(o)!==hv(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!yr(o[u],c[u])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function La(t,e){return(t.values||[]).find(n=>yr(n,e))!==void 0}function ho(t,e){if(t===e)return 0;const n=Ds(t),r=Ds(e);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=gt(i.integerValue||i.doubleValue),u=gt(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return pv(t.timestampValue,e.timestampValue);case 4:return pv(Ma(t),Ma(e));case 5:return Bh(t.stringValue,e.stringValue);case 6:return function(i,o){const c=ks(i),u=ks(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=Pe(c[d],u[d]);if(f!==0)return f}return Pe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Pe(gt(i.latitude),gt(o.latitude));return c!==0?c:Pe(gt(i.longitude),gt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,d,f;const m=i.fields||{},g=o.fields||{},w=(c=m[$c])===null||c===void 0?void 0:c.arrayValue,P=(u=g[$c])===null||u===void 0?void 0:u.arrayValue,b=Pe(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:mv(w,P)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$l.mapValue&&o===$l.mapValue)return 0;if(i===$l.mapValue)return 1;if(o===$l.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=Bh(u[m],f[m]);if(g!==0)return g;const w=ho(c[u[m]],d[f[m]]);if(w!==0)return w}return Pe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{le:n})}}function pv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=Rs(t),r=Rs(e),s=Pe(n.seconds,r.seconds);return s!==0?s:Pe(n.nanos,r.nanos)}function mv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ho(n[s],r[s]);if(i)return i}return Pe(n.length,r.length)}function fo(t){return $h(t)}function $h(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ks(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=$h(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${$h(n.fields[o])}`;return s+"}"}(t.mapValue):_e(61005,{value:t})}function ac(t){switch(Ds(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nu(t);return e?16+ac(e):16;case 5:return 2*t.stringValue.length;case 6:return ks(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ac(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ls(r.fields,(i,o)=>{s+=i.length+ac(o)}),s}(t.mapValue);default:throw _e(13486,{value:t})}}function gv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hh(t){return!!t&&"integerValue"in t}function fp(t){return!!t&&"arrayValue"in t}function vv(t){return!!t&&"nullValue"in t}function yv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lc(t){return!!t&&"mapValue"in t}function dC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[vw])===null||n===void 0?void 0:n.stringValue)===yw}function ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ls(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function hC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(n)}setAll(e){let n=Lt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=ha(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];lc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ls(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new dn(ha(this.value))}}function _w(t){const e=[];return Ls(t.fields,(n,r)=>{const s=new Lt([n]);if(lc(r)){const i=_w(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Xt(e,0,Te.min(),Te.min(),Te.min(),dn.empty(),0)}static newFoundDocument(e,n,r,s){return new Xt(e,1,n,Te.min(),r,s,0)}static newNoDocument(e,n){return new Xt(e,2,n,Te.min(),Te.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,Te.min(),Te.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.position=e,this.inclusive=n}}function _v(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=ho(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function wv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n="asc"){this.field=e,this.dir=n}}function fC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{}class Et extends ww{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mC(e,n,r):n==="array-contains"?new yC(e,r):n==="in"?new _C(e,r):n==="not-in"?new wC(e,r):n==="array-contains-any"?new EC(e,r):new Et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new gC(e,r):new vC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ho(n,this.value)):n!==null&&Ds(this.value)===Ds(n)&&this.matchesComparison(ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends ww{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Xn(e,n)}matches(e){return Ew(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Ew(t){return t.op==="and"}function Tw(t){return pC(t)&&Ew(t)}function pC(t){for(const e of t.filters)if(e instanceof Xn)return!1;return!0}function qh(t){if(t instanceof Et)return t.field.canonicalString()+t.op.toString()+fo(t.value);if(Tw(t))return t.filters.map(e=>qh(e)).join(",");{const e=t.filters.map(n=>qh(n)).join(",");return`${t.op}(${e})`}}function Iw(t,e){return t instanceof Et?function(r,s){return s instanceof Et&&r.op===s.op&&r.field.isEqual(s.field)&&yr(r.value,s.value)}(t,e):t instanceof Xn?function(r,s){return s instanceof Xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&Iw(o,s.filters[c]),!0):!1}(t,e):void _e(19439)}function Sw(t){return t instanceof Et?function(n){return`${n.field.canonicalString()} ${n.op} ${fo(n.value)}`}(t):t instanceof Xn?function(n){return n.op.toString()+" {"+n.getFilters().map(Sw).join(" ,")+"}"}(t):"Filter"}class mC extends Et{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class gC extends Et{constructor(e,n){super(e,"in",n),this.keys=Aw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vC extends Et{constructor(e,n){super(e,"not-in",n),this.keys=Aw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Aw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class yC extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fp(n)&&La(n.arrayValue,this.value)}}class _C extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&La(this.value.arrayValue,n)}}class wC extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!La(this.value.arrayValue,n)}}class EC extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>La(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Pe=null}}function Ev(t,e=null,n=[],r=[],s=null,i=null,o=null){return new TC(t,e,n,r,s,i,o)}function pp(t){const e=Se(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fo(r)).join(",")),e.Pe=n}return e.Pe}function mp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Iw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wv(t.startAt,e.startAt)&&wv(t.endAt,e.endAt)}function Wh(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function IC(t,e,n,r,s,i,o,c){return new Za(t,e,n,r,s,i,o,c)}function Ru(t){return new Za(t)}function Tv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Cw(t){return t.collectionGroup!==null}function fa(t){const e=Se(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new xt(Lt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new qc(i,r))}),n.has(Lt.keyField().canonicalString())||e.Te.push(new qc(Lt.keyField(),r))}return e.Te}function hr(t){const e=Se(t);return e.Ie||(e.Ie=SC(e,fa(t))),e.Ie}function SC(t,e){if(t.limitType==="F")return Ev(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new qc(s.field,i)});const n=t.endAt?new Hc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hc(t.startAt.position,t.startAt.inclusive):null;return Ev(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gh(t,e){const n=t.filters.concat([e]);return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Kh(t,e,n){return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ku(t,e){return mp(hr(t),hr(e))&&t.limitType===e.limitType}function xw(t){return`${pp(hr(t))}|lt:${t.limitType}`}function Ri(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Sw(s)).join(", ")}]`),Pu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>fo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>fo(s)).join(",")),`Target(${r})`}(hr(t))}; limitType=${t.limitType})`}function Du(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):fe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=_v(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,fa(r),s)||r.endAt&&!function(o,c,u){const d=_v(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,fa(r),s))}(t,e)}function AC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Pw(t){return(e,n)=>{let r=!1;for(const s of fa(t)){const i=CC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function CC(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?ho(u,d):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return dw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new ut(fe.comparator);function Wr(){return xC}const Nw=new ut(fe.comparator);function Jo(...t){let e=Nw;for(const n of t)e=e.insert(n.key,n);return e}function Rw(t){let e=Nw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Js(){return pa()}function kw(){return pa()}function pa(){return new wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const PC=new ut(fe.comparator),NC=new xt(fe.comparator);function je(...t){let e=NC;for(const n of t)e=e.add(n);return e}const RC=new xt(Pe);function kC(){return RC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function Dw(t){return{integerValue:""+t}}function DC(t,e){return iC(e)?Dw(e):gp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this._=void 0}}function jC(t,e,n){return t instanceof Fa?function(s,i){const o={fields:{[pw]:{stringValue:fw},[gw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&hp(i)&&(i=Nu(i)),i&&(o.fields[mw]=i),{mapValue:o}}(n,e):t instanceof Ua?bw(t,e):t instanceof za?Ow(t,e):function(s,i){const o=jw(s,i),c=Iv(o)+Iv(s.Ee);return Hh(o)&&Hh(s.Ee)?Dw(c):gp(s.serializer,c)}(t,e)}function bC(t,e,n){return t instanceof Ua?bw(t,e):t instanceof za?Ow(t,e):n}function jw(t,e){return t instanceof Wc?function(r){return Hh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Fa extends ju{}class Ua extends ju{constructor(e){super(),this.elements=e}}function bw(t,e){const n=Mw(e);for(const r of t.elements)n.some(s=>yr(s,r))||n.push(r);return{arrayValue:{values:n}}}class za extends ju{constructor(e){super(),this.elements=e}}function Ow(t,e){let n=Mw(e);for(const r of t.elements)n=n.filter(s=>!yr(s,r));return{arrayValue:{values:n}}}class Wc extends ju{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Iv(t){return gt(t.integerValue||t.doubleValue)}function Mw(t){return fp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.field=e,this.transform=n}}function MC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ua&&s instanceof Ua||r instanceof za&&s instanceof za?uo(r.elements,s.elements,yr):r instanceof Wc&&s instanceof Wc?yr(r.Ee,s.Ee):r instanceof Fa&&s instanceof Fa}(t.transform,e.transform)}class VC{constructor(e,n){this.version=e,this.transformResults=n}}class On{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bu{}function Vw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vp(t.key,On.none()):new el(t.key,t.data,On.none());{const n=t.data,r=dn.empty();let s=new xt(Lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Fs(t.key,r,new In(s.toArray()),On.none())}}function LC(t,e,n){t instanceof el?function(s,i,o){const c=s.value.clone(),u=Av(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Fs?function(s,i,o){if(!cc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Av(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Lw(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ma(t,e,n,r){return t instanceof el?function(i,o,c,u){if(!cc(i.precondition,o))return c;const d=i.value.clone(),f=Cv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fs?function(i,o,c,u){if(!cc(i.precondition,o))return c;const d=Cv(i.fieldTransforms,u,o),f=o.data;return f.setAll(Lw(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return cc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function FC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=jw(r.transform,s||null);i!=null&&(n===null&&(n=dn.empty()),n.set(r.field,i))}return n||null}function Sv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&uo(r,s,(i,o)=>MC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class el extends bu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fs extends bu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Av(t,e,n){const r=new Map;Le(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,bC(o,c,n[s]))}return r}function Cv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,jC(i,o,e))}return r}class vp extends bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UC extends bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&LC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=Vw(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,r)=>Sv(n,r))&&uo(this.baseMutations,e.baseMutations,(n,r)=>Sv(n,r))}}class yp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Le(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return PC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new yp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,be;function HC(t){switch(t){case q.OK:return _e(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return _e(15467,{code:t})}}function Fw(t){if(t===void 0)return qr("GRPC error has no .code"),q.UNKNOWN;switch(t){case _t.OK:return q.OK;case _t.CANCELLED:return q.CANCELLED;case _t.UNKNOWN:return q.UNKNOWN;case _t.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case _t.INTERNAL:return q.INTERNAL;case _t.UNAVAILABLE:return q.UNAVAILABLE;case _t.UNAUTHENTICATED:return q.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case _t.NOT_FOUND:return q.NOT_FOUND;case _t.ALREADY_EXISTS:return q.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return q.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case _t.ABORTED:return q.ABORTED;case _t.OUT_OF_RANGE:return q.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return q.UNIMPLEMENTED;case _t.DATA_LOSS:return q.DATA_LOSS;default:return _e(39323,{code:t})}}(be=_t||(_t={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new Ss([4294967295,4294967295],0);function xv(t){const e=aw().encode(t),n=new ew;return n.update(e),new Uint8Array(n.digest())}function Pv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ss([n,r],0),new Ss([s,i],0)]}class _p{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(r<0)throw new Zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ss.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Ss.fromNumber(r)));return s.compare(qC)===1&&(s=new Ss([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=xv(e),[r,s]=Pv(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new _p(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.fe===0)return;const n=xv(e),[r,s]=Pv(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,tl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ou(Te.min(),s,new ut(Pe),Wr(),je())}}class tl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tl(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class Uw{constructor(e,n){this.targetId=e,this.De=n}}class zw{constructor(e,n,r=zt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Nv{constructor(){this.ve=0,this.Ce=Rv(),this.Fe=zt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=je(),n=je(),r=je();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:_e(38017,{changeType:i})}}),new tl(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Rv()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class WC{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wr(),this.je=Hl(),this.Je=Hl(),this.He=new ut(Pe)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Wh(i))if(r===0){const o=new fe(i.path);this.Xe(n,o,Xt.newNoDocument(o,Te.min()))}else Le(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const c=this._t(e),u=c?this.ut(c,e,o):1;if(u!==0){this.rt(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=ks(r).toUint8Array()}catch(u){if(u instanceof hw)return hi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new _p(o,s,i)}catch(u){return hi(u instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const c=this.st(o);if(c){if(i.current&&Wh(c.target)){const u=new fe(c.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,Xt.newNoDocument(u,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=je();this.Je.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.st(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Ou(e,n,this.He,this.ze,r);return this.ze=Wr(),this.je=Hl(),this.Je=Hl(),this.He=new ut(Pe),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Nv,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new xt(Pe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new xt(Pe),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Nv),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Hl(){return new ut(fe.comparator)}function Rv(){return new ut(fe.comparator)}const GC={asc:"ASCENDING",desc:"DESCENDING"},KC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QC={and:"AND",or:"OR"};class YC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qh(t,e){return t.useProto3Json||Pu(e)?e:{value:e}}function Gc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XC(t,e){return Gc(t,e.toTimestamp())}function fr(t){return Le(!!t,49232),Te.fromTimestamp(function(n){const r=Rs(n);return new Je(r.seconds,r.nanos)}(t))}function wp(t,e){return Yh(t,e).canonicalString()}function Yh(t,e){const n=function(s){return new We(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $w(t){const e=We.fromString(t);return Le(Kw(e),10190,{key:e.toString()}),e}function Xh(t,e){return wp(t.databaseId,e.path)}function bd(t,e){const n=$w(e);if(n.get(1)!==t.databaseId.projectId)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(qw(n))}function Hw(t,e){return wp(t.databaseId,e)}function JC(t){const e=$w(t);return e.length===4?We.emptyPath():qw(e)}function Jh(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qw(t){return Le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function kv(t,e,n){return{name:Xh(t,e),fields:n.value.mapValue.fields}}function ZC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(Le(f===void 0||typeof f=="string",58123),zt.fromBase64String(f||"")):(Le(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),zt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?q.UNKNOWN:Fw(d.code);return new se(f,d.message||"")}(o);n=new zw(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bd(t,r.document.name),i=fr(r.document.updateTime),o=r.document.createTime?fr(r.document.createTime):Te.min(),c=new dn({mapValue:{fields:r.document.fields}}),u=Xt.newFoundDocument(s,i,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new uc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bd(t,r.document),i=r.readTime?fr(r.readTime):Te.min(),o=Xt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new uc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bd(t,r.document),i=r.removedTargetIds||[];n=new uc([],i,s,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new $C(s,i),c=r.targetId;n=new Uw(c,o)}}return n}function ex(t,e){let n;if(e instanceof el)n={update:kv(t,e.key,e.value)};else if(e instanceof vp)n={delete:Xh(t,e.key)};else if(e instanceof Fs)n={update:kv(t,e.key,e.data),updateMask:cx(e.fieldMask)};else{if(!(e instanceof UC))return _e(16599,{Rt:e.type});n={verify:Xh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Fa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof za)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wc)return{fieldPath:o.field.canonicalString(),increment:c.Ee};throw _e(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:XC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:_e(27497)}(t,e.precondition)),n}function tx(t,e){return t&&t.length>0?(Le(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?fr(s.updateTime):fr(i);return o.isEqual(Te.min())&&(o=fr(i)),new VC(o,s.transformResults||[])}(n,e))):[]}function nx(t,e){return{documents:[Hw(t,e.path)]}}function rx(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Hw(t,s);const i=function(d){if(d.length!==0)return Gw(Xn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ki(g.field),direction:ox(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Qh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:s}}function sx(t){let e=JC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Le(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=Ww(m);return g instanceof Xn&&Tw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(P){return new qc(Di(P.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Pu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,w=m.values||[];return new Hc(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,w=m.values||[];return new Hc(w,g)}(n.endAt)),IC(e,s,o,i,c,"F",u,d)}function ix(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ww(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Di(n.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Di(n.unaryFilter.field);return Et.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Di(n.unaryFilter.field);return Et.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Di(n.unaryFilter.field);return Et.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return Et.create(Di(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xn.create(n.compositeFilter.filters.map(r=>Ww(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function ox(t){return GC[t]}function ax(t){return KC[t]}function lx(t){return QC[t]}function ki(t){return{fieldPath:t.canonicalString()}}function Di(t){return Lt.fromServerFormat(t.fieldPath)}function Gw(t){return t instanceof Et?function(n){if(n.op==="=="){if(yv(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NAN"}};if(vv(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yv(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NAN"}};if(vv(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ki(n.field),op:ax(n.op),value:n.value}}}(t):t instanceof Xn?function(n){const r=n.getFilters().map(s=>Gw(s));return r.length===1?r[0]:{compositeFilter:{op:lx(n.op),filters:r}}}(t):_e(54877,{filter:t})}function cx(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Kw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,r,s,i=Te.min(),o=Te.min(),c=zt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.gt=e}}function dx(t){const e=sx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.Dn=new fx}addToCollectionParentIndex(e,n){return this.Dn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Ns.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class fx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new xt(We.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new xt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qw=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(Qw,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new po(0)}static ur(){return new po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="LruGarbageCollector",Yw=1048576;function bv([t,e],[n,r]){const s=Pe(t,n);return s===0?Pe(e,r):s}class px{constructor(e){this.Tr=e,this.buffer=new xt(bv),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mx{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ie(jv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Io(n)?ie(jv,"Ignoring IndexedDB error during garbage collection: ",n):await To(n)}await this.Rr(3e5)})}}class gx{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return G.resolve(xu.ue);const r=new px(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Dv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dv):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Ni()<=De.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function vx(t,e){return new gx(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.changes=new wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ma(r.mutation,s,In.empty(),Je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const s=Js();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Jo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=Wr();const o=pa(),c=function(){return pa()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Fs)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ma(f.mutation,d,f.mutation.getFieldMask(),Je.now())):o.set(d.key,In.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return c.set(d,new _x(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=pa();let s=new ut((o,c)=>o-c),i=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||In.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||je()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=kw();f.forEach(g=>{if(!i.has(g)){const w=Vw(n.get(g),r.get(g));w!==null&&m.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Cw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(Js());let c=Oa,u=i;return o.next(d=>G.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?G.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,je())).next(f=>({batchId:c,changes:Rw(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let s=Jo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Jo();return this.indexManager.getCollectionParents(e,i).next(c=>G.forEach(c,u=>{const d=function(m,g){return new Za(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Xt.newInvalidDocument(f)))});let c=Jo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&ma(f.mutation,d,In.empty(),Je.now()),Du(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return G.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fr(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:dx(s.bundledQuery),readTime:fr(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.overlays=new ut(fe.comparator),this.kr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Js();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=Js(),i=n.length+1,o=new fe(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ut((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Js(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=Js(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return G.resolve(c)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new BC(n,r));let i=this.kr.get(n);i===void 0&&(i=je(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this.qr=new xt(Nt.Qr),this.$r=new xt(Nt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Nt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new fe(new We([])),r=new Nt(n,e),s=new Nt(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new fe(new We([])),r=new Nt(n,e),s=new Nt(n,e+1);let i=je();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Nt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return fe.comparator(e.key,n.key)||Pe(e.Hr,n.Hr)}static Ur(e,n){return Pe(e.Hr,n.Hr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new xt(Nt.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zC(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Yr=this.Yr.add(new Nt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?dp:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),s=new Nt(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const c=this.Zr(o.Hr);i.push(c)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(Pe);return n.forEach(s=>{const i=new Nt(s,0),o=new Nt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],c=>{r=r.add(c.Hr)})}),G.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;fe.isDocumentKey(i)||(i=i.child(""));const o=new Nt(new fe(i),0);let c=new xt(Pe);return this.Yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Hr)),!0)},o),G.resolve(this.ei(c))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Le(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return G.forEach(n.mutations,s=>{const i=new Nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Nt(n,0),s=this.Yr.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.ni=e,this.docs=function(){return new ut(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=Wr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Xt.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Wr();const o=n.path,c=new fe(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||tC(eC(f),r)<=0||(s.has(f.key)||Du(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){_e(9500)}ri(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Cx(this)}getSize(e){return G.resolve(this.size)}}class Cx extends yx{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.persistence=e,this.ii=new wi(n=>pp(n),mp),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.si=0,this.oi=new Ep,this.targetCount=0,this._i=po.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),G.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new po(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.hr(n),G.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n){this.ai={},this.overlays={},this.ui=new xu(0),this.ci=!1,this.ci=!0,this.li=new Ix,this.referenceDelegate=e(this),this.hi=new xx(this),this.indexManager=new hx,this.remoteDocumentCache=function(s){return new Ax(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new ux(n),this.Ti=new Ex(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Tx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Sx(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const s=new Px(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return G.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Px extends rC{constructor(e){super(),this.currentSequenceNumber=e}}class Tp{constructor(e){this.persistence=e,this.Ai=new Ep,this.Ri=null}static Vi(e){return new Tp(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,r=>{const s=fe.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,Te.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return G.or([()=>G.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Kc{constructor(e,n){this.persistence=e,this.gi=new wi(r=>oC(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=vx(this,n)}static Vi(e,n){return new Kc(e,n)}Ii(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return G.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?G.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(c=>{c||(r++,i.removeEntry(o,Te.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ac(e.data.value)),n}Sr(e,n,r){return G.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=je(),s=je();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ip(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return I1()?8:sC(Zt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Nx;return this.ws(e,n,o).next(c=>{if(i.result=c,this.Rs)return this.Ss(e,n,o,c.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Ni()<=De.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Ri(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(Ni()<=De.DEBUG&&ie("QueryEngine","Query:",Ri(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ni()<=De.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Ri(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(n))):G.resolve())}ps(e,n){if(Tv(n))return G.resolve(null);let r=hr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Kh(n,null,"F"),r=hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=je(...i);return this.gs.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,c);return this.Ds(n,d,o,u.readTime)?this.ps(e,Kh(n,null,"F")):this.vs(e,d,n,u)}))})))}ys(e,n,r,s){return Tv(n)||s.isEqual(Te.min())?G.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?G.resolve(null):(Ni()<=De.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ri(n)),this.vs(e,o,n,ZA(s,Oa)).next(c=>c))})}bs(e,n){let r=new xt(Pw(e));return n.forEach((s,i)=>{Du(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Ni()<=De.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Ri(n)),this.gs.getDocumentsMatchingQuery(e,n,Ns.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="LocalStore",kx=3e8;class Dx{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new ut(Pe),this.Ms=new wi(i=>pp(i),mp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function jx(t,e,n,r){return new Dx(t,e,n,r)}async function Jw(t,e){const n=Se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=je();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:c}))})})}function bx(t,e){const n=Se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let w=G.resolve();return g.forEach(P=>{w=w.next(()=>f.getEntry(u,P)).next(b=>{const U=d.docVersions.get(P);Le(U!==null,48541),b.version.compareTo(U)<0&&(m.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=je();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Zw(t){const e=Se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Ox(t,e){const n=Se(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.hi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.hi.addMatchingKeys(i,f.addedDocuments,m)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(zt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(m,w),function(b,U,A){return b.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=kx?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(g,w,f)&&c.push(n.hi.updateTargetData(i,w))});let u=Wr(),d=je();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(Mx(i,o,e.documentUpdates).next(f=>{u=f.Ls,d=f.ks})),!r.isEqual(Te.min())){const f=n.hi.getLastRemoteSnapshotVersion(i).next(m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return G.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Fs=s,i))}function Mx(t,e,n){let r=je(),s=je();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Wr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Te.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):ie(Sp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ls:o,ks:s}})}function Vx(t,e){const n=Se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=dp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Lx(t,e){const n=Se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new fs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Zh(t,e,n){const r=Se(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Io(o))throw o;ie(Sp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Ov(t,e,n){const r=Se(t);let s=Te.min(),i=je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=Se(u),g=m.Ms.get(f);return g!==void 0?G.resolve(m.Fs.get(g)):m.hi.getTargetData(d,f)}(r,o,hr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:Te.min(),n?i:je())).next(c=>(Fx(r,AC(e),c),{documents:c,qs:i})))}function Fx(t,e,n){let r=t.xs.get(e)||Te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Mv{constructor(){this.activeTargetIds=kC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ux{constructor(){this.Fo=new Mv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Mv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="ConnectivityMonitor";class Lv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ie(Vv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ie(Vv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function ef(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="RestConnection",Bx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $x{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Bc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=ef(),c=this.Go(e,n.toUriEncodedString());ie(Od,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:d}=new URL(c),f=_i(d);return this.jo(e,c,u,r,f).then(m=>(ie(Od,`Received RPC '${e}' ${o}: `,m),m),m=>{throw hi(Od,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=Bx[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class qx extends $x{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=ef();return new Promise((c,u)=>{const d=new tw;d.setWithCredentials(!0),d.listenOnce(nw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case oc.NO_ERROR:const m=d.getResponseJson();ie(Qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case oc.TIMEOUT:ie(Qt,`RPC '${e}' ${o} timed out`),u(new se(q.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:const g=d.getStatus();if(ie(Qt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const P=w==null?void 0:w.error;if(P&&P.status&&P.message){const b=function(A){const I=A.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(I)>=0?I:q.UNKNOWN}(P.status);u(new se(b,P.message))}else u(new se(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new se(q.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{ie(Qt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);ie(Qt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}P_(e,n,r){const s=ef(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iw(),c=sw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");ie(Qt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.T_(m);let g=!1,w=!1;const P=new Hx({Ho:U=>{w?ie(Qt,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(g||(ie(Qt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),ie(Qt,`RPC '${e}' stream ${s} sending:`,U),m.send(U))},Yo:()=>m.close()}),b=(U,A,I)=>{U.listen(A,S=>{try{I(S)}catch(j){setTimeout(()=>{throw j},0)}})};return b(m,Xo.EventType.OPEN,()=>{w||(ie(Qt,`RPC '${e}' stream ${s} transport opened.`),P.s_())}),b(m,Xo.EventType.CLOSE,()=>{w||(w=!0,ie(Qt,`RPC '${e}' stream ${s} transport closed`),P.__(),this.I_(m))}),b(m,Xo.EventType.ERROR,U=>{w||(w=!0,hi(Qt,`RPC '${e}' stream ${s} transport errored. Name:`,U.name,"Message:",U.message),P.__(new se(q.UNAVAILABLE,"The operation could not be completed")))}),b(m,Xo.EventType.MESSAGE,U=>{var A;if(!w){const I=U.data[0];Le(!!I,16349);const S=I,j=(S==null?void 0:S.error)||((A=S[0])===null||A===void 0?void 0:A.error);if(j){ie(Qt,`RPC '${e}' stream ${s} received error:`,j);const N=j.status;let V=function(T){const C=_t[T];if(C!==void 0)return Fw(C)}(N),v=j.message;V===void 0&&(V=q.INTERNAL,v="Unknown error status: "+N+" with message "+j.message),w=!0,P.__(new se(V,v)),m.close()}else ie(Qt,`RPC '${e}' stream ${s} received:`,I),P.a_(I)}}),b(c,rw.STAT_EVENT,U=>{U.stat===zh.PROXY?ie(Qt,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===zh.NOPROXY&&ie(Qt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.o_()},0),P}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){return new YC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="PersistentStream";class tE{constructor(e,n,r,s,i,o,c,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new eE(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(qr(n.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new se(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ie(Fv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ie(Fv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wx extends tE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=ZC(this.serializer,e),r=function(i){if(!("targetChange"in i))return Te.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?fr(o.readTime):Te.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Jh(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Wh(u)?{documents:nx(i,u)}:{query:rx(i,u).Vt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Bw(i,o.resumeToken);const d=Qh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Te.min())>0){c.readTime=Gc(i,o.snapshotVersion.toTimestamp());const d=Qh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=ix(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Jh(this.serializer),n.removeTarget=e,this.k_(n)}}class Gx extends tE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=tx(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Jh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ex(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{}class Qx extends Kx{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Yh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se(q.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Jo(e,Yh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(q.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Yx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qr(n),this._a=!1):ie("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi="RemoteStore";class Xx{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Ei(this)&&(ie(fi,"Restarting streams for network reachability change."),await async function(u){const d=Se(u);d.Ia.add(4),await nl(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Vu(d)}(this))})}),this.Aa=new Yx(r,s)}}async function Vu(t){if(Ei(t))for(const e of t.da)await e(!0)}async function nl(t){for(const e of t.da)await e(!1)}function nE(t,e){const n=Se(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Pp(n)?xp(n):So(n).x_()&&Cp(n,e))}function Ap(t,e){const n=Se(t),r=So(n);n.Ta.delete(e),r.x_()&&rE(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ei(n)&&n.Aa.set("Unknown"))}function Cp(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}So(t).H_(e)}function rE(t,e){t.Ra.$e(e),So(t).Y_(e)}function xp(t){t.Ra=new WC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),So(t).start(),t.Aa.aa()}function Pp(t){return Ei(t)&&!So(t).M_()&&t.Ta.size>0}function Ei(t){return Se(t).Ia.size===0}function sE(t){t.Ra=void 0}async function Jx(t){t.Aa.set("Online")}async function Zx(t){t.Ta.forEach((e,n)=>{Cp(t,e)})}async function eP(t,e){sE(t),Pp(t)?(t.Aa.la(e),xp(t)):t.Aa.set("Unknown")}async function tP(t,e,n){if(t.Aa.set("Online"),e instanceof zw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ta.delete(c),s.Ra.removeTarget(c))}(t,e)}catch(r){ie(fi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qc(t,r)}else if(e instanceof uc?t.Ra.Ye(e):e instanceof Uw?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Te.min()))try{const r=await Zw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Ra.Pt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ta.get(d);f&&i.Ta.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=i.Ta.get(u);if(!f)return;i.Ta.set(u,f.withResumeToken(zt.EMPTY_BYTE_STRING,f.snapshotVersion)),rE(i,u);const m=new fs(f.target,u,d,f.sequenceNumber);Cp(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ie(fi,"Failed to raise snapshot:",r),await Qc(t,r)}}async function Qc(t,e,n){if(!Io(e))throw e;t.Ia.add(1),await nl(t),t.Aa.set("Offline"),n||(n=()=>Zw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(fi,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Vu(t)})}function iE(t,e){return e().catch(n=>Qc(t,n,e))}async function Lu(t){const e=Se(t),n=js(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:dp;for(;nP(e);)try{const s=await Vx(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,rP(e,s)}catch(s){await Qc(e,s)}oE(e)&&aE(e)}function nP(t){return Ei(t)&&t.Pa.length<10}function rP(t,e){t.Pa.push(e);const n=js(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function oE(t){return Ei(t)&&!js(t).M_()&&t.Pa.length>0}function aE(t){js(t).start()}async function sP(t){js(t).na()}async function iP(t){const e=js(t);for(const n of t.Pa)e.X_(n.mutations)}async function oP(t,e,n){const r=t.Pa.shift(),s=yp.from(r,e,n);await iE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lu(t)}async function aP(t,e){e&&js(t).Z_&&await async function(r,s){if(function(o){return HC(o)&&o!==q.ABORTED}(s.code)){const i=r.Pa.shift();js(r).N_(),await iE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Lu(r)}}(t,e),oE(t)&&aE(t)}async function Uv(t,e){const n=Se(t);n.asyncQueue.verifyOperationInProgress(),ie(fi,"RemoteStore received new credentials");const r=Ei(n);n.Ia.add(3),await nl(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Vu(n)}async function lP(t,e){const n=Se(t);e?(n.Ia.delete(2),await Vu(n)):e||(n.Ia.add(2),await nl(n),n.Aa.set("Unknown"))}function So(t){return t.Va||(t.Va=function(n,r,s){const i=Se(n);return i.ia(),new Wx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Jx.bind(null,t),e_:Zx.bind(null,t),n_:eP.bind(null,t),J_:tP.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Pp(t)?xp(t):t.Aa.set("Unknown")):(await t.Va.stop(),sE(t))})),t.Va}function js(t){return t.ma||(t.ma=function(n,r,s){const i=Se(n);return i.ia(),new Gx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:sP.bind(null,t),n_:aP.bind(null,t),ea:iP.bind(null,t),ta:oP.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Lu(t)):(await t.ma.stop(),t.Pa.length>0&&(ie(fi,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Np(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rp(t,e){if(qr("AsyncQueue",`${e}: ${t}`),Io(t))return new se(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{static emptySet(e){return new Zi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=Jo(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.fa=new ut(fe.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):_e(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class mo{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new mo(e,n,Zi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class uP{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=Se(n),i=s.queries;s.queries=Bv(),i.forEach((o,c)=>{for(const u of c.wa)u.onError(r)})})(this,new se(q.ABORTED,"Firestore shutting down"))}}function Bv(){return new wi(t=>xw(t),ku)}async function kp(t,e){const n=Se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new cP,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Rp(o,`Initialization of query '${Ri(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&jp(n)}async function Dp(t,e){const n=Se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dP(t,e){const n=Se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.wa)c.Ca(s)&&(r=!0);o.ya=s}}r&&jp(n)}function hP(t,e,n){const r=Se(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function jp(t){t.Da.forEach(e=>{e.next()})}var tf,$v;($v=tf||(tf={})).Fa="default",$v.Cache="cache";class bp{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==tf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.key=e}}class cE{constructor(e){this.key=e}}class fP{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=je(),this.mutatedKeys=je(),this.Xa=Pw(e),this.eu=new Zi(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new zv,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),w=Du(this.query,m)?m:null,P=!!g&&this.mutatedKeys.has(g.key),b=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let U=!1;g&&w?g.data.isEqual(w.data)?P!==b&&(r.track({type:3,doc:w}),U=!0):this.iu(g,w)||(r.track({type:2,doc:w}),U=!0,(u&&this.Xa(w,u)>0||d&&this.Xa(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),U=!0):g&&!w&&(r.track({type:1,doc:g}),U=!0,(u||d)&&(c=!0)),U&&(w?(o=o.add(w),i=b?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{eu:o,ru:r,Ds:c,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((f,m)=>function(w,P){const b=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:U})}};return b(w)-b(P)}(f.type,m.type)||this.Xa(f.doc,m.doc)),this.su(r),s=s!=null&&s;const c=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,d=u!==this.Ya;return this.Ya=u,o.length!==0||d?{snapshot:new mo(this.query,e.eu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=je(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new cE(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new lE(r))}),n}uu(e){this.Ha=e.qs,this.Za=je();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return mo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Op="SyncEngine";class pP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class mP{constructor(e){this.key=e,this.lu=!1}}class gP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new wi(c=>xw(c),ku),this.Tu=new Map,this.Iu=new Set,this.du=new ut(fe.comparator),this.Eu=new Map,this.Au=new Ep,this.Ru={},this.Vu=new Map,this.mu=po.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function vP(t,e,n=!0){const r=mE(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await uE(r,e,n,!0),s}async function yP(t,e){const n=mE(t);await uE(n,e,!0,!1)}async function uE(t,e,n,r){const s=await Lx(t.localStore,hr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await _P(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&nE(t.remoteStore,s),c}async function _P(t,e,n,r,s){t.gu=(m,g,w)=>async function(b,U,A,I){let S=U.view.nu(A);S.Ds&&(S=await Ov(b.localStore,U.query,!1).then(({documents:v})=>U.view.nu(v,S)));const j=I&&I.targetChanges.get(U.targetId),N=I&&I.targetMismatches.get(U.targetId)!=null,V=U.view.applyChanges(S,b.isPrimaryClient,j,N);return qv(b,U.targetId,V._u),V.snapshot}(t,m,g,w);const i=await Ov(t.localStore,e,!0),o=new fP(e,i.qs),c=o.nu(i.documents),u=tl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);qv(t,n,d._u);const f=new pP(e,n,o);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function wP(t,e,n){const r=Se(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!ku(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ap(r.remoteStore,s.targetId),nf(r,s.targetId)}).catch(To)):(nf(r,s.targetId),await Zh(r.localStore,s.targetId,!0))}async function EP(t,e){const n=Se(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ap(n.remoteStore,r.targetId))}async function TP(t,e,n){const r=NP(t);try{const s=await function(o,c){const u=Se(o),d=Je.now(),f=c.reduce((w,P)=>w.add(P.key),je());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let P=Wr(),b=je();return u.Os.getEntries(w,f).next(U=>{P=U,P.forEach((A,I)=>{I.isValidDocument()||(b=b.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,P)).next(U=>{m=U;const A=[];for(const I of c){const S=FC(I,m.get(I.key).overlayedDocument);S!=null&&A.push(new Fs(I.key,S,_w(S.value.mapValue),On.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,A,c)}).next(U=>{g=U;const A=U.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(w,U.batchId,A)})}).then(()=>({batchId:g.batchId,changes:Rw(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ru[o.currentUser.toKey()];d||(d=new ut(Pe)),d=d.insert(c,u),o.Ru[o.currentUser.toKey()]=d}(r,s.batchId,n),await rl(r,s.changes),await Lu(r.remoteStore)}catch(s){const i=Rp(s,"Failed to persist write");n.reject(i)}}async function dE(t,e){const n=Se(t);try{const r=await Ox(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?Le(o.lu,14607):s.removedDocuments.size>0&&(Le(o.lu,42227),o.lu=!1))}),await rl(n,r,e)}catch(r){await To(r)}}function Hv(t,e,n){const r=Se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=Se(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.wa)g.va(c)&&(d=!0)}),d&&jp(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IP(t,e,n){const r=Se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new ut(fe.comparator);o=o.insert(i,Xt.newNoDocument(i,Te.min()));const c=je().add(i),u=new Ou(Te.min(),new Map,new ut(Pe),o,c);await dE(r,u),r.du=r.du.remove(i),r.Eu.delete(e),Mp(r)}else await Zh(r.localStore,e,!1).then(()=>nf(r,e,n)).catch(To)}async function SP(t,e){const n=Se(t),r=e.batch.batchId;try{const s=await bx(n.localStore,e);fE(n,r,null),hE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rl(n,s)}catch(s){await To(s)}}async function AP(t,e,n){const r=Se(t);try{const s=await function(o,c){const u=Se(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Le(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);fE(r,e,n),hE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rl(r,s)}catch(s){await To(s)}}function hE(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function fE(t,e,n){const r=Se(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function nf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||pE(t,r)})}function pE(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ap(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Mp(t))}function qv(t,e,n){for(const r of n)r instanceof lE?(t.Au.addReference(r.key,e),CP(t,r)):r instanceof cE?(ie(Op,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||pE(t,r.key)):_e(19791,{yu:r})}function CP(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ie(Op,"New document in limbo: "+n),t.Iu.add(r),Mp(t))}function Mp(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new fe(We.fromString(e)),r=t.mu.next();t.Eu.set(r,new mP(n)),t.du=t.du.insert(n,r),nE(t.remoteStore,new fs(hr(Ru(n.path)),r,"TargetPurposeLimboResolution",xu.ue))}}async function rl(t,e,n){const r=Se(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{o.push(r.gu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Ip.Es(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.hu.J_(s),await async function(u,d){const f=Se(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>G.forEach(d,g=>G.forEach(g.Is,w=>f.persistence.referenceDelegate.addReference(m,g.targetId,w)).next(()=>G.forEach(g.ds,w=>f.persistence.referenceDelegate.removeReference(m,g.targetId,w)))))}catch(m){if(!Io(m))throw m;ie(Sp,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const w=f.Fs.get(g),P=w.snapshotVersion,b=w.withLastLimboFreeSnapshotVersion(P);f.Fs=f.Fs.insert(g,b)}}}(r.localStore,i))}async function xP(t,e){const n=Se(t);if(!n.currentUser.isEqual(e)){ie(Op,"User change. New user:",e.toKey());const r=await Jw(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(c=>{c.forEach(u=>{u.reject(new se(q.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rl(n,r.Bs)}}function PP(t,e){const n=Se(t),r=n.Eu.get(e);if(r&&r.lu)return je().add(r.key);{let s=je();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const c=n.Pu.get(o);s=s.unionWith(c.view.tu)}return s}}function mE(t){const e=Se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IP.bind(null,e),e.hu.J_=dP.bind(null,e.eventManager),e.hu.pu=hP.bind(null,e.eventManager),e}function NP(t){const e=Se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AP.bind(null,e),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return jx(this.persistence,new Rx,e.initialUser,this.serializer)}Du(e){return new Xw(Tp.Vi,this.serializer)}bu(e){return new Ux}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class RP extends Yc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Le(this.persistence.referenceDelegate instanceof Kc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mx(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Xw(r=>Kc.Vi(r,n),this.serializer)}}class rf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xP.bind(null,this.syncEngine),await lP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uP}()}createDatastore(e){const n=Mu(e.databaseInfo.databaseId),r=function(i){return new qx(i)}(e.databaseInfo);return function(i,o,c,u){return new Qx(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new Xx(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Hv(this.syncEngine,n,0),function(){return Lv.C()?new Lv:new zx}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,f){const m=new gP(s,i,o,c,u,d);return f&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Se(s);ie(fi,"RemoteStore shutting down."),i.Ia.add(5),await nl(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}rf.provider={build:()=>new rf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class kP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=up.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ie(bs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ie(bs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Rp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vd(t,e){t.asyncQueue.verifyOperationInProgress(),ie(bs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Jw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{hi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{hi("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Wv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DP(t);ie(bs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Uv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Uv(e.remoteStore,s)),t._onlineComponents=e}async function DP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(bs,"Using user provided OfflineComponentProvider");try{await Vd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;hi("Error using user provided cache. Falling back to memory cache: "+n),await Vd(t,new Yc)}}else ie(bs,"Using default OfflineComponentProvider"),await Vd(t,new RP(void 0));return t._offlineComponents}async function gE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(bs,"Using user provided OnlineComponentProvider"),await Wv(t,t._uninitializedComponentsProvider._online)):(ie(bs,"Using default OnlineComponentProvider"),await Wv(t,new rf))),t._onlineComponents}function jP(t){return gE(t).then(e=>e.syncEngine)}async function Xc(t){const e=await gE(t),n=e.eventManager;return n.onListen=vP.bind(null,e.syncEngine),n.onUnlisten=wP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=EP.bind(null,e.syncEngine),n}function bP(t,e,n={}){const r=new Lr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new Vp({next:g=>{f.Ou(),o.enqueueAndForget(()=>Dp(i,m));const w=g.docs.has(c);!w&&g.fromCache?d.reject(new se(q.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new se(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new bp(Ru(c.path),f,{includeMetadataChanges:!0,ka:!0});return kp(i,m)}(await Xc(t),t.asyncQueue,e,n,r)),r.promise}function OP(t,e,n={}){const r=new Lr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new Vp({next:g=>{f.Ou(),o.enqueueAndForget(()=>Dp(i,m)),g.fromCache&&u.source==="server"?d.reject(new se(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new bp(c,f,{includeMetadataChanges:!0,ka:!0});return kp(i,m)}(await Xc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="firestore.googleapis.com",Kv=!0;class Qv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MP,this.ssl=Kv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Yw)throw new se(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HA;switch(r.type){case"firstParty":return new GA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gv.get(n);r&&(ie("ComponentProvider","Removing Datastore"),Gv.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ti(this.firestore,e,this._query)}}class mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new As(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ja(n,mt._jsonSchema))return new mt(e,r||null,new fe(We.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:Tt("string",mt._jsonSchemaVersion),referencePath:Tt("string")};class As extends Ti{constructor(e,n,r){super(e,n,Ru(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new fe(e))}withConverter(e){return new As(this.firestore,e,this._path)}}function an(t,e,...n){if(t=ct(t),lw("collection","path",e),t instanceof Lp){const r=We.fromString(e,...n);return lv(r),new As(t,null,r)}{if(!(t instanceof mt||t instanceof As))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return lv(r),new As(t.firestore,null,r)}}function it(t,e,...n){if(t=ct(t),arguments.length===1&&(e=up.newId()),lw("doc","path",e),t instanceof Lp){const r=We.fromString(e,...n);return av(r),new mt(t,null,new fe(r))}{if(!(t instanceof mt||t instanceof As))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return av(r),new mt(t.firestore,t instanceof As?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="AsyncQueue";class Xv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new eE(this,"async_queue_retry"),this.oc=()=>{const r=Md();r&&ie(Yv,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Md();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Md();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Lr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Io(e))throw e;ie(Yv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,qr("INTERNAL UNHANDLED ERROR: ",Jv(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Np.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&_e(47125,{hc:Jv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Jv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Gr extends Lp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Xv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xv(e),this._firestoreClient=void 0,await e}}}function VP(t,e,n){n||(n=Bc);const r=Au(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(ci(i,e))return s;throw new se(q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new se(q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Yw)throw new se(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&_i(e.host)&&op(e.host),r.initialize({options:e,instanceIdentifier:n})}function Fu(t){if(t._terminated)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LP(t),t._firestoreClient}function LP(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new cC(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,vE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new kP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(zt.fromBase64String(e))}catch(n){throw new se(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dn(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ja(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:Tt("string",Dn._jsonSchemaVersion),bytes:Tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(e){if(Ja(e,pr._jsonSchema))return new pr(e.latitude,e.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:Tt("string",pr._jsonSchemaVersion),latitude:Tt("number"),longitude:Tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ja(e,mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new mr(e.vectorValues);throw new se(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mr._jsonSchemaVersion="firestore/vectorValue/1.0",mr._jsonSchema={type:Tt("string",mr._jsonSchemaVersion),vectorValues:Tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=/^__.*__$/;class UP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new el(e,this.data,n,this.fieldTransforms)}}class yE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _E(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:t})}}class Fp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Fp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Jc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(_E(this.Ec)&&FP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class zP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mu(e)}Dc(e,n,r,s=!1){return new Fp({Ec:e,methodName:n,bc:r,path:Lt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bu(t){const e=t._freezeSettings(),n=Mu(t._databaseId);return new zP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wE(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);zp("Data must be an object, but it was:",o,r);const c=EE(r,o);let u,d;if(i.merge)u=new In(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=sf(e,m,n);if(!o.contains(g))throw new se(q.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);IE(f,g)||f.push(g)}u=new In(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new UP(new dn(c),u,d)}class $u extends zu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $u}}class Up extends zu{_toFieldTransform(e){return new OC(e.path,new Fa)}isEqual(e){return e instanceof Up}}function BP(t,e,n,r){const s=t.Dc(1,e,n);zp("Data must be an object, but it was:",s,r);const i=[],o=dn.empty();Ls(r,(u,d)=>{const f=Bp(e,u,n);d=ct(d);const m=s.gc(f);if(d instanceof $u)i.push(f);else{const g=sl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const c=new In(i);return new yE(o,c,s.fieldTransforms)}function $P(t,e,n,r,s,i){const o=t.Dc(1,e,n),c=[sf(e,r,n)],u=[s];if(i.length%2!=0)throw new se(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(sf(e,i[g])),u.push(i[g+1]);const d=[],f=dn.empty();for(let g=c.length-1;g>=0;--g)if(!IE(d,c[g])){const w=c[g];let P=u[g];P=ct(P);const b=o.gc(w);if(P instanceof $u)d.push(w);else{const U=sl(P,b);U!=null&&(d.push(w),f.set(w,U))}}const m=new In(d);return new yE(f,m,o.fieldTransforms)}function HP(t,e,n,r=!1){return sl(n,t.Dc(r?4:3,e))}function sl(t,e){if(TE(t=ct(t)))return zp("Unsupported field value:",e,t),EE(t,e);if(t instanceof zu)return function(r,s){if(!_E(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=sl(c,s.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Je.fromDate(r);return{timestampValue:Gc(s.serializer,i)}}if(r instanceof Je){const i=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gc(s.serializer,i)}}if(r instanceof pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dn)return{bytesValue:Bw(s.serializer,r._byteString)};if(r instanceof mt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:wp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mr)return function(o,c){return{mapValue:{fields:{[vw]:{stringValue:yw},[$c]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.wc("VectorValues must only contain numeric values.");return gp(c.serializer,d)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Cu(r)}`)}(t,e)}function EE(t,e){const n={};return dw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(t,(r,s)=>{const i=sl(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function TE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof pr||t instanceof Dn||t instanceof mt||t instanceof zu||t instanceof mr)}function zp(t,e,n){if(!TE(n)||!cw(n)){const r=Cu(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function sf(t,e,n){if((e=ct(e))instanceof Uu)return e._internalPath;if(typeof e=="string")return Bp(t,e);throw Jc("Field path arguments must be of type string or ",t,!1,void 0,n)}const qP=new RegExp("[~\\*/\\[\\]]");function Bp(t,e,n){if(e.search(qP)>=0)throw Jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uu(...e.split("."))._internalPath}catch{throw Jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new se(q.INVALID_ARGUMENT,c+t+u)}function IE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($p("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WP extends SE{data(){return super.data()}}function $p(t,e){return typeof e=="string"?Bp(t,e):e instanceof Uu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hp{}class GP extends Hp{}function Ld(t,e,...n){let r=[];e instanceof Hp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof qp).length,c=i.filter(u=>u instanceof Hu).length;if(o>1||o>0&&c>0)throw new se(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Hu extends GP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hu(e,n,r)}_apply(e){const n=this._parse(e);return CE(e._query,n),new Ti(e.firestore,e.converter,Gh(e._query,n))}_parse(e){const n=Bu(e.firestore);return function(i,o,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new se(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){ty(m,f);const P=[];for(const b of m)P.push(ey(u,i,b));g={arrayValue:{values:P}}}else g=ey(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||ty(m,f),g=HP(c,o,m,f==="in"||f==="not-in");return Et.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Fd(t,e,n){const r=e,s=$p("where",t);return Hu._create(s,r,n)}class qp extends Hp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new qp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)CE(o,u),o=Gh(o,u)}(e._query,n),new Ti(e.firestore,e.converter,Gh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ey(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new se(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cw(e)&&n.indexOf("/")!==-1)throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(We.fromString(n));if(!fe.isDocumentKey(r))throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gv(t,new fe(r))}if(n instanceof mt)return gv(t,n._key);throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cu(n)}.`)}function ty(t,e){if(!Array.isArray(t)||t.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CE(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class KP{convertValue(e,n="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ls(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[$c].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>gt(o.doubleValue));return new mr(i)}convertGeoPoint(e){return new pr(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ma(e));default:return null}}convertTimestamp(e){const n=Rs(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);Le(Kw(r),9688,{name:e});const s=new Va(r.get(1),r.get(3)),i=new fe(r.popFirst(5));return s.isEqual(n)||qr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ni extends SE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($p("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ni._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ni._jsonSchemaVersion="firestore/documentSnapshot/1.0",ni._jsonSchema={type:Tt("string",ni._jsonSchemaVersion),bundleSource:Tt("string","DocumentSnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class dc extends ni{data(e={}){return super.data(e)}}class ri{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ea(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new dc(this._firestore,this._userDataWriter,r.key,r,new ea(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new dc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ea(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new dc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ea(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:QP(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ri._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=up.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){t=An(t,mt);const e=An(t.firestore,Gr);return bP(Fu(e),t._key).then(n=>PE(e,t,n))}ri._jsonSchemaVersion="firestore/querySnapshot/1.0",ri._jsonSchema={type:Tt("string",ri._jsonSchemaVersion),bundleSource:Tt("string","QuerySnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class Wp extends KP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function Ud(t){t=An(t,Ti);const e=An(t.firestore,Gr),n=Fu(e),r=new Wp(e);return AE(t._query),OP(n,t._query).then(s=>new ri(e,r,t,s))}function os(t,e,n){t=An(t,mt);const r=An(t.firestore,Gr),s=xE(t.converter,e,n);return qu(r,[wE(Bu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,On.none())])}function Zs(t,e,n,...r){t=An(t,mt);const s=An(t.firestore,Gr),i=Bu(s);let o;return o=typeof(e=ct(e))=="string"||e instanceof Uu?$P(i,"updateDoc",t._key,e,n,r):BP(i,"updateDoc",t._key,e),qu(s,[o.toMutation(t._key,On.exists(!0))])}function Zc(t){return qu(An(t.firestore,Gr),[new vp(t._key,On.none())])}function Wl(t,e){const n=An(t.firestore,Gr),r=it(t),s=xE(t.converter,e);return qu(n,[wE(Bu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,On.exists(!1))]).then(()=>r)}function ts(t,...e){var n,r,s;t=ct(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Zv(e[o])||(i=e[o++]);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Zv(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,f;if(t instanceof mt)d=An(t.firestore,Gr),f=Ru(t._key.path),u={next:m=>{e[o]&&e[o](PE(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=An(t,Ti);d=An(m.firestore,Gr),f=m._query;const g=new Wp(d);u={next:w=>{e[o]&&e[o](new ri(d,g,m,w))},error:e[o+1],complete:e[o+2]},AE(t._query)}return function(g,w,P,b){const U=new Vp(b),A=new bp(w,U,P);return g.asyncQueue.enqueueAndForget(async()=>kp(await Xc(g),A)),()=>{U.Ou(),g.asyncQueue.enqueueAndForget(async()=>Dp(await Xc(g),A))}}(Fu(d),f,c,u)}function qu(t,e){return function(r,s){const i=new Lr;return r.asyncQueue.enqueueAndForget(async()=>TP(await jP(r),s,i)),i.promise}(Fu(t),e)}function PE(t,e,n){const r=n.docs.get(e._key),s=new Wp(t);return new ni(t,s,e._key,r,new ea(n.hasPendingWrites,n.fromCache),e.converter)}function ry(){return new Up("serverTimestamp")}(function(e,n=!0){(function(s){Eo=s})(wo),ui(new Ps("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Gr(new qA(r.getProvider("auth-internal")),new KA(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new se(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),dr(nv,rv,e),dr(nv,rv,"esm2017")})();function Gp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function NE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YP=NE,RE=new Ya("auth","Firebase",NE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new ap("@firebase/auth");function XP(t,...e){eu.logLevel<=De.WARN&&eu.warn(`Auth (${wo}): ${t}`,...e)}function hc(t,...e){eu.logLevel<=De.ERROR&&eu.error(`Auth (${wo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,...e){throw Kp(t,...e)}function gr(t,...e){return Kp(t,...e)}function kE(t,e,n){const r=Object.assign(Object.assign({},YP()),{[e]:n});return new Ya("auth","Firebase",r).create(e,{appName:t.name})}function Fr(t){return kE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return RE.create(t,...e)}function ye(t,e,...n){if(!t)throw Kp(e,...n)}function br(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hc(e),new Error(e)}function Kr(t,e){t||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JP(){return sy()==="http:"||sy()==="https:"}function sy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JP()||w1()||"connection"in navigator)?navigator.onLine:!0}function eN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kr(n>e,"Short delay should be less than long delay!"),this.isMobile=v1()||E1()}get(){return ZP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t,e){Kr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rN=new il(3e4,6e4);function Us(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zs(t,e,n,r,s={}){return jE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Xa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return _1()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&_i(t.emulatorConfig.host)&&(d.credentials="include"),DE.fetch()(await bE(t,t.config.apiHost,n,c),d)})}async function jE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tN),e);try{const s=new iN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Gl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Gl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Gl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw kE(t,f,d);Jn(t,f)}}catch(s){if(s instanceof _r)throw s;Jn(t,"network-request-failed",{message:String(s)})}}async function ol(t,e,n,r,s={}){const i=await zs(t,e,n,r,s);return"mfaPendingCredential"in i&&Jn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function bE(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Qp(t.config,s):`${t.config.apiScheme}://${s}`;return nN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function sN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gr(this.auth,"network-request-failed")),rN.get())})}}function Gl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=gr(t,e,r);return s.customData._tokenResponse=n,s}function iy(t){return t!==void 0&&t.enterprise!==void 0}class oN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aN(t,e){return zs(t,"GET","/v2/recaptchaConfig",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(t,e){return zs(t,"POST","/v1/accounts:delete",e)}async function tu(t,e){return zs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cN(t,e=!1){const n=ct(t),r=await n.getIdToken(e),s=Yp(r);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ga(zd(s.auth_time)),issuedAtTime:ga(zd(s.iat)),expirationTime:ga(zd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function zd(t){return Number(t)*1e3}function Yp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hc("JWT malformed, contained fewer than 3 sections"),null;try{const s=H0(n);return s?JSON.parse(s):(hc("Failed to decode base64 JWT payload"),null)}catch(s){return hc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function oy(t){const e=Yp(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof _r&&uN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function uN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ga(this.lastLoginAt),this.creationTime=ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ba(t,tu(n,{idToken:r}));ye(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?OE(i.providerUserInfo):[],c=fN(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new af(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function hN(t){const e=ct(t);await nu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function OE(t){return t.map(e=>{var{providerId:n}=e,r=Gp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(t,e){const n=await jE(t,{},async()=>{const r=Xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await bE(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&_i(t.emulatorConfig.host)&&(u.credentials="include"),DE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mN(t,e){return zs(t,"POST","/v2/accounts:revokeToken",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=oy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await pN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new eo;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eo,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Gp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new af(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ba(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cN(this,e)}reload(){return hN(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(Fr(this.auth));const e=await this.getIdToken();return await Ba(this,lN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(c=n.tenantId)!==null&&c!==void 0?c:void 0,U=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,A=(d=n.createdAt)!==null&&d!==void 0?d:void 0,I=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:S,emailVerified:j,isAnonymous:N,providerData:V,stsTokenManager:v}=n;ye(S&&v,e,"internal-error");const y=eo.fromJSON(this.name,v);ye(typeof S=="string",e,"internal-error"),es(m,e.name),es(g,e.name),ye(typeof j=="boolean",e,"internal-error"),ye(typeof N=="boolean",e,"internal-error"),es(w,e.name),es(P,e.name),es(b,e.name),es(U,e.name),es(A,e.name),es(I,e.name);const T=new Gn({uid:S,auth:e,email:g,emailVerified:j,displayName:m,isAnonymous:N,photoURL:P,phoneNumber:w,tenantId:b,stsTokenManager:y,createdAt:A,lastLoginAt:I});return V&&Array.isArray(V)&&(T.providerData=V.map(C=>Object.assign({},C))),U&&(T._redirectEventId=U),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new eo;s.updateFromServerResponse(n);const i=new Gn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await nu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?OE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new eo;c.updateFromIdToken(r);const u=new Gn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new af(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=new Map;function Or(t){Kr(t instanceof Function,"Expected a class definition");let e=ay.get(t);return e?(Kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ay.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ME.type="NONE";const ly=ME;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e,n){return`firebase:${t}:${e}:${n}`}class to{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=fc(this.userKey,s.apiKey,i),this.fullPersistenceKey=fc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await tu(this.auth,{idToken:e}).catch(()=>{});return n?Gn._fromGetAccountInfoResponse(this.auth,n,e):null}return Gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new to(Or(ly),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Or(ly);const o=fc(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await tu(e,{idToken:f}).catch(()=>{});if(!g)break;m=await Gn._fromGetAccountInfoResponse(e,g,f)}else m=Gn._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new to(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new to(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BE(e))return"Blackberry";if($E(e))return"Webos";if(LE(e))return"Safari";if((e.includes("chrome/")||FE(e))&&!e.includes("edge/"))return"Chrome";if(zE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function VE(t=Zt()){return/firefox\//i.test(t)}function LE(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FE(t=Zt()){return/crios\//i.test(t)}function UE(t=Zt()){return/iemobile/i.test(t)}function zE(t=Zt()){return/android/i.test(t)}function BE(t=Zt()){return/blackberry/i.test(t)}function $E(t=Zt()){return/webos/i.test(t)}function Xp(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gN(t=Zt()){var e;return Xp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vN(){return T1()&&document.documentMode===10}function HE(t=Zt()){return Xp(t)||zE(t)||$E(t)||BE(t)||/windows phone/i.test(t)||UE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t,e=[]){let n;switch(t){case"Browser":n=cy(Zt());break;case"Worker":n=`${cy(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(t,e={}){return zs(t,"GET","/v2/passwordPolicy",Us(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=6;class EN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:wN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uy(this),this.idTokenSubscription=new uy(this),this.beforeStateQueue=new yN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Or(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await to.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tu(this,{idToken:e}),r=await Gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(En(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(Fr(this));const n=e?ct(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(Fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(Fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _N(this),n=new EN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ya("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await mN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Or(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await to.create(this,[Or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&XP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ii(t){return ct(t)}class uy{constructor(e){this.auth=e,this.observer=null,this.addObserver=R1(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IN(t){Wu=t}function WE(t){return Wu.loadJS(t)}function SN(){return Wu.recaptchaEnterpriseScript}function AN(){return Wu.gapiScript}function CN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class xN{constructor(){this.enterprise=new PN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class PN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const NN="recaptcha-enterprise",GE="NO_RECAPTCHA";class RN{constructor(e){this.type=NN,this.auth=Ii(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{aN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new oN(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;iy(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(GE)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xN().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&iy(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=SN();u.length!==0&&(u+=c),WE(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function dy(t,e,n,r=!1,s=!1){const i=new RN(t);let o;if(s)o=GE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function lf(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await dy(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await dy(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t,e){const n=Au(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ci(i,e??{}))return s;Jn(s,"already-initialized")}return n.initialize({options:e})}function DN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Or);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jN(t,e,n){const r=Ii(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=KE(e),{host:o,port:c}=bN(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(ci(d,r.config.emulator)&&ci(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,_i(o)?(op(`${i}//${o}${u}`),K0("Auth",!0)):ON()}function KE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bN(t){const e=KE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:hy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:hy(o)}}}function hy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ON(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,n){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}async function MN(t,e){return zs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e){return ol(t,"POST","/v1/accounts:signInWithPassword",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(t,e){return ol(t,"POST","/v1/accounts:signInWithEmailLink",Us(t,e))}async function FN(t,e){return ol(t,"POST","/v1/accounts:signInWithEmailLink",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends Jp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new $a(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $a(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,n,"signInWithPassword",VN);case"emailLink":return LN(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,r,"signUpPassword",MN);case"emailLink":return FN(e,{idToken:n,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(t,e){return ol(t,"POST","/v1/accounts:signInWithIdp",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="http://localhost";class pi extends Jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Gp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new pi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return no(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,no(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,no(e,n)}buildRequest(){const e={requestUri:UN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BN(t){const e=Qo(Yo(t)).link,n=e?Qo(Yo(e)).deep_link_id:null,r=Qo(Yo(t)).deep_link_id;return(r?Qo(Yo(r)).link:null)||r||n||e||t}class Zp{constructor(e){var n,r,s,i,o,c;const u=Qo(Yo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=zN((s=u.mode)!==null&&s!==void 0?s:null);ye(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=BN(e);try{return new Zp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.providerId=Ao.PROVIDER_ID}static credential(e,n){return $a._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zp.parseLink(n);return ye(r,"argument-error"),$a._fromEmailAndCode(e,r.code,r.tenantId)}}Ao.PROVIDER_ID="password";Ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends QE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends al{constructor(){super("facebook.com")}static credential(e){return pi._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pi._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com";ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends al{constructor(){super("github.com")}static credential(e){return pi._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends al{constructor(){super("twitter.com")}static credential(e,n){return pi._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return us.credential(n,r)}catch{return null}}}us.TWITTER_SIGN_IN_METHOD="twitter.com";us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(t,e){return ol(t,"POST","/v1/accounts:signUp",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Gn._fromIdTokenResponse(e,r,s),o=fy(r);return new mi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=fy(r);return new mi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function fy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends _r{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ru.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ru(e,n,r,s)}}function YE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ru._fromErrorAndOperation(t,i,e,r):i})}async function HN(t,e,n=!1){const r=await Ba(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(t,e,n=!1){const{auth:r}=t;if(En(r.app))return Promise.reject(Fr(r));const s="reauthenticate";try{const i=await Ba(t,YE(r,s,e,t),n);ye(i.idToken,r,"internal-error");const o=Yp(i.idToken);ye(o,r,"internal-error");const{sub:c}=o;return ye(t.uid===c,r,"user-mismatch"),mi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Jn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XE(t,e,n=!1){if(En(t.app))return Promise.reject(Fr(t));const r="signIn",s=await YE(t,r,e),i=await mi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function WN(t,e){return XE(Ii(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(t){const e=Ii(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZE(t,e,n){if(En(t.app))return Promise.reject(Fr(t));const r=Ii(t),o=await lf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$N).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&JE(t),u}),c=await mi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function GN(t,e,n){return En(t.app)?Promise.reject(Fr(t)):WN(ct(t),Ao.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&JE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t,e){return ct(t).setPersistence(e)}function QN(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function YN(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function XN(t,e,n,r){return ct(t).onAuthStateChanged(e,n,r)}function JN(t){return ct(t).signOut()}const su="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(su,"1"),this.storage.removeItem(su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=1e3,eR=10;class tT extends eT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);vN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tT.type="LOCAL";const tR=tT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT extends eT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nT.type="SESSION";const em=nT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Gu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await nR(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=tm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return window}function sR(t){vr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function iR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aR(){return rT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="firebaseLocalStorageDb",lR=1,iu="firebaseLocalStorage",iT="fbase_key";class ll{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ku(t,e){return t.transaction([iu],e?"readwrite":"readonly").objectStore(iu)}function cR(){const t=indexedDB.deleteDatabase(sT);return new ll(t).toPromise()}function cf(){const t=indexedDB.open(sT,lR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(iu,{keyPath:iT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(iu)?e(r):(r.close(),await cR(),e(await cf()))})})}async function py(t,e,n){const r=Ku(t,!0).put({[iT]:e,value:n});return new ll(r).toPromise()}async function uR(t,e){const n=Ku(t,!1).get(e),r=await new ll(n).toPromise();return r===void 0?null:r.value}function my(t,e){const n=Ku(t,!0).delete(e);return new ll(n).toPromise()}const dR=800,hR=3;class oT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gu._getInstance(aR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await iR(),!this.activeServiceWorker)return;this.sender=new rR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cf();return await py(e,su,"1"),await my(e,su),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>py(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>my(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ku(s,!1).getAll();return new ll(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oT.type="LOCAL";const fR=oT;new il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t,e){return e?Or(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends Jp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return no(e,this._buildIdpRequest())}_linkToIdToken(e,n){return no(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return no(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mR(t){return XE(t.auth,new nm(t),t.bypassAuthState)}function gR(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),qN(n,new nm(t),t.bypassAuthState)}async function vR(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),HN(n,new nm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mR;case"linkViaPopup":case"linkViaRedirect":return vR;case"reauthViaPopup":case"reauthViaRedirect":return gR;default:Jn(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new il(2e3,1e4);class Wi extends aT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Wi.currentPopupAction&&Wi.currentPopupAction.cancel(),Wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const e=tm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yR.get())};e()}}Wi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="pendingRedirect",pc=new Map;class wR extends aT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pc.get(this.auth._key());if(!e){try{const r=await ER(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pc.set(this.auth._key(),e)}return this.bypassAuthState||pc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ER(t,e){const n=SR(e),r=IR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function TR(t,e){pc.set(t._key(),e)}function IR(t){return Or(t._redirectPersistence)}function SR(t){return fc(_R,t.config.apiKey,t.name)}async function AR(t,e,n=!1){if(En(t.app))return Promise.reject(Fr(t));const r=Ii(t),s=pR(r,e),o=await new wR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=10*60*1e3;class xR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!lT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CR&&this.cachedEventUids.clear(),this.cachedEventUids.has(gy(e))}saveEventToCache(e){this.cachedEventUids.add(gy(e)),this.lastProcessedEventTime=Date.now()}}function gy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(t,e={}){return zs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kR=/^https?/;async function DR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await NR(t);for(const n of e)try{if(jR(n))return}catch{}Jn(t,"unauthorized-domain")}function jR(t){const e=of(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!kR.test(n))return!1;if(RR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new il(3e4,6e4);function vy(){const t=vr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OR(t){return new Promise((e,n)=>{var r,s,i;function o(){vy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vy(),n(gr(t,"network-request-failed"))},timeout:bR.get()})}if(!((s=(r=vr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=vr().gapi)===null||i===void 0)&&i.load)o();else{const c=CN("iframefcb");return vr()[c]=()=>{gapi.load?o():n(gr(t,"network-request-failed"))},WE(`${AN()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw mc=null,e})}let mc=null;function MR(t){return mc=mc||OR(t),mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new il(5e3,15e3),LR="__/auth/iframe",FR="emulator/auth/iframe",UR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BR(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qp(e,FR):`https://${t.config.authDomain}/${LR}`,r={apiKey:e.apiKey,appName:t.name,v:wo},s=zR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Xa(r).slice(1)}`}async function $R(t){const e=await MR(t),n=vr().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:BR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=gr(t,"network-request-failed"),c=vr().setTimeout(()=>{i(o)},VR.get());function u(){vr().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qR=500,WR=600,GR="_blank",KR="http://localhost";class yy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QR(t,e,n,r=qR,s=WR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},HR),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Zt().toLowerCase();n&&(c=FE(d)?GR:n),VE(d)&&(e=e||KR,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,P])=>`${g}${w}=${P},`,"");if(gN(d)&&c!=="_self")return YR(e||"",c),new yy(null);const m=window.open(e||"",c,f);ye(m,t,"popup-blocked");try{m.focus()}catch{}return new yy(m)}function YR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="__/auth/handler",JR="emulator/auth/handler",ZR=encodeURIComponent("fac");async function _y(t,e,n,r,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:wo,eventId:s};if(e instanceof QE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",N1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof al){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${ZR}=${encodeURIComponent(u)}`:"";return`${ek(t)}?${Xa(c).slice(1)}${d}`}function ek({config:t}){return t.emulator?Qp(t,JR):`https://${t.authDomain}/${XR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="webStorageSupport";class tk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=em,this._completeRedirectFn=AR,this._overrideRedirectResult=TR}async _openPopup(e,n,r,s){var i;Kr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await _y(e,n,r,of(),s);return QR(e,o,tm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await _y(e,n,r,of(),s);return sR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $R(e),r=new xR(e);return n.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bd,{type:Bd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Bd];o!==void 0&&n(!!o),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HE()||LE()||Xp()}}const nk=tk;var wy="@firebase/auth",Ey="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ik(t){ui(new Ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qE(t)},d=new TN(r,s,i,u);return DN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ui(new Ps("auth-internal",e=>{const n=Ii(e.getProvider("auth").getImmediate());return(r=>new rk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(wy,Ey,sk(t)),dr(wy,Ey,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=5*60,ak=G0("authIdTokenMaxAge")||ok;let Ty=null;const lk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ak)return;const s=n==null?void 0:n.token;Ty!==s&&(Ty=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ck(t=X0()){const e=Au(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kN(t,{popupRedirectResolver:nk,persistence:[fR,tR,em]}),r=G0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=lk(i.toString());YN(n,o,()=>o(n.currentUser)),QN(n,c=>o(c))}}const s=q0("auth");return s&&jN(n,`http://${s}`),n}function uk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}IN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=gr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",uk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ik("Browser");const ta={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"},dk=typeof window<"u"&&window.__FIREBASE_CONFIG__||null,cT={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"},hk=!!(ta.apiKey&&ta.authDomain&&ta.projectId&&ta.appId),ji=dk||(hk?ta:cT),fk=!!(ji&&ji.apiKey&&ji.authDomain&&ji.projectId&&ji.appId);let gi=null;if(fk)try{gi=Uh(ji)}catch{try{gi=Uh(cT)}catch{}}const de=gi?VP(gi,{experimentalForceLongPolling:!0,useFetchStreams:!1}):null,ar=gi?ck(gi):null;if(ar)try{KN(ar,em).catch(()=>{})}catch{}const Iy=gi;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="type.googleapis.com/google.protobuf.Int64Value",mk="type.googleapis.com/google.protobuf.UInt64Value";function uT(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function ou(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>ou(e));if(typeof t=="function"||typeof t=="object")return uT(t,e=>ou(e));throw new Error("Data cannot be encoded in JSON: "+t)}function go(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case pk:case mk:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>go(e)):typeof t=="function"||typeof t=="object"?uT(t,e=>go(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fn extends _r{constructor(e,n,r){super(`${rm}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,fn.prototype)}}function gk(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function au(t,e){let n=gk(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Sy[o])return new fn("internal","internal");n=Sy[o],r=o}const c=i.message;typeof c=="string"&&(r=c),s=i.details,s!==void 0&&(s=go(s))}}catch{}return n==="ok"?null:new fn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,En(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="us-central1",yk=/^data: (.*?)(?:\n|$)/;function _k(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new fn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class wk{constructor(e,n,r,s,i=uf,o=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new vk(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=uf}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Ek(t,e,n){const r=_i(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(op(t.emulatorOrigin),K0("Functions",!0))}function Tk(t,e,n){const r=s=>Sk(t,e,s,{});return r.stream=(s,i)=>Ck(t,e,s,i),r}async function Ik(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}async function dT(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Sk(t,e,n,r){const s=t._url(e);return Ak(t,s,n,r)}async function Ak(t,e,n,r){n=ou(n);const s={data:n},i=await dT(t,r),o=r.timeout||7e4,c=_k(o),u=await Promise.race([Ik(e,s,i,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!u)throw new fn("cancelled","Firebase Functions instance was deleted.");const d=au(u.status,u.json);if(d)throw d;if(!u.json)throw new fn("internal","Response is not valid JSON object.");let f=u.json.data;if(typeof f>"u"&&(f=u.json.result),typeof f>"u")throw new fn("internal","Response is missing data field.");return{data:go(f)}}function Ck(t,e,n,r){const s=t._url(e);return xk(t,s,n,r||{})}async function xk(t,e,n,r){var s;n=ou(n);const i={data:n},o=await dT(t,r);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:o,signal:r==null?void 0:r.signal})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const b=new fn("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const P=au(0,null);return{data:Promise.reject(P),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(P)}}}}}}let u,d;const f=new Promise((w,P)=>{u=w,d=P});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const w=new fn("cancelled","Request was cancelled.");d(w)});const m=c.body.getReader(),g=Pk(m,u,d,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const w=g.getReader();return{async next(){const{value:P,done:b}=await w.read();return{value:P,done:b}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:f}}function Pk(t,e,n,r){const s=(o,c)=>{const u=o.match(yk);if(!u)return;const d=u[1];try{const f=JSON.parse(d);if("result"in f){e(go(f.result));return}if("message"in f){c.enqueue(go(f.message));return}if("error"in f){const m=au(0,f);c.error(m),n(m);return}}catch(f){if(f instanceof fn){c.error(f),n(f);return}}},i=new TextDecoder;return new ReadableStream({start(o){let c="";return u();async function u(){if(r!=null&&r.aborted){const d=new fn("cancelled","Request was cancelled");return o.error(d),n(d),Promise.resolve()}try{const{value:d,done:f}=await t.read();if(f){c.trim()&&s(c.trim(),o),o.close();return}if(r!=null&&r.aborted){const g=new fn("cancelled","Request was cancelled");o.error(g),n(g),await t.cancel();return}c+=i.decode(d,{stream:!0});const m=c.split(`
`);c=m.pop()||"";for(const g of m)g.trim()&&s(g.trim(),o);return u()}catch(d){const f=d instanceof fn?d:au(0,null);o.error(f),n(f)}}},cancel(){return t.cancel()}})}const Ay="@firebase/functions",Cy="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="auth-internal",Rk="app-check-internal",kk="messaging-internal";function Dk(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(Nk),o=n.getProvider(kk),c=n.getProvider(Rk);return new wk(s,i,o,c,r)};ui(new Ps(rm,e,"PUBLIC").setMultipleInstances(!0)),dr(Ay,Cy,t),dr(Ay,Cy,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t=X0(),e=uf){const r=Au(ct(t),rm).getImmediate({identifier:e}),s=f1("functions");return s&&bk(r,...s),r}function bk(t,e,n){Ek(ct(t),e,n)}function Ok(t,e,n){return Tk(ct(t),e)}Dk();const Ha=["Pendente","Em produo","Aguardando Feedback","Aprovada","Revisar","Concluida"],sm=["Instagram","Trfego Pago","CRM","Influencers","Site","Branding","Outros"],Mk=t=>t==="Aberta"?"Aberta":t==="Em Progresso"?"Em Progresso":t==="Concluda"?"Concluda":t,hT=t=>Mk(t),fT=t=>{const e=(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")?"st-pending":e.includes("progresso")||e.includes("produo")?"st-progress":e.includes("feedback")?"st-feedback":e.includes("revisar")?"st-review":e.includes("aprov")?"st-approved":e.includes("conclu")?"st-concluded":e.includes("atras")?"st-late":""},im=t=>{const e=String(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")||t==="Aberta"||t==="Pendente"},om=t=>{const e=String(t||"").toLowerCase();return e.includes("produo")||e.includes("progresso")||t==="Em Progresso"||t==="Em produo"},Mr=t=>{const e=String(t||"").toLowerCase();return e.includes("conclu")||e.includes("aprov")||t==="Concluda"||t==="Aprovada"},Vk=t=>{const e=String(t||"").match(/@([a-zA-Z0-9_]+)/g);return e?e.map(n=>n.slice(1)):[]},xy=t=>{if(t==null)return"";const e=Math.max(0,Math.round(t)),n=Math.floor(e/60),r=e%60;return n>0?`${n}h ${r}m`:`${r}m`},df=(t,e)=>{const n=t.filter(N=>String(N.status||"").toLowerCase().includes("conclu")||N.status==="Concluda"),r=n.filter(N=>(N.designer||"")===(e.designer||"")),s=n.filter(N=>(N.tipoMidia||"")===(e.tipoMidia||"")),i=n.filter(N=>(N.origem||"")===(e.origem||"")),o=n.filter(N=>(N.plataforma||"")===(e.plataforma||"")),c=(N,V)=>{const v=C=>{const[R,D,x]=String(C||"").split("-").map(Number);return R?new Date(R,D-1,x):null},y=v(N),T=v(V);return!y||!T?null:Math.max(0,Math.round((T-y)/864e5))},u=(()=>{const N=n.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),V=N.reduce((v,y)=>v+y,0)/(N.length||1);return Math.max(1,Math.round(V))})(),d=(()=>{const N=r.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),V=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(V)):null})(),f=(()=>{const N=s.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),V=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(V)):null})(),m=(()=>{const N=i.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),V=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(V)):null})(),g=(()=>{const N=o.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),V=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(V)):null})(),w=(()=>{const N=r.map(v=>v.revisoes||0),V=N.reduce((v,y)=>v+y,0)/(N.length||1);return Math.round(V)})(),P=t.filter(N=>(N.designer||"")===(e.designer||"")&&!/conclu/i.test(String(N.status||""))).length,U=Math.min(100,Math.round(P/4*100)),A=d??f??g??m??u,I=(U>=80?1:0)+(w>=2?1:0),S=Math.max(1,A+I),j=[];return j.push(`Estimativa: ${S} dia${S>1?"s":""} teis`),U>=80&&j.push("Alta probabilidade de atraso devido  carga acima de 80%"),S===1&&j.push("Pea deve ser concluda ainda hoje  Hoje at s 17h"),w>=2&&j.push("Revises esperadas acima da mdia para este designer"),j.join("  ")},pT={bg:"#070707",panel:"#0E0E0E",text:"#F2F2F2",muted:"#BDBDBD",border:"#ffffff1a",accent:"#BCD200",hover:"rgba(255,255,255,0.03)",btnBg:"#BCD200",btnText:"#111111",btnHoverBg:"#C7DB00",btnBorder:"#ffffff1a",shadow:"0 10px 30px rgba(0,0,0,.15)",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",chart:"#3b82f6"},wn=()=>{const t=new Date,e=n=>String(n).padStart(2,"0");return`${t.getFullYear()}-${e(t.getMonth()+1)}-${e(t.getDate())}`};function Lk({series:t,color:e="#BCD200"}){const s=Math.max(...t,1),i=t.length>1?120/(t.length-1):120,o=t.map((u,d)=>({x:d*i,y:30-u/s*30})),c=o.map(u=>`${u.x},${u.y}`).join(" ");return l.jsxs("svg",{width:120,height:30,className:"sparkline",viewBox:"0 0 120 30",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"sg",x1:"0",x2:"1",y1:"0",y2:"0",children:[l.jsx("stop",{offset:"0%",stopColor:e,stopOpacity:"0.6"}),l.jsx("stop",{offset:"100%",stopColor:e,stopOpacity:"1"})]})}),l.jsx("polyline",{points:c,fill:"none",stroke:"url(#sg)",strokeWidth:"2.5"}),o.map((u,d)=>l.jsx("circle",{cx:u.x,cy:u.y,r:"2.5",fill:e},d))]})}function Oe({name:t,size:e=18}){const n={width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};return t==="dashboard"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"})]}):t==="demandas"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M8 3h8"}),l.jsx("path",{d:"M8 7h8"}),l.jsx("rect",{x:"5",y:"3",width:"14",height:"18",rx:"2"})]}):t==="config"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.7 1.7 0 0 0 .3 1.8l.1.1-1.5 2.6-.1.1a1.8 1.8 0 0 0-2.2.8h-.2l-3-.4h-.2a1.8 1.8 0 0 0-1.6 0h-.2l-3 .4h-.2a1.8 1.8 0 0 0-2.2-.8l-.1-.1-1.5-2.6.1-.1a1.8 1.8 0 0 0 .3-1.8v-.2l-.4-3v-.2a1.8 1.8 0 0 0 0-1.6v-.2l.4-3v-.2a1.7 1.7 0 0 0-.3-1.8l-.1-.1L4.4 4l.1-.1a1.8 1.8 0 0 0 2.2-.8h.2l3 .4h.2a1.8 1.8 0 0 0 1.6 0h.2l3-.4h.2a1.8 1.8 0 0 0 2.2.8l.1.1 1.5 2.6-.1.1a1.8 1.8 0 0 0-.3 1.8v.2l.4 3v.2a1.8 1.8 0 0 0 0 1.6v.2Z"})]}):t==="cadastros"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M4 6h16"}),l.jsx("path",{d:"M4 12h10"}),l.jsx("path",{d:"M4 18h7"})]}):t==="relatorios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 20h18"}),l.jsx("rect",{x:"6",y:"14",width:"3",height:"6"}),l.jsx("rect",{x:"11",y:"10",width:"3",height:"10"}),l.jsx("rect",{x:"16",y:"6",width:"3",height:"14"})]}):t==="usuarios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"3"}),l.jsx("path",{d:"M19 8v6"}),l.jsx("path",{d:"M22 11h-6"})]}):t==="filter"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"11",cy:"11",r:"7"}),l.jsx("path",{d:"M20 20l-3.5-3.5"})]}):t==="table"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M3 10h18"}),l.jsx("path",{d:"M10 4v16"})]}):t==="board"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"10",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"17",y:"4",width:"4",height:"16",rx:"2"})]}):t==="calendar"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M16 3v4"}),l.jsx("path",{d:"M8 3v4"}),l.jsx("path",{d:"M3 11h18"})]}):t==="close"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M18 6L6 18"}),l.jsx("path",{d:"M6 6l12 12"})]}):t==="clock"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"9"}),l.jsx("path",{d:"M12 7v5l3 3"})]}):t==="paperclip"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21.44 11.05 12.5 20a5 5 0 1 1-7.07-7.07L14.36 4a3.5 3.5 0 0 1 4.95 4.95l-9.19 9.19"})}):t==="chat"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4Z"})}):t==="check"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M20 6 9 17l-5-5"})}):t==="plus"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"})]}):t==="dot"?l.jsx("svg",{...n,children:l.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor",stroke:"none"})}):t==="trash"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 6h18"}),l.jsx("path",{d:"M8 6V4h8v2"}),l.jsx("rect",{x:"5",y:"6",width:"14",height:"14",rx:"2"})]}):t==="logout"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("path",{d:"M16 17l5-5-5-5"}),l.jsx("path",{d:"M21 12H9"})]}):t==="link"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 1 0-7.07-7.07L10 4"}),l.jsx("path",{d:"M14 11a5 5 0 0 1-7.07 0L3.39 7.46a5 5 0 1 1 7.07-7.07L14 4"})]}):t==="tag"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M20 10V4H14L4 14l6 6 10-10Z"}),l.jsx("circle",{cx:"16.5",cy:"7.5",r:"1.5"})]}):null}function Fk({onNew:t,view:e,setView:n,showNew:r,user:s,onLogout:i}){return l.jsxs("div",{className:"topbar",children:[l.jsx("div",{className:"topbar-left",children:l.jsx("div",{className:"team",children:"Equipe de Marketing"})}),l.jsx("div",{className:"topbar-right",children:s?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{className:"chip",children:s.name||s.username}),l.jsxs("button",{className:"primary",onClick:i,children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"logout"})}),l.jsx("span",{children:"Sair"})]})]}):null})]})}function Uk({view:t,setView:e}){return l.jsxs("div",{className:"tabs-inline",children:[l.jsxs("button",{className:`tab-btn ${t==="table"?"active":""}`,onClick:()=>e("table"),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"table"})}),l.jsx("span",{children:"Table"})]}),l.jsxs("button",{className:`tab-btn ${t==="calendar"?"active":""}`,onClick:()=>e("calendar"),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"calendar"})}),l.jsx("span",{children:"Calendar"})]})]})}function zk({onLogin:t}){const[e,n]=Y.useState(""),[r,s]=Y.useState(""),[i,o]=Y.useState(!1),[c,u]=Y.useState(""),d=async f=>{if(f.preventDefault(),!i){u(""),o(!0);try{await t(e,r)}catch(m){const w=String((m==null?void 0:m.code)||"")==="auth/operation-not-allowed"?"Domnio no autorizado no Firebase Auth. Adicione o domnio do site nas configuraes.":m&&(m.code||m.message)||"Falha ao entrar";u(String(w))}finally{o(!1)}}};return l.jsxs("div",{className:"login-wrap",children:[l.jsx("div",{className:"login-banner",children:"BANNER TELA LOGIN"}),l.jsxs("div",{className:"login-card",children:[l.jsx("div",{className:"login-title",children:"Gerenciamento Mkt!"}),l.jsxs("form",{onSubmit:d,className:"login-form",children:[l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",placeholder:"Usurio",value:e,onChange:f=>n(f.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"8",r:"4"}),l.jsx("path",{d:"M4 20c0-4 4-6 8-6s8 2 8 6"})]})})]}),l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",type:"password",placeholder:"Insira sua senha",value:r,onChange:f=>s(f.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),c?l.jsx("div",{className:"login-error",role:"alert",children:c}):null,l.jsx("div",{className:"login-links",children:l.jsx("a",{href:"#",onClick:f=>f.preventDefault(),children:"Esqueceu sua senha?"})}),l.jsx("button",{className:"primary btn-lg",type:"submit",disabled:i,children:i?"Entrando...":"Entrar"})]})]})]})}function Bk({open:t,filtros:e,setFiltros:n,designers:r,onClose:s,cadStatus:i,cadTipos:o,origens:c,campanhas:u}){const d=(m,g)=>n(w=>({...w,[m]:g})),f=()=>n({designer:"",status:"",cIni:"",cFim:"",sIni:"",sFim:""});return t?l.jsx("div",{className:"modal",onClick:s,children:l.jsxs("div",{className:"modal-dialog",onClick:m=>m.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"filter"})}),l.jsx("span",{children:"Filtros"})]}),l.jsx("button",{className:"icon",onClick:s,children:l.jsx(Oe,{name:"close"})})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Comparativo Mensal"}),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Produo"})}),(()=>{const m=concluidos.filter(A=>inMonth(A.dataConclusao,mesAtual)).length,g=concluidos.filter(A=>inMonth(A.dataConclusao,mesPassado)).length,w=Math.max(m,g,1),P=220,b=80,U=(A,I)=>l.jsx("rect",{x:I,y:b-A/w*b,width:"40",height:A/w*b,rx:"6"});return l.jsxs("svg",{width:P,height:b,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:U(m,40)}),l.jsx("g",{fill:"#4DA3FF",children:U(g,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Qualidade (retrabalho)"})}),(()=>{const m=concluidos.filter(S=>inMonth(S.dataConclusao,mesAtual)).map(S=>S.revisoes||0),g=concluidos.filter(S=>inMonth(S.dataConclusao,mesPassado)).map(S=>S.revisoes||0),w=+(m.reduce((S,j)=>S+j,0)/(m.length||1)).toFixed(2),P=+(g.reduce((S,j)=>S+j,0)/(g.length||1)).toFixed(2),b=Math.max(w,P,1),U=220,A=80,I=(S,j)=>l.jsx("rect",{x:j,y:A-S/b*A,width:"40",height:S/b*A,rx:"6"});return l.jsxs("svg",{width:U,height:A,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:I(w,40)}),l.jsx("g",{fill:"#FF5E5E",children:I(P,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Lead-time"})}),(()=>{const m=compMesAtual,g=compMesPassado,w=Math.max(m,g,1),P=220,b=80,U=(A,I)=>l.jsx("rect",{x:I,y:b-A/w*b,width:"40",height:A/w*b,rx:"6"});return l.jsxs("svg",{width:P,height:b,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:U(m,40)}),l.jsx("g",{fill:"#9B59B6",children:U(g,140)})]})})()]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Insights Automticos"}),l.jsx("div",{className:"insights-grid",children:(()=>{const m=(()=>{const A={};return concluidos.forEach(S=>{const j=S.designer||"",N=S.prazo&&S.dataConclusao&&S.dataConclusao<=S.prazo,V=S.prazo&&S.dataConclusao,v=A[j]||{ok:0,total:0};A[j]={ok:v.ok+(N?1:0),total:v.total+(V?1:0)}}),Object.entries(A).map(([S,j])=>({designer:S,pct:Math.round(100*(j.ok/(j.total||1)))})).sort((S,j)=>j.pct-S.pct)[0]})(),g=(()=>{const A={};return items.forEach(S=>{const j=S.origem||"Outros";A[j]=(A[j]||0)+1}),Object.entries(A).map(([S,j])=>({origem:S,q:j})).sort((S,j)=>j.q-S.q)[0]})(),w=concluidos.filter(A=>(A.revisoes||0)===0).length===concluidos.length,P=compMesAtual<=compMesPassado,b=(()=>{const A=concluidos.filter(S=>/stor/i.test(String(S.tipoMidia||""))),I=+(A.reduce((S,j)=>S+(j.revisoes||0),0)/(A.length||1)).toFixed(2);return{qtd:A.length,avg:I}})(),U=[];return m&&U.push(`O designer ${m.designer} teve o melhor SLA do ms (${m.pct}%)`),g&&U.push(`${g.origem} foi o canal mais solicitado`),w&&U.push("Nenhuma demanda apresentou retrabalho neste ms"),P&&U.push("Seu lead-time melhorou em relao ao ms anterior"),b.qtd>0&&U.push("A categoria Stories teve o maior retrabalho do ms"),U})().map((m,g)=>l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:m})]},g))})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:e.designer,onChange:m=>d("designer",m.target.value),children:[l.jsx("option",{value:"",children:"Designer"}),r.map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{className:"status-select",value:e.status,onChange:m=>d("status",m.target.value),children:[l.jsx("option",{value:"",children:"Status"}),Ha.map(m=>l.jsx("option",{value:m,children:hT(m)},m))]}),l.jsx("div",{className:"chips",children:Ha.map(m=>l.jsx("button",{className:`chip ${e.status===m?"active":""}`,onClick:()=>d("status",e.status===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("div",{className:"chips",children:o.map(m=>l.jsx("button",{className:`chip ${e.tipoMidia===m?"active":""}`,onClick:()=>d("tipoMidia",e.tipoMidia===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem"}),l.jsx("div",{className:"chips",children:(c||sm).map(m=>l.jsx("button",{className:`chip ${e.origem===m?"active":""}`,onClick:()=>d("origem",e.origem===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsxs("select",{value:e.campanha||"",onChange:m=>d("campanha",m.target.value),children:[l.jsx("option",{value:"",children:"Campanha"}),(u||[]).map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.cIni,onChange:m=>d("cIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.cFim,onChange:m=>d("cFim",m.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.sIni,onChange:m=>d("sIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.sFim,onChange:m=>d("sFim",m.target.value)})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsxs("button",{className:"icon",onClick:f,children:[l.jsx(Oe,{name:"close"}),l.jsx("span",{children:"Limpar"})]}),l.jsx("button",{className:"primary",onClick:s,children:"Aplicar"})]})]})}):null}function $k(t,e){return t.filter(n=>!(e.q&&!(n.titulo||"").toLowerCase().includes(e.q.toLowerCase())||e.designer&&n.designer!==e.designer||e.status&&n.status!==e.status||e.tipoMidia&&n.tipoMidia!==e.tipoMidia||e.plataforma&&(n.plataforma||"")!==e.plataforma||e.origem&&(n.origem||"")!==e.origem||e.campanha&&(n.campanha||"")!==e.campanha||e.cIni&&n.dataCriacao&&n.dataCriacao<e.cIni||e.cFim&&n.dataCriacao&&n.dataCriacao>e.cFim||e.sIni&&n.dataSolicitacao<e.sIni||e.sFim&&n.dataSolicitacao>e.sFim))}function Hk({items:t,onEdit:e,onStatus:n,cadStatus:r,onDelete:s,onDuplicate:i,hasMore:o,showMore:c,canCollapse:u,showLess:d,shown:f,total:m,compact:g,canEdit:w,loading:P}){const[b,U]=Y.useState(null),A=N=>String(N).padStart(2,"0");(N=>{const V=new Date(Date.UTC(N.getFullYear(),N.getMonth(),N.getDate())),v=V.getUTCDay()||7;V.setUTCDate(V.getUTCDate()+4-v);const y=new Date(Date.UTC(V.getUTCFullYear(),0,1)),T=Math.ceil(((V-y)/864e5+1)/7);return`${V.getUTCFullYear()}-W${A(T)}`})(new Date);const S=N=>{if(!N)return"";const[V,v,y]=String(N).split("-").map(Number),T=new Date(V,(v||1)-1,y||1),C=new Date;return C.setHours(0,0,0,0),T.setHours(0,0,0,0),Math.round((T-C)/864e5)},j=N=>{if(!N)return"";const[V,v,y]=String(N).split("-").map(Number),T=String(y).padStart(2,"0"),C=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"][Math.max(0,Math.min(11,v-1||0))];return`${T}.${C}`};return P?l.jsxs("div",{className:`table ${g?"compact":""}`,children:[l.jsx("div",{className:"skeleton row",style:{width:"60%"}}),Array.from({length:8}).map((N,V)=>l.jsx("div",{className:"skeleton row",style:{width:`${90-V*6}%`}},V))]}):l.jsxs("div",{className:`table ${g?"compact":""}`,children:[l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Data de Solicitao"}),l.jsx("th",{children:"Data de Criao"}),l.jsx("th",{children:"Prazo (dias)"}),l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Origem"}),l.jsx("th",{children:"Link"})]})}),l.jsx("tbody",{children:t.map(N=>l.jsxs("tr",{className:"row-clickable",onClick:()=>e(N),children:[l.jsx("td",{className:"name",children:N.titulo}),l.jsx("td",{children:l.jsx("div",{children:N.designer})}),l.jsx("td",{children:l.jsx("select",{className:`status-select ${fT(N.status)}`,value:N.status,onChange:V=>n(N.id,V.target.value),onClick:V=>V.stopPropagation(),disabled:!w,children:Ha.map(V=>l.jsx("option",{value:V,children:hT(V)},V))})}),l.jsx("td",{children:j(N.dataSolicitacao)}),l.jsx("td",{children:j(N.dataCriacao)}),l.jsx("td",{children:l.jsx("span",{style:{color:!Mr(N.status)&&Number(S(N.prazo))<=1?"#ef4444":"inherit"},children:S(N.prazo)})}),l.jsx("td",{children:N.tipoMidia}),l.jsx("td",{children:N.origem||""}),l.jsx("td",{children:N.link?l.jsx("a",{href:N.link,target:"_blank",rel:"noreferrer",onClick:V=>V.stopPropagation(),children:"Visualizar"}):""}),l.jsx("td",{children:Array.isArray(N.arquivos)&&N.arquivos.length?l.jsx("div",{className:"files",children:N.arquivos.slice(0,5).map(V=>l.jsx("a",{href:V.url,target:"_blank",rel:"noreferrer",title:V.name,onClick:v=>v.stopPropagation(),children:l.jsx("img",{className:"file-thumb",src:V.url,alt:V.name})},V.name))}):N.arquivoNome||""})]},N.id))})]}),l.jsxs("div",{className:"table-footer",children:[o&&l.jsx("button",{className:"primary",onClick:c,children:"Mostrar mais demandas"}),u&&l.jsx("button",{className:"primary",onClick:d,children:"Mostrar menos demandas"})]})]})}function qk({items:t,refDate:e}){const n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0),s=n.getDay(),i=r.getDate(),o={};t.forEach(u=>{const d=u.dataSolicitacao,f=new Date(d);f.getMonth()===e.getMonth()&&f.getFullYear()===e.getFullYear()&&(o[d]||(o[d]=[])).push(u)});const c=[];for(let u=0;u<s;u++)c.push(null);for(let u=1;u<=i;u++)c.push(u);return l.jsxs("div",{className:"calendar",children:[l.jsx("div",{className:"cal-head",children:l.jsx("div",{className:"month",children:e.toLocaleString("pt-BR",{month:"long",year:"numeric"})})}),l.jsxs("div",{className:"cal-grid",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(u=>l.jsx("div",{className:"cal-cell head",children:u},u)),c.map((u,d)=>{if(!u)return l.jsx("div",{className:"cal-cell"},d);const f=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`,m=o[f]||[];return l.jsxs("div",{className:"cal-cell",children:[l.jsx("div",{className:"day",children:u}),m.map(g=>l.jsxs("div",{className:"cal-item",children:[g.titulo," (",g.designer,")"]},g.id))]},d)})]})]})}function Wk({open:t,mode:e,onClose:n,onSubmit:r,initial:s,cadTipos:i,designers:o,cadPlataformas:c,onDelete:u,userLabel:d,canDelete:f,onAddComment:m,cadOrigens:g,currentUser:w}){const[P,b]=Y.useState((s==null?void 0:s.designer)||w||""),[U,A]=Y.useState((s==null?void 0:s.tipoMidia)||"Post"),[I,S]=Y.useState((s==null?void 0:s.titulo)||""),[j,N]=Y.useState((s==null?void 0:s.link)||""),[V,v]=Y.useState(""),[y,T]=Y.useState((s==null?void 0:s.dataSolicitacao)||wn()),[C,R]=Y.useState((s==null?void 0:s.plataforma)||""),[D,x]=Y.useState((s==null?void 0:s.arquivos)||[]),[nt,Pt]=Y.useState((s==null?void 0:s.dataCriacao)||""),[rt,W]=Y.useState((s==null?void 0:s.dataFeedback)||""),[$,O]=Y.useState((s==null?void 0:s.descricao)||""),[B,H]=Y.useState((s==null?void 0:s.prazo)||""),[Z,oe]=Y.useState((s==null?void 0:s.comentarios)||[]),[Ie,Fe]=Y.useState(""),[Ne,$e]=Y.useState((s==null?void 0:s.historico)||[]),[Ln,Nn]=Y.useState((s==null?void 0:s.origem)||""),[Bt,$t]=Y.useState((s==null?void 0:s.campanha)||""),[et,wr]=Y.useState("");Y.useEffect(()=>{b((s==null?void 0:s.designer)||w||""),A((s==null?void 0:s.tipoMidia)||"Post"),S((s==null?void 0:s.titulo)||""),N((s==null?void 0:s.link)||""),v(""),T((s==null?void 0:s.dataSolicitacao)??(e==="create"?wn():"")),R((s==null?void 0:s.plataforma)||(c==null?void 0:c[0])||""),x((s==null?void 0:s.arquivos)||[]),Pt((s==null?void 0:s.dataCriacao)||""),W((s==null?void 0:s.dataFeedback)||""),O((s==null?void 0:s.descricao)||""),H((s==null?void 0:s.prazo)||""),oe((s==null?void 0:s.comentarios)||[]),Fe(""),$e((s==null?void 0:s.historico)||[]),Nn((s==null?void 0:s.origem)||""),$t((s==null?void 0:s.campanha)||"")},[s,t,o,i,c,g]);const ke=L=>{L.preventDefault(),r({designer:P,tipoMidia:U,titulo:I,link:j,arquivoNome:V,dataSolic:y,dataCriacao:nt,dataFeedback:rt,plataforma:C,arquivos:D,descricao:$,prazo:B,comentarios:Z,historico:Ne,origem:Ln,campanha:Bt})},He=()=>{const L=Ie.trim();if(!L)return;const re=Vk(L),we={texto:L,data:wn(),mentions:re,autor:d},me={tipo:"comentario",autor:d,data:we.data,texto:L,mentions:re};oe(ge=>[we,...ge]),$e(ge=>[me,...ge]),Fe("");try{m&&m(s==null?void 0:s.id,we,me)}catch{}},qe=L=>{if(!L)return"";try{return new Date(L).toLocaleString("pt-BR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return L}},[Er,Yr]=Y.useState(Date.now());Y.useEffect(()=>{const L=setInterval(()=>Yr(Date.now()),1e3);return()=>clearInterval(L)},[]);const Tr=L=>{if(!L||L<=0)return"00:00:00";const re=Math.floor(L/1e3),we=String(Math.floor(re/3600)).padStart(2,"0"),me=String(Math.floor(re%3600/60)).padStart(2,"0"),ge=String(re%60).padStart(2,"0");return`${we}:${me}:${ge}`},Ke=Number((s==null?void 0:s.tempoProducaoMs)||0),Zn=s!=null&&s.startedAt?Date.parse(s.startedAt):null,Dt=/produ|progresso/i.test(String((s==null?void 0:s.status)||"")),[er]=Y.useState(()=>!Zn&&Dt?Date.now():null),Fn=Zn??er,E=Ke+(Fn?Math.max(0,Er-Fn):0),[k,F]=Y.useState(null);return t?l.jsx("div",{className:"modal",children:l.jsxs("div",{className:`modal-dialog ${e!=="create"?"tall":""}`,onClick:L=>L.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[e==="create"?l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}):l.jsx("div",{className:"title editable",contentEditable:!0,suppressContentEditableWarning:!0,onInput:L=>S(L.currentTarget.textContent||""),children:I||"Sem ttulo"}),l.jsx("button",{className:"icon",onClick:n,children:l.jsx(Oe,{name:"close"})})]}),l.jsxs("div",{className:`status-bar ${fT((s==null?void 0:s.status)||"Aberta")}`,children:[l.jsx("div",{children:(s==null?void 0:s.status)||"Aberta"}),e!=="create"&&l.jsxs("div",{className:"timer",children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"clock"})}),l.jsx("span",{children:Tr(E)})]})]}),l.jsx("form",{id:"modalForm",className:"modal-body",onSubmit:ke,children:l.jsxs("div",{className:`modal-columns ${e==="create"?"single":"cols3"}`,children:[l.jsxs("div",{className:"modal-main",children:[l.jsxs("div",{className:e==="create"?"form-grid":"form-stack",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:P,onChange:L=>b(L.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Designer"}),(o||[]).map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("select",{value:U,onChange:L=>A(L.target.value),children:(i||["Post","Story","Banner","Vdeo","Outro"]).map(L=>l.jsx("option",{value:L,children:L},L))})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Titulo"}),l.jsx("input",{value:I,onChange:L=>S(L.target.value),required:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem da Demanda"}),l.jsxs("select",{value:Ln,onChange:L=>Nn(L.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Origem"}),(g||sm).map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsx("input",{value:Bt,onChange:L=>$t(L.target.value),placeholder:"Ex: Black Friday"})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link"}),l.jsx("input",{type:"url",value:j,onChange:L=>N(L.target.value),placeholder:"https://"})]}),e==="create"?l.jsxs("div",{className:"row-2",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:L=>{const we=Array.from(L.target.files||[]).filter(ve=>(ve.size||0)<=1048576).slice(0,5),me=new Date().toISOString(),ge=we.map(ve=>new Promise(xe=>{const Ae=new FileReader;Ae.onload=()=>xe({name:ve.name,url:Ae.result,addedBy:d,addedAt:me}),Ae.readAsDataURL(ve)}));Promise.all(ge).then(ve=>{x(ve),$e(Ae=>[{tipo:"arquivo",autor:d,data:wn(),arquivos:ve},...Ae]);const xe=ve.map(Ae=>Ae.name).join(", ");oe(Ae=>[{texto:`Arquivos anexados: ${xe||ve.length}`,data:wn()},...Ae])})}})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:B,onChange:L=>H(L.target.value)})]})]}):l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:L=>{const we=Array.from(L.target.files||[]).filter(ve=>(ve.size||0)<=1048576).slice(0,5),me=new Date().toISOString(),ge=we.map(ve=>new Promise(xe=>{const Ae=new FileReader;Ae.onload=()=>xe({name:ve.name,url:Ae.result,addedBy:d,addedAt:me}),Ae.readAsDataURL(ve)}));Promise.all(ge).then(ve=>{x(ve),$e(Ae=>[{tipo:"arquivo",autor:d,data:wn(),arquivos:ve},...Ae]);const xe=ve.map(Ae=>Ae.name).join(", ");oe(Ae=>[{texto:`Arquivos anexados: ${xe||ve.length}`,data:wn()},...Ae])})}}),Array.isArray(D)&&D.length>0&&l.jsx("div",{className:"thumbs",children:D.map((L,re)=>l.jsxs("div",{className:"file-item",children:[l.jsx("img",{className:"file-thumb",src:L.url,alt:L.name}),l.jsxs("div",{className:"file-meta",children:[L.name,L.addedBy?`  ${L.addedBy}`:""]}),l.jsxs("div",{className:"file-actions",children:[l.jsx("a",{href:L.url,download:!0,target:"_blank",rel:"noreferrer",children:"Baixar"}),l.jsxs("label",{className:"replace-btn",children:["Substituir",l.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:we=>{var xe;const me=(xe=we.target.files)==null?void 0:xe[0];if(!me)return;const ge=new FileReader,ve=new Date().toISOString();ge.onload=()=>{const Ae={name:me.name,url:ge.result,addedBy:d,addedAt:ve};x(Un=>Un.map((tr,Ce)=>Ce===re?Ae:tr))},ge.readAsDataURL(me)}})]}),l.jsx("button",{type:"button",onClick:()=>x(we=>we.filter((me,ge)=>ge!==re)),children:"Excluir"})]})]},L.name+re))})]})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:8,className:"desc-input",value:$,onChange:L=>O(L.target.value)})]})]}),e!=="create"&&l.jsxs("div",{className:"modal-center",children:[l.jsxs("div",{className:"date-row",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsx("input",{type:"date",value:y,disabled:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsx("input",{type:"date",value:nt,disabled:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:B,onChange:L=>H(L.target.value)})]}),String((s==null?void 0:s.status)||"").toLowerCase().includes("feedback")&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Feedback"}),l.jsx("input",{type:"date",value:rt,onChange:L=>W(L.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:12,className:"desc-input",value:$,onChange:L=>O(L.target.value)})]})]}),e!=="create"&&l.jsx("div",{className:"modal-side",children:l.jsxs("div",{className:"activity",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Comentrios"}),l.jsx("input",{placeholder:"Escreva um comentrio use @ para mencionar",value:Ie,onChange:L=>Fe(L.target.value)}),Ie.trim().length>0&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:l.jsx("button",{className:"primary",type:"button",onClick:He,children:"Adicionar"})})]}),l.jsx("div",{className:"activity-list",children:(Z||[]).length===0?l.jsx("div",{className:"empty",children:"Sem comentrios"}):(Z||[]).map((L,re)=>l.jsx("div",{className:"activity-item",children:l.jsxs("div",{className:"activity-entry",children:[l.jsx("div",{className:"avatar",children:"V"}),l.jsxs("div",{className:"entry-content",children:[l.jsx("div",{className:"entry-title",children:l.jsxs("span",{children:[l.jsx("strong",{children:L.autor||""})," comentou: ",L.texto]})}),l.jsx("div",{className:"entry-time",children:qe(L.data)}),Array.isArray(L.mentions)&&L.mentions.length>0&&l.jsx("div",{className:"mentions-row",children:L.mentions.map(we=>l.jsxs("span",{className:`mention-pill ${String(d||"").toLowerCase()===String(we||"").toLowerCase()?"you":""}`,children:["@",we,String(d||"").toLowerCase()===String(we||"").toLowerCase()?"  Voc foi mencionado":""]},we))})]})]})},re))}),e!=="create"&&l.jsxs("div",{className:"timeline",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Linha do tempo"})}),["Criado","Em produo","Aguardando Feedback","Revisar","Aprovada","Concluda","Postado"].map(L=>{const re=(Ce,jt)=>{const ee=String(Ce.status_novo||Ce.para||""||"").toLowerCase();return jt==="Criado"?ee==="aberta":jt==="Em produo"?ee.includes("produ")||ee.includes("progresso"):jt==="Aguardando Feedback"?ee.includes("feedback"):jt==="Revisar"?ee.includes("revisar"):jt==="Aprovada"?ee.includes("aprov"):jt==="Concluda"?ee.includes("conclu"):!1};let me=L==="Postado"?(Ne||[]).filter(Ce=>Ce.tipo==="mlabs"):(Ne||[]).filter(Ce=>Ce.tipo==="status"&&re(Ce,L));if(L==="Concluda"&&(!me||me.length===0)&&String((s==null?void 0:s.status)||"").toLowerCase().includes("conclu")){const Ce=(s==null?void 0:s.finishedAt)||(s!=null&&s.dataConclusao?`${s.dataConclusao}T00:00:00Z`:null);me=[{tipo:"status",autor:(s==null?void 0:s.autor)||d,data_hora_evento:Ce,data:s==null?void 0:s.dataConclusao,status_novo:"Concluda",responsavel:(s==null?void 0:s.designer)||""}]}const ge=me&&me.length?me[me.length-1]:null,ve=(ge==null?void 0:ge.duracao_em_minutos)!=null?xy(ge.duracao_em_minutos):"",xe=ge!=null&&ge.data_hora_evento?qe(ge.data_hora_evento):qe(ge==null?void 0:ge.data),Ae=(ge==null?void 0:ge.responsavel)||(ge==null?void 0:ge.autor)||"",Un=me.length,tr=k===L;return l.jsxs("div",{className:"timeline-item",onClick:()=>F(Ce=>Ce===L?null:L),children:[l.jsx("div",{className:"timeline-left",children:l.jsx("span",{className:"timeline-icon",children:""})}),l.jsxs("div",{className:"timeline-body",children:[l.jsxs("div",{className:"timeline-title",children:[L,Un>1?`  ${Un}`:""]}),l.jsxs("div",{className:"timeline-meta",children:[xe,Ae?`  ${Ae}`:"",ve?`  ${ve}`:""]}),tr&&Un>0&&l.jsx("div",{className:"timeline-details",children:me.map((Ce,jt)=>l.jsxs("div",{className:"timeline-detail-row",children:[l.jsx("div",{children:Ce!=null&&Ce.data_hora_evento?qe(Ce.data_hora_evento):qe(Ce==null?void 0:Ce.data)}),l.jsx("div",{children:(Ce==null?void 0:Ce.responsavel)||(Ce==null?void 0:Ce.autor)||""}),l.jsx("div",{children:(Ce==null?void 0:Ce.duracao_em_minutos)!=null?xy(Ce.duracao_em_minutos):""})]},jt))})]})]},L)})]}),e!=="create"&&l.jsxs("div",{className:"ia-panel",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Previso de entrega por IA"})}),l.jsx("div",{className:"ia-text",children:(s==null?void 0:s.previsaoIA)||df([],s||{})})]})]})})]})}),l.jsxs("div",{className:"modal-actions",children:[e==="edit"&&f&&l.jsx("button",{className:"danger",type:"button",onClick:()=>{window.confirm("Confirmar excluso desta demanda?")&&(u(s.id),n())},children:"Excluir"}),l.jsx("button",{className:"primary",type:"submit",form:"modalForm",children:"Salvar"})]})]})}):null}function Gk({cadStatus:t,setCadStatus:e,cadTipos:n,setCadTipos:r,cadPlataformas:s,setCadPlataformas:i,cadOrigens:o,setCadOrigens:c,cadStatusColors:u,setCadStatusColors:d}){const[f,m]=Y.useState("tipo"),[g,w]=Y.useState(""),[P,b]=Y.useState("#f59e0b"),U=f==="status"?t:f==="tipo"?n:f==="plataforma"?s:o,A=N=>{f==="status"?e(N):f==="tipo"?r(N):f==="plataforma"?i(N):c(N)},I=async()=>{const N=g.trim();if(!N||U.includes(N))return;const V=[...U,N];if(A(V),w(""),f==="status"&&d(v=>({...v,[N]:P})),de){const v=f==="status"?"cad_status":f==="tipo"?"cad_tipos":f==="plataforma"?"cad_plataformas":"cad_origens";try{await os(it(de,v,N),{name:N,active:!0})}catch(y){try{window.alert(String((y==null?void 0:y.code)||(y==null?void 0:y.message)||"Falha ao gravar cadastro"))}catch{}}}},S=async N=>{const V=U.filter(v=>v!==N);if(A(V),de){const v=f==="status"?"cad_status":f==="tipo"?"cad_tipos":f==="plataforma"?"cad_plataformas":"cad_origens";try{await Zc(it(de,v,N))}catch(y){try{window.alert(String((y==null?void 0:y.code)||(y==null?void 0:y.message)||"Falha ao remover cadastro"))}catch{}}}},j=async N=>{if(!de)return;const V=f==="status"?"cad_status":f==="tipo"?"cad_tipos":f==="plataforma"?"cad_plataformas":"cad_origens";try{await os(it(de,V,N),{active:!1},{merge:!0})}catch(v){try{window.alert(String((v==null?void 0:v.code)||(v==null?void 0:v.message)||"Falha ao desativar cadastro"))}catch{}}};return l.jsxs("div",{className:"panel",children:[l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${f==="tipo"?"active":""}`,onClick:()=>m("tipo"),children:"Tipo"}),l.jsx("button",{className:`tab ${f==="origem"?"active":""}`,onClick:()=>m("origem"),children:"Origem"})]}),l.jsxs("div",{className:"form-row",style:{marginTop:10},children:[l.jsx("label",{children:f==="status"?"Novo Status":f==="tipo"?"Novo Tipo":"Nova Origem"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{value:g,onChange:N=>w(N.target.value)}),f==="status"&&l.jsx("input",{type:"color",value:P,onChange:N=>b(N.target.value),title:"Cor"}),l.jsx("button",{className:"primary",onClick:I,children:"Adicionar"})]})]}),l.jsx("div",{className:"form-row",style:{marginTop:10},children:l.jsx("select",{children:U.map(N=>l.jsx("option",{value:N,children:N},N))})}),l.jsx("div",{className:"list",style:{marginTop:12},children:U.length===0?l.jsx("div",{className:"empty",children:"Sem itens"}):U.map(N=>l.jsxs("div",{className:"list-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",border:"1px solid var(--border)",borderRadius:8,background:"#0b0e12",marginBottom:6},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[f==="status"&&l.jsx("span",{className:"status-dot",style:{background:u[N]||"#3b82f6"}}),l.jsx("div",{children:N})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[f==="status"&&l.jsx("input",{type:"color",value:u[N]||"#3b82f6",onChange:V=>d(v=>({...v,[N]:V.target.value}))}),l.jsx("button",{className:"icon",onClick:()=>j(N),title:"Desativar",children:l.jsx(Oe,{name:"minus"})}),l.jsx("button",{className:"icon",onClick:()=>S(N),children:l.jsx(Oe,{name:"trash"})})]})]},N))})]})}function Kk(){var tr,Ce,jt;const[t,e]=Y.useState(null),[n,r]=Y.useState([]),[s,i]=Y.useState(!0),[o,c]=Y.useState("table"),[u,d]=Y.useState(!1),[f,m]=Y.useState("dashboard"),[g,w]=Y.useState({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""}),[P,b]=Y.useState(!1),[U,A]=Y.useState(!1),[I,S]=Y.useState("create"),[j,N]=Y.useState(null),[V,v]=Y.useState(pT),[y,T]=Y.useState({autoPostMLabs:!1}),[C,R]=Y.useState(["Aberta","Em Progresso","Concluda"]),[D,x]=Y.useState(["Post","Story","Banner","Vdeo","Outro"]),[nt,Pt]=Y.useState([]),[rt,W]=Y.useState([]),[$,O]=Y.useState([]),[B,H]=Y.useState({Aberta:"#f59e0b","Em Progresso":"#3b82f6",Concluda:"#10b981"}),Z=Y.useMemo(()=>Array.from(new Set(n.map(ee=>ee.designer).filter(Boolean))).sort(),[n]),oe=Y.useMemo(()=>$.filter(ee=>(ee.cargo||"")==="Designer").map(ee=>ee.username).filter(Boolean).sort(),[$]),Ie=Y.useMemo(()=>Array.from(new Set([...oe,...Z])).sort(),[oe,Z]),Fe=Y.useMemo(()=>Array.from(new Set(n.map(ee=>ee.campanha).filter(Boolean))).sort(),[n]),Ne=(t==null?void 0:t.role)||"comum",$e=Y.useMemo(()=>$k(n,g),[n,g]),Ln=Y.useMemo(()=>{if(Ne==="admin"||Ne==="gerente")return $e;const ee=(t==null?void 0:t.username)||"";return $e.filter(K=>(K.designer||"")===ee)},[$e,Ne,t]),Nn=Y.useMemo(()=>Ne==="admin"||Ne==="gerente"?Ie:[t==null?void 0:t.username].filter(Boolean),[Ie,Ne,t]),Bt=Y.useMemo(()=>$e.slice().sort((ee,K)=>{const X=ee.dataCriacao||"",pe=(K.dataCriacao||"").localeCompare(X);if(pe!==0)return pe;const te=ee.id||0;return(K.id||0)-te}),[$e]),$t=Y.useMemo(()=>Ne==="admin"||Ne==="gerente"?Ie:[t==null?void 0:t.username].filter(Boolean),[Ie,Ne,t]),et=Y.useMemo(()=>Ne==="admin"||Ne==="gerente"?Bt:Bt.filter(ee=>(ee.designer||"")===((t==null?void 0:t.username)||"")),[Bt,Ne,t]);Y.useMemo(()=>et.filter(ee=>/revisar/i.test(String(ee.status||""))).length,[et]),Y.useMemo(()=>et.filter(ee=>/aprovada/i.test(String(ee.status||""))).length,[et]);const wr=Y.useMemo(()=>{const ee=et,K=X=>String(X||"").toLowerCase();return{Pendente:ee.filter(X=>im(X.status)).length,"Em produo":ee.filter(X=>om(X.status)).length,"Aguardando Feedback":ee.filter(X=>K(X.status).includes("feedback")).length,Aprovada:ee.filter(X=>K(X.status).includes("aprov")).length,Revisar:ee.filter(X=>K(X.status).includes("revisar")).length,Concluida:ee.filter(X=>K(X.status).includes("conclu")).length}},[et]),[ke,He]=Y.useState(10),[qe,Er]=Y.useState(new Date),[Yr,Tr]=Y.useState("status"),Ke=Y.useMemo(()=>(t==null?void 0:t.name)||(t==null?void 0:t.username)||"Voc",[t]),Zn=["dashboard","demandas","config","cadastros","relatorios","usuarios"],Dt=Y.useMemo(()=>{const ee=t==null?void 0:t.pages,K=ee?Zn.filter(X=>ee[X]===!0):["dashboard"];return K&&K.length?K:["dashboard"]},[t]);Y.useEffect(()=>{},[n,de]),Y.useEffect(()=>{de||i(!1)},[de]),Y.useEffect(()=>{},[de]),Y.useEffect(()=>{if(!de||!ar)return;const ee=XN(ar,async K=>{if(K){let X=null;try{const te=((K.email||"").split("@")[0]||"").trim();if(te){const Ee=await ny(it(de,"usuarios",te));Ee.exists()&&(X=Ee.data())}}catch{}if(!X)try{const pe=await ny(it(de,"usuarios",K.uid));pe.exists()&&(X=pe.data())}catch{}if(!X)try{const pe=Ld(an(de,"usuarios"),Fd("email","==",K.email||""));(await Ud(pe)).forEach(Ee=>{X||(X=Ee.data())})}catch{}const ae={username:(X==null?void 0:X.username)||(K.email||"").split("@")[0],name:(X==null?void 0:X.name)||K.displayName||K.email||"",role:(X==null?void 0:X.role)||"comum",pages:(X==null?void 0:X.pages)||null,actions:(X==null?void 0:X.actions)||null,cargo:(X==null?void 0:X.cargo)||""};e(ae),i(!1)}else e(null),i(!1)});return()=>{try{ee()}catch{}}},[de,ar]),Y.useEffect(()=>{Object.entries(V||{}).forEach(([ee,K])=>{try{document.documentElement.style.setProperty(`--${ee}`,K)}catch{}})},[V]),Y.useEffect(()=>{if(de&&t){let ee=null,K=null,X=null,ae=null,pe=null,te=null,Ee=null;try{const Q=(t==null?void 0:t.username)||"",ce=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="gerente",he=an(de,"demandas"),ue=ce?he:Ld(he,Fd("designer","==",Q));ee=ts(ue,Ue=>{const dt=[];Ue.forEach(ht=>dt.push({id:ht.id,...ht.data()})),r(dt),i(!1)},Ue=>{try{i(!1)}catch{}try{window.alert(String((Ue==null?void 0:Ue.code)||(Ue==null?void 0:Ue.message)||"Falha ao carregar demandas"))}catch{}})}catch{}try{const Q=(t==null?void 0:t.username)||(t==null?void 0:t.id)||"";Q&&(Ee=ts(it(de,"usuarios",Q),ce=>{const he=ce.exists()?ce.data():null;he&&e(ue=>({...ue,pages:he.pages||ue.pages,actions:he.actions||ue.actions,cargo:he.cargo||ue.cargo,name:he.name||ue.name,role:he.role||ue.role}))},ce=>{try{window.alert(String((ce==null?void 0:ce.code)||(ce==null?void 0:ce.message)||"Falha ao sincronizar usurio"))}catch{}}))}catch{}try{K=ts(an(de,"cad_status"),Q=>{const ce=[];Q.forEach(he=>{var ue;return ce.push(((ue=he.data())==null?void 0:ue.name)||he.id)}),R(ce)},Q=>{try{window.alert(String((Q==null?void 0:Q.code)||(Q==null?void 0:Q.message)||"Falha ao carregar status"))}catch{}})}catch{}try{X=ts(an(de,"cad_tipos"),Q=>{const ce=[];Q.forEach(he=>{const ue=he.data();(ue==null?void 0:ue.active)!==!1&&ce.push((ue==null?void 0:ue.name)||he.id)}),x(ce)},Q=>{try{window.alert(String((Q==null?void 0:Q.code)||(Q==null?void 0:Q.message)||"Falha ao carregar tipos"))}catch{}})}catch{}try{te=ts(an(de,"usuarios"),Q=>{const ce=[];Q.forEach(he=>ce.push({id:he.id,...he.data()})),O(ce)},Q=>{try{window.alert(String((Q==null?void 0:Q.code)||(Q==null?void 0:Q.message)||"Falha ao carregar usurios"))}catch{}})}catch{}try{ae=ts(an(de,"cad_plataformas"),Q=>{const ce=[];Q.forEach(he=>{const ue=he.data();(ue==null?void 0:ue.active)!==!1&&ce.push((ue==null?void 0:ue.name)||he.id)}),Pt(ce)},Q=>{try{window.alert(String((Q==null?void 0:Q.code)||(Q==null?void 0:Q.message)||"Falha ao carregar plataformas"))}catch{}})}catch{}try{pe=ts(an(de,"cad_origens"),Q=>{const ce=[];Q.forEach(he=>{const ue=he.data();(ue==null?void 0:ue.active)!==!1&&ce.push((ue==null?void 0:ue.name)||he.id)}),W(ce)},Q=>{try{window.alert(String((Q==null?void 0:Q.code)||(Q==null?void 0:Q.message)||"Falha ao carregar origens"))}catch{}})}catch{}return()=>{try{ee&&ee()}catch{}try{K&&K()}catch{}try{X&&X()}catch{}try{te&&te()}catch{}try{ae&&ae()}catch{}try{pe&&pe()}catch{}try{Ee&&Ee()}catch{}}}},[de,t]),Y.useEffect(()=>{t&&!Dt.includes(f)&&m(Dt[0]||"dashboard"),!t&&f!=="dashboard"&&f!=="demandas"&&f!=="config"&&f!=="cadastros"&&f!=="relatorios"&&f!=="usuarios"&&m("dashboard")},[t,Dt,f]);const er=async()=>{try{await JN(ar)}catch{}e(null)},Fn=async(ee,K)=>{var pe;const X=String(ee||"").trim();if(!X||!K)throw new Error("Credenciais ausentes");if(!ar||!de)throw new Error("Firebase no configurado");let ae=X;if(!/@/.test(X))try{const te=Ld(an(de,"usuarios"),Fd("username","==",X)),Ee=await Ud(te);let Q=null;Ee.forEach(ce=>{const he=ce.data();!Q&&(he!=null&&he.email)&&(Q=he.email)}),ae=Q||`${X}@betaki.bet.br`}catch{ae=`${X}@betaki.bet.br`}try{await GN(ar,ae,K)}catch(te){const Ee=(te==null?void 0:te.code)||"";try{if(Ee==="auth/invalid-credential"||Ee==="auth/user-not-found"){const Q=await ZE(ar,ae,K),ce=((pe=Q==null?void 0:Q.user)==null?void 0:pe.email)||ae,he=X;try{await os(it(de,"usuarios",he),{username:X,email:ce},{merge:!0})}catch{}}else throw te}catch(Q){throw Q}}},E=((tr=t==null?void 0:t.actions)==null?void 0:tr.criar)!==!1,k=((Ce=t==null?void 0:t.actions)==null?void 0:Ce.excluir)!==!1,F=((jt=t==null?void 0:t.actions)==null?void 0:jt.visualizar)!==!1,L=()=>{!t||!E||(S("create"),N(null),A(!0))},re=ee=>{!t||!F||(S("edit"),N(ee),A(!0))},we=async ee=>{const K={...ee,status:"Aberta",dataSolicitacao:wn(),dataCriacao:wn()};if(de)try{await Wl(an(de,"demandas"),{...K,createdAt:ry()})}catch{}},me=async(ee,K)=>{const X=wn();r(pe=>pe.map(te=>{if(String(te.id)!==String(ee))return te;const Ee=te.status!==K,Q=String(te.status||"").toLowerCase().includes("produ")||String(te.status||"").toLowerCase().includes("progresso"),ce=String(K||"").toLowerCase().includes("produ")||String(K||"").toLowerCase().includes("progresso"),he=Date.now();let ue=Number(te.tempoProducaoMs||0),Ue=te.startedAt||null,dt=te.finishedAt||null;const ht=String(K||"").toLowerCase().includes("feedback"),en=String(te.status||"").toLowerCase().includes("feedback");let bt=te.slaStartAt||null,It=te.slaStopAt||null,yt=Number(te.slaPauseMs||0),St=te.pauseStartedAt||null;if(Ee){if(Q&&!ce&&Ue){const Qe=Date.parse(Ue);isNaN(Qe)||(ue+=Math.max(0,he-Qe)),Ue=null}if(!Q&&ce&&!Ue&&(Ue=new Date(he).toISOString(),bt||(bt=Ue)),!en&&ht&&!St&&(St=new Date(he).toISOString()),en&&!ht&&St){const Qe=Date.parse(St);isNaN(Qe)||(yt+=Math.max(0,he-Qe)),St=null}}const on=String(K||"").toLowerCase().includes("revisar"),nr=Ee&&on?(te.revisoes||0)+1:te.revisoes||0,rr=String(K||"").toLowerCase().includes("concluida")||K==="Concluda",zn=rr?te.dataConclusao||X:te.dataConclusao,vn=rr?te.dataCriacao||X:te.dataCriacao;Ee&&rr&&(dt=new Date(he).toISOString(),It=dt);const st=(te.historico||[]).find(Qe=>Qe.tipo==="status"),Ir=st!=null&&st.data_hora_evento?Date.parse(st.data_hora_evento):st!=null&&st.data?Date.parse(`${st.data}T00:00:00Z`):null,Sr=new Date(he).toISOString(),Ar=Ee&&Ir?Math.round((he-Ir)/6e4):null,Co=Ee?{tipo:"status",autor:Ke,data:X,data_hora_evento:Sr,status_anterior:te.status,status_novo:K,duracao_em_minutos:Ar,responsavel:Ke,id_demanda:te.id,de:te.status,para:K}:null,xo=(()=>{if(!te.prazo)return null;const[Qe,Ht,$s]=String(te.prazo).split("-").map(Number),No=new Date(Qe,(Ht||1)-1,$s||1);No.setHours(0,0,0,0);const hl=new Date;return hl.setHours(0,0,0,0),No-hl})(),Qu=!!(te.prazo&&!rr&&typeof xo=="number"&&xo<=864e5),Bs=Ee&&Qu?{tipo:"alerta",autor:Ke,data:X,data_hora_evento:Sr,mensagem:"Prazo menor que 24h",id_demanda:te.id}:null,Si=!!(Ee&&(String(K||"").toLowerCase().includes("aprov")||String(K||"").toLowerCase().includes("conclu"))&&y.autoPostMLabs)?{tipo:"mlabs",autor:Ke,data:X,data_hora_evento:Sr,mensagem:"Postagem agendada via mLabs",id_demanda:te.id}:null,Cr=Co?[Co,...Bs?[Bs]:[],...Si?[Si]:[],...te.historico||[]]:te.historico||[],xr=Ee&&ht&&!te.dataFeedback?X:te.dataFeedback,Po=(Cr||[]).filter(Qe=>Qe.tipo==="status"&&Qe.duracao_em_minutos!=null).reduce((Qe,Ht)=>Qe+(Ht.duracao_em_minutos||0),0),Xu=(()=>{const Qe={};return(Cr||[]).forEach(Ht=>{if(Ht.tipo==="status"&&Ht.duracao_em_minutos!=null){const $s=Ht.status_anterior||Ht.de||"Aberta";Qe[$s]=(Qe[$s]||0)+(Ht.duracao_em_minutos||0)}}),Qe})(),cl=(()=>{if(!bt)return 0;const Qe=It?Date.parse(It):he,Ht=Date.parse(bt);return isNaN(Ht)||isNaN(Qe)?0:Math.max(0,Qe-Ht-yt)})(),ul=(()=>{if(!zn||!te.prazo)return null;try{return String(zn)<=String(te.prazo)}catch{return null}})(),dl=df(pe,{...te});return{...te,status:K,revisoes:nr,dataConclusao:zn,dataCriacao:vn,dataFeedback:xr,historico:Cr,tempoProducaoMs:ue,startedAt:Ue,finishedAt:dt,previsaoIA:dl,fxBounceAt:Ee?he:te.fxBounceAt||0,slaStartAt:bt,slaStopAt:It,slaPauseMs:yt,pauseStartedAt:St,slaNetMs:cl,slaOk:ul,leadTotalMin:Po,leadPorFase:Xu}}));const ae=n.find(pe=>String(pe.id)===String(ee));if(de&&ae)try{const pe=(ae.historico||[]).find(bt=>bt.tipo==="status"),te=pe!=null&&pe.data_hora_evento?Date.parse(pe.data_hora_evento):pe!=null&&pe.data?Date.parse(`${pe.data}T00:00:00Z`):null,Ee=new Date().toISOString(),Q=ae.status!==K&&te?Math.round((Date.now()-te)/6e4):null,ce=(()=>{if(!ae.prazo)return null;const[bt,It,yt]=String(ae.prazo).split("-").map(Number),St=new Date(bt,(It||1)-1,yt||1);St.setHours(0,0,0,0);const on=new Date;return on.setHours(0,0,0,0),St-on})(),he=!!(ae.prazo&&!(String(K||"").toLowerCase().includes("concluida")||K==="Concluda")&&typeof ce=="number"&&ce<=864e5),ue={tipo:"status",autor:Ke,data:X,data_hora_evento:Ee,status_anterior:ae.status,status_novo:K,duracao_em_minutos:Q,responsavel:Ke,id_demanda:ae.id,de:ae.status,para:K},Ue=he?{tipo:"alerta",autor:Ke,data:X,data_hora_evento:Ee,mensagem:"Prazo menor que 24h",id_demanda:ae.id}:null,ht=!!((String(K||"").toLowerCase().includes("aprov")||String(K||"").toLowerCase().includes("conclu"))&&y.autoPostMLabs)?{tipo:"mlabs",autor:Ke,data:X,data_hora_evento:Ee,mensagem:"Postagem agendada via mLabs",id_demanda:ae.id}:null,en=[ue,...Ue?[Ue]:[],...ht?[ht]:[],...ae.historico||[]];await Zs(it(de,"demandas",String(ee)),{...ae,status:K,dataCriacao:String(K||"").toLowerCase().includes("concluida")||K==="Concluda"?ae.dataCriacao||X:ae.dataCriacao,dataConclusao:String(K||"").toLowerCase().includes("concluida")||K==="Concluda"?ae.dataConclusao||X:ae.dataConclusao,dataFeedback:ae.status!==K&&String(K||"").toLowerCase().includes("feedback")&&!ae.dataFeedback?X:ae.dataFeedback,revisoes:(ae.revisoes||0)+(ae.status!==K&&String(K||"").toLowerCase().includes("revisar")?1:0),historico:en,tempoProducaoMs:ae.tempoProducaoMs,startedAt:ae.startedAt,finishedAt:String(K||"").toLowerCase().includes("concluida")||K==="Concluda"?new Date().toISOString():ae.finishedAt,slaStartAt:ae.slaStartAt,slaStopAt:String(K||"").toLowerCase().includes("concluida")||K==="Concluda"?new Date().toISOString():ae.slaStopAt,slaPauseMs:ae.slaPauseMs,pauseStartedAt:ae.pauseStartedAt,slaNetMs:ae.slaNetMs,slaOk:ae.slaOk,leadTotalMin:ae.leadTotalMin,leadPorFase:ae.leadPorFase});try{await Wl(an(de,"historico_status"),ue)}catch{}}catch{}},ge=async(ee,K,X)=>{r(pe=>pe.map(te=>{if(String(te.id)!==String(ee))return te;const Ee=[K,...te.comentarios||[]],Q=Array.isArray(K.mentions)&&K.mentions.length>0?{tipo:"notificacao",autor:Ke,data:K.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:K.mentions,id_demanda:te.id}:null,ce=Q?[Q,X,...te.historico||[]]:[X,...te.historico||[]];return{...te,comentarios:Ee,historico:ce,fxSavedAt:Date.now()}}));const ae=n.find(pe=>String(pe.id)===String(ee));if(de&&ae)try{const pe=Array.isArray(K.mentions)&&K.mentions.length>0?{tipo:"notificacao",autor:Ke,data:K.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:K.mentions,id_demanda:ae.id}:null,te=pe?[pe,X,...ae.historico||[]]:[X,...ae.historico||[]];await Zs(it(de,"demandas",String(ee)),{comentarios:[K,...ae.comentarios||[]],historico:te})}catch{}},ve=async ee=>{if(r(K=>K.map(X=>X.id===ee?{...X,fxDeleting:!0}:X)),setTimeout(()=>{r(K=>K.filter(X=>X.id!==ee))},180),de)try{await Zc(it(de,"demandas",String(ee)))}catch{}},xe=async(ee,K)=>{const X=wn();let ae=null;r(te=>te.map(Ee=>{if(Ee.id!==ee)return Ee;if((Ee.historico||[]).some(ue=>ue.tipo==="alerta"&&ue.data===X&&ue.mensagem===K))return ae=Ee,Ee;const ce={tipo:"alerta",autor:Ke,data:X,data_hora_evento:new Date().toISOString(),mensagem:K,id_demanda:Ee.id},he={...Ee,historico:[ce,...Ee.historico||[]]};return ae=he,he}));const pe=ae||n.find(te=>te.id===ee);if(pe&&de)try{const te={tipo:"alerta",autor:Ke,data:X,data_hora_evento:new Date().toISOString(),mensagem:K,id_demanda:pe.id};await Zs(it(de,"demandas",String(ee)),{...pe,historico:[te,...pe.historico||[]]})}catch{}};Y.useEffect(()=>{const ee=setInterval(()=>{wn();const K=n.filter(Q=>!Mr(Q.status)),X=K.reduce((Q,ce)=>{const he=ce.designer||"";return Q[he]=(Q[he]||0)+1,Q},{});K.forEach(Q=>{if(Q.prazo)try{const[dt,ht,en]=String(Q.prazo).split("-").map(Number),bt=new Date(dt,(ht||1)-1,en||1);bt.setHours(0,0,0,0);const It=new Date;It.setHours(0,0,0,0),bt-It<=864e5&&xe(Q.id,"Prazo menor que 24h")}catch{}const ce=(Q.historico||[]).find(dt=>dt.tipo==="status");if(ce!=null&&ce.data_hora_evento||ce!=null&&ce.data){const dt=ce.data_hora_evento?Date.parse(ce.data_hora_evento):Date.parse(`${ce.data}T00:00:00Z`);!isNaN(dt)&&Date.now()-dt>=1728e5&&xe(Q.id,"Demanda estagnada h 48h")}const he=Q.designer||"",ue=X[he]||0,Ue=Math.min(100,Math.round(ue/4*100));Ue>=100?xe(Q.id,`Capacidade 100% para ${he}  Risco mximo`):Ue>=85&&xe(Q.id,`Designer ${he} est com ${Ue}% da capacidade utilizada. Risco de atraso.`),(Q.revisoes||0)>=2&&xe(Q.id,"Retrabalho acima do limite")});const ae=n.filter(Q=>Mr(Q.status)),pe=ae.filter(Q=>Q.prazo&&Q.dataConclusao&&Q.dataConclusao<=Q.prazo).length,te=ae.filter(Q=>Q.prazo&&Q.dataConclusao).length;Math.round(100*(pe/Math.max(1,te)))<80&&K.forEach(Q=>xe(Q.id,"SLA geral abaixo de 80%"))},6e4);return()=>clearInterval(ee)},[n]);const Ae=async({designer:ee,tipoMidia:K,titulo:X,link:ae,arquivoNome:pe,dataSolic:te,dataCriacao:Ee,dataFeedback:Q,plataforma:ce,arquivos:he,descricao:ue,prazo:Ue,comentarios:dt,historico:ht,origem:en,campanha:bt})=>{const It=async()=>{if(de){try{K&&await os(it(de,"cad_tipos",String(K)),{name:K,active:!0},{merge:!0})}catch{}try{ce&&await os(it(de,"cad_plataformas",String(ce)),{name:ce,active:!0},{merge:!0})}catch{}try{en&&await os(it(de,"cad_origens",String(en)),{name:en,active:!0},{merge:!0})}catch{}try{if(ht&&Array.isArray(ht)){const yt=ht[0],St=(yt==null?void 0:yt.para)||(yt==null?void 0:yt.de)||"Aberta";St&&await os(it(de,"cad_status",String(St)),{name:St,active:!0},{merge:!0})}}catch{}}};if(I==="edit"&&j){const yt={...j,designer:ee,tipoMidia:K,titulo:X,link:ae,descricao:ue,comentarios:dt??j.comentarios,historico:ht??j.historico,arquivos:he&&he.length?he:j.arquivos,arquivoNome:pe||j.arquivoNome,dataSolicitacao:te||j.dataSolicitacao,dataCriacao:Ee||j.dataCriacao,dataFeedback:Q||j.dataFeedback,plataforma:ce,prazo:Ue,origem:en,campanha:bt},St={...yt,fxSavedAt:Date.now()};if(r(on=>on.map(nr=>nr.id===j.id?St:nr)),de)try{await Zs(it(de,"demandas",String(j.id)),yt)}catch{}await It()}else{const yt=wn(),St=new Date().toISOString(),on={tipo:"status",autor:Ke,data:yt,data_hora_evento:St,status_anterior:"",status_novo:"Aberta",duracao_em_minutos:null,responsavel:Ke,id_demanda:null,de:"",para:"Aberta"},nr=(t==null?void 0:t.username)||ee,rr=df(n,{designer:nr,tipoMidia:K,plataforma:ce,origem:en}),zn=`tmp-${Date.now()}`,vn={id:zn,designer:nr,tipoMidia:K,titulo:X,link:ae,descricao:ue,comentarios:[],historico:[on],arquivos:he||[],arquivoNome:pe,plataforma:ce,origem:en,campanha:bt,dataSolicitacao:te,dataCriacao:yt,dataFeedback:void 0,status:"Aberta",prazo:Ue,tempoProducaoMs:0,startedAt:null,finishedAt:null,revisoes:0,createdBy:Ke,previsaoIA:rr,slaStartAt:null,slaStopAt:null,slaPauseMs:0,pauseStartedAt:null,slaNetMs:0,slaOk:null,leadTotalMin:0,leadPorFase:{}};if(r(st=>[vn,...st]),de)try{const st=await Wl(an(de,"demandas"),{...vn,id:void 0,createdAt:ry()});r(Sr=>Sr.map(Ar=>Ar.id===zn?{...Ar,id:st.id}:Ar));const Ir={...on,id_demanda:st.id};try{await Wl(an(de,"historico_status"),Ir)}catch{}}catch(st){const Ir=(st==null?void 0:st.code)||(st==null?void 0:st.message)||"Falha ao gravar no Firebase";try{window.alert(String(Ir))}catch{}}await It()}A(!1)},Un=async()=>{if(window.confirm("Confirmar: apagar TODAS as demandas e limpar relatrios?")){r([]);try{w({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""})}catch{}if(de)try{const ee=await Ud(an(de,"demandas")),K=[];ee.forEach(X=>K.push(Zc(it(de,"demandas",X.id)))),K.length&&await Promise.all(K)}catch{}}};return l.jsxs("div",{className:"layout",children:[t?l.jsx(Qk,{route:f,setRoute:m,allowedRoutes:Dt}):null,l.jsx("div",{className:`content ${t?"":"no-sidebar"} page`,children:l.jsxs("div",{className:"app",children:[t?l.jsx(Fk,{onNew:L,view:o,setView:c,showNew:!!t,user:t,onLogout:er,setRoute:m}):null,!t&&l.jsx(zk,{onLogin:Fn}),t&&f==="dashboard"&&Dt.includes("dashboard")&&l.jsx(Zk,{demandas:n,items:Ln,designers:Nn,setView:c,onEdit:re,onStatus:me,cadStatus:C,onDelete:ve,onDuplicate:we,compact:u,calRef:qe,setCalRef:Er,loading:s}),t&&f==="demandas"&&Dt.includes("demandas")&&l.jsxs("div",{className:"demandas-layout",children:[l.jsx("div",{className:"sidebar-col",children:l.jsx(Jk,{filtros:g,setFiltros:w,designers:$t,showSearch:!1,statusCounts:wr})}),l.jsxs("div",{className:"content-col",children:[l.jsxs("div",{className:"top-search",children:[l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:g.q||"",onChange:ee=>w(K=>({...K,q:ee.target.value}))}),l.jsxs("button",{className:"primary",onClick:L,disabled:!E,children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto"},children:l.jsx(Uk,{view:o,setView:c})})]}),o==="table"&&l.jsx("div",{className:"table-scroll",children:l.jsx(Hk,{items:et.slice(0,ke),onEdit:re,onStatus:me,cadStatus:C,onDelete:ve,onDuplicate:we,hasMore:et.length>ke,showMore:()=>He(ee=>Math.min(ee+10,et.length)),canCollapse:ke>10,showLess:()=>He(10),shown:Math.min(ke,et.length),total:et.length,compact:u,canEdit:!!t,loading:s})}),o==="calendar"&&l.jsx(qk,{items:et,refDate:qe}),l.jsx(Wk,{open:U,mode:I,onClose:()=>A(!1),onSubmit:Ae,initial:j,cadTipos:D,designers:$t,cadPlataformas:nt,onDelete:ve,userLabel:Ke,canDelete:k,onAddComment:ge,cadOrigens:rt,currentUser:(t==null?void 0:t.username)||""}),l.jsx(Bk,{open:P,filtros:g,setFiltros:w,designers:$t,onClose:()=>b(!1),cadStatus:C,cadTipos:D,origens:rt,campanhas:Fe})]})]}),t&&f==="config"&&Dt.includes("config")&&l.jsx(Xk,{themeVars:V,setThemeVars:v,onReset:Un,appSettings:y,setAppSettings:T}),t&&f==="cadastros"&&Dt.includes("cadastros")&&l.jsx(Gk,{cadStatus:C,setCadStatus:R,cadTipos:D,setCadTipos:x,cadPlataformas:nt,setCadPlataformas:Pt,cadOrigens:rt,setCadOrigens:W,cadStatusColors:B,setCadStatusColors:H}),t&&f==="relatorios"&&Dt.includes("relatorios")&&l.jsx(eD,{demandas:n,items:et,designers:$t,filtros:g,setFiltros:w,loading:s}),t&&f==="usuarios"&&Dt.includes("usuarios")&&l.jsx(Yk,{role:Ne})]})})]})}function Qk({route:t,setRoute:e,allowedRoutes:n}){return l.jsx("aside",{className:"sidebar",children:l.jsx("nav",{children:l.jsx("ul",{className:"nav-list",children:n.map(r=>l.jsx("li",{children:l.jsxs("a",{href:"#",className:`nav-link ${t===r?"active":""}`,onClick:s=>{s.preventDefault(),e(r)},children:[l.jsx("span",{className:"nav-ico",children:r==="dashboard"?l.jsx(Oe,{name:"dashboard"}):r==="demandas"?l.jsx(Oe,{name:"demandas"}):r==="config"?l.jsx(Oe,{name:"config"}):r==="cadastros"?l.jsx(Oe,{name:"cadastros"}):r==="relatorios"?l.jsx(Oe,{name:"relatorios"}):l.jsx(Oe,{name:"usuarios"})}),l.jsx("span",{children:r==="dashboard"?"Dashboard":r==="demandas"?"Demandas":r==="config"?"Configuraes":r==="cadastros"?"Cadastros":r==="relatorios"?"Relatrios":"Usurios"})]})},r))})})})}function Yk({users:t,onCreate:e,onDelete:n,onUpdate:r,role:s}){const[i,o]=Y.useState(""),[c,u]=Y.useState(""),[d,f]=Y.useState(""),[m,g]=Y.useState(""),[w,P]=Y.useState("comum"),[b,U]=Y.useState("Designer"),[A,I]=Y.useState([]),S=Y.useMemo(()=>Iy?jk(Iy):null,[]),[j,N]=Y.useState({});Y.useEffect(()=>{if(de){const W=ts(an(de,"usuarios"),$=>{const O=[];$.forEach(B=>O.push({id:B.id,...B.data()})),I(O)});return()=>{try{W()}catch{}}}else I([])},[]);const[V,v]=Y.useState({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),[y,T]=Y.useState({criar:!0,excluir:!0,visualizar:!0}),C=(W,$)=>W(O=>({...O,[$]:!O[$]})),R=async()=>{const W=i.trim(),$=m.trim()||`${W}@betaki.bet.br`;if(!W||!d)return;const O={username:W,name:c||W,role:w,cargo:b,pages:V,actions:y,email:$};if(de)try{try{await ZE(ar,$,d)}catch(B){if((B==null?void 0:B.code)!=="auth/email-already-in-use")throw B}await os(it(de,"usuarios",W),O)}catch{}o(""),u(""),f(""),g(""),P("comum"),U("Designer"),v({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),T({criar:!0,excluir:!0,visualizar:!0})},D=async W=>{if((W.username||W.id)!=="admin"&&de)try{await Zc(it(de,"usuarios",W.username||W.id)),I($=>$.filter(O=>(O.username||O.id)!==(W.username||W.id)))}catch{}},x=async W=>{const $=String(j[W.username||W.id]||"").trim();if($&&S)try{await Ok(S,"updateUserPassword")({username:W.username||W.id,password:$,email:W.email||void 0}),N(B=>({...B,[W.username||W.id]:""}));try{window.alert("Senha atualizada com sucesso!")}catch{}}catch(O){try{window.alert(String((O==null?void 0:O.code)||(O==null?void 0:O.message)||"Falha ao atualizar senha"))}catch{}}},nt=async(W,$)=>{const O=W.pages||{},B={pages:{...O,[$]:!O[$]}};if(de)try{await Zs(it(de,"usuarios",W.username||W.id),B),I(H=>H.map(Z=>Z.username===W.username||Z.id===W.id?{...Z,...B}:Z))}catch{}},Pt=async(W,$)=>{const O=W.actions||{},B={actions:{...O,[$]:!O[$]}};if(de)try{await Zs(it(de,"usuarios",W.username||W.id),B),I(H=>H.map(Z=>Z.username===W.username||Z.id===W.id?{...Z,...B}:Z))}catch{}},rt=async(W,$)=>{const O={cargo:$};if(de)try{await Zs(it(de,"usuarios",W.username||W.id),O),I(B=>B.map(H=>H.username===W.username||H.id===W.id?{...H,...O}:H))}catch{}};return l.jsxs("div",{className:"panel users-panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Usurios"})}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Usurio"}),l.jsx("input",{value:i,onChange:W=>o(W.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Nome"}),l.jsx("input",{value:c,onChange:W=>u(W.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Senha"}),l.jsx("input",{type:"password",value:d,onChange:W=>f(W.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",value:m,onChange:W=>g(W.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Perfil"}),l.jsxs("select",{value:w,onChange:W=>P(W.target.value),children:[l.jsx("option",{value:"comum",children:"Comum"}),l.jsx("option",{value:"gerente",children:"Gerente"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Cargo"}),l.jsxs("select",{value:b,onChange:W=>U(W.target.value),children:[l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Pginas"}),l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(W=>l.jsxs("button",{className:`btn-md ${V[W]?"active":""}`,type:"button",onClick:()=>C(v,W),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:W==="dashboard"?"dashboard":W==="demandas"?"demandas":W==="config"?"config":W==="cadastros"?"cadastros":W==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:W==="dashboard"?"Dashboard":W==="demandas"?"Demandas":W==="config"?"Configuraes":W==="cadastros"?"Cadastros":W==="relatorios"?"Relatrios":"Usurios"})]},W))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Aes"}),l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([W,$,O])=>l.jsxs("button",{className:`btn-md ${y[W]?"active":""}`,type:"button",onClick:()=>C(T,W),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:$})}),l.jsx("span",{children:O})]},W))})]}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"primary",type:"button",onClick:R,children:"Criar usurio"})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usurio"}),l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Perfil"}),l.jsx("th",{children:"Cargo"}),l.jsx("th",{children:"Pginas"}),l.jsx("th",{children:"Aes"}),l.jsx("th",{children:"Senha"}),l.jsx("th",{children:"Gerenciar"})]})}),l.jsx("tbody",{children:(A||[]).map(W=>l.jsxs("tr",{children:[l.jsx("td",{children:W.username}),l.jsx("td",{children:W.name||W.username}),l.jsx("td",{children:W.role||"comum"}),l.jsx("td",{children:l.jsxs("select",{value:W.cargo||"",onChange:$=>rt(W,$.target.value),children:[l.jsx("option",{value:"",children:"Selecione"}),l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map($=>{var O;return l.jsxs("button",{className:`btn-md ${((O=W.pages)==null?void 0:O[$])===!0?"active":""}`,type:"button",onClick:()=>nt(W,$),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:$==="dashboard"?"dashboard":$==="demandas"?"demandas":$==="config"?"config":$==="cadastros"?"cadastros":$==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:$==="dashboard"?"Dashboard":$==="demandas"?"Demandas":$==="config"?"Configuraes":$==="cadastros"?"Cadastros":$==="relatorios"?"Relatrios":"Usurios"})]},$)})})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([$,O,B])=>{var H;return l.jsxs("button",{className:`btn-md ${((H=W.actions)==null?void 0:H[$])===!0?"active":""}`,type:"button",onClick:()=>Pt(W,$),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:O})}),l.jsx("span",{children:B})]},$)})})}),l.jsx("td",{children:l.jsxs("div",{className:"form-row",children:[l.jsx("input",{type:"password",placeholder:"Nova senha",value:j[W.username||W.id]||"",onChange:$=>N(O=>({...O,[W.username||W.id]:$.target.value}))}),l.jsx("button",{className:"primary",type:"button",onClick:()=>x(W),children:"Salvar"})]})}),l.jsx("td",{children:l.jsxs("button",{className:"icon",onClick:()=>D(W),disabled:W.username==="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"trash"})}),l.jsx("span",{children:"Excluir"})]})})]},W.username))})]})]})}function Xk({themeVars:t,setThemeVars:e,onReset:n,appSettings:r,setAppSettings:s}){const[i,o]=Y.useState(t||{}),[c,u]=Y.useState(""),[d,f]=Y.useState("");Y.useEffect(()=>{o(t||{})},[t]);const m=v=>/^#[0-9a-fA-F]{6}$/.test(v||""),g=v=>/^#[0-9a-fA-F]{8}$/.test(v||""),w=v=>/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0|1|0?\.\d+)\)$/.exec(v||""),P=v=>Math.max(0,Math.min(255,v|0)).toString(16).padStart(2,"0"),b=v=>({r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16)}),U=v=>{if(m(v))return{fmt:"hex6",base:v,a:1};if(g(v))return{fmt:"hex8",base:"#"+v.slice(1,7),a:parseInt(v.slice(7,9),16)/255};const y=w(v);return y?{fmt:"rgba",base:"#"+P(+y[1])+P(+y[2])+P(+y[3]),a:parseFloat(y[4])}:{fmt:"other",base:v,a:1}},A=(v,y,T)=>{const C=v==="hover"?"rgba":v==="border"||v==="btnBorder"?"hex8":"hex6";if(C==="hex6"||T>=1)return y;if(C==="hex8")return y+P(Math.round(T*255));const{r:R,g:D,b:x}=b(y);return`rgba(${R},${D},${x},${T})`},I=(v,y)=>{const T={...i,[v]:y};o(T),e(T)},S=(v,y)=>{const T=U(i[v]||""),C=Math.max(0,Math.min(100,Number(y)||0))/100,R=A(v,T.base,C);I(v,R)},j=()=>{if(!c)return;const v={...i,[c]:d||""};o(v),e(v),u(""),f("")},N=()=>e(pT),V=[{title:"Base",keys:["bg","panel","accent"]},{title:"Texto",keys:["text","muted"]},{title:"Traado",keys:["border"]},{title:"Botes",keys:["btnBg","btnText","btnHoverBg","btnBorder"]},{title:"Hover/Efeitos",keys:["hover","shadow"]},{title:"Extras",keys:["green","yellow","red","chart"]}];return l.jsxs("div",{className:"panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Tema"})}),l.jsxs("div",{className:"config-grid",children:[V.map(v=>l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"title",children:v.title}),v.keys.map(y=>{const T=i[y]||"",C=U(T),R=C.fmt!=="other",D=y==="hover"||y==="border"||y==="btnBorder";return l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:y}),l.jsxs("div",{className:"color-row",children:[R?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"color",value:C.base,onChange:x=>I(y,A(y,x.target.value,C.a))}),D&&l.jsx("input",{className:"alpha",type:"range",min:"0",max:"100",step:"1",value:Math.round(C.a*100),onChange:x=>S(y,x.target.value),title:`Alpha ${Math.round(C.a*100)}%`})]}):l.jsx("input",{value:T,onChange:x=>I(y,x.target.value)}),l.jsx("div",{className:"swatch",style:{background:T}})]})]},y)})]},v.title)),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Adicionar varivel"}),l.jsxs("div",{className:"color-row",children:[l.jsx("input",{placeholder:"nome",value:c,onChange:v=>u(v.target.value)}),l.jsx("input",{placeholder:"valor",value:d,onChange:v=>f(v.target.value)}),l.jsx("button",{className:"primary",type:"button",onClick:j,children:"Adicionar"})]})]}),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Integraes"}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Autopost via mLabs"}),l.jsx("input",{type:"checkbox",checked:!!r.autoPostMLabs,onChange:v=>s(y=>({...y,autoPostMLabs:v.target.checked}))})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"danger",type:"button",onClick:n,children:"Resetar sistema"}),l.jsx("button",{className:"primary",type:"button",onClick:N,children:"Restaurar padro"})]})]})}function Jk({filtros:t,setFiltros:e,designers:n,showSearch:r,statusCounts:s}){const[i,o]=Y.useState("today");Y.useEffect(()=>{const w=new Date,P=N=>{const V=v=>String(v).padStart(2,"0");return`${N.getFullYear()}-${V(N.getMonth()+1)}-${V(N.getDate())}`},b=N=>{const V=new Date(N),v=V.getDay()||7;return V.setDate(V.getDate()-(v-1)),new Date(V.getFullYear(),V.getMonth(),V.getDate())},U=N=>{const V=b(N),v=new Date(V);return v.setDate(v.getDate()+6),v},A=new Date(w.getFullYear(),w.getMonth(),1),I=new Date(w.getFullYear(),w.getMonth()+1,0),S=new Date(w.getFullYear(),w.getMonth()-1,1),j=new Date(w.getFullYear(),w.getMonth(),0);if(i==="today"&&e(N=>({...N,sIni:P(w),sFim:P(w),cIni:"",cFim:""})),i==="week"){const N=b(w),V=U(w);e(v=>({...v,sIni:P(N),sFim:P(V),cIni:"",cFim:""}))}if(i==="month"&&e(N=>({...N,sIni:P(A),sFim:P(I),cIni:"",cFim:""})),i==="lastmonth"&&e(N=>({...N,sIni:P(S),sFim:P(j),cIni:"",cFim:""})),i==="last30"){const N=new Date(w);N.setDate(N.getDate()-29),e(V=>({...V,sIni:P(N),sFim:P(w),cIni:"",cFim:""}))}},[i]);const c=w=>e(P=>({...P,designer:w==="Todos"?"":w})),u=["Hoje","Semana","Ms","Ms passado","ltimos 30 dias"],d=w=>w==="Hoje"?"today":w==="Semana"?"week":w==="Ms"?"month":w==="Ms passado"?"lastmonth":"last30",f=["Todos",...n],m=w=>w==="Pendente"?"gray":w==="Em produo"?"yellow":w==="Revisar"?"red":w==="Aguardando Feedback"?"purple":w==="Aprovada"?"green-approve":w==="Concluida"||w==="Concluda"?"green-dark":"",g=w=>w==="Pendente"?"":w==="Em produo"?"":w==="Aguardando Feedback"?"":w==="Revisar"?"":w==="Aprovada"?"":w==="Concluida"||w==="Concluda"?"":"";return l.jsxs("div",{className:"filterbar",children:[r!==!1&&l.jsx("div",{className:"seg",style:{flex:1,minWidth:220},children:l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:t.q||"",onChange:w=>e(P=>({...P,q:w.target.value}))})}),l.jsxs("div",{className:"filters-row",children:[l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Perodo"}),u.map(w=>l.jsxs("button",{className:`btn-md ${i===d(w)?"active":""}`,onClick:()=>o(d(w)),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"calendar"})}),l.jsx("span",{children:w})]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Designer"}),f.map(w=>l.jsxs("button",{className:`btn-md ${(t.designer||"")===w||w==="Todos"&&!t.designer?"active":""}`,onClick:()=>c(w),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"usuarios"})}),l.jsx("span",{children:w})]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Status"}),Ha.map(w=>l.jsxs("button",{className:`btn-md ${m(w)} ${(t.status||"")===w?"active":""}`,onClick:()=>e(P=>({...P,status:P.status===w?void 0:w})),children:[l.jsx("span",{className:"emoji",children:g(w)}),l.jsx("span",{children:w}),(s==null?void 0:s[w])>0?l.jsx("span",{className:"alert-count",children:s[w]}):null]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Data"}),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"calendar"})}),l.jsx("input",{type:"date",value:t.cIni||"",onChange:w=>e(P=>({...P,cIni:w.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:t.cFim||"",onChange:w=>e(P=>({...P,cFim:w.target.value}))})]})]})]})]})}function Zk({demandas:t,items:e,designers:n,setView:r,onEdit:s,onStatus:i,cadStatus:o,onDelete:c,onDuplicate:u,compact:d,calRef:f,setCalRef:m,loading:g}){const w=e.length,P=e.filter(O=>Mr(O.status)),b=P.length,U=e.filter(O=>!Mr(O.status)).length,A=e.reduce((O,B)=>O+(B.revisoes||0),0),I=Math.round(100*(e.filter(O=>(O.revisoes||0)>0).length/Math.max(1,w))),S=(()=>{const O=P.filter(H=>H.prazo&&H.dataConclusao&&H.dataConclusao<=H.prazo).length,B=P.filter(H=>H.prazo&&H.dataConclusao).length;return Math.round(100*(O/Math.max(1,B)))})(),j=(()=>{const O=oe=>{if(!oe)return null;const[Ie,Fe,Ne]=String(oe).split("-").map(Number);return new Date(Ie,Fe-1,Ne)},B=e.map(oe=>O(oe.dataCriacao||oe.dataSolicitacao)).filter(Boolean).sort((oe,Ie)=>oe-Ie);if(!B.length)return 0;const H=B[0],Z=B[B.length-1];return Math.max(1,Math.round((Z-H)/864e5)+1)})(),N=4,V=n.length*N*j,v=(()=>{const O=V;return O?Math.round(100*(b/O)):0})(),y=e.filter(O=>om(O.status)).length,T=e.filter(O=>im(O.status)).length,C=(()=>{const O={};P.forEach(H=>{const Z=H.designer||"";O[Z]=(O[Z]||0)+1});const B=N*j;return n.map(H=>{const Z=O[H]||0,oe=B?Math.round(100*(Z/B)):0,Ie=B===0||oe<=90?"Verde":oe<=110?"Amarelo":"Vermelho";return{designer:H,ideal:B,real:Z,used:oe,status:Ie}})})(),R=(()=>{const O={};return e.forEach(B=>{if(!Mr(B.status)){const H=B.designer||"";O[H]=(O[H]||0)+1}}),O})(),D=(()=>{const O=[];return C.forEach(H=>{H.used>=110?O.push(`Designer ${H.designer} sobrecarregado (${H.used}%)  risco de atraso`):H.used>=90&&O.push(`Designer ${H.designer} com carga alta (${H.used}%)  monitorar prazos`);const Z=R[H.designer]||0;Z>=N*2&&O.push(`Designer ${H.designer} com ${Z} demandas ativas  priorizar distribuio`)}),e.filter(H=>{if(Mr(H.status)||!H.prazo)return!1;const[Z,oe,Ie]=String(H.prazo).split("-").map(Number),Fe=new Date(Z,(oe||1)-1,Ie||1),Ne=new Date;return Ne.setHours(0,0,0,0),Fe.setHours(0,0,0,0),Fe-Ne<=864e5}).slice(0,5).forEach(H=>O.push(`Prazo crtico: ${H.titulo} (${H.designer||""})`)),O})(),x=(()=>{const O=new Map;return P.forEach(B=>O.set(B.designer||"",(O.get(B.designer||"")||0)+1)),Array.from(O.entries()).map(([B,H])=>({designer:B,qty:H}))})(),nt=(()=>{const O=(H,Z)=>{const oe=Ie=>{const[Fe,Ne,$e]=String(Ie).split("-").map(Number);return new Date(Fe,Ne-1,$e)};return!H||!Z?null:Math.max(0,Math.round((oe(Z)-oe(H))/864e5))},B={};return e.forEach(H=>{if(H.dataConclusao){const Z=H.designer||"",oe=O(H.dataCriacao||H.dataSolicitacao,H.dataConclusao);if(oe!=null){const Ie=B[Z]||{cnt:0,sum:0,min:9999,max:0};B[Z]={cnt:Ie.cnt+1,sum:Ie.sum+oe,min:Math.min(Ie.min,oe),max:Math.max(Ie.max,oe)}}}}),Object.entries(B).map(([H,Z])=>({designer:H,media:Z.sum/Z.cnt||0}))})(),Pt=(()=>{const O={};return e.forEach(B=>{if(B.prazo&&B.dataConclusao){const H=B.designer||"",Z=B.dataConclusao<=B.prazo,oe=O[H]||{ok:0,total:0};O[H]={ok:oe.ok+(Z?1:0),total:oe.total+1}}}),Object.entries(O).map(([B,H])=>({designer:B,pct:Math.round(100*(H.ok/(H.total||1)))}))})(),rt=(()=>{const O={};return e.forEach(B=>{const H=B.designer||"",Z=B.revisoes||0,oe=O[H]||{rTot:0,cnt:0};O[H]={rTot:oe.rTot+Z,cnt:oe.cnt+1}}),Object.entries(O).map(([B,H])=>({designer:B,porPeca:+(H.rTot/(H.cnt||1)).toFixed(2)}))})(),W=(()=>{const O=x.reduce((ke,{designer:He,qty:qe})=>(ke[He]=qe,ke),{}),B=Pt.reduce((ke,{designer:He,pct:qe})=>(ke[He]=qe,ke),{}),H=nt.reduce((ke,{designer:He,media:qe})=>(ke[He]=qe,ke),{}),Z=rt.reduce((ke,{designer:He,porPeca:qe})=>(ke[He]=qe,ke),{}),oe=Array.from(new Set([...Object.keys(O),...Object.keys(B),...Object.keys(H),...Object.keys(Z)])).filter(Boolean),Ie=(ke,He,qe)=>qe===He?1:Math.max(0,Math.min(1,(ke-He)/(qe-He))),Fe=Math.max(...Object.values(O||{_:-1}),0),Ne=Math.min(...Object.values(O||{_:-1}),0),$e=100,Ln=0,Nn=Math.max(...Object.values(H||{_:-1}),0),Bt=Math.min(...Object.values(H||{_:-1}),0),$t=Math.max(...Object.values(Z||{_:-1}),0),et=Math.min(...Object.values(Z||{_:-1}),0);return oe.map(ke=>{const He=Ie(O[ke]||0,Ne,Fe),qe=Ie(B[ke]||0,Ln,$e),Er=1-Ie(H[ke]||0,Bt,Nn),Yr=1-Ie(Z[ke]||0,et,$t),Tr=Math.round((He*.4+qe*.3+Er*.2+Yr*.1)*100);return{designer:ke,score:Tr,sla:B[ke]||0,retrab:Z[ke]||0}}).sort((ke,He)=>He.score-ke.score).slice(0,5)})(),$=(()=>{const O=Array.from({length:11},(H,Z)=>Z+8),B={};return n.forEach(H=>B[H]=O.map(Z=>0)),e.forEach(H=>{if(H.startedAt)try{const oe=new Date(H.startedAt).getHours();if(oe>=8&&oe<=18){const Ie=H.designer||"",Fe=oe-8;B[Ie]&&B[Ie][Fe]++}}catch{}}),{horas:O,per:B}})();return g?l.jsxs("div",{className:"dashboard",children:[l.jsx("div",{className:"exec-summary",children:Array.from({length:5}).map((O,B)=>l.jsx("div",{className:"skeleton row"},B))}),l.jsx("div",{className:"section-grid",children:Array.from({length:2}).map((O,B)=>l.jsx("div",{className:"skeleton card",style:{height:160}},B))})]}):l.jsxs("div",{className:"dashboard",children:[l.jsxs("div",{className:"exec-summary",children:[l.jsx("div",{className:"exec-title",children:"RESUMO EXECUTIVO DO PERODO"}),l.jsxs("div",{className:"exec-grid",children:[l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Produo total"}),l.jsx("div",{className:"exec-value",children:b})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"SLA geral"}),l.jsxs("div",{className:"exec-value",style:{color:S>=90?"#BCD200":S>=70?"#FFE55C":"#FF5E5E"},children:[S,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"% retrabalho"}),l.jsxs("div",{className:"exec-value",children:[I,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Backlog atual"}),l.jsx("div",{className:"exec-value",children:U})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Capacidade usada"}),l.jsxs("div",{className:"exec-value",children:[v,"%"]}),l.jsx("div",{className:"progress",children:l.jsx("div",{className:"progress-fill",style:{width:`${v}%`,background:"#BCD200"}})})]})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PRODUO"}),l.jsxs("div",{className:"badge-grid",children:[l.jsxs("div",{className:"badge blue",children:[l.jsx("div",{children:"Criadas"}),l.jsx("div",{children:w})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"Concludas"}),l.jsx("div",{children:b})]}),l.jsxs("div",{className:"badge yellow",children:[l.jsx("div",{children:"Em produo"}),l.jsx("div",{children:y})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"Pendentes"}),l.jsx("div",{children:T})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"QUALIDADE"}),l.jsxs("div",{className:"badge-group",children:[l.jsxs("div",{className:"badge purple",children:[l.jsx("div",{children:"Revises"}),l.jsx("div",{children:A})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"% Retrabalho"}),l.jsxs("div",{children:[I,"%"]})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"SLA"}),l.jsxs("div",{children:[S,"%"]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PESSOAS"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Score"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"%Retrab"})]})}),l.jsx("tbody",{children:W.map((O,B)=>l.jsxs("tr",{children:[l.jsx("td",{children:B+1}),l.jsx("td",{children:O.designer}),l.jsx("td",{children:O.score}),l.jsxs("td",{children:[O.sla,"%"]}),l.jsx("td",{children:Math.round((O.retrab||0)*100)/100})]},O.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"OPERAO"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Capacidade ideal"}),l.jsx("th",{children:"Produo real"}),l.jsx("th",{children:"Capacidade usada"}),l.jsx("th",{children:"Status"})]})}),l.jsx("tbody",{children:C.map(O=>l.jsxs("tr",{children:[l.jsx("td",{children:O.designer}),l.jsx("td",{children:O.ideal}),l.jsx("td",{children:O.real}),l.jsxs("td",{children:[O.used,"%"]}),l.jsx("td",{style:{color:O.status==="Verde"?"#00C58E":O.status==="Amarelo"?"#FFE55C":"#FF5E5E"},children:O.status})]},O.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"ASSISTENTE IA"}),l.jsx("div",{className:"insights-grid",children:D.map((O,B)=>l.jsxs("div",{className:"insight-card",style:{opacity:0,animation:"pageIn .6s forwards"},children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:O})]},B))})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"HEATMAP DE PRODUTIVIDADE POR HORRIO"}),l.jsxs("div",{className:"heatmap",children:[l.jsxs("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:[l.jsx("div",{className:"chart-label",style:{width:120}}),$.horas.map(O=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(O).padStart(2,"0"),"h"]},O))]}),n.map(O=>l.jsxs("div",{className:"heat-row",style:{alignItems:"center"},children:[l.jsx("div",{className:"chart-label",style:{width:120},children:O}),$.horas.map((B,H)=>{const Z=($.per[O]||[])[H]||0,oe=Z===0?"#222":Z<2?"#4DA3FF33":"#4DA3FF";return l.jsx("div",{className:"heat-cell",style:{background:oe,width:24,height:24},title:`${O} ${String(B).padStart(2,"0")}h: ${Z}`},B)})]},O))]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"LINHA DO TEMPO DE PRODUO MENSAL"}),l.jsx("div",{className:"chips",children:x.map(({designer:O,qty:B})=>l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[l.jsx("span",{className:"chip",children:O}),l.jsx(Lk,{series:[Math.max(1,B-1),B,B+1],color:"#4DA3FF"})]},O))})]})]})]})}function eD({demandas:t,items:e,designers:n,filtros:r,setFiltros:s,loading:i}){var Dt,er,Fn;const o=["Hoje","Semana","Ms","Ms passado"],c=E=>E==="Hoje"?"today":E==="Semana"?"week":E==="Ms"?"month":"lastmonth",[u,d]=Y.useState("month"),[f,m]=Y.useState(n[0]||""),[g,w]=Y.useState(n[1]||"");Y.useEffect(()=>{const E=new Date,k=ve=>{const xe=Ae=>String(Ae).padStart(2,"0");return`${ve.getFullYear()}-${xe(ve.getMonth()+1)}-${xe(ve.getDate())}`},F=ve=>{const xe=new Date(ve),Ae=xe.getDay()||7;return xe.setDate(xe.getDate()-(Ae-1)),new Date(xe.getFullYear(),xe.getMonth(),xe.getDate())},L=ve=>{const xe=F(ve),Ae=new Date(xe);return Ae.setDate(Ae.getDate()+6),Ae},re=new Date(E.getFullYear(),E.getMonth(),1),we=new Date(E.getFullYear(),E.getMonth()+1,0),me=new Date(E.getFullYear(),E.getMonth()-1,1),ge=new Date(E.getFullYear(),E.getMonth(),0);if(u==="today"&&s(ve=>({...ve,cIni:k(E),cFim:k(E)})),u==="week"){const ve=F(E),xe=L(E);s(Ae=>({...Ae,cIni:k(ve),cFim:k(xe)}))}u==="month"&&s(ve=>({...ve,cIni:k(re),cFim:k(we)})),u==="lastmonth"&&s(ve=>({...ve,cIni:k(me),cFim:k(ge)}))},[u]);const P=["Todos",...n],b=E=>s(k=>({...k,designer:E==="Todos"?"":E})),U=["Todos",...Array.from(new Set(t.map(E=>E.tipoMidia).filter(Boolean)))],A=E=>s(k=>({...k,tipoMidia:E==="Todos"?"":E})),I=["Todos",...sm],S=E=>s(k=>({...k,origem:E==="Todos"?"":E})),j=["Todos",...Array.from(new Set(t.map(E=>E.campanha).filter(Boolean)))],N=E=>s(k=>({...k,campanha:E==="Todos"?"":E})),V=["Todos",...Ha],v=E=>s(k=>({...k,status:E==="Todos"?"":E})),y=(()=>{const E=L=>{if(!L)return null;const[re,we,me]=L.split("-").map(Number);return new Date(re,we-1,me)},k=E(r.cIni),F=E(r.cFim);return!k||!F?1:Math.max(1,Math.round((F-k)/864e5)+1)})(),T=e.filter(E=>Mr(E.status));e.filter(E=>im(E.status)),e.filter(E=>om(E.status)),e.reduce((E,k)=>E+(k.revisoes||0),0),T.length/y;const C=e.filter(E=>!Mr(E.status)),R=E=>{if(!E)return null;const[k,F,L]=String(E).split("-").map(Number),re=new Date(k,(F||1)-1,L||1),we=new Date;return we.setHours(0,0,0,0),re.setHours(0,0,0,0),Math.round((re-we)/864e5)},D=C.filter(E=>{const k=R(E.prazo);return k!=null&&k<=2}),x=(()=>{const E=C.map(F=>R(F.prazo)).filter(F=>F!=null);return+(E.reduce((F,L)=>F+L,0)/(E.length||1)).toFixed(1)})(),Pt=(()=>{const E=C.filter(F=>{const L=R(F.prazo);return L!=null&&L<0}).length,k=C.length||1;return Math.round(100*(E/k))})()>30?"Acumulando atraso":"Saudvel",rt=(E,k)=>{const F=L=>{const[re,we,me]=String(L).split("-").map(Number);return new Date(re,we-1,me)};return!E||!k?null:Math.max(0,Math.round((F(k)-F(E))/864e5))},W=T.map(E=>rt(E.dataCriacao||E.dataSolicitacao,E.dataConclusao)).filter(E=>E!=null),$=+(W.reduce((E,k)=>E+k,0)/(W.length||1)).toFixed(1),O=(()=>{const E={};return T.forEach(k=>{const F=k.tipoMidia||"Outro",L=rt(k.dataCriacao||k.dataSolicitacao,k.dataConclusao);if(L!=null){const re=E[F]||{cnt:0,sum:0};E[F]={cnt:re.cnt+1,sum:re.sum+L}}}),Object.entries(E).map(([k,F])=>({tipo:k,media:+(F.sum/F.cnt).toFixed(1)}))})(),B=(()=>{const E={};return T.forEach(k=>{const F=k.designer||"",L=rt(k.dataCriacao||k.dataSolicitacao,k.dataConclusao);if(L!=null){const re=E[F]||{cnt:0,sum:0};E[F]={cnt:re.cnt+1,sum:re.sum+L}}}),Object.entries(E).map(([k,F])=>({designer:k,media:+(F.sum/F.cnt).toFixed(1)}))})(),H=new Date,Z=new Date(H.getFullYear(),H.getMonth()-1,1),oe=(E,k)=>{if(!E)return!1;const[F,L,re]=E.split("-").map(Number),we=new Date(F,L-1,re);return we.getMonth()===k.getMonth()&&we.getFullYear()===k.getFullYear()},Ie=T.filter(E=>oe(E.dataConclusao,H)).map(E=>rt(E.dataCriacao||E.dataSolicitacao,E.dataConclusao)).filter(E=>E!=null),Fe=T.filter(E=>oe(E.dataConclusao,Z)).map(E=>rt(E.dataCriacao||E.dataSolicitacao,E.dataConclusao)).filter(E=>E!=null),Ne=+(Ie.reduce((E,k)=>E+k,0)/(Ie.length||1)).toFixed(1),$e=+(Fe.reduce((E,k)=>E+k,0)/(Fe.length||1)).toFixed(1),Ln=E=>{const k=T.filter(F=>(F.designer||"")===E).map(F=>rt(F.dataCriacao||F.dataSolicitacao,F.dataConclusao)).filter(F=>F!=null);return+(k.reduce((F,L)=>F+L,0)/(k.length||1)).toFixed(1)},Nn=(()=>{const E=T.map(re=>re.revisoes||0),k=E.length||1,F=re=>Math.round(100*(E.filter(we=>we===re).length/k)),L=re=>Math.round(100*(E.filter(re).length/k));return{sRev:F(0),umaRev:F(1),duasMais:L(re=>re>=2)}})(),Bt=(()=>{const E={};return e.forEach(k=>{const F=k.designer||"",L=k.revisoes||0,re=E[F]||{rTot:0,cnt:0};E[F]={rTot:re.rTot+L,cnt:re.cnt+1}}),Object.entries(E).map(([k,F])=>({designer:k,porPeca:+(F.rTot/(F.cnt||1)).toFixed(2)})).sort((k,F)=>F.porPeca-k.porPeca)})(),$t=(()=>{const E={};return e.forEach(k=>{const F=k.tipoMidia||"Outro",L=k.revisoes||0,re=E[F]||{rTot:0,cnt:0};E[F]={rTot:re.rTot+L,cnt:re.cnt+1}}),Object.entries(E).map(([k,F])=>({tipo:k,porPeca:+(F.rTot/(F.cnt||1)).toFixed(2)})).sort((k,F)=>F.porPeca-k.porPeca)})(),et=(()=>{const E={};e.forEach(F=>{const L=F.origem||"Outros";E[L]=(E[L]||0)+1});const k=e.length||1;return Object.entries(E).map(([F,L])=>({origem:F,q:L,pct:Math.round(100*(L/k))}))})(),wr=(()=>{const E={};return e.forEach(k=>{const F=k.origem||"Outros",L=k.revisoes||0,re=E[F]||{rTot:0,cnt:0};E[F]={rTot:re.rTot+L,cnt:re.cnt+1}}),Object.entries(E).map(([k,F])=>({origem:k,porPeca:+(F.rTot/(F.cnt||1)).toFixed(2)})).sort((k,F)=>F.porPeca-k.porPeca)})(),ke=(()=>{const E={};return T.forEach(k=>{const F=k.origem||"Outros";E[F]=(E[F]||0)+1}),Object.entries(E).map(([k,F])=>({origem:k,q:F})).sort((k,F)=>F.q-k.q)})(),He=(()=>{const E={};return T.forEach(k=>{const F=k.finishedAt;if(!F)return;const L=new Date(F).getHours();E[L]=(E[L]||0)+1}),E})(),qe=(()=>{const E=T.map(L=>Number(L.tempoProducaoMs||0)).filter(L=>L>0),k=E.reduce((L,re)=>L+re,0)/(E.length||1);return+(L=>L/36e5)(k).toFixed(2)})(),Er=(()=>{const E={};return T.forEach(k=>{const F=k.designer||"",L=Number(k.tempoProducaoMs||0),re=E[F]||{cnt:0,sum:0};E[F]={cnt:re.cnt+1,sum:re.sum+L}}),Object.entries(E).map(([k,F])=>({designer:k,horas:+(F.sum/(F.cnt||1)/36e5).toFixed(2)})).sort((k,F)=>k.horas-F.horas)})(),Yr=Bt.slice().sort((E,k)=>E.porPeca-k.porPeca),Tr=(()=>{const E={};return e.forEach(k=>{const F=k.campanha||"";E[F]=(E[F]||0)+1}),Object.entries(E).map(([k,F])=>({campanha:k,q:F})).sort((k,F)=>F.q-k.q)})(),Ke=(()=>{const E={};return e.forEach(k=>{const F=k.campanha||"",L=k.revisoes||0,re=E[F]||{rTot:0,cnt:0};E[F]={rTot:re.rTot+L,cnt:re.cnt+1}}),Object.entries(E).map(([k,F])=>({campanha:k,porPeca:+(F.rTot/(F.cnt||1)).toFixed(2)})).sort((k,F)=>F.porPeca-k.porPeca)})(),Zn=(()=>{const E={};return e.forEach(k=>{if(k.campanha){const F=k.campanha,L=!!(k.prazo&&k.dataConclusao&&k.dataConclusao<=k.prazo),re=!!(k.prazo&&k.dataConclusao),we=E[F]||{ok:0,total:0};E[F]={ok:we.ok+(L?1:0),total:we.total+(re?1:0)}}}),Object.entries(E).map(([k,F])=>({campanha:k,sla:Math.round(100*(F.ok/(F.total||1)))}))})();return i?l.jsxs("div",{className:"reports",children:[l.jsx("div",{className:"reports-toolbar",children:l.jsx("div",{className:"skeleton row",style:{width:"50%"}})}),l.jsx("div",{className:"reports-grid",children:Array.from({length:3}).map((E,k)=>l.jsx("div",{className:"skeleton card",style:{height:180}},k))})]}):l.jsxs("div",{className:"reports",children:[l.jsxs("div",{className:"reports-toolbar",children:[l.jsxs("div",{className:"chips",children:[o.map(E=>l.jsxs("button",{className:`btn-md ${u===c(E)?"active":""}`,onClick:()=>d(c(E)),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"calendar"})}),l.jsx("span",{children:E})]},E)),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"calendar"})}),l.jsx("input",{type:"date",value:r.cIni||"",onChange:E=>s(k=>({...k,cIni:E.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:r.cFim||"",onChange:E=>s(k=>({...k,cFim:E.target.value}))})]})]}),l.jsxs("div",{className:"chips",children:[P.map(E=>l.jsxs("button",{className:`btn-md ${(r.designer||"")===E||E==="Todos"&&!r.designer?"active":""}`,onClick:()=>b(E),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"usuarios"})}),l.jsx("span",{children:E})]},E)),U.map(E=>l.jsxs("button",{className:`btn-md ${(r.tipoMidia||"")===E||E==="Todos"&&!r.tipoMidia?"active":""}`,onClick:()=>A(E),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"tag"})}),l.jsx("span",{children:E})]},E)),I.map(E=>l.jsxs("button",{className:`btn-md ${(r.origem||"")===E||E==="Todos"&&!r.origem?"active":""}`,onClick:()=>S(E),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"link"})}),l.jsx("span",{children:E})]},E)),j.map(E=>l.jsxs("button",{className:`btn-md ${(r.campanha||"")===E||E==="Todos"&&!r.campanha?"active":""}`,onClick:()=>N(E),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"tag"})}),l.jsx("span",{children:E})]},E)),V.map(E=>l.jsxs("button",{className:`btn-md ${(r.status||"")===E||E==="Todos"&&!r.status?"active":""}`,onClick:()=>v(E),children:[l.jsx("span",{className:"icon",children:l.jsx(Oe,{name:"dot"})}),l.jsx("span",{children:E})]},E))]})]}),l.jsxs("div",{className:"reports-grid",children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Backlog"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Backlog total: ",C.length]}),l.jsxs("span",{className:"chip",children:["Em risco (48h): ",D.length]}),l.jsxs("span",{className:"chip",children:["Prazo mdio: ",x,"d"]}),l.jsxs("span",{className:"chip",children:["Estado: ",Pt]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(C.reduce((E,k)=>{const F=k.tipoMidia||"Outro";return E[F]=(E[F]||0)+1,E},{})).map(([E,k])=>l.jsxs("tr",{children:[l.jsx("td",{children:E}),l.jsx("td",{children:k})]},E))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(C.reduce((E,k)=>{const F=k.designer||"";return E[F]=(E[F]||0)+1,E},{})).map(([E,k])=>l.jsxs("tr",{children:[l.jsx("td",{children:E}),l.jsx("td",{children:k})]},E))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Lead Time"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mdio geral: ",$,"d"]}),l.jsxs("span",{className:"chip",children:["Este ms: ",Ne,"d"]}),l.jsxs("span",{className:"chip",children:["Ms passado: ",$e,"d"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:O.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.tipo}),l.jsxs("td",{children:[E.media,"d"]})]},E.tipo))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:B.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.designer}),l.jsxs("td",{children:[E.media,"d"]})]},E.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"chips",children:[l.jsx("span",{className:"chip",children:"Designer A"}),l.jsx("select",{value:f,onChange:E=>m(E.target.value),children:n.map(E=>l.jsx("option",{value:E,children:E},E))}),l.jsx("span",{className:"chip",children:"Designer B"}),l.jsx("select",{value:g,onChange:E=>w(E.target.value),children:n.map(E=>l.jsx("option",{value:E,children:E},E))}),l.jsxs("span",{className:"chip",children:["A: ",Ln(f),"d"]}),l.jsxs("span",{className:"chip",children:["B: ",Ln(g),"d"]})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Eficincia e Retrabalho"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Sem reviso: ",Nn.sRev,"%"]}),l.jsxs("span",{className:"chip",children:["1 reviso: ",Nn.umaRev,"%"]}),l.jsxs("span",{className:"chip",children:["2+ revises: ",Nn.duasMais,"%"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:Bt.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.designer}),l.jsx("td",{children:E.porPeca})]},E.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:$t.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.tipo}),l.jsx("td",{children:E.porPeca})]},E.tipo))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Demanda por Canal"}),l.jsx("div",{className:"chips",children:et.map(E=>l.jsxs("span",{className:"chip",children:[E.origem,": ",E.pct,"%"]},E.origem))}),l.jsx("div",{className:"section-divider"}),(()=>{const E=et.reduce((me,ge)=>me+ge.q,0)||1;let k=0;const F=50,L=60,re=60,we=et.slice(0,5).map((me,ge)=>{const ve=me.q/E,xe=k*2*Math.PI,Ae=(k+ve)*2*Math.PI;k+=ve;const Un=L+F*Math.cos(xe),tr=re+F*Math.sin(xe),Ce=L+F*Math.cos(Ae),jt=re+F*Math.sin(Ae),ee=ve>.5?1:0,K=`M ${L} ${re} L ${Un} ${tr} A ${F} ${F} 0 ${ee} 1 ${Ce} ${jt} Z`,X=["#4DA3FF","#BCD200","#FF5E5E","#9B59B6","#2ECC71"];return{path:K,color:X[ge%X.length],label:`${me.origem} ${me.pct}%`}});return l.jsxs("div",{className:"pie-wrap",children:[l.jsx("svg",{width:"140",height:"140",className:"pie-chart",children:we.map((me,ge)=>l.jsx("path",{d:me.path,fill:me.color},ge))}),l.jsx("div",{className:"pie-legend",children:we.map((me,ge)=>l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot",style:{background:me.color}}),me.label]},ge))})]})})(),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:wr.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.origem}),l.jsx("td",{children:E.porPeca})]},E.origem))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Concludas"})]})}),l.jsx("tbody",{children:ke.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.origem}),l.jsx("td",{children:E.q})]},E.origem))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Produtividade por Hora (Avanado)"}),l.jsx("div",{className:"chips",children:l.jsxs("span",{className:"chip",children:["Tempo mdio real/pea: ",qe,"h"]})}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"heatmap",children:[l.jsx("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:Array.from({length:11},(E,k)=>k+8).map(E=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(E).padStart(2,"0"),"h"]},E))}),l.jsx("div",{className:"heat-row",children:Array.from({length:11},(E,k)=>k+8).map(E=>{const k=He[E]||0,F=k===0?"#222":k<2?"#00C58E33":"#00C58E";return l.jsx("div",{className:"heat-cell",style:{background:F},title:`${String(E).padStart(2,"0")}h: ${k}`},E)})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Velocidade mdia (h)"})]})}),l.jsx("tbody",{children:Er.map((E,k)=>l.jsxs("tr",{children:[l.jsx("td",{children:k+1}),l.jsx("td",{children:E.designer}),l.jsx("td",{children:E.horas})]},E.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qualidade (menos retrabalho)"})]})}),l.jsx("tbody",{children:Yr.map((E,k)=>l.jsxs("tr",{children:[l.jsx("td",{children:k+1}),l.jsx("td",{children:E.designer}),l.jsx("td",{children:E.porPeca})]},E.designer))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Campanhas"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mais demandada: ",((Dt=Tr[0])==null?void 0:Dt.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Maior retrabalho: ",((er=Ke[0])==null?void 0:er.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Melhor SLA: ",((Fn=Zn.sort((E,k)=>k.sla-E.sla)[0])==null?void 0:Fn.campanha)||""]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Campanha"}),l.jsx("th",{children:"Produo (concludas)"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"Retrabalho/pea"})]})}),l.jsx("tbody",{children:Array.from(new Set(e.map(E=>E.campanha).filter(Boolean))).map(E=>{var re,we;const k=T.filter(me=>me.campanha===E).length,F=((re=Zn.find(me=>me.campanha===E))==null?void 0:re.sla)||0,L=((we=Ke.find(me=>me.campanha===E))==null?void 0:we.porPeca)||0;return l.jsxs("tr",{children:[l.jsx("td",{children:E}),l.jsx("td",{children:k}),l.jsxs("td",{style:{color:F>=90?"#BCD200":F>=70?"#FFE55C":"#FF5E5E"},children:[F,"%"]}),l.jsx("td",{children:L})]},E)})})]})]})]})]})}U0(document.getElementById("root")).render(l.jsx(GT.StrictMode,{children:l.jsx(Kk,{})}));
