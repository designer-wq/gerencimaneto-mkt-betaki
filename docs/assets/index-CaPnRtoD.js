(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ry={exports:{}},cu={},Ny={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qa=Symbol.for("react.element"),DT=Symbol.for("react.portal"),bT=Symbol.for("react.fragment"),OT=Symbol.for("react.strict_mode"),MT=Symbol.for("react.profiler"),VT=Symbol.for("react.provider"),LT=Symbol.for("react.context"),FT=Symbol.for("react.forward_ref"),UT=Symbol.for("react.suspense"),zT=Symbol.for("react.memo"),BT=Symbol.for("react.lazy"),Lm=Symbol.iterator;function $T(t){return t===null||typeof t!="object"?null:(t=Lm&&t[Lm]||t["@@iterator"],typeof t=="function"?t:null)}var jy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dy=Object.assign,by={};function mo(t,e,n){this.props=t,this.context=e,this.refs=by,this.updater=n||jy}mo.prototype.isReactComponent={};mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Oy(){}Oy.prototype=mo.prototype;function pf(t,e,n){this.props=t,this.context=e,this.refs=by,this.updater=n||jy}var mf=pf.prototype=new Oy;mf.constructor=pf;Dy(mf,mo.prototype);mf.isPureReactComponent=!0;var Fm=Array.isArray,My=Object.prototype.hasOwnProperty,gf={current:null},Vy={key:!0,ref:!0,__self:!0,__source:!0};function Ly(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)My.call(e,r)&&!Vy.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:qa,type:t,key:i,ref:o,props:s,_owner:gf.current}}function HT(t,e){return{$$typeof:qa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vf(t){return typeof t=="object"&&t!==null&&t.$$typeof===qa}function qT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Um=/\/+/g;function id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qT(""+t.key):e.toString(36)}function Kl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qa:case DT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+id(o,0):r,Fm(s)?(n="",t!=null&&(n=t.replace(Um,"$&/")+"/"),Kl(s,e,n,"",function(d){return d})):s!=null&&(vf(s)&&(s=HT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Um,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Fm(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+id(i,c);o+=Kl(i,e,n,u,s)}else if(u=$T(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+id(i,c++),o+=Kl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sl(t,e,n){if(t==null)return t;var r=[],s=0;return Kl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function WT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Ql={transition:null},GT={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Ql,ReactCurrentOwner:gf};function Fy(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Sl,forEach:function(t,e,n){Sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sl(t,function(){e++}),e},toArray:function(t){return Sl(t,function(e){return e})||[]},only:function(t){if(!vf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=mo;ke.Fragment=bT;ke.Profiler=MT;ke.PureComponent=pf;ke.StrictMode=OT;ke.Suspense=UT;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GT;ke.act=Fy;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Dy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=gf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)My.call(e,u)&&!Vy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:qa,type:t.type,key:s,ref:i,props:r,_owner:o}};ke.createContext=function(t){return t={$$typeof:LT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VT,_context:t},t.Consumer=t};ke.createElement=Ly;ke.createFactory=function(t){var e=Ly.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:FT,render:t}};ke.isValidElement=vf;ke.lazy=function(t){return{$$typeof:BT,_payload:{_status:-1,_result:t},_init:WT}};ke.memo=function(t,e){return{$$typeof:zT,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=Ql.transition;Ql.transition={};try{t()}finally{Ql.transition=e}};ke.unstable_act=Fy;ke.useCallback=function(t,e){return rn.current.useCallback(t,e)};ke.useContext=function(t){return rn.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};ke.useEffect=function(t,e){return rn.current.useEffect(t,e)};ke.useId=function(){return rn.current.useId()};ke.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return rn.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};ke.useRef=function(t){return rn.current.useRef(t)};ke.useState=function(t){return rn.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return rn.current.useTransition()};ke.version="18.3.1";Ny.exports=ke;var Q=Ny.exports;const KT=jT(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT=Q,YT=Symbol.for("react.element"),XT=Symbol.for("react.fragment"),JT=Object.prototype.hasOwnProperty,ZT=QT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eI={key:!0,ref:!0,__self:!0,__source:!0};function Uy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)JT.call(e,r)&&!eI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:YT,type:t,key:i,ref:o,props:s,_owner:ZT.current}}cu.Fragment=XT;cu.jsx=Uy;cu.jsxs=Uy;Ry.exports=cu;var l=Ry.exports,zy={exports:{}},An={},By={exports:{}},$y={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,O){var B=$.length;$.push(O);e:for(;0<B;){var H=B-1>>>1,J=$[H];if(0<s(J,O))$[H]=O,$[B]=J,B=H;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var O=$[0],B=$.pop();if(B!==O){$[0]=B;e:for(var H=0,J=$.length,oe=J>>>1;H<oe;){var Te=2*(H+1)-1,Fe=$[Te],Pe=Te+1,Be=$[Pe];if(0>s(Fe,B))Pe<J&&0>s(Be,Fe)?($[H]=Be,$[Pe]=B,H=Pe):($[H]=Fe,$[Te]=B,H=Te);else if(Pe<J&&0>s(Be,B))$[H]=Be,$[Pe]=B,H=Pe;else break e}}return O}function s($,O){var B=$.sortIndex-O.sortIndex;return B!==0?B:$.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,g=3,w=!1,P=!1,b=!1,U=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S($){for(var O=n(d);O!==null;){if(O.callback===null)r(d);else if(O.startTime<=$)r(d),O.sortIndex=O.expirationTime,e(u,O);else break;O=n(d)}}function D($){if(b=!1,S($),!P)if(n(u)!==null)P=!0,nt(k);else{var O=n(d);O!==null&&W(D,O.startTime-$)}}function k($,O){P=!1,b&&(b=!1,A(y),y=-1),w=!0;var B=g;try{for(S(O),m=n(u);m!==null&&(!(m.expirationTime>O)||$&&!R());){var H=m.callback;if(typeof H=="function"){m.callback=null,g=m.priorityLevel;var J=H(m.expirationTime<=O);O=t.unstable_now(),typeof J=="function"?m.callback=J:m===n(u)&&r(u),S(O)}else r(u);m=n(u)}if(m!==null)var oe=!0;else{var Te=n(d);Te!==null&&W(D,Te.startTime-O),oe=!1}return oe}finally{m=null,g=B,w=!1}}var V=!1,v=null,y=-1,T=5,C=-1;function R(){return!(t.unstable_now()-C<T)}function j(){if(v!==null){var $=t.unstable_now();C=$;var O=!0;try{O=v(!0,$)}finally{O?x():(V=!1,v=null)}}else V=!1}var x;if(typeof I=="function")x=function(){I(j)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,xt=tt.port2;tt.port1.onmessage=j,x=function(){xt.postMessage(null)}}else x=function(){U(j,0)};function nt($){v=$,V||(V=!0,x())}function W($,O){y=U(function(){$(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){P||w||(P=!0,nt(k))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var O=3;break;default:O=g}var B=g;g=O;try{return $()}finally{g=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,O){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var B=g;g=$;try{return O()}finally{g=B}},t.unstable_scheduleCallback=function($,O,B){var H=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?H+B:H):B=H,$){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=B+J,$={id:f++,callback:O,priorityLevel:$,startTime:B,expirationTime:J,sortIndex:-1},B>H?($.sortIndex=B,e(d,$),n(u)===null&&$===n(d)&&(b?(A(y),y=-1):b=!0,W(D,B-H))):($.sortIndex=J,e(u,$),P||w||(P=!0,nt(k))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var O=g;return function(){var B=g;g=O;try{return $.apply(this,arguments)}finally{g=B}}}})($y);By.exports=$y;var tI=By.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nI=Q,Sn=tI;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hy=new Set,va={};function mi(t,e){to(t,e),to(t+"Capture",e)}function to(t,e){for(va[t]=e,t=0;t<e.length;t++)Hy.add(e[t])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qd=Object.prototype.hasOwnProperty,rI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zm={},Bm={};function sI(t){return qd.call(Bm,t)?!0:qd.call(zm,t)?!1:rI.test(t)?Bm[t]=!0:(zm[t]=!0,!1)}function iI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oI(t,e,n,r){if(e===null||typeof e>"u"||iI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ft[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ft[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ft[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ft[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ft[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ft[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ft[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ft[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ft[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var yf=/[\-:]([a-z])/g;function _f(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yf,_f);Ft[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yf,_f);Ft[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yf,_f);Ft[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ft[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ft.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ft[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function wf(t,e,n,r){var s=Ft.hasOwnProperty(e)?Ft[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oI(e,n,s,r)&&(n=null),r||s===null?sI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wr=nI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Al=Symbol.for("react.element"),ji=Symbol.for("react.portal"),Di=Symbol.for("react.fragment"),Ef=Symbol.for("react.strict_mode"),Wd=Symbol.for("react.profiler"),qy=Symbol.for("react.provider"),Wy=Symbol.for("react.context"),Tf=Symbol.for("react.forward_ref"),Gd=Symbol.for("react.suspense"),Kd=Symbol.for("react.suspense_list"),If=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),Gy=Symbol.for("react.offscreen"),$m=Symbol.iterator;function Vo(t){return t===null||typeof t!="object"?null:(t=$m&&t[$m]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,od;function qo(t){if(od===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);od=e&&e[1]||""}return`
`+od+t}var ad=!1;function ld(t,e){if(!t||ad)return"";ad=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{ad=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qo(t):""}function aI(t){switch(t.tag){case 5:return qo(t.type);case 16:return qo("Lazy");case 13:return qo("Suspense");case 19:return qo("SuspenseList");case 0:case 2:case 15:return t=ld(t.type,!1),t;case 11:return t=ld(t.type.render,!1),t;case 1:return t=ld(t.type,!0),t;default:return""}}function Qd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Di:return"Fragment";case ji:return"Portal";case Wd:return"Profiler";case Ef:return"StrictMode";case Gd:return"Suspense";case Kd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Wy:return(t.displayName||"Context")+".Consumer";case qy:return(t._context.displayName||"Context")+".Provider";case Tf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case If:return e=t.displayName||null,e!==null?e:Qd(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return Qd(t(e))}catch{}}return null}function lI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qd(e);case 8:return e===Ef?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ky(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cI(t){var e=Ky(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=cI(t))}function Qy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ky(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yd(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Yy(t,e){e=e.checked,e!=null&&wf(t,"checked",e,!1)}function Xd(t,e){Yy(t,e);var n=Ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jd(t,e.type,Ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jd(t,e,n){(e!=="number"||gc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wo=Array.isArray;function qi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ts(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Zd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Wo(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ts(n)}}function Xy(t,e){var n=Ts(e.value),r=Ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Jy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Jy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xl,Zy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xl=xl||document.createElement("div"),xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uI=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(t){uI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),na[e]=na[t]})});function e_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||na.hasOwnProperty(t)&&na[t]?(""+e).trim():e+"px"}function t_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=e_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var dI=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function th(t,e){if(e){if(dI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function nh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rh=null;function Sf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sh=null,Wi=null,Gi=null;function Km(t){if(t=Ka(t)){if(typeof sh!="function")throw Error(X(280));var e=t.stateNode;e&&(e=pu(e),sh(t.stateNode,t.type,e))}}function n_(t){Wi?Gi?Gi.push(t):Gi=[t]:Wi=t}function r_(){if(Wi){var t=Wi,e=Gi;if(Gi=Wi=null,Km(t),e)for(t=0;t<e.length;t++)Km(e[t])}}function s_(t,e){return t(e)}function i_(){}var cd=!1;function o_(t,e,n){if(cd)return t(e,n);cd=!0;try{return s_(t,e,n)}finally{cd=!1,(Wi!==null||Gi!==null)&&(i_(),r_())}}function _a(t,e){var n=t.stateNode;if(n===null)return null;var r=pu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var ih=!1;if(Vr)try{var Lo={};Object.defineProperty(Lo,"passive",{get:function(){ih=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{ih=!1}function hI(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ra=!1,vc=null,yc=!1,oh=null,fI={onError:function(t){ra=!0,vc=t}};function pI(t,e,n,r,s,i,o,c,u){ra=!1,vc=null,hI.apply(fI,arguments)}function mI(t,e,n,r,s,i,o,c,u){if(pI.apply(this,arguments),ra){if(ra){var d=vc;ra=!1,vc=null}else throw Error(X(198));yc||(yc=!0,oh=d)}}function gi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function a_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qm(t){if(gi(t)!==t)throw Error(X(188))}function gI(t){var e=t.alternate;if(!e){if(e=gi(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Qm(s),t;if(i===r)return Qm(s),e;i=i.sibling}throw Error(X(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function l_(t){return t=gI(t),t!==null?c_(t):null}function c_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=c_(t);if(e!==null)return e;t=t.sibling}return null}var u_=Sn.unstable_scheduleCallback,Ym=Sn.unstable_cancelCallback,vI=Sn.unstable_shouldYield,yI=Sn.unstable_requestPaint,mt=Sn.unstable_now,_I=Sn.unstable_getCurrentPriorityLevel,Af=Sn.unstable_ImmediatePriority,d_=Sn.unstable_UserBlockingPriority,_c=Sn.unstable_NormalPriority,wI=Sn.unstable_LowPriority,h_=Sn.unstable_IdlePriority,uu=null,lr=null;function EI(t){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(uu,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:SI,TI=Math.log,II=Math.LN2;function SI(t){return t>>>=0,t===0?32:31-(TI(t)/II|0)|0}var Pl=64,kl=4194304;function Go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Go(c):(i&=o,i!==0&&(r=Go(i)))}else o=n&~s,o!==0?r=Go(o):i!==0&&(r=Go(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gn(e),s=1<<n,r|=t[n],e&=~s;return r}function AI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Gn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=AI(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function ah(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function f_(){var t=Pl;return Pl<<=1,!(Pl&4194240)&&(Pl=64),t}function ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function xI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Cf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ue=0;function p_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var m_,xf,g_,v_,y_,lh=!1,Rl=[],us=null,ds=null,hs=null,wa=new Map,Ea=new Map,es=[],PI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xm(t,e){switch(t){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function Fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ka(e),e!==null&&xf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function kI(t,e,n,r,s){switch(e){case"focusin":return us=Fo(us,t,e,n,r,s),!0;case"dragenter":return ds=Fo(ds,t,e,n,r,s),!0;case"mouseover":return hs=Fo(hs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return wa.set(i,Fo(wa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ea.set(i,Fo(Ea.get(i)||null,t,e,n,r,s)),!0}return!1}function __(t){var e=Ks(t.target);if(e!==null){var n=gi(e);if(n!==null){if(e=n.tag,e===13){if(e=a_(n),e!==null){t.blockedOn=e,y_(t.priority,function(){g_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ch(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rh=r,n.target.dispatchEvent(r),rh=null}else return e=Ka(n),e!==null&&xf(e),t.blockedOn=n,!1;e.shift()}return!0}function Jm(t,e,n){Yl(t)&&n.delete(e)}function RI(){lh=!1,us!==null&&Yl(us)&&(us=null),ds!==null&&Yl(ds)&&(ds=null),hs!==null&&Yl(hs)&&(hs=null),wa.forEach(Jm),Ea.forEach(Jm)}function Uo(t,e){t.blockedOn===e&&(t.blockedOn=null,lh||(lh=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,RI)))}function Ta(t){function e(s){return Uo(s,t)}if(0<Rl.length){Uo(Rl[0],t);for(var n=1;n<Rl.length;n++){var r=Rl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(us!==null&&Uo(us,t),ds!==null&&Uo(ds,t),hs!==null&&Uo(hs,t),wa.forEach(e),Ea.forEach(e),n=0;n<es.length;n++)r=es[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<es.length&&(n=es[0],n.blockedOn===null);)__(n),n.blockedOn===null&&es.shift()}var Ki=Wr.ReactCurrentBatchConfig,Ec=!0;function NI(t,e,n,r){var s=Ue,i=Ki.transition;Ki.transition=null;try{Ue=1,Pf(t,e,n,r)}finally{Ue=s,Ki.transition=i}}function jI(t,e,n,r){var s=Ue,i=Ki.transition;Ki.transition=null;try{Ue=4,Pf(t,e,n,r)}finally{Ue=s,Ki.transition=i}}function Pf(t,e,n,r){if(Ec){var s=ch(t,e,n,r);if(s===null)wd(t,e,r,Tc,n),Xm(t,r);else if(kI(s,t,e,n,r))r.stopPropagation();else if(Xm(t,r),e&4&&-1<PI.indexOf(t)){for(;s!==null;){var i=Ka(s);if(i!==null&&m_(i),i=ch(t,e,n,r),i===null&&wd(t,e,r,Tc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else wd(t,e,r,null,n)}}var Tc=null;function ch(t,e,n,r){if(Tc=null,t=Sf(r),t=Ks(t),t!==null)if(e=gi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=a_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tc=t,null}function w_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_I()){case Af:return 1;case d_:return 4;case _c:case wI:return 16;case h_:return 536870912;default:return 16}default:return 16}}var as=null,kf=null,Xl=null;function E_(){if(Xl)return Xl;var t,e=kf,n=e.length,r,s="value"in as?as.value:as.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xl=s.slice(t,1<r?1-r:void 0)}function Jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nl(){return!0}function Zm(){return!1}function Cn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nl:Zm,this.isPropagationStopped=Zm,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),e}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rf=Cn(go),Ga=ot({},go,{view:0,detail:0}),DI=Cn(Ga),dd,hd,zo,du=ot({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zo&&(zo&&t.type==="mousemove"?(dd=t.screenX-zo.screenX,hd=t.screenY-zo.screenY):hd=dd=0,zo=t),dd)},movementY:function(t){return"movementY"in t?t.movementY:hd}}),eg=Cn(du),bI=ot({},du,{dataTransfer:0}),OI=Cn(bI),MI=ot({},Ga,{relatedTarget:0}),fd=Cn(MI),VI=ot({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),LI=Cn(VI),FI=ot({},go,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UI=Cn(FI),zI=ot({},go,{data:0}),tg=Cn(zI),BI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$I={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HI[t])?!!e[t]:!1}function Nf(){return qI}var WI=ot({},Ga,{key:function(t){if(t.key){var e=BI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$I[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nf,charCode:function(t){return t.type==="keypress"?Jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GI=Cn(WI),KI=ot({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ng=Cn(KI),QI=ot({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nf}),YI=Cn(QI),XI=ot({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),JI=Cn(XI),ZI=ot({},du,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eS=Cn(ZI),tS=[9,13,27,32],jf=Vr&&"CompositionEvent"in window,sa=null;Vr&&"documentMode"in document&&(sa=document.documentMode);var nS=Vr&&"TextEvent"in window&&!sa,T_=Vr&&(!jf||sa&&8<sa&&11>=sa),rg=" ",sg=!1;function I_(t,e){switch(t){case"keyup":return tS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bi=!1;function rS(t,e){switch(t){case"compositionend":return S_(e);case"keypress":return e.which!==32?null:(sg=!0,rg);case"textInput":return t=e.data,t===rg&&sg?null:t;default:return null}}function sS(t,e){if(bi)return t==="compositionend"||!jf&&I_(t,e)?(t=E_(),Xl=kf=as=null,bi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return T_&&e.locale!=="ko"?null:e.data;default:return null}}var iS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ig(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iS[t.type]:e==="textarea"}function A_(t,e,n,r){n_(r),e=Ic(e,"onChange"),0<e.length&&(n=new Rf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ia=null,Ia=null;function oS(t){M_(t,0)}function hu(t){var e=Vi(t);if(Qy(e))return t}function aS(t,e){if(t==="change")return e}var C_=!1;if(Vr){var pd;if(Vr){var md="oninput"in document;if(!md){var og=document.createElement("div");og.setAttribute("oninput","return;"),md=typeof og.oninput=="function"}pd=md}else pd=!1;C_=pd&&(!document.documentMode||9<document.documentMode)}function ag(){ia&&(ia.detachEvent("onpropertychange",x_),Ia=ia=null)}function x_(t){if(t.propertyName==="value"&&hu(Ia)){var e=[];A_(e,Ia,t,Sf(t)),o_(oS,e)}}function lS(t,e,n){t==="focusin"?(ag(),ia=e,Ia=n,ia.attachEvent("onpropertychange",x_)):t==="focusout"&&ag()}function cS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hu(Ia)}function uS(t,e){if(t==="click")return hu(e)}function dS(t,e){if(t==="input"||t==="change")return hu(e)}function hS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:hS;function Sa(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!qd.call(e,s)||!Qn(t[s],e[s]))return!1}return!0}function lg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cg(t,e){var n=lg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lg(n)}}function P_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?P_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function k_(){for(var t=window,e=gc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gc(t.document)}return e}function Df(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fS(t){var e=k_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&P_(n.ownerDocument.documentElement,n)){if(r!==null&&Df(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=cg(n,i);var o=cg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pS=Vr&&"documentMode"in document&&11>=document.documentMode,Oi=null,uh=null,oa=null,dh=!1;function ug(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dh||Oi==null||Oi!==gc(r)||(r=Oi,"selectionStart"in r&&Df(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oa&&Sa(oa,r)||(oa=r,r=Ic(uh,"onSelect"),0<r.length&&(e=new Rf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oi)))}function jl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mi={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionend:jl("Transition","TransitionEnd")},gd={},R_={};Vr&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function fu(t){if(gd[t])return gd[t];if(!Mi[t])return t;var e=Mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R_)return gd[t]=e[n];return t}var N_=fu("animationend"),j_=fu("animationiteration"),D_=fu("animationstart"),b_=fu("transitionend"),O_=new Map,dg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function js(t,e){O_.set(t,e),mi(e,[t])}for(var vd=0;vd<dg.length;vd++){var yd=dg[vd],mS=yd.toLowerCase(),gS=yd[0].toUpperCase()+yd.slice(1);js(mS,"on"+gS)}js(N_,"onAnimationEnd");js(j_,"onAnimationIteration");js(D_,"onAnimationStart");js("dblclick","onDoubleClick");js("focusin","onFocus");js("focusout","onBlur");js(b_,"onTransitionEnd");to("onMouseEnter",["mouseout","mouseover"]);to("onMouseLeave",["mouseout","mouseover"]);to("onPointerEnter",["pointerout","pointerover"]);to("onPointerLeave",["pointerout","pointerover"]);mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mi("onBeforeInput",["compositionend","keypress","textInput","paste"]);mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function hg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mI(r,e,void 0,t),t.currentTarget=null}function M_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;hg(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;hg(s,c,d),i=u}}}if(yc)throw t=oh,yc=!1,oh=null,t}function Ye(t,e){var n=e[gh];n===void 0&&(n=e[gh]=new Set);var r=t+"__bubble";n.has(r)||(V_(e,t,2,!1),n.add(r))}function _d(t,e,n){var r=0;e&&(r|=4),V_(n,t,r,e)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function Aa(t){if(!t[Dl]){t[Dl]=!0,Hy.forEach(function(n){n!=="selectionchange"&&(vS.has(n)||_d(n,!1,t),_d(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dl]||(e[Dl]=!0,_d("selectionchange",!1,e))}}function V_(t,e,n,r){switch(w_(e)){case 1:var s=NI;break;case 4:s=jI;break;default:s=Pf}n=s.bind(null,e,n,t),s=void 0,!ih||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function wd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Ks(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}o_(function(){var d=i,f=Sf(n),m=[];e:{var g=O_.get(t);if(g!==void 0){var w=Rf,P=t;switch(t){case"keypress":if(Jl(n)===0)break e;case"keydown":case"keyup":w=GI;break;case"focusin":P="focus",w=fd;break;case"focusout":P="blur",w=fd;break;case"beforeblur":case"afterblur":w=fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=OI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=YI;break;case N_:case j_:case D_:w=LI;break;case b_:w=JI;break;case"scroll":w=DI;break;case"wheel":w=eS;break;case"copy":case"cut":case"paste":w=UI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ng}var b=(e&4)!==0,U=!b&&t==="scroll",A=b?g!==null?g+"Capture":null:g;b=[];for(var I=d,S;I!==null;){S=I;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,A!==null&&(D=_a(I,A),D!=null&&b.push(Ca(I,D,S)))),U)break;I=I.return}0<b.length&&(g=new w(g,P,null,n,f),m.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==rh&&(P=n.relatedTarget||n.fromElement)&&(Ks(P)||P[Lr]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(P=n.relatedTarget||n.toElement,w=d,P=P?Ks(P):null,P!==null&&(U=gi(P),P!==U||P.tag!==5&&P.tag!==6)&&(P=null)):(w=null,P=d),w!==P)){if(b=eg,D="onMouseLeave",A="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(b=ng,D="onPointerLeave",A="onPointerEnter",I="pointer"),U=w==null?g:Vi(w),S=P==null?g:Vi(P),g=new b(D,I+"leave",w,n,f),g.target=U,g.relatedTarget=S,D=null,Ks(f)===d&&(b=new b(A,I+"enter",P,n,f),b.target=S,b.relatedTarget=U,D=b),U=D,w&&P)t:{for(b=w,A=P,I=0,S=b;S;S=Ci(S))I++;for(S=0,D=A;D;D=Ci(D))S++;for(;0<I-S;)b=Ci(b),I--;for(;0<S-I;)A=Ci(A),S--;for(;I--;){if(b===A||A!==null&&b===A.alternate)break t;b=Ci(b),A=Ci(A)}b=null}else b=null;w!==null&&fg(m,g,w,b,!1),P!==null&&U!==null&&fg(m,U,P,b,!0)}}e:{if(g=d?Vi(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var k=aS;else if(ig(g))if(C_)k=dS;else{k=cS;var V=lS}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(k=uS);if(k&&(k=k(t,d))){A_(m,k,n,f);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&Jd(g,"number",g.value)}switch(V=d?Vi(d):window,t){case"focusin":(ig(V)||V.contentEditable==="true")&&(Oi=V,uh=d,oa=null);break;case"focusout":oa=uh=Oi=null;break;case"mousedown":dh=!0;break;case"contextmenu":case"mouseup":case"dragend":dh=!1,ug(m,n,f);break;case"selectionchange":if(pS)break;case"keydown":case"keyup":ug(m,n,f)}var v;if(jf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else bi?I_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(T_&&n.locale!=="ko"&&(bi||y!=="onCompositionStart"?y==="onCompositionEnd"&&bi&&(v=E_()):(as=f,kf="value"in as?as.value:as.textContent,bi=!0)),V=Ic(d,y),0<V.length&&(y=new tg(y,t,null,n,f),m.push({event:y,listeners:V}),v?y.data=v:(v=S_(n),v!==null&&(y.data=v)))),(v=nS?rS(t,n):sS(t,n))&&(d=Ic(d,"onBeforeInput"),0<d.length&&(f=new tg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=v))}M_(m,e)})}function Ca(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ic(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_a(t,n),i!=null&&r.unshift(Ca(t,i,s)),i=_a(t,e),i!=null&&r.push(Ca(t,i,s))),t=t.return}return r}function Ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=_a(n,i),u!=null&&o.unshift(Ca(n,u,c))):s||(u=_a(n,i),u!=null&&o.push(Ca(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yS=/\r\n?/g,_S=/\u0000|\uFFFD/g;function pg(t){return(typeof t=="string"?t:""+t).replace(yS,`
`).replace(_S,"")}function bl(t,e,n){if(e=pg(e),pg(t)!==e&&n)throw Error(X(425))}function Sc(){}var hh=null,fh=null;function ph(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mh=typeof setTimeout=="function"?setTimeout:void 0,wS=typeof clearTimeout=="function"?clearTimeout:void 0,mg=typeof Promise=="function"?Promise:void 0,ES=typeof queueMicrotask=="function"?queueMicrotask:typeof mg<"u"?function(t){return mg.resolve(null).then(t).catch(TS)}:mh;function TS(t){setTimeout(function(){throw t})}function Ed(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ta(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ta(e)}function fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vo=Math.random().toString(36).slice(2),ar="__reactFiber$"+vo,xa="__reactProps$"+vo,Lr="__reactContainer$"+vo,gh="__reactEvents$"+vo,IS="__reactListeners$"+vo,SS="__reactHandles$"+vo;function Ks(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gg(t);t!==null;){if(n=t[ar])return n;t=gg(t)}return e}t=n,n=t.parentNode}return null}function Ka(t){return t=t[ar]||t[Lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function pu(t){return t[xa]||null}var vh=[],Li=-1;function Ds(t){return{current:t}}function Je(t){0>Li||(t.current=vh[Li],vh[Li]=null,Li--)}function We(t,e){Li++,vh[Li]=t.current,t.current=e}var Is={},Jt=Ds(Is),fn=Ds(!1),ri=Is;function no(t,e){var n=t.type.contextTypes;if(!n)return Is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pn(t){return t=t.childContextTypes,t!=null}function Ac(){Je(fn),Je(Jt)}function vg(t,e,n){if(Jt.current!==Is)throw Error(X(168));We(Jt,e),We(fn,n)}function L_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(X(108,lI(t)||"Unknown",s));return ot({},n,r)}function Cc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Is,ri=Jt.current,We(Jt,t),We(fn,fn.current),!0}function yg(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=L_(t,e,ri),r.__reactInternalMemoizedMergedChildContext=t,Je(fn),Je(Jt),We(Jt,t)):Je(fn),We(fn,n)}var Pr=null,mu=!1,Td=!1;function F_(t){Pr===null?Pr=[t]:Pr.push(t)}function AS(t){mu=!0,F_(t)}function bs(){if(!Td&&Pr!==null){Td=!0;var t=0,e=Ue;try{var n=Pr;for(Ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pr=null,mu=!1}catch(s){throw Pr!==null&&(Pr=Pr.slice(t+1)),u_(Af,bs),s}finally{Ue=e,Td=!1}}return null}var Fi=[],Ui=0,xc=null,Pc=0,kn=[],Rn=0,si=null,kr=1,Rr="";function Hs(t,e){Fi[Ui++]=Pc,Fi[Ui++]=xc,xc=t,Pc=e}function U_(t,e,n){kn[Rn++]=kr,kn[Rn++]=Rr,kn[Rn++]=si,si=t;var r=kr;t=Rr;var s=32-Gn(r)-1;r&=~(1<<s),n+=1;var i=32-Gn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,kr=1<<32-Gn(e)+s|n<<s|r,Rr=i+t}else kr=1<<i|n<<s|r,Rr=t}function bf(t){t.return!==null&&(Hs(t,1),U_(t,1,0))}function Of(t){for(;t===xc;)xc=Fi[--Ui],Fi[Ui]=null,Pc=Fi[--Ui],Fi[Ui]=null;for(;t===si;)si=kn[--Rn],kn[Rn]=null,Rr=kn[--Rn],kn[Rn]=null,kr=kn[--Rn],kn[Rn]=null}var In=null,En=null,et=!1,qn=null;function z_(t,e){var n=jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _g(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,In=t,En=fs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,In=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=si!==null?{id:kr,overflow:Rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,In=t,En=null,!0):!1;default:return!1}}function yh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _h(t){if(et){var e=En;if(e){var n=e;if(!_g(t,e)){if(yh(t))throw Error(X(418));e=fs(n.nextSibling);var r=In;e&&_g(t,e)?z_(r,n):(t.flags=t.flags&-4097|2,et=!1,In=t)}}else{if(yh(t))throw Error(X(418));t.flags=t.flags&-4097|2,et=!1,In=t}}}function wg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;In=t}function Ol(t){if(t!==In)return!1;if(!et)return wg(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ph(t.type,t.memoizedProps)),e&&(e=En)){if(yh(t))throw B_(),Error(X(418));for(;e;)z_(t,e),e=fs(e.nextSibling)}if(wg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=fs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=In?fs(t.stateNode.nextSibling):null;return!0}function B_(){for(var t=En;t;)t=fs(t.nextSibling)}function ro(){En=In=null,et=!1}function Mf(t){qn===null?qn=[t]:qn.push(t)}var CS=Wr.ReactCurrentBatchConfig;function Bo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function Ml(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Eg(t){var e=t._init;return e(t._payload)}function $_(t){function e(A,I){if(t){var S=A.deletions;S===null?(A.deletions=[I],A.flags|=16):S.push(I)}}function n(A,I){if(!t)return null;for(;I!==null;)e(A,I),I=I.sibling;return null}function r(A,I){for(A=new Map;I!==null;)I.key!==null?A.set(I.key,I):A.set(I.index,I),I=I.sibling;return A}function s(A,I){return A=vs(A,I),A.index=0,A.sibling=null,A}function i(A,I,S){return A.index=S,t?(S=A.alternate,S!==null?(S=S.index,S<I?(A.flags|=2,I):S):(A.flags|=2,I)):(A.flags|=1048576,I)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function c(A,I,S,D){return I===null||I.tag!==6?(I=kd(S,A.mode,D),I.return=A,I):(I=s(I,S),I.return=A,I)}function u(A,I,S,D){var k=S.type;return k===Di?f(A,I,S.props.children,D,S.key):I!==null&&(I.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Jr&&Eg(k)===I.type)?(D=s(I,S.props),D.ref=Bo(A,I,S),D.return=A,D):(D=ic(S.type,S.key,S.props,null,A.mode,D),D.ref=Bo(A,I,S),D.return=A,D)}function d(A,I,S,D){return I===null||I.tag!==4||I.stateNode.containerInfo!==S.containerInfo||I.stateNode.implementation!==S.implementation?(I=Rd(S,A.mode,D),I.return=A,I):(I=s(I,S.children||[]),I.return=A,I)}function f(A,I,S,D,k){return I===null||I.tag!==7?(I=ei(S,A.mode,D,k),I.return=A,I):(I=s(I,S),I.return=A,I)}function m(A,I,S){if(typeof I=="string"&&I!==""||typeof I=="number")return I=kd(""+I,A.mode,S),I.return=A,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Al:return S=ic(I.type,I.key,I.props,null,A.mode,S),S.ref=Bo(A,null,I),S.return=A,S;case ji:return I=Rd(I,A.mode,S),I.return=A,I;case Jr:var D=I._init;return m(A,D(I._payload),S)}if(Wo(I)||Vo(I))return I=ei(I,A.mode,S,null),I.return=A,I;Ml(A,I)}return null}function g(A,I,S,D){var k=I!==null?I.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return k!==null?null:c(A,I,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:return S.key===k?u(A,I,S,D):null;case ji:return S.key===k?d(A,I,S,D):null;case Jr:return k=S._init,g(A,I,k(S._payload),D)}if(Wo(S)||Vo(S))return k!==null?null:f(A,I,S,D,null);Ml(A,S)}return null}function w(A,I,S,D,k){if(typeof D=="string"&&D!==""||typeof D=="number")return A=A.get(S)||null,c(I,A,""+D,k);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Al:return A=A.get(D.key===null?S:D.key)||null,u(I,A,D,k);case ji:return A=A.get(D.key===null?S:D.key)||null,d(I,A,D,k);case Jr:var V=D._init;return w(A,I,S,V(D._payload),k)}if(Wo(D)||Vo(D))return A=A.get(S)||null,f(I,A,D,k,null);Ml(I,D)}return null}function P(A,I,S,D){for(var k=null,V=null,v=I,y=I=0,T=null;v!==null&&y<S.length;y++){v.index>y?(T=v,v=null):T=v.sibling;var C=g(A,v,S[y],D);if(C===null){v===null&&(v=T);break}t&&v&&C.alternate===null&&e(A,v),I=i(C,I,y),V===null?k=C:V.sibling=C,V=C,v=T}if(y===S.length)return n(A,v),et&&Hs(A,y),k;if(v===null){for(;y<S.length;y++)v=m(A,S[y],D),v!==null&&(I=i(v,I,y),V===null?k=v:V.sibling=v,V=v);return et&&Hs(A,y),k}for(v=r(A,v);y<S.length;y++)T=w(v,A,y,S[y],D),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?y:T.key),I=i(T,I,y),V===null?k=T:V.sibling=T,V=T);return t&&v.forEach(function(R){return e(A,R)}),et&&Hs(A,y),k}function b(A,I,S,D){var k=Vo(S);if(typeof k!="function")throw Error(X(150));if(S=k.call(S),S==null)throw Error(X(151));for(var V=k=null,v=I,y=I=0,T=null,C=S.next();v!==null&&!C.done;y++,C=S.next()){v.index>y?(T=v,v=null):T=v.sibling;var R=g(A,v,C.value,D);if(R===null){v===null&&(v=T);break}t&&v&&R.alternate===null&&e(A,v),I=i(R,I,y),V===null?k=R:V.sibling=R,V=R,v=T}if(C.done)return n(A,v),et&&Hs(A,y),k;if(v===null){for(;!C.done;y++,C=S.next())C=m(A,C.value,D),C!==null&&(I=i(C,I,y),V===null?k=C:V.sibling=C,V=C);return et&&Hs(A,y),k}for(v=r(A,v);!C.done;y++,C=S.next())C=w(v,A,y,C.value,D),C!==null&&(t&&C.alternate!==null&&v.delete(C.key===null?y:C.key),I=i(C,I,y),V===null?k=C:V.sibling=C,V=C);return t&&v.forEach(function(j){return e(A,j)}),et&&Hs(A,y),k}function U(A,I,S,D){if(typeof S=="object"&&S!==null&&S.type===Di&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:e:{for(var k=S.key,V=I;V!==null;){if(V.key===k){if(k=S.type,k===Di){if(V.tag===7){n(A,V.sibling),I=s(V,S.props.children),I.return=A,A=I;break e}}else if(V.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Jr&&Eg(k)===V.type){n(A,V.sibling),I=s(V,S.props),I.ref=Bo(A,V,S),I.return=A,A=I;break e}n(A,V);break}else e(A,V);V=V.sibling}S.type===Di?(I=ei(S.props.children,A.mode,D,S.key),I.return=A,A=I):(D=ic(S.type,S.key,S.props,null,A.mode,D),D.ref=Bo(A,I,S),D.return=A,A=D)}return o(A);case ji:e:{for(V=S.key;I!==null;){if(I.key===V)if(I.tag===4&&I.stateNode.containerInfo===S.containerInfo&&I.stateNode.implementation===S.implementation){n(A,I.sibling),I=s(I,S.children||[]),I.return=A,A=I;break e}else{n(A,I);break}else e(A,I);I=I.sibling}I=Rd(S,A.mode,D),I.return=A,A=I}return o(A);case Jr:return V=S._init,U(A,I,V(S._payload),D)}if(Wo(S))return P(A,I,S,D);if(Vo(S))return b(A,I,S,D);Ml(A,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,I!==null&&I.tag===6?(n(A,I.sibling),I=s(I,S),I.return=A,A=I):(n(A,I),I=kd(S,A.mode,D),I.return=A,A=I),o(A)):n(A,I)}return U}var so=$_(!0),H_=$_(!1),kc=Ds(null),Rc=null,zi=null,Vf=null;function Lf(){Vf=zi=Rc=null}function Ff(t){var e=kc.current;Je(kc),t._currentValue=e}function wh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qi(t,e){Rc=t,Vf=zi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function On(t){var e=t._currentValue;if(Vf!==t)if(t={context:t,memoizedValue:e,next:null},zi===null){if(Rc===null)throw Error(X(308));zi=t,Rc.dependencies={lanes:0,firstContext:t}}else zi=zi.next=t;return e}var Qs=null;function Uf(t){Qs===null?Qs=[t]:Qs.push(t)}function q_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Uf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zr=!1;function zf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ps(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Fr(t,n)}return s=r.interleaved,s===null?(e.next=e,Uf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Fr(t,n)}function Zl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cf(t,n)}}function Tg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nc(t,e,n,r){var s=t.updateQueue;Zr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,c=i;do{var g=c.lane,w=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var P=t,b=c;switch(g=e,w=n,b.tag){case 1:if(P=b.payload,typeof P=="function"){m=P.call(w,m,g);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=b.payload,g=typeof P=="function"?P.call(w,m,g):P,g==null)break e;m=ot({},m,g);break e;case 2:Zr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=w,u=m):f=f.next=w,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);oi|=o,t.lanes=o,t.memoizedState=m}}function Ig(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(X(191,s));s.call(r)}}}var Qa={},cr=Ds(Qa),Pa=Ds(Qa),ka=Ds(Qa);function Ys(t){if(t===Qa)throw Error(X(174));return t}function Bf(t,e){switch(We(ka,e),We(Pa,t),We(cr,Qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:eh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=eh(e,t)}Je(cr),We(cr,e)}function io(){Je(cr),Je(Pa),Je(ka)}function G_(t){Ys(ka.current);var e=Ys(cr.current),n=eh(e,t.type);e!==n&&(We(Pa,t),We(cr,n))}function $f(t){Pa.current===t&&(Je(cr),Je(Pa))}var st=Ds(0);function jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Id=[];function Hf(){for(var t=0;t<Id.length;t++)Id[t]._workInProgressVersionPrimary=null;Id.length=0}var ec=Wr.ReactCurrentDispatcher,Sd=Wr.ReactCurrentBatchConfig,ii=0,it=null,St=null,kt=null,Dc=!1,aa=!1,Ra=0,xS=0;function Wt(){throw Error(X(321))}function qf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function Wf(t,e,n,r,s,i){if(ii=i,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ec.current=t===null||t.memoizedState===null?NS:jS,t=n(r,s),aa){i=0;do{if(aa=!1,Ra=0,25<=i)throw Error(X(301));i+=1,kt=St=null,e.updateQueue=null,ec.current=DS,t=n(r,s)}while(aa)}if(ec.current=bc,e=St!==null&&St.next!==null,ii=0,kt=St=it=null,Dc=!1,e)throw Error(X(300));return t}function Gf(){var t=Ra!==0;return Ra=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?it.memoizedState=kt=t:kt=kt.next=t,kt}function Mn(){if(St===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var e=kt===null?it.memoizedState:kt.next;if(e!==null)kt=e,St=t;else{if(t===null)throw Error(X(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},kt===null?it.memoizedState=kt=t:kt=kt.next=t}return kt}function Na(t,e){return typeof e=="function"?e(t):e}function Ad(t){var e=Mn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=St,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((ii&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,it.lanes|=f,oi|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,Qn(r,e.memoizedState)||(dn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,it.lanes|=i,oi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cd(t){var e=Mn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Qn(i,e.memoizedState)||(dn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function K_(){}function Q_(t,e){var n=it,r=Mn(),s=e(),i=!Qn(r.memoizedState,s);if(i&&(r.memoizedState=s,dn=!0),r=r.queue,Kf(J_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,ja(9,X_.bind(null,n,r,s,e),void 0,null),Rt===null)throw Error(X(349));ii&30||Y_(n,e,s)}return s}function Y_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function X_(t,e,n,r){e.value=n,e.getSnapshot=r,Z_(e)&&e0(t)}function J_(t,e,n){return n(function(){Z_(e)&&e0(t)})}function Z_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function e0(t){var e=Fr(t,1);e!==null&&Kn(e,t,1,-1)}function Sg(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},e.queue=t,t=t.dispatch=RS.bind(null,it,t),[e.memoizedState,t]}function ja(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function t0(){return Mn().memoizedState}function tc(t,e,n,r){var s=sr();it.flags|=t,s.memoizedState=ja(1|e,n,void 0,r===void 0?null:r)}function gu(t,e,n,r){var s=Mn();r=r===void 0?null:r;var i=void 0;if(St!==null){var o=St.memoizedState;if(i=o.destroy,r!==null&&qf(r,o.deps)){s.memoizedState=ja(e,n,i,r);return}}it.flags|=t,s.memoizedState=ja(1|e,n,i,r)}function Ag(t,e){return tc(8390656,8,t,e)}function Kf(t,e){return gu(2048,8,t,e)}function n0(t,e){return gu(4,2,t,e)}function r0(t,e){return gu(4,4,t,e)}function s0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function i0(t,e,n){return n=n!=null?n.concat([t]):null,gu(4,4,s0.bind(null,e,t),n)}function Qf(){}function o0(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function a0(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function l0(t,e,n){return ii&21?(Qn(n,e)||(n=f_(),it.lanes|=n,oi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function PS(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var r=Sd.transition;Sd.transition={};try{t(!1),e()}finally{Ue=n,Sd.transition=r}}function c0(){return Mn().memoizedState}function kS(t,e,n){var r=gs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},u0(t))d0(e,n);else if(n=q_(t,e,n,r),n!==null){var s=nn();Kn(n,t,r,s),h0(n,e,r)}}function RS(t,e,n){var r=gs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(u0(t))d0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,Qn(c,o)){var u=e.interleaved;u===null?(s.next=s,Uf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=q_(t,e,s,r),n!==null&&(s=nn(),Kn(n,t,r,s),h0(n,e,r))}}function u0(t){var e=t.alternate;return t===it||e!==null&&e===it}function d0(t,e){aa=Dc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function h0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cf(t,n)}}var bc={readContext:On,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},NS={readContext:On,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:On,useEffect:Ag,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tc(4194308,4,s0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tc(4194308,4,t,e)},useInsertionEffect:function(t,e){return tc(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kS.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:Sg,useDebugValue:Qf,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=Sg(!1),e=t[0];return t=PS.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,s=sr();if(et){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Rt===null)throw Error(X(349));ii&30||Y_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ag(J_.bind(null,r,i,t),[t]),r.flags|=2048,ja(9,X_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=sr(),e=Rt.identifierPrefix;if(et){var n=Rr,r=kr;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ra++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jS={readContext:On,useCallback:o0,useContext:On,useEffect:Kf,useImperativeHandle:i0,useInsertionEffect:n0,useLayoutEffect:r0,useMemo:a0,useReducer:Ad,useRef:t0,useState:function(){return Ad(Na)},useDebugValue:Qf,useDeferredValue:function(t){var e=Mn();return l0(e,St.memoizedState,t)},useTransition:function(){var t=Ad(Na)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:K_,useSyncExternalStore:Q_,useId:c0,unstable_isNewReconciler:!1},DS={readContext:On,useCallback:o0,useContext:On,useEffect:Kf,useImperativeHandle:i0,useInsertionEffect:n0,useLayoutEffect:r0,useMemo:a0,useReducer:Cd,useRef:t0,useState:function(){return Cd(Na)},useDebugValue:Qf,useDeferredValue:function(t){var e=Mn();return St===null?e.memoizedState=t:l0(e,St.memoizedState,t)},useTransition:function(){var t=Cd(Na)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:K_,useSyncExternalStore:Q_,useId:c0,unstable_isNewReconciler:!1};function $n(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Eh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vu={isMounted:function(t){return(t=t._reactInternals)?gi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nn(),s=gs(t),i=br(r,s);i.payload=e,n!=null&&(i.callback=n),e=ps(t,i,s),e!==null&&(Kn(e,t,s,r),Zl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nn(),s=gs(t),i=br(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ps(t,i,s),e!==null&&(Kn(e,t,s,r),Zl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),r=gs(t),s=br(n,r);s.tag=2,e!=null&&(s.callback=e),e=ps(t,s,r),e!==null&&(Kn(e,t,r,n),Zl(e,t,r))}};function Cg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Sa(n,r)||!Sa(s,i):!0}function f0(t,e,n){var r=!1,s=Is,i=e.contextType;return typeof i=="object"&&i!==null?i=On(i):(s=pn(e)?ri:Jt.current,r=e.contextTypes,i=(r=r!=null)?no(t,s):Is),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function xg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vu.enqueueReplaceState(e,e.state,null)}function Th(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},zf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=On(i):(i=pn(e)?ri:Jt.current,s.context=no(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Eh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&vu.enqueueReplaceState(s,s.state,null),Nc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function oo(t,e){try{var n="",r=e;do n+=aI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function xd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ih(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bS=typeof WeakMap=="function"?WeakMap:Map;function p0(t,e,n){n=br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mc||(Mc=!0,Dh=r),Ih(t,e)},n}function m0(t,e,n){n=br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ih(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ih(t,e),typeof r!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Pg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=KS.bind(null,t,e,n),e.then(t,t))}function kg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=br(-1,1),e.tag=2,ps(n,e,1))),n.lanes|=1),t)}var OS=Wr.ReactCurrentOwner,dn=!1;function tn(t,e,n,r){e.child=t===null?H_(e,null,n,r):so(e,t.child,n,r)}function Ng(t,e,n,r,s){n=n.render;var i=e.ref;return Qi(e,s),r=Wf(t,e,n,r,i,s),n=Gf(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ur(t,e,s)):(et&&n&&bf(e),e.flags|=1,tn(t,e,r,s),e.child)}function jg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!rp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,g0(t,e,i,r,s)):(t=ic(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Sa,n(o,r)&&t.ref===e.ref)return Ur(t,e,s)}return e.flags|=1,t=vs(i,r),t.ref=e.ref,t.return=e,e.child=t}function g0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Sa(i,r)&&t.ref===e.ref)if(dn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,Ur(t,e,s)}return Sh(t,e,n,r,s)}function v0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We($i,yn),yn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We($i,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,We($i,yn),yn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,We($i,yn),yn|=r;return tn(t,e,s,n),e.child}function y0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sh(t,e,n,r,s){var i=pn(n)?ri:Jt.current;return i=no(e,i),Qi(e,s),n=Wf(t,e,n,r,i,s),r=Gf(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ur(t,e,s)):(et&&r&&bf(e),e.flags|=1,tn(t,e,n,s),e.child)}function Dg(t,e,n,r,s){if(pn(n)){var i=!0;Cc(e)}else i=!1;if(Qi(e,s),e.stateNode===null)nc(t,e),f0(e,n,r),Th(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=On(d):(d=pn(n)?ri:Jt.current,d=no(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&xg(e,o,r,d),Zr=!1;var g=e.memoizedState;o.state=g,Nc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||fn.current||Zr?(typeof f=="function"&&(Eh(e,n,f,r),u=e.memoizedState),(c=Zr||Cg(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,W_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:$n(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=On(u):(u=pn(n)?ri:Jt.current,u=no(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&xg(e,o,r,u),Zr=!1,g=e.memoizedState,o.state=g,Nc(e,r,o,s);var P=e.memoizedState;c!==m||g!==P||fn.current||Zr?(typeof w=="function"&&(Eh(e,n,w,r),P=e.memoizedState),(d=Zr||Cg(e,n,d,r,g,P,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ah(t,e,n,r,i,s)}function Ah(t,e,n,r,s,i){y0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&yg(e,n,!1),Ur(t,e,i);r=e.stateNode,OS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=so(e,t.child,null,i),e.child=so(e,null,c,i)):tn(t,e,c,i),e.memoizedState=r.state,s&&yg(e,n,!0),e.child}function _0(t){var e=t.stateNode;e.pendingContext?vg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vg(t,e.context,!1),Bf(t,e.containerInfo)}function bg(t,e,n,r,s){return ro(),Mf(s),e.flags|=256,tn(t,e,n,r),e.child}var Ch={dehydrated:null,treeContext:null,retryLane:0};function xh(t){return{baseLanes:t,cachePool:null,transitions:null}}function w0(t,e,n){var r=e.pendingProps,s=st.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),We(st,s&1),t===null)return _h(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wu(o,r,0,null),t=ei(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=xh(n),e.memoizedState=Ch,t):Yf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return MS(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=vs(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=vs(c,i):(i=ei(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?xh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ch,r}return i=t.child,t=i.sibling,r=vs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yf(t,e){return e=wu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,r){return r!==null&&Mf(r),so(e,t.child,null,n),t=Yf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=xd(Error(X(422))),Vl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=wu({mode:"visible",children:r.children},s,0,null),i=ei(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&so(e,t.child,null,o),e.child.memoizedState=xh(o),e.memoizedState=Ch,i);if(!(e.mode&1))return Vl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(X(419)),r=xd(i,r,void 0),Vl(t,e,o,r)}if(c=(o&t.childLanes)!==0,dn||c){if(r=Rt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Fr(t,s),Kn(r,t,s,-1))}return np(),r=xd(Error(X(421))),Vl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=QS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,En=fs(s.nextSibling),In=e,et=!0,qn=null,t!==null&&(kn[Rn++]=kr,kn[Rn++]=Rr,kn[Rn++]=si,kr=t.id,Rr=t.overflow,si=e),e=Yf(e,r.children),e.flags|=4096,e)}function Og(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wh(t.return,e,n)}function Pd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function E0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(tn(t,e,r.children,n),r=st.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Og(t,n,e);else if(t.tag===19)Og(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(We(st,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&jc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Pd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&jc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Pd(e,!0,n,null,i);break;case"together":Pd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ur(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=vs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function VS(t,e,n){switch(e.tag){case 3:_0(e),ro();break;case 5:G_(e);break;case 1:pn(e.type)&&Cc(e);break;case 4:Bf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;We(kc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(We(st,st.current&1),e.flags|=128,null):n&e.child.childLanes?w0(t,e,n):(We(st,st.current&1),t=Ur(t,e,n),t!==null?t.sibling:null);We(st,st.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return E0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),We(st,st.current),r)break;return null;case 22:case 23:return e.lanes=0,v0(t,e,n)}return Ur(t,e,n)}var T0,Ph,I0,S0;T0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ph=function(){};I0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ys(cr.current);var i=null;switch(n){case"input":s=Yd(t,s),r=Yd(t,r),i=[];break;case"select":s=ot({},s,{value:void 0}),r=ot({},r,{value:void 0}),i=[];break;case"textarea":s=Zd(t,s),r=Zd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sc)}th(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(va.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(va.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ye("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};S0=function(t,e,n,r){n!==r&&(e.flags|=4)};function $o(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LS(t,e,n){var r=e.pendingProps;switch(Of(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return pn(e.type)&&Ac(),Gt(e),null;case 3:return r=e.stateNode,io(),Je(fn),Je(Jt),Hf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qn!==null&&(Mh(qn),qn=null))),Ph(t,e),Gt(e),null;case 5:$f(e);var s=Ys(ka.current);if(n=e.type,t!==null&&e.stateNode!=null)I0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Gt(e),null}if(t=Ys(cr.current),Ol(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ar]=e,r[xa]=i,t=(e.mode&1)!==0,n){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(s=0;s<Ko.length;s++)Ye(Ko[s],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":Hm(r,i),Ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ye("invalid",r);break;case"textarea":Wm(r,i),Ye("invalid",r)}th(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,c,t),s=["children",""+c]):va.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ye("scroll",r)}switch(n){case"input":Cl(r),qm(r,i,!0);break;case"textarea":Cl(r),Gm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ar]=e,t[xa]=r,T0(t,e,!1,!1),e.stateNode=t;e:{switch(o=nh(n,r),n){case"dialog":Ye("cancel",t),Ye("close",t),s=r;break;case"iframe":case"object":case"embed":Ye("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ko.length;s++)Ye(Ko[s],t);s=r;break;case"source":Ye("error",t),s=r;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),s=r;break;case"details":Ye("toggle",t),s=r;break;case"input":Hm(t,r),s=Yd(t,r),Ye("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ot({},r,{value:void 0}),Ye("invalid",t);break;case"textarea":Wm(t,r),s=Zd(t,r),Ye("invalid",t);break;default:s=r}th(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?t_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Zy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ya(t,u):typeof u=="number"&&ya(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(va.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ye("scroll",t):u!=null&&wf(t,i,u,o))}switch(n){case"input":Cl(t),qm(t,r,!1);break;case"textarea":Cl(t),Gm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ts(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?qi(t,!!r.multiple,i,!1):r.defaultValue!=null&&qi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)S0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=Ys(ka.current),Ys(cr.current),Ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(i=r.nodeValue!==n)&&(t=In,t!==null))switch(t.tag){case 3:bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return Gt(e),null;case 13:if(Je(st),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&En!==null&&e.mode&1&&!(e.flags&128))B_(),ro(),e.flags|=98560,i=!1;else if(i=Ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[ar]=e}else ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),i=!1}else qn!==null&&(Mh(qn),qn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||st.current&1?At===0&&(At=3):np())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return io(),Ph(t,e),t===null&&Aa(e.stateNode.containerInfo),Gt(e),null;case 10:return Ff(e.type._context),Gt(e),null;case 17:return pn(e.type)&&Ac(),Gt(e),null;case 19:if(Je(st),i=e.memoizedState,i===null)return Gt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$o(i,!1);else{if(At!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jc(t),o!==null){for(e.flags|=128,$o(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(st,st.current&1|2),e.child}t=t.sibling}i.tail!==null&&mt()>ao&&(e.flags|=128,r=!0,$o(i,!1),e.lanes=4194304)}else{if(!r)if(t=jc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$o(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!et)return Gt(e),null}else 2*mt()-i.renderingStartTime>ao&&n!==1073741824&&(e.flags|=128,r=!0,$o(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mt(),e.sibling=null,n=st.current,We(st,r?n&1|2:n&1),e):(Gt(e),null);case 22:case 23:return tp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yn&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function FS(t,e){switch(Of(e),e.tag){case 1:return pn(e.type)&&Ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return io(),Je(fn),Je(Jt),Hf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $f(e),null;case 13:if(Je(st),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(st),null;case 4:return io(),null;case 10:return Ff(e.type._context),null;case 22:case 23:return tp(),null;case 24:return null;default:return null}}var Ll=!1,Yt=!1,US=typeof WeakSet=="function"?WeakSet:Set,le=null;function Bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(t,e,r)}else n.current=null}function kh(t,e,n){try{n()}catch(r){dt(t,e,r)}}var Mg=!1;function zS(t,e){if(hh=Ec,t=k_(),Df(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(w=m.firstChild)!==null;)g=m,m=w;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++f===r&&(u=o),(w=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(fh={focusedElem:t,selectionRange:n},Ec=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var b=P.memoizedProps,U=P.memoizedState,A=e.stateNode,I=A.getSnapshotBeforeUpdate(e.elementType===e.type?b:$n(e.type,b),U);A.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(D){dt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return P=Mg,Mg=!1,P}function la(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&kh(e,n,i)}s=s.next}while(s!==r)}}function yu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Rh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function A0(t){var e=t.alternate;e!==null&&(t.alternate=null,A0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[xa],delete e[gh],delete e[IS],delete e[SS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function C0(t){return t.tag===5||t.tag===3||t.tag===4}function Vg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||C0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sc));else if(r!==4&&(t=t.child,t!==null))for(Nh(t,e,n),t=t.sibling;t!==null;)Nh(t,e,n),t=t.sibling}function jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jh(t,e,n),t=t.sibling;t!==null;)jh(t,e,n),t=t.sibling}var Ot=null,Hn=!1;function Yr(t,e,n){for(n=n.child;n!==null;)x0(t,e,n),n=n.sibling}function x0(t,e,n){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(uu,n)}catch{}switch(n.tag){case 5:Yt||Bi(n,e);case 6:var r=Ot,s=Hn;Ot=null,Yr(t,e,n),Ot=r,Hn=s,Ot!==null&&(Hn?(t=Ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(Hn?(t=Ot,n=n.stateNode,t.nodeType===8?Ed(t.parentNode,n):t.nodeType===1&&Ed(t,n),Ta(t)):Ed(Ot,n.stateNode));break;case 4:r=Ot,s=Hn,Ot=n.stateNode.containerInfo,Hn=!0,Yr(t,e,n),Ot=r,Hn=s;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&kh(n,e,o),s=s.next}while(s!==r)}Yr(t,e,n);break;case 1:if(!Yt&&(Bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){dt(n,e,c)}Yr(t,e,n);break;case 21:Yr(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,Yr(t,e,n),Yt=r):Yr(t,e,n);break;default:Yr(t,e,n)}}function Lg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new US),e.forEach(function(r){var s=YS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Ot=c.stateNode,Hn=!1;break e;case 3:Ot=c.stateNode.containerInfo,Hn=!0;break e;case 4:Ot=c.stateNode.containerInfo,Hn=!0;break e}c=c.return}if(Ot===null)throw Error(X(160));x0(i,o,s),Ot=null,Hn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){dt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)P0(e,t),e=e.sibling}function P0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),rr(t),r&4){try{la(3,t,t.return),yu(3,t)}catch(b){dt(t,t.return,b)}try{la(5,t,t.return)}catch(b){dt(t,t.return,b)}}break;case 1:Bn(e,t),rr(t),r&512&&n!==null&&Bi(n,n.return);break;case 5:if(Bn(e,t),rr(t),r&512&&n!==null&&Bi(n,n.return),t.flags&32){var s=t.stateNode;try{ya(s,"")}catch(b){dt(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Yy(s,i),nh(c,o);var d=nh(c,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?t_(s,m):f==="dangerouslySetInnerHTML"?Zy(s,m):f==="children"?ya(s,m):wf(s,f,m,d)}switch(c){case"input":Xd(s,i);break;case"textarea":Xy(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?qi(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?qi(s,!!i.multiple,i.defaultValue,!0):qi(s,!!i.multiple,i.multiple?[]:"",!1))}s[xa]=i}catch(b){dt(t,t.return,b)}}break;case 6:if(Bn(e,t),rr(t),r&4){if(t.stateNode===null)throw Error(X(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){dt(t,t.return,b)}}break;case 3:if(Bn(e,t),rr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ta(e.containerInfo)}catch(b){dt(t,t.return,b)}break;case 4:Bn(e,t),rr(t);break;case 13:Bn(e,t),rr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zf=mt())),r&4&&Lg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(d=Yt)||f,Bn(e,t),Yt=d):Bn(e,t),rr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(le=t,f=t.child;f!==null;){for(m=le=f;le!==null;){switch(g=le,w=g.child,g.tag){case 0:case 11:case 14:case 15:la(4,g,g.return);break;case 1:Bi(g,g.return);var P=g.stateNode;if(typeof P.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(b){dt(r,n,b)}}break;case 5:Bi(g,g.return);break;case 22:if(g.memoizedState!==null){Ug(m);continue}}w!==null?(w.return=g,le=w):Ug(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=e_("display",o))}catch(b){dt(t,t.return,b)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){dt(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Bn(e,t),rr(t),r&4&&Lg(t);break;case 21:break;default:Bn(e,t),rr(t)}}function rr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(C0(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ya(s,""),r.flags&=-33);var i=Vg(t);jh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Vg(t);Nh(t,c,o);break;default:throw Error(X(161))}}catch(u){dt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BS(t,e,n){le=t,k0(t)}function k0(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var s=le,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ll;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Yt;c=Ll;var d=Yt;if(Ll=o,(Yt=u)&&!d)for(le=s;le!==null;)o=le,u=o.child,o.tag===22&&o.memoizedState!==null?zg(s):u!==null?(u.return=o,le=u):zg(s);for(;i!==null;)le=i,k0(i),i=i.sibling;le=s,Ll=c,Yt=d}Fg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,le=i):Fg(t)}}function Fg(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||yu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ig(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ig(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ta(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Yt||e.flags&512&&Rh(e)}catch(g){dt(e,e.return,g)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function Ug(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function zg(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yu(4,e)}catch(u){dt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){dt(e,s,u)}}var i=e.return;try{Rh(e)}catch(u){dt(e,i,u)}break;case 5:var o=e.return;try{Rh(e)}catch(u){dt(e,o,u)}}}catch(u){dt(e,e.return,u)}if(e===t){le=null;break}var c=e.sibling;if(c!==null){c.return=e.return,le=c;break}le=e.return}}var $S=Math.ceil,Oc=Wr.ReactCurrentDispatcher,Xf=Wr.ReactCurrentOwner,Dn=Wr.ReactCurrentBatchConfig,Oe=0,Rt=null,yt=null,Lt=0,yn=0,$i=Ds(0),At=0,Da=null,oi=0,_u=0,Jf=0,ca=null,cn=null,Zf=0,ao=1/0,xr=null,Mc=!1,Dh=null,ms=null,Fl=!1,ls=null,Vc=0,ua=0,bh=null,rc=-1,sc=0;function nn(){return Oe&6?mt():rc!==-1?rc:rc=mt()}function gs(t){return t.mode&1?Oe&2&&Lt!==0?Lt&-Lt:CS.transition!==null?(sc===0&&(sc=f_()),sc):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:w_(t.type)),t):1}function Kn(t,e,n,r){if(50<ua)throw ua=0,bh=null,Error(X(185));Wa(t,n,r),(!(Oe&2)||t!==Rt)&&(t===Rt&&(!(Oe&2)&&(_u|=n),At===4&&ts(t,Lt)),mn(t,r),n===1&&Oe===0&&!(e.mode&1)&&(ao=mt()+500,mu&&bs()))}function mn(t,e){var n=t.callbackNode;CI(t,e);var r=wc(t,t===Rt?Lt:0);if(r===0)n!==null&&Ym(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ym(n),e===1)t.tag===0?AS(Bg.bind(null,t)):F_(Bg.bind(null,t)),ES(function(){!(Oe&6)&&bs()}),n=null;else{switch(p_(r)){case 1:n=Af;break;case 4:n=d_;break;case 16:n=_c;break;case 536870912:n=h_;break;default:n=_c}n=V0(n,R0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function R0(t,e){if(rc=-1,sc=0,Oe&6)throw Error(X(327));var n=t.callbackNode;if(Yi()&&t.callbackNode!==n)return null;var r=wc(t,t===Rt?Lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lc(t,r);else{e=r;var s=Oe;Oe|=2;var i=j0();(Rt!==t||Lt!==e)&&(xr=null,ao=mt()+500,Zs(t,e));do try{WS();break}catch(c){N0(t,c)}while(!0);Lf(),Oc.current=i,Oe=s,yt!==null?e=0:(Rt=null,Lt=0,e=At)}if(e!==0){if(e===2&&(s=ah(t),s!==0&&(r=s,e=Oh(t,s))),e===1)throw n=Da,Zs(t,0),ts(t,r),mn(t,mt()),n;if(e===6)ts(t,r);else{if(s=t.current.alternate,!(r&30)&&!HS(s)&&(e=Lc(t,r),e===2&&(i=ah(t),i!==0&&(r=i,e=Oh(t,i))),e===1))throw n=Da,Zs(t,0),ts(t,r),mn(t,mt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:qs(t,cn,xr);break;case 3:if(ts(t,r),(r&130023424)===r&&(e=Zf+500-mt(),10<e)){if(wc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){nn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mh(qs.bind(null,t,cn,xr),e);break}qs(t,cn,xr);break;case 4:if(ts(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Gn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$S(r/1960))-r,10<r){t.timeoutHandle=mh(qs.bind(null,t,cn,xr),r);break}qs(t,cn,xr);break;case 5:qs(t,cn,xr);break;default:throw Error(X(329))}}}return mn(t,mt()),t.callbackNode===n?R0.bind(null,t):null}function Oh(t,e){var n=ca;return t.current.memoizedState.isDehydrated&&(Zs(t,e).flags|=256),t=Lc(t,e),t!==2&&(e=cn,cn=n,e!==null&&Mh(e)),t}function Mh(t){cn===null?cn=t:cn.push.apply(cn,t)}function HS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Qn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ts(t,e){for(e&=~Jf,e&=~_u,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),r=1<<n;t[n]=-1,e&=~r}}function Bg(t){if(Oe&6)throw Error(X(327));Yi();var e=wc(t,0);if(!(e&1))return mn(t,mt()),null;var n=Lc(t,e);if(t.tag!==0&&n===2){var r=ah(t);r!==0&&(e=r,n=Oh(t,r))}if(n===1)throw n=Da,Zs(t,0),ts(t,e),mn(t,mt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qs(t,cn,xr),mn(t,mt()),null}function ep(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(ao=mt()+500,mu&&bs())}}function ai(t){ls!==null&&ls.tag===0&&!(Oe&6)&&Yi();var e=Oe;Oe|=1;var n=Dn.transition,r=Ue;try{if(Dn.transition=null,Ue=1,t)return t()}finally{Ue=r,Dn.transition=n,Oe=e,!(Oe&6)&&bs()}}function tp(){yn=$i.current,Je($i)}function Zs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wS(n)),yt!==null)for(n=yt.return;n!==null;){var r=n;switch(Of(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ac();break;case 3:io(),Je(fn),Je(Jt),Hf();break;case 5:$f(r);break;case 4:io();break;case 13:Je(st);break;case 19:Je(st);break;case 10:Ff(r.type._context);break;case 22:case 23:tp()}n=n.return}if(Rt=t,yt=t=vs(t.current,null),Lt=yn=e,At=0,Da=null,Jf=_u=oi=0,cn=ca=null,Qs!==null){for(e=0;e<Qs.length;e++)if(n=Qs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qs=null}return t}function N0(t,e){do{var n=yt;try{if(Lf(),ec.current=bc,Dc){for(var r=it.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dc=!1}if(ii=0,kt=St=it=null,aa=!1,Ra=0,Xf.current=null,n===null||n.return===null){At=1,Da=e,yt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=Lt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=kg(o);if(w!==null){w.flags&=-257,Rg(w,o,c,i,e),w.mode&1&&Pg(i,d,e),e=w,u=d;var P=e.updateQueue;if(P===null){var b=new Set;b.add(u),e.updateQueue=b}else P.add(u);break e}else{if(!(e&1)){Pg(i,d,e),np();break e}u=Error(X(426))}}else if(et&&c.mode&1){var U=kg(o);if(U!==null){!(U.flags&65536)&&(U.flags|=256),Rg(U,o,c,i,e),Mf(oo(u,c));break e}}i=u=oo(u,c),At!==4&&(At=2),ca===null?ca=[i]:ca.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var A=p0(i,u,e);Tg(i,A);break e;case 1:c=u;var I=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof I.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ms===null||!ms.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=m0(i,c,e);Tg(i,D);break e}}i=i.return}while(i!==null)}b0(n)}catch(k){e=k,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function j0(){var t=Oc.current;return Oc.current=bc,t===null?bc:t}function np(){(At===0||At===3||At===2)&&(At=4),Rt===null||!(oi&268435455)&&!(_u&268435455)||ts(Rt,Lt)}function Lc(t,e){var n=Oe;Oe|=2;var r=j0();(Rt!==t||Lt!==e)&&(xr=null,Zs(t,e));do try{qS();break}catch(s){N0(t,s)}while(!0);if(Lf(),Oe=n,Oc.current=r,yt!==null)throw Error(X(261));return Rt=null,Lt=0,At}function qS(){for(;yt!==null;)D0(yt)}function WS(){for(;yt!==null&&!vI();)D0(yt)}function D0(t){var e=M0(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?b0(t):yt=e,Xf.current=null}function b0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FS(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{At=6,yt=null;return}}else if(n=LS(n,e,yn),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);At===0&&(At=5)}function qs(t,e,n){var r=Ue,s=Dn.transition;try{Dn.transition=null,Ue=1,GS(t,e,n,r)}finally{Dn.transition=s,Ue=r}return null}function GS(t,e,n,r){do Yi();while(ls!==null);if(Oe&6)throw Error(X(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(xI(t,i),t===Rt&&(yt=Rt=null,Lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,V0(_c,function(){return Yi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dn.transition,Dn.transition=null;var o=Ue;Ue=1;var c=Oe;Oe|=4,Xf.current=null,zS(t,n),P0(n,t),fS(fh),Ec=!!hh,fh=hh=null,t.current=n,BS(n),yI(),Oe=c,Ue=o,Dn.transition=i}else t.current=n;if(Fl&&(Fl=!1,ls=t,Vc=s),i=t.pendingLanes,i===0&&(ms=null),EI(n.stateNode),mn(t,mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mc)throw Mc=!1,t=Dh,Dh=null,t;return Vc&1&&t.tag!==0&&Yi(),i=t.pendingLanes,i&1?t===bh?ua++:(ua=0,bh=t):ua=0,bs(),null}function Yi(){if(ls!==null){var t=p_(Vc),e=Dn.transition,n=Ue;try{if(Dn.transition=null,Ue=16>t?16:t,ls===null)var r=!1;else{if(t=ls,ls=null,Vc=0,Oe&6)throw Error(X(331));var s=Oe;for(Oe|=4,le=t.current;le!==null;){var i=le,o=i.child;if(le.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(le=d;le!==null;){var f=le;switch(f.tag){case 0:case 11:case 15:la(8,f,i)}var m=f.child;if(m!==null)m.return=f,le=m;else for(;le!==null;){f=le;var g=f.sibling,w=f.return;if(A0(f),f===d){le=null;break}if(g!==null){g.return=w,le=g;break}le=w}}}var P=i.alternate;if(P!==null){var b=P.child;if(b!==null){P.child=null;do{var U=b.sibling;b.sibling=null,b=U}while(b!==null)}}le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,le=o;else e:for(;le!==null;){if(i=le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:la(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,le=A;break e}le=i.return}}var I=t.current;for(le=I;le!==null;){o=le;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,le=S;else e:for(o=I;le!==null;){if(c=le,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:yu(9,c)}}catch(k){dt(c,c.return,k)}if(c===o){le=null;break e}var D=c.sibling;if(D!==null){D.return=c.return,le=D;break e}le=c.return}}if(Oe=s,bs(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(uu,t)}catch{}r=!0}return r}finally{Ue=n,Dn.transition=e}}return!1}function $g(t,e,n){e=oo(n,e),e=p0(t,e,1),t=ps(t,e,1),e=nn(),t!==null&&(Wa(t,1,e),mn(t,e))}function dt(t,e,n){if(t.tag===3)$g(t,t,n);else for(;e!==null;){if(e.tag===3){$g(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ms===null||!ms.has(r))){t=oo(n,t),t=m0(e,t,1),e=ps(e,t,1),t=nn(),e!==null&&(Wa(e,1,t),mn(e,t));break}}e=e.return}}function KS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Lt&n)===n&&(At===4||At===3&&(Lt&130023424)===Lt&&500>mt()-Zf?Zs(t,0):Jf|=n),mn(t,e)}function O0(t,e){e===0&&(t.mode&1?(e=kl,kl<<=1,!(kl&130023424)&&(kl=4194304)):e=1);var n=nn();t=Fr(t,e),t!==null&&(Wa(t,e,n),mn(t,n))}function QS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),O0(t,n)}function YS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),O0(t,n)}var M0;M0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,VS(t,e,n);dn=!!(t.flags&131072)}else dn=!1,et&&e.flags&1048576&&U_(e,Pc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nc(t,e),t=e.pendingProps;var s=no(e,Jt.current);Qi(e,n),s=Wf(null,e,r,t,s,n);var i=Gf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(r)?(i=!0,Cc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zf(e),s.updater=vu,e.stateNode=s,s._reactInternals=e,Th(e,r,t,n),e=Ah(null,e,r,!0,i,n)):(e.tag=0,et&&i&&bf(e),tn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=JS(r),t=$n(r,t),s){case 0:e=Sh(null,e,r,t,n);break e;case 1:e=Dg(null,e,r,t,n);break e;case 11:e=Ng(null,e,r,t,n);break e;case 14:e=jg(null,e,r,$n(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),Sh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),Dg(t,e,r,s,n);case 3:e:{if(_0(e),t===null)throw Error(X(387));r=e.pendingProps,i=e.memoizedState,s=i.element,W_(t,e),Nc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=oo(Error(X(423)),e),e=bg(t,e,r,n,s);break e}else if(r!==s){s=oo(Error(X(424)),e),e=bg(t,e,r,n,s);break e}else for(En=fs(e.stateNode.containerInfo.firstChild),In=e,et=!0,qn=null,n=H_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ro(),r===s){e=Ur(t,e,n);break e}tn(t,e,r,n)}e=e.child}return e;case 5:return G_(e),t===null&&_h(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ph(r,s)?o=null:i!==null&&ph(r,i)&&(e.flags|=32),y0(t,e),tn(t,e,o,n),e.child;case 6:return t===null&&_h(e),null;case 13:return w0(t,e,n);case 4:return Bf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=so(e,null,r,n):tn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),Ng(t,e,r,s,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,We(kc,r._currentValue),r._currentValue=o,i!==null)if(Qn(i.value,o)){if(i.children===s.children&&!fn.current){e=Ur(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=br(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),wh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),wh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}tn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Qi(e,n),s=On(s),r=r(s),e.flags|=1,tn(t,e,r,n),e.child;case 14:return r=e.type,s=$n(r,e.pendingProps),s=$n(r.type,s),jg(t,e,r,s,n);case 15:return g0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),nc(t,e),e.tag=1,pn(r)?(t=!0,Cc(e)):t=!1,Qi(e,n),f0(e,r,s),Th(e,r,s,n),Ah(null,e,r,!0,t,n);case 19:return E0(t,e,n);case 22:return v0(t,e,n)}throw Error(X(156,e.tag))};function V0(t,e){return u_(t,e)}function XS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,e,n,r){return new XS(t,e,n,r)}function rp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JS(t){if(typeof t=="function")return rp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tf)return 11;if(t===If)return 14}return 2}function vs(t,e){var n=t.alternate;return n===null?(n=jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ic(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")rp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Di:return ei(n.children,s,i,e);case Ef:o=8,s|=8;break;case Wd:return t=jn(12,n,e,s|2),t.elementType=Wd,t.lanes=i,t;case Gd:return t=jn(13,n,e,s),t.elementType=Gd,t.lanes=i,t;case Kd:return t=jn(19,n,e,s),t.elementType=Kd,t.lanes=i,t;case Gy:return wu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qy:o=10;break e;case Wy:o=9;break e;case Tf:o=11;break e;case If:o=14;break e;case Jr:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=jn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ei(t,e,n,r){return t=jn(7,t,r,e),t.lanes=n,t}function wu(t,e,n,r){return t=jn(22,t,r,e),t.elementType=Gy,t.lanes=n,t.stateNode={isHidden:!1},t}function kd(t,e,n){return t=jn(6,t,null,e),t.lanes=n,t}function Rd(t,e,n){return e=jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ud(0),this.expirationTimes=ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sp(t,e,n,r,s,i,o,c,u){return t=new ZS(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=jn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zf(i),t}function e1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function L0(t){if(!t)return Is;t=t._reactInternals;e:{if(gi(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(pn(n))return L_(t,n,e)}return e}function F0(t,e,n,r,s,i,o,c,u){return t=sp(n,r,!0,t,s,i,o,c,u),t.context=L0(null),n=t.current,r=nn(),s=gs(n),i=br(r,s),i.callback=e??null,ps(n,i,s),t.current.lanes=s,Wa(t,s,r),mn(t,r),t}function Eu(t,e,n,r){var s=e.current,i=nn(),o=gs(s);return n=L0(n),e.context===null?e.context=n:e.pendingContext=n,e=br(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ps(s,e,o),t!==null&&(Kn(t,s,o,i),Zl(t,s,o)),o}function Fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ip(t,e){Hg(t,e),(t=t.alternate)&&Hg(t,e)}function t1(){return null}var U0=typeof reportError=="function"?reportError:function(t){console.error(t)};function op(t){this._internalRoot=t}Tu.prototype.render=op.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Eu(t,e,null,null)};Tu.prototype.unmount=op.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ai(function(){Eu(null,t,null,null)}),e[Lr]=null}};function Tu(t){this._internalRoot=t}Tu.prototype.unstable_scheduleHydration=function(t){if(t){var e=v_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<es.length&&e!==0&&e<es[n].priority;n++);es.splice(n,0,t),n===0&&__(t)}};function ap(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Iu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qg(){}function n1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Fc(o);i.call(d)}}var o=F0(e,r,t,0,null,!1,!1,"",qg);return t._reactRootContainer=o,t[Lr]=o.current,Aa(t.nodeType===8?t.parentNode:t),ai(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Fc(u);c.call(d)}}var u=sp(t,0,!1,null,null,!1,!1,"",qg);return t._reactRootContainer=u,t[Lr]=u.current,Aa(t.nodeType===8?t.parentNode:t),ai(function(){Eu(e,u,n,r)}),u}function Su(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Fc(o);c.call(u)}}Eu(e,o,t,s)}else o=n1(n,e,t,s,r);return Fc(o)}m_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Go(e.pendingLanes);n!==0&&(Cf(e,n|1),mn(e,mt()),!(Oe&6)&&(ao=mt()+500,bs()))}break;case 13:ai(function(){var r=Fr(t,1);if(r!==null){var s=nn();Kn(r,t,1,s)}}),ip(t,1)}};xf=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=nn();Kn(e,t,134217728,n)}ip(t,134217728)}};g_=function(t){if(t.tag===13){var e=gs(t),n=Fr(t,e);if(n!==null){var r=nn();Kn(n,t,e,r)}ip(t,e)}};v_=function(){return Ue};y_=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};sh=function(t,e,n){switch(e){case"input":if(Xd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pu(r);if(!s)throw Error(X(90));Qy(r),Xd(r,s)}}}break;case"textarea":Xy(t,n);break;case"select":e=n.value,e!=null&&qi(t,!!n.multiple,e,!1)}};s_=ep;i_=ai;var r1={usingClientEntryPoint:!1,Events:[Ka,Vi,pu,n_,r_,ep]},Ho={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s1={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=l_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||t1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{uu=Ul.inject(s1),lr=Ul}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r1;An.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ap(e))throw Error(X(200));return e1(t,e,null,n)};An.createRoot=function(t,e){if(!ap(t))throw Error(X(299));var n=!1,r="",s=U0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sp(t,1,!1,null,null,n,!1,r,s),t[Lr]=e.current,Aa(t.nodeType===8?t.parentNode:t),new op(e)};An.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=l_(e),t=t===null?null:t.stateNode,t};An.flushSync=function(t){return ai(t)};An.hydrate=function(t,e,n){if(!Iu(e))throw Error(X(200));return Su(null,t,e,!0,n)};An.hydrateRoot=function(t,e,n){if(!ap(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=U0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=F0(e,null,t,1,n??null,s,!1,i,o),t[Lr]=e.current,Aa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Tu(e)};An.render=function(t,e,n){if(!Iu(e))throw Error(X(200));return Su(null,t,e,!1,n)};An.unmountComponentAtNode=function(t){if(!Iu(t))throw Error(X(40));return t._reactRootContainer?(ai(function(){Su(null,null,t,!1,function(){t._reactRootContainer=null,t[Lr]=null})}),!0):!1};An.unstable_batchedUpdates=ep;An.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Iu(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Su(t,e,n,!1,r)};An.version="18.3.1-next-f1338f8080-20240426";function z0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z0)}catch(t){console.error(t)}}z0(),zy.exports=An;var i1=zy.exports,B0,Wg=i1;B0=Wg.createRoot,Wg.hydrateRoot;const o1=()=>{};var Gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},a1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},H0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[f],n[m],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):a1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new l1;const g=i<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),m!==64){const P=d<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class l1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c1=function(t){const e=$0(t);return H0.encodeByteArray(e,!0)},Uc=function(t){return c1(t).replace(/\./g,"")},q0=function(t){try{return H0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=()=>u1().__FIREBASE_DEFAULTS__,h1=()=>{if(typeof process>"u"||typeof Gg>"u")return;const t=Gg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},f1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q0(t[1]);return e&&JSON.parse(e)},Au=()=>{try{return o1()||d1()||h1()||f1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},W0=t=>{var e,n;return(n=(e=Au())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},G0=t=>{const e=W0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},K0=()=>{var t;return(t=Au())===null||t===void 0?void 0:t.config},Q0=t=>{var e;return(e=Au())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Uc(JSON.stringify(n)),Uc(JSON.stringify(o)),""].join(".")}const da={};function g1(){const t={prod:[],emulator:[]};for(const e of Object.keys(da))da[e]?t.emulator.push(e):t.prod.push(e);return t}function v1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Kg=!1;function cp(t,e){if(typeof window>"u"||typeof document>"u"||!vi(window.location.host)||da[t]===e||da[t]||Kg)return;da[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=g1().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Kg=!0,o()},g}function f(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=v1(r),w=n("text"),P=document.getElementById(w)||document.createElement("span"),b=n("learnmore"),U=document.getElementById(b)||document.createElement("a"),A=n("preprendIcon"),I=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;c(S),f(U,b);const D=d();u(I,A),S.append(I,P,U,D),document.body.appendChild(S)}i?(P.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function _1(){var t;const e=(t=Au())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function T1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I1(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function S1(){return!_1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A1(){try{return typeof indexedDB=="object"}catch{return!1}}function C1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="FirebaseError";class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=x1,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ya.prototype.create)}}class Ya{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?P1(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new yr(s,c,r)}}function P1(t,e){return t.replace(k1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const k1=/\{\$([^}]+)}/g;function R1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function li(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Qg(i)&&Qg(o)){if(!li(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Qg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Yo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function N1(t,e){const n=new j1(t,e);return n.subscribe.bind(n)}class j1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");D1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Nd),s.error===void 0&&(s.error=Nd),s.complete===void 0&&(s.complete=Nd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class Ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new p1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M1(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:O1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O1(t){return t===Ws?void 0:t}function M1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new b1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const L1={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},F1=Ne.INFO,U1={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},z1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=U1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class up{constructor(e){this.name=e,this._logLevel=F1,this._logHandler=z1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const B1=(t,e)=>e.some(n=>t instanceof n);let Yg,Xg;function $1(){return Yg||(Yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H1(){return Xg||(Xg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y0=new WeakMap,Vh=new WeakMap,X0=new WeakMap,jd=new WeakMap,dp=new WeakMap;function q1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ys(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Y0.set(n,t)}).catch(()=>{}),dp.set(e,t),e}function W1(t){if(Vh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Vh.set(t,e)}let Lh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||X0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ys(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function G1(t){Lh=t(Lh)}function K1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dd(this),e,...n);return X0.set(r,e.sort?e.sort():[e]),ys(r)}:H1().includes(t)?function(...e){return t.apply(Dd(this),e),ys(Y0.get(this))}:function(...e){return ys(t.apply(Dd(this),e))}}function Q1(t){return typeof t=="function"?K1(t):(t instanceof IDBTransaction&&W1(t),B1(t,$1())?new Proxy(t,Lh):t)}function ys(t){if(t instanceof IDBRequest)return q1(t);if(jd.has(t))return jd.get(t);const e=Q1(t);return e!==t&&(jd.set(t,e),dp.set(e,t)),e}const Dd=t=>dp.get(t);function Y1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=ys(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ys(o.result),u.oldVersion,u.newVersion,ys(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const X1=["get","getKey","getAll","getAllKeys","count"],J1=["put","add","delete","clear"],bd=new Map;function Jg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bd.get(e))return bd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=J1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||X1.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return bd.set(e,i),i}G1(t=>({...t,get:(e,n,r)=>Jg(e,n)||t.get(e,n,r),has:(e,n)=>!!Jg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fh="@firebase/app",Zg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new up("@firebase/app"),tA="@firebase/app-compat",nA="@firebase/analytics-compat",rA="@firebase/analytics",sA="@firebase/app-check-compat",iA="@firebase/app-check",oA="@firebase/auth",aA="@firebase/auth-compat",lA="@firebase/database",cA="@firebase/data-connect",uA="@firebase/database-compat",dA="@firebase/functions",hA="@firebase/functions-compat",fA="@firebase/installations",pA="@firebase/installations-compat",mA="@firebase/messaging",gA="@firebase/messaging-compat",vA="@firebase/performance",yA="@firebase/performance-compat",_A="@firebase/remote-config",wA="@firebase/remote-config-compat",EA="@firebase/storage",TA="@firebase/storage-compat",IA="@firebase/firestore",SA="@firebase/ai",AA="@firebase/firestore-compat",CA="firebase",xA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="[DEFAULT]",PA={[Fh]:"fire-core",[tA]:"fire-core-compat",[rA]:"fire-analytics",[nA]:"fire-analytics-compat",[iA]:"fire-app-check",[sA]:"fire-app-check-compat",[oA]:"fire-auth",[aA]:"fire-auth-compat",[lA]:"fire-rtdb",[cA]:"fire-data-connect",[uA]:"fire-rtdb-compat",[dA]:"fire-fn",[hA]:"fire-fn-compat",[fA]:"fire-iid",[pA]:"fire-iid-compat",[mA]:"fire-fcm",[gA]:"fire-fcm-compat",[vA]:"fire-perf",[yA]:"fire-perf-compat",[_A]:"fire-rc",[wA]:"fire-rc-compat",[EA]:"fire-gcs",[TA]:"fire-gcs-compat",[IA]:"fire-fst",[AA]:"fire-fst-compat",[SA]:"fire-vertex","fire-js":"fire-js",[CA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Map,kA=new Map,zh=new Map;function ev(t,e){try{t.container.addComponent(e)}catch(n){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ci(t){const e=t.name;if(zh.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;zh.set(e,t);for(const n of zc.values())ev(n,t);for(const n of kA.values())ev(n,t);return!0}function Cu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new Ya("app","Firebase",RA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=xA;function Bh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Uh,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw _s.create("bad-app-name",{appName:String(s)});if(n||(n=K0()),!n)throw _s.create("no-options");const i=zc.get(s);if(i){if(li(n,i.options)&&li(r,i.config))return i;throw _s.create("duplicate-app",{appName:s})}const o=new V1(s);for(const u of zh.values())o.addComponent(u);const c=new NA(n,r,o);return zc.set(s,c),c}function hp(t=Uh){const e=zc.get(t);if(!e&&t===Uh&&K0())return Bh();if(!e)throw _s.create("no-app",{appName:t});return e}function ur(t,e,n){var r;let s=(r=PA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(c.join(" "));return}ci(new Ss(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firebase-heartbeat-database",DA=1,ba="firebase-heartbeat-store";let Od=null;function J0(){return Od||(Od=Y1(jA,DA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw _s.create("idb-open",{originalErrorMessage:t.message})})),Od}async function bA(t){try{const n=(await J0()).transaction(ba),r=await n.objectStore(ba).get(Z0(t));return await n.done,r}catch(e){if(e instanceof yr)zr.warn(e.message);else{const n=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zr.warn(n.message)}}}async function tv(t,e){try{const r=(await J0()).transaction(ba,"readwrite");await r.objectStore(ba).put(e,Z0(t)),await r.done}catch(n){if(n instanceof yr)zr.warn(n.message);else{const r=_s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zr.warn(r.message)}}}function Z0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=1024,MA=30;class VA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=nv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>MA){const o=UA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nv(),{heartbeatsToSend:r,unsentEntries:s}=LA(this._heartbeatsCache.heartbeats),i=Uc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return zr.warn(n),""}}}function nv(){return new Date().toISOString().substring(0,10)}function LA(t,e=OA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),rv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),rv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class FA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A1()?C1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rv(t){return Uc(JSON.stringify({version:2,heartbeats:t})).length}function UA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t){ci(new Ss("platform-logger",e=>new Z1(e),"PRIVATE")),ci(new Ss("heartbeat",e=>new VA(e),"PRIVATE")),ur(Fh,Zg,t),ur(Fh,Zg,"esm2017"),ur("fire-js","")}zA("");var BA="firebase",$A="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur(BA,$A,"app");var sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ws,ew;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function T(){}T.prototype=y.prototype,v.D=y.prototype,v.prototype=new T,v.prototype.constructor=v,v.C=function(C,R,j){for(var x=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)x[tt-2]=arguments[tt];return y.prototype[R].apply(C,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,T){T||(T=0);var C=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)C[R]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(R=0;16>R;++R)C[R]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=v.g[0],T=v.g[1],R=v.g[2];var j=v.g[3],x=y+(j^T&(R^j))+C[0]+3614090360&4294967295;y=T+(x<<7&4294967295|x>>>25),x=j+(R^y&(T^R))+C[1]+3905402710&4294967295,j=y+(x<<12&4294967295|x>>>20),x=R+(T^j&(y^T))+C[2]+606105819&4294967295,R=j+(x<<17&4294967295|x>>>15),x=T+(y^R&(j^y))+C[3]+3250441966&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(j^T&(R^j))+C[4]+4118548399&4294967295,y=T+(x<<7&4294967295|x>>>25),x=j+(R^y&(T^R))+C[5]+1200080426&4294967295,j=y+(x<<12&4294967295|x>>>20),x=R+(T^j&(y^T))+C[6]+2821735955&4294967295,R=j+(x<<17&4294967295|x>>>15),x=T+(y^R&(j^y))+C[7]+4249261313&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(j^T&(R^j))+C[8]+1770035416&4294967295,y=T+(x<<7&4294967295|x>>>25),x=j+(R^y&(T^R))+C[9]+2336552879&4294967295,j=y+(x<<12&4294967295|x>>>20),x=R+(T^j&(y^T))+C[10]+4294925233&4294967295,R=j+(x<<17&4294967295|x>>>15),x=T+(y^R&(j^y))+C[11]+2304563134&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(j^T&(R^j))+C[12]+1804603682&4294967295,y=T+(x<<7&4294967295|x>>>25),x=j+(R^y&(T^R))+C[13]+4254626195&4294967295,j=y+(x<<12&4294967295|x>>>20),x=R+(T^j&(y^T))+C[14]+2792965006&4294967295,R=j+(x<<17&4294967295|x>>>15),x=T+(y^R&(j^y))+C[15]+1236535329&4294967295,T=R+(x<<22&4294967295|x>>>10),x=y+(R^j&(T^R))+C[1]+4129170786&4294967295,y=T+(x<<5&4294967295|x>>>27),x=j+(T^R&(y^T))+C[6]+3225465664&4294967295,j=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(j^y))+C[11]+643717713&4294967295,R=j+(x<<14&4294967295|x>>>18),x=T+(j^y&(R^j))+C[0]+3921069994&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(R^j&(T^R))+C[5]+3593408605&4294967295,y=T+(x<<5&4294967295|x>>>27),x=j+(T^R&(y^T))+C[10]+38016083&4294967295,j=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(j^y))+C[15]+3634488961&4294967295,R=j+(x<<14&4294967295|x>>>18),x=T+(j^y&(R^j))+C[4]+3889429448&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(R^j&(T^R))+C[9]+568446438&4294967295,y=T+(x<<5&4294967295|x>>>27),x=j+(T^R&(y^T))+C[14]+3275163606&4294967295,j=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(j^y))+C[3]+4107603335&4294967295,R=j+(x<<14&4294967295|x>>>18),x=T+(j^y&(R^j))+C[8]+1163531501&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(R^j&(T^R))+C[13]+2850285829&4294967295,y=T+(x<<5&4294967295|x>>>27),x=j+(T^R&(y^T))+C[2]+4243563512&4294967295,j=y+(x<<9&4294967295|x>>>23),x=R+(y^T&(j^y))+C[7]+1735328473&4294967295,R=j+(x<<14&4294967295|x>>>18),x=T+(j^y&(R^j))+C[12]+2368359562&4294967295,T=R+(x<<20&4294967295|x>>>12),x=y+(T^R^j)+C[5]+4294588738&4294967295,y=T+(x<<4&4294967295|x>>>28),x=j+(y^T^R)+C[8]+2272392833&4294967295,j=y+(x<<11&4294967295|x>>>21),x=R+(j^y^T)+C[11]+1839030562&4294967295,R=j+(x<<16&4294967295|x>>>16),x=T+(R^j^y)+C[14]+4259657740&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(T^R^j)+C[1]+2763975236&4294967295,y=T+(x<<4&4294967295|x>>>28),x=j+(y^T^R)+C[4]+1272893353&4294967295,j=y+(x<<11&4294967295|x>>>21),x=R+(j^y^T)+C[7]+4139469664&4294967295,R=j+(x<<16&4294967295|x>>>16),x=T+(R^j^y)+C[10]+3200236656&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(T^R^j)+C[13]+681279174&4294967295,y=T+(x<<4&4294967295|x>>>28),x=j+(y^T^R)+C[0]+3936430074&4294967295,j=y+(x<<11&4294967295|x>>>21),x=R+(j^y^T)+C[3]+3572445317&4294967295,R=j+(x<<16&4294967295|x>>>16),x=T+(R^j^y)+C[6]+76029189&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(T^R^j)+C[9]+3654602809&4294967295,y=T+(x<<4&4294967295|x>>>28),x=j+(y^T^R)+C[12]+3873151461&4294967295,j=y+(x<<11&4294967295|x>>>21),x=R+(j^y^T)+C[15]+530742520&4294967295,R=j+(x<<16&4294967295|x>>>16),x=T+(R^j^y)+C[2]+3299628645&4294967295,T=R+(x<<23&4294967295|x>>>9),x=y+(R^(T|~j))+C[0]+4096336452&4294967295,y=T+(x<<6&4294967295|x>>>26),x=j+(T^(y|~R))+C[7]+1126891415&4294967295,j=y+(x<<10&4294967295|x>>>22),x=R+(y^(j|~T))+C[14]+2878612391&4294967295,R=j+(x<<15&4294967295|x>>>17),x=T+(j^(R|~y))+C[5]+4237533241&4294967295,T=R+(x<<21&4294967295|x>>>11),x=y+(R^(T|~j))+C[12]+1700485571&4294967295,y=T+(x<<6&4294967295|x>>>26),x=j+(T^(y|~R))+C[3]+2399980690&4294967295,j=y+(x<<10&4294967295|x>>>22),x=R+(y^(j|~T))+C[10]+4293915773&4294967295,R=j+(x<<15&4294967295|x>>>17),x=T+(j^(R|~y))+C[1]+2240044497&4294967295,T=R+(x<<21&4294967295|x>>>11),x=y+(R^(T|~j))+C[8]+1873313359&4294967295,y=T+(x<<6&4294967295|x>>>26),x=j+(T^(y|~R))+C[15]+4264355552&4294967295,j=y+(x<<10&4294967295|x>>>22),x=R+(y^(j|~T))+C[6]+2734768916&4294967295,R=j+(x<<15&4294967295|x>>>17),x=T+(j^(R|~y))+C[13]+1309151649&4294967295,T=R+(x<<21&4294967295|x>>>11),x=y+(R^(T|~j))+C[4]+4149444226&4294967295,y=T+(x<<6&4294967295|x>>>26),x=j+(T^(y|~R))+C[11]+3174756917&4294967295,j=y+(x<<10&4294967295|x>>>22),x=R+(y^(j|~T))+C[2]+718787259&4294967295,R=j+(x<<15&4294967295|x>>>17),x=T+(j^(R|~y))+C[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(R+(x<<21&4294967295|x>>>11))&4294967295,v.g[2]=v.g[2]+R&4294967295,v.g[3]=v.g[3]+j&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var T=y-this.blockSize,C=this.B,R=this.h,j=0;j<y;){if(R==0)for(;j<=T;)s(this,v,j),j+=this.blockSize;if(typeof v=="string"){for(;j<y;)if(C[R++]=v.charCodeAt(j++),R==this.blockSize){s(this,C),R=0;break}}else for(;j<y;)if(C[R++]=v[j++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var T=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=T&255,T/=256;for(this.u(v),v=Array(16),y=T=0;4>y;++y)for(var C=0;32>C;C+=8)v[T++]=this.g[y]>>>C&255;return v};function i(v,y){var T=c;return Object.prototype.hasOwnProperty.call(T,v)?T[v]:T[v]=y(v)}function o(v,y){this.h=y;for(var T=[],C=!0,R=v.length-1;0<=R;R--){var j=v[R]|0;C&&j==y||(T[R]=j,C=!1)}this.g=T}var c={};function u(v){return-128<=v&&128>v?i(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return m;if(0>v)return U(d(-v));for(var y=[],T=1,C=0;v>=T;C++)y[C]=v/T|0,T*=4294967296;return new o(y,0)}function f(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return U(f(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(y,8)),C=m,R=0;R<v.length;R+=8){var j=Math.min(8,v.length-R),x=parseInt(v.substring(R,R+j),y);8>j?(j=d(Math.pow(y,j)),C=C.j(j).add(d(x))):(C=C.j(T),C=C.add(d(x)))}return C}var m=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-U(this).m();for(var v=0,y=1,T=0;T<this.g.length;T++){var C=this.i(T);v+=(0<=C?C:4294967296+C)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(P(this))return"0";if(b(this))return"-"+U(this).toString(v);for(var y=d(Math.pow(v,6)),T=this,C="";;){var R=D(T,y).g;T=A(T,R.j(y));var j=((0<T.g.length?T.g[0]:T.h)>>>0).toString(v);if(T=R,P(T))return j+C;for(;6>j.length;)j="0"+j;C=j+C}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function P(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function b(v){return v.h==-1}t.l=function(v){return v=A(this,v),b(v)?-1:P(v)?0:1};function U(v){for(var y=v.g.length,T=[],C=0;C<y;C++)T[C]=~v.g[C];return new o(T,~v.h).add(g)}t.abs=function(){return b(this)?U(this):this},t.add=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0,R=0;R<=y;R++){var j=C+(this.i(R)&65535)+(v.i(R)&65535),x=(j>>>16)+(this.i(R)>>>16)+(v.i(R)>>>16);C=x>>>16,j&=65535,x&=65535,T[R]=x<<16|j}return new o(T,T[T.length-1]&-2147483648?-1:0)};function A(v,y){return v.add(U(y))}t.j=function(v){if(P(this)||P(v))return m;if(b(this))return b(v)?U(this).j(U(v)):U(U(this).j(v));if(b(v))return U(this.j(U(v)));if(0>this.l(w)&&0>v.l(w))return d(this.m()*v.m());for(var y=this.g.length+v.g.length,T=[],C=0;C<2*y;C++)T[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<v.g.length;R++){var j=this.i(C)>>>16,x=this.i(C)&65535,tt=v.i(R)>>>16,xt=v.i(R)&65535;T[2*C+2*R]+=x*xt,I(T,2*C+2*R),T[2*C+2*R+1]+=j*xt,I(T,2*C+2*R+1),T[2*C+2*R+1]+=x*tt,I(T,2*C+2*R+1),T[2*C+2*R+2]+=j*tt,I(T,2*C+2*R+2)}for(C=0;C<y;C++)T[C]=T[2*C+1]<<16|T[2*C];for(C=y;C<2*y;C++)T[C]=0;return new o(T,0)};function I(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function S(v,y){this.g=v,this.h=y}function D(v,y){if(P(y))throw Error("division by zero");if(P(v))return new S(m,m);if(b(v))return y=D(U(v),y),new S(U(y.g),U(y.h));if(b(y))return y=D(v,U(y)),new S(U(y.g),y.h);if(30<v.g.length){if(b(v)||b(y))throw Error("slowDivide_ only works with positive integers.");for(var T=g,C=y;0>=C.l(v);)T=k(T),C=k(C);var R=V(T,1),j=V(C,1);for(C=V(C,2),T=V(T,2);!P(C);){var x=j.add(C);0>=x.l(v)&&(R=R.add(T),j=x),C=V(C,1),T=V(T,1)}return y=A(v,R.j(y)),new S(R,y)}for(R=m;0<=v.l(y);){for(T=Math.max(1,Math.floor(v.m()/y.m())),C=Math.ceil(Math.log(T)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),j=d(T),x=j.j(y);b(x)||0<x.l(v);)T-=C,j=d(T),x=j.j(y);P(j)&&(j=g),R=R.add(j),v=A(v,x)}return new S(R,v)}t.A=function(v){return D(this,v).h},t.and=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0;C<y;C++)T[C]=this.i(C)&v.i(C);return new o(T,this.h&v.h)},t.or=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0;C<y;C++)T[C]=this.i(C)|v.i(C);return new o(T,this.h|v.h)},t.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],C=0;C<y;C++)T[C]=this.i(C)^v.i(C);return new o(T,this.h^v.h)};function k(v){for(var y=v.g.length+1,T=[],C=0;C<y;C++)T[C]=v.i(C)<<1|v.i(C-1)>>>31;return new o(T,v.h)}function V(v,y){var T=y>>5;y%=32;for(var C=v.g.length-T,R=[],j=0;j<C;j++)R[j]=0<y?v.i(j+T)>>>y|v.i(j+T+1)<<32-y:v.i(j+T);return new o(R,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ew=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ws=o}).apply(typeof sv<"u"?sv:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tw,Xo,nw,oc,$h,rw,sw,iw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var M=a[_];if(!(M in p))break e;p=p[M]}a=a[a.length-1],_=p[a],h=h(_),h!=_&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,_=!1,M={next:function(){if(!_&&p<a.length){var z=p++;return{value:h(z,a[z]),done:!1}}return _=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,_),a.apply(h,M)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function w(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function P(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(_,M,z){for(var ee=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ee[ze-2]=arguments[ze];return h.prototype[M].apply(_,ee)}}function b(a){const h=a.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=a[_];return p}return[]}function U(a,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(u(_)){const M=a.length||0,z=_.length||0;a.length=M+z;for(let ee=0;ee<z;ee++)a[M+ee]=_[ee]}else a.push(_)}}class A{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function I(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var k=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function V(a,h,p){for(const _ in a)h.call(p,a[_],_,a)}function v(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function y(a){const h={};for(const p in a)h[p]=a[p];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(a,h){let p,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(p in _)a[p]=_[p];for(let z=0;z<T.length;z++)p=T[z],Object.prototype.hasOwnProperty.call(_,p)&&(a[p]=_[p])}}function R(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function j(a){c.setTimeout(()=>{throw a},0)}function x(){var a=O;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class tt{constructor(){this.h=this.g=null}add(h,p){const _=xt.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var xt=new A(()=>new nt,a=>a.reset());class nt{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let W,$=!1,O=new tt,B=()=>{const a=c.Promise.resolve(void 0);W=()=>{a.then(H)}};var H=()=>{for(var a;a=x();){try{a.h.call(a.g)}catch(p){j(p)}var h=xt;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return a}();function Fe(a,h){if(oe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(k){e:{try{D(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Pe[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Fe.aa.h.call(this)}}P(Fe,oe);var Pe={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),Vn=0;function xn(a,h,p,_,M){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=M,this.key=++Vn,this.da=this.fa=!1}function zt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Bt(a){this.src=a,this.g={},this.h=0}Bt.prototype.add=function(a,h,p,_,M){var z=a.toString();a=this.g[z],a||(a=this.g[z]=[],this.h++);var ee=_r(a,h,_,M);return-1<ee?(h=a[ee],p||(h.fa=!1)):(h=new xn(h,this.src,z,!!_,M),h.fa=p,a.push(h)),h};function Ze(a,h){var p=h.type;if(p in a.g){var _=a.g[p],M=Array.prototype.indexOf.call(_,h,void 0),z;(z=0<=M)&&Array.prototype.splice.call(_,M,1),z&&(zt(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function _r(a,h,p,_){for(var M=0;M<a.length;++M){var z=a[M];if(!z.da&&z.listener==h&&z.capture==!!p&&z.ha==_)return M}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),$e={};function He(a,h,p,_,M){if(Array.isArray(h)){for(var z=0;z<h.length;z++)He(a,h[z],p,_,M);return null}return p=E(p),a&&a[Be]?a.K(h,p,d(_)?!!_.capture:!1,M):wr(a,h,p,!1,_,M)}function wr(a,h,p,_,M,z){if(!h)throw Error("Invalid event type");var ee=d(M)?!!M.capture:!!M,ze=Zn(a);if(ze||(a[Re]=ze=new Bt(a)),p=ze.add(h,p,_,ee,z),p.proxy)return p;if(_=Gr(),p.proxy=_,_.src=a,_.listener=p,a.addEventListener)Te||(M=ee),M===void 0&&(M=!1),a.addEventListener(h.toString(),_,M);else if(a.attachEvent)a.attachEvent(Jn(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Gr(){function a(p){return h.call(a.src,a.listener,p)}const h=Nt;return a}function Er(a,h,p,_,M){if(Array.isArray(h))for(var z=0;z<h.length;z++)Er(a,h[z],p,_,M);else _=d(_)?!!_.capture:!!_,p=E(p),a&&a[Be]?(a=a.i,h=String(h).toString(),h in a.g&&(z=a.g[h],p=_r(z,p,_,M),-1<p&&(zt(z[p]),Array.prototype.splice.call(z,p,1),z.length==0&&(delete a.g[h],a.h--)))):a&&(a=Zn(a))&&(h=a.g[h.toString()],a=-1,h&&(a=_r(h,p,_,M)),(p=-1<a?h[a]:null)&&Ge(p))}function Ge(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Be])Ze(h.i,a);else{var p=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(p,_,a.capture):h.detachEvent?h.detachEvent(Jn(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=Zn(h))?(Ze(p,a),p.h==0&&(p.src=null,h[Re]=null)):zt(a)}}}function Jn(a){return a in $e?$e[a]:$e[a]="on"+a}function Nt(a,h){if(a.da)a=!0;else{h=new Fe(h,this);var p=a.listener,_=a.ha||a.src;a.fa&&Ge(a),a=p.call(_,h)}return a}function Zn(a){return a=a[Re],a instanceof Bt?a:null}var Ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function E(a){return typeof a=="function"?a:(a[Ln]||(a[Ln]=function(h){return a.handleEvent(h)}),a[Ln])}function N(){J.call(this),this.i=new Bt(this),this.M=this,this.F=null}P(N,J),N.prototype[Be]=!0,N.prototype.removeEventListener=function(a,h,p,_){Er(this,a,h,p,_)};function F(a,h){var p,_=a.F;if(_)for(p=[];_;_=_.F)p.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new oe(h,a);else if(h instanceof oe)h.target=h.target||a;else{var M=h;h=new oe(_,a),C(h,M)}if(M=!0,p)for(var z=p.length-1;0<=z;z--){var ee=h.g=p[z];M=L(ee,_,!0,h)&&M}if(ee=h.g=a,M=L(ee,_,!0,h)&&M,M=L(ee,_,!1,h)&&M,p)for(z=0;z<p.length;z++)ee=h.g=p[z],M=L(ee,_,!1,h)&&M}N.prototype.N=function(){if(N.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],_=0;_<p.length;_++)zt(p[_]);delete a.g[h],a.h--}}this.F=null},N.prototype.K=function(a,h,p,_){return this.i.add(String(a),h,!1,p,_)},N.prototype.L=function(a,h,p,_){return this.i.add(String(a),h,!0,p,_)};function L(a,h,p,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,z=0;z<h.length;++z){var ee=h[z];if(ee&&!ee.da&&ee.capture==p){var ze=ee.listener,bt=ee.ha||ee.src;ee.fa&&Ze(a.i,ee),M=ze.call(bt,_)!==!1&&M}}return M&&!_.defaultPrevented}function ne(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function we(a){a.g=ne(()=>{a.g=null,a.i&&(a.i=!1,we(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class pe extends J{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:we(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ge(a){J.call(this),this.h=a,this.g={}}P(ge,J);var ve=[];function Ce(a){V(a.g,function(h,p){this.g.hasOwnProperty(p)&&Ge(h)},a),a.g={}}ge.prototype.N=function(){ge.aa.N.call(this),Ce(this)},ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Se=c.JSON.stringify,Fn=c.JSON.parse,er=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Ae(){}Ae.prototype.h=null;function jt(a){return a.h||(a.h=a.i())}function Z(){}var K={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Y(){oe.call(this,"d")}P(Y,oe);function ae(){oe.call(this,"c")}P(ae,oe);var fe={},te=null;function me(){return te=te||new N}fe.La="serverreachability";function se(a){oe.call(this,fe.La,a)}P(se,oe);function de(a){const h=me();F(h,new se(h))}fe.STAT_EVENT="statevent";function ce(a,h){oe.call(this,fe.STAT_EVENT,a),this.stat=h}P(ce,oe);function Me(a){const h=me();F(h,new ce(h,a))}fe.Ma="timingevent";function rt(a,h){oe.call(this,fe.Ma,a),this.size=h}P(rt,oe);function ct(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function Et(){this.g=!0}Et.prototype.xa=function(){this.g=!1};function en(a,h,p,_,M,z){a.info(function(){if(a.g)if(z)for(var ee="",ze=z.split("&"),bt=0;bt<ze.length;bt++){var Ve=ze[bt].split("=");if(1<Ve.length){var Ht=Ve[0];Ve=Ve[1];var qt=Ht.split("_");ee=2<=qt.length&&qt[1]=="type"?ee+(Ht+"="+Ve+"&"):ee+(Ht+"=redacted&")}}else ee=null;else ee=z;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+h+`
`+p+`
`+ee})}function Dt(a,h,p,_,M,z,ee){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+h+`
`+p+`
`+z+" "+ee})}function Tt(a,h,p,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+It(a,p)+(_?" "+_:"")})}function gt(a,h){a.info(function(){return"TIMEOUT: "+h})}Et.prototype.info=function(){};function It(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var _=p[a];if(!(2>_.length)){var M=_[1];if(Array.isArray(M)&&!(1>M.length)){var z=M[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ee=1;ee<M.length;ee++)M[ee]=""}}}}return Se(p)}catch{return h}}var on={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tr;function nr(){}P(nr,Ae),nr.prototype.g=function(){return new XMLHttpRequest},nr.prototype.i=function(){return{}},tr=new nr;function Pn(a,h,p,_){this.j=a,this.i=h,this.l=p,this.R=_||1,this.U=new ge(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Un}function Un(){this.i=null,this.g="",this.h=!1}var So={},Fs={};function Ao(a,h,p){a.L=1,a.v=ml(Ar(h)),a.m=p,a.P=!0,Co(a,null)}function Co(a,h){a.F=Date.now(),Us(a),a.A=Ar(a.v);var p=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),gm(p.i,"t",_),a.C=0,p=a.j.J,a.h=new Un,a.g=bm(a.j,p?h:null,!a.m),0<a.O&&(a.M=new pe(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,_=a.ca;var M="readystatechange";Array.isArray(M)||(M&&(ve[0]=M.toString()),M=ve);for(var z=0;z<M.length;z++){var ee=He(p,M[z],_||h.handleEvent,!1,h.h||h);if(!ee)break;h.g[ee.key]=ee}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),de(),en(a.i,a.u,a.A,a.l,a.R,a.m)}Pn.prototype.ca=function(a){a=a.target;const h=this.M;h&&Cr(a)==3?h.j():this.Y(a)},Pn.prototype.Y=function(a){try{if(a==this.g)e:{const qt=Cr(this.g);var h=this.g.Ba();const Ai=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Im(this.g)))){this.J||qt!=4||h==7||(h==8||0>=Ai?de(3):de(2)),Ti(this);var p=this.g.Z();this.X=p;t:if(xo(this)){var _=Im(this.g);a="";var M=_.length,z=Cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),Ir(this);var ee="";break t}this.h.i=new c.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(z&&h==M-1)});_.length=0,this.h.g+=a,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=p==200,Dt(this.i,this.u,this.A,this.l,this.R,qt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,bt=this.g;if((ze=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(ze)){var Ve=ze;break t}}Ve=null}if(p=Ve)Tt(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Po(this,p);else{this.o=!1,this.s=3,Me(12),Sr(this),Ir(this);break e}}if(this.P){p=!0;let zn;for(;!this.J&&this.C<ee.length;)if(zn=Xu(this,ee),zn==Fs){qt==4&&(this.s=4,Me(14),p=!1),Tt(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==So){this.s=4,Me(15),Tt(this.i,this.l,ee,"[Invalid Chunk]"),p=!1;break}else Tt(this.i,this.l,zn,null),Po(this,zn);if(xo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||ee.length!=0||this.h.h||(this.s=1,Me(16),p=!1),this.o=this.o&&p,!p)Tt(this.i,this.l,ee,"[Invalid Chunked Response]"),Sr(this),Ir(this);else if(0<ee.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),rd(Ht),Ht.M=!0,Me(11))}}else Tt(this.i,this.l,ee,null),Po(this,ee);qt==4&&Sr(this),this.o&&!this.J&&(qt==4?Rm(this.j,this):(this.o=!1,Us(this)))}else RT(this.g),p==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),Sr(this),Ir(this)}}}catch{}finally{}};function xo(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Xu(a,h){var p=a.C,_=h.indexOf(`
`,p);return _==-1?Fs:(p=Number(h.substring(p,_)),isNaN(p)?So:(_+=1,_+p>h.length?Fs:(h=h.slice(_,_+p),a.C=_+p,h)))}Pn.prototype.cancel=function(){this.J=!0,Sr(this)};function Us(a){a.S=Date.now()+a.I,Ju(a,a.I)}function Ju(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ct(g(a.ba,a),h)}function Ti(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Pn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(gt(this.i,this.A),this.L!=2&&(de(),Me(17)),Sr(this),this.s=2,Ir(this)):Ju(this,this.S-a)};function Ir(a){a.j.G==0||a.J||Rm(a.j,a)}function Sr(a){Ti(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Ce(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Po(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||Ke(p.h,a))){if(!a.K&&Ke(p.h,a)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)El(p),_l(p);else break e;nd(p),Me(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=ct(g(p.Za,p),6e3));if(1>=dl(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else $s(p,11)}else if((a.K||p.g==a)&&El(p),!I(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let Ve=M[h];if(p.T=Ve[0],Ve=Ve[1],p.G==2)if(Ve[0]=="c"){p.K=Ve[1],p.ia=Ve[2];const Ht=Ve[3];Ht!=null&&(p.la=Ht,p.j.info("VER="+p.la));const qt=Ve[4];qt!=null&&(p.Aa=qt,p.j.info("SVER="+p.Aa));const Ai=Ve[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(_=1.5*Ai,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const zn=a.g;if(zn){const Il=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var z=_.h;z.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&($t(z,z.h),z.h=null))}if(_.D){const sd=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;sd&&(_.ya=sd,Qe(_.I,_.D,sd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var ee=a;if(_.qa=Dm(_,_.J?_.ia:null,_.W),ee.K){zs(_.h,ee);var ze=ee,bt=_.L;bt&&(ze.I=bt),ze.B&&(Ti(ze),Us(ze)),_.g=ee}else Pm(_);0<p.i.length&&wl(p)}else Ve[0]!="stop"&&Ve[0]!="close"||$s(p,7);else p.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?$s(p,7):td(p):Ve[0]!="noop"&&p.l&&p.l.ta(Ve),p.v=0)}}de(4)}catch{}}var Zu=class{constructor(a,h){this.g=a,this.map=h}};function cl(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ul(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function dl(a){return a.h?1:a.g?a.g.size:0}function Ke(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function $t(a,h){a.g?a.g.add(h):a.h=h}function zs(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}cl.prototype.cancel=function(){if(this.i=ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ko(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return b(a.i)}function hl(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,_=0;_<p;_++)h.push(a[_]);return h}h=[],p=0;for(_ in a)h[p++]=a[_];return h}function gT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const _ in a)h[p++]=_;return h}}}function um(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=gT(a),_=hl(a),M=_.length,z=0;z<M;z++)h.call(void 0,_[z],p&&p[z],a)}var dm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vT(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var _=a[p].indexOf("="),M=null;if(0<=_){var z=a[p].substring(0,_);M=a[p].substring(_+1)}else z=a[p];h(z,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Bs(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Bs){this.h=a.h,fl(this,a.j),this.o=a.o,this.g=a.g,pl(this,a.s),this.l=a.l;var h=a.i,p=new jo;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),hm(this,p),this.m=a.m}else a&&(h=String(a).match(dm))?(this.h=!1,fl(this,h[1]||"",!0),this.o=Ro(h[2]||""),this.g=Ro(h[3]||"",!0),pl(this,h[4]),this.l=Ro(h[5]||"",!0),hm(this,h[6]||"",!0),this.m=Ro(h[7]||"")):(this.h=!1,this.i=new jo(null,this.h))}Bs.prototype.toString=function(){var a=[],h=this.j;h&&a.push(No(h,fm,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(No(h,fm,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(No(p,p.charAt(0)=="/"?wT:_T,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",No(p,TT)),a.join("")};function Ar(a){return new Bs(a)}function fl(a,h,p){a.j=p?Ro(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function pl(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function hm(a,h,p){h instanceof jo?(a.i=h,IT(a.i,a.h)):(p||(h=No(h,ET)),a.i=new jo(h,a.h))}function Qe(a,h,p){a.i.set(h,p)}function ml(a){return Qe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ro(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function No(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,yT),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function yT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var fm=/[#\/\?@]/g,_T=/[#\?:]/g,wT=/[#\?]/g,ET=/[#\?@]/g,TT=/#/g;function jo(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Kr(a){a.g||(a.g=new Map,a.h=0,a.i&&vT(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=jo.prototype,t.add=function(a,h){Kr(this),this.i=null,a=Ii(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function pm(a,h){Kr(a),h=Ii(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function mm(a,h){return Kr(a),h=Ii(a,h),a.g.has(h)}t.forEach=function(a,h){Kr(this),this.g.forEach(function(p,_){p.forEach(function(M){a.call(h,M,_,this)},this)},this)},t.na=function(){Kr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const M=a[_];for(let z=0;z<M.length;z++)p.push(h[_])}return p},t.V=function(a){Kr(this);let h=[];if(typeof a=="string")mm(this,a)&&(h=h.concat(this.g.get(Ii(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return Kr(this),this.i=null,a=Ii(this,a),mm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function gm(a,h,p){pm(a,h),0<p.length&&(a.i=null,a.g.set(Ii(a,h),b(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const z=encodeURIComponent(String(_)),ee=this.V(_);for(_=0;_<ee.length;_++){var M=z;ee[_]!==""&&(M+="="+encodeURIComponent(String(ee[_]))),a.push(M)}}return this.i=a.join("&")};function Ii(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function IT(a,h){h&&!a.j&&(Kr(a),a.i=null,a.g.forEach(function(p,_){var M=_.toLowerCase();_!=M&&(pm(this,_),gm(this,M,p))},a)),a.j=h}function ST(a,h){const p=new Et;if(c.Image){const _=new Image;_.onload=w(Qr,p,"TestLoadImage: loaded",!0,h,_),_.onerror=w(Qr,p,"TestLoadImage: error",!1,h,_),_.onabort=w(Qr,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=w(Qr,p,"TestLoadImage: timeout",!1,h,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function AT(a,h){const p=new Et,_=new AbortController,M=setTimeout(()=>{_.abort(),Qr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(z=>{clearTimeout(M),z.ok?Qr(p,"TestPingServer: ok",!0,h):Qr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),Qr(p,"TestPingServer: error",!1,h)})}function Qr(a,h,p,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(p)}catch{}}function CT(){this.g=new er}function xT(a,h,p){const _=p||"";try{um(a,function(M,z){let ee=M;d(M)&&(ee=Se(M)),h.push(_+z+"="+encodeURIComponent(ee))})}catch(M){throw h.push(_+"type="+encodeURIComponent("_badmap")),M}}function gl(a){this.l=a.Ub||null,this.j=a.eb||!1}P(gl,Ae),gl.prototype.g=function(){return new vl(this.l,this.j)},gl.prototype.i=function(a){return function(){return a}}({});function vl(a,h){N.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(vl,N),t=vl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,bo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,bo(this)),this.g&&(this.readyState=3,bo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function vm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Do(this):bo(this),this.readyState==3&&vm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Do(this))},t.Qa=function(a){this.g&&(this.response=a,Do(this))},t.ga=function(){this.g&&Do(this)};function Do(a){a.readyState=4,a.l=null,a.j=null,a.v=null,bo(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function bo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function ym(a){let h="";return V(a,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function ed(a,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=ym(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Qe(a,h,p))}function ut(a){N.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(ut,N);var PT=/^https?$/i,kT=["POST","PUT"];t=ut.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tr.g(),this.v=this.o?jt(this.o):jt(tr),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(z){_m(this,z);return}if(a=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)p.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const z of _.keys())p.set(z,_.get(z));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(z=>z.toLowerCase()=="content-type"),M=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(kT,h,void 0))||_||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of p)this.g.setRequestHeader(z,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tm(this),this.u=!0,this.g.send(a),this.u=!1}catch(z){_m(this,z)}};function _m(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,wm(a),yl(a)}function wm(a){a.A||(a.A=!0,F(a,"complete"),F(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,F(this,"complete"),F(this,"abort"),yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Em(this):this.bb())},t.bb=function(){Em(this)};function Em(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Cr(a)!=4||a.Z()!=2)){if(a.u&&Cr(a)==4)ne(a.Ea,0,a);else if(F(a,"readystatechange"),Cr(a)==4){a.h=!1;try{const ee=a.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=ee===0){var M=String(a.D).match(dm)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),_=!PT.test(M?M.toLowerCase():"")}p=_}if(p)F(a,"complete"),F(a,"success");else{a.m=6;try{var z=2<Cr(a)?a.g.statusText:""}catch{z=""}a.l=z+" ["+a.Z()+"]",wm(a)}}finally{yl(a)}}}}function yl(a,h){if(a.g){Tm(a);const p=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||F(a,"ready");try{p.onreadystatechange=_}catch{}}}function Tm(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Cr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Cr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Fn(h)}};function Im(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function RT(a){const h={};a=(a.g&&2<=Cr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(I(a[_]))continue;var p=R(a[_]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const z=h[M]||[];h[M]=z,z.push(p)}v(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oo(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Sm(a){this.Aa=0,this.i=[],this.j=new Et,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oo("baseRetryDelayMs",5e3,a),this.cb=Oo("retryDelaySeedMs",1e4,a),this.Wa=Oo("forwardChannelMaxRetries",2,a),this.wa=Oo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new cl(a&&a.concurrentRequestLimit),this.Da=new CT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sm.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,_){Me(0),this.W=a,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=Dm(this,null,this.W),wl(this)};function td(a){if(Am(a),a.G==3){var h=a.U++,p=Ar(a.I);if(Qe(p,"SID",a.K),Qe(p,"RID",h),Qe(p,"TYPE","terminate"),Mo(a,p),h=new Pn(a,a.j,h),h.L=2,h.v=ml(Ar(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=bm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Us(h)}jm(a)}function _l(a){a.g&&(rd(a),a.g.cancel(),a.g=null)}function Am(a){_l(a),a.u&&(c.clearTimeout(a.u),a.u=null),El(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function wl(a){if(!ul(a.h)&&!a.s){a.s=!0;var h=a.Ga;W||B(),$||(W(),$=!0),O.add(h,a),a.B=0}}function NT(a,h){return dl(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ct(g(a.Ga,a,h),Nm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const M=new Pn(this,this.j,a);let z=this.o;if(this.S&&(z?(z=y(z),C(z,this.S)):z=this.S),this.m!==null||this.O||(M.H=z,z=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=xm(this,M,h),p=Ar(this.I),Qe(p,"RID",a),Qe(p,"CVER",22),this.D&&Qe(p,"X-HTTP-Session-Id",this.D),Mo(this,p),z&&(this.O?h="headers="+encodeURIComponent(String(ym(z)))+"&"+h:this.m&&ed(p,this.m,z)),$t(this.h,M),this.Ua&&Qe(p,"TYPE","init"),this.P?(Qe(p,"$req",h),Qe(p,"SID","null"),M.T=!0,Ao(M,p,null)):Ao(M,p,h),this.G=2}}else this.G==3&&(a?Cm(this,a):this.i.length==0||ul(this.h)||Cm(this))};function Cm(a,h){var p;h?p=h.l:p=a.U++;const _=Ar(a.I);Qe(_,"SID",a.K),Qe(_,"RID",p),Qe(_,"AID",a.T),Mo(a,_),a.m&&a.o&&ed(_,a.m,a.o),p=new Pn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=xm(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),$t(a.h,p),Ao(p,_,h)}function Mo(a,h){a.H&&V(a.H,function(p,_){Qe(h,_,p)}),a.l&&um({},function(p,_){Qe(h,_,p)})}function xm(a,h,p){p=Math.min(a.i.length,p);var _=a.l?g(a.l.Na,a.l,a):null;e:{var M=a.i;let z=-1;for(;;){const ee=["count="+p];z==-1?0<p?(z=M[0].g,ee.push("ofs="+z)):z=0:ee.push("ofs="+z);let ze=!0;for(let bt=0;bt<p;bt++){let Ve=M[bt].g;const Ht=M[bt].map;if(Ve-=z,0>Ve)z=Math.max(0,M[bt].g-100),ze=!1;else try{xT(Ht,ee,"req"+Ve+"_")}catch{_&&_(Ht)}}if(ze){_=ee.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,_}function Pm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;W||B(),$||(W(),$=!0),O.add(h,a),a.v=0}}function nd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ct(g(a.Fa,a),Nm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,km(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ct(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),_l(this),km(this))};function rd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function km(a){a.g=new Pn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Ar(a.qa);Qe(h,"RID","rpc"),Qe(h,"SID",a.K),Qe(h,"AID",a.T),Qe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Qe(h,"TO",a.ja),Qe(h,"TYPE","xmlhttp"),Mo(a,h),a.m&&a.o&&ed(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=ml(Ar(h)),p.m=null,p.P=!0,Co(p,a)}t.Za=function(){this.C!=null&&(this.C=null,_l(this),nd(this),Me(19))};function El(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Rm(a,h){var p=null;if(a.g==h){El(a),rd(a),a.g=null;var _=2}else if(Ke(a.h,h))p=h.D,zs(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=a.B;_=me(),F(_,new rt(_,p)),wl(a)}else Pm(a);else if(M=h.s,M==3||M==0&&0<h.X||!(_==1&&NT(a,h)||_==2&&nd(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),M){case 1:$s(a,5);break;case 4:$s(a,10);break;case 3:$s(a,6);break;default:$s(a,2)}}}function Nm(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function $s(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),_=a.Xa;const M=!_;_=new Bs(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||fl(_,"https"),ml(_),M?ST(_.toString(),p):AT(_.toString(),p)}else Me(2);a.G=0,a.l&&a.l.sa(h),jm(a),Am(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function jm(a){if(a.G=0,a.ka=[],a.l){const h=ko(a.h);(h.length!=0||a.i.length!=0)&&(U(a.ka,h),U(a.ka,a.i),a.h.i.length=0,b(a.i),a.i.length=0),a.l.ra()}}function Dm(a,h,p){var _=p instanceof Bs?Ar(p):new Bs(p);if(_.g!="")h&&(_.g=h+"."+_.g),pl(_,_.s);else{var M=c.location;_=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var z=new Bs(null);_&&fl(z,_),h&&(z.g=h),M&&pl(z,M),p&&(z.l=p),_=z}return p=a.D,h=a.ya,p&&h&&Qe(_,p,h),Qe(_,"VER",a.la),Mo(a,_),_}function bm(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ut(new gl({eb:p})):new ut(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Om(){}t=Om.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(a,h){return new vn(a,h)};function vn(a,h){N.call(this),this.g=new Sm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!I(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Si(this)}P(vn,N),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){td(this.g)},vn.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=Se(a),a=p);h.i.push(new Zu(h.Ya++,a)),h.G==3&&wl(h)},vn.prototype.N=function(){this.g.l=null,delete this.j,td(this.g),delete this.g,vn.aa.N.call(this)};function Mm(a){Y.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}P(Mm,Y);function Vm(){ae.call(this),this.status=1}P(Vm,ae);function Si(a){this.g=a}P(Si,Om),Si.prototype.ua=function(){F(this.g,"a")},Si.prototype.ta=function(a){F(this.g,new Mm(a))},Si.prototype.sa=function(a){F(this.g,new Vm)},Si.prototype.ra=function(){F(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,iw=function(){return new Tl},sw=function(){return me()},rw=fe,$h={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,oc=on,Tr.COMPLETE="complete",nw=Tr,Z.EventType=K,K.OPEN="a",K.CLOSE="b",K.ERROR="c",K.MESSAGE="d",N.prototype.listen=N.prototype.K,Xo=Z,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,tw=ut}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const iv="@firebase/firestore",ov="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new up("@firebase/firestore");function xi(){return ui.logLevel}function ie(t,...e){if(ui.logLevel<=Ne.DEBUG){const n=e.map(fp);ui.debug(`Firestore (${_o}): ${t}`,...n)}}function Br(t,...e){if(ui.logLevel<=Ne.ERROR){const n=e.map(fp);ui.error(`Firestore (${_o}): ${t}`,...n)}}function As(t,...e){if(ui.logLevel<=Ne.WARN){const n=e.map(fp);ui.warn(`Firestore (${_o}): ${t}`,...n)}}function fp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ow(t,r,n)}function ow(t,e,n){let r=`FIRESTORE (${_o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Br(r),new Error(r)}function Le(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ow(e,s,r)}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class qA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class WA{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Or,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string",31837,{l:r}),new aw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class GA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new GA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class av{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Le(this.o===void 0,3512);const r=i=>{i.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new av(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new av(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=YA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function Hh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return xe(r,s);{const i=lw(),o=XA(i.encode(lv(t,n)),i.encode(lv(e,n)));return o!==0?o:xe(r,s)}}n+=r>65535?2:1}return xe(t.length,e.length)}function lv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function XA(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return xe(t[n],e[n]);return xe(t.length,e.length)}function lo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="__name__";class ir{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ir.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ir?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=ir.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return xe(e.length,n.length)}static compareSegments(e,n){const r=ir.isNumericId(e),s=ir.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ir.extractNumericId(e).compare(ir.extractNumericId(n)):Hh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ws.fromString(e.substring(4,e.length-2))}}class qe extends ir{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const JA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends ir{construct(e,n,r){return new Vt(e,n,r)}static isValidIdentifier(e){return JA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cv}static keyField(){return new Vt([cv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new re(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new re(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new re(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new re(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(n)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(qe.fromString(e))}static fromName(e){return new he(qe.fromString(e).popFirst(5))}static empty(){return new he(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e,n){if(!n)throw new re(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZA(t,e,n,r){if(e===!0&&r===!0)throw new re(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uv(t){if(!he.isDocumentKey(t))throw new re(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dv(t){if(he.isDocumentKey(t))throw new re(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xu(t);throw new re(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ja(t,e){if(!uw(t))throw new re(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new re(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=-62135596800,fv=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fv);return new Xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hv)throw new re(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fv}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ja(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:wt("string",Xe._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Xe(0,0))}static max(){return new Ee(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=-1;function eC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ee.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Cs(s,he.empty(),e)}function tC(t){return new Cs(t.readTime,t.key,Oa)}class Cs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cs(Ee.min(),he.empty(),Oa)}static max(){return new Cs(Ee.max(),he.empty(),Oa)}}function nC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==rC)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function iC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Pu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=-1;function ku(t){return t==null}function Bc(t){return t===0&&1/t==-1/0}function oC(t){return typeof t=="number"&&Number.isInteger(t)&&!Bc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="";function aC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pv(e)),e=lC(t.get(n),e);return pv(e)}function lC(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case dw:n+="";break;default:n+=i}}return n}function pv(t){return t+dw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){this.comparator=e,this.root=n||Mt.EMPTY}insert(e,n){return new lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Mt.RED,this.left=s??Mt.EMPTY,this.right=i??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Mt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Mt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gv(this.data.getIterator())}getIteratorFrom(e){return new gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Tn([])}unionWith(e){let n=new Ct(Vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new fw("Invalid base64 string: "+i):i}}(e);return new Ut(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const cC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(t){if(Le(!!t,39018),typeof t=="string"){let e=0;const n=cC.exec(t);if(Le(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ps(t){return typeof t=="string"?Ut.fromBase64String(t):Ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="server_timestamp",mw="__type__",gw="__previous_value__",vw="__local_write_time__";function gp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[mw])===null||n===void 0?void 0:n.stringValue)===pw}function Ru(t){const e=t.mapValue.fields[gw];return gp(e)?Ru(e):e}function Ma(t){const e=xs(t.mapValue.fields[vw].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n,r,s,i,o,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const $c="(default)";class Va{constructor(e,n){this.projectId=e,this.database=n||$c}static empty(){return new Va("","")}get isDefaultDatabase(){return this.database===$c}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="__type__",dC="__max__",$l={mapValue:{}},_w="__vector__",Hc="value";function ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gp(t)?4:fC(t)?9007199254740991:hC(t)?10:11:_e(28295,{value:t})}function vr(t,e){if(t===e)return!0;const n=ks(t);if(n!==ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ma(t).isEqual(Ma(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=xs(s.timestampValue),c=xs(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ps(s.bytesValue).isEqual(Ps(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return pt(s.geoPointValue.latitude)===pt(i.geoPointValue.latitude)&&pt(s.geoPointValue.longitude)===pt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return pt(s.integerValue)===pt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=pt(s.doubleValue),c=pt(i.doubleValue);return o===c?Bc(o)===Bc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return lo(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(mv(o)!==mv(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!vr(o[u],c[u])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function La(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function co(t,e){if(t===e)return 0;const n=ks(t),r=ks(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=pt(i.integerValue||i.doubleValue),u=pt(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return vv(t.timestampValue,e.timestampValue);case 4:return vv(Ma(t),Ma(e));case 5:return Hh(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Ps(i),u=Ps(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=xe(c[d],u[d]);if(f!==0)return f}return xe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=xe(pt(i.latitude),pt(o.latitude));return c!==0?c:xe(pt(i.longitude),pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,d,f;const m=i.fields||{},g=o.fields||{},w=(c=m[Hc])===null||c===void 0?void 0:c.arrayValue,P=(u=g[Hc])===null||u===void 0?void 0:u.arrayValue,b=xe(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:yv(w,P)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$l.mapValue&&o===$l.mapValue)return 0;if(i===$l.mapValue)return 1;if(o===$l.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=Hh(u[m],f[m]);if(g!==0)return g;const w=co(c[u[m]],d[f[m]]);if(w!==0)return w}return xe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{le:n})}}function vv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=xs(t),r=xs(e),s=xe(n.seconds,r.seconds);return s!==0?s:xe(n.nanos,r.nanos)}function yv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=co(n[s],r[s]);if(i)return i}return xe(n.length,r.length)}function uo(t){return qh(t)}function qh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ps(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=qh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${qh(n.fields[o])}`;return s+"}"}(t.mapValue):_e(61005,{value:t})}function ac(t){switch(ks(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ru(t);return e?16+ac(e):16;case 5:return 2*t.stringValue.length;case 6:return Ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ac(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Os(r.fields,(i,o)=>{s+=i.length+ac(o)}),s}(t.mapValue);default:throw _e(13486,{value:t})}}function _v(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wh(t){return!!t&&"integerValue"in t}function vp(t){return!!t&&"arrayValue"in t}function wv(t){return!!t&&"nullValue"in t}function Ev(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lc(t){return!!t&&"mapValue"in t}function hC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[yw])===null||n===void 0?void 0:n.stringValue)===_w}function ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Os(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function fC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===dC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(n)}setAll(e){let n=Vt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=ha(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];lc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Os(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new un(ha(this.value))}}function ww(t){const e=[];return Os(t.fields,(n,r)=>{const s=new Vt([n]);if(lc(r)){const i=ww(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Xt(e,0,Ee.min(),Ee.min(),Ee.min(),un.empty(),0)}static newFoundDocument(e,n,r,s){return new Xt(e,1,n,Ee.min(),r,s,0)}static newNoDocument(e,n){return new Xt(e,2,n,Ee.min(),Ee.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,Ee.min(),Ee.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n){this.position=e,this.inclusive=n}}function Tv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=co(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Iv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n="asc"){this.field=e,this.dir=n}}function pC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{}class _t extends Ew{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gC(e,n,r):n==="array-contains"?new _C(e,r):n==="in"?new wC(e,r):n==="not-in"?new EC(e,r):n==="array-contains-any"?new TC(e,r):new _t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vC(e,r):new yC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&ks(this.value)===ks(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends Ew{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Yn(e,n)}matches(e){return Tw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Tw(t){return t.op==="and"}function Iw(t){return mC(t)&&Tw(t)}function mC(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function Gh(t){if(t instanceof _t)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(Iw(t))return t.filters.map(e=>Gh(e)).join(",");{const e=t.filters.map(n=>Gh(n)).join(",");return`${t.op}(${e})`}}function Sw(t,e){return t instanceof _t?function(r,s){return s instanceof _t&&r.op===s.op&&r.field.isEqual(s.field)&&vr(r.value,s.value)}(t,e):t instanceof Yn?function(r,s){return s instanceof Yn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&Sw(o,s.filters[c]),!0):!1}(t,e):void _e(19439)}function Aw(t){return t instanceof _t?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(Aw).join(" ,")+"}"}(t):"Filter"}class gC extends _t{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class vC extends _t{constructor(e,n){super(e,"in",n),this.keys=Cw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yC extends _t{constructor(e,n){super(e,"not-in",n),this.keys=Cw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Cw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class _C extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vp(n)&&La(n.arrayValue,this.value)}}class wC extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&La(this.value.arrayValue,n)}}class EC extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!La(this.value.arrayValue,n)}}class TC extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>La(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Pe=null}}function Sv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new IC(t,e,n,r,s,i,o)}function yp(t){const e=Ie(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ku(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uo(r)).join(",")),e.Pe=n}return e.Pe}function _p(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Sw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Iv(t.startAt,e.startAt)&&Iv(t.endAt,e.endAt)}function Kh(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function SC(t,e,n,r,s,i,o,c){return new Za(t,e,n,r,s,i,o,c)}function Nu(t){return new Za(t)}function Av(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xw(t){return t.collectionGroup!==null}function fa(t){const e=Ie(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ct(Vt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Wc(i,r))}),n.has(Vt.keyField().canonicalString())||e.Te.push(new Wc(Vt.keyField(),r))}return e.Te}function dr(t){const e=Ie(t);return e.Ie||(e.Ie=AC(e,fa(t))),e.Ie}function AC(t,e){if(t.limitType==="F")return Sv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wc(s.field,i)});const n=t.endAt?new qc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qc(t.startAt.position,t.startAt.inclusive):null;return Sv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qh(t,e){const n=t.filters.concat([e]);return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yh(t,e,n){return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ju(t,e){return _p(dr(t),dr(e))&&t.limitType===e.limitType}function Pw(t){return`${yp(dr(t))}|lt:${t.limitType}`}function Pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Aw(s)).join(", ")}]`),ku(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>uo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>uo(s)).join(",")),`Target(${r})`}(dr(t))}; limitType=${t.limitType})`}function Du(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=Tv(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,fa(r),s)||r.endAt&&!function(o,c,u){const d=Tv(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,fa(r),s))}(t,e)}function CC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kw(t){return(e,n)=>{let r=!1;for(const s of fa(t)){const i=xC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function xC(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?co(u,d):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return hw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new lt(he.comparator);function $r(){return PC}const Rw=new lt(he.comparator);function Jo(...t){let e=Rw;for(const n of t)e=e.insert(n.key,n);return e}function Nw(t){let e=Rw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xs(){return pa()}function jw(){return pa()}function pa(){return new yi(t=>t.toString(),(t,e)=>t.isEqual(e))}const kC=new lt(he.comparator),RC=new Ct(he.comparator);function je(...t){let e=RC;for(const n of t)e=e.add(n);return e}const NC=new Ct(xe);function jC(){return NC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bc(e)?"-0":e}}function Dw(t){return{integerValue:""+t}}function DC(t,e){return oC(e)?Dw(e):wp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(){this._=void 0}}function bC(t,e,n){return t instanceof Fa?function(s,i){const o={fields:{[mw]:{stringValue:pw},[vw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&gp(i)&&(i=Ru(i)),i&&(o.fields[gw]=i),{mapValue:o}}(n,e):t instanceof Ua?Ow(t,e):t instanceof za?Mw(t,e):function(s,i){const o=bw(s,i),c=Cv(o)+Cv(s.Ee);return Wh(o)&&Wh(s.Ee)?Dw(c):wp(s.serializer,c)}(t,e)}function OC(t,e,n){return t instanceof Ua?Ow(t,e):t instanceof za?Mw(t,e):n}function bw(t,e){return t instanceof Gc?function(r){return Wh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Fa extends bu{}class Ua extends bu{constructor(e){super(),this.elements=e}}function Ow(t,e){const n=Vw(e);for(const r of t.elements)n.some(s=>vr(s,r))||n.push(r);return{arrayValue:{values:n}}}class za extends bu{constructor(e){super(),this.elements=e}}function Mw(t,e){let n=Vw(e);for(const r of t.elements)n=n.filter(s=>!vr(s,r));return{arrayValue:{values:n}}}class Gc extends bu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Cv(t){return pt(t.integerValue||t.doubleValue)}function Vw(t){return vp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n){this.field=e,this.transform=n}}function VC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ua&&s instanceof Ua||r instanceof za&&s instanceof za?lo(r.elements,s.elements,vr):r instanceof Gc&&s instanceof Gc?vr(r.Ee,s.Ee):r instanceof Fa&&s instanceof Fa}(t.transform,e.transform)}class LC{constructor(e,n){this.version=e,this.transformResults=n}}class bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ou{}function Lw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ep(t.key,bn.none()):new el(t.key,t.data,bn.none());{const n=t.data,r=un.empty();let s=new Ct(Vt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ms(t.key,r,new Tn(s.toArray()),bn.none())}}function FC(t,e,n){t instanceof el?function(s,i,o){const c=s.value.clone(),u=Pv(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ms?function(s,i,o){if(!cc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Pv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Fw(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ma(t,e,n,r){return t instanceof el?function(i,o,c,u){if(!cc(i.precondition,o))return c;const d=i.value.clone(),f=kv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ms?function(i,o,c,u){if(!cc(i.precondition,o))return c;const d=kv(i.fieldTransforms,u,o),f=o.data;return f.setAll(Fw(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return cc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function UC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=bw(r.transform,s||null);i!=null&&(n===null&&(n=un.empty()),n.set(r.field,i))}return n||null}function xv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&lo(r,s,(i,o)=>VC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class el extends Ou{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ms extends Ou{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Pv(t,e,n){const r=new Map;Le(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,OC(o,c,n[s]))}return r}function kv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,bC(i,o,e))}return r}class Ep extends Ou{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zC extends Ou{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&FC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=Lw(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(n,r)=>xv(n,r))&&lo(this.baseMutations,e.baseMutations,(n,r)=>xv(n,r))}}class Tp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Le(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return kC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Tp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,De;function qC(t){switch(t){case q.OK:return _e(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return _e(15467,{code:t})}}function Uw(t){if(t===void 0)return Br("GRPC error has no .code"),q.UNKNOWN;switch(t){case vt.OK:return q.OK;case vt.CANCELLED:return q.CANCELLED;case vt.UNKNOWN:return q.UNKNOWN;case vt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case vt.INTERNAL:return q.INTERNAL;case vt.UNAVAILABLE:return q.UNAVAILABLE;case vt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case vt.NOT_FOUND:return q.NOT_FOUND;case vt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case vt.ABORTED:return q.ABORTED;case vt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case vt.DATA_LOSS:return q.DATA_LOSS;default:return _e(39323,{code:t})}}(De=vt||(vt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new ws([4294967295,4294967295],0);function Rv(t){const e=lw().encode(t),n=new ew;return n.update(e),new Uint8Array(n.digest())}function Nv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ws([n,r],0),new ws([s,i],0)]}class Ip{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(r<0)throw new Zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ws.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(ws.fromNumber(r)));return s.compare(WC)===1&&(s=new ws([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Rv(e),[r,s]=Nv(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ip(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.fe===0)return;const n=Rv(e),[r,s]=Nv(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,tl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mu(Ee.min(),s,new lt(xe),$r(),je())}}class tl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tl(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class zw{constructor(e,n){this.targetId=e,this.De=n}}class Bw{constructor(e,n,r=Ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class jv{constructor(){this.ve=0,this.Ce=Dv(),this.Fe=Ut.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=je(),n=je(),r=je();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:_e(38017,{changeType:i})}}),new tl(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Dv()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class GC{constructor(e){this.We=e,this.Ge=new Map,this.ze=$r(),this.je=Hl(),this.Je=Hl(),this.He=new lt(xe)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Kh(i))if(r===0){const o=new he(i.path);this.Xe(n,o,Xt.newNoDocument(o,Ee.min()))}else Le(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const c=this._t(e),u=c?this.ut(c,e,o):1;if(u!==0){this.rt(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Ps(r).toUint8Array()}catch(u){if(u instanceof fw)return As("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ip(o,s,i)}catch(u){return As(u instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const c=this.st(o);if(c){if(i.current&&Kh(c.target)){const u=new he(c.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,Xt.newNoDocument(u,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=je();this.Je.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.st(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Mu(e,n,this.He,this.ze,r);return this.ze=$r(),this.je=Hl(),this.Je=Hl(),this.He=new lt(xe),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new jv,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ct(xe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ct(xe),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new jv),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Hl(){return new lt(he.comparator)}function Dv(){return new lt(he.comparator)}const KC={asc:"ASCENDING",desc:"DESCENDING"},QC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YC={and:"AND",or:"OR"};class XC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xh(t,e){return t.useProto3Json||ku(e)?e:{value:e}}function Kc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $w(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JC(t,e){return Kc(t,e.toTimestamp())}function hr(t){return Le(!!t,49232),Ee.fromTimestamp(function(n){const r=xs(n);return new Xe(r.seconds,r.nanos)}(t))}function Sp(t,e){return Jh(t,e).canonicalString()}function Jh(t,e){const n=function(s){return new qe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Hw(t){const e=qe.fromString(t);return Le(Qw(e),10190,{key:e.toString()}),e}function Zh(t,e){return Sp(t.databaseId,e.path)}function Md(t,e){const n=Hw(e);if(n.get(1)!==t.databaseId.projectId)throw new re(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(Ww(n))}function qw(t,e){return Sp(t.databaseId,e)}function ZC(t){const e=Hw(t);return e.length===4?qe.emptyPath():Ww(e)}function ef(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ww(t){return Le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bv(t,e,n){return{name:Zh(t,e),fields:n.value.mapValue.fields}}function ex(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(Le(f===void 0||typeof f=="string",58123),Ut.fromBase64String(f||"")):(Le(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ut.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?q.UNKNOWN:Uw(d.code);return new re(f,d.message||"")}(o);n=new Bw(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Md(t,r.document.name),i=hr(r.document.updateTime),o=r.document.createTime?hr(r.document.createTime):Ee.min(),c=new un({mapValue:{fields:r.document.fields}}),u=Xt.newFoundDocument(s,i,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new uc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Md(t,r.document),i=r.readTime?hr(r.readTime):Ee.min(),o=Xt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new uc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Md(t,r.document),i=r.removedTargetIds||[];n=new uc([],i,s,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new HC(s,i),c=r.targetId;n=new zw(c,o)}}return n}function tx(t,e){let n;if(e instanceof el)n={update:bv(t,e.key,e.value)};else if(e instanceof Ep)n={delete:Zh(t,e.key)};else if(e instanceof Ms)n={update:bv(t,e.key,e.data),updateMask:ux(e.fieldMask)};else{if(!(e instanceof zC))return _e(16599,{Rt:e.type});n={verify:Zh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Fa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof za)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Gc)return{fieldPath:o.field.canonicalString(),increment:c.Ee};throw _e(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:JC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:_e(27497)}(t,e.precondition)),n}function nx(t,e){return t&&t.length>0?(Le(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?hr(s.updateTime):hr(i);return o.isEqual(Ee.min())&&(o=hr(i)),new LC(o,s.transformResults||[])}(n,e))):[]}function rx(t,e){return{documents:[qw(t,e.path)]}}function sx(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qw(t,s);const i=function(d){if(d.length!==0)return Kw(Yn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ki(g.field),direction:ax(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Xh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:s}}function ix(t){let e=ZC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Le(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=Gw(m);return g instanceof Yn&&Iw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(P){return new Wc(Ri(P.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,ku(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,w=m.values||[];return new qc(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,w=m.values||[];return new qc(w,g)}(n.endAt)),SC(e,s,o,i,c,"F",u,d)}function ox(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Gw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ri(n.unaryFilter.field);return _t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ri(n.unaryFilter.field);return _t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ri(n.unaryFilter.field);return _t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ri(n.unaryFilter.field);return _t.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return _t.create(Ri(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(r=>Gw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function ax(t){return KC[t]}function lx(t){return QC[t]}function cx(t){return YC[t]}function ki(t){return{fieldPath:t.canonicalString()}}function Ri(t){return Vt.fromServerFormat(t.fieldPath)}function Kw(t){return t instanceof _t?function(n){if(n.op==="=="){if(Ev(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NAN"}};if(wv(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ev(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NAN"}};if(wv(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ki(n.field),op:lx(n.op),value:n.value}}}(t):t instanceof Yn?function(n){const r=n.getFilters().map(s=>Kw(s));return r.length===1?r[0]:{compositeFilter:{op:cx(n.op),filters:r}}}(t):_e(54877,{filter:t})}function ux(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,s,i=Ee.min(),o=Ee.min(),c=Ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.gt=e}}function hx(t){const e=ix({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.Dn=new px}addToCollectionParentIndex(e,n){return this.Dn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Cs.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class px{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ct(qe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ct(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yw=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(Yw,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ho(0)}static ur(){return new ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="LruGarbageCollector",mx=1048576;function Vv([t,e],[n,r]){const s=xe(t,n);return s===0?xe(e,r):s}class gx{constructor(e){this.Tr=e,this.buffer=new Ct(Vv),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Vv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vx{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ie(Mv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?ie(Mv,"Ignoring IndexedDB error during garbage collection: ",n):await wo(n)}await this.Rr(3e5)})}}class yx{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return G.resolve(Pu.ue);const r=new gx(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Ov)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ov):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),xi()<=Ne.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function _x(t,e){return new yx(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.changes=new yi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ma(r.mutation,s,Tn.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const s=Xs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Jo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=$r();const o=pa(),c=function(){return pa()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Ms)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ma(f.mutation,d,f.mutation.getFieldMask(),Xe.now())):o.set(d.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return c.set(d,new Ex(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=pa();let s=new lt((o,c)=>o-c),i=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Tn.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||je()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=jw();f.forEach(g=>{if(!i.has(g)){const w=Lw(n.get(g),r.get(g));w!==null&&m.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(Xs());let c=Oa,u=i;return o.next(d=>G.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?G.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,je())).next(f=>({batchId:c,changes:Nw(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let s=Jo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Jo();return this.indexManager.getCollectionParents(e,i).next(c=>G.forEach(c,u=>{const d=function(m,g){return new Za(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Xt.newInvalidDocument(f)))});let c=Jo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&ma(f.mutation,d,Tn.empty(),Xe.now()),Du(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return G.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hr(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:hx(s.bundledQuery),readTime:hr(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.overlays=new lt(he.comparator),this.kr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xs();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=Xs(),i=n.length+1,o=new he(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new lt((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Xs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=Xs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return G.resolve(c)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $C(n,r));let i=this.kr.get(n);i===void 0&&(i=je(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(){this.qr=new Ct(Pt.Qr),this.$r=new Ct(Pt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Pt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Pt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new he(new qe([])),r=new Pt(n,e),s=new Pt(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new he(new qe([])),r=new Pt(n,e),s=new Pt(n,e+1);let i=je();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Pt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return he.comparator(e.key,n.key)||xe(e.Hr,n.Hr)}static Ur(e,n){return xe(e.Hr,n.Hr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ct(Pt.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new BC(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Yr=this.Yr.add(new Pt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?mp:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pt(n,0),s=new Pt(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const c=this.Zr(o.Hr);i.push(c)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ct(xe);return n.forEach(s=>{const i=new Pt(s,0),o=new Pt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],c=>{r=r.add(c.Hr)})}),G.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const o=new Pt(new he(i),0);let c=new Ct(xe);return this.Yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Hr)),!0)},o),G.resolve(this.ei(c))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Le(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return G.forEach(n.mutations,s=>{const i=new Pt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Pt(n,0),s=this.Yr.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.ni=e,this.docs=function(){return new lt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=$r();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Xt.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=$r();const o=n.path,c=new he(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||nC(tC(f),r)<=0||(s.has(f.key)||Du(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){_e(9500)}ri(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Px(this)}getSize(e){return G.resolve(this.size)}}class Px extends wx{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.persistence=e,this.ii=new yi(n=>yp(n),_p),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.si=0,this.oi=new Ap,this.targetCount=0,this._i=ho.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),G.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new ho(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.hr(n),G.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n){this.ai={},this.overlays={},this.ui=new Pu(0),this.ci=!1,this.ci=!0,this.li=new Ax,this.referenceDelegate=e(this),this.hi=new kx(this),this.indexManager=new fx,this.remoteDocumentCache=function(s){return new xx(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new dx(n),this.Ti=new Ix(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Sx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Cx(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const s=new Rx(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return G.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Rx extends sC{constructor(e){super(),this.currentSequenceNumber=e}}class Cp{constructor(e){this.persistence=e,this.Ai=new Ap,this.Ri=null}static Vi(e){return new Cp(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,r=>{const s=he.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,Ee.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return G.or([()=>G.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Qc{constructor(e,n){this.persistence=e,this.gi=new yi(r=>aC(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=_x(this,n)}static Vi(e,n){return new Qc(e,n)}Ii(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return G.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?G.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(c=>{c||(r++,i.removeEntry(o,Ee.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ac(e.data.value)),n}Sr(e,n,r){return G.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=je(),s=je();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new xp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return S1()?8:iC(Zt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Nx;return this.ws(e,n,o).next(c=>{if(i.result=c,this.Rs)return this.Ss(e,n,o,c.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(xi()<=Ne.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(xi()<=Ne.DEBUG&&ie("QueryEngine","Query:",Pi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(xi()<=Ne.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(n))):G.resolve())}ps(e,n){if(Av(n))return G.resolve(null);let r=dr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Yh(n,null,"F"),r=dr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=je(...i);return this.gs.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,c);return this.Ds(n,d,o,u.readTime)?this.ps(e,Yh(n,null,"F")):this.vs(e,d,n,u)}))})))}ys(e,n,r,s){return Av(n)||s.isEqual(Ee.min())?G.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?G.resolve(null):(xi()<=Ne.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pi(n)),this.vs(e,o,n,eC(s,Oa)).next(c=>c))})}bs(e,n){let r=new Ct(kw(e));return n.forEach((s,i)=>{Du(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return xi()<=Ne.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Pi(n)),this.gs.getDocumentsMatchingQuery(e,n,Cs.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="LocalStore",Dx=3e8;class bx{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new lt(xe),this.Ms=new yi(i=>yp(i),_p),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Ox(t,e,n,r){return new bx(t,e,n,r)}async function Jw(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=je();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:c}))})})}function Mx(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let w=G.resolve();return g.forEach(P=>{w=w.next(()=>f.getEntry(u,P)).next(b=>{const U=d.docVersions.get(P);Le(U!==null,48541),b.version.compareTo(U)<0&&(m.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=je();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Zw(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Vx(t,e){const n=Ie(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.hi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.hi.addMatchingKeys(i,f.addedDocuments,m)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(Ut.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(m,w),function(b,U,A){return b.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Dx?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(g,w,f)&&c.push(n.hi.updateTargetData(i,w))});let u=$r(),d=je();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(Lx(i,o,e.documentUpdates).next(f=>{u=f.Ls,d=f.ks})),!r.isEqual(Ee.min())){const f=n.hi.getLastRemoteSnapshotVersion(i).next(m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return G.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Fs=s,i))}function Lx(t,e,n){let r=je(),s=je();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=$r();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Ee.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):ie(Pp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ls:o,ks:s}})}function Fx(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=mp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ux(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new cs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function tf(t,e,n){const r=Ie(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Eo(o))throw o;ie(Pp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Lv(t,e,n){const r=Ie(t);let s=Ee.min(),i=je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=Ie(u),g=m.Ms.get(f);return g!==void 0?G.resolve(m.Fs.get(g)):m.hi.getTargetData(d,f)}(r,o,dr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:Ee.min(),n?i:je())).next(c=>(zx(r,CC(e),c),{documents:c,qs:i})))}function zx(t,e,n){let r=t.xs.get(e)||Ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Fv{constructor(){this.activeTargetIds=jC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bx{constructor(){this.Fo=new Fv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Fv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="ConnectivityMonitor";class zv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ie(Uv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ie(Uv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function nf(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="RestConnection",Hx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qx{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===$c?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=nf(),c=this.Go(e,n.toUriEncodedString());ie(Vd,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:d}=new URL(c),f=vi(d);return this.jo(e,c,u,r,f).then(m=>(ie(Vd,`Received RPC '${e}' ${o}: `,m),m),m=>{throw As(Vd,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_o}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=Hx[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class Gx extends qx{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=nf();return new Promise((c,u)=>{const d=new tw;d.setWithCredentials(!0),d.listenOnce(nw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case oc.NO_ERROR:const m=d.getResponseJson();ie(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case oc.TIMEOUT:ie(Kt,`RPC '${e}' ${o} timed out`),u(new re(q.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:const g=d.getStatus();if(ie(Kt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const P=w==null?void 0:w.error;if(P&&P.status&&P.message){const b=function(A){const I=A.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(I)>=0?I:q.UNKNOWN}(P.status);u(new re(b,P.message))}else u(new re(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new re(q.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{ie(Kt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);ie(Kt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}P_(e,n,r){const s=nf(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iw(),c=sw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");ie(Kt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.T_(m);let g=!1,w=!1;const P=new Wx({Ho:U=>{w?ie(Kt,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(g||(ie(Kt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),ie(Kt,`RPC '${e}' stream ${s} sending:`,U),m.send(U))},Yo:()=>m.close()}),b=(U,A,I)=>{U.listen(A,S=>{try{I(S)}catch(D){setTimeout(()=>{throw D},0)}})};return b(m,Xo.EventType.OPEN,()=>{w||(ie(Kt,`RPC '${e}' stream ${s} transport opened.`),P.s_())}),b(m,Xo.EventType.CLOSE,()=>{w||(w=!0,ie(Kt,`RPC '${e}' stream ${s} transport closed`),P.__(),this.I_(m))}),b(m,Xo.EventType.ERROR,U=>{w||(w=!0,As(Kt,`RPC '${e}' stream ${s} transport errored. Name:`,U.name,"Message:",U.message),P.__(new re(q.UNAVAILABLE,"The operation could not be completed")))}),b(m,Xo.EventType.MESSAGE,U=>{var A;if(!w){const I=U.data[0];Le(!!I,16349);const S=I,D=(S==null?void 0:S.error)||((A=S[0])===null||A===void 0?void 0:A.error);if(D){ie(Kt,`RPC '${e}' stream ${s} received error:`,D);const k=D.status;let V=function(T){const C=vt[T];if(C!==void 0)return Uw(C)}(k),v=D.message;V===void 0&&(V=q.INTERNAL,v="Unknown error status: "+k+" with message "+D.message),w=!0,P.__(new re(V,v)),m.close()}else ie(Kt,`RPC '${e}' stream ${s} received:`,I),P.a_(I)}}),b(c,rw.STAT_EVENT,U=>{U.stat===$h.PROXY?ie(Kt,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===$h.NOPROXY&&ie(Kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.o_()},0),P}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){return new XC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="PersistentStream";class tE{constructor(e,n,r,s,i,o,c,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new eE(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Br(n.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new re(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ie(Bv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ie(Bv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kx extends tE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=ex(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?hr(o.readTime):Ee.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=ef(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Kh(u)?{documents:rx(i,u)}:{query:sx(i,u).Vt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=$w(i,o.resumeToken);const d=Xh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ee.min())>0){c.readTime=Kc(i,o.snapshotVersion.toTimestamp());const d=Xh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=ox(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=ef(this.serializer),n.removeTarget=e,this.k_(n)}}class Qx extends tE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=nx(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=ef(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>tx(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{}class Xx extends Yx{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new re(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Jh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(q.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Jo(e,Jh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(q.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Jx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Br(n),this._a=!1):ie("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="RemoteStore";class Zx{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{_i(this)&&(ie(di,"Restarting streams for network reachability change."),await async function(u){const d=Ie(u);d.Ia.add(4),await nl(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Lu(d)}(this))})}),this.Aa=new Jx(r,s)}}async function Lu(t){if(_i(t))for(const e of t.da)await e(!0)}async function nl(t){for(const e of t.da)await e(!1)}function nE(t,e){const n=Ie(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),jp(n)?Np(n):To(n).x_()&&Rp(n,e))}function kp(t,e){const n=Ie(t),r=To(n);n.Ta.delete(e),r.x_()&&rE(n,e),n.Ta.size===0&&(r.x_()?r.B_():_i(n)&&n.Aa.set("Unknown"))}function Rp(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}To(t).H_(e)}function rE(t,e){t.Ra.$e(e),To(t).Y_(e)}function Np(t){t.Ra=new GC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),To(t).start(),t.Aa.aa()}function jp(t){return _i(t)&&!To(t).M_()&&t.Ta.size>0}function _i(t){return Ie(t).Ia.size===0}function sE(t){t.Ra=void 0}async function eP(t){t.Aa.set("Online")}async function tP(t){t.Ta.forEach((e,n)=>{Rp(t,e)})}async function nP(t,e){sE(t),jp(t)?(t.Aa.la(e),Np(t)):t.Aa.set("Unknown")}async function rP(t,e,n){if(t.Aa.set("Online"),e instanceof Bw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ta.delete(c),s.Ra.removeTarget(c))}(t,e)}catch(r){ie(di,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yc(t,r)}else if(e instanceof uc?t.Ra.Ye(e):e instanceof zw?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ee.min()))try{const r=await Zw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Ra.Pt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ta.get(d);f&&i.Ta.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=i.Ta.get(u);if(!f)return;i.Ta.set(u,f.withResumeToken(Ut.EMPTY_BYTE_STRING,f.snapshotVersion)),rE(i,u);const m=new cs(f.target,u,d,f.sequenceNumber);Rp(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ie(di,"Failed to raise snapshot:",r),await Yc(t,r)}}async function Yc(t,e,n){if(!Eo(e))throw e;t.Ia.add(1),await nl(t),t.Aa.set("Offline"),n||(n=()=>Zw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(di,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Lu(t)})}function iE(t,e){return e().catch(n=>Yc(t,n,e))}async function Fu(t){const e=Ie(t),n=Rs(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:mp;for(;sP(e);)try{const s=await Fx(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,iP(e,s)}catch(s){await Yc(e,s)}oE(e)&&aE(e)}function sP(t){return _i(t)&&t.Pa.length<10}function iP(t,e){t.Pa.push(e);const n=Rs(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function oE(t){return _i(t)&&!Rs(t).M_()&&t.Pa.length>0}function aE(t){Rs(t).start()}async function oP(t){Rs(t).na()}async function aP(t){const e=Rs(t);for(const n of t.Pa)e.X_(n.mutations)}async function lP(t,e,n){const r=t.Pa.shift(),s=Tp.from(r,e,n);await iE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fu(t)}async function cP(t,e){e&&Rs(t).Z_&&await async function(r,s){if(function(o){return qC(o)&&o!==q.ABORTED}(s.code)){const i=r.Pa.shift();Rs(r).N_(),await iE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Fu(r)}}(t,e),oE(t)&&aE(t)}async function $v(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),ie(di,"RemoteStore received new credentials");const r=_i(n);n.Ia.add(3),await nl(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Lu(n)}async function uP(t,e){const n=Ie(t);e?(n.Ia.delete(2),await Lu(n)):e||(n.Ia.add(2),await nl(n),n.Aa.set("Unknown"))}function To(t){return t.Va||(t.Va=function(n,r,s){const i=Ie(n);return i.ia(),new Kx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:eP.bind(null,t),e_:tP.bind(null,t),n_:nP.bind(null,t),J_:rP.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),jp(t)?Np(t):t.Aa.set("Unknown")):(await t.Va.stop(),sE(t))})),t.Va}function Rs(t){return t.ma||(t.ma=function(n,r,s){const i=Ie(n);return i.ia(),new Qx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:oP.bind(null,t),n_:cP.bind(null,t),ea:aP.bind(null,t),ta:lP.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Fu(t)):(await t.ma.stop(),t.Pa.length>0&&(ie(di,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Dp(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bp(t,e){if(Br("AsyncQueue",`${e}: ${t}`),Eo(t))return new re(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{static emptySet(e){return new Xi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Jo(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.fa=new lt(he.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):_e(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class fo{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new fo(e,n,Xi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class hP{constructor(){this.queries=qv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=Ie(n),i=s.queries;s.queries=qv(),i.forEach((o,c)=>{for(const u of c.wa)u.onError(r)})})(this,new re(q.ABORTED,"Firestore shutting down"))}}function qv(){return new yi(t=>Pw(t),ju)}async function Op(t,e){const n=Ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new dP,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=bp(o,`Initialization of query '${Pi(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&Vp(n)}async function Mp(t,e){const n=Ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fP(t,e){const n=Ie(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.wa)c.Ca(s)&&(r=!0);o.ya=s}}r&&Vp(n)}function pP(t,e,n){const r=Ie(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function Vp(t){t.Da.forEach(e=>{e.next()})}var rf,Wv;(Wv=rf||(rf={})).Fa="default",Wv.Cache="cache";class Lp{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==rf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.key=e}}class cE{constructor(e){this.key=e}}class mP{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=je(),this.mutatedKeys=je(),this.Xa=kw(e),this.eu=new Xi(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Hv,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),w=Du(this.query,m)?m:null,P=!!g&&this.mutatedKeys.has(g.key),b=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let U=!1;g&&w?g.data.isEqual(w.data)?P!==b&&(r.track({type:3,doc:w}),U=!0):this.iu(g,w)||(r.track({type:2,doc:w}),U=!0,(u&&this.Xa(w,u)>0||d&&this.Xa(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),U=!0):g&&!w&&(r.track({type:1,doc:g}),U=!0,(u||d)&&(c=!0)),U&&(w?(o=o.add(w),i=b?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{eu:o,ru:r,Ds:c,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((f,m)=>function(w,P){const b=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:U})}};return b(w)-b(P)}(f.type,m.type)||this.Xa(f.doc,m.doc)),this.su(r),s=s!=null&&s;const c=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,d=u!==this.Ya;return this.Ya=u,o.length!==0||d?{snapshot:new fo(this.query,e.eu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Hv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=je(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new cE(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new lE(r))}),n}uu(e){this.Ha=e.qs,this.Za=je();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return fo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Fp="SyncEngine";class gP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vP{constructor(e){this.key=e,this.lu=!1}}class yP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new yi(c=>Pw(c),ju),this.Tu=new Map,this.Iu=new Set,this.du=new lt(he.comparator),this.Eu=new Map,this.Au=new Ap,this.Ru={},this.Vu=new Map,this.mu=ho.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function _P(t,e,n=!0){const r=mE(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await uE(r,e,n,!0),s}async function wP(t,e){const n=mE(t);await uE(n,e,!0,!1)}async function uE(t,e,n,r){const s=await Ux(t.localStore,dr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await EP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&nE(t.remoteStore,s),c}async function EP(t,e,n,r,s){t.gu=(m,g,w)=>async function(b,U,A,I){let S=U.view.nu(A);S.Ds&&(S=await Lv(b.localStore,U.query,!1).then(({documents:v})=>U.view.nu(v,S)));const D=I&&I.targetChanges.get(U.targetId),k=I&&I.targetMismatches.get(U.targetId)!=null,V=U.view.applyChanges(S,b.isPrimaryClient,D,k);return Kv(b,U.targetId,V._u),V.snapshot}(t,m,g,w);const i=await Lv(t.localStore,e,!0),o=new mP(e,i.qs),c=o.nu(i.documents),u=tl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Kv(t,n,d._u);const f=new gP(e,n,o);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function TP(t,e,n){const r=Ie(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!ju(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await tf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&kp(r.remoteStore,s.targetId),sf(r,s.targetId)}).catch(wo)):(sf(r,s.targetId),await tf(r.localStore,s.targetId,!0))}async function IP(t,e){const n=Ie(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kp(n.remoteStore,r.targetId))}async function SP(t,e,n){const r=NP(t);try{const s=await function(o,c){const u=Ie(o),d=Xe.now(),f=c.reduce((w,P)=>w.add(P.key),je());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let P=$r(),b=je();return u.Os.getEntries(w,f).next(U=>{P=U,P.forEach((A,I)=>{I.isValidDocument()||(b=b.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,P)).next(U=>{m=U;const A=[];for(const I of c){const S=UC(I,m.get(I.key).overlayedDocument);S!=null&&A.push(new Ms(I.key,S,ww(S.value.mapValue),bn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,A,c)}).next(U=>{g=U;const A=U.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(w,U.batchId,A)})}).then(()=>({batchId:g.batchId,changes:Nw(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ru[o.currentUser.toKey()];d||(d=new lt(xe)),d=d.insert(c,u),o.Ru[o.currentUser.toKey()]=d}(r,s.batchId,n),await rl(r,s.changes),await Fu(r.remoteStore)}catch(s){const i=bp(s,"Failed to persist write");n.reject(i)}}async function dE(t,e){const n=Ie(t);try{const r=await Vx(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?Le(o.lu,14607):s.removedDocuments.size>0&&(Le(o.lu,42227),o.lu=!1))}),await rl(n,r,e)}catch(r){await wo(r)}}function Gv(t,e,n){const r=Ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=Ie(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.wa)g.va(c)&&(d=!0)}),d&&Vp(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AP(t,e,n){const r=Ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new lt(he.comparator);o=o.insert(i,Xt.newNoDocument(i,Ee.min()));const c=je().add(i),u=new Mu(Ee.min(),new Map,new lt(xe),o,c);await dE(r,u),r.du=r.du.remove(i),r.Eu.delete(e),Up(r)}else await tf(r.localStore,e,!1).then(()=>sf(r,e,n)).catch(wo)}async function CP(t,e){const n=Ie(t),r=e.batch.batchId;try{const s=await Mx(n.localStore,e);fE(n,r,null),hE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rl(n,s)}catch(s){await wo(s)}}async function xP(t,e,n){const r=Ie(t);try{const s=await function(o,c){const u=Ie(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Le(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);fE(r,e,n),hE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rl(r,s)}catch(s){await wo(s)}}function hE(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function fE(t,e,n){const r=Ie(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function sf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||pE(t,r)})}function pE(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(kp(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Up(t))}function Kv(t,e,n){for(const r of n)r instanceof lE?(t.Au.addReference(r.key,e),PP(t,r)):r instanceof cE?(ie(Fp,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||pE(t,r.key)):_e(19791,{yu:r})}function PP(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ie(Fp,"New document in limbo: "+n),t.Iu.add(r),Up(t))}function Up(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new he(qe.fromString(e)),r=t.mu.next();t.Eu.set(r,new vP(n)),t.du=t.du.insert(n,r),nE(t.remoteStore,new cs(dr(Nu(n.path)),r,"TargetPurposeLimboResolution",Pu.ue))}}async function rl(t,e,n){const r=Ie(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{o.push(r.gu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=xp.Es(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.hu.J_(s),await async function(u,d){const f=Ie(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>G.forEach(d,g=>G.forEach(g.Is,w=>f.persistence.referenceDelegate.addReference(m,g.targetId,w)).next(()=>G.forEach(g.ds,w=>f.persistence.referenceDelegate.removeReference(m,g.targetId,w)))))}catch(m){if(!Eo(m))throw m;ie(Pp,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const w=f.Fs.get(g),P=w.snapshotVersion,b=w.withLastLimboFreeSnapshotVersion(P);f.Fs=f.Fs.insert(g,b)}}}(r.localStore,i))}async function kP(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){ie(Fp,"User change. New user:",e.toKey());const r=await Jw(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(c=>{c.forEach(u=>{u.reject(new re(q.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rl(n,r.Bs)}}function RP(t,e){const n=Ie(t),r=n.Eu.get(e);if(r&&r.lu)return je().add(r.key);{let s=je();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const c=n.Pu.get(o);s=s.unionWith(c.view.tu)}return s}}function mE(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AP.bind(null,e),e.hu.J_=fP.bind(null,e.eventManager),e.hu.pu=pP.bind(null,e.eventManager),e}function NP(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xP.bind(null,e),e}class Xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Ox(this.persistence,new jx,e.initialUser,this.serializer)}Du(e){return new Xw(Cp.Vi,this.serializer)}bu(e){return new Bx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xc.provider={build:()=>new Xc};class jP extends Xc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Le(this.persistence.referenceDelegate instanceof Qc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vx(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Xw(r=>Qc.Vi(r,n),this.serializer)}}class of{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kP.bind(null,this.syncEngine),await uP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hP}()}createDatastore(e){const n=Vu(e.databaseInfo.databaseId),r=function(i){return new Gx(i)}(e.databaseInfo);return function(i,o,c,u){return new Xx(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new Zx(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Gv(this.syncEngine,n,0),function(){return zv.C()?new zv:new $x}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,f){const m=new yP(s,i,o,c,u,d);return f&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ie(s);ie(di,"RemoteStore shutting down."),i.Ia.add(5),await nl(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}of.provider={build:()=>new of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="FirestoreClient";class DP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Qt.UNAUTHENTICATED,this.clientId=pp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ie(Ns,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ie(Ns,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fd(t,e){t.asyncQueue.verifyOperationInProgress(),ie(Ns,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Jw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{As("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{As("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Qv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bP(t);ie(Ns,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$v(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>$v(e.remoteStore,s)),t._onlineComponents=e}async function bP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(Ns,"Using user provided OfflineComponentProvider");try{await Fd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;As("Error using user provided cache. Falling back to memory cache: "+n),await Fd(t,new Xc)}}else ie(Ns,"Using default OfflineComponentProvider"),await Fd(t,new jP(void 0));return t._offlineComponents}async function gE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(Ns,"Using user provided OnlineComponentProvider"),await Qv(t,t._uninitializedComponentsProvider._online)):(ie(Ns,"Using default OnlineComponentProvider"),await Qv(t,new of))),t._onlineComponents}function OP(t){return gE(t).then(e=>e.syncEngine)}async function Jc(t){const e=await gE(t),n=e.eventManager;return n.onListen=_P.bind(null,e.syncEngine),n.onUnlisten=TP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IP.bind(null,e.syncEngine),n}function MP(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new zp({next:g=>{f.Ou(),o.enqueueAndForget(()=>Mp(i,m));const w=g.docs.has(c);!w&&g.fromCache?d.reject(new re(q.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new re(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Lp(Nu(c.path),f,{includeMetadataChanges:!0,ka:!0});return Op(i,m)}(await Jc(t),t.asyncQueue,e,n,r)),r.promise}function VP(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new zp({next:g=>{f.Ou(),o.enqueueAndForget(()=>Mp(i,m)),g.fromCache&&u.source==="server"?d.reject(new re(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Lp(c,f,{includeMetadataChanges:!0,ka:!0});return Op(i,m)}(await Jc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="firestore.googleapis.com",Xv=!0;class Jv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yE,this.ssl=Xv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Xv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Yw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mx)throw new re(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HA;switch(r.type){case"firstParty":return new KA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Yv.get(n);r&&(ie("ComponentProvider","Removing Datastore"),Yv.delete(n),r.terminate())}(this),Promise.resolve()}}function LP(t,e,n,r={}){var s;t=gn(t,Uu);const i=vi(e),o=t._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(lp(`https://${u}`),cp("Firestore",!0)),o.host!==yE&&o.host!==u&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!li(d,c)&&(t._setSettings(d),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=Qt.MOCK_USER;else{f=m1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new re(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Qt(g)}t._authCredentials=new qA(new aw(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ja(n,ht._jsonSchema))return new ht(e,r||null,new he(qe.fromString(n.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:wt("string",ht._jsonSchemaVersion),referencePath:wt("string")};class Es extends wi{constructor(e,n,r){super(e,n,Nu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new he(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function an(t,e,...n){if(t=at(t),cw("collection","path",e),t instanceof Uu){const r=qe.fromString(e,...n);return dv(r),new Es(t,null,r)}{if(!(t instanceof ht||t instanceof Es))throw new re(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return dv(r),new Es(t.firestore,null,r)}}function ft(t,e,...n){if(t=at(t),arguments.length===1&&(e=pp.newId()),cw("doc","path",e),t instanceof Uu){const r=qe.fromString(e,...n);return uv(r),new ht(t,null,new he(r))}{if(!(t instanceof ht||t instanceof Es))throw new re(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return uv(r),new ht(t.firestore,t instanceof Es?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="AsyncQueue";class ey{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new eE(this,"async_queue_retry"),this.oc=()=>{const r=Ld();r&&ie(Zv,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Ld();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Ld();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Or;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Eo(e))throw e;ie(Zv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Br("INTERNAL UNHANDLED ERROR: ",ty(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Dp.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&_e(47125,{hc:ty(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function ty(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Hr extends Uu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ey,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ey(e),this._firestoreClient=void 0,await e}}}function FP(t,e){const n=typeof t=="object"?t:hp(),r=typeof t=="string"?t:$c,s=Cu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=G0("firestore");i&&LP(s,...i)}return s}function zu(t){if(t._terminated)throw new re(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UP(t),t._firestoreClient}function UP(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new uC(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,vE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new DP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nn(Ut.fromBase64String(e))}catch(n){throw new re(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nn(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ja(e,Nn._jsonSchema))return Nn.fromBase64String(e.bytes)}}Nn._jsonSchemaVersion="firestore/bytes/1.0",Nn._jsonSchema={type:wt("string",Nn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fr._jsonSchemaVersion}}static fromJSON(e){if(Ja(e,fr._jsonSchema))return new fr(e.latitude,e.longitude)}}fr._jsonSchemaVersion="firestore/geoPoint/1.0",fr._jsonSchema={type:wt("string",fr._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ja(e,pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new pr(e.vectorValues);throw new re(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pr._jsonSchemaVersion="firestore/vectorValue/1.0",pr._jsonSchema={type:wt("string",pr._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=/^__.*__$/;class BP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new el(e,this.data,n,this.fieldTransforms)}}class _E{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:t})}}class Bp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Zc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(wE(this.Ec)&&zP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class $P{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vu(e)}Dc(e,n,r,s=!1){return new Bp({Ec:e,methodName:n,bc:r,path:Vt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hu(t){const e=t._freezeSettings(),n=Vu(t._databaseId);return new $P(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EE(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);Hp("Data must be an object, but it was:",o,r);const c=TE(r,o);let u,d;if(i.merge)u=new Tn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=af(e,m,n);if(!o.contains(g))throw new re(q.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);SE(f,g)||f.push(g)}u=new Tn(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new BP(new un(c),u,d)}class qu extends $u{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qu}}class $p extends $u{_toFieldTransform(e){return new MC(e.path,new Fa)}isEqual(e){return e instanceof $p}}function HP(t,e,n,r){const s=t.Dc(1,e,n);Hp("Data must be an object, but it was:",s,r);const i=[],o=un.empty();Os(r,(u,d)=>{const f=qp(e,u,n);d=at(d);const m=s.gc(f);if(d instanceof qu)i.push(f);else{const g=sl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const c=new Tn(i);return new _E(o,c,s.fieldTransforms)}function qP(t,e,n,r,s,i){const o=t.Dc(1,e,n),c=[af(e,r,n)],u=[s];if(i.length%2!=0)throw new re(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(af(e,i[g])),u.push(i[g+1]);const d=[],f=un.empty();for(let g=c.length-1;g>=0;--g)if(!SE(d,c[g])){const w=c[g];let P=u[g];P=at(P);const b=o.gc(w);if(P instanceof qu)d.push(w);else{const U=sl(P,b);U!=null&&(d.push(w),f.set(w,U))}}const m=new Tn(d);return new _E(f,m,o.fieldTransforms)}function WP(t,e,n,r=!1){return sl(n,t.Dc(r?4:3,e))}function sl(t,e){if(IE(t=at(t)))return Hp("Unsupported field value:",e,t),TE(t,e);if(t instanceof $u)return function(r,s){if(!wE(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=sl(c,s.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:Kc(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kc(s.serializer,i)}}if(r instanceof fr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nn)return{bytesValue:$w(s.serializer,r._byteString)};if(r instanceof ht){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof pr)return function(o,c){return{mapValue:{fields:{[yw]:{stringValue:_w},[Hc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.wc("VectorValues must only contain numeric values.");return wp(c.serializer,d)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${xu(r)}`)}(t,e)}function TE(t,e){const n={};return hw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(t,(r,s)=>{const i=sl(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function IE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof fr||t instanceof Nn||t instanceof ht||t instanceof $u||t instanceof pr)}function Hp(t,e,n){if(!IE(n)||!uw(n)){const r=xu(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function af(t,e,n){if((e=at(e))instanceof Bu)return e._internalPath;if(typeof e=="string")return qp(t,e);throw Zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const GP=new RegExp("[~\\*/\\[\\]]");function qp(t,e,n){if(e.search(GP)>=0)throw Zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bu(...e.split("."))._internalPath}catch{throw Zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new re(q.INVALID_ARGUMENT,c+t+u)}function SE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KP extends AE{data(){return super.data()}}function Wp(t,e){return typeof e=="string"?qp(t,e):e instanceof Bu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gp{}class QP extends Gp{}function Ud(t,e,...n){let r=[];e instanceof Gp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Kp).length,c=i.filter(u=>u instanceof Wu).length;if(o>1||o>0&&c>0)throw new re(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wu extends QP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wu(e,n,r)}_apply(e){const n=this._parse(e);return xE(e._query,n),new wi(e.firestore,e.converter,Qh(e._query,n))}_parse(e){const n=Hu(e.firestore);return function(i,o,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new re(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){sy(m,f);const P=[];for(const b of m)P.push(ry(u,i,b));g={arrayValue:{values:P}}}else g=ry(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||sy(m,f),g=WP(c,o,m,f==="in"||f==="not-in");return _t.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zd(t,e,n){const r=e,s=Wp("where",t);return Wu._create(s,r,n)}class Kp extends Gp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)xE(o,u),o=Qh(o,u)}(e._query,n),new wi(e.firestore,e.converter,Qh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ry(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new re(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xw(e)&&n.indexOf("/")!==-1)throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qe.fromString(n));if(!he.isDocumentKey(r))throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _v(t,new he(r))}if(n instanceof ht)return _v(t,n._key);throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xu(n)}.`)}function sy(t,e){if(!Array.isArray(t)||t.length===0)throw new re(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xE(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YP{convertValue(e,n="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Os(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Hc].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>pt(o.doubleValue));return new pr(i)}convertGeoPoint(e){return new fr(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ru(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ma(e));default:return null}}convertTimestamp(e){const n=xs(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);Le(Qw(r),9688,{name:e});const s=new Va(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(n)||Br(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ti extends AE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Wp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ti._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ti._jsonSchemaVersion="firestore/documentSnapshot/1.0",ti._jsonSchema={type:wt("string",ti._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class dc extends ti{data(e={}){return super.data(e)}}class ni{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ea(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new dc(this._firestore,this._userDataWriter,r.key,r,new ea(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new dc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ea(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new dc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ea(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:XP(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ni._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(t){t=gn(t,ht);const e=gn(t.firestore,Hr);return MP(zu(e),t._key).then(n=>kE(e,t,n))}ni._jsonSchemaVersion="firestore/querySnapshot/1.0",ni._jsonSchema={type:wt("string",ni._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class Qp extends YP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function Bd(t){t=gn(t,wi);const e=gn(t.firestore,Hr),n=zu(e),r=new Qp(e);return CE(t._query),VP(n,t._query).then(s=>new ni(e,r,t,s))}function ns(t,e,n){t=gn(t,ht);const r=gn(t.firestore,Hr),s=PE(t.converter,e,n);return Gu(r,[EE(Hu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,bn.none())])}function Js(t,e,n,...r){t=gn(t,ht);const s=gn(t.firestore,Hr),i=Hu(s);let o;return o=typeof(e=at(e))=="string"||e instanceof Bu?qP(i,"updateDoc",t._key,e,n,r):HP(i,"updateDoc",t._key,e),Gu(s,[o.toMutation(t._key,bn.exists(!0))])}function eu(t){return Gu(gn(t.firestore,Hr),[new Ep(t._key,bn.none())])}function Wl(t,e){const n=gn(t.firestore,Hr),r=ft(t),s=PE(t.converter,e);return Gu(n,[EE(Hu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,bn.exists(!1))]).then(()=>r)}function Gs(t,...e){var n,r,s;t=at(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ny(e[o])||(i=e[o++]);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(ny(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,f;if(t instanceof ht)d=gn(t.firestore,Hr),f=Nu(t._key.path),u={next:m=>{e[o]&&e[o](kE(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=gn(t,wi);d=gn(m.firestore,Hr),f=m._query;const g=new Qp(d);u={next:w=>{e[o]&&e[o](new ni(d,g,m,w))},error:e[o+1],complete:e[o+2]},CE(t._query)}return function(g,w,P,b){const U=new zp(b),A=new Lp(w,U,P);return g.asyncQueue.enqueueAndForget(async()=>Op(await Jc(g),A)),()=>{U.Ou(),g.asyncQueue.enqueueAndForget(async()=>Mp(await Jc(g),A))}}(zu(d),f,c,u)}function Gu(t,e){return function(r,s){const i=new Or;return r.asyncQueue.enqueueAndForget(async()=>SP(await OP(r),s,i)),i.promise}(zu(t),e)}function kE(t,e,n){const r=n.docs.get(e._key),s=new Qp(t);return new ti(t,s,e._key,r,new ea(n.hasPendingWrites,n.fromCache),e.converter)}function iy(){return new $p("serverTimestamp")}(function(e,n=!0){(function(s){_o=s})(yo),ci(new Ss("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Hr(new WA(r.getProvider("auth-internal")),new QA(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new re(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),ur(iv,ov,e),ur(iv,ov,"esm2017")})();function Yp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function RE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZP=RE,NE=new Ya("auth","Firebase",RE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new up("@firebase/auth");function ek(t,...e){tu.logLevel<=Ne.WARN&&tu.warn(`Auth (${yo}): ${t}`,...e)}function hc(t,...e){tu.logLevel<=Ne.ERROR&&tu.error(`Auth (${yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,...e){throw Xp(t,...e)}function mr(t,...e){return Xp(t,...e)}function jE(t,e,n){const r=Object.assign(Object.assign({},ZP()),{[e]:n});return new Ya("auth","Firebase",r).create(e,{appName:t.name})}function Mr(t){return jE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return NE.create(t,...e)}function ye(t,e,...n){if(!t)throw Xp(e,...n)}function Nr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hc(e),new Error(e)}function qr(t,e){t||Nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tk(){return oy()==="http:"||oy()==="https:"}function oy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tk()||E1()||"connection"in navigator)?navigator.onLine:!0}function rk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.shortDelay=e,this.longDelay=n,qr(n>e,"Short delay should be less than long delay!"),this.isMobile=y1()||T1()}get(){return nk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e){qr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ok=new il(3e4,6e4);function Vs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ls(t,e,n,r,s={}){return bE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Xa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return w1()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&vi(t.emulatorConfig.host)&&(d.credentials="include"),DE.fetch()(await OE(t,t.config.apiHost,n,c),d)})}async function bE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sk),e);try{const s=new lk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Gl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Gl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Gl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw jE(t,f,d);Xn(t,f)}}catch(s){if(s instanceof yr)throw s;Xn(t,"network-request-failed",{message:String(s)})}}async function ol(t,e,n,r,s={}){const i=await Ls(t,e,n,r,s);return"mfaPendingCredential"in i&&Xn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function OE(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Jp(t.config,s):`${t.config.apiScheme}://${s}`;return ik.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function ak(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mr(this.auth,"network-request-failed")),ok.get())})}}function Gl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=mr(t,e,r);return s.customData._tokenResponse=n,s}function ay(t){return t!==void 0&&t.enterprise!==void 0}class ck{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ak(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uk(t,e){return Ls(t,"GET","/v2/recaptchaConfig",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e){return Ls(t,"POST","/v1/accounts:delete",e)}async function nu(t,e){return Ls(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hk(t,e=!1){const n=at(t),r=await n.getIdToken(e),s=Zp(r);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ga($d(s.auth_time)),issuedAtTime:ga($d(s.iat)),expirationTime:ga($d(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $d(t){return Number(t)*1e3}function Zp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hc("JWT malformed, contained fewer than 3 sections"),null;try{const s=q0(n);return s?JSON.parse(s):(hc("Failed to decode base64 JWT payload"),null)}catch(s){return hc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ly(t){const e=Zp(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yr&&fk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ga(this.lastLoginAt),this.creationTime=ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ba(t,nu(n,{idToken:r}));ye(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ME(i.providerUserInfo):[],c=gk(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new cf(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function mk(t){const e=at(t);await ru(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ME(t){return t.map(e=>{var{providerId:n}=e,r=Yp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e){const n=await bE(t,{},async()=>{const r=Xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await OE(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&vi(t.emulatorConfig.host)&&(u.credentials="include"),DE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yk(t,e){return Ls(t,"POST","/v2/accounts:revokeToken",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ly(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=ly(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await vk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ji;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ji,this.toJSON())}_performRefresh(){return Nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new cf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ba(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hk(this,e)}reload(){return mk(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ru(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(Mr(this.auth));const e=await this.getIdToken();return await Ba(this,dk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(c=n.tenantId)!==null&&c!==void 0?c:void 0,U=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,A=(d=n.createdAt)!==null&&d!==void 0?d:void 0,I=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:S,emailVerified:D,isAnonymous:k,providerData:V,stsTokenManager:v}=n;ye(S&&v,e,"internal-error");const y=Ji.fromJSON(this.name,v);ye(typeof S=="string",e,"internal-error"),Xr(m,e.name),Xr(g,e.name),ye(typeof D=="boolean",e,"internal-error"),ye(typeof k=="boolean",e,"internal-error"),Xr(w,e.name),Xr(P,e.name),Xr(b,e.name),Xr(U,e.name),Xr(A,e.name),Xr(I,e.name);const T=new Wn({uid:S,auth:e,email:g,emailVerified:D,displayName:m,isAnonymous:k,photoURL:P,phoneNumber:w,tenantId:b,stsTokenManager:y,createdAt:A,lastLoginAt:I});return V&&Array.isArray(V)&&(T.providerData=V.map(C=>Object.assign({},C))),U&&(T._redirectEventId=U),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ji;s.updateFromServerResponse(n);const i=new Wn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ru(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ME(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Ji;c.updateFromIdToken(r);const u=new Wn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new cf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new Map;function jr(t){qr(t instanceof Function,"Expected a class definition");let e=cy.get(t);return e?(qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}VE.type="NONE";const uy=VE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e,n){return`firebase:${t}:${e}:${n}`}class Zi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=fc(this.userKey,s.apiKey,i),this.fullPersistenceKey=fc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nu(this.auth,{idToken:e}).catch(()=>{});return n?Wn._fromGetAccountInfoResponse(this.auth,n,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zi(jr(uy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||jr(uy);const o=fc(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await nu(e,{idToken:f}).catch(()=>{});if(!g)break;m=await Wn._fromGetAccountInfoResponse(e,g,f)}else m=Wn._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Zi(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Zi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($E(e))return"Blackberry";if(HE(e))return"Webos";if(FE(e))return"Safari";if((e.includes("chrome/")||UE(e))&&!e.includes("edge/"))return"Chrome";if(BE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LE(t=Zt()){return/firefox\//i.test(t)}function FE(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UE(t=Zt()){return/crios\//i.test(t)}function zE(t=Zt()){return/iemobile/i.test(t)}function BE(t=Zt()){return/android/i.test(t)}function $E(t=Zt()){return/blackberry/i.test(t)}function HE(t=Zt()){return/webos/i.test(t)}function em(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _k(t=Zt()){var e;return em(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wk(){return I1()&&document.documentMode===10}function qE(t=Zt()){return em(t)||BE(t)||HE(t)||$E(t)||/windows phone/i.test(t)||zE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,e=[]){let n;switch(t){case"Browser":n=dy(Zt());break;case"Worker":n=`${dy(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(t,e={}){return Ls(t,"GET","/v2/passwordPolicy",Vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=6;class Sk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Ik,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hy(this),this.idTokenSubscription=new hy(this),this.beforeStateQueue=new Ek(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Zi.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nu(this,{idToken:e}),r=await Wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ru(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(Mr(this));const n=e?at(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(Mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Tk(this),n=new Sk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ya("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jr(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Zi.create(this,[jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ek(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ei(t){return at(t)}class hy{constructor(e){this.auth=e,this.observer=null,this.addObserver=N1(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ck(t){Ku=t}function GE(t){return Ku.loadJS(t)}function xk(){return Ku.recaptchaEnterpriseScript}function Pk(){return Ku.gapiScript}function kk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Rk{constructor(){this.enterprise=new Nk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Nk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const jk="recaptcha-enterprise",KE="NO_RECAPTCHA";class Dk{constructor(e){this.type=jk,this.auth=Ei(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{uk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new ck(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;ay(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(KE)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Rk().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&ay(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=xk();u.length!==0&&(u+=c),GE(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function fy(t,e,n,r=!1,s=!1){const i=new Dk(t);let o;if(s)o=KE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function uf(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await fy(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await fy(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t,e){const n=Cu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(li(i,e??{}))return s;Xn(s,"already-initialized")}return n.initialize({options:e})}function Ok(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Mk(t,e,n){const r=Ei(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=QE(e),{host:o,port:c}=Vk(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(li(d,r.config.emulator)&&li(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,vi(o)?(lp(`${i}//${o}${u}`),cp("Auth",!0)):Lk()}function QE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Vk(t){const e=QE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:py(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:py(o)}}}function py(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Lk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,n){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}}async function Fk(t,e){return Ls(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e){return ol(t,"POST","/v1/accounts:signInWithPassword",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t,e){return ol(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}async function Bk(t,e){return ol(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends tm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new $a(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $a(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uf(e,n,"signInWithPassword",Uk);case"emailLink":return zk(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uf(e,r,"signUpPassword",Fk);case"emailLink":return Bk(e,{idToken:n,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t,e){return ol(t,"POST","/v1/accounts:signInWithIdp",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="http://localhost";class hi extends tm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Yp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new hi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return eo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,eo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,eo(e,n)}buildRequest(){const e={requestUri:$k,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qk(t){const e=Qo(Yo(t)).link,n=e?Qo(Yo(e)).deep_link_id:null,r=Qo(Yo(t)).deep_link_id;return(r?Qo(Yo(r)).link:null)||r||n||e||t}class nm{constructor(e){var n,r,s,i,o,c;const u=Qo(Yo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=Hk((s=u.mode)!==null&&s!==void 0?s:null);ye(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=qk(e);try{return new nm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,n){return $a._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=nm.parseLink(n);return ye(r,"argument-error"),$a._fromEmailAndCode(e,r.code,r.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends YE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends al{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hi._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.GOOGLE_SIGN_IN_METHOD="google.com";ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends al{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends al{constructor(){super("twitter.com")}static credential(e,n){return hi._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return os.credential(n,r)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(t,e){return ol(t,"POST","/v1/accounts:signUp",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Wn._fromIdTokenResponse(e,r,s),o=my(r);return new fi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=my(r);return new fi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function my(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends yr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,su.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new su(e,n,r,s)}}function XE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?su._fromErrorAndOperation(t,i,e,r):i})}async function Gk(t,e,n=!1){const r=await Ba(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(t,e,n=!1){const{auth:r}=t;if(wn(r.app))return Promise.reject(Mr(r));const s="reauthenticate";try{const i=await Ba(t,XE(r,s,e,t),n);ye(i.idToken,r,"internal-error");const o=Zp(i.idToken);ye(o,r,"internal-error");const{sub:c}=o;return ye(t.uid===c,r,"user-mismatch"),fi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(t,e,n=!1){if(wn(t.app))return Promise.reject(Mr(t));const r="signIn",s=await XE(t,r,e),i=await fi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Qk(t,e){return JE(Ei(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZE(t){const e=Ei(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function eT(t,e,n){if(wn(t.app))return Promise.reject(Mr(t));const r=Ei(t),o=await uf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wk).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ZE(t),u}),c=await fi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function Yk(t,e,n){return wn(t.app)?Promise.reject(Mr(t)):Qk(at(t),Io.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t,e){return at(t).setPersistence(e)}function Jk(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function Zk(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function eR(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function tR(t){return at(t).signOut()}const iu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(iu,"1"),this.storage.removeItem(iu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=1e3,rR=10;class nT extends tT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);wk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,rR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nT.type="LOCAL";const sR=nT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT extends tT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rT.type="SESSION";const rm=rT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Qu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await iR(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=sm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return window}function aR(t){gr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(){return typeof gr().WorkerGlobalScope<"u"&&typeof gr().importScripts=="function"}async function lR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uR(){return sT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="firebaseLocalStorageDb",dR=1,ou="firebaseLocalStorage",oT="fbase_key";class ll{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yu(t,e){return t.transaction([ou],e?"readwrite":"readonly").objectStore(ou)}function hR(){const t=indexedDB.deleteDatabase(iT);return new ll(t).toPromise()}function df(){const t=indexedDB.open(iT,dR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ou,{keyPath:oT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ou)?e(r):(r.close(),await hR(),e(await df()))})})}async function gy(t,e,n){const r=Yu(t,!0).put({[oT]:e,value:n});return new ll(r).toPromise()}async function fR(t,e){const n=Yu(t,!1).get(e),r=await new ll(n).toPromise();return r===void 0?null:r.value}function vy(t,e){const n=Yu(t,!0).delete(e);return new ll(n).toPromise()}const pR=800,mR=3;class aT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await df(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qu._getInstance(uR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lR(),!this.activeServiceWorker)return;this.sender=new oR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await df();return await gy(e,iu,"1"),await vy(e,iu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>gy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Yu(s,!1).getAll();return new ll(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aT.type="LOCAL";const gR=aT;new il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t,e){return e?jr(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im extends tm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yR(t){return JE(t.auth,new im(t),t.bypassAuthState)}function _R(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),Kk(n,new im(t),t.bypassAuthState)}async function wR(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),Gk(n,new im(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yR;case"linkViaPopup":case"linkViaRedirect":return wR;case"reauthViaPopup":case"reauthViaRedirect":return _R;default:Xn(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new il(2e3,1e4);class Hi extends lT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Hi.currentPopupAction&&Hi.currentPopupAction.cancel(),Hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){qr(this.filter.length===1,"Popup operations only handle one event");const e=sm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ER.get())};e()}}Hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="pendingRedirect",pc=new Map;class IR extends lT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pc.get(this.auth._key());if(!e){try{const r=await SR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pc.set(this.auth._key(),e)}return this.bypassAuthState||pc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SR(t,e){const n=xR(e),r=CR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function AR(t,e){pc.set(t._key(),e)}function CR(t){return jr(t._redirectPersistence)}function xR(t){return fc(TR,t.config.apiKey,t.name)}async function PR(t,e,n=!1){if(wn(t.app))return Promise.reject(Mr(t));const r=Ei(t),s=vR(r,e),o=await new IR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=10*60*1e3;class RR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!cT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kR&&this.cachedEventUids.clear(),this.cachedEventUids.has(yy(e))}saveEventToCache(e){this.cachedEventUids.add(yy(e)),this.lastProcessedEventTime=Date.now()}}function yy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e={}){return Ls(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bR=/^https?/;async function OR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jR(t);for(const n of e)try{if(MR(n))return}catch{}Xn(t,"unauthorized-domain")}function MR(t){const e=lf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!bR.test(n))return!1;if(DR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new il(3e4,6e4);function _y(){const t=gr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LR(t){return new Promise((e,n)=>{var r,s,i;function o(){_y(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_y(),n(mr(t,"network-request-failed"))},timeout:VR.get()})}if(!((s=(r=gr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=gr().gapi)===null||i===void 0)&&i.load)o();else{const c=kk("iframefcb");return gr()[c]=()=>{gapi.load?o():n(mr(t,"network-request-failed"))},GE(`${Pk()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw mc=null,e})}let mc=null;function FR(t){return mc=mc||LR(t),mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=new il(5e3,15e3),zR="__/auth/iframe",BR="emulator/auth/iframe",$R={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qR(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Jp(e,BR):`https://${t.config.authDomain}/${zR}`,r={apiKey:e.apiKey,appName:t.name,v:yo},s=HR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Xa(r).slice(1)}`}async function WR(t){const e=await FR(t),n=gr().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:qR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$R,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=mr(t,"network-request-failed"),c=gr().setTimeout(()=>{i(o)},UR.get());function u(){gr().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KR=500,QR=600,YR="_blank",XR="http://localhost";class wy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JR(t,e,n,r=KR,s=QR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},GR),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Zt().toLowerCase();n&&(c=UE(d)?YR:n),LE(d)&&(e=e||XR,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,P])=>`${g}${w}=${P},`,"");if(_k(d)&&c!=="_self")return ZR(e||"",c),new wy(null);const m=window.open(e||"",c,f);ye(m,t,"popup-blocked");try{m.focus()}catch{}return new wy(m)}function ZR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="__/auth/handler",tN="emulator/auth/handler",nN=encodeURIComponent("fac");async function Ey(t,e,n,r,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yo,eventId:s};if(e instanceof YE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",R1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof al){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${nN}=${encodeURIComponent(u)}`:"";return`${rN(t)}?${Xa(c).slice(1)}${d}`}function rN({config:t}){return t.emulator?Jp(t,tN):`https://${t.authDomain}/${eN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="webStorageSupport";class sN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rm,this._completeRedirectFn=PR,this._overrideRedirectResult=AR}async _openPopup(e,n,r,s){var i;qr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Ey(e,n,r,lf(),s);return JR(e,o,sm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Ey(e,n,r,lf(),s);return aR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(qr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await WR(e),r=new RR(e);return n.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hd,{type:Hd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Hd];o!==void 0&&n(!!o),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qE()||FE()||em()}}const iN=sN;var Ty="@firebase/auth",Iy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lN(t){ci(new Ss("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WE(t)},d=new Ak(r,s,i,u);return Ok(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ci(new Ss("auth-internal",e=>{const n=Ei(e.getProvider("auth").getImmediate());return(r=>new oN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ur(Ty,Iy,aN(t)),ur(Ty,Iy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=5*60,uN=Q0("authIdTokenMaxAge")||cN;let Sy=null;const dN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uN)return;const s=n==null?void 0:n.token;Sy!==s&&(Sy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hN(t=hp()){const e=Cu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bk(t,{popupRedirectResolver:iN,persistence:[gR,sR,rm]}),r=Q0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=dN(i.toString());Zk(n,o,()=>o(n.currentUser)),Jk(n,c=>o(c))}}const s=W0("auth");return s&&Mk(n,`http://${s}`),n}function fN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ck({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=mr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",fN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lN("Browser");const ta={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"},pN=typeof window<"u"&&window.__FIREBASE_CONFIG__||null,uT={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"},mN=!!(ta.apiKey&&ta.authDomain&&ta.projectId&&ta.appId),Ni=pN||(mN?ta:uT),gN=!!(Ni&&Ni.apiKey&&Ni.authDomain&&Ni.projectId&&Ni.appId);let pi=null;if(gN)try{pi=Bh(Ni)}catch{try{pi=Bh(uT)}catch{}}const ue=pi?FP(pi):null,or=pi?hN(pi):null;if(or)try{Xk(or,rm).catch(()=>{})}catch{}const Ay=pi;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="type.googleapis.com/google.protobuf.Int64Value",yN="type.googleapis.com/google.protobuf.UInt64Value";function dT(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function au(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>au(e));if(typeof t=="function"||typeof t=="object")return dT(t,e=>au(e));throw new Error("Data cannot be encoded in JSON: "+t)}function po(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case vN:case yN:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>po(e)):typeof t=="function"||typeof t=="object"?dT(t,e=>po(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hn extends yr{constructor(e,n,r){super(`${om}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,hn.prototype)}}function _N(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function lu(t,e){let n=_N(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Cy[o])return new hn("internal","internal");n=Cy[o],r=o}const c=i.message;typeof c=="string"&&(r=c),s=i.details,s!==void 0&&(s=po(s))}}catch{}return n==="ok"?null:new hn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,wn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="us-central1",EN=/^data: (.*?)(?:\n|$)/;function TN(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new hn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class IN{constructor(e,n,r,s,i=hf,o=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new wN(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=hf}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function SN(t,e,n){const r=vi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(lp(t.emulatorOrigin),cp("Functions",!0))}function AN(t,e,n){const r=s=>xN(t,e,s,{});return r.stream=(s,i)=>kN(t,e,s,i),r}async function CN(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}async function hT(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function xN(t,e,n,r){const s=t._url(e);return PN(t,s,n,r)}async function PN(t,e,n,r){n=au(n);const s={data:n},i=await hT(t,r),o=r.timeout||7e4,c=TN(o),u=await Promise.race([CN(e,s,i,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!u)throw new hn("cancelled","Firebase Functions instance was deleted.");const d=lu(u.status,u.json);if(d)throw d;if(!u.json)throw new hn("internal","Response is not valid JSON object.");let f=u.json.data;if(typeof f>"u"&&(f=u.json.result),typeof f>"u")throw new hn("internal","Response is missing data field.");return{data:po(f)}}function kN(t,e,n,r){const s=t._url(e);return RN(t,s,n,r||{})}async function RN(t,e,n,r){var s;n=au(n);const i={data:n},o=await hT(t,r);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:o,signal:r==null?void 0:r.signal})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const b=new hn("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const P=lu(0,null);return{data:Promise.reject(P),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(P)}}}}}}let u,d;const f=new Promise((w,P)=>{u=w,d=P});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const w=new hn("cancelled","Request was cancelled.");d(w)});const m=c.body.getReader(),g=NN(m,u,d,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const w=g.getReader();return{async next(){const{value:P,done:b}=await w.read();return{value:P,done:b}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:f}}function NN(t,e,n,r){const s=(o,c)=>{const u=o.match(EN);if(!u)return;const d=u[1];try{const f=JSON.parse(d);if("result"in f){e(po(f.result));return}if("message"in f){c.enqueue(po(f.message));return}if("error"in f){const m=lu(0,f);c.error(m),n(m);return}}catch(f){if(f instanceof hn){c.error(f),n(f);return}}},i=new TextDecoder;return new ReadableStream({start(o){let c="";return u();async function u(){if(r!=null&&r.aborted){const d=new hn("cancelled","Request was cancelled");return o.error(d),n(d),Promise.resolve()}try{const{value:d,done:f}=await t.read();if(f){c.trim()&&s(c.trim(),o),o.close();return}if(r!=null&&r.aborted){const g=new hn("cancelled","Request was cancelled");o.error(g),n(g),await t.cancel();return}c+=i.decode(d,{stream:!0});const m=c.split(`
`);c=m.pop()||"";for(const g of m)g.trim()&&s(g.trim(),o);return u()}catch(d){const f=d instanceof hn?d:lu(0,null);o.error(f),n(f)}}},cancel(){return t.cancel()}})}const xy="@firebase/functions",Py="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="auth-internal",DN="app-check-internal",bN="messaging-internal";function ON(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(jN),o=n.getProvider(bN),c=n.getProvider(DN);return new IN(s,i,o,c,r)};ci(new Ss(om,e,"PUBLIC").setMultipleInstances(!0)),ur(xy,Py,t),ur(xy,Py,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t=hp(),e=hf){const r=Cu(at(t),om).getImmediate({identifier:e}),s=G0("functions");return s&&VN(r,...s),r}function VN(t,e,n){SN(at(t),e,n)}function LN(t,e,n){return AN(at(t),e)}ON();const Ha=["Pendente","Em produo","Aguardando Feedback","Aprovada","Revisar","Concluida"],am=["Instagram","Trfego Pago","CRM","Influencers","Site","Branding","Outros"],FN=t=>t==="Aberta"?"Aberta":t==="Em Progresso"?"Em Progresso":t==="Concluda"?"Concluda":t,fT=t=>FN(t),pT=t=>{const e=(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")?"st-pending":e.includes("progresso")||e.includes("produo")?"st-progress":e.includes("feedback")?"st-feedback":e.includes("revisar")?"st-review":e.includes("aprov")?"st-approved":e.includes("conclu")?"st-concluded":e.includes("atras")?"st-late":""},lm=t=>{const e=String(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")||t==="Aberta"||t==="Pendente"},cm=t=>{const e=String(t||"").toLowerCase();return e.includes("produo")||e.includes("progresso")||t==="Em Progresso"||t==="Em produo"},Dr=t=>{const e=String(t||"").toLowerCase();return e.includes("conclu")||e.includes("aprov")||t==="Concluda"||t==="Aprovada"},UN=t=>{const e=String(t||"").match(/@([a-zA-Z0-9_]+)/g);return e?e.map(n=>n.slice(1)):[]},ky=t=>{if(t==null)return"";const e=Math.max(0,Math.round(t)),n=Math.floor(e/60),r=e%60;return n>0?`${n}h ${r}m`:`${r}m`},ff=(t,e)=>{const n=t.filter(k=>String(k.status||"").toLowerCase().includes("conclu")||k.status==="Concluda"),r=n.filter(k=>(k.designer||"")===(e.designer||"")),s=n.filter(k=>(k.tipoMidia||"")===(e.tipoMidia||"")),i=n.filter(k=>(k.origem||"")===(e.origem||"")),o=n.filter(k=>(k.plataforma||"")===(e.plataforma||"")),c=(k,V)=>{const v=C=>{const[R,j,x]=String(C||"").split("-").map(Number);return R?new Date(R,j-1,x):null},y=v(k),T=v(V);return!y||!T?null:Math.max(0,Math.round((T-y)/864e5))},u=(()=>{const k=n.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),V=k.reduce((v,y)=>v+y,0)/(k.length||1);return Math.max(1,Math.round(V))})(),d=(()=>{const k=r.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),V=k.reduce((v,y)=>v+y,0)/(k.length||1);return k.length?Math.max(1,Math.round(V)):null})(),f=(()=>{const k=s.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),V=k.reduce((v,y)=>v+y,0)/(k.length||1);return k.length?Math.max(1,Math.round(V)):null})(),m=(()=>{const k=i.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),V=k.reduce((v,y)=>v+y,0)/(k.length||1);return k.length?Math.max(1,Math.round(V)):null})(),g=(()=>{const k=o.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),V=k.reduce((v,y)=>v+y,0)/(k.length||1);return k.length?Math.max(1,Math.round(V)):null})(),w=(()=>{const k=r.map(v=>v.revisoes||0),V=k.reduce((v,y)=>v+y,0)/(k.length||1);return Math.round(V)})(),P=t.filter(k=>(k.designer||"")===(e.designer||"")&&!/conclu/i.test(String(k.status||""))).length,U=Math.min(100,Math.round(P/4*100)),A=d??f??g??m??u,I=(U>=80?1:0)+(w>=2?1:0),S=Math.max(1,A+I),D=[];return D.push(`Estimativa: ${S} dia${S>1?"s":""} teis`),U>=80&&D.push("Alta probabilidade de atraso devido  carga acima de 80%"),S===1&&D.push("Pea deve ser concluda ainda hoje  Hoje at s 17h"),w>=2&&D.push("Revises esperadas acima da mdia para este designer"),D.join("  ")},mT={bg:"#070707",panel:"#0E0E0E",text:"#F2F2F2",muted:"#BDBDBD",border:"#ffffff1a",accent:"#BCD200",hover:"rgba(255,255,255,0.03)",btnBg:"#BCD200",btnText:"#111111",btnHoverBg:"#C7DB00",btnBorder:"#ffffff1a",shadow:"0 10px 30px rgba(0,0,0,.15)",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",chart:"#3b82f6"},_n=()=>{const t=new Date,e=n=>String(n).padStart(2,"0");return`${t.getFullYear()}-${e(t.getMonth()+1)}-${e(t.getDate())}`};function zN({series:t,color:e="#BCD200"}){const s=Math.max(...t,1),i=t.length>1?120/(t.length-1):120,o=t.map((u,d)=>({x:d*i,y:30-u/s*30})),c=o.map(u=>`${u.x},${u.y}`).join(" ");return l.jsxs("svg",{width:120,height:30,className:"sparkline",viewBox:"0 0 120 30",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"sg",x1:"0",x2:"1",y1:"0",y2:"0",children:[l.jsx("stop",{offset:"0%",stopColor:e,stopOpacity:"0.6"}),l.jsx("stop",{offset:"100%",stopColor:e,stopOpacity:"1"})]})}),l.jsx("polyline",{points:c,fill:"none",stroke:"url(#sg)",strokeWidth:"2.5"}),o.map((u,d)=>l.jsx("circle",{cx:u.x,cy:u.y,r:"2.5",fill:e},d))]})}function be({name:t,size:e=18}){const n={width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};return t==="dashboard"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"})]}):t==="demandas"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M8 3h8"}),l.jsx("path",{d:"M8 7h8"}),l.jsx("rect",{x:"5",y:"3",width:"14",height:"18",rx:"2"})]}):t==="config"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.7 1.7 0 0 0 .3 1.8l.1.1-1.5 2.6-.1.1a1.8 1.8 0 0 0-2.2.8h-.2l-3-.4h-.2a1.8 1.8 0 0 0-1.6 0h-.2l-3 .4h-.2a1.8 1.8 0 0 0-2.2-.8l-.1-.1-1.5-2.6.1-.1a1.8 1.8 0 0 0 .3-1.8v-.2l-.4-3v-.2a1.8 1.8 0 0 0 0-1.6v-.2l.4-3v-.2a1.7 1.7 0 0 0-.3-1.8l-.1-.1L4.4 4l.1-.1a1.8 1.8 0 0 0 2.2-.8h.2l3 .4h.2a1.8 1.8 0 0 0 1.6 0h.2l3-.4h.2a1.8 1.8 0 0 0 2.2.8l.1.1 1.5 2.6-.1.1a1.8 1.8 0 0 0-.3 1.8v.2l.4 3v.2a1.8 1.8 0 0 0 0 1.6v.2Z"})]}):t==="cadastros"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M4 6h16"}),l.jsx("path",{d:"M4 12h10"}),l.jsx("path",{d:"M4 18h7"})]}):t==="relatorios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 20h18"}),l.jsx("rect",{x:"6",y:"14",width:"3",height:"6"}),l.jsx("rect",{x:"11",y:"10",width:"3",height:"10"}),l.jsx("rect",{x:"16",y:"6",width:"3",height:"14"})]}):t==="usuarios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"3"}),l.jsx("path",{d:"M19 8v6"}),l.jsx("path",{d:"M22 11h-6"})]}):t==="filter"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"11",cy:"11",r:"7"}),l.jsx("path",{d:"M20 20l-3.5-3.5"})]}):t==="table"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M3 10h18"}),l.jsx("path",{d:"M10 4v16"})]}):t==="board"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"10",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"17",y:"4",width:"4",height:"16",rx:"2"})]}):t==="calendar"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M16 3v4"}),l.jsx("path",{d:"M8 3v4"}),l.jsx("path",{d:"M3 11h18"})]}):t==="close"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M18 6L6 18"}),l.jsx("path",{d:"M6 6l12 12"})]}):t==="clock"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"9"}),l.jsx("path",{d:"M12 7v5l3 3"})]}):t==="paperclip"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21.44 11.05 12.5 20a5 5 0 1 1-7.07-7.07L14.36 4a3.5 3.5 0 0 1 4.95 4.95l-9.19 9.19"})}):t==="chat"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4Z"})}):t==="check"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M20 6 9 17l-5-5"})}):t==="plus"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"})]}):t==="dot"?l.jsx("svg",{...n,children:l.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor",stroke:"none"})}):t==="trash"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 6h18"}),l.jsx("path",{d:"M8 6V4h8v2"}),l.jsx("rect",{x:"5",y:"6",width:"14",height:"14",rx:"2"})]}):t==="logout"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("path",{d:"M16 17l5-5-5-5"}),l.jsx("path",{d:"M21 12H9"})]}):t==="link"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 1 0-7.07-7.07L10 4"}),l.jsx("path",{d:"M14 11a5 5 0 0 1-7.07 0L3.39 7.46a5 5 0 1 1 7.07-7.07L14 4"})]}):t==="tag"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M20 10V4H14L4 14l6 6 10-10Z"}),l.jsx("circle",{cx:"16.5",cy:"7.5",r:"1.5"})]}):null}function BN({onNew:t,view:e,setView:n,showNew:r,user:s,onLogout:i}){return l.jsxs("div",{className:"topbar",children:[l.jsx("div",{className:"topbar-left",children:l.jsx("div",{className:"team",children:"Equipe de Marketing"})}),l.jsx("div",{className:"topbar-right",children:s?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{className:"chip",children:s.name||s.username}),l.jsxs("button",{className:"primary",onClick:i,children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"logout"})}),l.jsx("span",{children:"Sair"})]})]}):null})]})}function $N({view:t,setView:e}){return l.jsxs("div",{className:"tabs-inline",children:[l.jsxs("button",{className:`tab-btn ${t==="table"?"active":""}`,onClick:()=>e("table"),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"table"})}),l.jsx("span",{children:"Table"})]}),l.jsxs("button",{className:`tab-btn ${t==="calendar"?"active":""}`,onClick:()=>e("calendar"),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"calendar"})}),l.jsx("span",{children:"Calendar"})]})]})}function HN({onLogin:t}){const[e,n]=Q.useState(""),[r,s]=Q.useState(""),[i,o]=Q.useState(!1),[c,u]=Q.useState(""),d=async f=>{if(f.preventDefault(),!i){u(""),o(!0);try{await t(e,r)}catch(m){const g=m&&(m.code||m.message)||"Falha ao entrar";u(String(g))}finally{o(!1)}}};return l.jsxs("div",{className:"login-wrap",children:[l.jsx("div",{className:"login-banner",children:"BANNER TELA LOGIN"}),l.jsxs("div",{className:"login-card",children:[l.jsx("div",{className:"login-title",children:"Gerenciamento Mkt!"}),l.jsxs("form",{onSubmit:d,className:"login-form",children:[l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",placeholder:"Usurio",value:e,onChange:f=>n(f.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"8",r:"4"}),l.jsx("path",{d:"M4 20c0-4 4-6 8-6s8 2 8 6"})]})})]}),l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",type:"password",placeholder:"Insira sua senha",value:r,onChange:f=>s(f.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),c?l.jsx("div",{className:"login-error",role:"alert",children:c}):null,l.jsx("div",{className:"login-links",children:l.jsx("a",{href:"#",onClick:f=>f.preventDefault(),children:"Esqueceu sua senha?"})}),l.jsx("button",{className:"primary btn-lg",type:"submit",disabled:i,children:i?"Entrando...":"Entrar"})]})]})]})}function qN({open:t,filtros:e,setFiltros:n,designers:r,onClose:s,cadStatus:i,cadTipos:o,origens:c,campanhas:u}){const d=(m,g)=>n(w=>({...w,[m]:g})),f=()=>n({designer:"",status:"",cIni:"",cFim:"",sIni:"",sFim:""});return t?l.jsx("div",{className:"modal",onClick:s,children:l.jsxs("div",{className:"modal-dialog",onClick:m=>m.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"filter"})}),l.jsx("span",{children:"Filtros"})]}),l.jsx("button",{className:"icon",onClick:s,children:l.jsx(be,{name:"close"})})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Comparativo Mensal"}),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Produo"})}),(()=>{const m=concluidos.filter(A=>inMonth(A.dataConclusao,mesAtual)).length,g=concluidos.filter(A=>inMonth(A.dataConclusao,mesPassado)).length,w=Math.max(m,g,1),P=220,b=80,U=(A,I)=>l.jsx("rect",{x:I,y:b-A/w*b,width:"40",height:A/w*b,rx:"6"});return l.jsxs("svg",{width:P,height:b,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:U(m,40)}),l.jsx("g",{fill:"#4DA3FF",children:U(g,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Qualidade (retrabalho)"})}),(()=>{const m=concluidos.filter(S=>inMonth(S.dataConclusao,mesAtual)).map(S=>S.revisoes||0),g=concluidos.filter(S=>inMonth(S.dataConclusao,mesPassado)).map(S=>S.revisoes||0),w=+(m.reduce((S,D)=>S+D,0)/(m.length||1)).toFixed(2),P=+(g.reduce((S,D)=>S+D,0)/(g.length||1)).toFixed(2),b=Math.max(w,P,1),U=220,A=80,I=(S,D)=>l.jsx("rect",{x:D,y:A-S/b*A,width:"40",height:S/b*A,rx:"6"});return l.jsxs("svg",{width:U,height:A,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:I(w,40)}),l.jsx("g",{fill:"#FF5E5E",children:I(P,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Lead-time"})}),(()=>{const m=compMesAtual,g=compMesPassado,w=Math.max(m,g,1),P=220,b=80,U=(A,I)=>l.jsx("rect",{x:I,y:b-A/w*b,width:"40",height:A/w*b,rx:"6"});return l.jsxs("svg",{width:P,height:b,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:U(m,40)}),l.jsx("g",{fill:"#9B59B6",children:U(g,140)})]})})()]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Insights Automticos"}),l.jsx("div",{className:"insights-grid",children:(()=>{const m=(()=>{const A={};return concluidos.forEach(S=>{const D=S.designer||"",k=S.prazo&&S.dataConclusao&&S.dataConclusao<=S.prazo,V=S.prazo&&S.dataConclusao,v=A[D]||{ok:0,total:0};A[D]={ok:v.ok+(k?1:0),total:v.total+(V?1:0)}}),Object.entries(A).map(([S,D])=>({designer:S,pct:Math.round(100*(D.ok/(D.total||1)))})).sort((S,D)=>D.pct-S.pct)[0]})(),g=(()=>{const A={};return items.forEach(S=>{const D=S.origem||"Outros";A[D]=(A[D]||0)+1}),Object.entries(A).map(([S,D])=>({origem:S,q:D})).sort((S,D)=>D.q-S.q)[0]})(),w=concluidos.filter(A=>(A.revisoes||0)===0).length===concluidos.length,P=compMesAtual<=compMesPassado,b=(()=>{const A=concluidos.filter(S=>/stor/i.test(String(S.tipoMidia||""))),I=+(A.reduce((S,D)=>S+(D.revisoes||0),0)/(A.length||1)).toFixed(2);return{qtd:A.length,avg:I}})(),U=[];return m&&U.push(`O designer ${m.designer} teve o melhor SLA do ms (${m.pct}%)`),g&&U.push(`${g.origem} foi o canal mais solicitado`),w&&U.push("Nenhuma demanda apresentou retrabalho neste ms"),P&&U.push("Seu lead-time melhorou em relao ao ms anterior"),b.qtd>0&&U.push("A categoria Stories teve o maior retrabalho do ms"),U})().map((m,g)=>l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:m})]},g))})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:e.designer,onChange:m=>d("designer",m.target.value),children:[l.jsx("option",{value:"",children:"Designer"}),r.map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{className:"status-select",value:e.status,onChange:m=>d("status",m.target.value),children:[l.jsx("option",{value:"",children:"Status"}),Ha.map(m=>l.jsx("option",{value:m,children:fT(m)},m))]}),l.jsx("div",{className:"chips",children:Ha.map(m=>l.jsx("button",{className:`chip ${e.status===m?"active":""}`,onClick:()=>d("status",e.status===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("div",{className:"chips",children:o.map(m=>l.jsx("button",{className:`chip ${e.tipoMidia===m?"active":""}`,onClick:()=>d("tipoMidia",e.tipoMidia===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem"}),l.jsx("div",{className:"chips",children:(c||am).map(m=>l.jsx("button",{className:`chip ${e.origem===m?"active":""}`,onClick:()=>d("origem",e.origem===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsxs("select",{value:e.campanha||"",onChange:m=>d("campanha",m.target.value),children:[l.jsx("option",{value:"",children:"Campanha"}),(u||[]).map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.cIni,onChange:m=>d("cIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.cFim,onChange:m=>d("cFim",m.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.sIni,onChange:m=>d("sIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.sFim,onChange:m=>d("sFim",m.target.value)})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsxs("button",{className:"icon",onClick:f,children:[l.jsx(be,{name:"close"}),l.jsx("span",{children:"Limpar"})]}),l.jsx("button",{className:"primary",onClick:s,children:"Aplicar"})]})]})}):null}function WN(t,e){return t.filter(n=>!(e.q&&!(n.titulo||"").toLowerCase().includes(e.q.toLowerCase())||e.designer&&n.designer!==e.designer||e.status&&n.status!==e.status||e.tipoMidia&&n.tipoMidia!==e.tipoMidia||e.plataforma&&(n.plataforma||"")!==e.plataforma||e.origem&&(n.origem||"")!==e.origem||e.campanha&&(n.campanha||"")!==e.campanha||e.cIni&&n.dataCriacao&&n.dataCriacao<e.cIni||e.cFim&&n.dataCriacao&&n.dataCriacao>e.cFim||e.sIni&&n.dataSolicitacao<e.sIni||e.sFim&&n.dataSolicitacao>e.sFim))}function GN({items:t,onEdit:e,onStatus:n,cadStatus:r,onDelete:s,onDuplicate:i,hasMore:o,showMore:c,canCollapse:u,showLess:d,shown:f,total:m,compact:g,canEdit:w,loading:P}){const[b,U]=Q.useState(null),A=k=>String(k).padStart(2,"0");(k=>{const V=new Date(Date.UTC(k.getFullYear(),k.getMonth(),k.getDate())),v=V.getUTCDay()||7;V.setUTCDate(V.getUTCDate()+4-v);const y=new Date(Date.UTC(V.getUTCFullYear(),0,1)),T=Math.ceil(((V-y)/864e5+1)/7);return`${V.getUTCFullYear()}-W${A(T)}`})(new Date);const S=k=>{if(!k)return"";const[V,v,y]=String(k).split("-").map(Number),T=new Date(V,(v||1)-1,y||1),C=new Date;return C.setHours(0,0,0,0),T.setHours(0,0,0,0),Math.round((T-C)/864e5)},D=k=>{if(!k)return"";const[V,v,y]=String(k).split("-").map(Number),T=String(y).padStart(2,"0"),C=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"][Math.max(0,Math.min(11,v-1||0))];return`${T}.${C}`};return P?l.jsxs("div",{className:`table ${g?"compact":""}`,children:[l.jsx("div",{className:"skeleton row",style:{width:"60%"}}),Array.from({length:8}).map((k,V)=>l.jsx("div",{className:"skeleton row",style:{width:`${90-V*6}%`}},V))]}):l.jsxs("div",{className:`table ${g?"compact":""}`,children:[l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Data de Solicitao"}),l.jsx("th",{children:"Data de Criao"}),l.jsx("th",{children:"Prazo (dias)"}),l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Link"}),l.jsx("th",{children:"File"})]})}),l.jsx("tbody",{children:t.map(k=>l.jsxs("tr",{className:"row-clickable",onClick:()=>e(k),children:[l.jsx("td",{className:"name",children:k.titulo}),l.jsx("td",{children:l.jsx("div",{children:k.designer})}),l.jsx("td",{children:l.jsx("select",{className:`status-select ${pT(k.status)}`,value:k.status,onChange:V=>n(k.id,V.target.value),onClick:V=>V.stopPropagation(),disabled:!w,children:Ha.map(V=>l.jsx("option",{value:V,children:fT(V)},V))})}),l.jsx("td",{children:D(k.dataSolicitacao)}),l.jsx("td",{children:D(k.dataCriacao)}),l.jsx("td",{children:l.jsx("span",{style:{color:!Dr(k.status)&&Number(S(k.prazo))<=1?"#ef4444":"inherit"},children:S(k.prazo)})}),l.jsx("td",{children:k.tipoMidia}),l.jsx("td",{children:k.link?l.jsx("a",{href:k.link,target:"_blank",rel:"noreferrer",onClick:V=>V.stopPropagation(),children:"Visualizar"}):""}),l.jsx("td",{children:Array.isArray(k.arquivos)&&k.arquivos.length?l.jsx("div",{className:"files",children:k.arquivos.slice(0,5).map(V=>l.jsx("a",{href:V.url,target:"_blank",rel:"noreferrer",title:V.name,onClick:v=>v.stopPropagation(),children:l.jsx("img",{className:"file-thumb",src:V.url,alt:V.name})},V.name))}):k.arquivoNome||""})]},k.id))})]}),l.jsxs("div",{className:"table-footer",children:[o&&l.jsx("button",{className:"primary",onClick:c,children:"Mostrar mais demandas"}),u&&l.jsx("button",{className:"primary",onClick:d,children:"Mostrar menos demandas"})]})]})}function KN({items:t,refDate:e}){const n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0),s=n.getDay(),i=r.getDate(),o={};t.forEach(u=>{const d=u.dataSolicitacao,f=new Date(d);f.getMonth()===e.getMonth()&&f.getFullYear()===e.getFullYear()&&(o[d]||(o[d]=[])).push(u)});const c=[];for(let u=0;u<s;u++)c.push(null);for(let u=1;u<=i;u++)c.push(u);return l.jsxs("div",{className:"calendar",children:[l.jsx("div",{className:"cal-head",children:l.jsx("div",{className:"month",children:e.toLocaleString("pt-BR",{month:"long",year:"numeric"})})}),l.jsxs("div",{className:"cal-grid",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(u=>l.jsx("div",{className:"cal-cell head",children:u},u)),c.map((u,d)=>{if(!u)return l.jsx("div",{className:"cal-cell"},d);const f=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`,m=o[f]||[];return l.jsxs("div",{className:"cal-cell",children:[l.jsx("div",{className:"day",children:u}),m.map(g=>l.jsxs("div",{className:"cal-item",children:[g.titulo," (",g.designer,")"]},g.id))]},d)})]})]})}function QN({open:t,mode:e,onClose:n,onSubmit:r,initial:s,cadTipos:i,designers:o,cadPlataformas:c,onDelete:u,userLabel:d,canDelete:f,onAddComment:m,cadOrigens:g,currentUser:w}){const[P,b]=Q.useState((s==null?void 0:s.designer)||w||""),[U,A]=Q.useState((s==null?void 0:s.tipoMidia)||"Post"),[I,S]=Q.useState((s==null?void 0:s.titulo)||""),[D,k]=Q.useState((s==null?void 0:s.link)||""),[V,v]=Q.useState(""),[y,T]=Q.useState((s==null?void 0:s.dataSolicitacao)||_n()),[C,R]=Q.useState((s==null?void 0:s.plataforma)||""),[j,x]=Q.useState((s==null?void 0:s.arquivos)||[]),[tt,xt]=Q.useState((s==null?void 0:s.dataCriacao)||""),[nt,W]=Q.useState((s==null?void 0:s.dataFeedback)||""),[$,O]=Q.useState((s==null?void 0:s.descricao)||""),[B,H]=Q.useState((s==null?void 0:s.prazo)||""),[J,oe]=Q.useState((s==null?void 0:s.comentarios)||[]),[Te,Fe]=Q.useState(""),[Pe,Be]=Q.useState((s==null?void 0:s.historico)||[]),[Vn,xn]=Q.useState((s==null?void 0:s.origem)||""),[zt,Bt]=Q.useState((s==null?void 0:s.campanha)||""),[Ze,_r]=Q.useState("");Q.useEffect(()=>{b((s==null?void 0:s.designer)||w||""),A((s==null?void 0:s.tipoMidia)||"Post"),S((s==null?void 0:s.titulo)||""),k((s==null?void 0:s.link)||""),v(""),T((s==null?void 0:s.dataSolicitacao)??(e==="create"?_n():"")),R((s==null?void 0:s.plataforma)||(c==null?void 0:c[0])||""),x((s==null?void 0:s.arquivos)||[]),xt((s==null?void 0:s.dataCriacao)||""),W((s==null?void 0:s.dataFeedback)||""),O((s==null?void 0:s.descricao)||""),H((s==null?void 0:s.prazo)||""),oe((s==null?void 0:s.comentarios)||[]),Fe(""),Be((s==null?void 0:s.historico)||[]),xn((s==null?void 0:s.origem)||""),Bt((s==null?void 0:s.campanha)||"")},[s,t,o,i,c,g]);const Re=L=>{L.preventDefault(),r({designer:P,tipoMidia:U,titulo:I,link:D,arquivoNome:V,dataSolic:y,dataCriacao:tt,dataFeedback:nt,plataforma:C,arquivos:j,descricao:$,prazo:B,comentarios:J,historico:Pe,origem:Vn,campanha:zt})},$e=()=>{const L=Te.trim();if(!L)return;const ne=UN(L),we={texto:L,data:_n(),mentions:ne,autor:d},pe={tipo:"comentario",autor:d,data:we.data,texto:L,mentions:ne};oe(ge=>[we,...ge]),Be(ge=>[pe,...ge]),Fe("");try{m&&m(s==null?void 0:s.id,we,pe)}catch{}},He=L=>{if(!L)return"";try{return new Date(L).toLocaleString("pt-BR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return L}},[wr,Gr]=Q.useState(Date.now());Q.useEffect(()=>{const L=setInterval(()=>Gr(Date.now()),1e3);return()=>clearInterval(L)},[]);const Er=L=>{if(!L||L<=0)return"00:00:00";const ne=Math.floor(L/1e3),we=String(Math.floor(ne/3600)).padStart(2,"0"),pe=String(Math.floor(ne%3600/60)).padStart(2,"0"),ge=String(ne%60).padStart(2,"0");return`${we}:${pe}:${ge}`},Ge=Number((s==null?void 0:s.tempoProducaoMs)||0),Jn=s!=null&&s.startedAt?Date.parse(s.startedAt):null,Nt=/produ|progresso/i.test(String((s==null?void 0:s.status)||"")),[Zn]=Q.useState(()=>!Jn&&Nt?Date.now():null),Ln=Jn??Zn,E=Ge+(Ln?Math.max(0,wr-Ln):0),[N,F]=Q.useState(null);return t?l.jsx("div",{className:"modal",children:l.jsxs("div",{className:`modal-dialog ${e!=="create"?"tall":""}`,onClick:L=>L.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[e==="create"?l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}):l.jsx("div",{className:"title editable",contentEditable:!0,suppressContentEditableWarning:!0,onInput:L=>S(L.currentTarget.textContent||""),children:I||"Sem ttulo"}),l.jsx("button",{className:"icon",onClick:n,children:l.jsx(be,{name:"close"})})]}),l.jsxs("div",{className:`status-bar ${pT((s==null?void 0:s.status)||"Aberta")}`,children:[l.jsx("div",{children:(s==null?void 0:s.status)||"Aberta"}),e!=="create"&&l.jsxs("div",{className:"timer",children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"clock"})}),l.jsx("span",{children:Er(E)})]})]}),l.jsx("form",{id:"modalForm",className:"modal-body",onSubmit:Re,children:l.jsxs("div",{className:`modal-columns ${e==="create"?"single":"cols3"}`,children:[l.jsxs("div",{className:"modal-main",children:[l.jsxs("div",{className:e==="create"?"form-grid":"form-stack",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:P,onChange:L=>b(L.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Designer"}),(o||[]).map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("select",{value:U,onChange:L=>A(L.target.value),children:(i||["Post","Story","Banner","Vdeo","Outro"]).map(L=>l.jsx("option",{value:L,children:L},L))})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Titulo"}),l.jsx("input",{value:I,onChange:L=>S(L.target.value),required:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem da Demanda"}),l.jsxs("select",{value:Vn,onChange:L=>xn(L.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Origem"}),(g||am).map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsx("input",{value:zt,onChange:L=>Bt(L.target.value),placeholder:"Ex: Black Friday"})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link"}),l.jsx("input",{type:"url",value:D,onChange:L=>k(L.target.value),placeholder:"https://"})]}),e==="create"?l.jsxs("div",{className:"row-2",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:L=>{const we=Array.from(L.target.files||[]).filter(ve=>(ve.size||0)<=1048576).slice(0,5),pe=new Date().toISOString(),ge=we.map(ve=>new Promise(Ce=>{const Se=new FileReader;Se.onload=()=>Ce({name:ve.name,url:Se.result,addedBy:d,addedAt:pe}),Se.readAsDataURL(ve)}));Promise.all(ge).then(ve=>{x(ve),Be(Se=>[{tipo:"arquivo",autor:d,data:_n(),arquivos:ve},...Se]);const Ce=ve.map(Se=>Se.name).join(", ");oe(Se=>[{texto:`Arquivos anexados: ${Ce||ve.length}`,data:_n()},...Se])})}})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:B,onChange:L=>H(L.target.value)})]})]}):l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:L=>{const we=Array.from(L.target.files||[]).filter(ve=>(ve.size||0)<=1048576).slice(0,5),pe=new Date().toISOString(),ge=we.map(ve=>new Promise(Ce=>{const Se=new FileReader;Se.onload=()=>Ce({name:ve.name,url:Se.result,addedBy:d,addedAt:pe}),Se.readAsDataURL(ve)}));Promise.all(ge).then(ve=>{x(ve),Be(Se=>[{tipo:"arquivo",autor:d,data:_n(),arquivos:ve},...Se]);const Ce=ve.map(Se=>Se.name).join(", ");oe(Se=>[{texto:`Arquivos anexados: ${Ce||ve.length}`,data:_n()},...Se])})}}),Array.isArray(j)&&j.length>0&&l.jsx("div",{className:"thumbs",children:j.map((L,ne)=>l.jsxs("div",{className:"file-item",children:[l.jsx("img",{className:"file-thumb",src:L.url,alt:L.name}),l.jsxs("div",{className:"file-meta",children:[L.name,L.addedBy?`  ${L.addedBy}`:""]}),l.jsxs("div",{className:"file-actions",children:[l.jsx("a",{href:L.url,download:!0,target:"_blank",rel:"noreferrer",children:"Baixar"}),l.jsxs("label",{className:"replace-btn",children:["Substituir",l.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:we=>{var Ce;const pe=(Ce=we.target.files)==null?void 0:Ce[0];if(!pe)return;const ge=new FileReader,ve=new Date().toISOString();ge.onload=()=>{const Se={name:pe.name,url:ge.result,addedBy:d,addedAt:ve};x(Fn=>Fn.map((er,Ae)=>Ae===ne?Se:er))},ge.readAsDataURL(pe)}})]}),l.jsx("button",{type:"button",onClick:()=>x(we=>we.filter((pe,ge)=>ge!==ne)),children:"Excluir"})]})]},L.name+ne))})]})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:8,className:"desc-input",value:$,onChange:L=>O(L.target.value)})]})]}),e!=="create"&&l.jsxs("div",{className:"modal-center",children:[l.jsxs("div",{className:"date-row",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsx("input",{type:"date",value:y,disabled:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsx("input",{type:"date",value:tt,disabled:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:B,onChange:L=>H(L.target.value)})]}),String((s==null?void 0:s.status)||"").toLowerCase().includes("feedback")&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Feedback"}),l.jsx("input",{type:"date",value:nt,onChange:L=>W(L.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:12,className:"desc-input",value:$,onChange:L=>O(L.target.value)})]})]}),e!=="create"&&l.jsx("div",{className:"modal-side",children:l.jsxs("div",{className:"activity",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Comentrios"}),l.jsx("input",{placeholder:"Escreva um comentrio use @ para mencionar",value:Te,onChange:L=>Fe(L.target.value)}),Te.trim().length>0&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:l.jsx("button",{className:"primary",type:"button",onClick:$e,children:"Adicionar"})})]}),l.jsx("div",{className:"activity-list",children:(J||[]).length===0?l.jsx("div",{className:"empty",children:"Sem comentrios"}):(J||[]).map((L,ne)=>l.jsx("div",{className:"activity-item",children:l.jsxs("div",{className:"activity-entry",children:[l.jsx("div",{className:"avatar",children:"V"}),l.jsxs("div",{className:"entry-content",children:[l.jsx("div",{className:"entry-title",children:l.jsxs("span",{children:[l.jsx("strong",{children:L.autor||""})," comentou: ",L.texto]})}),l.jsx("div",{className:"entry-time",children:He(L.data)}),Array.isArray(L.mentions)&&L.mentions.length>0&&l.jsx("div",{className:"mentions-row",children:L.mentions.map(we=>l.jsxs("span",{className:`mention-pill ${String(d||"").toLowerCase()===String(we||"").toLowerCase()?"you":""}`,children:["@",we,String(d||"").toLowerCase()===String(we||"").toLowerCase()?"  Voc foi mencionado":""]},we))})]})]})},ne))}),e!=="create"&&l.jsxs("div",{className:"timeline",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Linha do tempo"})}),["Criado","Em produo","Aguardando Feedback","Revisar","Aprovada","Concluda","Postado"].map(L=>{const ne=(Ae,jt)=>{const Z=String(Ae.status_novo||Ae.para||""||"").toLowerCase();return jt==="Criado"?Z==="aberta":jt==="Em produo"?Z.includes("produ")||Z.includes("progresso"):jt==="Aguardando Feedback"?Z.includes("feedback"):jt==="Revisar"?Z.includes("revisar"):jt==="Aprovada"?Z.includes("aprov"):jt==="Concluda"?Z.includes("conclu"):!1};let pe=L==="Postado"?(Pe||[]).filter(Ae=>Ae.tipo==="mlabs"):(Pe||[]).filter(Ae=>Ae.tipo==="status"&&ne(Ae,L));if(L==="Concluda"&&(!pe||pe.length===0)&&String((s==null?void 0:s.status)||"").toLowerCase().includes("conclu")){const Ae=(s==null?void 0:s.finishedAt)||(s!=null&&s.dataConclusao?`${s.dataConclusao}T00:00:00Z`:null);pe=[{tipo:"status",autor:(s==null?void 0:s.autor)||d,data_hora_evento:Ae,data:s==null?void 0:s.dataConclusao,status_novo:"Concluda",responsavel:(s==null?void 0:s.designer)||""}]}const ge=pe&&pe.length?pe[pe.length-1]:null,ve=(ge==null?void 0:ge.duracao_em_minutos)!=null?ky(ge.duracao_em_minutos):"",Ce=ge!=null&&ge.data_hora_evento?He(ge.data_hora_evento):He(ge==null?void 0:ge.data),Se=(ge==null?void 0:ge.responsavel)||(ge==null?void 0:ge.autor)||"",Fn=pe.length,er=N===L;return l.jsxs("div",{className:"timeline-item",onClick:()=>F(Ae=>Ae===L?null:L),children:[l.jsx("div",{className:"timeline-left",children:l.jsx("span",{className:"timeline-icon",children:""})}),l.jsxs("div",{className:"timeline-body",children:[l.jsxs("div",{className:"timeline-title",children:[L,Fn>1?`  ${Fn}`:""]}),l.jsxs("div",{className:"timeline-meta",children:[Ce,Se?`  ${Se}`:"",ve?`  ${ve}`:""]}),er&&Fn>0&&l.jsx("div",{className:"timeline-details",children:pe.map((Ae,jt)=>l.jsxs("div",{className:"timeline-detail-row",children:[l.jsx("div",{children:Ae!=null&&Ae.data_hora_evento?He(Ae.data_hora_evento):He(Ae==null?void 0:Ae.data)}),l.jsx("div",{children:(Ae==null?void 0:Ae.responsavel)||(Ae==null?void 0:Ae.autor)||""}),l.jsx("div",{children:(Ae==null?void 0:Ae.duracao_em_minutos)!=null?ky(Ae.duracao_em_minutos):""})]},jt))})]})]},L)})]}),e!=="create"&&l.jsxs("div",{className:"ia-panel",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Previso de entrega por IA"})}),l.jsx("div",{className:"ia-text",children:(s==null?void 0:s.previsaoIA)||ff([],s||{})})]})]})})]})}),l.jsxs("div",{className:"modal-actions",children:[e==="edit"&&f&&l.jsx("button",{className:"danger",type:"button",onClick:()=>{window.confirm("Confirmar excluso desta demanda?")&&(u(s.id),n())},children:"Excluir"}),l.jsx("button",{className:"primary",type:"submit",form:"modalForm",children:"Salvar"})]})]})}):null}function YN({cadStatus:t,setCadStatus:e,cadTipos:n,setCadTipos:r,cadPlataformas:s,setCadPlataformas:i,cadOrigens:o,setCadOrigens:c,cadStatusColors:u,setCadStatusColors:d}){const[f,m]=Q.useState("tipo"),[g,w]=Q.useState(""),[P,b]=Q.useState("#f59e0b"),U=f==="status"?t:f==="tipo"?n:f==="plataforma"?s:o,A=k=>{f==="status"?e(k):f==="tipo"?r(k):f==="plataforma"?i(k):c(k)},I=async()=>{const k=g.trim();if(!k||U.includes(k))return;const V=[...U,k];if(A(V),w(""),f==="status"&&d(v=>({...v,[k]:P})),ue){const v=f==="status"?"cad_status":f==="tipo"?"cad_tipos":f==="plataforma"?"cad_plataformas":"cad_origens";try{await ns(ft(ue,v,k),{name:k,active:!0})}catch{}}},S=async k=>{const V=U.filter(v=>v!==k);if(A(V),ue){const v=f==="status"?"cad_status":f==="tipo"?"cad_tipos":f==="plataforma"?"cad_plataformas":"cad_origens";try{await eu(ft(ue,v,k))}catch{}}},D=async k=>{if(!ue)return;const V=f==="status"?"cad_status":f==="tipo"?"cad_tipos":f==="plataforma"?"cad_plataformas":"cad_origens";try{await ns(ft(ue,V,k),{active:!1},{merge:!0})}catch{}};return l.jsxs("div",{className:"panel",children:[l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${f==="tipo"?"active":""}`,onClick:()=>m("tipo"),children:"Tipo"}),l.jsx("button",{className:`tab ${f==="origem"?"active":""}`,onClick:()=>m("origem"),children:"Origem"})]}),l.jsxs("div",{className:"form-row",style:{marginTop:10},children:[l.jsx("label",{children:f==="status"?"Novo Status":f==="tipo"?"Novo Tipo":"Nova Origem"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{value:g,onChange:k=>w(k.target.value)}),f==="status"&&l.jsx("input",{type:"color",value:P,onChange:k=>b(k.target.value),title:"Cor"}),l.jsx("button",{className:"primary",onClick:I,children:"Adicionar"})]})]}),l.jsx("div",{className:"form-row",style:{marginTop:10},children:l.jsx("select",{children:U.map(k=>l.jsx("option",{value:k,children:k},k))})}),l.jsx("div",{className:"list",style:{marginTop:12},children:U.length===0?l.jsx("div",{className:"empty",children:"Sem itens"}):U.map(k=>l.jsxs("div",{className:"list-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",border:"1px solid var(--border)",borderRadius:8,background:"#0b0e12",marginBottom:6},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[f==="status"&&l.jsx("span",{className:"status-dot",style:{background:u[k]||"#3b82f6"}}),l.jsx("div",{children:k})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[f==="status"&&l.jsx("input",{type:"color",value:u[k]||"#3b82f6",onChange:V=>d(v=>({...v,[k]:V.target.value}))}),l.jsx("button",{className:"icon",onClick:()=>D(k),title:"Desativar",children:l.jsx(be,{name:"minus"})}),l.jsx("button",{className:"icon",onClick:()=>S(k),children:l.jsx(be,{name:"trash"})})]})]},k))})]})}function XN(){var er,Ae,jt;const[t,e]=Q.useState(null),[n,r]=Q.useState([]),[s,i]=Q.useState(!0),[o,c]=Q.useState("table"),[u,d]=Q.useState(!1),[f,m]=Q.useState("dashboard"),[g,w]=Q.useState({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""}),[P,b]=Q.useState(!1),[U,A]=Q.useState(!1),[I,S]=Q.useState("create"),[D,k]=Q.useState(null),[V,v]=Q.useState(mT),[y,T]=Q.useState({autoPostMLabs:!1}),[C,R]=Q.useState(["Aberta","Em Progresso","Concluda"]),[j,x]=Q.useState(["Post","Story","Banner","Vdeo","Outro"]),[tt,xt]=Q.useState([]),[nt,W]=Q.useState([]),[$,O]=Q.useState([]),[B,H]=Q.useState({Aberta:"#f59e0b","Em Progresso":"#3b82f6",Concluda:"#10b981"}),J=Q.useMemo(()=>Array.from(new Set(n.map(Z=>Z.designer).filter(Boolean))).sort(),[n]),oe=Q.useMemo(()=>$.filter(Z=>(Z.cargo||"")==="Designer").map(Z=>Z.username).filter(Boolean).sort(),[$]),Te=Q.useMemo(()=>Array.from(new Set([...oe,...J])).sort(),[oe,J]),Fe=Q.useMemo(()=>Array.from(new Set(n.map(Z=>Z.campanha).filter(Boolean))).sort(),[n]),Pe=(t==null?void 0:t.role)||"comum",Be=Q.useMemo(()=>WN(n,g),[n,g]),Vn=Q.useMemo(()=>{if(Pe==="admin"||Pe==="gerente")return Be;const Z=(t==null?void 0:t.username)||"";return Be.filter(K=>(K.designer||"")===Z)},[Be,Pe,t]),xn=Q.useMemo(()=>Pe==="admin"||Pe==="gerente"?Te:[t==null?void 0:t.username].filter(Boolean),[Te,Pe,t]),zt=Q.useMemo(()=>Be.slice().sort((Z,K)=>{const Y=Z.dataCriacao||"",fe=(K.dataCriacao||"").localeCompare(Y);if(fe!==0)return fe;const te=Z.id||0;return(K.id||0)-te}),[Be]),Bt=Q.useMemo(()=>Pe==="admin"||Pe==="gerente"?Te:[t==null?void 0:t.username].filter(Boolean),[Te,Pe,t]),Ze=Q.useMemo(()=>Pe==="admin"||Pe==="gerente"?zt:zt.filter(Z=>(Z.designer||"")===((t==null?void 0:t.username)||"")),[zt,Pe,t]);Q.useMemo(()=>Ze.filter(Z=>/revisar/i.test(String(Z.status||""))).length,[Ze]),Q.useMemo(()=>Ze.filter(Z=>/aprovada/i.test(String(Z.status||""))).length,[Ze]);const _r=Q.useMemo(()=>{const Z=Ze,K=Y=>String(Y||"").toLowerCase();return{Pendente:Z.filter(Y=>lm(Y.status)).length,"Em produo":Z.filter(Y=>cm(Y.status)).length,"Aguardando Feedback":Z.filter(Y=>K(Y.status).includes("feedback")).length,Aprovada:Z.filter(Y=>K(Y.status).includes("aprov")).length,Revisar:Z.filter(Y=>K(Y.status).includes("revisar")).length,Concluida:Z.filter(Y=>K(Y.status).includes("conclu")).length}},[Ze]),[Re,$e]=Q.useState(10),[He,wr]=Q.useState(new Date),[Gr,Er]=Q.useState("status"),Ge=Q.useMemo(()=>(t==null?void 0:t.name)||(t==null?void 0:t.username)||"Voc",[t]),Jn=["dashboard","demandas","config","cadastros","relatorios","usuarios"],Nt=Q.useMemo(()=>{const Z=t==null?void 0:t.pages;return Z?Jn.filter(K=>Z[K]===!0):["dashboard"]},[t]);Q.useEffect(()=>{},[n,ue]),Q.useEffect(()=>{ue||i(!1)},[ue]),Q.useEffect(()=>{},[ue]),Q.useEffect(()=>{if(!ue||!or)return;const Z=eR(or,async K=>{if(K){let Y=null;try{const fe=await JP(ft(ue,"usuarios",K.uid));fe.exists()&&(Y=fe.data())}catch{}if(!Y)try{const fe=Ud(an(ue,"usuarios"),zd("email","==",K.email||""));(await Bd(fe)).forEach(me=>{Y||(Y=me.data())})}catch{}const ae={username:(Y==null?void 0:Y.username)||(K.email||"").split("@")[0],name:(Y==null?void 0:Y.name)||K.displayName||K.email||"",role:(Y==null?void 0:Y.role)||"comum",pages:(Y==null?void 0:Y.pages)||null,actions:(Y==null?void 0:Y.actions)||null,cargo:(Y==null?void 0:Y.cargo)||""};e(ae)}else e(null)});return()=>{try{Z()}catch{}}},[ue,or]),Q.useEffect(()=>{Object.entries(V||{}).forEach(([Z,K])=>{try{document.documentElement.style.setProperty(`--${Z}`,K)}catch{}})},[V]),Q.useEffect(()=>{if(ue&&t){let Z=null,K=null,Y=null,ae=null,fe=null,te=null;try{const me=(t==null?void 0:t.username)||"",se=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="gerente",de=an(ue,"demandas"),ce=se?de:Ud(de,zd("designer","==",me));Z=Gs(ce,Me=>{const rt=[];Me.forEach(ct=>rt.push({id:ct.id,...ct.data()})),r(rt),i(!1)})}catch{}try{K=Gs(an(ue,"cad_status"),me=>{const se=[];me.forEach(de=>{var ce;return se.push(((ce=de.data())==null?void 0:ce.name)||de.id)}),R(se)})}catch{}try{Y=Gs(an(ue,"cad_tipos"),me=>{const se=[];me.forEach(de=>{const ce=de.data();(ce==null?void 0:ce.active)!==!1&&se.push((ce==null?void 0:ce.name)||de.id)}),x(se)})}catch{}try{te=Gs(an(ue,"usuarios"),me=>{const se=[];me.forEach(de=>se.push({id:de.id,...de.data()})),O(se)})}catch{}try{ae=Gs(an(ue,"cad_plataformas"),me=>{const se=[];me.forEach(de=>{const ce=de.data();(ce==null?void 0:ce.active)!==!1&&se.push((ce==null?void 0:ce.name)||de.id)}),xt(se)})}catch{}try{fe=Gs(an(ue,"cad_origens"),me=>{const se=[];me.forEach(de=>{const ce=de.data();(ce==null?void 0:ce.active)!==!1&&se.push((ce==null?void 0:ce.name)||de.id)}),W(se)})}catch{}return()=>{try{Z&&Z()}catch{}try{K&&K()}catch{}try{Y&&Y()}catch{}try{te&&te()}catch{}try{ae&&ae()}catch{}try{fe&&fe()}catch{}}}},[ue,t]),Q.useEffect(()=>{t&&!Nt.includes(f)&&m(Nt[0]||"dashboard"),!t&&f!=="dashboard"&&f!=="demandas"&&f!=="config"&&f!=="cadastros"&&f!=="relatorios"&&f!=="usuarios"&&m("dashboard")},[t,Nt,f]);const Zn=async()=>{try{await tR(or)}catch{}e(null)},Ln=async(Z,K)=>{var fe;const Y=String(Z||"").trim();if(!Y||!K)throw new Error("Credenciais ausentes");if(!or||!ue)throw new Error("Firebase no configurado");let ae=Y;if(!/@/.test(Y))try{const te=Ud(an(ue,"usuarios"),zd("username","==",Y)),me=await Bd(te);let se=null;me.forEach(de=>{const ce=de.data();!se&&(ce!=null&&ce.email)&&(se=ce.email)}),ae=se||`${Y}@betaki.bet.br`}catch{ae=`${Y}@betaki.bet.br`}try{await Yk(or,ae,K)}catch(te){const me=(te==null?void 0:te.code)||"";try{if(me==="auth/invalid-credential"||me==="auth/user-not-found"){const se=await eT(or,ae,K),de=((fe=se==null?void 0:se.user)==null?void 0:fe.email)||ae,ce=Y;try{await ns(ft(ue,"usuarios",ce),{username:Y,email:de},{merge:!0})}catch{}}else throw te}catch(se){throw se}}},E=((er=t==null?void 0:t.actions)==null?void 0:er.criar)!==!1,N=((Ae=t==null?void 0:t.actions)==null?void 0:Ae.excluir)!==!1,F=((jt=t==null?void 0:t.actions)==null?void 0:jt.visualizar)!==!1,L=()=>{!t||!E||(S("create"),k(null),A(!0))},ne=Z=>{!t||!F||(S("edit"),k(Z),A(!0))},we=async Z=>{const K={...Z,status:"Aberta",dataSolicitacao:_n(),dataCriacao:_n()};if(ue)try{await Wl(an(ue,"demandas"),{...K,createdAt:iy()})}catch{}},pe=async(Z,K)=>{const Y=_n();r(fe=>fe.map(te=>{if(String(te.id)!==String(Z))return te;const me=te.status!==K,se=String(te.status||"").toLowerCase().includes("produ")||String(te.status||"").toLowerCase().includes("progresso"),de=String(K||"").toLowerCase().includes("produ")||String(K||"").toLowerCase().includes("progresso"),ce=Date.now();let Me=Number(te.tempoProducaoMs||0),rt=te.startedAt||null,ct=te.finishedAt||null;const Et=String(K||"").toLowerCase().includes("feedback"),en=String(te.status||"").toLowerCase().includes("feedback");let Dt=te.slaStartAt||null,Tt=te.slaStopAt||null,gt=Number(te.slaPauseMs||0),It=te.pauseStartedAt||null;if(me){if(se&&!de&&rt){const Ke=Date.parse(rt);isNaN(Ke)||(Me+=Math.max(0,ce-Ke)),rt=null}if(!se&&de&&!rt&&(rt=new Date(ce).toISOString(),Dt||(Dt=rt)),!en&&Et&&!It&&(It=new Date(ce).toISOString()),en&&!Et&&It){const Ke=Date.parse(It);isNaN(Ke)||(gt+=Math.max(0,ce-Ke)),It=null}}const on=String(K||"").toLowerCase().includes("revisar"),Tr=me&&on?(te.revisoes||0)+1:te.revisoes||0,tr=String(K||"").toLowerCase().includes("concluida")||K==="Concluda",nr=tr?te.dataConclusao||Y:te.dataConclusao,Pn=tr?te.dataCriacao||Y:te.dataCriacao;me&&tr&&(ct=new Date(ce).toISOString(),Tt=ct);const Un=(te.historico||[]).find(Ke=>Ke.tipo==="status"),So=Un!=null&&Un.data_hora_evento?Date.parse(Un.data_hora_evento):Un!=null&&Un.data?Date.parse(`${Un.data}T00:00:00Z`):null,Fs=new Date(ce).toISOString(),Ao=me&&So?Math.round((ce-So)/6e4):null,Co=me?{tipo:"status",autor:Ge,data:Y,data_hora_evento:Fs,status_anterior:te.status,status_novo:K,duracao_em_minutos:Ao,responsavel:Ge,id_demanda:te.id,de:te.status,para:K}:null,xo=(()=>{if(!te.prazo)return null;const[Ke,$t,zs]=String(te.prazo).split("-").map(Number),ko=new Date(Ke,($t||1)-1,zs||1);ko.setHours(0,0,0,0);const hl=new Date;return hl.setHours(0,0,0,0),ko-hl})(),Xu=!!(te.prazo&&!tr&&typeof xo=="number"&&xo<=864e5),Us=me&&Xu?{tipo:"alerta",autor:Ge,data:Y,data_hora_evento:Fs,mensagem:"Prazo menor que 24h",id_demanda:te.id}:null,Ti=!!(me&&(String(K||"").toLowerCase().includes("aprov")||String(K||"").toLowerCase().includes("conclu"))&&y.autoPostMLabs)?{tipo:"mlabs",autor:Ge,data:Y,data_hora_evento:Fs,mensagem:"Postagem agendada via mLabs",id_demanda:te.id}:null,Ir=Co?[Co,...Us?[Us]:[],...Ti?[Ti]:[],...te.historico||[]]:te.historico||[],Sr=me&&Et&&!te.dataFeedback?Y:te.dataFeedback,Po=(Ir||[]).filter(Ke=>Ke.tipo==="status"&&Ke.duracao_em_minutos!=null).reduce((Ke,$t)=>Ke+($t.duracao_em_minutos||0),0),Zu=(()=>{const Ke={};return(Ir||[]).forEach($t=>{if($t.tipo==="status"&&$t.duracao_em_minutos!=null){const zs=$t.status_anterior||$t.de||"Aberta";Ke[zs]=(Ke[zs]||0)+($t.duracao_em_minutos||0)}}),Ke})(),cl=(()=>{if(!Dt)return 0;const Ke=Tt?Date.parse(Tt):ce,$t=Date.parse(Dt);return isNaN($t)||isNaN(Ke)?0:Math.max(0,Ke-$t-gt)})(),ul=(()=>{if(!nr||!te.prazo)return null;try{return String(nr)<=String(te.prazo)}catch{return null}})(),dl=ff(fe,{...te});return{...te,status:K,revisoes:Tr,dataConclusao:nr,dataCriacao:Pn,dataFeedback:Sr,historico:Ir,tempoProducaoMs:Me,startedAt:rt,finishedAt:ct,previsaoIA:dl,fxBounceAt:me?ce:te.fxBounceAt||0,slaStartAt:Dt,slaStopAt:Tt,slaPauseMs:gt,pauseStartedAt:It,slaNetMs:cl,slaOk:ul,leadTotalMin:Po,leadPorFase:Zu}}));const ae=n.find(fe=>String(fe.id)===String(Z));if(ue&&ae)try{const fe=(ae.historico||[]).find(Dt=>Dt.tipo==="status"),te=fe!=null&&fe.data_hora_evento?Date.parse(fe.data_hora_evento):fe!=null&&fe.data?Date.parse(`${fe.data}T00:00:00Z`):null,me=new Date().toISOString(),se=ae.status!==K&&te?Math.round((Date.now()-te)/6e4):null,de=(()=>{if(!ae.prazo)return null;const[Dt,Tt,gt]=String(ae.prazo).split("-").map(Number),It=new Date(Dt,(Tt||1)-1,gt||1);It.setHours(0,0,0,0);const on=new Date;return on.setHours(0,0,0,0),It-on})(),ce=!!(ae.prazo&&!(String(K||"").toLowerCase().includes("concluida")||K==="Concluda")&&typeof de=="number"&&de<=864e5),Me={tipo:"status",autor:Ge,data:Y,data_hora_evento:me,status_anterior:ae.status,status_novo:K,duracao_em_minutos:se,responsavel:Ge,id_demanda:ae.id,de:ae.status,para:K},rt=ce?{tipo:"alerta",autor:Ge,data:Y,data_hora_evento:me,mensagem:"Prazo menor que 24h",id_demanda:ae.id}:null,Et=!!((String(K||"").toLowerCase().includes("aprov")||String(K||"").toLowerCase().includes("conclu"))&&y.autoPostMLabs)?{tipo:"mlabs",autor:Ge,data:Y,data_hora_evento:me,mensagem:"Postagem agendada via mLabs",id_demanda:ae.id}:null,en=[Me,...rt?[rt]:[],...Et?[Et]:[],...ae.historico||[]];await Js(ft(ue,"demandas",String(Z)),{...ae,status:K,dataCriacao:String(K||"").toLowerCase().includes("concluida")||K==="Concluda"?ae.dataCriacao||Y:ae.dataCriacao,dataConclusao:String(K||"").toLowerCase().includes("concluida")||K==="Concluda"?ae.dataConclusao||Y:ae.dataConclusao,dataFeedback:ae.status!==K&&String(K||"").toLowerCase().includes("feedback")&&!ae.dataFeedback?Y:ae.dataFeedback,revisoes:(ae.revisoes||0)+(ae.status!==K&&String(K||"").toLowerCase().includes("revisar")?1:0),historico:en,tempoProducaoMs:ae.tempoProducaoMs,startedAt:ae.startedAt,finishedAt:String(K||"").toLowerCase().includes("concluida")||K==="Concluda"?new Date().toISOString():ae.finishedAt,slaStartAt:ae.slaStartAt,slaStopAt:String(K||"").toLowerCase().includes("concluida")||K==="Concluda"?new Date().toISOString():ae.slaStopAt,slaPauseMs:ae.slaPauseMs,pauseStartedAt:ae.pauseStartedAt,slaNetMs:ae.slaNetMs,slaOk:ae.slaOk,leadTotalMin:ae.leadTotalMin,leadPorFase:ae.leadPorFase});try{await Wl(an(ue,"historico_status"),Me)}catch{}}catch{}},ge=async(Z,K,Y)=>{r(fe=>fe.map(te=>{if(String(te.id)!==String(Z))return te;const me=[K,...te.comentarios||[]],se=Array.isArray(K.mentions)&&K.mentions.length>0?{tipo:"notificacao",autor:Ge,data:K.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:K.mentions,id_demanda:te.id}:null,de=se?[se,Y,...te.historico||[]]:[Y,...te.historico||[]];return{...te,comentarios:me,historico:de,fxSavedAt:Date.now()}}));const ae=n.find(fe=>String(fe.id)===String(Z));if(ue&&ae)try{const fe=Array.isArray(K.mentions)&&K.mentions.length>0?{tipo:"notificacao",autor:Ge,data:K.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:K.mentions,id_demanda:ae.id}:null,te=fe?[fe,Y,...ae.historico||[]]:[Y,...ae.historico||[]];await Js(ft(ue,"demandas",String(Z)),{comentarios:[K,...ae.comentarios||[]],historico:te})}catch{}},ve=async Z=>{if(r(K=>K.map(Y=>Y.id===Z?{...Y,fxDeleting:!0}:Y)),setTimeout(()=>{r(K=>K.filter(Y=>Y.id!==Z))},180),ue)try{await eu(ft(ue,"demandas",String(Z)))}catch{}},Ce=async(Z,K)=>{const Y=_n();let ae=null;r(te=>te.map(me=>{if(me.id!==Z)return me;if((me.historico||[]).some(Me=>Me.tipo==="alerta"&&Me.data===Y&&Me.mensagem===K))return ae=me,me;const de={tipo:"alerta",autor:Ge,data:Y,data_hora_evento:new Date().toISOString(),mensagem:K,id_demanda:me.id},ce={...me,historico:[de,...me.historico||[]]};return ae=ce,ce}));const fe=ae||n.find(te=>te.id===Z);if(fe&&ue)try{const te={tipo:"alerta",autor:Ge,data:Y,data_hora_evento:new Date().toISOString(),mensagem:K,id_demanda:fe.id};await Js(ft(ue,"demandas",String(Z)),{...fe,historico:[te,...fe.historico||[]]})}catch{}};Q.useEffect(()=>{const Z=setInterval(()=>{_n();const K=n.filter(se=>!Dr(se.status)),Y=K.reduce((se,de)=>{const ce=de.designer||"";return se[ce]=(se[ce]||0)+1,se},{});K.forEach(se=>{if(se.prazo)try{const[ct,Et,en]=String(se.prazo).split("-").map(Number),Dt=new Date(ct,(Et||1)-1,en||1);Dt.setHours(0,0,0,0);const Tt=new Date;Tt.setHours(0,0,0,0),Dt-Tt<=864e5&&Ce(se.id,"Prazo menor que 24h")}catch{}const de=(se.historico||[]).find(ct=>ct.tipo==="status");if(de!=null&&de.data_hora_evento||de!=null&&de.data){const ct=de.data_hora_evento?Date.parse(de.data_hora_evento):Date.parse(`${de.data}T00:00:00Z`);!isNaN(ct)&&Date.now()-ct>=1728e5&&Ce(se.id,"Demanda estagnada h 48h")}const ce=se.designer||"",Me=Y[ce]||0,rt=Math.min(100,Math.round(Me/4*100));rt>=100?Ce(se.id,`Capacidade 100% para ${ce}  Risco mximo`):rt>=85&&Ce(se.id,`Designer ${ce} est com ${rt}% da capacidade utilizada. Risco de atraso.`),(se.revisoes||0)>=2&&Ce(se.id,"Retrabalho acima do limite")});const ae=n.filter(se=>Dr(se.status)),fe=ae.filter(se=>se.prazo&&se.dataConclusao&&se.dataConclusao<=se.prazo).length,te=ae.filter(se=>se.prazo&&se.dataConclusao).length;Math.round(100*(fe/Math.max(1,te)))<80&&K.forEach(se=>Ce(se.id,"SLA geral abaixo de 80%"))},6e4);return()=>clearInterval(Z)},[n]);const Se=async({designer:Z,tipoMidia:K,titulo:Y,link:ae,arquivoNome:fe,dataSolic:te,dataCriacao:me,dataFeedback:se,plataforma:de,arquivos:ce,descricao:Me,prazo:rt,comentarios:ct,historico:Et,origem:en,campanha:Dt})=>{const Tt=async()=>{if(ue){try{K&&await ns(ft(ue,"cad_tipos",String(K)),{name:K},{merge:!0})}catch{}try{de&&await ns(ft(ue,"cad_plataformas",String(de)),{name:de},{merge:!0})}catch{}try{en&&await ns(ft(ue,"cad_origens",String(en)),{name:en},{merge:!0})}catch{}try{if(Et&&Array.isArray(Et)){const gt=Et[0],It=(gt==null?void 0:gt.para)||(gt==null?void 0:gt.de)||"Aberta";It&&await ns(ft(ue,"cad_status",String(It)),{name:It},{merge:!0})}}catch{}}};if(I==="edit"&&D){const gt={...D,designer:Z,tipoMidia:K,titulo:Y,link:ae,descricao:Me,comentarios:ct??D.comentarios,historico:Et??D.historico,arquivos:ce&&ce.length?ce:D.arquivos,arquivoNome:fe||D.arquivoNome,dataSolicitacao:te||D.dataSolicitacao,dataCriacao:me||D.dataCriacao,dataFeedback:se||D.dataFeedback,plataforma:de,prazo:rt,origem:en,campanha:Dt},It={...gt,fxSavedAt:Date.now()};if(r(on=>on.map(Tr=>Tr.id===D.id?It:Tr)),ue)try{await Js(ft(ue,"demandas",String(D.id)),gt)}catch{}await Tt()}else{const gt=_n(),It=new Date().toISOString(),on={tipo:"status",autor:Ge,data:gt,data_hora_evento:It,status_anterior:"",status_novo:"Aberta",duracao_em_minutos:null,responsavel:Ge,id_demanda:null,de:"",para:"Aberta"},Tr=ff(n,{designer:Z,tipoMidia:K,plataforma:de,origem:en}),tr={designer:Z,tipoMidia:K,titulo:Y,link:ae,descricao:Me,comentarios:[],historico:[on],arquivos:ce||[],arquivoNome:fe,plataforma:de,origem:en,campanha:Dt,dataSolicitacao:te,dataCriacao:gt,dataFeedback:void 0,status:"Aberta",prazo:rt,tempoProducaoMs:0,startedAt:null,finishedAt:null,revisoes:0,createdBy:Ge,previsaoIA:Tr,slaStartAt:null,slaStopAt:null,slaPauseMs:0,pauseStartedAt:null,slaNetMs:0,slaOk:null,leadTotalMin:0,leadPorFase:{}};if(ue)try{const nr=await Wl(an(ue,"demandas"),{...tr,createdAt:iy()}),Pn={...on,id_demanda:nr.id};try{await Wl(an(ue,"historico_status"),Pn)}catch{}}catch{}await Tt()}A(!1)},Fn=async()=>{if(window.confirm("Confirmar: apagar TODAS as demandas e limpar relatrios?")){r([]);try{w({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""})}catch{}if(ue)try{const Z=await Bd(an(ue,"demandas")),K=[];Z.forEach(Y=>K.push(eu(ft(ue,"demandas",Y.id)))),K.length&&await Promise.all(K)}catch{}}};return l.jsxs("div",{className:"layout",children:[t?l.jsx(JN,{route:f,setRoute:m,allowedRoutes:Nt}):null,l.jsx("div",{className:`content ${t?"":"no-sidebar"} page`,children:l.jsxs("div",{className:"app",children:[t?l.jsx(BN,{onNew:L,view:o,setView:c,showNew:!!t,user:t,onLogout:Zn,setRoute:m}):null,!t&&l.jsx(HN,{onLogin:Ln}),t&&f==="dashboard"&&Nt.includes("dashboard")&&l.jsx(nj,{demandas:n,items:Vn,designers:xn,setView:c,onEdit:ne,onStatus:pe,cadStatus:C,onDelete:ve,onDuplicate:we,compact:u,calRef:He,setCalRef:wr,loading:s}),t&&f==="demandas"&&Nt.includes("demandas")&&l.jsxs("div",{className:"demandas-layout",children:[l.jsx("div",{className:"sidebar-col",children:l.jsx(tj,{filtros:g,setFiltros:w,designers:Bt,showSearch:!1,statusCounts:_r})}),l.jsxs("div",{className:"content-col",children:[l.jsxs("div",{className:"top-search",children:[l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:g.q||"",onChange:Z=>w(K=>({...K,q:Z.target.value}))}),l.jsxs("button",{className:"primary",onClick:L,disabled:!E,children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto"},children:l.jsx($N,{view:o,setView:c})})]}),o==="table"&&l.jsx("div",{className:"table-scroll",children:l.jsx(GN,{items:Ze.slice(0,Re),onEdit:ne,onStatus:pe,cadStatus:C,onDelete:ve,onDuplicate:we,hasMore:Ze.length>Re,showMore:()=>$e(Z=>Math.min(Z+10,Ze.length)),canCollapse:Re>10,showLess:()=>$e(10),shown:Math.min(Re,Ze.length),total:Ze.length,compact:u,canEdit:!!t,loading:s})}),o==="calendar"&&l.jsx(KN,{items:Ze,refDate:He}),l.jsx(QN,{open:U,mode:I,onClose:()=>A(!1),onSubmit:Se,initial:D,cadTipos:j,designers:Bt,cadPlataformas:tt,onDelete:ve,userLabel:Ge,canDelete:N,onAddComment:ge,cadOrigens:nt,currentUser:(t==null?void 0:t.username)||""}),l.jsx(qN,{open:P,filtros:g,setFiltros:w,designers:Bt,onClose:()=>b(!1),cadStatus:C,cadTipos:j,origens:nt,campanhas:Fe})]})]}),t&&f==="config"&&Nt.includes("config")&&l.jsx(ej,{themeVars:V,setThemeVars:v,onReset:Fn,appSettings:y,setAppSettings:T}),t&&f==="cadastros"&&Nt.includes("cadastros")&&l.jsx(YN,{cadStatus:C,setCadStatus:R,cadTipos:j,setCadTipos:x,cadPlataformas:tt,setCadPlataformas:xt,cadOrigens:nt,setCadOrigens:W,cadStatusColors:B,setCadStatusColors:H}),t&&f==="relatorios"&&Nt.includes("relatorios")&&l.jsx(rj,{demandas:n,items:Ze,designers:Bt,filtros:g,setFiltros:w,loading:s}),t&&f==="usuarios"&&Nt.includes("usuarios")&&l.jsx(ZN,{role:Pe})]})})]})}function JN({route:t,setRoute:e,allowedRoutes:n}){return l.jsx("aside",{className:"sidebar",children:l.jsx("nav",{children:l.jsx("ul",{className:"nav-list",children:n.map(r=>l.jsx("li",{children:l.jsxs("a",{href:"#",className:`nav-link ${t===r?"active":""}`,onClick:s=>{s.preventDefault(),e(r)},children:[l.jsx("span",{className:"nav-ico",children:r==="dashboard"?l.jsx(be,{name:"dashboard"}):r==="demandas"?l.jsx(be,{name:"demandas"}):r==="config"?l.jsx(be,{name:"config"}):r==="cadastros"?l.jsx(be,{name:"cadastros"}):r==="relatorios"?l.jsx(be,{name:"relatorios"}):l.jsx(be,{name:"usuarios"})}),l.jsx("span",{children:r==="dashboard"?"Dashboard":r==="demandas"?"Demandas":r==="config"?"Configuraes":r==="cadastros"?"Cadastros":r==="relatorios"?"Relatrios":"Usurios"})]})},r))})})})}function ZN({users:t,onCreate:e,onDelete:n,onUpdate:r,role:s}){const[i,o]=Q.useState(""),[c,u]=Q.useState(""),[d,f]=Q.useState(""),[m,g]=Q.useState(""),[w,P]=Q.useState("comum"),[b,U]=Q.useState("Designer"),[A,I]=Q.useState([]),S=Q.useMemo(()=>Ay?MN(Ay):null,[]),[D,k]=Q.useState({});Q.useEffect(()=>{if(ue){const W=Gs(an(ue,"usuarios"),$=>{const O=[];$.forEach(B=>O.push({id:B.id,...B.data()})),I(O)});return()=>{try{W()}catch{}}}else I([])},[]);const[V,v]=Q.useState({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),[y,T]=Q.useState({criar:!0,excluir:!0,visualizar:!0}),C=(W,$)=>W(O=>({...O,[$]:!O[$]})),R=async()=>{const W=i.trim(),$=m.trim()||`${W}@betaki.bet.br`;if(!W||!d)return;const O={username:W,name:c||W,role:w,cargo:b,pages:V,actions:y,email:$};if(ue)try{try{await eT(or,$,d)}catch(B){if((B==null?void 0:B.code)!=="auth/email-already-in-use")throw B}await ns(ft(ue,"usuarios",W),O)}catch{}o(""),u(""),f(""),g(""),P("comum"),U("Designer"),v({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),T({criar:!0,excluir:!0,visualizar:!0})},j=async W=>{if((W.username||W.id)!=="admin"&&ue)try{await eu(ft(ue,"usuarios",W.username||W.id)),I($=>$.filter(O=>(O.username||O.id)!==(W.username||W.id)))}catch{}},x=async W=>{const $=String(D[W.username||W.id]||"").trim();if($&&S)try{await LN(S,"updateUserPassword")({username:W.username||W.id,password:$,email:W.email||void 0}),k(B=>({...B,[W.username||W.id]:""}))}catch{}},tt=async(W,$)=>{const O=W.pages||{},B={pages:{...O,[$]:!O[$]}};if(ue)try{await Js(ft(ue,"usuarios",W.username||W.id),B),I(H=>H.map(J=>J.username===W.username||J.id===W.id?{...J,...B}:J))}catch{}},xt=async(W,$)=>{const O=W.actions||{},B={actions:{...O,[$]:!O[$]}};if(ue)try{await Js(ft(ue,"usuarios",W.username||W.id),B),I(H=>H.map(J=>J.username===W.username||J.id===W.id?{...J,...B}:J))}catch{}},nt=async(W,$)=>{const O={cargo:$};if(ue)try{await Js(ft(ue,"usuarios",W.username||W.id),O),I(B=>B.map(H=>H.username===W.username||H.id===W.id?{...H,...O}:H))}catch{}};return l.jsxs("div",{className:"panel users-panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Usurios"})}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Usurio"}),l.jsx("input",{value:i,onChange:W=>o(W.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Nome"}),l.jsx("input",{value:c,onChange:W=>u(W.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Senha"}),l.jsx("input",{type:"password",value:d,onChange:W=>f(W.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",value:m,onChange:W=>g(W.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Perfil"}),l.jsxs("select",{value:w,onChange:W=>P(W.target.value),children:[l.jsx("option",{value:"comum",children:"Comum"}),l.jsx("option",{value:"gerente",children:"Gerente"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Cargo"}),l.jsxs("select",{value:b,onChange:W=>U(W.target.value),children:[l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Pginas"}),l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(W=>l.jsxs("button",{className:`btn-md ${V[W]?"active":""}`,type:"button",onClick:()=>C(v,W),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:W==="dashboard"?"dashboard":W==="demandas"?"demandas":W==="config"?"config":W==="cadastros"?"cadastros":W==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:W==="dashboard"?"Dashboard":W==="demandas"?"Demandas":W==="config"?"Configuraes":W==="cadastros"?"Cadastros":W==="relatorios"?"Relatrios":"Usurios"})]},W))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Aes"}),l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([W,$,O])=>l.jsxs("button",{className:`btn-md ${y[W]?"active":""}`,type:"button",onClick:()=>C(T,W),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:$})}),l.jsx("span",{children:O})]},W))})]}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"primary",type:"button",onClick:R,children:"Criar usurio"})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usurio"}),l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Perfil"}),l.jsx("th",{children:"Cargo"}),l.jsx("th",{children:"Pginas"}),l.jsx("th",{children:"Aes"}),l.jsx("th",{children:"Senha"}),l.jsx("th",{children:"Gerenciar"})]})}),l.jsx("tbody",{children:(A||[]).map(W=>l.jsxs("tr",{children:[l.jsx("td",{children:W.username}),l.jsx("td",{children:W.name||W.username}),l.jsx("td",{children:W.role||"comum"}),l.jsx("td",{children:l.jsxs("select",{value:W.cargo||"",onChange:$=>nt(W,$.target.value),children:[l.jsx("option",{value:"",children:"Selecione"}),l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map($=>{var O;return l.jsxs("button",{className:`btn-md ${((O=W.pages)==null?void 0:O[$])===!0?"active":""}`,type:"button",onClick:()=>tt(W,$),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:$==="dashboard"?"dashboard":$==="demandas"?"demandas":$==="config"?"config":$==="cadastros"?"cadastros":$==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:$==="dashboard"?"Dashboard":$==="demandas"?"Demandas":$==="config"?"Configuraes":$==="cadastros"?"Cadastros":$==="relatorios"?"Relatrios":"Usurios"})]},$)})})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([$,O,B])=>{var H;return l.jsxs("button",{className:`btn-md ${((H=W.actions)==null?void 0:H[$])===!0?"active":""}`,type:"button",onClick:()=>xt(W,$),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:O})}),l.jsx("span",{children:B})]},$)})})}),l.jsx("td",{children:l.jsxs("div",{className:"form-row",children:[l.jsx("input",{type:"password",placeholder:"Nova senha",value:D[W.username||W.id]||"",onChange:$=>k(O=>({...O,[W.username||W.id]:$.target.value}))}),l.jsx("button",{className:"primary",type:"button",onClick:()=>x(W),children:"Salvar"})]})}),l.jsx("td",{children:l.jsxs("button",{className:"icon",onClick:()=>j(W),disabled:W.username==="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"trash"})}),l.jsx("span",{children:"Excluir"})]})})]},W.username))})]})]})}function ej({themeVars:t,setThemeVars:e,onReset:n,appSettings:r,setAppSettings:s}){const[i,o]=Q.useState(t||{}),[c,u]=Q.useState(""),[d,f]=Q.useState("");Q.useEffect(()=>{o(t||{})},[t]);const m=v=>/^#[0-9a-fA-F]{6}$/.test(v||""),g=v=>/^#[0-9a-fA-F]{8}$/.test(v||""),w=v=>/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0|1|0?\.\d+)\)$/.exec(v||""),P=v=>Math.max(0,Math.min(255,v|0)).toString(16).padStart(2,"0"),b=v=>({r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16)}),U=v=>{if(m(v))return{fmt:"hex6",base:v,a:1};if(g(v))return{fmt:"hex8",base:"#"+v.slice(1,7),a:parseInt(v.slice(7,9),16)/255};const y=w(v);return y?{fmt:"rgba",base:"#"+P(+y[1])+P(+y[2])+P(+y[3]),a:parseFloat(y[4])}:{fmt:"other",base:v,a:1}},A=(v,y,T)=>{const C=v==="hover"?"rgba":v==="border"||v==="btnBorder"?"hex8":"hex6";if(C==="hex6"||T>=1)return y;if(C==="hex8")return y+P(Math.round(T*255));const{r:R,g:j,b:x}=b(y);return`rgba(${R},${j},${x},${T})`},I=(v,y)=>{const T={...i,[v]:y};o(T),e(T)},S=(v,y)=>{const T=U(i[v]||""),C=Math.max(0,Math.min(100,Number(y)||0))/100,R=A(v,T.base,C);I(v,R)},D=()=>{if(!c)return;const v={...i,[c]:d||""};o(v),e(v),u(""),f("")},k=()=>e(mT),V=[{title:"Base",keys:["bg","panel","accent"]},{title:"Texto",keys:["text","muted"]},{title:"Traado",keys:["border"]},{title:"Botes",keys:["btnBg","btnText","btnHoverBg","btnBorder"]},{title:"Hover/Efeitos",keys:["hover","shadow"]},{title:"Extras",keys:["green","yellow","red","chart"]}];return l.jsxs("div",{className:"panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Tema"})}),l.jsxs("div",{className:"config-grid",children:[V.map(v=>l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"title",children:v.title}),v.keys.map(y=>{const T=i[y]||"",C=U(T),R=C.fmt!=="other",j=y==="hover"||y==="border"||y==="btnBorder";return l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:y}),l.jsxs("div",{className:"color-row",children:[R?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"color",value:C.base,onChange:x=>I(y,A(y,x.target.value,C.a))}),j&&l.jsx("input",{className:"alpha",type:"range",min:"0",max:"100",step:"1",value:Math.round(C.a*100),onChange:x=>S(y,x.target.value),title:`Alpha ${Math.round(C.a*100)}%`})]}):l.jsx("input",{value:T,onChange:x=>I(y,x.target.value)}),l.jsx("div",{className:"swatch",style:{background:T}})]})]},y)})]},v.title)),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Adicionar varivel"}),l.jsxs("div",{className:"color-row",children:[l.jsx("input",{placeholder:"nome",value:c,onChange:v=>u(v.target.value)}),l.jsx("input",{placeholder:"valor",value:d,onChange:v=>f(v.target.value)}),l.jsx("button",{className:"primary",type:"button",onClick:D,children:"Adicionar"})]})]}),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Integraes"}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Autopost via mLabs"}),l.jsx("input",{type:"checkbox",checked:!!r.autoPostMLabs,onChange:v=>s(y=>({...y,autoPostMLabs:v.target.checked}))})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"danger",type:"button",onClick:n,children:"Resetar sistema"}),l.jsx("button",{className:"primary",type:"button",onClick:k,children:"Restaurar padro"})]})]})}function tj({filtros:t,setFiltros:e,designers:n,showSearch:r,statusCounts:s}){const[i,o]=Q.useState("today");Q.useEffect(()=>{const w=new Date,P=k=>{const V=v=>String(v).padStart(2,"0");return`${k.getFullYear()}-${V(k.getMonth()+1)}-${V(k.getDate())}`},b=k=>{const V=new Date(k),v=V.getDay()||7;return V.setDate(V.getDate()-(v-1)),new Date(V.getFullYear(),V.getMonth(),V.getDate())},U=k=>{const V=b(k),v=new Date(V);return v.setDate(v.getDate()+6),v},A=new Date(w.getFullYear(),w.getMonth(),1),I=new Date(w.getFullYear(),w.getMonth()+1,0),S=new Date(w.getFullYear(),w.getMonth()-1,1),D=new Date(w.getFullYear(),w.getMonth(),0);if(i==="today"&&e(k=>({...k,sIni:P(w),sFim:P(w),cIni:"",cFim:""})),i==="week"){const k=b(w),V=U(w);e(v=>({...v,sIni:P(k),sFim:P(V),cIni:"",cFim:""}))}if(i==="month"&&e(k=>({...k,sIni:P(A),sFim:P(I),cIni:"",cFim:""})),i==="lastmonth"&&e(k=>({...k,sIni:P(S),sFim:P(D),cIni:"",cFim:""})),i==="last30"){const k=new Date(w);k.setDate(k.getDate()-29),e(V=>({...V,sIni:P(k),sFim:P(w),cIni:"",cFim:""}))}},[i]);const c=w=>e(P=>({...P,designer:w==="Todos"?"":w})),u=["Hoje","Semana","Ms","Ms passado","ltimos 30 dias"],d=w=>w==="Hoje"?"today":w==="Semana"?"week":w==="Ms"?"month":w==="Ms passado"?"lastmonth":"last30",f=["Todos",...n],m=w=>w==="Pendente"?"gray":w==="Em produo"?"yellow":w==="Revisar"?"red":w==="Aguardando Feedback"?"purple":w==="Aprovada"?"green-approve":w==="Concluida"||w==="Concluda"?"green-dark":"",g=w=>w==="Pendente"?"":w==="Em produo"?"":w==="Aguardando Feedback"?"":w==="Revisar"?"":w==="Aprovada"?"":w==="Concluida"||w==="Concluda"?"":"";return l.jsxs("div",{className:"filterbar",children:[r!==!1&&l.jsx("div",{className:"seg",style:{flex:1,minWidth:220},children:l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:t.q||"",onChange:w=>e(P=>({...P,q:w.target.value}))})}),l.jsxs("div",{className:"filters-row",children:[l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Perodo"}),u.map(w=>l.jsxs("button",{className:`btn-md ${i===d(w)?"active":""}`,onClick:()=>o(d(w)),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"calendar"})}),l.jsx("span",{children:w})]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Designer"}),f.map(w=>l.jsxs("button",{className:`btn-md ${(t.designer||"")===w||w==="Todos"&&!t.designer?"active":""}`,onClick:()=>c(w),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"usuarios"})}),l.jsx("span",{children:w})]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Status"}),Ha.map(w=>l.jsxs("button",{className:`btn-md ${m(w)} ${(t.status||"")===w?"active":""}`,onClick:()=>e(P=>({...P,status:P.status===w?void 0:w})),children:[l.jsx("span",{className:"emoji",children:g(w)}),l.jsx("span",{children:w}),(s==null?void 0:s[w])>0?l.jsx("span",{className:"alert-count",children:s[w]}):null]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Data"}),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"calendar"})}),l.jsx("input",{type:"date",value:t.cIni||"",onChange:w=>e(P=>({...P,cIni:w.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:t.cFim||"",onChange:w=>e(P=>({...P,cFim:w.target.value}))})]})]})]})]})}function nj({demandas:t,items:e,designers:n,setView:r,onEdit:s,onStatus:i,cadStatus:o,onDelete:c,onDuplicate:u,compact:d,calRef:f,setCalRef:m,loading:g}){const w=e.length,P=e.filter(O=>Dr(O.status)),b=P.length,U=e.filter(O=>!Dr(O.status)).length,A=e.reduce((O,B)=>O+(B.revisoes||0),0),I=Math.round(100*(e.filter(O=>(O.revisoes||0)>0).length/Math.max(1,w))),S=(()=>{const O=P.filter(H=>H.prazo&&H.dataConclusao&&H.dataConclusao<=H.prazo).length,B=P.filter(H=>H.prazo&&H.dataConclusao).length;return Math.round(100*(O/Math.max(1,B)))})(),D=(()=>{const O=oe=>{if(!oe)return null;const[Te,Fe,Pe]=String(oe).split("-").map(Number);return new Date(Te,Fe-1,Pe)},B=e.map(oe=>O(oe.dataCriacao||oe.dataSolicitacao)).filter(Boolean).sort((oe,Te)=>oe-Te);if(!B.length)return 0;const H=B[0],J=B[B.length-1];return Math.max(1,Math.round((J-H)/864e5)+1)})(),k=4,V=n.length*k*D,v=(()=>{const O=V;return O?Math.round(100*(b/O)):0})(),y=e.filter(O=>cm(O.status)).length,T=e.filter(O=>lm(O.status)).length,C=(()=>{const O={};P.forEach(H=>{const J=H.designer||"";O[J]=(O[J]||0)+1});const B=k*D;return n.map(H=>{const J=O[H]||0,oe=B?Math.round(100*(J/B)):0,Te=B===0||oe<=90?"Verde":oe<=110?"Amarelo":"Vermelho";return{designer:H,ideal:B,real:J,used:oe,status:Te}})})(),R=(()=>{const O={};return e.forEach(B=>{if(!Dr(B.status)){const H=B.designer||"";O[H]=(O[H]||0)+1}}),O})(),j=(()=>{const O=[];return C.forEach(H=>{H.used>=110?O.push(`Designer ${H.designer} sobrecarregado (${H.used}%)  risco de atraso`):H.used>=90&&O.push(`Designer ${H.designer} com carga alta (${H.used}%)  monitorar prazos`);const J=R[H.designer]||0;J>=k*2&&O.push(`Designer ${H.designer} com ${J} demandas ativas  priorizar distribuio`)}),e.filter(H=>{if(Dr(H.status)||!H.prazo)return!1;const[J,oe,Te]=String(H.prazo).split("-").map(Number),Fe=new Date(J,(oe||1)-1,Te||1),Pe=new Date;return Pe.setHours(0,0,0,0),Fe.setHours(0,0,0,0),Fe-Pe<=864e5}).slice(0,5).forEach(H=>O.push(`Prazo crtico: ${H.titulo} (${H.designer||""})`)),O})(),x=(()=>{const O=new Map;return P.forEach(B=>O.set(B.designer||"",(O.get(B.designer||"")||0)+1)),Array.from(O.entries()).map(([B,H])=>({designer:B,qty:H}))})(),tt=(()=>{const O=(H,J)=>{const oe=Te=>{const[Fe,Pe,Be]=String(Te).split("-").map(Number);return new Date(Fe,Pe-1,Be)};return!H||!J?null:Math.max(0,Math.round((oe(J)-oe(H))/864e5))},B={};return e.forEach(H=>{if(H.dataConclusao){const J=H.designer||"",oe=O(H.dataCriacao||H.dataSolicitacao,H.dataConclusao);if(oe!=null){const Te=B[J]||{cnt:0,sum:0,min:9999,max:0};B[J]={cnt:Te.cnt+1,sum:Te.sum+oe,min:Math.min(Te.min,oe),max:Math.max(Te.max,oe)}}}}),Object.entries(B).map(([H,J])=>({designer:H,media:J.sum/J.cnt||0}))})(),xt=(()=>{const O={};return e.forEach(B=>{if(B.prazo&&B.dataConclusao){const H=B.designer||"",J=B.dataConclusao<=B.prazo,oe=O[H]||{ok:0,total:0};O[H]={ok:oe.ok+(J?1:0),total:oe.total+1}}}),Object.entries(O).map(([B,H])=>({designer:B,pct:Math.round(100*(H.ok/(H.total||1)))}))})(),nt=(()=>{const O={};return e.forEach(B=>{const H=B.designer||"",J=B.revisoes||0,oe=O[H]||{rTot:0,cnt:0};O[H]={rTot:oe.rTot+J,cnt:oe.cnt+1}}),Object.entries(O).map(([B,H])=>({designer:B,porPeca:+(H.rTot/(H.cnt||1)).toFixed(2)}))})(),W=(()=>{const O=x.reduce((Re,{designer:$e,qty:He})=>(Re[$e]=He,Re),{}),B=xt.reduce((Re,{designer:$e,pct:He})=>(Re[$e]=He,Re),{}),H=tt.reduce((Re,{designer:$e,media:He})=>(Re[$e]=He,Re),{}),J=nt.reduce((Re,{designer:$e,porPeca:He})=>(Re[$e]=He,Re),{}),oe=Array.from(new Set([...Object.keys(O),...Object.keys(B),...Object.keys(H),...Object.keys(J)])).filter(Boolean),Te=(Re,$e,He)=>He===$e?1:Math.max(0,Math.min(1,(Re-$e)/(He-$e))),Fe=Math.max(...Object.values(O||{_:-1}),0),Pe=Math.min(...Object.values(O||{_:-1}),0),Be=100,Vn=0,xn=Math.max(...Object.values(H||{_:-1}),0),zt=Math.min(...Object.values(H||{_:-1}),0),Bt=Math.max(...Object.values(J||{_:-1}),0),Ze=Math.min(...Object.values(J||{_:-1}),0);return oe.map(Re=>{const $e=Te(O[Re]||0,Pe,Fe),He=Te(B[Re]||0,Vn,Be),wr=1-Te(H[Re]||0,zt,xn),Gr=1-Te(J[Re]||0,Ze,Bt),Er=Math.round(($e*.4+He*.3+wr*.2+Gr*.1)*100);return{designer:Re,score:Er,sla:B[Re]||0,retrab:J[Re]||0}}).sort((Re,$e)=>$e.score-Re.score).slice(0,5)})(),$=(()=>{const O=Array.from({length:11},(H,J)=>J+8),B={};return n.forEach(H=>B[H]=O.map(J=>0)),e.forEach(H=>{if(H.startedAt)try{const oe=new Date(H.startedAt).getHours();if(oe>=8&&oe<=18){const Te=H.designer||"",Fe=oe-8;B[Te]&&B[Te][Fe]++}}catch{}}),{horas:O,per:B}})();return g?l.jsxs("div",{className:"dashboard",children:[l.jsx("div",{className:"exec-summary",children:Array.from({length:5}).map((O,B)=>l.jsx("div",{className:"skeleton row"},B))}),l.jsx("div",{className:"section-grid",children:Array.from({length:2}).map((O,B)=>l.jsx("div",{className:"skeleton card",style:{height:160}},B))})]}):l.jsxs("div",{className:"dashboard",children:[l.jsxs("div",{className:"exec-summary",children:[l.jsx("div",{className:"exec-title",children:"RESUMO EXECUTIVO DO PERODO"}),l.jsxs("div",{className:"exec-grid",children:[l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Produo total"}),l.jsx("div",{className:"exec-value",children:b})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"SLA geral"}),l.jsxs("div",{className:"exec-value",style:{color:S>=90?"#BCD200":S>=70?"#FFE55C":"#FF5E5E"},children:[S,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"% retrabalho"}),l.jsxs("div",{className:"exec-value",children:[I,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Backlog atual"}),l.jsx("div",{className:"exec-value",children:U})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Capacidade usada"}),l.jsxs("div",{className:"exec-value",children:[v,"%"]}),l.jsx("div",{className:"progress",children:l.jsx("div",{className:"progress-fill",style:{width:`${v}%`,background:"#BCD200"}})})]})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PRODUO"}),l.jsxs("div",{className:"badge-grid",children:[l.jsxs("div",{className:"badge blue",children:[l.jsx("div",{children:"Criadas"}),l.jsx("div",{children:w})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"Concludas"}),l.jsx("div",{children:b})]}),l.jsxs("div",{className:"badge yellow",children:[l.jsx("div",{children:"Em produo"}),l.jsx("div",{children:y})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"Pendentes"}),l.jsx("div",{children:T})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"QUALIDADE"}),l.jsxs("div",{className:"badge-group",children:[l.jsxs("div",{className:"badge purple",children:[l.jsx("div",{children:"Revises"}),l.jsx("div",{children:A})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"% Retrabalho"}),l.jsxs("div",{children:[I,"%"]})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"SLA"}),l.jsxs("div",{children:[S,"%"]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PESSOAS"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Score"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"%Retrab"})]})}),l.jsx("tbody",{children:W.map((O,B)=>l.jsxs("tr",{children:[l.jsx("td",{children:B+1}),l.jsx("td",{children:O.designer}),l.jsx("td",{children:O.score}),l.jsxs("td",{children:[O.sla,"%"]}),l.jsx("td",{children:Math.round((O.retrab||0)*100)/100})]},O.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"OPERAO"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Capacidade ideal"}),l.jsx("th",{children:"Produo real"}),l.jsx("th",{children:"Capacidade usada"}),l.jsx("th",{children:"Status"})]})}),l.jsx("tbody",{children:C.map(O=>l.jsxs("tr",{children:[l.jsx("td",{children:O.designer}),l.jsx("td",{children:O.ideal}),l.jsx("td",{children:O.real}),l.jsxs("td",{children:[O.used,"%"]}),l.jsx("td",{style:{color:O.status==="Verde"?"#00C58E":O.status==="Amarelo"?"#FFE55C":"#FF5E5E"},children:O.status})]},O.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"ASSISTENTE IA"}),l.jsx("div",{className:"insights-grid",children:j.map((O,B)=>l.jsxs("div",{className:"insight-card",style:{opacity:0,animation:"pageIn .6s forwards"},children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:O})]},B))})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"HEATMAP DE PRODUTIVIDADE POR HORRIO"}),l.jsxs("div",{className:"heatmap",children:[l.jsxs("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:[l.jsx("div",{className:"chart-label",style:{width:120}}),$.horas.map(O=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(O).padStart(2,"0"),"h"]},O))]}),n.map(O=>l.jsxs("div",{className:"heat-row",style:{alignItems:"center"},children:[l.jsx("div",{className:"chart-label",style:{width:120},children:O}),$.horas.map((B,H)=>{const J=($.per[O]||[])[H]||0,oe=J===0?"#222":J<2?"#4DA3FF33":"#4DA3FF";return l.jsx("div",{className:"heat-cell",style:{background:oe,width:24,height:24},title:`${O} ${String(B).padStart(2,"0")}h: ${J}`},B)})]},O))]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"LINHA DO TEMPO DE PRODUO MENSAL"}),l.jsx("div",{className:"chips",children:x.map(({designer:O,qty:B})=>l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[l.jsx("span",{className:"chip",children:O}),l.jsx(zN,{series:[Math.max(1,B-1),B,B+1],color:"#4DA3FF"})]},O))})]})]})]})}function rj({demandas:t,items:e,designers:n,filtros:r,setFiltros:s,loading:i}){var Nt,Zn,Ln;const o=["Hoje","Semana","Ms","Ms passado"],c=E=>E==="Hoje"?"today":E==="Semana"?"week":E==="Ms"?"month":"lastmonth",[u,d]=Q.useState("month"),[f,m]=Q.useState(n[0]||""),[g,w]=Q.useState(n[1]||"");Q.useEffect(()=>{const E=new Date,N=ve=>{const Ce=Se=>String(Se).padStart(2,"0");return`${ve.getFullYear()}-${Ce(ve.getMonth()+1)}-${Ce(ve.getDate())}`},F=ve=>{const Ce=new Date(ve),Se=Ce.getDay()||7;return Ce.setDate(Ce.getDate()-(Se-1)),new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate())},L=ve=>{const Ce=F(ve),Se=new Date(Ce);return Se.setDate(Se.getDate()+6),Se},ne=new Date(E.getFullYear(),E.getMonth(),1),we=new Date(E.getFullYear(),E.getMonth()+1,0),pe=new Date(E.getFullYear(),E.getMonth()-1,1),ge=new Date(E.getFullYear(),E.getMonth(),0);if(u==="today"&&s(ve=>({...ve,cIni:N(E),cFim:N(E)})),u==="week"){const ve=F(E),Ce=L(E);s(Se=>({...Se,cIni:N(ve),cFim:N(Ce)}))}u==="month"&&s(ve=>({...ve,cIni:N(ne),cFim:N(we)})),u==="lastmonth"&&s(ve=>({...ve,cIni:N(pe),cFim:N(ge)}))},[u]);const P=["Todos",...n],b=E=>s(N=>({...N,designer:E==="Todos"?"":E})),U=["Todos",...Array.from(new Set(t.map(E=>E.tipoMidia).filter(Boolean)))],A=E=>s(N=>({...N,tipoMidia:E==="Todos"?"":E})),I=["Todos",...am],S=E=>s(N=>({...N,origem:E==="Todos"?"":E})),D=["Todos",...Array.from(new Set(t.map(E=>E.campanha).filter(Boolean)))],k=E=>s(N=>({...N,campanha:E==="Todos"?"":E})),V=["Todos",...Ha],v=E=>s(N=>({...N,status:E==="Todos"?"":E})),y=(()=>{const E=L=>{if(!L)return null;const[ne,we,pe]=L.split("-").map(Number);return new Date(ne,we-1,pe)},N=E(r.cIni),F=E(r.cFim);return!N||!F?1:Math.max(1,Math.round((F-N)/864e5)+1)})(),T=e.filter(E=>Dr(E.status));e.filter(E=>lm(E.status)),e.filter(E=>cm(E.status)),e.reduce((E,N)=>E+(N.revisoes||0),0),T.length/y;const C=e.filter(E=>!Dr(E.status)),R=E=>{if(!E)return null;const[N,F,L]=String(E).split("-").map(Number),ne=new Date(N,(F||1)-1,L||1),we=new Date;return we.setHours(0,0,0,0),ne.setHours(0,0,0,0),Math.round((ne-we)/864e5)},j=C.filter(E=>{const N=R(E.prazo);return N!=null&&N<=2}),x=(()=>{const E=C.map(F=>R(F.prazo)).filter(F=>F!=null);return+(E.reduce((F,L)=>F+L,0)/(E.length||1)).toFixed(1)})(),xt=(()=>{const E=C.filter(F=>{const L=R(F.prazo);return L!=null&&L<0}).length,N=C.length||1;return Math.round(100*(E/N))})()>30?"Acumulando atraso":"Saudvel",nt=(E,N)=>{const F=L=>{const[ne,we,pe]=String(L).split("-").map(Number);return new Date(ne,we-1,pe)};return!E||!N?null:Math.max(0,Math.round((F(N)-F(E))/864e5))},W=T.map(E=>nt(E.dataCriacao||E.dataSolicitacao,E.dataConclusao)).filter(E=>E!=null),$=+(W.reduce((E,N)=>E+N,0)/(W.length||1)).toFixed(1),O=(()=>{const E={};return T.forEach(N=>{const F=N.tipoMidia||"Outro",L=nt(N.dataCriacao||N.dataSolicitacao,N.dataConclusao);if(L!=null){const ne=E[F]||{cnt:0,sum:0};E[F]={cnt:ne.cnt+1,sum:ne.sum+L}}}),Object.entries(E).map(([N,F])=>({tipo:N,media:+(F.sum/F.cnt).toFixed(1)}))})(),B=(()=>{const E={};return T.forEach(N=>{const F=N.designer||"",L=nt(N.dataCriacao||N.dataSolicitacao,N.dataConclusao);if(L!=null){const ne=E[F]||{cnt:0,sum:0};E[F]={cnt:ne.cnt+1,sum:ne.sum+L}}}),Object.entries(E).map(([N,F])=>({designer:N,media:+(F.sum/F.cnt).toFixed(1)}))})(),H=new Date,J=new Date(H.getFullYear(),H.getMonth()-1,1),oe=(E,N)=>{if(!E)return!1;const[F,L,ne]=E.split("-").map(Number),we=new Date(F,L-1,ne);return we.getMonth()===N.getMonth()&&we.getFullYear()===N.getFullYear()},Te=T.filter(E=>oe(E.dataConclusao,H)).map(E=>nt(E.dataCriacao||E.dataSolicitacao,E.dataConclusao)).filter(E=>E!=null),Fe=T.filter(E=>oe(E.dataConclusao,J)).map(E=>nt(E.dataCriacao||E.dataSolicitacao,E.dataConclusao)).filter(E=>E!=null),Pe=+(Te.reduce((E,N)=>E+N,0)/(Te.length||1)).toFixed(1),Be=+(Fe.reduce((E,N)=>E+N,0)/(Fe.length||1)).toFixed(1),Vn=E=>{const N=T.filter(F=>(F.designer||"")===E).map(F=>nt(F.dataCriacao||F.dataSolicitacao,F.dataConclusao)).filter(F=>F!=null);return+(N.reduce((F,L)=>F+L,0)/(N.length||1)).toFixed(1)},xn=(()=>{const E=T.map(ne=>ne.revisoes||0),N=E.length||1,F=ne=>Math.round(100*(E.filter(we=>we===ne).length/N)),L=ne=>Math.round(100*(E.filter(ne).length/N));return{sRev:F(0),umaRev:F(1),duasMais:L(ne=>ne>=2)}})(),zt=(()=>{const E={};return e.forEach(N=>{const F=N.designer||"",L=N.revisoes||0,ne=E[F]||{rTot:0,cnt:0};E[F]={rTot:ne.rTot+L,cnt:ne.cnt+1}}),Object.entries(E).map(([N,F])=>({designer:N,porPeca:+(F.rTot/(F.cnt||1)).toFixed(2)})).sort((N,F)=>F.porPeca-N.porPeca)})(),Bt=(()=>{const E={};return e.forEach(N=>{const F=N.tipoMidia||"Outro",L=N.revisoes||0,ne=E[F]||{rTot:0,cnt:0};E[F]={rTot:ne.rTot+L,cnt:ne.cnt+1}}),Object.entries(E).map(([N,F])=>({tipo:N,porPeca:+(F.rTot/(F.cnt||1)).toFixed(2)})).sort((N,F)=>F.porPeca-N.porPeca)})(),Ze=(()=>{const E={};e.forEach(F=>{const L=F.origem||"Outros";E[L]=(E[L]||0)+1});const N=e.length||1;return Object.entries(E).map(([F,L])=>({origem:F,q:L,pct:Math.round(100*(L/N))}))})(),_r=(()=>{const E={};return e.forEach(N=>{const F=N.origem||"Outros",L=N.revisoes||0,ne=E[F]||{rTot:0,cnt:0};E[F]={rTot:ne.rTot+L,cnt:ne.cnt+1}}),Object.entries(E).map(([N,F])=>({origem:N,porPeca:+(F.rTot/(F.cnt||1)).toFixed(2)})).sort((N,F)=>F.porPeca-N.porPeca)})(),Re=(()=>{const E={};return T.forEach(N=>{const F=N.origem||"Outros";E[F]=(E[F]||0)+1}),Object.entries(E).map(([N,F])=>({origem:N,q:F})).sort((N,F)=>F.q-N.q)})(),$e=(()=>{const E={};return T.forEach(N=>{const F=N.finishedAt;if(!F)return;const L=new Date(F).getHours();E[L]=(E[L]||0)+1}),E})(),He=(()=>{const E=T.map(L=>Number(L.tempoProducaoMs||0)).filter(L=>L>0),N=E.reduce((L,ne)=>L+ne,0)/(E.length||1);return+(L=>L/36e5)(N).toFixed(2)})(),wr=(()=>{const E={};return T.forEach(N=>{const F=N.designer||"",L=Number(N.tempoProducaoMs||0),ne=E[F]||{cnt:0,sum:0};E[F]={cnt:ne.cnt+1,sum:ne.sum+L}}),Object.entries(E).map(([N,F])=>({designer:N,horas:+(F.sum/(F.cnt||1)/36e5).toFixed(2)})).sort((N,F)=>N.horas-F.horas)})(),Gr=zt.slice().sort((E,N)=>E.porPeca-N.porPeca),Er=(()=>{const E={};return e.forEach(N=>{const F=N.campanha||"";E[F]=(E[F]||0)+1}),Object.entries(E).map(([N,F])=>({campanha:N,q:F})).sort((N,F)=>F.q-N.q)})(),Ge=(()=>{const E={};return e.forEach(N=>{const F=N.campanha||"",L=N.revisoes||0,ne=E[F]||{rTot:0,cnt:0};E[F]={rTot:ne.rTot+L,cnt:ne.cnt+1}}),Object.entries(E).map(([N,F])=>({campanha:N,porPeca:+(F.rTot/(F.cnt||1)).toFixed(2)})).sort((N,F)=>F.porPeca-N.porPeca)})(),Jn=(()=>{const E={};return e.forEach(N=>{if(N.campanha){const F=N.campanha,L=!!(N.prazo&&N.dataConclusao&&N.dataConclusao<=N.prazo),ne=!!(N.prazo&&N.dataConclusao),we=E[F]||{ok:0,total:0};E[F]={ok:we.ok+(L?1:0),total:we.total+(ne?1:0)}}}),Object.entries(E).map(([N,F])=>({campanha:N,sla:Math.round(100*(F.ok/(F.total||1)))}))})();return i?l.jsxs("div",{className:"reports",children:[l.jsx("div",{className:"reports-toolbar",children:l.jsx("div",{className:"skeleton row",style:{width:"50%"}})}),l.jsx("div",{className:"reports-grid",children:Array.from({length:3}).map((E,N)=>l.jsx("div",{className:"skeleton card",style:{height:180}},N))})]}):l.jsxs("div",{className:"reports",children:[l.jsxs("div",{className:"reports-toolbar",children:[l.jsxs("div",{className:"chips",children:[o.map(E=>l.jsxs("button",{className:`btn-md ${u===c(E)?"active":""}`,onClick:()=>d(c(E)),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"calendar"})}),l.jsx("span",{children:E})]},E)),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"calendar"})}),l.jsx("input",{type:"date",value:r.cIni||"",onChange:E=>s(N=>({...N,cIni:E.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:r.cFim||"",onChange:E=>s(N=>({...N,cFim:E.target.value}))})]})]}),l.jsxs("div",{className:"chips",children:[P.map(E=>l.jsxs("button",{className:`btn-md ${(r.designer||"")===E||E==="Todos"&&!r.designer?"active":""}`,onClick:()=>b(E),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"usuarios"})}),l.jsx("span",{children:E})]},E)),U.map(E=>l.jsxs("button",{className:`btn-md ${(r.tipoMidia||"")===E||E==="Todos"&&!r.tipoMidia?"active":""}`,onClick:()=>A(E),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"tag"})}),l.jsx("span",{children:E})]},E)),I.map(E=>l.jsxs("button",{className:`btn-md ${(r.origem||"")===E||E==="Todos"&&!r.origem?"active":""}`,onClick:()=>S(E),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"link"})}),l.jsx("span",{children:E})]},E)),D.map(E=>l.jsxs("button",{className:`btn-md ${(r.campanha||"")===E||E==="Todos"&&!r.campanha?"active":""}`,onClick:()=>k(E),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"tag"})}),l.jsx("span",{children:E})]},E)),V.map(E=>l.jsxs("button",{className:`btn-md ${(r.status||"")===E||E==="Todos"&&!r.status?"active":""}`,onClick:()=>v(E),children:[l.jsx("span",{className:"icon",children:l.jsx(be,{name:"dot"})}),l.jsx("span",{children:E})]},E))]})]}),l.jsxs("div",{className:"reports-grid",children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Backlog"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Backlog total: ",C.length]}),l.jsxs("span",{className:"chip",children:["Em risco (48h): ",j.length]}),l.jsxs("span",{className:"chip",children:["Prazo mdio: ",x,"d"]}),l.jsxs("span",{className:"chip",children:["Estado: ",xt]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(C.reduce((E,N)=>{const F=N.tipoMidia||"Outro";return E[F]=(E[F]||0)+1,E},{})).map(([E,N])=>l.jsxs("tr",{children:[l.jsx("td",{children:E}),l.jsx("td",{children:N})]},E))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(C.reduce((E,N)=>{const F=N.designer||"";return E[F]=(E[F]||0)+1,E},{})).map(([E,N])=>l.jsxs("tr",{children:[l.jsx("td",{children:E}),l.jsx("td",{children:N})]},E))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Lead Time"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mdio geral: ",$,"d"]}),l.jsxs("span",{className:"chip",children:["Este ms: ",Pe,"d"]}),l.jsxs("span",{className:"chip",children:["Ms passado: ",Be,"d"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:O.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.tipo}),l.jsxs("td",{children:[E.media,"d"]})]},E.tipo))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:B.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.designer}),l.jsxs("td",{children:[E.media,"d"]})]},E.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"chips",children:[l.jsx("span",{className:"chip",children:"Designer A"}),l.jsx("select",{value:f,onChange:E=>m(E.target.value),children:n.map(E=>l.jsx("option",{value:E,children:E},E))}),l.jsx("span",{className:"chip",children:"Designer B"}),l.jsx("select",{value:g,onChange:E=>w(E.target.value),children:n.map(E=>l.jsx("option",{value:E,children:E},E))}),l.jsxs("span",{className:"chip",children:["A: ",Vn(f),"d"]}),l.jsxs("span",{className:"chip",children:["B: ",Vn(g),"d"]})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Eficincia e Retrabalho"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Sem reviso: ",xn.sRev,"%"]}),l.jsxs("span",{className:"chip",children:["1 reviso: ",xn.umaRev,"%"]}),l.jsxs("span",{className:"chip",children:["2+ revises: ",xn.duasMais,"%"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:zt.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.designer}),l.jsx("td",{children:E.porPeca})]},E.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:Bt.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.tipo}),l.jsx("td",{children:E.porPeca})]},E.tipo))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Demanda por Canal"}),l.jsx("div",{className:"chips",children:Ze.map(E=>l.jsxs("span",{className:"chip",children:[E.origem,": ",E.pct,"%"]},E.origem))}),l.jsx("div",{className:"section-divider"}),(()=>{const E=Ze.reduce((pe,ge)=>pe+ge.q,0)||1;let N=0;const F=50,L=60,ne=60,we=Ze.slice(0,5).map((pe,ge)=>{const ve=pe.q/E,Ce=N*2*Math.PI,Se=(N+ve)*2*Math.PI;N+=ve;const Fn=L+F*Math.cos(Ce),er=ne+F*Math.sin(Ce),Ae=L+F*Math.cos(Se),jt=ne+F*Math.sin(Se),Z=ve>.5?1:0,K=`M ${L} ${ne} L ${Fn} ${er} A ${F} ${F} 0 ${Z} 1 ${Ae} ${jt} Z`,Y=["#4DA3FF","#BCD200","#FF5E5E","#9B59B6","#2ECC71"];return{path:K,color:Y[ge%Y.length],label:`${pe.origem} ${pe.pct}%`}});return l.jsxs("div",{className:"pie-wrap",children:[l.jsx("svg",{width:"140",height:"140",className:"pie-chart",children:we.map((pe,ge)=>l.jsx("path",{d:pe.path,fill:pe.color},ge))}),l.jsx("div",{className:"pie-legend",children:we.map((pe,ge)=>l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot",style:{background:pe.color}}),pe.label]},ge))})]})})(),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:_r.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.origem}),l.jsx("td",{children:E.porPeca})]},E.origem))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Concludas"})]})}),l.jsx("tbody",{children:Re.map(E=>l.jsxs("tr",{children:[l.jsx("td",{children:E.origem}),l.jsx("td",{children:E.q})]},E.origem))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Produtividade por Hora (Avanado)"}),l.jsx("div",{className:"chips",children:l.jsxs("span",{className:"chip",children:["Tempo mdio real/pea: ",He,"h"]})}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"heatmap",children:[l.jsx("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:Array.from({length:11},(E,N)=>N+8).map(E=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(E).padStart(2,"0"),"h"]},E))}),l.jsx("div",{className:"heat-row",children:Array.from({length:11},(E,N)=>N+8).map(E=>{const N=$e[E]||0,F=N===0?"#222":N<2?"#00C58E33":"#00C58E";return l.jsx("div",{className:"heat-cell",style:{background:F},title:`${String(E).padStart(2,"0")}h: ${N}`},E)})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Velocidade mdia (h)"})]})}),l.jsx("tbody",{children:wr.map((E,N)=>l.jsxs("tr",{children:[l.jsx("td",{children:N+1}),l.jsx("td",{children:E.designer}),l.jsx("td",{children:E.horas})]},E.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qualidade (menos retrabalho)"})]})}),l.jsx("tbody",{children:Gr.map((E,N)=>l.jsxs("tr",{children:[l.jsx("td",{children:N+1}),l.jsx("td",{children:E.designer}),l.jsx("td",{children:E.porPeca})]},E.designer))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Campanhas"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mais demandada: ",((Nt=Er[0])==null?void 0:Nt.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Maior retrabalho: ",((Zn=Ge[0])==null?void 0:Zn.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Melhor SLA: ",((Ln=Jn.sort((E,N)=>N.sla-E.sla)[0])==null?void 0:Ln.campanha)||""]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Campanha"}),l.jsx("th",{children:"Produo (concludas)"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"Retrabalho/pea"})]})}),l.jsx("tbody",{children:Array.from(new Set(e.map(E=>E.campanha).filter(Boolean))).map(E=>{var ne,we;const N=T.filter(pe=>pe.campanha===E).length,F=((ne=Jn.find(pe=>pe.campanha===E))==null?void 0:ne.sla)||0,L=((we=Ge.find(pe=>pe.campanha===E))==null?void 0:we.porPeca)||0;return l.jsxs("tr",{children:[l.jsx("td",{children:E}),l.jsx("td",{children:N}),l.jsxs("td",{style:{color:F>=90?"#BCD200":F>=70?"#FFE55C":"#FF5E5E"},children:[F,"%"]}),l.jsx("td",{children:L})]},E)})})]})]})]})]})}B0(document.getElementById("root")).render(l.jsx(KT.StrictMode,{children:l.jsx(XN,{})}));
