(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function BT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fy={exports:{}},fu={},Uy={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ga=Symbol.for("react.element"),$T=Symbol.for("react.portal"),HT=Symbol.for("react.fragment"),qT=Symbol.for("react.strict_mode"),WT=Symbol.for("react.profiler"),GT=Symbol.for("react.provider"),KT=Symbol.for("react.context"),QT=Symbol.for("react.forward_ref"),YT=Symbol.for("react.suspense"),JT=Symbol.for("react.memo"),XT=Symbol.for("react.lazy"),Bm=Symbol.iterator;function ZT(t){return t===null||typeof t!="object"?null:(t=Bm&&t[Bm]||t["@@iterator"],typeof t=="function"?t:null)}var zy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},By=Object.assign,$y={};function go(t,e,n){this.props=t,this.context=e,this.refs=$y,this.updater=n||zy}go.prototype.isReactComponent={};go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hy(){}Hy.prototype=go.prototype;function yf(t,e,n){this.props=t,this.context=e,this.refs=$y,this.updater=n||zy}var _f=yf.prototype=new Hy;_f.constructor=yf;By(_f,go.prototype);_f.isPureReactComponent=!0;var $m=Array.isArray,qy=Object.prototype.hasOwnProperty,wf={current:null},Wy={key:!0,ref:!0,__self:!0,__source:!0};function Gy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)qy.call(e,r)&&!Wy.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Ga,type:t,key:i,ref:o,props:s,_owner:wf.current}}function eI(t,e){return{$$typeof:Ga,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ef(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ga}function tI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hm=/\/+/g;function cd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tI(""+t.key):e.toString(36)}function Jl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ga:case $T:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+cd(o,0):r,$m(s)?(n="",t!=null&&(n=t.replace(Hm,"$&/")+"/"),Jl(s,e,n,"",function(d){return d})):s!=null&&(Ef(s)&&(s=eI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Hm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",$m(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+cd(i,c);o+=Jl(i,e,n,u,s)}else if(u=ZT(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+cd(i,c++),o+=Jl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cl(t,e,n){if(t==null)return t;var r=[],s=0;return Jl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function nI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Xl={transition:null},rI={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Xl,ReactCurrentOwner:wf};function Ky(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Cl,forEach:function(t,e,n){Cl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cl(t,function(){e++}),e},toArray:function(t){return Cl(t,function(e){return e})||[]},only:function(t){if(!Ef(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=go;xe.Fragment=HT;xe.Profiler=WT;xe.PureComponent=yf;xe.StrictMode=qT;xe.Suspense=YT;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rI;xe.act=Ky;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=By({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=wf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)qy.call(e,u)&&!Wy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Ga,type:t.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:KT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:GT,_context:t},t.Consumer=t};xe.createElement=Gy;xe.createFactory=function(t){var e=Gy.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:QT,render:t}};xe.isValidElement=Ef;xe.lazy=function(t){return{$$typeof:XT,_payload:{_status:-1,_result:t},_init:nI}};xe.memo=function(t,e){return{$$typeof:JT,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=Xl.transition;Xl.transition={};try{t()}finally{Xl.transition=e}};xe.unstable_act=Ky;xe.useCallback=function(t,e){return rn.current.useCallback(t,e)};xe.useContext=function(t){return rn.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};xe.useEffect=function(t,e){return rn.current.useEffect(t,e)};xe.useId=function(){return rn.current.useId()};xe.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return rn.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};xe.useRef=function(t){return rn.current.useRef(t)};xe.useState=function(t){return rn.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return rn.current.useTransition()};xe.version="18.3.1";Uy.exports=xe;var J=Uy.exports;const sI=BT(J);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iI=J,oI=Symbol.for("react.element"),aI=Symbol.for("react.fragment"),lI=Object.prototype.hasOwnProperty,cI=iI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uI={key:!0,ref:!0,__self:!0,__source:!0};function Qy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lI.call(e,r)&&!uI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:oI,type:t,key:i,ref:o,props:s,_owner:cI.current}}fu.Fragment=aI;fu.jsx=Qy;fu.jsxs=Qy;Fy.exports=fu;var l=Fy.exports,Yy={exports:{}},xn={},Jy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,b){var z=M.length;M.push(b);e:for(;0<z;){var q=z-1>>>1,Z=M[q];if(0<s(Z,b))M[q]=b,M[z]=Z,z=q;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var b=M[0],z=M.pop();if(z!==b){M[0]=z;e:for(var q=0,Z=M.length,ne=Z>>>1;q<ne;){var Ee=2*(q+1)-1,Ue=M[Ee],Se=Ee+1,tt=M[Se];if(0>s(Ue,z))Se<Z&&0>s(tt,Ue)?(M[q]=tt,M[Se]=z,q=Se):(M[q]=Ue,M[Ee]=z,q=Ee);else if(Se<Z&&0>s(tt,z))M[q]=tt,M[Se]=z,q=Se;else break e}}return b}function s(M,b){var z=M.sortIndex-b.sortIndex;return z!==0?z:M.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],p=1,m=null,g=3,w=!1,P=!1,O=!1,$=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var b=n(d);b!==null;){if(b.callback===null)r(d);else if(b.startTime<=M)r(d),b.sortIndex=b.expirationTime,e(u,b);else break;b=n(d)}}function j(M){if(O=!1,S(M),!P)if(n(u)!==null)P=!0,Ge(N);else{var b=n(d);b!==null&&et(j,b.startTime-M)}}function N(M,b){P=!1,O&&(O=!1,C(y),y=-1),w=!0;var z=g;try{for(S(b),m=n(u);m!==null&&(!(m.expirationTime>b)||M&&!k());){var q=m.callback;if(typeof q=="function"){m.callback=null,g=m.priorityLevel;var Z=q(m.expirationTime<=b);b=t.unstable_now(),typeof Z=="function"?m.callback=Z:m===n(u)&&r(u),S(b)}else r(u);m=n(u)}if(m!==null)var ne=!0;else{var Ee=n(d);Ee!==null&&et(j,Ee.startTime-b),ne=!1}return ne}finally{m=null,g=z,w=!1}}var F=!1,v=null,y=-1,I=5,A=-1;function k(){return!(t.unstable_now()-A<I)}function R(){if(v!==null){var M=t.unstable_now();A=M;var b=!0;try{b=v(!0,M)}finally{b?x():(F=!1,v=null)}}else F=!1}var x;if(typeof E=="function")x=function(){E(R)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,At=rt.port2;rt.port1.onmessage=R,x=function(){At.postMessage(null)}}else x=function(){$(R,0)};function Ge(M){v=M,F||(F=!0,x())}function et(M,b){y=$(function(){M(t.unstable_now())},b)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){P||w||(P=!0,Ge(N))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(g){case 1:case 2:case 3:var b=3;break;default:b=g}var z=g;g=b;try{return M()}finally{g=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,b){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var z=g;g=M;try{return b()}finally{g=z}},t.unstable_scheduleCallback=function(M,b,z){var q=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?q+z:q):z=q,M){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,M={id:p++,callback:b,priorityLevel:M,startTime:z,expirationTime:Z,sortIndex:-1},z>q?(M.sortIndex=z,e(d,M),n(u)===null&&M===n(d)&&(O?(C(y),y=-1):O=!0,et(j,z-q))):(M.sortIndex=Z,e(u,M),P||w||(P=!0,Ge(N))),M},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(M){var b=g;return function(){var z=g;g=b;try{return M.apply(this,arguments)}finally{g=z}}}})(Xy);Jy.exports=Xy;var dI=Jy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hI=J,Cn=dI;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zy=new Set,wa={};function gi(t,e){no(t,e),no(t+"Capture",e)}function no(t,e){for(wa[t]=e,t=0;t<e.length;t++)Zy.add(e[t])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qd=Object.prototype.hasOwnProperty,fI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qm={},Wm={};function pI(t){return Qd.call(Wm,t)?!0:Qd.call(qm,t)?!1:fI.test(t)?Wm[t]=!0:(qm[t]=!0,!1)}function mI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gI(t,e,n,r){if(e===null||typeof e>"u"||mI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tf=/[\-:]([a-z])/g;function If(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tf,If);Lt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tf,If);Lt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tf,If);Lt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sf(t,e,n,r){var s=Lt.hasOwnProperty(e)?Lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gI(e,n,s,r)&&(n=null),r||s===null?pI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gr=hI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xl=Symbol.for("react.element"),ji=Symbol.for("react.portal"),bi=Symbol.for("react.fragment"),Af=Symbol.for("react.strict_mode"),Yd=Symbol.for("react.profiler"),e_=Symbol.for("react.provider"),t_=Symbol.for("react.context"),Cf=Symbol.for("react.forward_ref"),Jd=Symbol.for("react.suspense"),Xd=Symbol.for("react.suspense_list"),xf=Symbol.for("react.memo"),es=Symbol.for("react.lazy"),n_=Symbol.for("react.offscreen"),Gm=Symbol.iterator;function Lo(t){return t===null||typeof t!="object"?null:(t=Gm&&t[Gm]||t["@@iterator"],typeof t=="function"?t:null)}var at=Object.assign,ud;function Wo(t){if(ud===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ud=e&&e[1]||""}return`
`+ud+t}var dd=!1;function hd(t,e){if(!t||dd)return"";dd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{dd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wo(t):""}function vI(t){switch(t.tag){case 5:return Wo(t.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return t=hd(t.type,!1),t;case 11:return t=hd(t.type.render,!1),t;case 1:return t=hd(t.type,!0),t;default:return""}}function Zd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bi:return"Fragment";case ji:return"Portal";case Yd:return"Profiler";case Af:return"StrictMode";case Jd:return"Suspense";case Xd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case t_:return(t.displayName||"Context")+".Consumer";case e_:return(t._context.displayName||"Context")+".Provider";case Cf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xf:return e=t.displayName||null,e!==null?e:Zd(t.type)||"Memo";case es:e=t._payload,t=t._init;try{return Zd(t(e))}catch{}}return null}function yI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zd(e);case 8:return e===Af?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ss(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function r_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _I(t){var e=r_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pl(t){t._valueTracker||(t._valueTracker=_I(t))}function s_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=r_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eh(t,e){var n=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Km(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ss(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function i_(t,e){e=e.checked,e!=null&&Sf(t,"checked",e,!1)}function th(t,e){i_(t,e);var n=Ss(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nh(t,e.type,n):e.hasOwnProperty("defaultValue")&&nh(t,e.type,Ss(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nh(t,e,n){(e!=="number"||wc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Go=Array.isArray;function Wi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ss(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function rh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ym(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Go(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ss(n)}}function o_(t,e){var n=Ss(e.value),r=Ss(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function a_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?a_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kl,l_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ea(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wI=["Webkit","ms","Moz","O"];Object.keys(sa).forEach(function(t){wI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sa[e]=sa[t]})});function c_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sa.hasOwnProperty(t)&&sa[t]?(""+e).trim():e+"px"}function u_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=c_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var EI=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ih(t,e){if(e){if(EI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function oh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ah=null;function Pf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lh=null,Gi=null,Ki=null;function Xm(t){if(t=Ya(t)){if(typeof lh!="function")throw Error(X(280));var e=t.stateNode;e&&(e=yu(e),lh(t.stateNode,t.type,e))}}function d_(t){Gi?Ki?Ki.push(t):Ki=[t]:Gi=t}function h_(){if(Gi){var t=Gi,e=Ki;if(Ki=Gi=null,Xm(t),e)for(t=0;t<e.length;t++)Xm(e[t])}}function f_(t,e){return t(e)}function p_(){}var fd=!1;function m_(t,e,n){if(fd)return t(e,n);fd=!0;try{return f_(t,e,n)}finally{fd=!1,(Gi!==null||Ki!==null)&&(p_(),h_())}}function Ta(t,e){var n=t.stateNode;if(n===null)return null;var r=yu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var ch=!1;if(Lr)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){ch=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{ch=!1}function TI(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var ia=!1,Ec=null,Tc=!1,uh=null,II={onError:function(t){ia=!0,Ec=t}};function SI(t,e,n,r,s,i,o,c,u){ia=!1,Ec=null,TI.apply(II,arguments)}function AI(t,e,n,r,s,i,o,c,u){if(SI.apply(this,arguments),ia){if(ia){var d=Ec;ia=!1,Ec=null}else throw Error(X(198));Tc||(Tc=!0,uh=d)}}function vi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function g_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zm(t){if(vi(t)!==t)throw Error(X(188))}function CI(t){var e=t.alternate;if(!e){if(e=vi(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Zm(s),t;if(i===r)return Zm(s),e;i=i.sibling}throw Error(X(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function v_(t){return t=CI(t),t!==null?y_(t):null}function y_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=y_(t);if(e!==null)return e;t=t.sibling}return null}var __=Cn.unstable_scheduleCallback,eg=Cn.unstable_cancelCallback,xI=Cn.unstable_shouldYield,PI=Cn.unstable_requestPaint,wt=Cn.unstable_now,kI=Cn.unstable_getCurrentPriorityLevel,kf=Cn.unstable_ImmediatePriority,w_=Cn.unstable_UserBlockingPriority,Ic=Cn.unstable_NormalPriority,NI=Cn.unstable_LowPriority,E_=Cn.unstable_IdlePriority,pu=null,dr=null;function RI(t){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(pu,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:bI,DI=Math.log,jI=Math.LN2;function bI(t){return t>>>=0,t===0?32:31-(DI(t)/jI|0)|0}var Nl=64,Rl=4194304;function Ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Ko(c):(i&=o,i!==0&&(r=Ko(i)))}else o=n&~s,o!==0?r=Ko(o):i!==0&&(r=Ko(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xn(e),s=1<<n,r|=t[n],e&=~s;return r}function OI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Xn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=OI(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function dh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function T_(){var t=Nl;return Nl<<=1,!(Nl&4194240)&&(Nl=64),t}function pd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ka(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=n}function VI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Xn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Nf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ze=0;function I_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var S_,Rf,A_,C_,x_,hh=!1,Dl=[],hs=null,fs=null,ps=null,Ia=new Map,Sa=new Map,ns=[],LI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tg(t,e){switch(t){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":Ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sa.delete(e.pointerId)}}function Uo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ya(e),e!==null&&Rf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function FI(t,e,n,r,s){switch(e){case"focusin":return hs=Uo(hs,t,e,n,r,s),!0;case"dragenter":return fs=Uo(fs,t,e,n,r,s),!0;case"mouseover":return ps=Uo(ps,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ia.set(i,Uo(Ia.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Sa.set(i,Uo(Sa.get(i)||null,t,e,n,r,s)),!0}return!1}function P_(t){var e=Ys(t.target);if(e!==null){var n=vi(e);if(n!==null){if(e=n.tag,e===13){if(e=g_(n),e!==null){t.blockedOn=e,x_(t.priority,function(){A_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ah=r,n.target.dispatchEvent(r),ah=null}else return e=Ya(n),e!==null&&Rf(e),t.blockedOn=n,!1;e.shift()}return!0}function ng(t,e,n){Zl(t)&&n.delete(e)}function UI(){hh=!1,hs!==null&&Zl(hs)&&(hs=null),fs!==null&&Zl(fs)&&(fs=null),ps!==null&&Zl(ps)&&(ps=null),Ia.forEach(ng),Sa.forEach(ng)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,hh||(hh=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,UI)))}function Aa(t){function e(s){return zo(s,t)}if(0<Dl.length){zo(Dl[0],t);for(var n=1;n<Dl.length;n++){var r=Dl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hs!==null&&zo(hs,t),fs!==null&&zo(fs,t),ps!==null&&zo(ps,t),Ia.forEach(e),Sa.forEach(e),n=0;n<ns.length;n++)r=ns[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ns.length&&(n=ns[0],n.blockedOn===null);)P_(n),n.blockedOn===null&&ns.shift()}var Qi=Gr.ReactCurrentBatchConfig,Ac=!0;function zI(t,e,n,r){var s=ze,i=Qi.transition;Qi.transition=null;try{ze=1,Df(t,e,n,r)}finally{ze=s,Qi.transition=i}}function BI(t,e,n,r){var s=ze,i=Qi.transition;Qi.transition=null;try{ze=4,Df(t,e,n,r)}finally{ze=s,Qi.transition=i}}function Df(t,e,n,r){if(Ac){var s=fh(t,e,n,r);if(s===null)Sd(t,e,r,Cc,n),tg(t,r);else if(FI(s,t,e,n,r))r.stopPropagation();else if(tg(t,r),e&4&&-1<LI.indexOf(t)){for(;s!==null;){var i=Ya(s);if(i!==null&&S_(i),i=fh(t,e,n,r),i===null&&Sd(t,e,r,Cc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Sd(t,e,r,null,n)}}var Cc=null;function fh(t,e,n,r){if(Cc=null,t=Pf(r),t=Ys(t),t!==null)if(e=vi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=g_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cc=t,null}function k_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kI()){case kf:return 1;case w_:return 4;case Ic:case NI:return 16;case E_:return 536870912;default:return 16}default:return 16}}var cs=null,jf=null,ec=null;function N_(){if(ec)return ec;var t,e=jf,n=e.length,r,s="value"in cs?cs.value:cs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ec=s.slice(t,1<r?1-r:void 0)}function tc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jl(){return!0}function rg(){return!1}function Pn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jl:rg,this.isPropagationStopped=rg,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),e}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bf=Pn(vo),Qa=at({},vo,{view:0,detail:0}),$I=Pn(Qa),md,gd,Bo,mu=at({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Of,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bo&&(Bo&&t.type==="mousemove"?(md=t.screenX-Bo.screenX,gd=t.screenY-Bo.screenY):gd=md=0,Bo=t),md)},movementY:function(t){return"movementY"in t?t.movementY:gd}}),sg=Pn(mu),HI=at({},mu,{dataTransfer:0}),qI=Pn(HI),WI=at({},Qa,{relatedTarget:0}),vd=Pn(WI),GI=at({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),KI=Pn(GI),QI=at({},vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YI=Pn(QI),JI=at({},vo,{data:0}),ig=Pn(JI),XI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eS[t])?!!e[t]:!1}function Of(){return tS}var nS=at({},Qa,{key:function(t){if(t.key){var e=XI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Of,charCode:function(t){return t.type==="keypress"?tc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rS=Pn(nS),sS=at({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),og=Pn(sS),iS=at({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Of}),oS=Pn(iS),aS=at({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),lS=Pn(aS),cS=at({},mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uS=Pn(cS),dS=[9,13,27,32],Mf=Lr&&"CompositionEvent"in window,oa=null;Lr&&"documentMode"in document&&(oa=document.documentMode);var hS=Lr&&"TextEvent"in window&&!oa,R_=Lr&&(!Mf||oa&&8<oa&&11>=oa),ag=" ",lg=!1;function D_(t,e){switch(t){case"keyup":return dS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oi=!1;function fS(t,e){switch(t){case"compositionend":return j_(e);case"keypress":return e.which!==32?null:(lg=!0,ag);case"textInput":return t=e.data,t===ag&&lg?null:t;default:return null}}function pS(t,e){if(Oi)return t==="compositionend"||!Mf&&D_(t,e)?(t=N_(),ec=jf=cs=null,Oi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return R_&&e.locale!=="ko"?null:e.data;default:return null}}var mS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mS[t.type]:e==="textarea"}function b_(t,e,n,r){d_(r),e=xc(e,"onChange"),0<e.length&&(n=new bf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var aa=null,Ca=null;function gS(t){q_(t,0)}function gu(t){var e=Li(t);if(s_(e))return t}function vS(t,e){if(t==="change")return e}var O_=!1;if(Lr){var yd;if(Lr){var _d="oninput"in document;if(!_d){var ug=document.createElement("div");ug.setAttribute("oninput","return;"),_d=typeof ug.oninput=="function"}yd=_d}else yd=!1;O_=yd&&(!document.documentMode||9<document.documentMode)}function dg(){aa&&(aa.detachEvent("onpropertychange",M_),Ca=aa=null)}function M_(t){if(t.propertyName==="value"&&gu(Ca)){var e=[];b_(e,Ca,t,Pf(t)),m_(gS,e)}}function yS(t,e,n){t==="focusin"?(dg(),aa=e,Ca=n,aa.attachEvent("onpropertychange",M_)):t==="focusout"&&dg()}function _S(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gu(Ca)}function wS(t,e){if(t==="click")return gu(e)}function ES(t,e){if(t==="input"||t==="change")return gu(e)}function TS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var er=typeof Object.is=="function"?Object.is:TS;function xa(t,e){if(er(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Qd.call(e,s)||!er(t[s],e[s]))return!1}return!0}function hg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fg(t,e){var n=hg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hg(n)}}function V_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?V_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function L_(){for(var t=window,e=wc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wc(t.document)}return e}function Vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IS(t){var e=L_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&V_(n.ownerDocument.documentElement,n)){if(r!==null&&Vf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=fg(n,i);var o=fg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SS=Lr&&"documentMode"in document&&11>=document.documentMode,Mi=null,ph=null,la=null,mh=!1;function pg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mh||Mi==null||Mi!==wc(r)||(r=Mi,"selectionStart"in r&&Vf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),la&&xa(la,r)||(la=r,r=xc(ph,"onSelect"),0<r.length&&(e=new bf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mi)))}function bl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vi={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},wd={},F_={};Lr&&(F_=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function vu(t){if(wd[t])return wd[t];if(!Vi[t])return t;var e=Vi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in F_)return wd[t]=e[n];return t}var U_=vu("animationend"),z_=vu("animationiteration"),B_=vu("animationstart"),$_=vu("transitionend"),H_=new Map,mg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(t,e){H_.set(t,e),gi(e,[t])}for(var Ed=0;Ed<mg.length;Ed++){var Td=mg[Ed],AS=Td.toLowerCase(),CS=Td[0].toUpperCase()+Td.slice(1);bs(AS,"on"+CS)}bs(U_,"onAnimationEnd");bs(z_,"onAnimationIteration");bs(B_,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs($_,"onTransitionEnd");no("onMouseEnter",["mouseout","mouseover"]);no("onMouseLeave",["mouseout","mouseover"]);no("onPointerEnter",["pointerout","pointerover"]);no("onPointerLeave",["pointerout","pointerover"]);gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function gg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AI(r,e,void 0,t),t.currentTarget=null}function q_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;gg(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;gg(s,c,d),i=u}}}if(Tc)throw t=uh,Tc=!1,uh=null,t}function Je(t,e){var n=e[wh];n===void 0&&(n=e[wh]=new Set);var r=t+"__bubble";n.has(r)||(W_(e,t,2,!1),n.add(r))}function Id(t,e,n){var r=0;e&&(r|=4),W_(n,t,r,e)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function Pa(t){if(!t[Ol]){t[Ol]=!0,Zy.forEach(function(n){n!=="selectionchange"&&(xS.has(n)||Id(n,!1,t),Id(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ol]||(e[Ol]=!0,Id("selectionchange",!1,e))}}function W_(t,e,n,r){switch(k_(e)){case 1:var s=zI;break;case 4:s=BI;break;default:s=Df}n=s.bind(null,e,n,t),s=void 0,!ch||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Sd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Ys(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}m_(function(){var d=i,p=Pf(n),m=[];e:{var g=H_.get(t);if(g!==void 0){var w=bf,P=t;switch(t){case"keypress":if(tc(n)===0)break e;case"keydown":case"keyup":w=rS;break;case"focusin":P="focus",w=vd;break;case"focusout":P="blur",w=vd;break;case"beforeblur":case"afterblur":w=vd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=sg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=qI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=oS;break;case U_:case z_:case B_:w=KI;break;case $_:w=lS;break;case"scroll":w=$I;break;case"wheel":w=uS;break;case"copy":case"cut":case"paste":w=YI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=og}var O=(e&4)!==0,$=!O&&t==="scroll",C=O?g!==null?g+"Capture":null:g;O=[];for(var E=d,S;E!==null;){S=E;var j=S.stateNode;if(S.tag===5&&j!==null&&(S=j,C!==null&&(j=Ta(E,C),j!=null&&O.push(ka(E,j,S)))),$)break;E=E.return}0<O.length&&(g=new w(g,P,null,n,p),m.push({event:g,listeners:O}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==ah&&(P=n.relatedTarget||n.fromElement)&&(Ys(P)||P[Fr]))break e;if((w||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,w?(P=n.relatedTarget||n.toElement,w=d,P=P?Ys(P):null,P!==null&&($=vi(P),P!==$||P.tag!==5&&P.tag!==6)&&(P=null)):(w=null,P=d),w!==P)){if(O=sg,j="onMouseLeave",C="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(O=og,j="onPointerLeave",C="onPointerEnter",E="pointer"),$=w==null?g:Li(w),S=P==null?g:Li(P),g=new O(j,E+"leave",w,n,p),g.target=$,g.relatedTarget=S,j=null,Ys(p)===d&&(O=new O(C,E+"enter",P,n,p),O.target=S,O.relatedTarget=$,j=O),$=j,w&&P)t:{for(O=w,C=P,E=0,S=O;S;S=xi(S))E++;for(S=0,j=C;j;j=xi(j))S++;for(;0<E-S;)O=xi(O),E--;for(;0<S-E;)C=xi(C),S--;for(;E--;){if(O===C||C!==null&&O===C.alternate)break t;O=xi(O),C=xi(C)}O=null}else O=null;w!==null&&vg(m,g,w,O,!1),P!==null&&$!==null&&vg(m,$,P,O,!0)}}e:{if(g=d?Li(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var N=vS;else if(cg(g))if(O_)N=ES;else{N=_S;var F=yS}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(N=wS);if(N&&(N=N(t,d))){b_(m,N,n,p);break e}F&&F(t,g,d),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&nh(g,"number",g.value)}switch(F=d?Li(d):window,t){case"focusin":(cg(F)||F.contentEditable==="true")&&(Mi=F,ph=d,la=null);break;case"focusout":la=ph=Mi=null;break;case"mousedown":mh=!0;break;case"contextmenu":case"mouseup":case"dragend":mh=!1,pg(m,n,p);break;case"selectionchange":if(SS)break;case"keydown":case"keyup":pg(m,n,p)}var v;if(Mf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Oi?D_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(R_&&n.locale!=="ko"&&(Oi||y!=="onCompositionStart"?y==="onCompositionEnd"&&Oi&&(v=N_()):(cs=p,jf="value"in cs?cs.value:cs.textContent,Oi=!0)),F=xc(d,y),0<F.length&&(y=new ig(y,t,null,n,p),m.push({event:y,listeners:F}),v?y.data=v:(v=j_(n),v!==null&&(y.data=v)))),(v=hS?fS(t,n):pS(t,n))&&(d=xc(d,"onBeforeInput"),0<d.length&&(p=new ig("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=v))}q_(m,e)})}function ka(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ta(t,n),i!=null&&r.unshift(ka(t,i,s)),i=Ta(t,e),i!=null&&r.push(ka(t,i,s))),t=t.return}return r}function xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Ta(n,i),u!=null&&o.unshift(ka(n,u,c))):s||(u=Ta(n,i),u!=null&&o.push(ka(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var PS=/\r\n?/g,kS=/\u0000|\uFFFD/g;function yg(t){return(typeof t=="string"?t:""+t).replace(PS,`
`).replace(kS,"")}function Ml(t,e,n){if(e=yg(e),yg(t)!==e&&n)throw Error(X(425))}function Pc(){}var gh=null,vh=null;function yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _h=typeof setTimeout=="function"?setTimeout:void 0,NS=typeof clearTimeout=="function"?clearTimeout:void 0,_g=typeof Promise=="function"?Promise:void 0,RS=typeof queueMicrotask=="function"?queueMicrotask:typeof _g<"u"?function(t){return _g.resolve(null).then(t).catch(DS)}:_h;function DS(t){setTimeout(function(){throw t})}function Ad(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Aa(e)}function ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yo=Math.random().toString(36).slice(2),ur="__reactFiber$"+yo,Na="__reactProps$"+yo,Fr="__reactContainer$"+yo,wh="__reactEvents$"+yo,jS="__reactListeners$"+yo,bS="__reactHandles$"+yo;function Ys(t){var e=t[ur];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[ur]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wg(t);t!==null;){if(n=t[ur])return n;t=wg(t)}return e}t=n,n=t.parentNode}return null}function Ya(t){return t=t[ur]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Li(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function yu(t){return t[Na]||null}var Eh=[],Fi=-1;function Os(t){return{current:t}}function Ze(t){0>Fi||(t.current=Eh[Fi],Eh[Fi]=null,Fi--)}function We(t,e){Fi++,Eh[Fi]=t.current,t.current=e}var As={},Jt=Os(As),fn=Os(!1),si=As;function ro(t,e){var n=t.type.contextTypes;if(!n)return As;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pn(t){return t=t.childContextTypes,t!=null}function kc(){Ze(fn),Ze(Jt)}function Eg(t,e,n){if(Jt.current!==As)throw Error(X(168));We(Jt,e),We(fn,n)}function G_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(X(108,yI(t)||"Unknown",s));return at({},n,r)}function Nc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||As,si=Jt.current,We(Jt,t),We(fn,fn.current),!0}function Tg(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=G_(t,e,si),r.__reactInternalMemoizedMergedChildContext=t,Ze(fn),Ze(Jt),We(Jt,t)):Ze(fn),We(fn,n)}var kr=null,_u=!1,Cd=!1;function K_(t){kr===null?kr=[t]:kr.push(t)}function OS(t){_u=!0,K_(t)}function Ms(){if(!Cd&&kr!==null){Cd=!0;var t=0,e=ze;try{var n=kr;for(ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kr=null,_u=!1}catch(s){throw kr!==null&&(kr=kr.slice(t+1)),__(kf,Ms),s}finally{ze=e,Cd=!1}}return null}var Ui=[],zi=0,Rc=null,Dc=0,On=[],Mn=0,ii=null,Nr=1,Rr="";function Ws(t,e){Ui[zi++]=Dc,Ui[zi++]=Rc,Rc=t,Dc=e}function Q_(t,e,n){On[Mn++]=Nr,On[Mn++]=Rr,On[Mn++]=ii,ii=t;var r=Nr;t=Rr;var s=32-Xn(r)-1;r&=~(1<<s),n+=1;var i=32-Xn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Nr=1<<32-Xn(e)+s|n<<s|r,Rr=i+t}else Nr=1<<i|n<<s|r,Rr=t}function Lf(t){t.return!==null&&(Ws(t,1),Q_(t,1,0))}function Ff(t){for(;t===Rc;)Rc=Ui[--zi],Ui[zi]=null,Dc=Ui[--zi],Ui[zi]=null;for(;t===ii;)ii=On[--Mn],On[Mn]=null,Rr=On[--Mn],On[Mn]=null,Nr=On[--Mn],On[Mn]=null}var An=null,In=null,nt=!1,Yn=null;function Y_(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ig(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,An=t,In=ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,An=t,In=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ii!==null?{id:Nr,overflow:Rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,An=t,In=null,!0):!1;default:return!1}}function Th(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ih(t){if(nt){var e=In;if(e){var n=e;if(!Ig(t,e)){if(Th(t))throw Error(X(418));e=ms(n.nextSibling);var r=An;e&&Ig(t,e)?Y_(r,n):(t.flags=t.flags&-4097|2,nt=!1,An=t)}}else{if(Th(t))throw Error(X(418));t.flags=t.flags&-4097|2,nt=!1,An=t}}}function Sg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function Vl(t){if(t!==An)return!1;if(!nt)return Sg(t),nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yh(t.type,t.memoizedProps)),e&&(e=In)){if(Th(t))throw J_(),Error(X(418));for(;e;)Y_(t,e),e=ms(e.nextSibling)}if(Sg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){In=ms(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}In=null}}else In=An?ms(t.stateNode.nextSibling):null;return!0}function J_(){for(var t=In;t;)t=ms(t.nextSibling)}function so(){In=An=null,nt=!1}function Uf(t){Yn===null?Yn=[t]:Yn.push(t)}var MS=Gr.ReactCurrentBatchConfig;function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function Ll(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ag(t){var e=t._init;return e(t._payload)}function X_(t){function e(C,E){if(t){var S=C.deletions;S===null?(C.deletions=[E],C.flags|=16):S.push(E)}}function n(C,E){if(!t)return null;for(;E!==null;)e(C,E),E=E.sibling;return null}function r(C,E){for(C=new Map;E!==null;)E.key!==null?C.set(E.key,E):C.set(E.index,E),E=E.sibling;return C}function s(C,E){return C=_s(C,E),C.index=0,C.sibling=null,C}function i(C,E,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<E?(C.flags|=2,E):S):(C.flags|=2,E)):(C.flags|=1048576,E)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function c(C,E,S,j){return E===null||E.tag!==6?(E=jd(S,C.mode,j),E.return=C,E):(E=s(E,S),E.return=C,E)}function u(C,E,S,j){var N=S.type;return N===bi?p(C,E,S.props.children,j,S.key):E!==null&&(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===es&&Ag(N)===E.type)?(j=s(E,S.props),j.ref=$o(C,E,S),j.return=C,j):(j=lc(S.type,S.key,S.props,null,C.mode,j),j.ref=$o(C,E,S),j.return=C,j)}function d(C,E,S,j){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=bd(S,C.mode,j),E.return=C,E):(E=s(E,S.children||[]),E.return=C,E)}function p(C,E,S,j,N){return E===null||E.tag!==7?(E=ti(S,C.mode,j,N),E.return=C,E):(E=s(E,S),E.return=C,E)}function m(C,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=jd(""+E,C.mode,S),E.return=C,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case xl:return S=lc(E.type,E.key,E.props,null,C.mode,S),S.ref=$o(C,null,E),S.return=C,S;case ji:return E=bd(E,C.mode,S),E.return=C,E;case es:var j=E._init;return m(C,j(E._payload),S)}if(Go(E)||Lo(E))return E=ti(E,C.mode,S,null),E.return=C,E;Ll(C,E)}return null}function g(C,E,S,j){var N=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:c(C,E,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xl:return S.key===N?u(C,E,S,j):null;case ji:return S.key===N?d(C,E,S,j):null;case es:return N=S._init,g(C,E,N(S._payload),j)}if(Go(S)||Lo(S))return N!==null?null:p(C,E,S,j,null);Ll(C,S)}return null}function w(C,E,S,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return C=C.get(S)||null,c(E,C,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case xl:return C=C.get(j.key===null?S:j.key)||null,u(E,C,j,N);case ji:return C=C.get(j.key===null?S:j.key)||null,d(E,C,j,N);case es:var F=j._init;return w(C,E,S,F(j._payload),N)}if(Go(j)||Lo(j))return C=C.get(S)||null,p(E,C,j,N,null);Ll(E,j)}return null}function P(C,E,S,j){for(var N=null,F=null,v=E,y=E=0,I=null;v!==null&&y<S.length;y++){v.index>y?(I=v,v=null):I=v.sibling;var A=g(C,v,S[y],j);if(A===null){v===null&&(v=I);break}t&&v&&A.alternate===null&&e(C,v),E=i(A,E,y),F===null?N=A:F.sibling=A,F=A,v=I}if(y===S.length)return n(C,v),nt&&Ws(C,y),N;if(v===null){for(;y<S.length;y++)v=m(C,S[y],j),v!==null&&(E=i(v,E,y),F===null?N=v:F.sibling=v,F=v);return nt&&Ws(C,y),N}for(v=r(C,v);y<S.length;y++)I=w(v,C,y,S[y],j),I!==null&&(t&&I.alternate!==null&&v.delete(I.key===null?y:I.key),E=i(I,E,y),F===null?N=I:F.sibling=I,F=I);return t&&v.forEach(function(k){return e(C,k)}),nt&&Ws(C,y),N}function O(C,E,S,j){var N=Lo(S);if(typeof N!="function")throw Error(X(150));if(S=N.call(S),S==null)throw Error(X(151));for(var F=N=null,v=E,y=E=0,I=null,A=S.next();v!==null&&!A.done;y++,A=S.next()){v.index>y?(I=v,v=null):I=v.sibling;var k=g(C,v,A.value,j);if(k===null){v===null&&(v=I);break}t&&v&&k.alternate===null&&e(C,v),E=i(k,E,y),F===null?N=k:F.sibling=k,F=k,v=I}if(A.done)return n(C,v),nt&&Ws(C,y),N;if(v===null){for(;!A.done;y++,A=S.next())A=m(C,A.value,j),A!==null&&(E=i(A,E,y),F===null?N=A:F.sibling=A,F=A);return nt&&Ws(C,y),N}for(v=r(C,v);!A.done;y++,A=S.next())A=w(v,C,y,A.value,j),A!==null&&(t&&A.alternate!==null&&v.delete(A.key===null?y:A.key),E=i(A,E,y),F===null?N=A:F.sibling=A,F=A);return t&&v.forEach(function(R){return e(C,R)}),nt&&Ws(C,y),N}function $(C,E,S,j){if(typeof S=="object"&&S!==null&&S.type===bi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case xl:e:{for(var N=S.key,F=E;F!==null;){if(F.key===N){if(N=S.type,N===bi){if(F.tag===7){n(C,F.sibling),E=s(F,S.props.children),E.return=C,C=E;break e}}else if(F.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===es&&Ag(N)===F.type){n(C,F.sibling),E=s(F,S.props),E.ref=$o(C,F,S),E.return=C,C=E;break e}n(C,F);break}else e(C,F);F=F.sibling}S.type===bi?(E=ti(S.props.children,C.mode,j,S.key),E.return=C,C=E):(j=lc(S.type,S.key,S.props,null,C.mode,j),j.ref=$o(C,E,S),j.return=C,C=j)}return o(C);case ji:e:{for(F=S.key;E!==null;){if(E.key===F)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(C,E.sibling),E=s(E,S.children||[]),E.return=C,C=E;break e}else{n(C,E);break}else e(C,E);E=E.sibling}E=bd(S,C.mode,j),E.return=C,C=E}return o(C);case es:return F=S._init,$(C,E,F(S._payload),j)}if(Go(S))return P(C,E,S,j);if(Lo(S))return O(C,E,S,j);Ll(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(C,E.sibling),E=s(E,S),E.return=C,C=E):(n(C,E),E=jd(S,C.mode,j),E.return=C,C=E),o(C)):n(C,E)}return $}var io=X_(!0),Z_=X_(!1),jc=Os(null),bc=null,Bi=null,zf=null;function Bf(){zf=Bi=bc=null}function $f(t){var e=jc.current;Ze(jc),t._currentValue=e}function Sh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Yi(t,e){bc=t,zf=Bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function zn(t){var e=t._currentValue;if(zf!==t)if(t={context:t,memoizedValue:e,next:null},Bi===null){if(bc===null)throw Error(X(308));Bi=t,bc.dependencies={lanes:0,firstContext:t}}else Bi=Bi.next=t;return e}var Js=null;function Hf(t){Js===null?Js=[t]:Js.push(t)}function e0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Hf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ur(t,r)}function Ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ts=!1;function qf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ur(t,n)}return s=r.interleaved,s===null?(e.next=e,Hf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ur(t,n)}function nc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nf(t,n)}}function Cg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oc(t,e,n,r){var s=t.updateQueue;ts=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=d=u=null,c=i;do{var g=c.lane,w=c.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var P=t,O=c;switch(g=e,w=n,O.tag){case 1:if(P=O.payload,typeof P=="function"){m=P.call(w,m,g);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=O.payload,g=typeof P=="function"?P.call(w,m,g):P,g==null)break e;m=at({},m,g);break e;case 2:ts=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=w,u=m):p=p.next=w,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ai|=o,t.lanes=o,t.memoizedState=m}}function xg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(X(191,s));s.call(r)}}}var Ja={},hr=Os(Ja),Ra=Os(Ja),Da=Os(Ja);function Xs(t){if(t===Ja)throw Error(X(174));return t}function Wf(t,e){switch(We(Da,e),We(Ra,t),We(hr,Ja),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sh(e,t)}Ze(hr),We(hr,e)}function oo(){Ze(hr),Ze(Ra),Ze(Da)}function n0(t){Xs(Da.current);var e=Xs(hr.current),n=sh(e,t.type);e!==n&&(We(Ra,t),We(hr,n))}function Gf(t){Ra.current===t&&(Ze(hr),Ze(Ra))}var it=Os(0);function Mc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xd=[];function Kf(){for(var t=0;t<xd.length;t++)xd[t]._workInProgressVersionPrimary=null;xd.length=0}var rc=Gr.ReactCurrentDispatcher,Pd=Gr.ReactCurrentBatchConfig,oi=0,ot=null,Ct=null,Rt=null,Vc=!1,ca=!1,ja=0,VS=0;function qt(){throw Error(X(321))}function Qf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!er(t[n],e[n]))return!1;return!0}function Yf(t,e,n,r,s,i){if(oi=i,ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rc.current=t===null||t.memoizedState===null?zS:BS,t=n(r,s),ca){i=0;do{if(ca=!1,ja=0,25<=i)throw Error(X(301));i+=1,Rt=Ct=null,e.updateQueue=null,rc.current=$S,t=n(r,s)}while(ca)}if(rc.current=Lc,e=Ct!==null&&Ct.next!==null,oi=0,Rt=Ct=ot=null,Vc=!1,e)throw Error(X(300));return t}function Jf(){var t=ja!==0;return ja=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?ot.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Bn(){if(Ct===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Rt===null?ot.memoizedState:Rt.next;if(e!==null)Rt=e,Ct=t;else{if(t===null)throw Error(X(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Rt===null?ot.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function ba(t,e){return typeof e=="function"?e(t):e}function kd(t){var e=Bn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=Ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var p=d.lane;if((oi&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,ot.lanes|=p,ai|=p}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,er(r,e.memoizedState)||(dn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ot.lanes|=i,ai|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Nd(t){var e=Bn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);er(i,e.memoizedState)||(dn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function r0(){}function s0(t,e){var n=ot,r=Bn(),s=e(),i=!er(r.memoizedState,s);if(i&&(r.memoizedState=s,dn=!0),r=r.queue,Xf(a0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Oa(9,o0.bind(null,n,r,s,e),void 0,null),Dt===null)throw Error(X(349));oi&30||i0(n,e,s)}return s}function i0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function o0(t,e,n,r){e.value=n,e.getSnapshot=r,l0(e)&&c0(t)}function a0(t,e,n){return n(function(){l0(e)&&c0(t)})}function l0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!er(t,n)}catch{return!0}}function c0(t){var e=Ur(t,1);e!==null&&Zn(e,t,1,-1)}function Pg(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:t},e.queue=t,t=t.dispatch=US.bind(null,ot,t),[e.memoizedState,t]}function Oa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function u0(){return Bn().memoizedState}function sc(t,e,n,r){var s=ar();ot.flags|=t,s.memoizedState=Oa(1|e,n,void 0,r===void 0?null:r)}function wu(t,e,n,r){var s=Bn();r=r===void 0?null:r;var i=void 0;if(Ct!==null){var o=Ct.memoizedState;if(i=o.destroy,r!==null&&Qf(r,o.deps)){s.memoizedState=Oa(e,n,i,r);return}}ot.flags|=t,s.memoizedState=Oa(1|e,n,i,r)}function kg(t,e){return sc(8390656,8,t,e)}function Xf(t,e){return wu(2048,8,t,e)}function d0(t,e){return wu(4,2,t,e)}function h0(t,e){return wu(4,4,t,e)}function f0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p0(t,e,n){return n=n!=null?n.concat([t]):null,wu(4,4,f0.bind(null,e,t),n)}function Zf(){}function m0(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function g0(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function v0(t,e,n){return oi&21?(er(n,e)||(n=T_(),ot.lanes|=n,ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function LS(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var r=Pd.transition;Pd.transition={};try{t(!1),e()}finally{ze=n,Pd.transition=r}}function y0(){return Bn().memoizedState}function FS(t,e,n){var r=ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_0(t))w0(e,n);else if(n=e0(t,e,n,r),n!==null){var s=nn();Zn(n,t,r,s),E0(n,e,r)}}function US(t,e,n){var r=ys(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_0(t))w0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,er(c,o)){var u=e.interleaved;u===null?(s.next=s,Hf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=e0(t,e,s,r),n!==null&&(s=nn(),Zn(n,t,r,s),E0(n,e,r))}}function _0(t){var e=t.alternate;return t===ot||e!==null&&e===ot}function w0(t,e){ca=Vc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function E0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nf(t,n)}}var Lc={readContext:zn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},zS={readContext:zn,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:zn,useEffect:kg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sc(4194308,4,f0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sc(4194308,4,t,e)},useInsertionEffect:function(t,e){return sc(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FS.bind(null,ot,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:Pg,useDebugValue:Zf,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=Pg(!1),e=t[0];return t=LS.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ot,s=ar();if(nt){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Dt===null)throw Error(X(349));oi&30||i0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,kg(a0.bind(null,r,i,t),[t]),r.flags|=2048,Oa(9,o0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ar(),e=Dt.identifierPrefix;if(nt){var n=Rr,r=Nr;n=(r&~(1<<32-Xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ja++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BS={readContext:zn,useCallback:m0,useContext:zn,useEffect:Xf,useImperativeHandle:p0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:g0,useReducer:kd,useRef:u0,useState:function(){return kd(ba)},useDebugValue:Zf,useDeferredValue:function(t){var e=Bn();return v0(e,Ct.memoizedState,t)},useTransition:function(){var t=kd(ba)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:r0,useSyncExternalStore:s0,useId:y0,unstable_isNewReconciler:!1},$S={readContext:zn,useCallback:m0,useContext:zn,useEffect:Xf,useImperativeHandle:p0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:g0,useReducer:Nd,useRef:u0,useState:function(){return Nd(ba)},useDebugValue:Zf,useDeferredValue:function(t){var e=Bn();return Ct===null?e.memoizedState=t:v0(e,Ct.memoizedState,t)},useTransition:function(){var t=Nd(ba)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:r0,useSyncExternalStore:s0,useId:y0,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=at({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ah(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:at({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Eu={isMounted:function(t){return(t=t._reactInternals)?vi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nn(),s=ys(t),i=Or(r,s);i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(Zn(e,t,s,r),nc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nn(),s=ys(t),i=Or(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(Zn(e,t,s,r),nc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),r=ys(t),s=Or(n,r);s.tag=2,e!=null&&(s.callback=e),e=gs(t,s,r),e!==null&&(Zn(e,t,r,n),nc(e,t,r))}};function Ng(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!xa(n,r)||!xa(s,i):!0}function T0(t,e,n){var r=!1,s=As,i=e.contextType;return typeof i=="object"&&i!==null?i=zn(i):(s=pn(e)?si:Jt.current,r=e.contextTypes,i=(r=r!=null)?ro(t,s):As),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Rg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Eu.enqueueReplaceState(e,e.state,null)}function Ch(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},qf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=zn(i):(i=pn(e)?si:Jt.current,s.context=ro(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ah(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Eu.enqueueReplaceState(s,s.state,null),Oc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ao(t,e){try{var n="",r=e;do n+=vI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Rd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HS=typeof WeakMap=="function"?WeakMap:Map;function I0(t,e,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Uc||(Uc=!0,Vh=r),xh(t,e)},n}function S0(t,e,n){n=Or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){xh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){xh(t,e),typeof r!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Dg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=s1.bind(null,t,e,n),e.then(t,t))}function jg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Or(-1,1),e.tag=2,gs(n,e,1))),n.lanes|=1),t)}var qS=Gr.ReactCurrentOwner,dn=!1;function tn(t,e,n,r){e.child=t===null?Z_(e,null,n,r):io(e,t.child,n,r)}function Og(t,e,n,r,s){n=n.render;var i=e.ref;return Yi(e,s),r=Yf(t,e,n,r,i,s),n=Jf(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zr(t,e,s)):(nt&&n&&Lf(e),e.flags|=1,tn(t,e,r,s),e.child)}function Mg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ap(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,A0(t,e,i,r,s)):(t=lc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xa,n(o,r)&&t.ref===e.ref)return zr(t,e,s)}return e.flags|=1,t=_s(i,r),t.ref=e.ref,t.return=e,e.child=t}function A0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(xa(i,r)&&t.ref===e.ref)if(dn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,zr(t,e,s)}return Ph(t,e,n,r,s)}function C0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Hi,En),En|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(Hi,En),En|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,We(Hi,En),En|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,We(Hi,En),En|=r;return tn(t,e,s,n),e.child}function x0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ph(t,e,n,r,s){var i=pn(n)?si:Jt.current;return i=ro(e,i),Yi(e,s),n=Yf(t,e,n,r,i,s),r=Jf(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zr(t,e,s)):(nt&&r&&Lf(e),e.flags|=1,tn(t,e,n,s),e.child)}function Vg(t,e,n,r,s){if(pn(n)){var i=!0;Nc(e)}else i=!1;if(Yi(e,s),e.stateNode===null)ic(t,e),T0(e,n,r),Ch(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=zn(d):(d=pn(n)?si:Jt.current,d=ro(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Rg(e,o,r,d),ts=!1;var g=e.memoizedState;o.state=g,Oc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||fn.current||ts?(typeof p=="function"&&(Ah(e,n,p,r),u=e.memoizedState),(c=ts||Ng(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,t0(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Kn(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=zn(u):(u=pn(n)?si:Jt.current,u=ro(e,u));var w=n.getDerivedStateFromProps;(p=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&Rg(e,o,r,u),ts=!1,g=e.memoizedState,o.state=g,Oc(e,r,o,s);var P=e.memoizedState;c!==m||g!==P||fn.current||ts?(typeof w=="function"&&(Ah(e,n,w,r),P=e.memoizedState),(d=ts||Ng(e,n,d,r,g,P,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return kh(t,e,n,r,i,s)}function kh(t,e,n,r,s,i){x0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Tg(e,n,!1),zr(t,e,i);r=e.stateNode,qS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=io(e,t.child,null,i),e.child=io(e,null,c,i)):tn(t,e,c,i),e.memoizedState=r.state,s&&Tg(e,n,!0),e.child}function P0(t){var e=t.stateNode;e.pendingContext?Eg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Eg(t,e.context,!1),Wf(t,e.containerInfo)}function Lg(t,e,n,r,s){return so(),Uf(s),e.flags|=256,tn(t,e,n,r),e.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function Rh(t){return{baseLanes:t,cachePool:null,transitions:null}}function k0(t,e,n){var r=e.pendingProps,s=it.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),We(it,s&1),t===null)return Ih(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Su(o,r,0,null),t=ti(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Rh(n),e.memoizedState=Nh,t):ep(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return WS(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=_s(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=_s(c,i):(i=ti(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Rh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Nh,r}return i=t.child,t=i.sibling,r=_s(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ep(t,e){return e=Su({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fl(t,e,n,r){return r!==null&&Uf(r),io(e,t.child,null,n),t=ep(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Rd(Error(X(422))),Fl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Su({mode:"visible",children:r.children},s,0,null),i=ti(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&io(e,t.child,null,o),e.child.memoizedState=Rh(o),e.memoizedState=Nh,i);if(!(e.mode&1))return Fl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(X(419)),r=Rd(i,r,void 0),Fl(t,e,o,r)}if(c=(o&t.childLanes)!==0,dn||c){if(r=Dt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ur(t,s),Zn(r,t,s,-1))}return op(),r=Rd(Error(X(421))),Fl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=i1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,In=ms(s.nextSibling),An=e,nt=!0,Yn=null,t!==null&&(On[Mn++]=Nr,On[Mn++]=Rr,On[Mn++]=ii,Nr=t.id,Rr=t.overflow,ii=e),e=ep(e,r.children),e.flags|=4096,e)}function Fg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sh(t.return,e,n)}function Dd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function N0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(tn(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fg(t,n,e);else if(t.tag===19)Fg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(We(it,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Mc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Dd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Mc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Dd(e,!0,n,null,i);break;case"together":Dd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ic(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=_s(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_s(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GS(t,e,n){switch(e.tag){case 3:P0(e),so();break;case 5:n0(e);break;case 1:pn(e.type)&&Nc(e);break;case 4:Wf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;We(jc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(We(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?k0(t,e,n):(We(it,it.current&1),t=zr(t,e,n),t!==null?t.sibling:null);We(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return N0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),We(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,C0(t,e,n)}return zr(t,e,n)}var R0,Dh,D0,j0;R0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dh=function(){};D0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xs(hr.current);var i=null;switch(n){case"input":s=eh(t,s),r=eh(t,r),i=[];break;case"select":s=at({},s,{value:void 0}),r=at({},r,{value:void 0}),i=[];break;case"textarea":s=rh(t,s),r=rh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pc)}ih(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(wa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(wa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Je("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};j0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ho(t,e){if(!nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KS(t,e,n){var r=e.pendingProps;switch(Ff(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return pn(e.type)&&kc(),Wt(e),null;case 3:return r=e.stateNode,oo(),Ze(fn),Ze(Jt),Kf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(Uh(Yn),Yn=null))),Dh(t,e),Wt(e),null;case 5:Gf(e);var s=Xs(Da.current);if(n=e.type,t!==null&&e.stateNode!=null)D0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Wt(e),null}if(t=Xs(hr.current),Vl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ur]=e,r[Na]=i,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(s=0;s<Qo.length;s++)Je(Qo[s],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":Km(r,i),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Je("invalid",r);break;case"textarea":Ym(r,i),Je("invalid",r)}ih(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ml(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ml(r.textContent,c,t),s=["children",""+c]):wa.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":Pl(r),Qm(r,i,!0);break;case"textarea":Pl(r),Jm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Pc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=a_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ur]=e,t[Na]=r,R0(t,e,!1,!1),e.stateNode=t;e:{switch(o=oh(n,r),n){case"dialog":Je("cancel",t),Je("close",t),s=r;break;case"iframe":case"object":case"embed":Je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Qo.length;s++)Je(Qo[s],t);s=r;break;case"source":Je("error",t),s=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),s=r;break;case"details":Je("toggle",t),s=r;break;case"input":Km(t,r),s=eh(t,r),Je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=at({},r,{value:void 0}),Je("invalid",t);break;case"textarea":Ym(t,r),s=rh(t,r),Je("invalid",t);break;default:s=r}ih(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?u_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&l_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ea(t,u):typeof u=="number"&&Ea(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Je("scroll",t):u!=null&&Sf(t,i,u,o))}switch(n){case"input":Pl(t),Qm(t,r,!1);break;case"textarea":Pl(t),Jm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ss(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Wi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Wi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Pc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)j0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=Xs(Da.current),Xs(hr.current),Vl(e)){if(r=e.stateNode,n=e.memoizedProps,r[ur]=e,(i=r.nodeValue!==n)&&(t=An,t!==null))switch(t.tag){case 3:Ml(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ml(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ur]=e,e.stateNode=r}return Wt(e),null;case 13:if(Ze(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&In!==null&&e.mode&1&&!(e.flags&128))J_(),so(),e.flags|=98560,i=!1;else if(i=Vl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[ur]=e}else so(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),i=!1}else Yn!==null&&(Uh(Yn),Yn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?xt===0&&(xt=3):op())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return oo(),Dh(t,e),t===null&&Pa(e.stateNode.containerInfo),Wt(e),null;case 10:return $f(e.type._context),Wt(e),null;case 17:return pn(e.type)&&kc(),Wt(e),null;case 19:if(Ze(it),i=e.memoizedState,i===null)return Wt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ho(i,!1);else{if(xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mc(t),o!==null){for(e.flags|=128,Ho(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(it,it.current&1|2),e.child}t=t.sibling}i.tail!==null&&wt()>lo&&(e.flags|=128,r=!0,Ho(i,!1),e.lanes=4194304)}else{if(!r)if(t=Mc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ho(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!nt)return Wt(e),null}else 2*wt()-i.renderingStartTime>lo&&n!==1073741824&&(e.flags|=128,r=!0,Ho(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=wt(),e.sibling=null,n=it.current,We(it,r?n&1|2:n&1),e):(Wt(e),null);case 22:case 23:return ip(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?En&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function QS(t,e){switch(Ff(e),e.tag){case 1:return pn(e.type)&&kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oo(),Ze(fn),Ze(Jt),Kf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gf(e),null;case 13:if(Ze(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));so()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(it),null;case 4:return oo(),null;case 10:return $f(e.type._context),null;case 22:case 23:return ip(),null;case 24:return null;default:return null}}var Ul=!1,Qt=!1,YS=typeof WeakSet=="function"?WeakSet:Set,le=null;function $i(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){mt(t,e,r)}else n.current=null}function jh(t,e,n){try{n()}catch(r){mt(t,e,r)}}var Ug=!1;function JS(t,e){if(gh=Ac,t=L_(),Vf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,p=0,m=t,g=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(w=m.firstChild)!==null;)g=m,m=w;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++p===r&&(u=o),(w=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(vh={focusedElem:t,selectionRange:n},Ac=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var O=P.memoizedProps,$=P.memoizedState,C=e.stateNode,E=C.getSnapshotBeforeUpdate(e.elementType===e.type?O:Kn(e.type,O),$);C.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(j){mt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return P=Ug,Ug=!1,P}function ua(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&jh(e,n,i)}s=s.next}while(s!==r)}}function Tu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function b0(t){var e=t.alternate;e!==null&&(t.alternate=null,b0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ur],delete e[Na],delete e[wh],delete e[jS],delete e[bS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function O0(t){return t.tag===5||t.tag===3||t.tag===4}function zg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||O0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Oh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pc));else if(r!==4&&(t=t.child,t!==null))for(Oh(t,e,n),t=t.sibling;t!==null;)Oh(t,e,n),t=t.sibling}function Mh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mh(t,e,n),t=t.sibling;t!==null;)Mh(t,e,n),t=t.sibling}var bt=null,Qn=!1;function Jr(t,e,n){for(n=n.child;n!==null;)M0(t,e,n),n=n.sibling}function M0(t,e,n){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(pu,n)}catch{}switch(n.tag){case 5:Qt||$i(n,e);case 6:var r=bt,s=Qn;bt=null,Jr(t,e,n),bt=r,Qn=s,bt!==null&&(Qn?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(Qn?(t=bt,n=n.stateNode,t.nodeType===8?Ad(t.parentNode,n):t.nodeType===1&&Ad(t,n),Aa(t)):Ad(bt,n.stateNode));break;case 4:r=bt,s=Qn,bt=n.stateNode.containerInfo,Qn=!0,Jr(t,e,n),bt=r,Qn=s;break;case 0:case 11:case 14:case 15:if(!Qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jh(n,e,o),s=s.next}while(s!==r)}Jr(t,e,n);break;case 1:if(!Qt&&($i(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){mt(n,e,c)}Jr(t,e,n);break;case 21:Jr(t,e,n);break;case 22:n.mode&1?(Qt=(r=Qt)||n.memoizedState!==null,Jr(t,e,n),Qt=r):Jr(t,e,n);break;default:Jr(t,e,n)}}function Bg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YS),e.forEach(function(r){var s=o1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:bt=c.stateNode,Qn=!1;break e;case 3:bt=c.stateNode.containerInfo,Qn=!0;break e;case 4:bt=c.stateNode.containerInfo,Qn=!0;break e}c=c.return}if(bt===null)throw Error(X(160));M0(i,o,s),bt=null,Qn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){mt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)V0(e,t),e=e.sibling}function V0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(e,t),or(t),r&4){try{ua(3,t,t.return),Tu(3,t)}catch(O){mt(t,t.return,O)}try{ua(5,t,t.return)}catch(O){mt(t,t.return,O)}}break;case 1:Gn(e,t),or(t),r&512&&n!==null&&$i(n,n.return);break;case 5:if(Gn(e,t),or(t),r&512&&n!==null&&$i(n,n.return),t.flags&32){var s=t.stateNode;try{Ea(s,"")}catch(O){mt(t,t.return,O)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&i_(s,i),oh(c,o);var d=oh(c,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?u_(s,m):p==="dangerouslySetInnerHTML"?l_(s,m):p==="children"?Ea(s,m):Sf(s,p,m,d)}switch(c){case"input":th(s,i);break;case"textarea":o_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Wi(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?Wi(s,!!i.multiple,i.defaultValue,!0):Wi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Na]=i}catch(O){mt(t,t.return,O)}}break;case 6:if(Gn(e,t),or(t),r&4){if(t.stateNode===null)throw Error(X(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(O){mt(t,t.return,O)}}break;case 3:if(Gn(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Aa(e.containerInfo)}catch(O){mt(t,t.return,O)}break;case 4:Gn(e,t),or(t);break;case 13:Gn(e,t),or(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(rp=wt())),r&4&&Bg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(d=Qt)||p,Gn(e,t),Qt=d):Gn(e,t),or(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(le=t,p=t.child;p!==null;){for(m=le=p;le!==null;){switch(g=le,w=g.child,g.tag){case 0:case 11:case 14:case 15:ua(4,g,g.return);break;case 1:$i(g,g.return);var P=g.stateNode;if(typeof P.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(O){mt(r,n,O)}}break;case 5:$i(g,g.return);break;case 22:if(g.memoizedState!==null){Hg(m);continue}}w!==null?(w.return=g,le=w):Hg(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=c_("display",o))}catch(O){mt(t,t.return,O)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(O){mt(t,t.return,O)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Gn(e,t),or(t),r&4&&Bg(t);break;case 21:break;default:Gn(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(O0(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ea(s,""),r.flags&=-33);var i=zg(t);Mh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=zg(t);Oh(t,c,o);break;default:throw Error(X(161))}}catch(u){mt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XS(t,e,n){le=t,L0(t)}function L0(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var s=le,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ul;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Qt;c=Ul;var d=Qt;if(Ul=o,(Qt=u)&&!d)for(le=s;le!==null;)o=le,u=o.child,o.tag===22&&o.memoizedState!==null?qg(s):u!==null?(u.return=o,le=u):qg(s);for(;i!==null;)le=i,L0(i),i=i.sibling;le=s,Ul=c,Qt=d}$g(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,le=i):$g(t)}}function $g(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||Tu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Aa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Qt||e.flags&512&&bh(e)}catch(g){mt(e,e.return,g)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function Hg(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function qg(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Tu(4,e)}catch(u){mt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){mt(e,s,u)}}var i=e.return;try{bh(e)}catch(u){mt(e,i,u)}break;case 5:var o=e.return;try{bh(e)}catch(u){mt(e,o,u)}}}catch(u){mt(e,e.return,u)}if(e===t){le=null;break}var c=e.sibling;if(c!==null){c.return=e.return,le=c;break}le=e.return}}var ZS=Math.ceil,Fc=Gr.ReactCurrentDispatcher,tp=Gr.ReactCurrentOwner,Fn=Gr.ReactCurrentBatchConfig,be=0,Dt=null,Tt=null,Vt=0,En=0,Hi=Os(0),xt=0,Ma=null,ai=0,Iu=0,np=0,da=null,cn=null,rp=0,lo=1/0,Pr=null,Uc=!1,Vh=null,vs=null,zl=!1,us=null,zc=0,ha=0,Lh=null,oc=-1,ac=0;function nn(){return be&6?wt():oc!==-1?oc:oc=wt()}function ys(t){return t.mode&1?be&2&&Vt!==0?Vt&-Vt:MS.transition!==null?(ac===0&&(ac=T_()),ac):(t=ze,t!==0||(t=window.event,t=t===void 0?16:k_(t.type)),t):1}function Zn(t,e,n,r){if(50<ha)throw ha=0,Lh=null,Error(X(185));Ka(t,n,r),(!(be&2)||t!==Dt)&&(t===Dt&&(!(be&2)&&(Iu|=n),xt===4&&rs(t,Vt)),mn(t,r),n===1&&be===0&&!(e.mode&1)&&(lo=wt()+500,_u&&Ms()))}function mn(t,e){var n=t.callbackNode;MI(t,e);var r=Sc(t,t===Dt?Vt:0);if(r===0)n!==null&&eg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&eg(n),e===1)t.tag===0?OS(Wg.bind(null,t)):K_(Wg.bind(null,t)),RS(function(){!(be&6)&&Ms()}),n=null;else{switch(I_(r)){case 1:n=kf;break;case 4:n=w_;break;case 16:n=Ic;break;case 536870912:n=E_;break;default:n=Ic}n=W0(n,F0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function F0(t,e){if(oc=-1,ac=0,be&6)throw Error(X(327));var n=t.callbackNode;if(Ji()&&t.callbackNode!==n)return null;var r=Sc(t,t===Dt?Vt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bc(t,r);else{e=r;var s=be;be|=2;var i=z0();(Dt!==t||Vt!==e)&&(Pr=null,lo=wt()+500,ei(t,e));do try{n1();break}catch(c){U0(t,c)}while(!0);Bf(),Fc.current=i,be=s,Tt!==null?e=0:(Dt=null,Vt=0,e=xt)}if(e!==0){if(e===2&&(s=dh(t),s!==0&&(r=s,e=Fh(t,s))),e===1)throw n=Ma,ei(t,0),rs(t,r),mn(t,wt()),n;if(e===6)rs(t,r);else{if(s=t.current.alternate,!(r&30)&&!e1(s)&&(e=Bc(t,r),e===2&&(i=dh(t),i!==0&&(r=i,e=Fh(t,i))),e===1))throw n=Ma,ei(t,0),rs(t,r),mn(t,wt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Gs(t,cn,Pr);break;case 3:if(rs(t,r),(r&130023424)===r&&(e=rp+500-wt(),10<e)){if(Sc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){nn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=_h(Gs.bind(null,t,cn,Pr),e);break}Gs(t,cn,Pr);break;case 4:if(rs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Xn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZS(r/1960))-r,10<r){t.timeoutHandle=_h(Gs.bind(null,t,cn,Pr),r);break}Gs(t,cn,Pr);break;case 5:Gs(t,cn,Pr);break;default:throw Error(X(329))}}}return mn(t,wt()),t.callbackNode===n?F0.bind(null,t):null}function Fh(t,e){var n=da;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=Bc(t,e),t!==2&&(e=cn,cn=n,e!==null&&Uh(e)),t}function Uh(t){cn===null?cn=t:cn.push.apply(cn,t)}function e1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!er(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rs(t,e){for(e&=~np,e&=~Iu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xn(e),r=1<<n;t[n]=-1,e&=~r}}function Wg(t){if(be&6)throw Error(X(327));Ji();var e=Sc(t,0);if(!(e&1))return mn(t,wt()),null;var n=Bc(t,e);if(t.tag!==0&&n===2){var r=dh(t);r!==0&&(e=r,n=Fh(t,r))}if(n===1)throw n=Ma,ei(t,0),rs(t,e),mn(t,wt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,cn,Pr),mn(t,wt()),null}function sp(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(lo=wt()+500,_u&&Ms())}}function li(t){us!==null&&us.tag===0&&!(be&6)&&Ji();var e=be;be|=1;var n=Fn.transition,r=ze;try{if(Fn.transition=null,ze=1,t)return t()}finally{ze=r,Fn.transition=n,be=e,!(be&6)&&Ms()}}function ip(){En=Hi.current,Ze(Hi)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NS(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(Ff(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kc();break;case 3:oo(),Ze(fn),Ze(Jt),Kf();break;case 5:Gf(r);break;case 4:oo();break;case 13:Ze(it);break;case 19:Ze(it);break;case 10:$f(r.type._context);break;case 22:case 23:ip()}n=n.return}if(Dt=t,Tt=t=_s(t.current,null),Vt=En=e,xt=0,Ma=null,np=Iu=ai=0,cn=da=null,Js!==null){for(e=0;e<Js.length;e++)if(n=Js[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Js=null}return t}function U0(t,e){do{var n=Tt;try{if(Bf(),rc.current=Lc,Vc){for(var r=ot.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Vc=!1}if(oi=0,Rt=Ct=ot=null,ca=!1,ja=0,tp.current=null,n===null||n.return===null){xt=1,Ma=e,Tt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=Vt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=c,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var w=jg(o);if(w!==null){w.flags&=-257,bg(w,o,c,i,e),w.mode&1&&Dg(i,d,e),e=w,u=d;var P=e.updateQueue;if(P===null){var O=new Set;O.add(u),e.updateQueue=O}else P.add(u);break e}else{if(!(e&1)){Dg(i,d,e),op();break e}u=Error(X(426))}}else if(nt&&c.mode&1){var $=jg(o);if($!==null){!($.flags&65536)&&($.flags|=256),bg($,o,c,i,e),Uf(ao(u,c));break e}}i=u=ao(u,c),xt!==4&&(xt=2),da===null?da=[i]:da.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var C=I0(i,u,e);Cg(i,C);break e;case 1:c=u;var E=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(vs===null||!vs.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=S0(i,c,e);Cg(i,j);break e}}i=i.return}while(i!==null)}$0(n)}catch(N){e=N,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function z0(){var t=Fc.current;return Fc.current=Lc,t===null?Lc:t}function op(){(xt===0||xt===3||xt===2)&&(xt=4),Dt===null||!(ai&268435455)&&!(Iu&268435455)||rs(Dt,Vt)}function Bc(t,e){var n=be;be|=2;var r=z0();(Dt!==t||Vt!==e)&&(Pr=null,ei(t,e));do try{t1();break}catch(s){U0(t,s)}while(!0);if(Bf(),be=n,Fc.current=r,Tt!==null)throw Error(X(261));return Dt=null,Vt=0,xt}function t1(){for(;Tt!==null;)B0(Tt)}function n1(){for(;Tt!==null&&!xI();)B0(Tt)}function B0(t){var e=q0(t.alternate,t,En);t.memoizedProps=t.pendingProps,e===null?$0(t):Tt=e,tp.current=null}function $0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QS(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,Tt=null;return}}else if(n=KS(n,e,En),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);xt===0&&(xt=5)}function Gs(t,e,n){var r=ze,s=Fn.transition;try{Fn.transition=null,ze=1,r1(t,e,n,r)}finally{Fn.transition=s,ze=r}return null}function r1(t,e,n,r){do Ji();while(us!==null);if(be&6)throw Error(X(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(VI(t,i),t===Dt&&(Tt=Dt=null,Vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zl||(zl=!0,W0(Ic,function(){return Ji(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Fn.transition,Fn.transition=null;var o=ze;ze=1;var c=be;be|=4,tp.current=null,JS(t,n),V0(n,t),IS(vh),Ac=!!gh,vh=gh=null,t.current=n,XS(n),PI(),be=c,ze=o,Fn.transition=i}else t.current=n;if(zl&&(zl=!1,us=t,zc=s),i=t.pendingLanes,i===0&&(vs=null),RI(n.stateNode),mn(t,wt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Uc)throw Uc=!1,t=Vh,Vh=null,t;return zc&1&&t.tag!==0&&Ji(),i=t.pendingLanes,i&1?t===Lh?ha++:(ha=0,Lh=t):ha=0,Ms(),null}function Ji(){if(us!==null){var t=I_(zc),e=Fn.transition,n=ze;try{if(Fn.transition=null,ze=16>t?16:t,us===null)var r=!1;else{if(t=us,us=null,zc=0,be&6)throw Error(X(331));var s=be;for(be|=4,le=t.current;le!==null;){var i=le,o=i.child;if(le.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(le=d;le!==null;){var p=le;switch(p.tag){case 0:case 11:case 15:ua(8,p,i)}var m=p.child;if(m!==null)m.return=p,le=m;else for(;le!==null;){p=le;var g=p.sibling,w=p.return;if(b0(p),p===d){le=null;break}if(g!==null){g.return=w,le=g;break}le=w}}}var P=i.alternate;if(P!==null){var O=P.child;if(O!==null){P.child=null;do{var $=O.sibling;O.sibling=null,O=$}while(O!==null)}}le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,le=o;else e:for(;le!==null;){if(i=le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ua(9,i,i.return)}var C=i.sibling;if(C!==null){C.return=i.return,le=C;break e}le=i.return}}var E=t.current;for(le=E;le!==null;){o=le;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,le=S;else e:for(o=E;le!==null;){if(c=le,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Tu(9,c)}}catch(N){mt(c,c.return,N)}if(c===o){le=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,le=j;break e}le=c.return}}if(be=s,Ms(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(pu,t)}catch{}r=!0}return r}finally{ze=n,Fn.transition=e}}return!1}function Gg(t,e,n){e=ao(n,e),e=I0(t,e,1),t=gs(t,e,1),e=nn(),t!==null&&(Ka(t,1,e),mn(t,e))}function mt(t,e,n){if(t.tag===3)Gg(t,t,n);else for(;e!==null;){if(e.tag===3){Gg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vs===null||!vs.has(r))){t=ao(n,t),t=S0(e,t,1),e=gs(e,t,1),t=nn(),e!==null&&(Ka(e,1,t),mn(e,t));break}}e=e.return}}function s1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(Vt&n)===n&&(xt===4||xt===3&&(Vt&130023424)===Vt&&500>wt()-rp?ei(t,0):np|=n),mn(t,e)}function H0(t,e){e===0&&(t.mode&1?(e=Rl,Rl<<=1,!(Rl&130023424)&&(Rl=4194304)):e=1);var n=nn();t=Ur(t,e),t!==null&&(Ka(t,e,n),mn(t,n))}function i1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),H0(t,n)}function o1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),H0(t,n)}var q0;q0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,GS(t,e,n);dn=!!(t.flags&131072)}else dn=!1,nt&&e.flags&1048576&&Q_(e,Dc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ic(t,e),t=e.pendingProps;var s=ro(e,Jt.current);Yi(e,n),s=Yf(null,e,r,t,s,n);var i=Jf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(r)?(i=!0,Nc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,qf(e),s.updater=Eu,e.stateNode=s,s._reactInternals=e,Ch(e,r,t,n),e=kh(null,e,r,!0,i,n)):(e.tag=0,nt&&i&&Lf(e),tn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ic(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=l1(r),t=Kn(r,t),s){case 0:e=Ph(null,e,r,t,n);break e;case 1:e=Vg(null,e,r,t,n);break e;case 11:e=Og(null,e,r,t,n);break e;case 14:e=Mg(null,e,r,Kn(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Ph(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Vg(t,e,r,s,n);case 3:e:{if(P0(e),t===null)throw Error(X(387));r=e.pendingProps,i=e.memoizedState,s=i.element,t0(t,e),Oc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ao(Error(X(423)),e),e=Lg(t,e,r,n,s);break e}else if(r!==s){s=ao(Error(X(424)),e),e=Lg(t,e,r,n,s);break e}else for(In=ms(e.stateNode.containerInfo.firstChild),An=e,nt=!0,Yn=null,n=Z_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(so(),r===s){e=zr(t,e,n);break e}tn(t,e,r,n)}e=e.child}return e;case 5:return n0(e),t===null&&Ih(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,yh(r,s)?o=null:i!==null&&yh(r,i)&&(e.flags|=32),x0(t,e),tn(t,e,o,n),e.child;case 6:return t===null&&Ih(e),null;case 13:return k0(t,e,n);case 4:return Wf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=io(e,null,r,n):tn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Og(t,e,r,s,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,We(jc,r._currentValue),r._currentValue=o,i!==null)if(er(i.value,o)){if(i.children===s.children&&!fn.current){e=zr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Or(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Sh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Sh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}tn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Yi(e,n),s=zn(s),r=r(s),e.flags|=1,tn(t,e,r,n),e.child;case 14:return r=e.type,s=Kn(r,e.pendingProps),s=Kn(r.type,s),Mg(t,e,r,s,n);case 15:return A0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),ic(t,e),e.tag=1,pn(r)?(t=!0,Nc(e)):t=!1,Yi(e,n),T0(e,r,s),Ch(e,r,s,n),kh(null,e,r,!0,t,n);case 19:return N0(t,e,n);case 22:return C0(t,e,n)}throw Error(X(156,e.tag))};function W0(t,e){return __(t,e)}function a1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,r){return new a1(t,e,n,r)}function ap(t){return t=t.prototype,!(!t||!t.isReactComponent)}function l1(t){if(typeof t=="function")return ap(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cf)return 11;if(t===xf)return 14}return 2}function _s(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ap(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bi:return ti(n.children,s,i,e);case Af:o=8,s|=8;break;case Yd:return t=Ln(12,n,e,s|2),t.elementType=Yd,t.lanes=i,t;case Jd:return t=Ln(13,n,e,s),t.elementType=Jd,t.lanes=i,t;case Xd:return t=Ln(19,n,e,s),t.elementType=Xd,t.lanes=i,t;case n_:return Su(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case e_:o=10;break e;case t_:o=9;break e;case Cf:o=11;break e;case xf:o=14;break e;case es:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Ln(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ti(t,e,n,r){return t=Ln(7,t,r,e),t.lanes=n,t}function Su(t,e,n,r){return t=Ln(22,t,r,e),t.elementType=n_,t.lanes=n,t.stateNode={isHidden:!1},t}function jd(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function bd(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function c1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pd(0),this.expirationTimes=pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function lp(t,e,n,r,s,i,o,c,u){return t=new c1(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ln(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qf(i),t}function u1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function G0(t){if(!t)return As;t=t._reactInternals;e:{if(vi(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(pn(n))return G_(t,n,e)}return e}function K0(t,e,n,r,s,i,o,c,u){return t=lp(n,r,!0,t,s,i,o,c,u),t.context=G0(null),n=t.current,r=nn(),s=ys(n),i=Or(r,s),i.callback=e??null,gs(n,i,s),t.current.lanes=s,Ka(t,s,r),mn(t,r),t}function Au(t,e,n,r){var s=e.current,i=nn(),o=ys(s);return n=G0(n),e.context===null?e.context=n:e.pendingContext=n,e=Or(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gs(s,e,o),t!==null&&(Zn(t,s,o,i),nc(t,s,o)),o}function $c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cp(t,e){Kg(t,e),(t=t.alternate)&&Kg(t,e)}function d1(){return null}var Q0=typeof reportError=="function"?reportError:function(t){console.error(t)};function up(t){this._internalRoot=t}Cu.prototype.render=up.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Au(t,e,null,null)};Cu.prototype.unmount=up.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;li(function(){Au(null,t,null,null)}),e[Fr]=null}};function Cu(t){this._internalRoot=t}Cu.prototype.unstable_scheduleHydration=function(t){if(t){var e=C_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ns.length&&e!==0&&e<ns[n].priority;n++);ns.splice(n,0,t),n===0&&P_(t)}};function dp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qg(){}function h1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=$c(o);i.call(d)}}var o=K0(e,r,t,0,null,!1,!1,"",Qg);return t._reactRootContainer=o,t[Fr]=o.current,Pa(t.nodeType===8?t.parentNode:t),li(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=$c(u);c.call(d)}}var u=lp(t,0,!1,null,null,!1,!1,"",Qg);return t._reactRootContainer=u,t[Fr]=u.current,Pa(t.nodeType===8?t.parentNode:t),li(function(){Au(e,u,n,r)}),u}function Pu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=$c(o);c.call(u)}}Au(e,o,t,s)}else o=h1(n,e,t,s,r);return $c(o)}S_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ko(e.pendingLanes);n!==0&&(Nf(e,n|1),mn(e,wt()),!(be&6)&&(lo=wt()+500,Ms()))}break;case 13:li(function(){var r=Ur(t,1);if(r!==null){var s=nn();Zn(r,t,1,s)}}),cp(t,1)}};Rf=function(t){if(t.tag===13){var e=Ur(t,134217728);if(e!==null){var n=nn();Zn(e,t,134217728,n)}cp(t,134217728)}};A_=function(t){if(t.tag===13){var e=ys(t),n=Ur(t,e);if(n!==null){var r=nn();Zn(n,t,e,r)}cp(t,e)}};C_=function(){return ze};x_=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};lh=function(t,e,n){switch(e){case"input":if(th(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yu(r);if(!s)throw Error(X(90));s_(r),th(r,s)}}}break;case"textarea":o_(t,n);break;case"select":e=n.value,e!=null&&Wi(t,!!n.multiple,e,!1)}};f_=sp;p_=li;var f1={usingClientEntryPoint:!1,Events:[Ya,Li,yu,d_,h_,sp]},qo={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p1={bundleType:qo.bundleType,version:qo.version,rendererPackageName:qo.rendererPackageName,rendererConfig:qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=v_(t),t===null?null:t.stateNode},findFiberByHostInstance:qo.findFiberByHostInstance||d1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{pu=Bl.inject(p1),dr=Bl}catch{}}xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f1;xn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dp(e))throw Error(X(200));return u1(t,e,null,n)};xn.createRoot=function(t,e){if(!dp(t))throw Error(X(299));var n=!1,r="",s=Q0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=lp(t,1,!1,null,null,n,!1,r,s),t[Fr]=e.current,Pa(t.nodeType===8?t.parentNode:t),new up(e)};xn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=v_(e),t=t===null?null:t.stateNode,t};xn.flushSync=function(t){return li(t)};xn.hydrate=function(t,e,n){if(!xu(e))throw Error(X(200));return Pu(null,t,e,!0,n)};xn.hydrateRoot=function(t,e,n){if(!dp(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Q0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=K0(e,null,t,1,n??null,s,!1,i,o),t[Fr]=e.current,Pa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Cu(e)};xn.render=function(t,e,n){if(!xu(e))throw Error(X(200));return Pu(null,t,e,!1,n)};xn.unmountComponentAtNode=function(t){if(!xu(t))throw Error(X(40));return t._reactRootContainer?(li(function(){Pu(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};xn.unstable_batchedUpdates=sp;xn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xu(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Pu(t,e,n,!1,r)};xn.version="18.3.1-next-f1338f8080-20240426";function Y0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y0)}catch(t){console.error(t)}}Y0(),Yy.exports=xn;var m1=Yy.exports,J0,Yg=m1;J0=Yg.createRoot,Yg.hydrateRoot;const g1=()=>{};var Jg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},v1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Z0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[p],n[m],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(X0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):v1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new y1;const g=i<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),m!==64){const P=d<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class y1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _1=function(t){const e=X0(t);return Z0.encodeByteArray(e,!0)},Hc=function(t){return _1(t).replace(/\./g,"")},ew=function(t){try{return Z0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=()=>w1().__FIREBASE_DEFAULTS__,T1=()=>{if(typeof process>"u"||typeof Jg>"u")return;const t=Jg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},I1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ew(t[1]);return e&&JSON.parse(e)},ku=()=>{try{return g1()||E1()||T1()||I1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tw=t=>{var e,n;return(n=(e=ku())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nw=t=>{const e=tw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},rw=()=>{var t;return(t=ku())===null||t===void 0?void 0:t.config},sw=t=>{var e;return(e=ku())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hc(JSON.stringify(n)),Hc(JSON.stringify(o)),""].join(".")}const fa={};function C1(){const t={prod:[],emulator:[]};for(const e of Object.keys(fa))fa[e]?t.emulator.push(e):t.prod.push(e);return t}function x1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Xg=!1;function fp(t,e){if(typeof window>"u"||typeof document>"u"||!yi(window.location.host)||fa[t]===e||fa[t]||Xg)return;fa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=C1().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Xg=!0,o()},g}function p(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=x1(r),w=n("text"),P=document.getElementById(w)||document.createElement("span"),O=n("learnmore"),$=document.getElementById(O)||document.createElement("a"),C=n("preprendIcon"),E=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;c(S),p($,O);const j=d();u(E,C),S.append(E,P,$,j),document.body.appendChild(S)}i?(P.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function k1(){var t;const e=(t=ku())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function D1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j1(){const t=Xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function b1(){return!k1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O1(){try{return typeof indexedDB=="object"}catch{return!1}}function M1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="FirebaseError";class Er extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=V1,Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}}class Xa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?L1(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Er(s,c,r)}}function L1(t,e){return t.replace(F1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const F1=/\{\$([^}]+)}/g;function U1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ci(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Zg(i)&&Zg(o)){if(!ci(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Zg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function z1(t,e){const n=new B1(t,e);return n.subscribe.bind(n)}class B1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Od),s.error===void 0&&(s.error=Od),s.complete===void 0&&(s.complete=Od);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Od(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class Cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new S1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(W1(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:q1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function q1(t){return t===Ks?void 0:t}function W1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new H1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const K1={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Q1=ke.INFO,Y1={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},J1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Y1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pp{constructor(e){this.name=e,this._logLevel=Q1,this._logHandler=J1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?K1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const X1=(t,e)=>e.some(n=>t instanceof n);let ev,tv;function Z1(){return ev||(ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eA(){return tv||(tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iw=new WeakMap,zh=new WeakMap,ow=new WeakMap,Md=new WeakMap,mp=new WeakMap;function tA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ws(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&iw.set(n,t)}).catch(()=>{}),mp.set(e,t),e}function nA(t){if(zh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});zh.set(t,e)}let Bh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ow.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rA(t){Bh=t(Bh)}function sA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vd(this),e,...n);return ow.set(r,e.sort?e.sort():[e]),ws(r)}:eA().includes(t)?function(...e){return t.apply(Vd(this),e),ws(iw.get(this))}:function(...e){return ws(t.apply(Vd(this),e))}}function iA(t){return typeof t=="function"?sA(t):(t instanceof IDBTransaction&&nA(t),X1(t,Z1())?new Proxy(t,Bh):t)}function ws(t){if(t instanceof IDBRequest)return tA(t);if(Md.has(t))return Md.get(t);const e=iA(t);return e!==t&&(Md.set(t,e),mp.set(e,t)),e}const Vd=t=>mp.get(t);function oA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=ws(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ws(o.result),u.oldVersion,u.newVersion,ws(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const aA=["get","getKey","getAll","getAllKeys","count"],lA=["put","add","delete","clear"],Ld=new Map;function nv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ld.get(e))return Ld.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=lA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||aA.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Ld.set(e,i),i}rA(t=>({...t,get:(e,n,r)=>nv(e,n)||t.get(e,n,r),has:(e,n)=>!!nv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $h="@firebase/app",rv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new pp("@firebase/app"),dA="@firebase/app-compat",hA="@firebase/analytics-compat",fA="@firebase/analytics",pA="@firebase/app-check-compat",mA="@firebase/app-check",gA="@firebase/auth",vA="@firebase/auth-compat",yA="@firebase/database",_A="@firebase/data-connect",wA="@firebase/database-compat",EA="@firebase/functions",TA="@firebase/functions-compat",IA="@firebase/installations",SA="@firebase/installations-compat",AA="@firebase/messaging",CA="@firebase/messaging-compat",xA="@firebase/performance",PA="@firebase/performance-compat",kA="@firebase/remote-config",NA="@firebase/remote-config-compat",RA="@firebase/storage",DA="@firebase/storage-compat",jA="@firebase/firestore",bA="@firebase/ai",OA="@firebase/firestore-compat",MA="firebase",VA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="[DEFAULT]",LA={[$h]:"fire-core",[dA]:"fire-core-compat",[fA]:"fire-analytics",[hA]:"fire-analytics-compat",[mA]:"fire-app-check",[pA]:"fire-app-check-compat",[gA]:"fire-auth",[vA]:"fire-auth-compat",[yA]:"fire-rtdb",[_A]:"fire-data-connect",[wA]:"fire-rtdb-compat",[EA]:"fire-fn",[TA]:"fire-fn-compat",[IA]:"fire-iid",[SA]:"fire-iid-compat",[AA]:"fire-fcm",[CA]:"fire-fcm-compat",[xA]:"fire-perf",[PA]:"fire-perf-compat",[kA]:"fire-rc",[NA]:"fire-rc-compat",[RA]:"fire-gcs",[DA]:"fire-gcs-compat",[jA]:"fire-fst",[OA]:"fire-fst-compat",[bA]:"fire-vertex","fire-js":"fire-js",[MA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Map,FA=new Map,qh=new Map;function sv(t,e){try{t.container.addComponent(e)}catch(n){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ui(t){const e=t.name;if(qh.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;qh.set(e,t);for(const n of qc.values())sv(n,t);for(const n of FA.values())sv(n,t);return!0}function Nu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Tn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new Xa("app","Firebase",UA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=VA;function Wh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hh,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Es.create("bad-app-name",{appName:String(s)});if(n||(n=rw()),!n)throw Es.create("no-options");const i=qc.get(s);if(i){if(ci(n,i.options)&&ci(r,i.config))return i;throw Es.create("duplicate-app",{appName:s})}const o=new G1(s);for(const u of qh.values())o.addComponent(u);const c=new zA(n,r,o);return qc.set(s,c),c}function gp(t=Hh){const e=qc.get(t);if(!e&&t===Hh&&rw())return Wh();if(!e)throw Es.create("no-app",{appName:t});return e}function fr(t,e,n){var r;let s=(r=LA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(c.join(" "));return}ui(new Cs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="firebase-heartbeat-database",$A=1,Va="firebase-heartbeat-store";let Fd=null;function aw(){return Fd||(Fd=oA(BA,$A,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Va)}catch(n){console.warn(n)}}}}).catch(t=>{throw Es.create("idb-open",{originalErrorMessage:t.message})})),Fd}async function HA(t){try{const n=(await aw()).transaction(Va),r=await n.objectStore(Va).get(lw(t));return await n.done,r}catch(e){if(e instanceof Er)Br.warn(e.message);else{const n=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(n.message)}}}async function iv(t,e){try{const r=(await aw()).transaction(Va,"readwrite");await r.objectStore(Va).put(e,lw(t)),await r.done}catch(n){if(n instanceof Er)Br.warn(n.message);else{const r=Es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Br.warn(r.message)}}}function lw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1024,WA=30;class GA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ov();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>WA){const o=YA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Br.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ov(),{heartbeatsToSend:r,unsentEntries:s}=KA(this._heartbeatsCache.heartbeats),i=Hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Br.warn(n),""}}}function ov(){return new Date().toISOString().substring(0,10)}function KA(t,e=qA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),av(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),av(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return O1()?M1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function av(t){return Hc(JSON.stringify({version:2,heartbeats:t})).length}function YA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){ui(new Cs("platform-logger",e=>new cA(e),"PRIVATE")),ui(new Cs("heartbeat",e=>new GA(e),"PRIVATE")),fr($h,rv,t),fr($h,rv,"esm2017"),fr("fire-js","")}JA("");var XA="firebase",ZA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(XA,ZA,"app");var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ts,cw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function I(){}I.prototype=y.prototype,v.D=y.prototype,v.prototype=new I,v.prototype.constructor=v,v.C=function(A,k,R){for(var x=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)x[rt-2]=arguments[rt];return y.prototype[k].apply(A,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,I){I||(I=0);var A=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)A[k]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(k=0;16>k;++k)A[k]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=v.g[0],I=v.g[1],k=v.g[2];var R=v.g[3],x=y+(R^I&(k^R))+A[0]+3614090360&4294967295;y=I+(x<<7&4294967295|x>>>25),x=R+(k^y&(I^k))+A[1]+3905402710&4294967295,R=y+(x<<12&4294967295|x>>>20),x=k+(I^R&(y^I))+A[2]+606105819&4294967295,k=R+(x<<17&4294967295|x>>>15),x=I+(y^k&(R^y))+A[3]+3250441966&4294967295,I=k+(x<<22&4294967295|x>>>10),x=y+(R^I&(k^R))+A[4]+4118548399&4294967295,y=I+(x<<7&4294967295|x>>>25),x=R+(k^y&(I^k))+A[5]+1200080426&4294967295,R=y+(x<<12&4294967295|x>>>20),x=k+(I^R&(y^I))+A[6]+2821735955&4294967295,k=R+(x<<17&4294967295|x>>>15),x=I+(y^k&(R^y))+A[7]+4249261313&4294967295,I=k+(x<<22&4294967295|x>>>10),x=y+(R^I&(k^R))+A[8]+1770035416&4294967295,y=I+(x<<7&4294967295|x>>>25),x=R+(k^y&(I^k))+A[9]+2336552879&4294967295,R=y+(x<<12&4294967295|x>>>20),x=k+(I^R&(y^I))+A[10]+4294925233&4294967295,k=R+(x<<17&4294967295|x>>>15),x=I+(y^k&(R^y))+A[11]+2304563134&4294967295,I=k+(x<<22&4294967295|x>>>10),x=y+(R^I&(k^R))+A[12]+1804603682&4294967295,y=I+(x<<7&4294967295|x>>>25),x=R+(k^y&(I^k))+A[13]+4254626195&4294967295,R=y+(x<<12&4294967295|x>>>20),x=k+(I^R&(y^I))+A[14]+2792965006&4294967295,k=R+(x<<17&4294967295|x>>>15),x=I+(y^k&(R^y))+A[15]+1236535329&4294967295,I=k+(x<<22&4294967295|x>>>10),x=y+(k^R&(I^k))+A[1]+4129170786&4294967295,y=I+(x<<5&4294967295|x>>>27),x=R+(I^k&(y^I))+A[6]+3225465664&4294967295,R=y+(x<<9&4294967295|x>>>23),x=k+(y^I&(R^y))+A[11]+643717713&4294967295,k=R+(x<<14&4294967295|x>>>18),x=I+(R^y&(k^R))+A[0]+3921069994&4294967295,I=k+(x<<20&4294967295|x>>>12),x=y+(k^R&(I^k))+A[5]+3593408605&4294967295,y=I+(x<<5&4294967295|x>>>27),x=R+(I^k&(y^I))+A[10]+38016083&4294967295,R=y+(x<<9&4294967295|x>>>23),x=k+(y^I&(R^y))+A[15]+3634488961&4294967295,k=R+(x<<14&4294967295|x>>>18),x=I+(R^y&(k^R))+A[4]+3889429448&4294967295,I=k+(x<<20&4294967295|x>>>12),x=y+(k^R&(I^k))+A[9]+568446438&4294967295,y=I+(x<<5&4294967295|x>>>27),x=R+(I^k&(y^I))+A[14]+3275163606&4294967295,R=y+(x<<9&4294967295|x>>>23),x=k+(y^I&(R^y))+A[3]+4107603335&4294967295,k=R+(x<<14&4294967295|x>>>18),x=I+(R^y&(k^R))+A[8]+1163531501&4294967295,I=k+(x<<20&4294967295|x>>>12),x=y+(k^R&(I^k))+A[13]+2850285829&4294967295,y=I+(x<<5&4294967295|x>>>27),x=R+(I^k&(y^I))+A[2]+4243563512&4294967295,R=y+(x<<9&4294967295|x>>>23),x=k+(y^I&(R^y))+A[7]+1735328473&4294967295,k=R+(x<<14&4294967295|x>>>18),x=I+(R^y&(k^R))+A[12]+2368359562&4294967295,I=k+(x<<20&4294967295|x>>>12),x=y+(I^k^R)+A[5]+4294588738&4294967295,y=I+(x<<4&4294967295|x>>>28),x=R+(y^I^k)+A[8]+2272392833&4294967295,R=y+(x<<11&4294967295|x>>>21),x=k+(R^y^I)+A[11]+1839030562&4294967295,k=R+(x<<16&4294967295|x>>>16),x=I+(k^R^y)+A[14]+4259657740&4294967295,I=k+(x<<23&4294967295|x>>>9),x=y+(I^k^R)+A[1]+2763975236&4294967295,y=I+(x<<4&4294967295|x>>>28),x=R+(y^I^k)+A[4]+1272893353&4294967295,R=y+(x<<11&4294967295|x>>>21),x=k+(R^y^I)+A[7]+4139469664&4294967295,k=R+(x<<16&4294967295|x>>>16),x=I+(k^R^y)+A[10]+3200236656&4294967295,I=k+(x<<23&4294967295|x>>>9),x=y+(I^k^R)+A[13]+681279174&4294967295,y=I+(x<<4&4294967295|x>>>28),x=R+(y^I^k)+A[0]+3936430074&4294967295,R=y+(x<<11&4294967295|x>>>21),x=k+(R^y^I)+A[3]+3572445317&4294967295,k=R+(x<<16&4294967295|x>>>16),x=I+(k^R^y)+A[6]+76029189&4294967295,I=k+(x<<23&4294967295|x>>>9),x=y+(I^k^R)+A[9]+3654602809&4294967295,y=I+(x<<4&4294967295|x>>>28),x=R+(y^I^k)+A[12]+3873151461&4294967295,R=y+(x<<11&4294967295|x>>>21),x=k+(R^y^I)+A[15]+530742520&4294967295,k=R+(x<<16&4294967295|x>>>16),x=I+(k^R^y)+A[2]+3299628645&4294967295,I=k+(x<<23&4294967295|x>>>9),x=y+(k^(I|~R))+A[0]+4096336452&4294967295,y=I+(x<<6&4294967295|x>>>26),x=R+(I^(y|~k))+A[7]+1126891415&4294967295,R=y+(x<<10&4294967295|x>>>22),x=k+(y^(R|~I))+A[14]+2878612391&4294967295,k=R+(x<<15&4294967295|x>>>17),x=I+(R^(k|~y))+A[5]+4237533241&4294967295,I=k+(x<<21&4294967295|x>>>11),x=y+(k^(I|~R))+A[12]+1700485571&4294967295,y=I+(x<<6&4294967295|x>>>26),x=R+(I^(y|~k))+A[3]+2399980690&4294967295,R=y+(x<<10&4294967295|x>>>22),x=k+(y^(R|~I))+A[10]+4293915773&4294967295,k=R+(x<<15&4294967295|x>>>17),x=I+(R^(k|~y))+A[1]+2240044497&4294967295,I=k+(x<<21&4294967295|x>>>11),x=y+(k^(I|~R))+A[8]+1873313359&4294967295,y=I+(x<<6&4294967295|x>>>26),x=R+(I^(y|~k))+A[15]+4264355552&4294967295,R=y+(x<<10&4294967295|x>>>22),x=k+(y^(R|~I))+A[6]+2734768916&4294967295,k=R+(x<<15&4294967295|x>>>17),x=I+(R^(k|~y))+A[13]+1309151649&4294967295,I=k+(x<<21&4294967295|x>>>11),x=y+(k^(I|~R))+A[4]+4149444226&4294967295,y=I+(x<<6&4294967295|x>>>26),x=R+(I^(y|~k))+A[11]+3174756917&4294967295,R=y+(x<<10&4294967295|x>>>22),x=k+(y^(R|~I))+A[2]+718787259&4294967295,k=R+(x<<15&4294967295|x>>>17),x=I+(R^(k|~y))+A[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,v.g[2]=v.g[2]+k&4294967295,v.g[3]=v.g[3]+R&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var I=y-this.blockSize,A=this.B,k=this.h,R=0;R<y;){if(k==0)for(;R<=I;)s(this,v,R),R+=this.blockSize;if(typeof v=="string"){for(;R<y;)if(A[k++]=v.charCodeAt(R++),k==this.blockSize){s(this,A),k=0;break}}else for(;R<y;)if(A[k++]=v[R++],k==this.blockSize){s(this,A),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var I=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=I&255,I/=256;for(this.u(v),v=Array(16),y=I=0;4>y;++y)for(var A=0;32>A;A+=8)v[I++]=this.g[y]>>>A&255;return v};function i(v,y){var I=c;return Object.prototype.hasOwnProperty.call(I,v)?I[v]:I[v]=y(v)}function o(v,y){this.h=y;for(var I=[],A=!0,k=v.length-1;0<=k;k--){var R=v[k]|0;A&&R==y||(I[k]=R,A=!1)}this.g=I}var c={};function u(v){return-128<=v&&128>v?i(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return m;if(0>v)return $(d(-v));for(var y=[],I=1,A=0;v>=I;A++)y[A]=v/I|0,I*=4294967296;return new o(y,0)}function p(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return $(p(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(y,8)),A=m,k=0;k<v.length;k+=8){var R=Math.min(8,v.length-k),x=parseInt(v.substring(k,k+R),y);8>R?(R=d(Math.pow(y,R)),A=A.j(R).add(d(x))):(A=A.j(I),A=A.add(d(x)))}return A}var m=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(O(this))return-$(this).m();for(var v=0,y=1,I=0;I<this.g.length;I++){var A=this.i(I);v+=(0<=A?A:4294967296+A)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(P(this))return"0";if(O(this))return"-"+$(this).toString(v);for(var y=d(Math.pow(v,6)),I=this,A="";;){var k=j(I,y).g;I=C(I,k.j(y));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(v);if(I=k,P(I))return R+A;for(;6>R.length;)R="0"+R;A=R+A}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function P(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function O(v){return v.h==-1}t.l=function(v){return v=C(this,v),O(v)?-1:P(v)?0:1};function $(v){for(var y=v.g.length,I=[],A=0;A<y;A++)I[A]=~v.g[A];return new o(I,~v.h).add(g)}t.abs=function(){return O(this)?$(this):this},t.add=function(v){for(var y=Math.max(this.g.length,v.g.length),I=[],A=0,k=0;k<=y;k++){var R=A+(this.i(k)&65535)+(v.i(k)&65535),x=(R>>>16)+(this.i(k)>>>16)+(v.i(k)>>>16);A=x>>>16,R&=65535,x&=65535,I[k]=x<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function C(v,y){return v.add($(y))}t.j=function(v){if(P(this)||P(v))return m;if(O(this))return O(v)?$(this).j($(v)):$($(this).j(v));if(O(v))return $(this.j($(v)));if(0>this.l(w)&&0>v.l(w))return d(this.m()*v.m());for(var y=this.g.length+v.g.length,I=[],A=0;A<2*y;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<v.g.length;k++){var R=this.i(A)>>>16,x=this.i(A)&65535,rt=v.i(k)>>>16,At=v.i(k)&65535;I[2*A+2*k]+=x*At,E(I,2*A+2*k),I[2*A+2*k+1]+=R*At,E(I,2*A+2*k+1),I[2*A+2*k+1]+=x*rt,E(I,2*A+2*k+1),I[2*A+2*k+2]+=R*rt,E(I,2*A+2*k+2)}for(A=0;A<y;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=y;A<2*y;A++)I[A]=0;return new o(I,0)};function E(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function S(v,y){this.g=v,this.h=y}function j(v,y){if(P(y))throw Error("division by zero");if(P(v))return new S(m,m);if(O(v))return y=j($(v),y),new S($(y.g),$(y.h));if(O(y))return y=j(v,$(y)),new S($(y.g),y.h);if(30<v.g.length){if(O(v)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,A=y;0>=A.l(v);)I=N(I),A=N(A);var k=F(I,1),R=F(A,1);for(A=F(A,2),I=F(I,2);!P(A);){var x=R.add(A);0>=x.l(v)&&(k=k.add(I),R=x),A=F(A,1),I=F(I,1)}return y=C(v,k.j(y)),new S(k,y)}for(k=m;0<=v.l(y);){for(I=Math.max(1,Math.floor(v.m()/y.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),R=d(I),x=R.j(y);O(x)||0<x.l(v);)I-=A,R=d(I),x=R.j(y);P(R)&&(R=g),k=k.add(R),v=C(v,x)}return new S(k,v)}t.A=function(v){return j(this,v).h},t.and=function(v){for(var y=Math.max(this.g.length,v.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)&v.i(A);return new o(I,this.h&v.h)},t.or=function(v){for(var y=Math.max(this.g.length,v.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)|v.i(A);return new o(I,this.h|v.h)},t.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)^v.i(A);return new o(I,this.h^v.h)};function N(v){for(var y=v.g.length+1,I=[],A=0;A<y;A++)I[A]=v.i(A)<<1|v.i(A-1)>>>31;return new o(I,v.h)}function F(v,y){var I=y>>5;y%=32;for(var A=v.g.length-I,k=[],R=0;R<A;R++)k[R]=0<y?v.i(R+I)>>>y|v.i(R+I+1)<<32-y:v.i(R+I);return new o(k,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,Ts=o}).apply(typeof lv<"u"?lv:typeof self<"u"?self:typeof window<"u"?window:{});var $l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uw,Xo,dw,cc,Gh,hw,fw,pw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof $l=="object"&&$l];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var V=a[_];if(!(V in f))break e;f=f[V]}a=a[a.length-1],_=f[a],h=h(_),h!=_&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,_=!1,V={next:function(){if(!_&&f<a.length){var H=f++;return{value:h(H,a[H]),done:!1}}return _=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function p(a,h,f){return a.call.apply(a.bind,arguments)}function m(a,h,f){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,_),a.apply(h,V)}}return function(){return a.apply(h,arguments)}}function g(a,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function w(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function P(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(_,V,H){for(var te=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)te[Be-2]=arguments[Be];return h.prototype[V].apply(_,te)}}function O(a){const h=a.length;if(0<h){const f=Array(h);for(let _=0;_<h;_++)f[_]=a[_];return f}return[]}function $(a,h){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(u(_)){const V=a.length||0,H=_.length||0;a.length=V+H;for(let te=0;te<H;te++)a[V+te]=_[te]}else a.push(_)}}class C{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var N=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function F(a,h,f){for(const _ in a)h.call(f,a[_],_,a)}function v(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function y(a){const h={};for(const f in a)h[f]=a[f];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(a,h){let f,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(f in _)a[f]=_[f];for(let H=0;H<I.length;H++)f=I[H],Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])}}function k(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function R(a){c.setTimeout(()=>{throw a},0)}function x(){var a=b;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class rt{constructor(){this.h=this.g=null}add(h,f){const _=At.get();_.set(h,f),this.h?this.h.next=_:this.g=_,this.h=_}}var At=new C(()=>new Ge,a=>a.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let et,M=!1,b=new rt,z=()=>{const a=c.Promise.resolve(void 0);et=()=>{a.then(q)}};var q=()=>{for(var a;a=x();){try{a.h.call(a.g)}catch(f){R(f)}var h=At;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}M=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,h),c.removeEventListener("test",f,h)}catch{}return a}();function Ue(a,h){if(ne.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(N){e:{try{j(h.nodeName);var V=!0;break e}catch{}V=!1}V||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Se[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ue.aa.h.call(this)}}P(Ue,ne);var Se={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var tt="closure_listenable_"+(1e6*Math.random()|0),$n=0;function kn(a,h,f,_,V){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!_,this.ha=V,this.key=++$n,this.da=this.fa=!1}function Ut(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Zt(a){this.src=a,this.g={},this.h=0}Zt.prototype.add=function(a,h,f,_,V){var H=a.toString();a=this.g[H],a||(a=this.g[H]=[],this.h++);var te=vn(a,h,_,V);return-1<te?(h=a[te],f||(h.fa=!1)):(h=new kn(h,this.src,H,!!_,V),h.fa=f,a.push(h)),h};function Ke(a,h){var f=h.type;if(f in a.g){var _=a.g[f],V=Array.prototype.indexOf.call(_,h,void 0),H;(H=0<=V)&&Array.prototype.splice.call(_,V,1),H&&(Ut(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function vn(a,h,f,_){for(var V=0;V<a.length;++V){var H=a[V];if(!H.da&&H.listener==h&&H.capture==!!f&&H.ha==_)return V}return-1}var Pe="closure_lm_"+(1e6*Math.random()|0),$e={};function ut(a,h,f,_,V){if(Array.isArray(h)){for(var H=0;H<h.length;H++)ut(a,h[H],f,_,V);return null}return f=T(f),a&&a[tt]?a.K(h,f,d(_)?!!_.capture:!1,V):yn(a,h,f,!1,_,V)}function yn(a,h,f,_,V,H){if(!h)throw Error("Invalid event type");var te=d(V)?!!V.capture:!!V,Be=sr(a);if(Be||(a[Pe]=Be=new Zt(a)),f=Be.add(h,f,_,te,H),f.proxy)return f;if(_=Kr(),f.proxy=_,_.src=a,_.listener=f,a.addEventListener)Ee||(V=te),V===void 0&&(V=!1),a.addEventListener(h.toString(),_,V);else if(a.attachEvent)a.attachEvent(rr(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Kr(){function a(f){return h.call(a.src,a.listener,f)}const h=Nn;return a}function Tr(a,h,f,_,V){if(Array.isArray(h))for(var H=0;H<h.length;H++)Tr(a,h[H],f,_,V);else _=d(_)?!!_.capture:!!_,f=T(f),a&&a[tt]?(a=a.i,h=String(h).toString(),h in a.g&&(H=a.g[h],f=vn(H,f,_,V),-1<f&&(Ut(H[f]),Array.prototype.splice.call(H,f,1),H.length==0&&(delete a.g[h],a.h--)))):a&&(a=sr(a))&&(h=a.g[h.toString()],a=-1,h&&(a=vn(h,f,_,V)),(f=-1<a?h[a]:null)&&Le(f))}function Le(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[tt])Ke(h.i,a);else{var f=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(f,_,a.capture):h.detachEvent?h.detachEvent(rr(f),_):h.addListener&&h.removeListener&&h.removeListener(_),(f=sr(h))?(Ke(f,a),f.h==0&&(f.src=null,h[Pe]=null)):Ut(a)}}}function rr(a){return a in $e?$e[a]:$e[a]="on"+a}function Nn(a,h){if(a.da)a=!0;else{h=new Ue(h,this);var f=a.listener,_=a.ha||a.src;a.fa&&Le(a),a=f.call(_,h)}return a}function sr(a){return a=a[Pe],a instanceof Zt?a:null}var ir="__closure_events_fn_"+(1e9*Math.random()>>>0);function T(a){return typeof a=="function"?a:(a[ir]||(a[ir]=function(h){return a.handleEvent(h)}),a[ir])}function D(){Z.call(this),this.i=new Zt(this),this.M=this,this.F=null}P(D,Z),D.prototype[tt]=!0,D.prototype.removeEventListener=function(a,h,f,_){Tr(this,a,h,f,_)};function U(a,h){var f,_=a.F;if(_)for(f=[];_;_=_.F)f.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new ne(h,a);else if(h instanceof ne)h.target=h.target||a;else{var V=h;h=new ne(_,a),A(h,V)}if(V=!0,f)for(var H=f.length-1;0<=H;H--){var te=h.g=f[H];V=ie(te,_,!0,h)&&V}if(te=h.g=a,V=ie(te,_,!0,h)&&V,V=ie(te,_,!1,h)&&V,f)for(H=0;H<f.length;H++)te=h.g=f[H],V=ie(te,_,!1,h)&&V}D.prototype.N=function(){if(D.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],_=0;_<f.length;_++)Ut(f[_]);delete a.g[h],a.h--}}this.F=null},D.prototype.K=function(a,h,f,_){return this.i.add(String(a),h,!1,f,_)},D.prototype.L=function(a,h,f,_){return this.i.add(String(a),h,!0,f,_)};function ie(a,h,f,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var V=!0,H=0;H<h.length;++H){var te=h[H];if(te&&!te.da&&te.capture==f){var Be=te.listener,jt=te.ha||te.src;te.fa&&Ke(a.i,te),V=Be.call(jt,_)!==!1&&V}}return V&&!_.defaultPrevented}function L(a,h,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function fe(a){a.g=L(()=>{a.g=null,a.i&&(a.i=!1,fe(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ve extends Z{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:fe(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ie(a){Z.call(this),this.h=a,this.g={}}P(Ie,Z);var ue=[];function pe(a){F(a.g,function(h,f){this.g.hasOwnProperty(f)&&Le(h)},a),a.g={}}Ie.prototype.N=function(){Ie.aa.N.call(this),pe(this)},Ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var De=c.JSON.stringify,Oe=c.JSON.parse,Rn=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Dn(){}Dn.prototype.h=null;function Ae(a){return a.h||(a.h=a.i())}function K(){}var B={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Q(){ne.call(this,"d")}P(Q,ne);function G(){ne.call(this,"c")}P(G,ne);var ce={},ee=null;function ae(){return ee=ee||new D}ce.La="serverreachability";function re(a){ne.call(this,ce.La,a)}P(re,ne);function de(a){const h=ae();U(h,new re(h))}ce.STAT_EVENT="statevent";function ge(a,h){ne.call(this,ce.STAT_EVENT,a),this.stat=h}P(ge,ne);function Re(a){const h=ae();U(h,new ge(h,a))}ce.Ma="timingevent";function He(a,h){ne.call(this,ce.Ma,a),this.size=h}P(He,ne);function st(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function dt(){this.g=!0}dt.prototype.xa=function(){this.g=!1};function on(a,h,f,_,V,H){a.info(function(){if(a.g)if(H)for(var te="",Be=H.split("&"),jt=0;jt<Be.length;jt++){var Me=Be[jt].split("=");if(1<Me.length){var $t=Me[0];Me=Me[1];var Ht=$t.split("_");te=2<=Ht.length&&Ht[1]=="type"?te+($t+"="+Me+"&"):te+($t+"=redacted&")}}else te=null;else te=H;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+h+`
`+f+`
`+te})}function vt(a,h,f,_,V,H,te){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+h+`
`+f+`
`+H+" "+te})}function yt(a,h,f,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+ft(a,f)+(_?" "+_:"")})}function ht(a,h){a.info(function(){return"TIMEOUT: "+h})}dt.prototype.info=function(){};function ft(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var _=f[a];if(!(2>_.length)){var V=_[1];if(Array.isArray(V)&&!(1>V.length)){var H=V[0];if(H!="noop"&&H!="stop"&&H!="close")for(var te=1;te<V.length;te++)V[te]=""}}}}return De(f)}catch{return h}}var zt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ir={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hn;function jn(){}P(jn,Dn),jn.prototype.g=function(){return new XMLHttpRequest},jn.prototype.i=function(){return{}},Hn=new jn;function _n(a,h,f,_){this.j=a,this.i=h,this.l=f,this.R=_||1,this.U=new Ie(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qn}function qn(){this.i=null,this.g="",this.h=!1}var Ao={},zs={};function Co(a,h,f){a.L=1,a.v=vl(Cr(h)),a.m=f,a.P=!0,xo(a,null)}function xo(a,h){a.F=Date.now(),Bs(a),a.A=Cr(a.v);var f=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),wm(f.i,"t",_),a.C=0,f=a.j.J,a.h=new qn,a.g=Lm(a.j,f?h:null,!a.m),0<a.O&&(a.M=new ve(g(a.Y,a,a.g),a.O)),h=a.U,f=a.g,_=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(ue[0]=V.toString()),V=ue);for(var H=0;H<V.length;H++){var te=ut(f,V[H],_||h.handleEvent,!1,h.h||h);if(!te)break;h.g[te.key]=te}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),de(),on(a.i,a.u,a.A,a.l,a.R,a.m)}_n.prototype.ca=function(a){a=a.target;const h=this.M;h&&xr(a)==3?h.j():this.Y(a)},_n.prototype.Y=function(a){try{if(a==this.g)e:{const Ht=xr(this.g);var h=this.g.Ba();const Ci=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||xm(this.g)))){this.J||Ht!=4||h==7||(h==8||0>=Ci?de(3):de(2)),Ii(this);var f=this.g.Z();this.X=f;t:if(Po(this)){var _=xm(this.g);a="";var V=_.length,H=xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ar(this),Sr(this);var te="";break t}this.h.i=new c.TextDecoder}for(h=0;h<V;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(H&&h==V-1)});_.length=0,this.h.g+=a,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=f==200,vt(this.i,this.u,this.A,this.l,this.R,Ht,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,jt=this.g;if((Be=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Be)){var Me=Be;break t}}Me=null}if(f=Me)yt(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ko(this,f);else{this.o=!1,this.s=3,Re(12),Ar(this),Sr(this);break e}}if(this.P){f=!0;let Wn;for(;!this.J&&this.C<te.length;)if(Wn=td(this,te),Wn==zs){Ht==4&&(this.s=4,Re(14),f=!1),yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==Ao){this.s=4,Re(15),yt(this.i,this.l,te,"[Invalid Chunk]"),f=!1;break}else yt(this.i,this.l,Wn,null),ko(this,Wn);if(Po(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||te.length!=0||this.h.h||(this.s=1,Re(16),f=!1),this.o=this.o&&f,!f)yt(this.i,this.l,te,"[Invalid Chunked Response]"),Ar(this),Sr(this);else if(0<te.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),ad($t),$t.M=!0,Re(11))}}else yt(this.i,this.l,te,null),ko(this,te);Ht==4&&Ar(this),this.o&&!this.J&&(Ht==4?bm(this.j,this):(this.o=!1,Bs(this)))}else UT(this.g),f==400&&0<te.indexOf("Unknown SID")?(this.s=3,Re(12)):(this.s=0,Re(13)),Ar(this),Sr(this)}}}catch{}finally{}};function Po(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function td(a,h){var f=a.C,_=h.indexOf(`
`,f);return _==-1?zs:(f=Number(h.substring(f,_)),isNaN(f)?Ao:(_+=1,_+f>h.length?zs:(h=h.slice(_,_+f),a.C=_+f,h)))}_n.prototype.cancel=function(){this.J=!0,Ar(this)};function Bs(a){a.S=Date.now()+a.I,nd(a,a.I)}function nd(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=st(g(a.ba,a),h)}function Ii(a){a.B&&(c.clearTimeout(a.B),a.B=null)}_n.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ht(this.i,this.A),this.L!=2&&(de(),Re(17)),Ar(this),this.s=2,Sr(this)):nd(this,this.S-a)};function Sr(a){a.j.G==0||a.J||bm(a.j,a)}function Ar(a){Ii(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,pe(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function ko(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||Qe(f.h,a))){if(!a.K&&Qe(f.h,a)&&f.G==3){try{var _=f.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Il(f),El(f);else break e;od(f),Re(18)}}else f.za=V[1],0<f.za-f.T&&37500>V[2]&&f.F&&f.v==0&&!f.C&&(f.C=st(g(f.Za,f),6e3));if(1>=fl(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else qs(f,11)}else if((a.K||f.g==a)&&Il(f),!E(h))for(V=f.Da.g.parse(h),h=0;h<V.length;h++){let Me=V[h];if(f.T=Me[0],Me=Me[1],f.G==2)if(Me[0]=="c"){f.K=Me[1],f.ia=Me[2];const $t=Me[3];$t!=null&&(f.la=$t,f.j.info("VER="+f.la));const Ht=Me[4];Ht!=null&&(f.Aa=Ht,f.j.info("SVER="+f.Aa));const Ci=Me[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(_=1.5*Ci,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const Wn=a.g;if(Wn){const Al=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Al){var H=_.h;H.g||Al.indexOf("spdy")==-1&&Al.indexOf("quic")==-1&&Al.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Bt(H,H.h),H.h=null))}if(_.D){const ld=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;ld&&(_.ya=ld,Ye(_.I,_.D,ld))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var te=a;if(_.qa=Vm(_,_.J?_.ia:null,_.W),te.K){$s(_.h,te);var Be=te,jt=_.L;jt&&(Be.I=jt),Be.B&&(Ii(Be),Bs(Be)),_.g=te}else Dm(_);0<f.i.length&&Tl(f)}else Me[0]!="stop"&&Me[0]!="close"||qs(f,7);else f.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?qs(f,7):id(f):Me[0]!="noop"&&f.l&&f.l.ta(Me),f.v=0)}}de(4)}catch{}}var rd=class{constructor(a,h){this.g=a,this.map=h}};function dl(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hl(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function fl(a){return a.h?1:a.g?a.g.size:0}function Qe(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Bt(a,h){a.g?a.g.add(h):a.h=h}function $s(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}dl.prototype.cancel=function(){if(this.i=No(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function No(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return O(a.i)}function pl(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],f=a.length,_=0;_<f;_++)h.push(a[_]);return h}h=[],f=0;for(_ in a)h[f++]=a[_];return h}function CT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const _ in a)h[f++]=_;return h}}}function pm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=CT(a),_=pl(a),V=_.length,H=0;H<V;H++)h.call(void 0,_[H],f&&f[H],a)}var mm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xT(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var _=a[f].indexOf("="),V=null;if(0<=_){var H=a[f].substring(0,_);V=a[f].substring(_+1)}else H=a[f];h(H,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Hs(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Hs){this.h=a.h,ml(this,a.j),this.o=a.o,this.g=a.g,gl(this,a.s),this.l=a.l;var h=a.i,f=new jo;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),gm(this,f),this.m=a.m}else a&&(h=String(a).match(mm))?(this.h=!1,ml(this,h[1]||"",!0),this.o=Ro(h[2]||""),this.g=Ro(h[3]||"",!0),gl(this,h[4]),this.l=Ro(h[5]||"",!0),gm(this,h[6]||"",!0),this.m=Ro(h[7]||"")):(this.h=!1,this.i=new jo(null,this.h))}Hs.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Do(h,vm,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Do(h,vm,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Do(f,f.charAt(0)=="/"?NT:kT,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Do(f,DT)),a.join("")};function Cr(a){return new Hs(a)}function ml(a,h,f){a.j=f?Ro(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function gl(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function gm(a,h,f){h instanceof jo?(a.i=h,jT(a.i,a.h)):(f||(h=Do(h,RT)),a.i=new jo(h,a.h))}function Ye(a,h,f){a.i.set(h,f)}function vl(a){return Ye(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ro(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Do(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,PT),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function PT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var vm=/[#\/\?@]/g,kT=/[#\?:]/g,NT=/[#\?]/g,RT=/[#\?@]/g,DT=/#/g;function jo(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Qr(a){a.g||(a.g=new Map,a.h=0,a.i&&xT(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=jo.prototype,t.add=function(a,h){Qr(this),this.i=null,a=Si(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function ym(a,h){Qr(a),h=Si(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function _m(a,h){return Qr(a),h=Si(a,h),a.g.has(h)}t.forEach=function(a,h){Qr(this),this.g.forEach(function(f,_){f.forEach(function(V){a.call(h,V,_,this)},this)},this)},t.na=function(){Qr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let _=0;_<h.length;_++){const V=a[_];for(let H=0;H<V.length;H++)f.push(h[_])}return f},t.V=function(a){Qr(this);let h=[];if(typeof a=="string")_m(this,a)&&(h=h.concat(this.g.get(Si(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return Qr(this),this.i=null,a=Si(this,a),_m(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function wm(a,h,f){ym(a,h),0<f.length&&(a.i=null,a.g.set(Si(a,h),O(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var _=h[f];const H=encodeURIComponent(String(_)),te=this.V(_);for(_=0;_<te.length;_++){var V=H;te[_]!==""&&(V+="="+encodeURIComponent(String(te[_]))),a.push(V)}}return this.i=a.join("&")};function Si(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function jT(a,h){h&&!a.j&&(Qr(a),a.i=null,a.g.forEach(function(f,_){var V=_.toLowerCase();_!=V&&(ym(this,_),wm(this,V,f))},a)),a.j=h}function bT(a,h){const f=new dt;if(c.Image){const _=new Image;_.onload=w(Yr,f,"TestLoadImage: loaded",!0,h,_),_.onerror=w(Yr,f,"TestLoadImage: error",!1,h,_),_.onabort=w(Yr,f,"TestLoadImage: abort",!1,h,_),_.ontimeout=w(Yr,f,"TestLoadImage: timeout",!1,h,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function OT(a,h){const f=new dt,_=new AbortController,V=setTimeout(()=>{_.abort(),Yr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(H=>{clearTimeout(V),H.ok?Yr(f,"TestPingServer: ok",!0,h):Yr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),Yr(f,"TestPingServer: error",!1,h)})}function Yr(a,h,f,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(f)}catch{}}function MT(){this.g=new Rn}function VT(a,h,f){const _=f||"";try{pm(a,function(V,H){let te=V;d(V)&&(te=De(V)),h.push(_+H+"="+encodeURIComponent(te))})}catch(V){throw h.push(_+"type="+encodeURIComponent("_badmap")),V}}function yl(a){this.l=a.Ub||null,this.j=a.eb||!1}P(yl,Dn),yl.prototype.g=function(){return new _l(this.l,this.j)},yl.prototype.i=function(a){return function(){return a}}({});function _l(a,h){D.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(_l,D),t=_l.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Oo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Oo(this)),this.g&&(this.readyState=3,Oo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Em(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Em(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?bo(this):Oo(this),this.readyState==3&&Em(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,bo(this))},t.Qa=function(a){this.g&&(this.response=a,bo(this))},t.ga=function(){this.g&&bo(this)};function bo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Oo(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Oo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Tm(a){let h="";return F(a,function(f,_){h+=_,h+=":",h+=f,h+=`\r
`}),h}function sd(a,h,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=Tm(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ye(a,h,f))}function pt(a){D.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(pt,D);var LT=/^https?$/i,FT=["POST","PUT"];t=pt.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hn.g(),this.v=this.o?Ae(this.o):Ae(Hn),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(H){Im(this,H);return}if(a=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)f.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const H of _.keys())f.set(H,_.get(H));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(H=>H.toLowerCase()=="content-type"),V=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(FT,h,void 0))||_||V||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of f)this.g.setRequestHeader(H,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cm(this),this.u=!0,this.g.send(a),this.u=!1}catch(H){Im(this,H)}};function Im(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Sm(a),wl(a)}function Sm(a){a.A||(a.A=!0,U(a,"complete"),U(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,U(this,"complete"),U(this,"abort"),wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Am(this):this.bb())},t.bb=function(){Am(this)};function Am(a){if(a.h&&typeof o<"u"&&(!a.v[1]||xr(a)!=4||a.Z()!=2)){if(a.u&&xr(a)==4)L(a.Ea,0,a);else if(U(a,"readystatechange"),xr(a)==4){a.h=!1;try{const te=a.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var _;if(_=te===0){var V=String(a.D).match(mm)[1]||null;!V&&c.self&&c.self.location&&(V=c.self.location.protocol.slice(0,-1)),_=!LT.test(V?V.toLowerCase():"")}f=_}if(f)U(a,"complete"),U(a,"success");else{a.m=6;try{var H=2<xr(a)?a.g.statusText:""}catch{H=""}a.l=H+" ["+a.Z()+"]",Sm(a)}}finally{wl(a)}}}}function wl(a,h){if(a.g){Cm(a);const f=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||U(a,"ready");try{f.onreadystatechange=_}catch{}}}function Cm(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function xr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Oe(h)}};function xm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function UT(a){const h={};a=(a.g&&2<=xr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(E(a[_]))continue;var f=k(a[_]);const V=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const H=h[V]||[];h[V]=H,H.push(f)}v(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mo(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function Pm(a){this.Aa=0,this.i=[],this.j=new dt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mo("baseRetryDelayMs",5e3,a),this.cb=Mo("retryDelaySeedMs",1e4,a),this.Wa=Mo("forwardChannelMaxRetries",2,a),this.wa=Mo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new dl(a&&a.concurrentRequestLimit),this.Da=new MT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pm.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,_){Re(0),this.W=a,this.H=h||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=Vm(this,null,this.W),Tl(this)};function id(a){if(km(a),a.G==3){var h=a.U++,f=Cr(a.I);if(Ye(f,"SID",a.K),Ye(f,"RID",h),Ye(f,"TYPE","terminate"),Vo(a,f),h=new _n(a,a.j,h),h.L=2,h.v=vl(Cr(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=h.v,f=!0),f||(h.g=Lm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Bs(h)}Mm(a)}function El(a){a.g&&(ad(a),a.g.cancel(),a.g=null)}function km(a){El(a),a.u&&(c.clearTimeout(a.u),a.u=null),Il(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Tl(a){if(!hl(a.h)&&!a.s){a.s=!0;var h=a.Ga;et||z(),M||(et(),M=!0),b.add(h,a),a.B=0}}function zT(a,h){return fl(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=st(g(a.Ga,a,h),Om(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new _n(this,this.j,a);let H=this.o;if(this.S&&(H?(H=y(H),A(H,this.S)):H=this.S),this.m!==null||this.O||(V.H=H,H=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Rm(this,V,h),f=Cr(this.I),Ye(f,"RID",a),Ye(f,"CVER",22),this.D&&Ye(f,"X-HTTP-Session-Id",this.D),Vo(this,f),H&&(this.O?h="headers="+encodeURIComponent(String(Tm(H)))+"&"+h:this.m&&sd(f,this.m,H)),Bt(this.h,V),this.Ua&&Ye(f,"TYPE","init"),this.P?(Ye(f,"$req",h),Ye(f,"SID","null"),V.T=!0,Co(V,f,null)):Co(V,f,h),this.G=2}}else this.G==3&&(a?Nm(this,a):this.i.length==0||hl(this.h)||Nm(this))};function Nm(a,h){var f;h?f=h.l:f=a.U++;const _=Cr(a.I);Ye(_,"SID",a.K),Ye(_,"RID",f),Ye(_,"AID",a.T),Vo(a,_),a.m&&a.o&&sd(_,a.m,a.o),f=new _n(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Rm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Bt(a.h,f),Co(f,_,h)}function Vo(a,h){a.H&&F(a.H,function(f,_){Ye(h,_,f)}),a.l&&pm({},function(f,_){Ye(h,_,f)})}function Rm(a,h,f){f=Math.min(a.i.length,f);var _=a.l?g(a.l.Na,a.l,a):null;e:{var V=a.i;let H=-1;for(;;){const te=["count="+f];H==-1?0<f?(H=V[0].g,te.push("ofs="+H)):H=0:te.push("ofs="+H);let Be=!0;for(let jt=0;jt<f;jt++){let Me=V[jt].g;const $t=V[jt].map;if(Me-=H,0>Me)H=Math.max(0,V[jt].g-100),Be=!1;else try{VT($t,te,"req"+Me+"_")}catch{_&&_($t)}}if(Be){_=te.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,_}function Dm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;et||z(),M||(et(),M=!0),b.add(h,a),a.v=0}}function od(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=st(g(a.Fa,a),Om(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,jm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=st(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Re(10),El(this),jm(this))};function ad(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function jm(a){a.g=new _n(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Cr(a.qa);Ye(h,"RID","rpc"),Ye(h,"SID",a.K),Ye(h,"AID",a.T),Ye(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ye(h,"TO",a.ja),Ye(h,"TYPE","xmlhttp"),Vo(a,h),a.m&&a.o&&sd(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=vl(Cr(h)),f.m=null,f.P=!0,xo(f,a)}t.Za=function(){this.C!=null&&(this.C=null,El(this),od(this),Re(19))};function Il(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function bm(a,h){var f=null;if(a.g==h){Il(a),ad(a),a.g=null;var _=2}else if(Qe(a.h,h))f=h.D,$s(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var V=a.B;_=ae(),U(_,new He(_,f)),Tl(a)}else Dm(a);else if(V=h.s,V==3||V==0&&0<h.X||!(_==1&&zT(a,h)||_==2&&od(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),V){case 1:qs(a,5);break;case 4:qs(a,10);break;case 3:qs(a,6);break;default:qs(a,2)}}}function Om(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function qs(a,h){if(a.j.info("Error code "+h),h==2){var f=g(a.fb,a),_=a.Xa;const V=!_;_=new Hs(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ml(_,"https"),vl(_),V?bT(_.toString(),f):OT(_.toString(),f)}else Re(2);a.G=0,a.l&&a.l.sa(h),Mm(a),km(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Re(2)):(this.j.info("Failed to ping google.com"),Re(1))};function Mm(a){if(a.G=0,a.ka=[],a.l){const h=No(a.h);(h.length!=0||a.i.length!=0)&&($(a.ka,h),$(a.ka,a.i),a.h.i.length=0,O(a.i),a.i.length=0),a.l.ra()}}function Vm(a,h,f){var _=f instanceof Hs?Cr(f):new Hs(f);if(_.g!="")h&&(_.g=h+"."+_.g),gl(_,_.s);else{var V=c.location;_=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;var H=new Hs(null);_&&ml(H,_),h&&(H.g=h),V&&gl(H,V),f&&(H.l=f),_=H}return f=a.D,h=a.ya,f&&h&&Ye(_,f,h),Ye(_,"VER",a.la),Vo(a,_),_}function Lm(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new pt(new yl({eb:f})):new pt(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fm(){}t=Fm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sl(){}Sl.prototype.g=function(a,h){return new wn(a,h)};function wn(a,h){D.call(this),this.g=new Pm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!E(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ai(this)}P(wn,D),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){id(this.g)},wn.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=De(a),a=f);h.i.push(new rd(h.Ya++,a)),h.G==3&&Tl(h)},wn.prototype.N=function(){this.g.l=null,delete this.j,id(this.g),delete this.g,wn.aa.N.call(this)};function Um(a){Q.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}P(Um,Q);function zm(){G.call(this),this.status=1}P(zm,G);function Ai(a){this.g=a}P(Ai,Fm),Ai.prototype.ua=function(){U(this.g,"a")},Ai.prototype.ta=function(a){U(this.g,new Um(a))},Ai.prototype.sa=function(a){U(this.g,new zm)},Ai.prototype.ra=function(){U(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,pw=function(){return new Sl},fw=function(){return ae()},hw=ce,Gh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zt.NO_ERROR=0,zt.TIMEOUT=8,zt.HTTP_ERROR=6,cc=zt,Ir.COMPLETE="complete",dw=Ir,K.EventType=B,B.OPEN="a",B.CLOSE="b",B.ERROR="c",B.MESSAGE="d",D.prototype.listen=D.prototype.K,Xo=K,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,uw=pt}).apply(typeof $l<"u"?$l:typeof self<"u"?self:typeof window<"u"?window:{});const cv="@firebase/firestore",uv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new pp("@firebase/firestore");function Pi(){return di.logLevel}function oe(t,...e){if(di.logLevel<=ke.DEBUG){const n=e.map(vp);di.debug(`Firestore (${wo}): ${t}`,...n)}}function $r(t,...e){if(di.logLevel<=ke.ERROR){const n=e.map(vp);di.error(`Firestore (${wo}): ${t}`,...n)}}function xs(t,...e){if(di.logLevel<=ke.WARN){const n=e.map(vp);di.warn(`Firestore (${wo}): ${t}`,...n)}}function vp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,mw(t,r,n)}function mw(t,e,n){let r=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $r(r),new Error(r)}function Fe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||mw(e,s,r)}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Kt.UNAUTHENTICATED))}shutdown(){}}class tC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nC{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string",31837,{l:r}),new gw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class rC{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sC{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new rC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const r=i=>{i.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=oC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ce(t,e){return t<e?-1:t>e?1:0}function Kh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Ce(r,s);{const i=vw(),o=aC(i.encode(hv(t,n)),i.encode(hv(e,n)));return o!==0?o:Ce(r,s)}}n+=r>65535?2:1}return Ce(t.length,e.length)}function hv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function aC(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ce(t[n],e[n]);return Ce(t.length,e.length)}function co(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="__name__";class lr{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return lr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=lr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const r=lr.isNumericId(e),s=lr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?lr.extractNumericId(e).compare(lr.extractNumericId(n)):Kh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ts.fromString(e.substring(4,e.length-2))}}class qe extends lr{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const lC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends lr{construct(e,n,r){return new Mt(e,n,r)}static isValidIdentifier(e){return lC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fv}static keyField(){return new Mt([fv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new se(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new se(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new se(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(qe.fromString(e))}static fromName(e){return new me(qe.fromString(e).popFirst(5))}static empty(){return new me(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t,e,n){if(!n)throw new se(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cC(t,e,n,r){if(e===!0&&r===!0)throw new se(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pv(t){if(!me.isDocumentKey(t))throw new se(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mv(t){if(me.isDocumentKey(t))throw new se(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _w(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ru(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ru(t);throw new se(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t,e){const n={typeString:t};return e&&(n.value=e),n}function el(t,e){if(!_w(t))throw new se(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new se(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=-62135596800,vv=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*vv);return new Xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<gv)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vv}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(el(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:St("string",Xe._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Xe(0,0))}static max(){return new we(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=-1;function uC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=we.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Ps(s,me.empty(),e)}function dC(t){return new Ps(t.readTime,t.key,La)}class Ps{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ps(we.min(),me.empty(),La)}static max(){return new Ps(we.max(),me.empty(),La)}}function hC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==fC)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,r)=>{n(e)})}static reject(e){return new Y((n,r)=>{r(e)})}static waitFor(e){return new Y((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=Y.resolve(!1);for(const r of e)n=n.next(s=>s?Y.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Y((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++c,c===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new Y((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function mC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function To(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Du.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=-1;function ju(t){return t==null}function Wc(t){return t===0&&1/t==-1/0}function gC(t){return typeof t=="number"&&Number.isInteger(t)&&!Wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="";function vC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yv(e)),e=yC(t.get(n),e);return yv(e)}function yC(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ww:n+="";break;default:n+=i}}return n}function yv(t){return t+ww+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ew(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||Ot.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hl(this.root,e,this.comparator,!0)}}class Hl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ot.RED,this.left=s??Ot.EMPTY,this.right=i??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ot(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ot.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wv(this.data.getIterator())}getIteratorFrom(e){return new wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new Pt(Mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Tw("Invalid base64 string: "+i):i}}(e);return new Ft(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const _C=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(t){if(Fe(!!t,39018),typeof t=="string"){let e=0;const n=_C.exec(t);if(Fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(t.seconds),nanos:_t(t.nanos)}}function _t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ns(t){return typeof t=="string"?Ft.fromBase64String(t):Ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="server_timestamp",Sw="__type__",Aw="__previous_value__",Cw="__local_write_time__";function wp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Sw])===null||n===void 0?void 0:n.stringValue)===Iw}function bu(t){const e=t.mapValue.fields[Aw];return wp(e)?bu(e):e}function Fa(t){const e=ks(t.mapValue.fields[Cw].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n,r,s,i,o,c,u,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=p}}const Gc="(default)";class Ua{constructor(e,n){this.projectId=e,this.database=n||Gc}static empty(){return new Ua("","")}get isDefaultDatabase(){return this.database===Gc}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="__type__",EC="__max__",ql={mapValue:{}},Pw="__vector__",Kc="value";function Rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wp(t)?4:IC(t)?9007199254740991:TC(t)?10:11:_e(28295,{value:t})}function wr(t,e){if(t===e)return!0;const n=Rs(t);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fa(t).isEqual(Fa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ks(s.timestampValue),c=ks(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ns(s.bytesValue).isEqual(Ns(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return _t(s.geoPointValue.latitude)===_t(i.geoPointValue.latitude)&&_t(s.geoPointValue.longitude)===_t(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return _t(s.integerValue)===_t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=_t(s.doubleValue),c=_t(i.doubleValue);return o===c?Wc(o)===Wc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return co(t.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(_v(o)!==_v(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!wr(o[u],c[u])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function za(t,e){return(t.values||[]).find(n=>wr(n,e))!==void 0}function uo(t,e){if(t===e)return 0;const n=Rs(t),r=Rs(e);if(n!==r)return Ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=_t(i.integerValue||i.doubleValue),u=_t(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Ev(t.timestampValue,e.timestampValue);case 4:return Ev(Fa(t),Fa(e));case 5:return Kh(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Ns(i),u=Ns(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const p=Ce(c[d],u[d]);if(p!==0)return p}return Ce(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Ce(_t(i.latitude),_t(o.latitude));return c!==0?c:Ce(_t(i.longitude),_t(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Tv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,d,p;const m=i.fields||{},g=o.fields||{},w=(c=m[Kc])===null||c===void 0?void 0:c.arrayValue,P=(u=g[Kc])===null||u===void 0?void 0:u.arrayValue,O=Ce(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((p=P==null?void 0:P.values)===null||p===void 0?void 0:p.length)||0);return O!==0?O:Tv(w,P)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ql.mapValue&&o===ql.mapValue)return 0;if(i===ql.mapValue)return 1;if(o===ql.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=Kh(u[m],p[m]);if(g!==0)return g;const w=uo(c[u[m]],d[p[m]]);if(w!==0)return w}return Ce(u.length,p.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{le:n})}}function Ev(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=ks(t),r=ks(e),s=Ce(n.seconds,r.seconds);return s!==0?s:Ce(n.nanos,r.nanos)}function Tv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=uo(n[s],r[s]);if(i)return i}return Ce(n.length,r.length)}function ho(t){return Qh(t)}function Qh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ns(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Qh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Qh(n.fields[o])}`;return s+"}"}(t.mapValue):_e(61005,{value:t})}function uc(t){switch(Rs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bu(t);return e?16+uc(e):16;case 5:return 2*t.stringValue.length;case 6:return Ns(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+uc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Vs(r.fields,(i,o)=>{s+=i.length+uc(o)}),s}(t.mapValue);default:throw _e(13486,{value:t})}}function Iv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yh(t){return!!t&&"integerValue"in t}function Ep(t){return!!t&&"arrayValue"in t}function Sv(t){return!!t&&"nullValue"in t}function Av(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dc(t){return!!t&&"mapValue"in t}function TC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[xw])===null||n===void 0?void 0:n.stringValue)===Pw}function pa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function IC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===EC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pa(n)}setAll(e){let n=Mt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=pa(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());dc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];dc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Vs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new un(pa(this.value))}}function kw(t){const e=[];return Vs(t.fields,(n,r)=>{const s=new Mt([n]);if(dc(r)){const i=kw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Yt(e,0,we.min(),we.min(),we.min(),un.empty(),0)}static newFoundDocument(e,n,r,s){return new Yt(e,1,n,we.min(),r,s,0)}static newNoDocument(e,n){return new Yt(e,2,n,we.min(),we.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,we.min(),we.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n){this.position=e,this.inclusive=n}}function Cv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=me.comparator(me.fromName(o.referenceValue),n.key):r=uo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function xv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n="asc"){this.field=e,this.dir=n}}function SC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{}class It extends Nw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CC(e,n,r):n==="array-contains"?new kC(e,r):n==="in"?new NC(e,r):n==="not-in"?new RC(e,r):n==="array-contains-any"?new DC(e,r):new It(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xC(e,r):new PC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(uo(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tr extends Nw{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new tr(e,n)}matches(e){return Rw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Rw(t){return t.op==="and"}function Dw(t){return AC(t)&&Rw(t)}function AC(t){for(const e of t.filters)if(e instanceof tr)return!1;return!0}function Jh(t){if(t instanceof It)return t.field.canonicalString()+t.op.toString()+ho(t.value);if(Dw(t))return t.filters.map(e=>Jh(e)).join(",");{const e=t.filters.map(n=>Jh(n)).join(",");return`${t.op}(${e})`}}function jw(t,e){return t instanceof It?function(r,s){return s instanceof It&&r.op===s.op&&r.field.isEqual(s.field)&&wr(r.value,s.value)}(t,e):t instanceof tr?function(r,s){return s instanceof tr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&jw(o,s.filters[c]),!0):!1}(t,e):void _e(19439)}function bw(t){return t instanceof It?function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`}(t):t instanceof tr?function(n){return n.op.toString()+" {"+n.getFilters().map(bw).join(" ,")+"}"}(t):"Filter"}class CC extends It{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class xC extends It{constructor(e,n){super(e,"in",n),this.keys=Ow("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class PC extends It{constructor(e,n){super(e,"not-in",n),this.keys=Ow("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ow(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>me.fromName(r.referenceValue))}class kC extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ep(n)&&za(n.arrayValue,this.value)}}class NC extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&za(this.value.arrayValue,n)}}class RC extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!za(this.value.arrayValue,n)}}class DC extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ep(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>za(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Pe=null}}function Pv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new jC(t,e,n,r,s,i,o)}function Tp(t){const e=Te(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ju(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ho(r)).join(",")),e.Pe=n}return e.Pe}function Ip(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xv(t.startAt,e.startAt)&&xv(t.endAt,e.endAt)}function Xh(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function bC(t,e,n,r,s,i,o,c){return new tl(t,e,n,r,s,i,o,c)}function Ou(t){return new tl(t)}function kv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Mw(t){return t.collectionGroup!==null}function ma(t){const e=Te(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Pt(Mt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Yc(i,r))}),n.has(Mt.keyField().canonicalString())||e.Te.push(new Yc(Mt.keyField(),r))}return e.Te}function pr(t){const e=Te(t);return e.Ie||(e.Ie=OC(e,ma(t))),e.Ie}function OC(t,e){if(t.limitType==="F")return Pv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Yc(s.field,i)});const n=t.endAt?new Qc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qc(t.startAt.position,t.startAt.inclusive):null;return Pv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zh(t,e){const n=t.filters.concat([e]);return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ef(t,e,n){return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mu(t,e){return Ip(pr(t),pr(e))&&t.limitType===e.limitType}function Vw(t){return`${Tp(pr(t))}|lt:${t.limitType}`}function ki(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>bw(s)).join(", ")}]`),ju(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ho(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ho(s)).join(",")),`Target(${r})`}(pr(t))}; limitType=${t.limitType})`}function Vu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):me.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ma(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=Cv(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,ma(r),s)||r.endAt&&!function(o,c,u){const d=Cv(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,ma(r),s))}(t,e)}function MC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Lw(t){return(e,n)=>{let r=!1;for(const s of ma(t)){const i=VC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function VC(t,e,n){const r=t.field.isKeyField()?me.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?uo(u,d):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Ew(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new ct(me.comparator);function Hr(){return LC}const Fw=new ct(me.comparator);function Zo(...t){let e=Fw;for(const n of t)e=e.insert(n.key,n);return e}function Uw(t){let e=Fw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zs(){return ga()}function zw(){return ga()}function ga(){return new _i(t=>t.toString(),(t,e)=>t.isEqual(e))}const FC=new ct(me.comparator),UC=new Pt(me.comparator);function Ne(...t){let e=UC;for(const n of t)e=e.add(n);return e}const zC=new Pt(Ce);function BC(){return zC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function Bw(t){return{integerValue:""+t}}function $C(t,e){return gC(e)?Bw(e):Sp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(){this._=void 0}}function HC(t,e,n){return t instanceof Jc?function(s,i){const o={fields:{[Sw]:{stringValue:Iw},[Cw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&wp(i)&&(i=bu(i)),i&&(o.fields[Aw]=i),{mapValue:o}}(n,e):t instanceof Ba?Hw(t,e):t instanceof $a?qw(t,e):function(s,i){const o=$w(s,i),c=Nv(o)+Nv(s.Ee);return Yh(o)&&Yh(s.Ee)?Bw(c):Sp(s.serializer,c)}(t,e)}function qC(t,e,n){return t instanceof Ba?Hw(t,e):t instanceof $a?qw(t,e):n}function $w(t,e){return t instanceof Xc?function(r){return Yh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Jc extends Lu{}class Ba extends Lu{constructor(e){super(),this.elements=e}}function Hw(t,e){const n=Ww(e);for(const r of t.elements)n.some(s=>wr(s,r))||n.push(r);return{arrayValue:{values:n}}}class $a extends Lu{constructor(e){super(),this.elements=e}}function qw(t,e){let n=Ww(e);for(const r of t.elements)n=n.filter(s=>!wr(s,r));return{arrayValue:{values:n}}}class Xc extends Lu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Nv(t){return _t(t.integerValue||t.doubleValue)}function Ww(t){return Ep(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function WC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ba&&s instanceof Ba||r instanceof $a&&s instanceof $a?co(r.elements,s.elements,wr):r instanceof Xc&&s instanceof Xc?wr(r.Ee,s.Ee):r instanceof Jc&&s instanceof Jc}(t.transform,e.transform)}class GC{constructor(e,n){this.version=e,this.transformResults=n}}class Un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fu{}function Gw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ap(t.key,Un.none()):new nl(t.key,t.data,Un.none());{const n=t.data,r=un.empty();let s=new Pt(Mt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ls(t.key,r,new Sn(s.toArray()),Un.none())}}function KC(t,e,n){t instanceof nl?function(s,i,o){const c=s.value.clone(),u=Dv(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ls?function(s,i,o){if(!hc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Dv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Kw(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function va(t,e,n,r){return t instanceof nl?function(i,o,c,u){if(!hc(i.precondition,o))return c;const d=i.value.clone(),p=jv(i.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ls?function(i,o,c,u){if(!hc(i.precondition,o))return c;const d=jv(i.fieldTransforms,u,o),p=o.data;return p.setAll(Kw(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return hc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function QC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=$w(r.transform,s||null);i!=null&&(n===null&&(n=un.empty()),n.set(r.field,i))}return n||null}function Rv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&co(r,s,(i,o)=>WC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nl extends Fu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ls extends Fu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Kw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Dv(t,e,n){const r=new Map;Fe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,qC(o,c,n[s]))}return r}function jv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,HC(i,o,e))}return r}class Ap extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YC extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&KC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=Gw(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(n,r)=>Rv(n,r))&&co(this.baseMutations,e.baseMutations,(n,r)=>Rv(n,r))}}class Cp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Fe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return FC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Cp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,je;function ex(t){switch(t){case W.OK:return _e(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return _e(15467,{code:t})}}function Qw(t){if(t===void 0)return $r("GRPC error has no .code"),W.UNKNOWN;switch(t){case Et.OK:return W.OK;case Et.CANCELLED:return W.CANCELLED;case Et.UNKNOWN:return W.UNKNOWN;case Et.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Et.INTERNAL:return W.INTERNAL;case Et.UNAVAILABLE:return W.UNAVAILABLE;case Et.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Et.NOT_FOUND:return W.NOT_FOUND;case Et.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Et.ABORTED:return W.ABORTED;case Et.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Et.DATA_LOSS:return W.DATA_LOSS;default:return _e(39323,{code:t})}}(je=Et||(Et={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Ts([4294967295,4294967295],0);function bv(t){const e=vw().encode(t),n=new cw;return n.update(e),new Uint8Array(n.digest())}function Ov(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ts([n,r],0),new Ts([s,i],0)]}class xp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ea(`Invalid padding: ${n}`);if(r<0)throw new ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ea(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ea(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ts.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Ts.fromNumber(r)));return s.compare(tx)===1&&(s=new Ts([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=bv(e),[r,s]=Ov(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new xp(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.fe===0)return;const n=bv(e),[r,s]=Ov(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,rl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uu(we.min(),s,new ct(Ce),Hr(),Ne())}}class rl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rl(r,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class Yw{constructor(e,n){this.targetId=e,this.De=n}}class Jw{constructor(e,n,r=Ft.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Mv{constructor(){this.ve=0,this.Ce=Vv(),this.Fe=Ft.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ne(),n=Ne(),r=Ne();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:_e(38017,{changeType:i})}}),new rl(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Vv()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class nx{constructor(e){this.We=e,this.Ge=new Map,this.ze=Hr(),this.je=Wl(),this.Je=Wl(),this.He=new ct(Ce)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Xh(i))if(r===0){const o=new me(i.path);this.Xe(n,o,Yt.newNoDocument(o,we.min()))}else Fe(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const c=this._t(e),u=c?this.ut(c,e,o):1;if(u!==0){this.rt(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Ns(r).toUint8Array()}catch(u){if(u instanceof Tw)return xs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new xp(o,s,i)}catch(u){return xs(u instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const c=this.st(o);if(c){if(i.current&&Xh(c.target)){const u=new me(c.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,Yt.newNoDocument(u,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=Ne();this.Je.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.st(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Uu(e,n,this.He,this.ze,r);return this.ze=Hr(),this.je=Wl(),this.Je=Wl(),this.He=new ct(Ce),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Mv,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Pt(Ce),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Pt(Ce),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Mv),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Wl(){return new ct(me.comparator)}function Vv(){return new ct(me.comparator)}const rx={asc:"ASCENDING",desc:"DESCENDING"},sx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ix={and:"AND",or:"OR"};class ox{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tf(t,e){return t.useProto3Json||ju(e)?e:{value:e}}function Zc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ax(t,e){return Zc(t,e.toTimestamp())}function mr(t){return Fe(!!t,49232),we.fromTimestamp(function(n){const r=ks(n);return new Xe(r.seconds,r.nanos)}(t))}function Pp(t,e){return nf(t,e).canonicalString()}function nf(t,e){const n=function(s){return new qe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Zw(t){const e=qe.fromString(t);return Fe(sE(e),10190,{key:e.toString()}),e}function rf(t,e){return Pp(t.databaseId,e.path)}function Ud(t,e){const n=Zw(e);if(n.get(1)!==t.databaseId.projectId)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(tE(n))}function eE(t,e){return Pp(t.databaseId,e)}function lx(t){const e=Zw(t);return e.length===4?qe.emptyPath():tE(e)}function sf(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tE(t){return Fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Lv(t,e,n){return{name:rf(t,e),fields:n.value.mapValue.fields}}function cx(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(Fe(p===void 0||typeof p=="string",58123),Ft.fromBase64String(p||"")):(Fe(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Ft.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const p=d.code===void 0?W.UNKNOWN:Qw(d.code);return new se(p,d.message||"")}(o);n=new Jw(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ud(t,r.document.name),i=mr(r.document.updateTime),o=r.document.createTime?mr(r.document.createTime):we.min(),c=new un({mapValue:{fields:r.document.fields}}),u=Yt.newFoundDocument(s,i,o,c),d=r.targetIds||[],p=r.removedTargetIds||[];n=new fc(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ud(t,r.document),i=r.readTime?mr(r.readTime):we.min(),o=Yt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new fc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ud(t,r.document),i=r.removedTargetIds||[];n=new fc([],i,s,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new ZC(s,i),c=r.targetId;n=new Yw(c,o)}}return n}function ux(t,e){let n;if(e instanceof nl)n={update:Lv(t,e.key,e.value)};else if(e instanceof Ap)n={delete:rf(t,e.key)};else if(e instanceof Ls)n={update:Lv(t,e.key,e.data),updateMask:_x(e.fieldMask)};else{if(!(e instanceof YC))return _e(16599,{Rt:e.type});n={verify:rf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Jc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ba)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof $a)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xc)return{fieldPath:o.field.canonicalString(),increment:c.Ee};throw _e(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:ax(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:_e(27497)}(t,e.precondition)),n}function dx(t,e){return t&&t.length>0?(Fe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?mr(s.updateTime):mr(i);return o.isEqual(we.min())&&(o=mr(i)),new GC(o,s.transformResults||[])}(n,e))):[]}function hx(t,e){return{documents:[eE(t,e.path)]}}function fx(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eE(t,s);const i=function(d){if(d.length!==0)return rE(tr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(g){return{field:Ni(g.field),direction:gx(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=tf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:s}}function px(t){let e=lx(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Fe(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=nE(m);return g instanceof tr&&Dw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(P){return new Yc(Ri(P.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,ju(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,w=m.values||[];return new Qc(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,w=m.values||[];return new Qc(w,g)}(n.endAt)),bC(e,s,o,i,c,"F",u,d)}function mx(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ri(n.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ri(n.unaryFilter.field);return It.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ri(n.unaryFilter.field);return It.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ri(n.unaryFilter.field);return It.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return It.create(Ri(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return tr.create(n.compositeFilter.filters.map(r=>nE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function gx(t){return rx[t]}function vx(t){return sx[t]}function yx(t){return ix[t]}function Ni(t){return{fieldPath:t.canonicalString()}}function Ri(t){return Mt.fromServerFormat(t.fieldPath)}function rE(t){return t instanceof It?function(n){if(n.op==="=="){if(Av(n.value))return{unaryFilter:{field:Ni(n.field),op:"IS_NAN"}};if(Sv(n.value))return{unaryFilter:{field:Ni(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Av(n.value))return{unaryFilter:{field:Ni(n.field),op:"IS_NOT_NAN"}};if(Sv(n.value))return{unaryFilter:{field:Ni(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ni(n.field),op:vx(n.op),value:n.value}}}(t):t instanceof tr?function(n){const r=n.getFilters().map(s=>rE(s));return r.length===1?r[0]:{compositeFilter:{op:yx(n.op),filters:r}}}(t):_e(54877,{filter:t})}function _x(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,r,s,i=we.min(),o=we.min(),c=Ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.gt=e}}function Ex(t){const e=px({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ef(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.Dn=new Ix}addToCollectionParentIndex(e,n){return this.Dn.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(Ps.min())}updateCollectionGroup(e,n,r){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class Ix{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Pt(qe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Pt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iE=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(iE,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new fo(0)}static ur(){return new fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="LruGarbageCollector",Sx=1048576;function zv([t,e],[n,r]){const s=Ce(t,n);return s===0?Ce(e,r):s}class Ax{constructor(e){this.Tr=e,this.buffer=new Pt(zv),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Cx{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){oe(Uv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){To(n)?oe(Uv,"Ignoring IndexedDB error during garbage collection: ",n):await Eo(n)}await this.Rr(3e5)})}}class xx{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Y.resolve(Du.ue);const r=new Ax(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(Fv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fv):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,c,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Pi()<=ke.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-p}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Px(t,e){return new xx(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.changes=new _i(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&va(r.mutation,s,Sn.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ne()){const s=Zs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Zo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=Hr();const o=ga(),c=function(){return ga()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Ls)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),va(p.mutation,d,p.mutation.getFieldMask(),Xe.now())):o.set(d.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var m;return c.set(d,new Nx(p,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=ga();let s=new ct((o,c)=>o-c),i=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||Sn.empty();p=c.applyToLocalView(d,p),r.set(u,p);const m=(s.get(c.batchId)||Ne()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,p=u.value,m=zw();p.forEach(g=>{if(!i.has(g)){const w=Gw(n.get(g),r.get(g));w!==null&&m.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return Y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Mw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Y.resolve(Zs());let c=La,u=i;return o.next(d=>Y.forEach(d,(p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?Y.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,Ne())).next(p=>({batchId:c,changes:Uw(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(r=>{let s=Zo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Zo();return this.indexManager.getCollectionParents(e,i).next(c=>Y.forEach(c,u=>{const d=function(m,g){return new tl(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,Yt.newInvalidDocument(p)))});let c=Zo();return o.forEach((u,d)=>{const p=i.get(u);p!==void 0&&va(p.mutation,d,Sn.empty(),Xe.now()),Vu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return Y.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mr(s.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:Ex(s.bundledQuery),readTime:mr(s.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.overlays=new ct(me.comparator),this.kr=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zs();return Y.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),Y.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),Y.resolve()}getOverlaysForCollection(e,n,r){const s=Zs(),i=n.length+1,o=new me(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return Y.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ct((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=Zs(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=Zs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=s)););return Y.resolve(c)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new XC(n,r));let i=this.kr.get(n);i===void 0&&(i=Ne(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(){this.qr=new Pt(Nt.Qr),this.$r=new Pt(Nt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Nt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new me(new qe([])),r=new Nt(n,e),s=new Nt(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new me(new qe([])),r=new Nt(n,e),s=new Nt(n,e+1);let i=Ne();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Nt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return me.comparator(e.key,n.key)||Ce(e.Hr,n.Hr)}static Ur(e,n){return Ce(e.Hr,n.Hr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Pt(Nt.Qr)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JC(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Yr=this.Yr.add(new Nt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,n){return Y.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return Y.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?_p:this.er-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),s=new Nt(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const c=this.Zr(o.Hr);i.push(c)}),Y.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pt(Ce);return n.forEach(s=>{const i=new Nt(s,0),o=new Nt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],c=>{r=r.add(c.Hr)})}),Y.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;me.isDocumentKey(i)||(i=i.child(""));const o=new Nt(new me(i),0);let c=new Pt(Ce);return this.Yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Hr)),!0)},o),Y.resolve(this.ei(c))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Fe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Y.forEach(n.mutations,s=>{const i=new Nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Nt(n,0),s=this.Yr.firstAfterOrEqual(r);return Y.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.ni=e,this.docs=function(){return new ct(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Y.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let r=Hr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Yt.newInvalidDocument(s))}),Y.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Hr();const o=n.path,c=new me(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||hC(dC(p),r)<=0||(s.has(p.key)||Vu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return Y.resolve(i)}getAllFromCollectionGroup(e,n,r,s){_e(9500)}ri(e,n){return Y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Vx(this)}getSize(e){return Y.resolve(this.size)}}class Vx extends kx{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),Y.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.persistence=e,this.ii=new _i(n=>Tp(n),Ip),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.si=0,this.oi=new kp,this.targetCount=0,this._i=fo.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),Y.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.hr(n),Y.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),Y.waitFor(i).next(()=>s)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return Y.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),Y.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Y.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return Y.resolve(r)}containsKey(e,n){return Y.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.ai={},this.overlays={},this.ui=new Du(0),this.ci=!1,this.ci=!0,this.li=new bx,this.referenceDelegate=e(this),this.hi=new Lx(this),this.indexManager=new Tx,this.remoteDocumentCache=function(s){return new Mx(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new wx(n),this.Ti=new Dx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Ox(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const s=new Fx(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return Y.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Fx extends pC{constructor(e){super(),this.currentSequenceNumber=e}}class Np{constructor(e){this.persistence=e,this.Ai=new kp,this.Ri=null}static Vi(e){return new Np(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),Y.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.mi,r=>{const s=me.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,we.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return Y.or([()=>Y.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class eu{constructor(e,n){this.persistence=e,this.gi=new _i(r=>vC(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Px(this,n)}static Vi(e,n){return new eu(e,n)}Ii(){}di(e){return Y.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return Y.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?Y.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(c=>{c||(r++,i.removeEntry(o,we.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),Y.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Y.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),Y.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uc(e.data.value)),n}Sr(e,n,r){return Y.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return Y.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=Ne(),s=Ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return b1()?8:mC(Xt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Ux;return this.ws(e,n,o).next(c=>{if(i.result=c,this.Rs)return this.Ss(e,n,o,c.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Pi()<=ke.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",ki(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Y.resolve()):(Pi()<=ke.DEBUG&&oe("QueryEngine","Query:",ki(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Pi()<=ke.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",ki(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(n))):Y.resolve())}ps(e,n){if(kv(n))return Y.resolve(null);let r=pr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ef(n,null,"F"),r=pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ne(...i);return this.gs.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,c);return this.Ds(n,d,o,u.readTime)?this.ps(e,ef(n,null,"F")):this.vs(e,d,n,u)}))})))}ys(e,n,r,s){return kv(n)||s.isEqual(we.min())?Y.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?Y.resolve(null):(Pi()<=ke.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ki(n)),this.vs(e,o,n,uC(s,La)).next(c=>c))})}bs(e,n){let r=new Pt(Lw(e));return n.forEach((s,i)=>{Vu(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Pi()<=ke.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",ki(n)),this.gs.getDocumentsMatchingQuery(e,n,Ps.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="LocalStore",Bx=3e8;class $x{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new ct(Ce),this.Ms=new _i(i=>Tp(i),Ip),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Hx(t,e,n,r){return new $x(t,e,n,r)}async function aE(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=Ne();for(const d of s){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){c.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:c}))})})}function qx(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,d,p){const m=d.batch,g=m.keys();let w=Y.resolve();return g.forEach(P=>{w=w.next(()=>p.getEntry(u,P)).next(O=>{const $=d.docVersions.get(P);Fe($!==null,48541),O.version.compareTo($)<0&&(m.applyToRemoteDocument(O,d),O.isValidDocument()&&(O.setReadTime(d.commitVersion),p.addEntry(O)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=Ne();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function lE(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Wx(t,e){const n=Te(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;c.push(n.hi.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.hi.addMatchingKeys(i,p.addedDocuments,m)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(Ft.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,r)),s=s.insert(m,w),function(O,$,C){return O.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=Bx?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,w,p)&&c.push(n.hi.updateTargetData(i,w))});let u=Hr(),d=Ne();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(Gx(i,o,e.documentUpdates).next(p=>{u=p.Ls,d=p.ks})),!r.isEqual(we.min())){const p=n.hi.getLastRemoteSnapshotVersion(i).next(m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return Y.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Fs=s,i))}function Gx(t,e,n){let r=Ne(),s=Ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Hr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(we.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):oe(Dp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ls:o,ks:s}})}function Kx(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=_p),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qx(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,Y.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new ds(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function of(t,e,n){const r=Te(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!To(o))throw o;oe(Dp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Bv(t,e,n){const r=Te(t);let s=we.min(),i=Ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const m=Te(u),g=m.Ms.get(p);return g!==void 0?Y.resolve(m.Fs.get(g)):m.hi.getTargetData(d,p)}(r,o,pr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:we.min(),n?i:Ne())).next(c=>(Yx(r,MC(e),c),{documents:c,qs:i})))}function Yx(t,e,n){let r=t.xs.get(e)||we.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class $v{constructor(){this.activeTargetIds=BC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jx{constructor(){this.Fo=new $v,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new $v,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="ConnectivityMonitor";class qv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){oe(Hv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){oe(Hv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl=null;function af(){return Gl===null?Gl=function(){return 268435456+Math.round(2147483648*Math.random())}():Gl++,"0x"+Gl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="RestConnection",Zx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Gc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=af(),c=this.Go(e,n.toUriEncodedString());oe(zd,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:d}=new URL(c),p=yi(d);return this.jo(e,c,u,r,p).then(m=>(oe(zd,`Received RPC '${e}' ${o}: `,m),m),m=>{throw xs(zd,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=Zx[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class nP extends eP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=af();return new Promise((c,u)=>{const d=new uw;d.setWithCredentials(!0),d.listenOnce(dw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case cc.NO_ERROR:const m=d.getResponseJson();oe(Gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case cc.TIMEOUT:oe(Gt,`RPC '${e}' ${o} timed out`),u(new se(W.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:const g=d.getStatus();if(oe(Gt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const P=w==null?void 0:w.error;if(P&&P.status&&P.message){const O=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(E)>=0?E:W.UNKNOWN}(P.status);u(new se(O,P.message))}else u(new se(W.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new se(W.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{oe(Gt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);oe(Gt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",p,r,15)})}P_(e,n,r){const s=af(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pw(),c=fw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");oe(Gt,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);this.T_(m);let g=!1,w=!1;const P=new tP({Ho:$=>{w?oe(Gt,`Not sending because RPC '${e}' stream ${s} is closed:`,$):(g||(oe(Gt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),oe(Gt,`RPC '${e}' stream ${s} sending:`,$),m.send($))},Yo:()=>m.close()}),O=($,C,E)=>{$.listen(C,S=>{try{E(S)}catch(j){setTimeout(()=>{throw j},0)}})};return O(m,Xo.EventType.OPEN,()=>{w||(oe(Gt,`RPC '${e}' stream ${s} transport opened.`),P.s_())}),O(m,Xo.EventType.CLOSE,()=>{w||(w=!0,oe(Gt,`RPC '${e}' stream ${s} transport closed`),P.__(),this.I_(m))}),O(m,Xo.EventType.ERROR,$=>{w||(w=!0,xs(Gt,`RPC '${e}' stream ${s} transport errored. Name:`,$.name,"Message:",$.message),P.__(new se(W.UNAVAILABLE,"The operation could not be completed")))}),O(m,Xo.EventType.MESSAGE,$=>{var C;if(!w){const E=$.data[0];Fe(!!E,16349);const S=E,j=(S==null?void 0:S.error)||((C=S[0])===null||C===void 0?void 0:C.error);if(j){oe(Gt,`RPC '${e}' stream ${s} received error:`,j);const N=j.status;let F=function(I){const A=Et[I];if(A!==void 0)return Qw(A)}(N),v=j.message;F===void 0&&(F=W.INTERNAL,v="Unknown error status: "+N+" with message "+j.message),w=!0,P.__(new se(F,v)),m.close()}else oe(Gt,`RPC '${e}' stream ${s} received:`,E),P.a_(E)}}),O(c,hw.STAT_EVENT,$=>{$.stat===Gh.PROXY?oe(Gt,`RPC '${e}' stream ${s} detected buffering proxy`):$.stat===Gh.NOPROXY&&oe(Gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.o_()},0),P}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){return new ox(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="PersistentStream";class uE{constructor(e,n,r,s,i,o,c,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new cE(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new se(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return oe(Wv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(oe(Wv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rP extends uE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=cx(this.serializer,e),r=function(i){if(!("targetChange"in i))return we.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?we.min():o.readTime?mr(o.readTime):we.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=sf(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Xh(u)?{documents:hx(i,u)}:{query:fx(i,u).Vt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Xw(i,o.resumeToken);const d=tf(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(we.min())>0){c.readTime=Zc(i,o.snapshotVersion.toTimestamp());const d=tf(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=mx(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=sf(this.serializer),n.removeTarget=e,this.k_(n)}}class sP extends uE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=dx(e.writeResults,e.commitTime),r=mr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=sf(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ux(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{}class oP extends iP{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,nf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se(W.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Jo(e,nf(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(W.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class aP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?($r(n),this._a=!1):oe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi="RemoteStore";class lP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{wi(this)&&(oe(hi,"Restarting streams for network reachability change."),await async function(u){const d=Te(u);d.Ia.add(4),await sl(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Bu(d)}(this))})}),this.Aa=new aP(r,s)}}async function Bu(t){if(wi(t))for(const e of t.da)await e(!0)}async function sl(t){for(const e of t.da)await e(!1)}function dE(t,e){const n=Te(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Mp(n)?Op(n):Io(n).x_()&&bp(n,e))}function jp(t,e){const n=Te(t),r=Io(n);n.Ta.delete(e),r.x_()&&hE(n,e),n.Ta.size===0&&(r.x_()?r.B_():wi(n)&&n.Aa.set("Unknown"))}function bp(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Io(t).H_(e)}function hE(t,e){t.Ra.$e(e),Io(t).Y_(e)}function Op(t){t.Ra=new nx({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Io(t).start(),t.Aa.aa()}function Mp(t){return wi(t)&&!Io(t).M_()&&t.Ta.size>0}function wi(t){return Te(t).Ia.size===0}function fE(t){t.Ra=void 0}async function cP(t){t.Aa.set("Online")}async function uP(t){t.Ta.forEach((e,n)=>{bp(t,e)})}async function dP(t,e){fE(t),Mp(t)?(t.Aa.la(e),Op(t)):t.Aa.set("Unknown")}async function hP(t,e,n){if(t.Aa.set("Online"),e instanceof Jw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ta.delete(c),s.Ra.removeTarget(c))}(t,e)}catch(r){oe(hi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tu(t,r)}else if(e instanceof fc?t.Ra.Ye(e):e instanceof Yw?t.Ra.it(e):t.Ra.et(e),!n.isEqual(we.min()))try{const r=await lE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Ra.Pt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.Ta.get(d);p&&i.Ta.set(d,p.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const p=i.Ta.get(u);if(!p)return;i.Ta.set(u,p.withResumeToken(Ft.EMPTY_BYTE_STRING,p.snapshotVersion)),hE(i,u);const m=new ds(p.target,u,d,p.sequenceNumber);bp(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){oe(hi,"Failed to raise snapshot:",r),await tu(t,r)}}async function tu(t,e,n){if(!To(e))throw e;t.Ia.add(1),await sl(t),t.Aa.set("Offline"),n||(n=()=>lE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(hi,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Bu(t)})}function pE(t,e){return e().catch(n=>tu(t,n,e))}async function $u(t){const e=Te(t),n=Ds(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:_p;for(;fP(e);)try{const s=await Kx(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,pP(e,s)}catch(s){await tu(e,s)}mE(e)&&gE(e)}function fP(t){return wi(t)&&t.Pa.length<10}function pP(t,e){t.Pa.push(e);const n=Ds(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function mE(t){return wi(t)&&!Ds(t).M_()&&t.Pa.length>0}function gE(t){Ds(t).start()}async function mP(t){Ds(t).na()}async function gP(t){const e=Ds(t);for(const n of t.Pa)e.X_(n.mutations)}async function vP(t,e,n){const r=t.Pa.shift(),s=Cp.from(r,e,n);await pE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $u(t)}async function yP(t,e){e&&Ds(t).Z_&&await async function(r,s){if(function(o){return ex(o)&&o!==W.ABORTED}(s.code)){const i=r.Pa.shift();Ds(r).N_(),await pE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $u(r)}}(t,e),mE(t)&&gE(t)}async function Gv(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),oe(hi,"RemoteStore received new credentials");const r=wi(n);n.Ia.add(3),await sl(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Bu(n)}async function _P(t,e){const n=Te(t);e?(n.Ia.delete(2),await Bu(n)):e||(n.Ia.add(2),await sl(n),n.Aa.set("Unknown"))}function Io(t){return t.Va||(t.Va=function(n,r,s){const i=Te(n);return i.ia(),new rP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:cP.bind(null,t),e_:uP.bind(null,t),n_:dP.bind(null,t),J_:hP.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Mp(t)?Op(t):t.Aa.set("Unknown")):(await t.Va.stop(),fE(t))})),t.Va}function Ds(t){return t.ma||(t.ma=function(n,r,s){const i=Te(n);return i.ia(),new sP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:mP.bind(null,t),n_:yP.bind(null,t),ea:gP.bind(null,t),ta:vP.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await $u(t)):(await t.ma.stop(),t.Pa.length>0&&(oe(hi,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Vp(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lp(t,e){if($r("AsyncQueue",`${e}: ${t}`),To(t))return new se(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{static emptySet(e){return new Xi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=Zo(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.fa=new ct(me.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):_e(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class po{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new po(e,n,Xi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class EP{constructor(){this.queries=Qv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=Te(n),i=s.queries;s.queries=Qv(),i.forEach((o,c)=>{for(const u of c.wa)u.onError(r)})})(this,new se(W.ABORTED,"Firestore shutting down"))}}function Qv(){return new _i(t=>Vw(t),Mu)}async function Fp(t,e){const n=Te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new wP,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Lp(o,`Initialization of query '${ki(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&zp(n)}async function Up(t,e){const n=Te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TP(t,e){const n=Te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.wa)c.Ca(s)&&(r=!0);o.ya=s}}r&&zp(n)}function IP(t,e,n){const r=Te(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function zp(t){t.Da.forEach(e=>{e.next()})}var lf,Yv;(Yv=lf||(lf={})).Fa="default",Yv.Cache="cache";class Bp{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==lf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.key=e}}class yE{constructor(e){this.key=e}}class SP{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ne(),this.mutatedKeys=Ne(),this.Xa=Lw(e),this.eu=new Xi(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Kv,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),w=Vu(this.query,m)?m:null,P=!!g&&this.mutatedKeys.has(g.key),O=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let $=!1;g&&w?g.data.isEqual(w.data)?P!==O&&(r.track({type:3,doc:w}),$=!0):this.iu(g,w)||(r.track({type:2,doc:w}),$=!0,(u&&this.Xa(w,u)>0||d&&this.Xa(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),$=!0):g&&!w&&(r.track({type:1,doc:g}),$=!0,(u||d)&&(c=!0)),$&&(w?(o=o.add(w),i=O?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{eu:o,ru:r,Ds:c,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((p,m)=>function(w,P){const O=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:$})}};return O(w)-O(P)}(p.type,m.type)||this.Xa(p.doc,m.doc)),this.su(r),s=s!=null&&s;const c=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,d=u!==this.Ya;return this.Ya=u,o.length!==0||d?{snapshot:new po(this.query,e.eu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Kv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ne(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new yE(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new vE(r))}),n}uu(e){this.Ha=e.qs,this.Za=Ne();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return po.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const $p="SyncEngine";class AP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class CP{constructor(e){this.key=e,this.lu=!1}}class xP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new _i(c=>Vw(c),Mu),this.Tu=new Map,this.Iu=new Set,this.du=new ct(me.comparator),this.Eu=new Map,this.Au=new kp,this.Ru={},this.Vu=new Map,this.mu=fo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function PP(t,e,n=!0){const r=SE(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await _E(r,e,n,!0),s}async function kP(t,e){const n=SE(t);await _E(n,e,!0,!1)}async function _E(t,e,n,r){const s=await Qx(t.localStore,pr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await NP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&dE(t.remoteStore,s),c}async function NP(t,e,n,r,s){t.gu=(m,g,w)=>async function(O,$,C,E){let S=$.view.nu(C);S.Ds&&(S=await Bv(O.localStore,$.query,!1).then(({documents:v})=>$.view.nu(v,S)));const j=E&&E.targetChanges.get($.targetId),N=E&&E.targetMismatches.get($.targetId)!=null,F=$.view.applyChanges(S,O.isPrimaryClient,j,N);return Xv(O,$.targetId,F._u),F.snapshot}(t,m,g,w);const i=await Bv(t.localStore,e,!0),o=new SP(e,i.qs),c=o.nu(i.documents),u=rl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Xv(t,n,d._u);const p=new AP(e,n,o);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function RP(t,e,n){const r=Te(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Mu(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await of(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&jp(r.remoteStore,s.targetId),cf(r,s.targetId)}).catch(Eo)):(cf(r,s.targetId),await of(r.localStore,s.targetId,!0))}async function DP(t,e){const n=Te(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jp(n.remoteStore,r.targetId))}async function jP(t,e,n){const r=UP(t);try{const s=await function(o,c){const u=Te(o),d=Xe.now(),p=c.reduce((w,P)=>w.add(P.key),Ne());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let P=Hr(),O=Ne();return u.Os.getEntries(w,p).next($=>{P=$,P.forEach((C,E)=>{E.isValidDocument()||(O=O.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,P)).next($=>{m=$;const C=[];for(const E of c){const S=QC(E,m.get(E.key).overlayedDocument);S!=null&&C.push(new Ls(E.key,S,kw(S.value.mapValue),Un.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,C,c)}).next($=>{g=$;const C=$.applyToLocalDocumentSet(m,O);return u.documentOverlayCache.saveOverlays(w,$.batchId,C)})}).then(()=>({batchId:g.batchId,changes:Uw(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ru[o.currentUser.toKey()];d||(d=new ct(Ce)),d=d.insert(c,u),o.Ru[o.currentUser.toKey()]=d}(r,s.batchId,n),await il(r,s.changes),await $u(r.remoteStore)}catch(s){const i=Lp(s,"Failed to persist write");n.reject(i)}}async function wE(t,e){const n=Te(t);try{const r=await Wx(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(Fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?Fe(o.lu,14607):s.removedDocuments.size>0&&(Fe(o.lu,42227),o.lu=!1))}),await il(n,r,e)}catch(r){await Eo(r)}}function Jv(t,e,n){const r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=Te(o);u.onlineState=c;let d=!1;u.queries.forEach((p,m)=>{for(const g of m.wa)g.va(c)&&(d=!0)}),d&&zp(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bP(t,e,n){const r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new ct(me.comparator);o=o.insert(i,Yt.newNoDocument(i,we.min()));const c=Ne().add(i),u=new Uu(we.min(),new Map,new ct(Ce),o,c);await wE(r,u),r.du=r.du.remove(i),r.Eu.delete(e),Hp(r)}else await of(r.localStore,e,!1).then(()=>cf(r,e,n)).catch(Eo)}async function OP(t,e){const n=Te(t),r=e.batch.batchId;try{const s=await qx(n.localStore,e);TE(n,r,null),EE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await il(n,s)}catch(s){await Eo(s)}}async function MP(t,e,n){const r=Te(t);try{const s=await function(o,c){const u=Te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Fe(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);TE(r,e,n),EE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await il(r,s)}catch(s){await Eo(s)}}function EE(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function TE(t,e,n){const r=Te(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function cf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||IE(t,r)})}function IE(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(jp(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Hp(t))}function Xv(t,e,n){for(const r of n)r instanceof vE?(t.Au.addReference(r.key,e),VP(t,r)):r instanceof yE?(oe($p,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||IE(t,r.key)):_e(19791,{yu:r})}function VP(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(oe($p,"New document in limbo: "+n),t.Iu.add(r),Hp(t))}function Hp(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new me(qe.fromString(e)),r=t.mu.next();t.Eu.set(r,new CP(n)),t.du=t.du.insert(n,r),dE(t.remoteStore,new ds(pr(Ou(n.path)),r,"TargetPurposeLimboResolution",Du.ue))}}async function il(t,e,n){const r=Te(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{o.push(r.gu(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Rp.Es(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.hu.J_(s),await async function(u,d){const p=Te(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Y.forEach(d,g=>Y.forEach(g.Is,w=>p.persistence.referenceDelegate.addReference(m,g.targetId,w)).next(()=>Y.forEach(g.ds,w=>p.persistence.referenceDelegate.removeReference(m,g.targetId,w)))))}catch(m){if(!To(m))throw m;oe(Dp,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const w=p.Fs.get(g),P=w.snapshotVersion,O=w.withLastLimboFreeSnapshotVersion(P);p.Fs=p.Fs.insert(g,O)}}}(r.localStore,i))}async function LP(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){oe($p,"User change. New user:",e.toKey());const r=await aE(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(c=>{c.forEach(u=>{u.reject(new se(W.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await il(n,r.Bs)}}function FP(t,e){const n=Te(t),r=n.Eu.get(e);if(r&&r.lu)return Ne().add(r.key);{let s=Ne();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const c=n.Pu.get(o);s=s.unionWith(c.view.tu)}return s}}function SE(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bP.bind(null,e),e.hu.J_=TP.bind(null,e.eventManager),e.hu.pu=IP.bind(null,e.eventManager),e}function UP(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MP.bind(null,e),e}class nu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Hx(this.persistence,new zx,e.initialUser,this.serializer)}Du(e){return new oE(Np.Vi,this.serializer)}bu(e){return new Jx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nu.provider={build:()=>new nu};class zP extends nu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Fe(this.persistence.referenceDelegate instanceof eu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Cx(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new oE(r=>eu.Vi(r,n),this.serializer)}}class uf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LP.bind(null,this.syncEngine),await _P(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EP}()}createDatastore(e){const n=zu(e.databaseInfo.databaseId),r=function(i){return new nP(i)}(e.databaseInfo);return function(i,o,c,u){return new oP(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new lP(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Jv(this.syncEngine,n,0),function(){return qv.C()?new qv:new Xx}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,p){const m=new xP(s,i,o,c,u,d);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Te(s);oe(hi,"RemoteStore shutting down."),i.Ia.add(5),await sl(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}uf.provider={build:()=>new uf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="FirestoreClient";class BP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Kt.UNAUTHENTICATED,this.clientId=yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{oe(js,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe(js,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Lp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $d(t,e){t.asyncQueue.verifyOperationInProgress(),oe(js,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await aE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{xs("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{oe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{xs("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Zv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $P(t);oe(js,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Gv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Gv(e.remoteStore,s)),t._onlineComponents=e}async function $P(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(js,"Using user provided OfflineComponentProvider");try{await $d(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;xs("Error using user provided cache. Falling back to memory cache: "+n),await $d(t,new nu)}}else oe(js,"Using default OfflineComponentProvider"),await $d(t,new zP(void 0));return t._offlineComponents}async function AE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(js,"Using user provided OnlineComponentProvider"),await Zv(t,t._uninitializedComponentsProvider._online)):(oe(js,"Using default OnlineComponentProvider"),await Zv(t,new uf))),t._onlineComponents}function HP(t){return AE(t).then(e=>e.syncEngine)}async function ru(t){const e=await AE(t),n=e.eventManager;return n.onListen=PP.bind(null,e.syncEngine),n.onUnlisten=RP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DP.bind(null,e.syncEngine),n}function qP(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const p=new qp({next:g=>{p.Ou(),o.enqueueAndForget(()=>Up(i,m));const w=g.docs.has(c);!w&&g.fromCache?d.reject(new se(W.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new se(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Bp(Ou(c.path),p,{includeMetadataChanges:!0,ka:!0});return Fp(i,m)}(await ru(t),t.asyncQueue,e,n,r)),r.promise}function WP(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const p=new qp({next:g=>{p.Ou(),o.enqueueAndForget(()=>Up(i,m)),g.fromCache&&u.source==="server"?d.reject(new se(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Bp(c,p,{includeMetadataChanges:!0,ka:!0});return Fp(i,m)}(await ru(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="firestore.googleapis.com",ty=!0;class ny{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xE,this.ssl=ty}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:ty;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Sx)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ny({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ny(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eC;switch(r.type){case"firstParty":return new sC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ey.get(n);r&&(oe("ComponentProvider","Removing Datastore"),ey.delete(n),r.terminate())}(this),Promise.resolve()}}function GP(t,e,n,r={}){var s;t=gn(t,Hu);const i=yi(e),o=t._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(hp(`https://${u}`),fp("Firestore",!0)),o.host!==xE&&o.host!==u&&xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!ci(d,c)&&(t._setSettings(d),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=Kt.MOCK_USER;else{p=A1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new se(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Kt(g)}t._authCredentials=new tC(new gw(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ei(this.firestore,e,this._query)}}class gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(el(n,gt._jsonSchema))return new gt(e,r||null,new me(qe.fromString(n.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:St("string",gt._jsonSchemaVersion),referencePath:St("string")};class Is extends Ei{constructor(e,n,r){super(e,n,Ou(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new me(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function bn(t,e,...n){if(t=lt(t),yw("collection","path",e),t instanceof Hu){const r=qe.fromString(e,...n);return mv(r),new Is(t,null,r)}{if(!(t instanceof gt||t instanceof Is))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return mv(r),new Is(t.firestore,null,r)}}function ln(t,e,...n){if(t=lt(t),arguments.length===1&&(e=yp.newId()),yw("doc","path",e),t instanceof Hu){const r=qe.fromString(e,...n);return pv(r),new gt(t,null,new me(r))}{if(!(t instanceof gt||t instanceof Is))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return pv(r),new gt(t.firestore,t instanceof Is?t.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="AsyncQueue";class sy{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new cE(this,"async_queue_retry"),this.oc=()=>{const r=Bd();r&&oe(ry,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Bd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Bd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Mr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!To(e))throw e;oe(ry,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,$r("INTERNAL UNHANDLED ERROR: ",iy(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Vp.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&_e(47125,{hc:iy(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function iy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class qr extends Hu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new sy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sy(e),this._firestoreClient=void 0,await e}}}function KP(t,e){const n=typeof t=="object"?t:gp(),r=typeof t=="string"?t:Gc,s=Nu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=nw("firestore");i&&GP(s,...i)}return s}function qu(t){if(t._terminated)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||QP(t),t._firestoreClient}function QP(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,p){return new wC(c,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,CE(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new BP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Ft.fromBase64String(e))}catch(n){throw new se(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vn(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(el(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:St("string",Vn._jsonSchemaVersion),bytes:St("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gr._jsonSchemaVersion}}static fromJSON(e){if(el(e,gr._jsonSchema))return new gr(e.latitude,e.longitude)}}gr._jsonSchemaVersion="firestore/geoPoint/1.0",gr._jsonSchema={type:St("string",gr._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(el(e,vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new vr(e.vectorValues);throw new se(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vr._jsonSchemaVersion="firestore/vectorValue/1.0",vr._jsonSchema={type:St("string",vr._jsonSchemaVersion),vectorValues:St("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=/^__.*__$/;class JP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new nl(e,this.data,n,this.fieldTransforms)}}class PE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:t})}}class Gp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Gp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return su(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(kE(this.Ec)&&YP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class XP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zu(e)}Dc(e,n,r,s=!1){return new Gp({Ec:e,methodName:n,bc:r,path:Mt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gu(t){const e=t._freezeSettings(),n=zu(t._databaseId);return new XP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function NE(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);Kp("Data must be an object, but it was:",o,r);const c=RE(r,o);let u,d;if(i.merge)u=new Sn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=df(e,m,n);if(!o.contains(g))throw new se(W.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);jE(p,g)||p.push(g)}u=new Sn(p),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new JP(new un(c),u,d)}class Ku extends Wp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ku}}function ZP(t,e,n,r){const s=t.Dc(1,e,n);Kp("Data must be an object, but it was:",s,r);const i=[],o=un.empty();Vs(r,(u,d)=>{const p=Qp(e,u,n);d=lt(d);const m=s.gc(p);if(d instanceof Ku)i.push(p);else{const g=ol(d,m);g!=null&&(i.push(p),o.set(p,g))}});const c=new Sn(i);return new PE(o,c,s.fieldTransforms)}function ek(t,e,n,r,s,i){const o=t.Dc(1,e,n),c=[df(e,r,n)],u=[s];if(i.length%2!=0)throw new se(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(df(e,i[g])),u.push(i[g+1]);const d=[],p=un.empty();for(let g=c.length-1;g>=0;--g)if(!jE(d,c[g])){const w=c[g];let P=u[g];P=lt(P);const O=o.gc(w);if(P instanceof Ku)d.push(w);else{const $=ol(P,O);$!=null&&(d.push(w),p.set(w,$))}}const m=new Sn(d);return new PE(p,m,o.fieldTransforms)}function tk(t,e,n,r=!1){return ol(n,t.Dc(r?4:3,e))}function ol(t,e){if(DE(t=lt(t)))return Kp("Unsupported field value:",e,t),RE(t,e);if(t instanceof Wp)return function(r,s){if(!kE(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=ol(c,s.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $C(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:Zc(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zc(s.serializer,i)}}if(r instanceof gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vn)return{bytesValue:Xw(s.serializer,r._byteString)};if(r instanceof gt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vr)return function(o,c){return{mapValue:{fields:{[xw]:{stringValue:Pw},[Kc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.wc("VectorValues must only contain numeric values.");return Sp(c.serializer,d)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Ru(r)}`)}(t,e)}function RE(t,e){const n={};return Ew(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(t,(r,s)=>{const i=ol(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function DE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof gr||t instanceof Vn||t instanceof gt||t instanceof Wp||t instanceof vr)}function Kp(t,e,n){if(!DE(n)||!_w(n)){const r=Ru(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function df(t,e,n){if((e=lt(e))instanceof Wu)return e._internalPath;if(typeof e=="string")return Qp(t,e);throw su("Field path arguments must be of type string or ",t,!1,void 0,n)}const nk=new RegExp("[~\\*/\\[\\]]");function Qp(t,e,n){if(e.search(nk)>=0)throw su(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wu(...e.split("."))._internalPath}catch{throw su(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function su(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new se(W.INVALID_ARGUMENT,c+t+u)}function jE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rk extends bE{data(){return super.data()}}function Yp(t,e){return typeof e=="string"?Qp(t,e):e instanceof Wu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jp{}class sk extends Jp{}function Hd(t,e,...n){let r=[];e instanceof Jp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Xp).length,c=i.filter(u=>u instanceof Qu).length;if(o>1||o>0&&c>0)throw new se(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Qu extends sk{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qu(e,n,r)}_apply(e){const n=this._parse(e);return ME(e._query,n),new Ei(e.firestore,e.converter,Zh(e._query,n))}_parse(e){const n=Gu(e.firestore);return function(i,o,c,u,d,p,m){let g;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new se(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ly(m,p);const P=[];for(const O of m)P.push(ay(u,i,O));g={arrayValue:{values:P}}}else g=ay(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ly(m,p),g=tk(c,o,m,p==="in"||p==="not-in");return It.create(d,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qd(t,e,n){const r=e,s=Yp("where",t);return Qu._create(s,r,n)}class Xp extends Jp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:tr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)ME(o,u),o=Zh(o,u)}(e._query,n),new Ei(e.firestore,e.converter,Zh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ay(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new se(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mw(e)&&n.indexOf("/")!==-1)throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qe.fromString(n));if(!me.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iv(t,new me(r))}if(n instanceof gt)return Iv(t,n._key);throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ru(n)}.`)}function ly(t,e){if(!Array.isArray(t)||t.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ME(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ik{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Kc].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>_t(o.doubleValue));return new vr(i)}convertGeoPoint(e){return new gr(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fa(e));default:return null}}convertTimestamp(e){const n=ks(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);Fe(sE(r),9688,{name:e});const s=new Ua(r.get(1),r.get(3)),i=new me(r.popFirst(5));return s.isEqual(n)||$r(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ni extends bE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ni._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ni._jsonSchemaVersion="firestore/documentSnapshot/1.0",ni._jsonSchema={type:St("string",ni._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};class pc extends ni{data(e={}){return super.data(e)}}class ri{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ta(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pc(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new pc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ta(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new pc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ta(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:ok(c.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ri._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ok(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t){t=gn(t,gt);const e=gn(t.firestore,qr);return qP(qu(e),t._key).then(n=>FE(e,t,n))}ri._jsonSchemaVersion="firestore/querySnapshot/1.0",ri._jsonSchema={type:St("string",ri._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};class Zp extends ik{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}function Wd(t){t=gn(t,Ei);const e=gn(t.firestore,qr),n=qu(e),r=new Zp(e);return OE(t._query),WP(n,t._query).then(s=>new ri(e,r,t,s))}function na(t,e,n){t=gn(t,gt);const r=gn(t.firestore,qr),s=VE(t.converter,e,n);return Yu(r,[NE(Gu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Un.none())])}function ya(t,e,n,...r){t=gn(t,gt);const s=gn(t.firestore,qr),i=Gu(s);let o;return o=typeof(e=lt(e))=="string"||e instanceof Wu?ek(i,"updateDoc",t._key,e,n,r):ZP(i,"updateDoc",t._key,e),Yu(s,[o.toMutation(t._key,Un.exists(!0))])}function LE(t){return Yu(gn(t.firestore,qr),[new Ap(t._key,Un.none())])}function cy(t,e){const n=gn(t.firestore,qr),r=ln(t),s=VE(t.converter,e);return Yu(n,[NE(Gu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}function Qs(t,...e){var n,r,s;t=lt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||oy(e[o])||(i=e[o++]);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(oy(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,p;if(t instanceof gt)d=gn(t.firestore,qr),p=Ou(t._key.path),u={next:m=>{e[o]&&e[o](FE(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=gn(t,Ei);d=gn(m.firestore,qr),p=m._query;const g=new Zp(d);u={next:w=>{e[o]&&e[o](new ri(d,g,m,w))},error:e[o+1],complete:e[o+2]},OE(t._query)}return function(g,w,P,O){const $=new qp(O),C=new Bp(w,$,P);return g.asyncQueue.enqueueAndForget(async()=>Fp(await ru(g),C)),()=>{$.Ou(),g.asyncQueue.enqueueAndForget(async()=>Up(await ru(g),C))}}(qu(d),p,c,u)}function Yu(t,e){return function(r,s){const i=new Mr;return r.asyncQueue.enqueueAndForget(async()=>jP(await HP(r),s,i)),i.promise}(qu(t),e)}function FE(t,e,n){const r=n.docs.get(e._key),s=new Zp(t);return new ni(t,s,e._key,r,new ta(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){wo=s})(_o),ui(new Cs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new qr(new nC(r.getProvider("auth-internal")),new iC(o,r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new se(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(d.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),fr(cv,uv,e),fr(cv,uv,"esm2017")})();function em(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function UE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lk=UE,zE=new Xa("auth","Firebase",UE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new pp("@firebase/auth");function ck(t,...e){iu.logLevel<=ke.WARN&&iu.warn(`Auth (${_o}): ${t}`,...e)}function mc(t,...e){iu.logLevel<=ke.ERROR&&iu.error(`Auth (${_o}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,...e){throw tm(t,...e)}function yr(t,...e){return tm(t,...e)}function BE(t,e,n){const r=Object.assign(Object.assign({},lk()),{[e]:n});return new Xa("auth","Firebase",r).create(e,{appName:t.name})}function Vr(t){return BE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zE.create(t,...e)}function ye(t,e,...n){if(!t)throw tm(e,...n)}function Dr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mc(e),new Error(e)}function Wr(t,e){t||Dr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uk(){return uy()==="http:"||uy()==="https:"}function uy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uk()||R1()||"connection"in navigator)?navigator.onLine:!0}function hk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=P1()||D1()}get(){return dk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mk=new al(3e4,6e4);function Fs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Us(t,e,n,r,s={}){return HE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Za(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return N1()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&yi(t.emulatorConfig.host)&&(d.credentials="include"),$E.fetch()(await qE(t,t.config.apiHost,n,c),d)})}async function HE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},fk),e);try{const s=new vk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Kl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Kl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Kl(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw BE(t,p,d);nr(t,p)}}catch(s){if(s instanceof Er)throw s;nr(t,"network-request-failed",{message:String(s)})}}async function ll(t,e,n,r,s={}){const i=await Us(t,e,n,r,s);return"mfaPendingCredential"in i&&nr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function qE(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?nm(t.config,s):`${t.config.apiScheme}://${s}`;return pk.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function gk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yr(this.auth,"network-request-failed")),mk.get())})}}function Kl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yr(t,e,r);return s.customData._tokenResponse=n,s}function dy(t){return t!==void 0&&t.enterprise!==void 0}class yk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _k(t,e){return Us(t,"GET","/v2/recaptchaConfig",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(t,e){return Us(t,"POST","/v1/accounts:delete",e)}async function ou(t,e){return Us(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ek(t,e=!1){const n=lt(t),r=await n.getIdToken(e),s=rm(r);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:_a(Gd(s.auth_time)),issuedAtTime:_a(Gd(s.iat)),expirationTime:_a(Gd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Gd(t){return Number(t)*1e3}function rm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return mc("JWT malformed, contained fewer than 3 sections"),null;try{const s=ew(n);return s?JSON.parse(s):(mc("Failed to decode base64 JWT payload"),null)}catch(s){return mc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hy(t){const e=rm(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Er&&Tk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Tk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_a(this.lastLoginAt),this.creationTime=_a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ha(t,ou(n,{idToken:r}));ye(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?WE(i.providerUserInfo):[],c=Ak(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new ff(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function Sk(t){const e=lt(t);await au(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ak(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function WE(t){return t.map(e=>{var{providerId:n}=e,r=em(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(t,e){const n=await HE(t,{},async()=>{const r=Za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await qE(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&yi(t.emulatorConfig.host)&&(u.credentials="include"),$E.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xk(t,e){return Us(t,"POST","/v2/accounts:revokeToken",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=hy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Ck(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Zi;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zi,this.toJSON())}_performRefresh(){return Dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=em(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ik(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ff(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ha(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ek(this,e)}reload(){return Sk(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await au(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await Ha(this,wk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,d,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,O=(c=n.tenantId)!==null&&c!==void 0?c:void 0,$=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,C=(d=n.createdAt)!==null&&d!==void 0?d:void 0,E=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:S,emailVerified:j,isAnonymous:N,providerData:F,stsTokenManager:v}=n;ye(S&&v,e,"internal-error");const y=Zi.fromJSON(this.name,v);ye(typeof S=="string",e,"internal-error"),Xr(m,e.name),Xr(g,e.name),ye(typeof j=="boolean",e,"internal-error"),ye(typeof N=="boolean",e,"internal-error"),Xr(w,e.name),Xr(P,e.name),Xr(O,e.name),Xr($,e.name),Xr(C,e.name),Xr(E,e.name);const I=new Jn({uid:S,auth:e,email:g,emailVerified:j,displayName:m,isAnonymous:N,photoURL:P,phoneNumber:w,tenantId:O,stsTokenManager:y,createdAt:C,lastLoginAt:E});return F&&Array.isArray(F)&&(I.providerData=F.map(A=>Object.assign({},A))),$&&(I._redirectEventId=$),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Zi;s.updateFromServerResponse(n);const i=new Jn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await au(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?WE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Zi;c.updateFromIdToken(r);const u=new Jn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ff(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=new Map;function jr(t){Wr(t instanceof Function,"Expected a class definition");let e=fy.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GE.type="NONE";const py=GE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t,e,n){return`firebase:${t}:${e}:${n}`}class eo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=gc(this.userKey,s.apiKey,i),this.fullPersistenceKey=gc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ou(this.auth,{idToken:e}).catch(()=>{});return n?Jn._fromGetAccountInfoResponse(this.auth,n,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new eo(jr(py),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||jr(py);const o=gc(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(o);if(p){let m;if(typeof p=="string"){const g=await ou(e,{idToken:p}).catch(()=>{});if(!g)break;m=await Jn._fromGetAccountInfoResponse(e,g,p)}else m=Jn._fromJSON(e,p);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new eo(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new eo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZE(e))return"Blackberry";if(eT(e))return"Webos";if(QE(e))return"Safari";if((e.includes("chrome/")||YE(e))&&!e.includes("edge/"))return"Chrome";if(XE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function KE(t=Xt()){return/firefox\//i.test(t)}function QE(t=Xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YE(t=Xt()){return/crios\//i.test(t)}function JE(t=Xt()){return/iemobile/i.test(t)}function XE(t=Xt()){return/android/i.test(t)}function ZE(t=Xt()){return/blackberry/i.test(t)}function eT(t=Xt()){return/webos/i.test(t)}function sm(t=Xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Pk(t=Xt()){var e;return sm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kk(){return j1()&&document.documentMode===10}function tT(t=Xt()){return sm(t)||XE(t)||eT(t)||ZE(t)||/windows phone/i.test(t)||JE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t,e=[]){let n;switch(t){case"Browser":n=my(Xt());break;case"Worker":n=`${my(Xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_o}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(t,e={}){return Us(t,"GET","/v2/passwordPolicy",Fs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=6;class jk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Dk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gy(this),this.idTokenSubscription=new gy(this),this.beforeStateQueue=new Nk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await eo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ou(this,{idToken:e}),r=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Tn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await au(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(Vr(this));const n=e?lt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Rk(this),n=new jk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jr(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await eo.create(this,[jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ck(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ti(t){return lt(t)}class gy{constructor(e){this.auth=e,this.observer=null,this.addObserver=z1(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ok(t){Ju=t}function rT(t){return Ju.loadJS(t)}function Mk(){return Ju.recaptchaEnterpriseScript}function Vk(){return Ju.gapiScript}function Lk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Fk{constructor(){this.enterprise=new Uk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Uk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const zk="recaptcha-enterprise",sT="NO_RECAPTCHA";class Bk{constructor(e){this.type=zk,this.auth=Ti(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{_k(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new yk(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;dy(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(sT)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Fk().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&dy(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Mk();u.length!==0&&(u+=c),rT(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function vy(t,e,n,r=!1,s=!1){const i=new Bk(t);let o;if(s)o=sT;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function pf(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await vy(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await vy(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t,e){const n=Nu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ci(i,e??{}))return s;nr(s,"already-initialized")}return n.initialize({options:e})}function Hk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function qk(t,e,n){const r=Ti(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=iT(e),{host:o,port:c}=Wk(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},p=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(ci(d,r.config.emulator)&&ci(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,yi(o)?(hp(`${i}//${o}${u}`),fp("Auth",!0)):Gk()}function iT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Wk(t){const e=iT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:yy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:yy(o)}}}function yy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Gk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,n){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}}async function Kk(t,e){return Us(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(t,e){return ll(t,"POST","/v1/accounts:signInWithPassword",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(t,e){return ll(t,"POST","/v1/accounts:signInWithEmailLink",Fs(t,e))}async function Jk(t,e){return ll(t,"POST","/v1/accounts:signInWithEmailLink",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends im{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new qa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new qa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pf(e,n,"signInWithPassword",Qk);case"emailLink":return Yk(e,{email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pf(e,r,"signUpPassword",Kk);case"emailLink":return Jk(e,{idToken:n,email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(t,e){return ll(t,"POST","/v1/accounts:signInWithIdp",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="http://localhost";class fi extends im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=em(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new fi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return to(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,to(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,to(e,n)}buildRequest(){const e={requestUri:Xk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Za(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eN(t){const e=Yo(Jo(t)).link,n=e?Yo(Jo(e)).deep_link_id:null,r=Yo(Jo(t)).deep_link_id;return(r?Yo(Jo(r)).link:null)||r||n||e||t}class om{constructor(e){var n,r,s,i,o,c;const u=Yo(Jo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,m=Zk((s=u.mode)!==null&&s!==void 0?s:null);ye(d&&p&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=p,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=eN(e);try{return new om(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.providerId=So.PROVIDER_ID}static credential(e,n){return qa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=om.parseLink(n);return ye(r,"argument-error"),qa._fromEmailAndCode(e,r.code,r.tenantId)}}So.PROVIDER_ID="password";So.EMAIL_PASSWORD_SIGN_IN_METHOD="password";So.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends oT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends cl{constructor(){super("facebook.com")}static credential(e){return fi._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fi._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return is.credential(n,r)}catch{return null}}}is.GOOGLE_SIGN_IN_METHOD="google.com";is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends cl{constructor(){super("github.com")}static credential(e){return fi._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.GITHUB_SIGN_IN_METHOD="github.com";os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends cl{constructor(){super("twitter.com")}static credential(e,n){return fi._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return as.credential(n,r)}catch{return null}}}as.TWITTER_SIGN_IN_METHOD="twitter.com";as.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e){return ll(t,"POST","/v1/accounts:signUp",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Jn._fromIdTokenResponse(e,r,s),o=_y(r);return new pi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=_y(r);return new pi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function _y(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends Er{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,lu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new lu(e,n,r,s)}}function aT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?lu._fromErrorAndOperation(t,i,e,r):i})}async function nN(t,e,n=!1){const r=await Ha(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e,n=!1){const{auth:r}=t;if(Tn(r.app))return Promise.reject(Vr(r));const s="reauthenticate";try{const i=await Ha(t,aT(r,s,e,t),n);ye(i.idToken,r,"internal-error");const o=rm(i.idToken);ye(o,r,"internal-error");const{sub:c}=o;return ye(t.uid===c,r,"user-mismatch"),pi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&nr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lT(t,e,n=!1){if(Tn(t.app))return Promise.reject(Vr(t));const r="signIn",s=await aT(t,r,e),i=await pi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function sN(t,e){return lT(Ti(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(t){const e=Ti(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function uT(t,e,n){if(Tn(t.app))return Promise.reject(Vr(t));const r=Ti(t),o=await pf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tN).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&cT(t),u}),c=await pi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function iN(t,e,n){return Tn(t.app)?Promise.reject(Vr(t)):sN(lt(t),So.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t,e){return lt(t).setPersistence(e)}function aN(t,e,n,r){return lt(t).onIdTokenChanged(e,n,r)}function lN(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function cN(t,e,n,r){return lt(t).onAuthStateChanged(e,n,r)}function uN(t){return lt(t).signOut()}const cu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cu,"1"),this.storage.removeItem(cu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=1e3,hN=10;class hT extends dT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);kk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,hN):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},dN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hT.type="LOCAL";const fN=hT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT extends dT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fT.type="SESSION";const am=fT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Xu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await pN(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=lm("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function gN(t){_r().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function vN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _N(){return pT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="firebaseLocalStorageDb",wN=1,uu="firebaseLocalStorage",gT="fbase_key";class ul{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zu(t,e){return t.transaction([uu],e?"readwrite":"readonly").objectStore(uu)}function EN(){const t=indexedDB.deleteDatabase(mT);return new ul(t).toPromise()}function mf(){const t=indexedDB.open(mT,wN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(uu,{keyPath:gT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(uu)?e(r):(r.close(),await EN(),e(await mf()))})})}async function wy(t,e,n){const r=Zu(t,!0).put({[gT]:e,value:n});return new ul(r).toPromise()}async function TN(t,e){const n=Zu(t,!1).get(e),r=await new ul(n).toPromise();return r===void 0?null:r.value}function Ey(t,e){const n=Zu(t,!0).delete(e);return new ul(n).toPromise()}const IN=800,SN=3;class vT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>SN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xu._getInstance(_N()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await vN(),!this.activeServiceWorker)return;this.sender=new mN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mf();return await wy(e,cu,"1"),await Ey(e,cu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ey(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Zu(s,!1).getAll();return new ul(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vT.type="LOCAL";const AN=vT;new al(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t,e){return e?jr(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm extends im{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return to(e,this._buildIdpRequest())}_linkToIdToken(e,n){return to(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return to(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function xN(t){return lT(t.auth,new cm(t),t.bypassAuthState)}function PN(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),rN(n,new cm(t),t.bypassAuthState)}async function kN(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),nN(n,new cm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xN;case"linkViaPopup":case"linkViaRedirect":return kN;case"reauthViaPopup":case"reauthViaRedirect":return PN;default:nr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new al(2e3,1e4);class qi extends yT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,qi.currentPopupAction&&qi.currentPopupAction.cancel(),qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NN.get())};e()}}qi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="pendingRedirect",vc=new Map;class DN extends yT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vc.get(this.auth._key());if(!e){try{const r=await jN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vc.set(this.auth._key(),e)}return this.bypassAuthState||vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jN(t,e){const n=MN(e),r=ON(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function bN(t,e){vc.set(t._key(),e)}function ON(t){return jr(t._redirectPersistence)}function MN(t){return gc(RN,t.config.apiKey,t.name)}async function VN(t,e,n=!1){if(Tn(t.app))return Promise.reject(Vr(t));const r=Ti(t),s=CN(r,e),o=await new DN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=10*60*1e3;class FN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_T(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ty(e))}saveEventToCache(e){this.cachedEventUids.add(Ty(e)),this.lastProcessedEventTime=Date.now()}}function Ty(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _T({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _T(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e={}){return Us(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$N=/^https?/;async function HN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zN(t);for(const n of e)try{if(qN(n))return}catch{}nr(t,"unauthorized-domain")}function qN(t){const e=hf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$N.test(n))return!1;if(BN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new al(3e4,6e4);function Iy(){const t=_r().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GN(t){return new Promise((e,n)=>{var r,s,i;function o(){Iy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Iy(),n(yr(t,"network-request-failed"))},timeout:WN.get()})}if(!((s=(r=_r().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=_r().gapi)===null||i===void 0)&&i.load)o();else{const c=Lk("iframefcb");return _r()[c]=()=>{gapi.load?o():n(yr(t,"network-request-failed"))},rT(`${Vk()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw yc=null,e})}let yc=null;function KN(t){return yc=yc||GN(t),yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new al(5e3,15e3),YN="__/auth/iframe",JN="emulator/auth/iframe",XN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eR(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nm(e,JN):`https://${t.config.authDomain}/${YN}`,r={apiKey:e.apiKey,appName:t.name,v:_o},s=ZN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Za(r).slice(1)}`}async function tR(t){const e=await KN(t),n=_r().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:eR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=yr(t,"network-request-failed"),c=_r().setTimeout(()=>{i(o)},QN.get());function u(){_r().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rR=500,sR=600,iR="_blank",oR="http://localhost";class Sy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aR(t,e,n,r=rR,s=sR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},nR),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Xt().toLowerCase();n&&(c=YE(d)?iR:n),KE(d)&&(e=e||oR,u.scrollbars="yes");const p=Object.entries(u).reduce((g,[w,P])=>`${g}${w}=${P},`,"");if(Pk(d)&&c!=="_self")return lR(e||"",c),new Sy(null);const m=window.open(e||"",c,p);ye(m,t,"popup-blocked");try{m.focus()}catch{}return new Sy(m)}function lR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="__/auth/handler",uR="emulator/auth/handler",dR=encodeURIComponent("fac");async function Ay(t,e,n,r,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_o,eventId:s};if(e instanceof oT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",U1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof cl){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),d=u?`#${dR}=${encodeURIComponent(u)}`:"";return`${hR(t)}?${Za(c).slice(1)}${d}`}function hR({config:t}){return t.emulator?nm(t,uR):`https://${t.authDomain}/${cR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="webStorageSupport";class fR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=am,this._completeRedirectFn=VN,this._overrideRedirectResult=bN}async _openPopup(e,n,r,s){var i;Wr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Ay(e,n,r,hf(),s);return aR(e,o,lm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Ay(e,n,r,hf(),s);return gN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Wr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await tR(e),r=new FN(e);return n.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Kd,{type:Kd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Kd];o!==void 0&&n(!!o),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tT()||QE()||sm()}}const pR=fR;var Cy="@firebase/auth",xy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vR(t){ui(new Cs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nT(t)},d=new bk(r,s,i,u);return Hk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ui(new Cs("auth-internal",e=>{const n=Ti(e.getProvider("auth").getImmediate());return(r=>new mR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(Cy,xy,gR(t)),fr(Cy,xy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=5*60,_R=sw("authIdTokenMaxAge")||yR;let Py=null;const wR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_R)return;const s=n==null?void 0:n.token;Py!==s&&(Py=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ER(t=gp()){const e=Nu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$k(t,{popupRedirectResolver:pR,persistence:[AN,fN,am]}),r=sw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=wR(i.toString());lN(n,o,()=>o(n.currentUser)),aN(n,c=>o(c))}}const s=tw("auth");return s&&qk(n,`http://${s}`),n}function TR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ok({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",TR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vR("Browser");const ra={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"},IR=typeof window<"u"&&window.__FIREBASE_CONFIG__||null,wT={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"},SR=!!(ra.apiKey&&ra.authDomain&&ra.projectId&&ra.appId),Di=IR||(SR?ra:wT),AR=!!(Di&&Di.apiKey&&Di.authDomain&&Di.projectId&&Di.appId);let mi=null;if(AR)try{mi=Wh(Di)}catch{try{mi=Wh(wT)}catch{}}const he=mi?KP(mi):null,cr=mi?ER(mi):null;if(cr)try{oN(cr,am).catch(()=>{})}catch{}const ky=mi;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="type.googleapis.com/google.protobuf.Int64Value",xR="type.googleapis.com/google.protobuf.UInt64Value";function ET(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function du(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>du(e));if(typeof t=="function"||typeof t=="object")return ET(t,e=>du(e));throw new Error("Data cannot be encoded in JSON: "+t)}function mo(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case CR:case xR:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>mo(e)):typeof t=="function"||typeof t=="object"?ET(t,e=>mo(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hn extends Er{constructor(e,n,r){super(`${um}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,hn.prototype)}}function PR(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function hu(t,e){let n=PR(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Ny[o])return new hn("internal","internal");n=Ny[o],r=o}const c=i.message;typeof c=="string"&&(r=c),s=i.details,s!==void 0&&(s=mo(s))}}catch{}return n==="ok"?null:new hn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Tn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="us-central1",NR=/^data: (.*?)(?:\n|$)/;function RR(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new hn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class DR{constructor(e,n,r,s,i=gf,o=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new kR(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=gf}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function jR(t,e,n){const r=yi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(hp(t.emulatorOrigin),fp("Functions",!0))}function bR(t,e,n){const r=s=>MR(t,e,s,{});return r.stream=(s,i)=>LR(t,e,s,i),r}async function OR(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}async function TT(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function MR(t,e,n,r){const s=t._url(e);return VR(t,s,n,r)}async function VR(t,e,n,r){n=du(n);const s={data:n},i=await TT(t,r),o=r.timeout||7e4,c=RR(o),u=await Promise.race([OR(e,s,i,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!u)throw new hn("cancelled","Firebase Functions instance was deleted.");const d=hu(u.status,u.json);if(d)throw d;if(!u.json)throw new hn("internal","Response is not valid JSON object.");let p=u.json.data;if(typeof p>"u"&&(p=u.json.result),typeof p>"u")throw new hn("internal","Response is missing data field.");return{data:mo(p)}}function LR(t,e,n,r){const s=t._url(e);return FR(t,s,n,r||{})}async function FR(t,e,n,r){var s;n=du(n);const i={data:n},o=await TT(t,r);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:o,signal:r==null?void 0:r.signal})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const O=new hn("cancelled","Request was cancelled.");return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}const P=hu(0,null);return{data:Promise.reject(P),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(P)}}}}}}let u,d;const p=new Promise((w,P)=>{u=w,d=P});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const w=new hn("cancelled","Request was cancelled.");d(w)});const m=c.body.getReader(),g=UR(m,u,d,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const w=g.getReader();return{async next(){const{value:P,done:O}=await w.read();return{value:P,done:O}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:p}}function UR(t,e,n,r){const s=(o,c)=>{const u=o.match(NR);if(!u)return;const d=u[1];try{const p=JSON.parse(d);if("result"in p){e(mo(p.result));return}if("message"in p){c.enqueue(mo(p.message));return}if("error"in p){const m=hu(0,p);c.error(m),n(m);return}}catch(p){if(p instanceof hn){c.error(p),n(p);return}}},i=new TextDecoder;return new ReadableStream({start(o){let c="";return u();async function u(){if(r!=null&&r.aborted){const d=new hn("cancelled","Request was cancelled");return o.error(d),n(d),Promise.resolve()}try{const{value:d,done:p}=await t.read();if(p){c.trim()&&s(c.trim(),o),o.close();return}if(r!=null&&r.aborted){const g=new hn("cancelled","Request was cancelled");o.error(g),n(g),await t.cancel();return}c+=i.decode(d,{stream:!0});const m=c.split(`
`);c=m.pop()||"";for(const g of m)g.trim()&&s(g.trim(),o);return u()}catch(d){const p=d instanceof hn?d:hu(0,null);o.error(p),n(p)}}},cancel(){return t.cancel()}})}const Ry="@firebase/functions",Dy="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="auth-internal",BR="app-check-internal",$R="messaging-internal";function HR(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(zR),o=n.getProvider($R),c=n.getProvider(BR);return new DR(s,i,o,c,r)};ui(new Cs(um,e,"PUBLIC").setMultipleInstances(!0)),fr(Ry,Dy,t),fr(Ry,Dy,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t=gp(),e=gf){const r=Nu(lt(t),um).getImmediate({identifier:e}),s=nw("functions");return s&&WR(r,...s),r}function WR(t,e,n){jR(lt(t),e,n)}function GR(t,e,n){return bR(lt(t),e)}HR();const ed="https://gerencimaneto-mkt-betaki.onrender.com",jy=t=>fetch(`${ed}${t}`).then(e=>e.json()),by=(t,e)=>fetch(`${ed}${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()),KR=(t,e)=>fetch(`${ed}${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()),Oy=t=>fetch(`${ed}${t}`,{method:"DELETE"}).then(e=>e.json()),QR=!0,en={listDemandas:()=>jy("/api/demandas"),createDemanda:t=>by("/api/demandas",t),updateDemanda:(t,e)=>KR(`/api/demandas/${t}`,e),deleteDemanda:t=>Oy(`/api/demandas/${t}`),listCadastros:t=>jy(`/api/cadastros/${t}`),addCadastro:(t,e)=>by(`/api/cadastros/${t}`,{name:e}),removeCadastro:(t,e)=>Oy(`/api/cadastros/${t}/${encodeURIComponent(e)}`)},Ql=(t,e)=>{try{const n=JSON.parse(localStorage.getItem(t)||"null");return Array.isArray(n)?n:e}catch{return e}},Yl=(t,e)=>{try{const n=JSON.parse(localStorage.getItem(t)||"null");return n&&typeof n=="object"&&!Array.isArray(n)?n:e}catch{return e}},Zr=(t,e)=>localStorage.setItem(t,JSON.stringify(e)),ls=()=>{try{return JSON.parse(localStorage.getItem("users")||"[]")}catch{return[]}},_c=t=>localStorage.setItem("users",JSON.stringify(t)),My=()=>{const t=ls();if(!t.find(e=>e.username==="admin")){const e={username:"admin",name:"Administrador",role:"admin",password:"f3l1p3",pages:{dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0},actions:{criar:!0,excluir:!0,visualizar:!0}};_c([...t,e])}},Wa=["Pendente","Em produo","Aguardando Feedback","Aprovada","Revisar","Concluida"],dm=["Instagram","Trfego Pago","CRM","Influencers","Site","Branding","Outros"],YR=t=>t==="Aberta"?"Aberta":t==="Em Progresso"?"Em Progresso":t==="Concluda"?"Concluda":t,IT=t=>YR(t),ST=t=>{const e=(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")?"st-pending":e.includes("progresso")||e.includes("produo")?"st-progress":e.includes("feedback")?"st-feedback":e.includes("revisar")?"st-review":e.includes("aprov")?"st-approved":e.includes("conclu")?"st-concluded":e.includes("atras")?"st-late":""},hm=t=>{const e=String(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")||t==="Aberta"||t==="Pendente"},fm=t=>{const e=String(t||"").toLowerCase();return e.includes("produo")||e.includes("progresso")||t==="Em Progresso"||t==="Em produo"},br=t=>{const e=String(t||"").toLowerCase();return e.includes("conclu")||e.includes("aprov")||t==="Concluda"||t==="Aprovada"},JR=t=>{const e=String(t||"").match(/@([a-zA-Z0-9_]+)/g);return e?e.map(n=>n.slice(1)):[]},Vy=t=>{if(t==null)return"";const e=Math.max(0,Math.round(t)),n=Math.floor(e/60),r=e%60;return n>0?`${n}h ${r}m`:`${r}m`},vf=(t,e)=>{const n=t.filter(N=>String(N.status||"").toLowerCase().includes("conclu")||N.status==="Concluda"),r=n.filter(N=>(N.designer||"")===(e.designer||"")),s=n.filter(N=>(N.tipoMidia||"")===(e.tipoMidia||"")),i=n.filter(N=>(N.origem||"")===(e.origem||"")),o=n.filter(N=>(N.plataforma||"")===(e.plataforma||"")),c=(N,F)=>{const v=A=>{const[k,R,x]=String(A||"").split("-").map(Number);return k?new Date(k,R-1,x):null},y=v(N),I=v(F);return!y||!I?null:Math.max(0,Math.round((I-y)/864e5))},u=(()=>{const N=n.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),F=N.reduce((v,y)=>v+y,0)/(N.length||1);return Math.max(1,Math.round(F))})(),d=(()=>{const N=r.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),F=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(F)):null})(),p=(()=>{const N=s.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),F=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(F)):null})(),m=(()=>{const N=i.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),F=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(F)):null})(),g=(()=>{const N=o.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),F=N.reduce((v,y)=>v+y,0)/(N.length||1);return N.length?Math.max(1,Math.round(F)):null})(),w=(()=>{const N=r.map(v=>v.revisoes||0),F=N.reduce((v,y)=>v+y,0)/(N.length||1);return Math.round(F)})(),P=t.filter(N=>(N.designer||"")===(e.designer||"")&&!/conclu/i.test(String(N.status||""))).length,$=Math.min(100,Math.round(P/4*100)),C=d??p??g??m??u,E=($>=80?1:0)+(w>=2?1:0),S=Math.max(1,C+E),j=[];return j.push(`Estimativa: ${S} dia${S>1?"s":""} teis`),$>=80&&j.push("Alta probabilidade de atraso devido  carga acima de 80%"),S===1&&j.push("Pea deve ser concluda ainda hoje  Hoje at s 17h"),w>=2&&j.push("Revises esperadas acima da mdia para este designer"),j.join("  ")},AT={bg:"#070707",panel:"#0E0E0E",text:"#F2F2F2",muted:"#BDBDBD",border:"#ffffff1a",accent:"#BCD200",hover:"rgba(255,255,255,0.03)",btnBg:"#BCD200",btnText:"#111111",btnHoverBg:"#C7DB00",btnBorder:"#ffffff1a",shadow:"0 10px 30px rgba(0,0,0,.15)",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",chart:"#3b82f6"},kt=()=>{const t=new Date,e=n=>String(n).padStart(2,"0");return`${t.getFullYear()}-${e(t.getMonth()+1)}-${e(t.getDate())}`},XR=()=>{try{return JSON.parse(localStorage.getItem("demandas")||"[]")}catch{return[]}},ZR=t=>localStorage.setItem("demandas",JSON.stringify(t)),Ly=t=>{const e=t.map(n=>typeof n.id=="number"?n.id:Number(n.id)||0);return e.length?Math.max(...e)+1:1};function eD({series:t,color:e="#BCD200"}){const s=Math.max(...t,1),i=t.length>1?120/(t.length-1):120,o=t.map((u,d)=>({x:d*i,y:30-u/s*30})),c=o.map(u=>`${u.x},${u.y}`).join(" ");return l.jsxs("svg",{width:120,height:30,className:"sparkline",viewBox:"0 0 120 30",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"sg",x1:"0",x2:"1",y1:"0",y2:"0",children:[l.jsx("stop",{offset:"0%",stopColor:e,stopOpacity:"0.6"}),l.jsx("stop",{offset:"100%",stopColor:e,stopOpacity:"1"})]})}),l.jsx("polyline",{points:c,fill:"none",stroke:"url(#sg)",strokeWidth:"2.5"}),o.map((u,d)=>l.jsx("circle",{cx:u.x,cy:u.y,r:"2.5",fill:e},d))]})}function Ve({name:t,size:e=18}){const n={width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};return t==="dashboard"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"})]}):t==="demandas"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M8 3h8"}),l.jsx("path",{d:"M8 7h8"}),l.jsx("rect",{x:"5",y:"3",width:"14",height:"18",rx:"2"})]}):t==="config"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.7 1.7 0 0 0 .3 1.8l.1.1-1.5 2.6-.1.1a1.8 1.8 0 0 0-2.2.8h-.2l-3-.4h-.2a1.8 1.8 0 0 0-1.6 0h-.2l-3 .4h-.2a1.8 1.8 0 0 0-2.2-.8l-.1-.1-1.5-2.6.1-.1a1.8 1.8 0 0 0 .3-1.8v-.2l-.4-3v-.2a1.8 1.8 0 0 0 0-1.6v-.2l.4-3v-.2a1.7 1.7 0 0 0-.3-1.8l-.1-.1L4.4 4l.1-.1a1.8 1.8 0 0 0 2.2-.8h.2l3 .4h.2a1.8 1.8 0 0 0 1.6 0h.2l3-.4h.2a1.8 1.8 0 0 0 2.2.8l.1.1 1.5 2.6-.1.1a1.8 1.8 0 0 0-.3 1.8v.2l.4 3v.2a1.8 1.8 0 0 0 0 1.6v.2Z"})]}):t==="cadastros"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M4 6h16"}),l.jsx("path",{d:"M4 12h10"}),l.jsx("path",{d:"M4 18h7"})]}):t==="relatorios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 20h18"}),l.jsx("rect",{x:"6",y:"14",width:"3",height:"6"}),l.jsx("rect",{x:"11",y:"10",width:"3",height:"10"}),l.jsx("rect",{x:"16",y:"6",width:"3",height:"14"})]}):t==="usuarios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"3"}),l.jsx("path",{d:"M19 8v6"}),l.jsx("path",{d:"M22 11h-6"})]}):t==="filter"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"11",cy:"11",r:"7"}),l.jsx("path",{d:"M20 20l-3.5-3.5"})]}):t==="table"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M3 10h18"}),l.jsx("path",{d:"M10 4v16"})]}):t==="board"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"10",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"17",y:"4",width:"4",height:"16",rx:"2"})]}):t==="calendar"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M16 3v4"}),l.jsx("path",{d:"M8 3v4"}),l.jsx("path",{d:"M3 11h18"})]}):t==="close"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M18 6L6 18"}),l.jsx("path",{d:"M6 6l12 12"})]}):t==="clock"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"9"}),l.jsx("path",{d:"M12 7v5l3 3"})]}):t==="paperclip"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21.44 11.05 12.5 20a5 5 0 1 1-7.07-7.07L14.36 4a3.5 3.5 0 0 1 4.95 4.95l-9.19 9.19"})}):t==="chat"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4Z"})}):t==="check"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M20 6 9 17l-5-5"})}):t==="plus"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"})]}):t==="dot"?l.jsx("svg",{...n,children:l.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor",stroke:"none"})}):t==="trash"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 6h18"}),l.jsx("path",{d:"M8 6V4h8v2"}),l.jsx("rect",{x:"5",y:"6",width:"14",height:"14",rx:"2"})]}):t==="logout"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("path",{d:"M16 17l5-5-5-5"}),l.jsx("path",{d:"M21 12H9"})]}):t==="link"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 1 0-7.07-7.07L10 4"}),l.jsx("path",{d:"M14 11a5 5 0 0 1-7.07 0L3.39 7.46a5 5 0 1 1 7.07-7.07L14 4"})]}):t==="tag"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M20 10V4H14L4 14l6 6 10-10Z"}),l.jsx("circle",{cx:"16.5",cy:"7.5",r:"1.5"})]}):null}function tD({onNew:t,view:e,setView:n,showNew:r,user:s,onLogout:i}){return l.jsxs("div",{className:"topbar",children:[l.jsx("div",{className:"topbar-left",children:l.jsx("div",{className:"team",children:"Equipe de Marketing"})}),l.jsx("div",{className:"topbar-right",children:s?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{className:"chip",children:s.name||s.username}),l.jsxs("button",{className:"primary",onClick:i,children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"logout"})}),l.jsx("span",{children:"Sair"})]})]}):null})]})}function nD({view:t,setView:e}){return l.jsxs("div",{className:"tabs-inline",children:[l.jsxs("button",{className:`tab-btn ${t==="table"?"active":""}`,onClick:()=>e("table"),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"table"})}),l.jsx("span",{children:"Table"})]}),l.jsxs("button",{className:`tab-btn ${t==="calendar"?"active":""}`,onClick:()=>e("calendar"),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"calendar"})}),l.jsx("span",{children:"Calendar"})]})]})}function rD({onLogin:t}){const[e,n]=J.useState(""),[r,s]=J.useState(""),[i,o]=J.useState(!1),[c,u]=J.useState(""),d=async p=>{if(p.preventDefault(),!i){u(""),o(!0);try{await t(e,r)}catch(m){const g=m&&(m.code||m.message)||"Falha ao entrar";u(String(g))}finally{o(!1)}}};return l.jsxs("div",{className:"login-wrap",children:[l.jsx("div",{className:"login-banner",children:"BANNER TELA LOGIN"}),l.jsxs("div",{className:"login-card",children:[l.jsx("div",{className:"login-title",children:"Gerenciamento Mkt!"}),l.jsxs("form",{onSubmit:d,className:"login-form",children:[l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",placeholder:"Usurio",value:e,onChange:p=>n(p.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"8",r:"4"}),l.jsx("path",{d:"M4 20c0-4 4-6 8-6s8 2 8 6"})]})})]}),l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",type:"password",placeholder:"Insira sua senha",value:r,onChange:p=>s(p.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),c?l.jsx("div",{className:"login-error",role:"alert",children:c}):null,l.jsx("div",{className:"login-links",children:l.jsx("a",{href:"#",onClick:p=>p.preventDefault(),children:"Esqueceu sua senha?"})}),l.jsx("button",{className:"primary btn-lg",type:"submit",disabled:i,children:i?"Entrando...":"Entrar"})]})]})]})}function sD({open:t,filtros:e,setFiltros:n,designers:r,onClose:s,cadStatus:i,cadTipos:o,origens:c,campanhas:u}){const d=(m,g)=>n(w=>({...w,[m]:g})),p=()=>n({designer:"",status:"",cIni:"",cFim:"",sIni:"",sFim:""});return t?l.jsx("div",{className:"modal",onClick:s,children:l.jsxs("div",{className:"modal-dialog",onClick:m=>m.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"filter"})}),l.jsx("span",{children:"Filtros"})]}),l.jsx("button",{className:"icon",onClick:s,children:l.jsx(Ve,{name:"close"})})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Comparativo Mensal"}),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Produo"})}),(()=>{const m=concluidos.filter(C=>inMonth(C.dataConclusao,mesAtual)).length,g=concluidos.filter(C=>inMonth(C.dataConclusao,mesPassado)).length,w=Math.max(m,g,1),P=220,O=80,$=(C,E)=>l.jsx("rect",{x:E,y:O-C/w*O,width:"40",height:C/w*O,rx:"6"});return l.jsxs("svg",{width:P,height:O,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:$(m,40)}),l.jsx("g",{fill:"#4DA3FF",children:$(g,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Qualidade (retrabalho)"})}),(()=>{const m=concluidos.filter(S=>inMonth(S.dataConclusao,mesAtual)).map(S=>S.revisoes||0),g=concluidos.filter(S=>inMonth(S.dataConclusao,mesPassado)).map(S=>S.revisoes||0),w=+(m.reduce((S,j)=>S+j,0)/(m.length||1)).toFixed(2),P=+(g.reduce((S,j)=>S+j,0)/(g.length||1)).toFixed(2),O=Math.max(w,P,1),$=220,C=80,E=(S,j)=>l.jsx("rect",{x:j,y:C-S/O*C,width:"40",height:S/O*C,rx:"6"});return l.jsxs("svg",{width:$,height:C,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:E(w,40)}),l.jsx("g",{fill:"#FF5E5E",children:E(P,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Lead-time"})}),(()=>{const m=compMesAtual,g=compMesPassado,w=Math.max(m,g,1),P=220,O=80,$=(C,E)=>l.jsx("rect",{x:E,y:O-C/w*O,width:"40",height:C/w*O,rx:"6"});return l.jsxs("svg",{width:P,height:O,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:$(m,40)}),l.jsx("g",{fill:"#9B59B6",children:$(g,140)})]})})()]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Insights Automticos"}),l.jsx("div",{className:"insights-grid",children:(()=>{const m=(()=>{const C={};return concluidos.forEach(S=>{const j=S.designer||"",N=S.prazo&&S.dataConclusao&&S.dataConclusao<=S.prazo,F=S.prazo&&S.dataConclusao,v=C[j]||{ok:0,total:0};C[j]={ok:v.ok+(N?1:0),total:v.total+(F?1:0)}}),Object.entries(C).map(([S,j])=>({designer:S,pct:Math.round(100*(j.ok/(j.total||1)))})).sort((S,j)=>j.pct-S.pct)[0]})(),g=(()=>{const C={};return items.forEach(S=>{const j=S.origem||"Outros";C[j]=(C[j]||0)+1}),Object.entries(C).map(([S,j])=>({origem:S,q:j})).sort((S,j)=>j.q-S.q)[0]})(),w=concluidos.filter(C=>(C.revisoes||0)===0).length===concluidos.length,P=compMesAtual<=compMesPassado,O=(()=>{const C=concluidos.filter(S=>/stor/i.test(String(S.tipoMidia||""))),E=+(C.reduce((S,j)=>S+(j.revisoes||0),0)/(C.length||1)).toFixed(2);return{qtd:C.length,avg:E}})(),$=[];return m&&$.push(`O designer ${m.designer} teve o melhor SLA do ms (${m.pct}%)`),g&&$.push(`${g.origem} foi o canal mais solicitado`),w&&$.push("Nenhuma demanda apresentou retrabalho neste ms"),P&&$.push("Seu lead-time melhorou em relao ao ms anterior"),O.qtd>0&&$.push("A categoria Stories teve o maior retrabalho do ms"),$})().map((m,g)=>l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:m})]},g))})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:e.designer,onChange:m=>d("designer",m.target.value),children:[l.jsx("option",{value:"",children:"Designer"}),r.map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{className:"status-select",value:e.status,onChange:m=>d("status",m.target.value),children:[l.jsx("option",{value:"",children:"Status"}),Wa.map(m=>l.jsx("option",{value:m,children:IT(m)},m))]}),l.jsx("div",{className:"chips",children:Wa.map(m=>l.jsx("button",{className:`chip ${e.status===m?"active":""}`,onClick:()=>d("status",e.status===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("div",{className:"chips",children:o.map(m=>l.jsx("button",{className:`chip ${e.tipoMidia===m?"active":""}`,onClick:()=>d("tipoMidia",e.tipoMidia===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem"}),l.jsx("div",{className:"chips",children:(c||dm).map(m=>l.jsx("button",{className:`chip ${e.origem===m?"active":""}`,onClick:()=>d("origem",e.origem===m?"":m),children:m},m))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsxs("select",{value:e.campanha||"",onChange:m=>d("campanha",m.target.value),children:[l.jsx("option",{value:"",children:"Campanha"}),(u||[]).map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.cIni,onChange:m=>d("cIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.cFim,onChange:m=>d("cFim",m.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.sIni,onChange:m=>d("sIni",m.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.sFim,onChange:m=>d("sFim",m.target.value)})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsxs("button",{className:"icon",onClick:p,children:[l.jsx(Ve,{name:"close"}),l.jsx("span",{children:"Limpar"})]}),l.jsx("button",{className:"primary",onClick:s,children:"Aplicar"})]})]})}):null}function iD(t,e){return t.filter(n=>!(e.q&&!(n.titulo||"").toLowerCase().includes(e.q.toLowerCase())||e.designer&&n.designer!==e.designer||e.status&&n.status!==e.status||e.tipoMidia&&n.tipoMidia!==e.tipoMidia||e.plataforma&&(n.plataforma||"")!==e.plataforma||e.origem&&(n.origem||"")!==e.origem||e.campanha&&(n.campanha||"")!==e.campanha||e.cIni&&n.dataCriacao&&n.dataCriacao<e.cIni||e.cFim&&n.dataCriacao&&n.dataCriacao>e.cFim||e.sIni&&n.dataSolicitacao<e.sIni||e.sFim&&n.dataSolicitacao>e.sFim))}function oD({items:t,onEdit:e,onStatus:n,cadStatus:r,onDelete:s,onDuplicate:i,hasMore:o,showMore:c,canCollapse:u,showLess:d,shown:p,total:m,compact:g,canEdit:w,loading:P}){const[O,$]=J.useState(null),C=N=>String(N).padStart(2,"0");(N=>{const F=new Date(Date.UTC(N.getFullYear(),N.getMonth(),N.getDate())),v=F.getUTCDay()||7;F.setUTCDate(F.getUTCDate()+4-v);const y=new Date(Date.UTC(F.getUTCFullYear(),0,1)),I=Math.ceil(((F-y)/864e5+1)/7);return`${F.getUTCFullYear()}-W${C(I)}`})(new Date);const S=N=>{if(!N)return"";const[F,v,y]=String(N).split("-").map(Number),I=new Date(F,(v||1)-1,y||1),A=new Date;return A.setHours(0,0,0,0),I.setHours(0,0,0,0),Math.round((I-A)/864e5)},j=N=>{if(!N)return"";const[F,v,y]=String(N).split("-").map(Number),I=String(y).padStart(2,"0"),A=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"][Math.max(0,Math.min(11,v-1||0))];return`${I}.${A}`};return P?l.jsxs("div",{className:`table ${g?"compact":""}`,children:[l.jsx("div",{className:"skeleton row",style:{width:"60%"}}),Array.from({length:8}).map((N,F)=>l.jsx("div",{className:"skeleton row",style:{width:`${90-F*6}%`}},F))]}):l.jsxs("div",{className:`table ${g?"compact":""}`,children:[l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Data de Solicitao"}),l.jsx("th",{children:"Data de Criao"}),l.jsx("th",{children:"Prazo (dias)"}),l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Plataforma"}),l.jsx("th",{children:"Link"}),l.jsx("th",{children:"File"})]})}),l.jsx("tbody",{children:t.map(N=>l.jsxs("tr",{className:"row-clickable",onClick:()=>e(N),children:[l.jsx("td",{className:"name",children:N.titulo}),l.jsx("td",{children:l.jsx("div",{children:N.designer})}),l.jsx("td",{children:l.jsx("select",{className:`status-select ${ST(N.status)}`,value:N.status,onChange:F=>n(N.id,F.target.value),onClick:F=>F.stopPropagation(),disabled:!w,children:Wa.map(F=>l.jsx("option",{value:F,children:IT(F)},F))})}),l.jsx("td",{children:j(N.dataSolicitacao)}),l.jsx("td",{children:j(N.dataCriacao)}),l.jsx("td",{children:l.jsx("span",{style:{color:!br(N.status)&&Number(S(N.prazo))<=1?"#ef4444":"inherit"},children:S(N.prazo)})}),l.jsx("td",{children:N.tipoMidia}),l.jsx("td",{children:N.plataforma||""}),l.jsx("td",{children:N.link?l.jsx("a",{href:N.link,target:"_blank",rel:"noreferrer",onClick:F=>F.stopPropagation(),children:"Visualizar"}):""}),l.jsx("td",{children:Array.isArray(N.arquivos)&&N.arquivos.length?l.jsx("div",{className:"files",children:N.arquivos.slice(0,5).map(F=>l.jsx("a",{href:F.url,target:"_blank",rel:"noreferrer",title:F.name,onClick:v=>v.stopPropagation(),children:l.jsx("img",{className:"file-thumb",src:F.url,alt:F.name})},F.name))}):N.arquivoNome||""})]},N.id))})]}),l.jsxs("div",{className:"table-footer",children:[o&&l.jsx("button",{className:"primary",onClick:c,children:"Mostrar mais demandas"}),u&&l.jsx("button",{className:"primary",onClick:d,children:"Mostrar menos demandas"})]})]})}function aD({items:t,refDate:e}){const n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0),s=n.getDay(),i=r.getDate(),o={};t.forEach(u=>{const d=u.dataSolicitacao,p=new Date(d);p.getMonth()===e.getMonth()&&p.getFullYear()===e.getFullYear()&&(o[d]||(o[d]=[])).push(u)});const c=[];for(let u=0;u<s;u++)c.push(null);for(let u=1;u<=i;u++)c.push(u);return l.jsxs("div",{className:"calendar",children:[l.jsx("div",{className:"cal-head",children:l.jsx("div",{className:"month",children:e.toLocaleString("pt-BR",{month:"long",year:"numeric"})})}),l.jsxs("div",{className:"cal-grid",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(u=>l.jsx("div",{className:"cal-cell head",children:u},u)),c.map((u,d)=>{if(!u)return l.jsx("div",{className:"cal-cell"},d);const p=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`,m=o[p]||[];return l.jsxs("div",{className:"cal-cell",children:[l.jsx("div",{className:"day",children:u}),m.map(g=>l.jsxs("div",{className:"cal-item",children:[g.titulo," (",g.designer,")"]},g.id))]},d)})]})]})}function lD({open:t,mode:e,onClose:n,onSubmit:r,initial:s,cadTipos:i,designers:o,cadPlataformas:c,onDelete:u,userLabel:d,canDelete:p,onAddComment:m,cadOrigens:g}){const[w,P]=J.useState((s==null?void 0:s.designer)||""),[O,$]=J.useState((s==null?void 0:s.tipoMidia)||"Post"),[C,E]=J.useState((s==null?void 0:s.titulo)||""),[S,j]=J.useState((s==null?void 0:s.link)||""),[N,F]=J.useState(""),[v,y]=J.useState((s==null?void 0:s.dataSolicitacao)||kt()),[I,A]=J.useState((s==null?void 0:s.plataforma)||""),[k,R]=J.useState((s==null?void 0:s.arquivos)||[]),[x,rt]=J.useState((s==null?void 0:s.dataCriacao)||""),[At,Ge]=J.useState((s==null?void 0:s.dataFeedback)||""),[et,M]=J.useState((s==null?void 0:s.descricao)||""),[b,z]=J.useState((s==null?void 0:s.prazo)||""),[q,Z]=J.useState((s==null?void 0:s.comentarios)||[]),[ne,Ee]=J.useState(""),[Ue,Se]=J.useState((s==null?void 0:s.historico)||[]),[tt,$n]=J.useState((s==null?void 0:s.origem)||""),[kn,Ut]=J.useState((s==null?void 0:s.campanha)||""),[Zt,Ke]=J.useState("");J.useEffect(()=>{P((s==null?void 0:s.designer)||""),$((s==null?void 0:s.tipoMidia)||"Post"),E((s==null?void 0:s.titulo)||""),j((s==null?void 0:s.link)||""),F(""),y((s==null?void 0:s.dataSolicitacao)??(e==="create"?kt():"")),A((s==null?void 0:s.plataforma)||(c==null?void 0:c[0])||""),R((s==null?void 0:s.arquivos)||[]),rt((s==null?void 0:s.dataCriacao)||""),Ge((s==null?void 0:s.dataFeedback)||""),M((s==null?void 0:s.descricao)||""),z((s==null?void 0:s.prazo)||""),Z((s==null?void 0:s.comentarios)||[]),Ee(""),Se((s==null?void 0:s.historico)||[]),$n((s==null?void 0:s.origem)||""),Ut((s==null?void 0:s.campanha)||"")},[s,t,o,i,c,g]);const vn=(L,fe)=>{try{const[ve,Ie,ue]=String(L||kt()).split("-").map(Number),pe=new Date(ve,(Ie||1)-1,ue||1);pe.setDate(pe.getDate()+fe);const De=Oe=>String(Oe).padStart(2,"0");return`${pe.getFullYear()}-${De(pe.getMonth()+1)}-${De(pe.getDate())}`}catch{return L}},Pe=L=>{L&&(L==="Post IG - Feed"?($("Post"),A("Instagram"),z(vn(kt(),2)),E(fe=>fe||"Post IG Feed")):L==="Story IG"?($("Story"),A("Instagram"),z(vn(kt(),1)),E(fe=>fe||"Story IG")):L==="Banner Ads"?($("Banner"),A("Trfego Pago"),z(vn(kt(),3)),E(fe=>fe||"Banner Ads")):L==="Vdeo Motion"&&($("Vdeo"),A("YouTube"),z(vn(kt(),5)),E(fe=>fe||"Vdeo Motion")))},$e=L=>{L.preventDefault(),r({designer:w,tipoMidia:O,titulo:C,link:S,arquivoNome:N,dataSolic:v,dataCriacao:x,dataFeedback:At,plataforma:I,arquivos:k,descricao:et,prazo:b,comentarios:q,historico:Ue,origem:tt,campanha:kn})},ut=()=>{const L=ne.trim();if(!L)return;const fe=JR(L),ve={texto:L,data:kt(),mentions:fe,autor:d},Ie={tipo:"comentario",autor:d,data:ve.data,texto:L,mentions:fe};Z(ue=>[ve,...ue]),Se(ue=>[Ie,...ue]),Ee("");try{m&&m(s==null?void 0:s.id,ve,Ie)}catch{}},yn=L=>{if(!L)return"";try{return new Date(L).toLocaleString("pt-BR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return L}},[Kr,Tr]=J.useState(Date.now());J.useEffect(()=>{const L=setInterval(()=>Tr(Date.now()),1e3);return()=>clearInterval(L)},[]);const Le=L=>{if(!L||L<=0)return"00:00:00";const fe=Math.floor(L/1e3),ve=String(Math.floor(fe/3600)).padStart(2,"0"),Ie=String(Math.floor(fe%3600/60)).padStart(2,"0"),ue=String(fe%60).padStart(2,"0");return`${ve}:${Ie}:${ue}`},rr=Number((s==null?void 0:s.tempoProducaoMs)||0),Nn=s!=null&&s.startedAt?Date.parse(s.startedAt):null,sr=/produ|progresso/i.test(String((s==null?void 0:s.status)||"")),[ir]=J.useState(()=>!Nn&&sr?Date.now():null),T=Nn??ir,D=rr+(T?Math.max(0,Kr-T):0),[U,ie]=J.useState(null);return t?l.jsx("div",{className:"modal",children:l.jsxs("div",{className:`modal-dialog ${e!=="create"?"tall":""}`,onClick:L=>L.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[e==="create"?l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}):l.jsx("div",{className:"title editable",contentEditable:!0,suppressContentEditableWarning:!0,onInput:L=>E(L.currentTarget.textContent||""),children:C||"Sem ttulo"}),l.jsx("button",{className:"icon",onClick:n,children:l.jsx(Ve,{name:"close"})})]}),e==="create"&&l.jsx("div",{className:"modal-body",children:l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Modelo"}),l.jsxs("select",{value:Zt,onChange:L=>{const fe=L.target.value;Ke(fe),Pe(fe)},children:[l.jsx("option",{value:"",children:"Selecione um modelo"}),["Post IG - Feed","Story IG","Banner Ads","Vdeo Motion"].map(L=>l.jsx("option",{value:L,children:L},L))]})]})}),l.jsxs("div",{className:`status-bar ${ST((s==null?void 0:s.status)||"Aberta")}`,children:[l.jsx("div",{children:(s==null?void 0:s.status)||"Aberta"}),e!=="create"&&l.jsxs("div",{className:"timer",children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"clock"})}),l.jsx("span",{children:Le(D)})]})]}),l.jsx("form",{id:"modalForm",className:"modal-body",onSubmit:$e,children:l.jsxs("div",{className:`modal-columns ${e==="create"?"single":"cols3"}`,children:[l.jsxs("div",{className:"modal-main",children:[l.jsxs("div",{className:e==="create"?"form-grid":"form-stack",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:w,onChange:L=>P(L.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Designer"}),(o||[]).map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("select",{value:O,onChange:L=>$(L.target.value),children:(i||["Post","Story","Banner","Vdeo","Outro"]).map(L=>l.jsx("option",{value:L,children:L},L))})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Titulo"}),l.jsx("input",{value:C,onChange:L=>E(L.target.value),required:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Plataforma"}),l.jsxs("select",{value:I,onChange:L=>A(L.target.value),children:[l.jsx("option",{value:"",children:"Plataforma"}),(c||[]).map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem da Demanda"}),l.jsxs("select",{value:tt,onChange:L=>$n(L.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Origem"}),(g||dm).map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsx("input",{value:kn,onChange:L=>Ut(L.target.value),placeholder:"Ex: Black Friday"})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link"}),l.jsx("input",{type:"url",value:S,onChange:L=>j(L.target.value),placeholder:"https://"})]}),e==="create"?l.jsxs("div",{className:"row-2",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:L=>{const ve=Array.from(L.target.files||[]).filter(pe=>(pe.size||0)<=1048576).slice(0,5),Ie=new Date().toISOString(),ue=ve.map(pe=>new Promise(De=>{const Oe=new FileReader;Oe.onload=()=>De({name:pe.name,url:Oe.result,addedBy:d,addedAt:Ie}),Oe.readAsDataURL(pe)}));Promise.all(ue).then(pe=>{R(pe),Se(Oe=>[{tipo:"arquivo",autor:d,data:kt(),arquivos:pe},...Oe]);const De=pe.map(Oe=>Oe.name).join(", ");Z(Oe=>[{texto:`Arquivos anexados: ${De||pe.length}`,data:kt()},...Oe])})}})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:b,onChange:L=>z(L.target.value)})]})]}):l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:L=>{const ve=Array.from(L.target.files||[]).filter(pe=>(pe.size||0)<=1048576).slice(0,5),Ie=new Date().toISOString(),ue=ve.map(pe=>new Promise(De=>{const Oe=new FileReader;Oe.onload=()=>De({name:pe.name,url:Oe.result,addedBy:d,addedAt:Ie}),Oe.readAsDataURL(pe)}));Promise.all(ue).then(pe=>{R(pe),Se(Oe=>[{tipo:"arquivo",autor:d,data:kt(),arquivos:pe},...Oe]);const De=pe.map(Oe=>Oe.name).join(", ");Z(Oe=>[{texto:`Arquivos anexados: ${De||pe.length}`,data:kt()},...Oe])})}}),Array.isArray(k)&&k.length>0&&l.jsx("div",{className:"thumbs",children:k.map((L,fe)=>l.jsxs("div",{className:"file-item",children:[l.jsx("img",{className:"file-thumb",src:L.url,alt:L.name}),l.jsxs("div",{className:"file-meta",children:[L.name,L.addedBy?`  ${L.addedBy}`:""]}),l.jsxs("div",{className:"file-actions",children:[l.jsx("a",{href:L.url,download:!0,target:"_blank",rel:"noreferrer",children:"Baixar"}),l.jsxs("label",{className:"replace-btn",children:["Substituir",l.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:ve=>{var De;const Ie=(De=ve.target.files)==null?void 0:De[0];if(!Ie)return;const ue=new FileReader,pe=new Date().toISOString();ue.onload=()=>{const Oe={name:Ie.name,url:ue.result,addedBy:d,addedAt:pe};R(Rn=>Rn.map((Dn,Ae)=>Ae===fe?Oe:Dn))},ue.readAsDataURL(Ie)}})]}),l.jsx("button",{type:"button",onClick:()=>R(ve=>ve.filter((Ie,ue)=>ue!==fe)),children:"Excluir"})]})]},L.name+fe))})]})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:8,className:"desc-input",value:et,onChange:L=>M(L.target.value)})]})]}),e!=="create"&&l.jsxs("div",{className:"modal-center",children:[l.jsxs("div",{className:"date-row",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsx("input",{type:"date",value:v,disabled:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsx("input",{type:"date",value:x,disabled:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:b,onChange:L=>z(L.target.value)})]}),String((s==null?void 0:s.status)||"").toLowerCase().includes("feedback")&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Feedback"}),l.jsx("input",{type:"date",value:At,onChange:L=>Ge(L.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:12,className:"desc-input",value:et,onChange:L=>M(L.target.value)})]})]}),e!=="create"&&l.jsx("div",{className:"modal-side",children:l.jsxs("div",{className:"activity",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Comentrios"}),l.jsx("input",{placeholder:"Escreva um comentrio use @ para mencionar",value:ne,onChange:L=>Ee(L.target.value)}),ne.trim().length>0&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:l.jsx("button",{className:"primary",type:"button",onClick:ut,children:"Adicionar"})})]}),l.jsx("div",{className:"activity-list",children:(q||[]).length===0?l.jsx("div",{className:"empty",children:"Sem comentrios"}):(q||[]).map((L,fe)=>l.jsx("div",{className:"activity-item",children:l.jsxs("div",{className:"activity-entry",children:[l.jsx("div",{className:"avatar",children:"V"}),l.jsxs("div",{className:"entry-content",children:[l.jsx("div",{className:"entry-title",children:l.jsxs("span",{children:[l.jsx("strong",{children:L.autor||""})," comentou: ",L.texto]})}),l.jsx("div",{className:"entry-time",children:yn(L.data)}),Array.isArray(L.mentions)&&L.mentions.length>0&&l.jsx("div",{className:"mentions-row",children:L.mentions.map(ve=>l.jsxs("span",{className:`mention-pill ${String(d||"").toLowerCase()===String(ve||"").toLowerCase()?"you":""}`,children:["@",ve,String(d||"").toLowerCase()===String(ve||"").toLowerCase()?"  Voc foi mencionado":""]},ve))})]})]})},fe))}),e!=="create"&&l.jsxs("div",{className:"timeline",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Linha do tempo"})}),["Criado","Em produo","Aguardando Feedback","Revisar","Aprovada","Concluda","Postado"].map(L=>{const fe=(Ae,K)=>{const B=String(Ae.status_novo||Ae.para||""||"").toLowerCase();return K==="Criado"?B==="aberta":K==="Em produo"?B.includes("produ")||B.includes("progresso"):K==="Aguardando Feedback"?B.includes("feedback"):K==="Revisar"?B.includes("revisar"):K==="Aprovada"?B.includes("aprov"):K==="Concluda"?B.includes("conclu"):!1};let Ie=L==="Postado"?(Ue||[]).filter(Ae=>Ae.tipo==="mlabs"):(Ue||[]).filter(Ae=>Ae.tipo==="status"&&fe(Ae,L));if(L==="Concluda"&&(!Ie||Ie.length===0)&&String((s==null?void 0:s.status)||"").toLowerCase().includes("conclu")){const Ae=(s==null?void 0:s.finishedAt)||(s!=null&&s.dataConclusao?`${s.dataConclusao}T00:00:00Z`:null);Ie=[{tipo:"status",autor:(s==null?void 0:s.autor)||d,data_hora_evento:Ae,data:s==null?void 0:s.dataConclusao,status_novo:"Concluda",responsavel:(s==null?void 0:s.designer)||""}]}const ue=Ie&&Ie.length?Ie[Ie.length-1]:null,pe=(ue==null?void 0:ue.duracao_em_minutos)!=null?Vy(ue.duracao_em_minutos):"",De=ue!=null&&ue.data_hora_evento?yn(ue.data_hora_evento):yn(ue==null?void 0:ue.data),Oe=(ue==null?void 0:ue.responsavel)||(ue==null?void 0:ue.autor)||"",Rn=Ie.length,Dn=U===L;return l.jsxs("div",{className:"timeline-item",onClick:()=>ie(Ae=>Ae===L?null:L),children:[l.jsx("div",{className:"timeline-left",children:l.jsx("span",{className:"timeline-icon",children:""})}),l.jsxs("div",{className:"timeline-body",children:[l.jsxs("div",{className:"timeline-title",children:[L,Rn>1?`  ${Rn}`:""]}),l.jsxs("div",{className:"timeline-meta",children:[De,Oe?`  ${Oe}`:"",pe?`  ${pe}`:""]}),Dn&&Rn>0&&l.jsx("div",{className:"timeline-details",children:Ie.map((Ae,K)=>l.jsxs("div",{className:"timeline-detail-row",children:[l.jsx("div",{children:Ae!=null&&Ae.data_hora_evento?yn(Ae.data_hora_evento):yn(Ae==null?void 0:Ae.data)}),l.jsx("div",{children:(Ae==null?void 0:Ae.responsavel)||(Ae==null?void 0:Ae.autor)||""}),l.jsx("div",{children:(Ae==null?void 0:Ae.duracao_em_minutos)!=null?Vy(Ae.duracao_em_minutos):""})]},K))})]})]},L)})]}),e!=="create"&&l.jsxs("div",{className:"ia-panel",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Previso de entrega por IA"})}),l.jsx("div",{className:"ia-text",children:(s==null?void 0:s.previsaoIA)||vf([],s||{})})]})]})})]})}),l.jsxs("div",{className:"modal-actions",children:[e==="edit"&&p&&l.jsx("button",{className:"danger",type:"button",onClick:()=>{window.confirm("Confirmar excluso desta demanda?")&&(u(s.id),n())},children:"Excluir"}),l.jsx("button",{className:"primary",type:"submit",form:"modalForm",children:"Salvar"})]})]})}):null}function cD({cadStatus:t,setCadStatus:e,cadTipos:n,setCadTipos:r,cadOrigens:s,setCadOrigens:i,cadStatusColors:o,setCadStatusColors:c}){const[u,d]=J.useState("tipo"),[p,m]=J.useState(""),[g,w]=J.useState("#f59e0b"),P=u==="status"?t:u==="tipo"?n:s,O=E=>{u==="status"?e(E):u==="tipo"?r(E):i(E)},$=async()=>{const E=p.trim();if(!E||P.includes(E))return;const S=[...P,E];O(S),m(""),u==="status"&&c(j=>({...j,[E]:g})),await en.addCadastro(u==="status"?"status":u==="tipo"?"tipos":"origens",E)},C=async E=>{const S=P.filter(j=>j!==E);O(S),await en.removeCadastro(u==="status"?"status":u==="tipo"?"tipos":"origens",E)};return l.jsxs("div",{className:"panel",children:[l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${u==="tipo"?"active":""}`,onClick:()=>d("tipo"),children:"Tipo"}),l.jsx("button",{className:`tab ${u==="origem"?"active":""}`,onClick:()=>d("origem"),children:"Origem"})]}),l.jsxs("div",{className:"form-row",style:{marginTop:10},children:[l.jsx("label",{children:u==="status"?"Novo Status":u==="tipo"?"Novo Tipo":"Nova Origem"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{value:p,onChange:E=>m(E.target.value)}),u==="status"&&l.jsx("input",{type:"color",value:g,onChange:E=>w(E.target.value),title:"Cor"}),l.jsx("button",{className:"primary",onClick:$,children:"Adicionar"})]})]}),l.jsx("div",{className:"list",style:{marginTop:12},children:P.length===0?l.jsx("div",{className:"empty",children:"Sem itens"}):P.map(E=>l.jsxs("div",{className:"list-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",border:"1px solid var(--border)",borderRadius:8,background:"#0b0e12",marginBottom:6},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[u==="status"&&l.jsx("span",{className:"status-dot",style:{background:o[E]||"#3b82f6"}}),l.jsx("div",{children:E})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[u==="status"&&l.jsx("input",{type:"color",value:o[E]||"#3b82f6",onChange:S=>c(j=>({...j,[E]:S.target.value}))}),l.jsx("button",{className:"icon",onClick:()=>C(E),children:l.jsx(Ve,{name:"trash"})})]})]},E))})]})}function uD(){var Rn,Dn,Ae;const[t,e]=J.useState(null),[n,r]=J.useState(XR()),[s,i]=J.useState(!0),[o,c]=J.useState("table"),[u,d]=J.useState(!1),[p,m]=J.useState("dashboard"),[g,w]=J.useState({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""}),[P,O]=J.useState(!1),[$,C]=J.useState(!1),[E,S]=J.useState("create"),[j,N]=J.useState(null),[F,v]=J.useState(Yl("themeVars",AT)),[y,I]=J.useState(Yl("appSettings",{autoPostMLabs:!1})),[A,k]=J.useState(Ql("cadStatus",["Aberta","Em Progresso","Concluda"])),[R,x]=J.useState(Ql("cadTipos",["Post","Story","Banner","Vdeo","Outro"])),[rt,At]=J.useState(Ql("cadPlataformas",[])),[Ge,et]=J.useState(Ql("cadOrigens",[])),[M,b]=J.useState([]),[z,q]=J.useState(Yl("cadStatusColors",{Aberta:"#f59e0b","Em Progresso":"#3b82f6",Concluda:"#10b981"})),Z=J.useMemo(()=>Array.from(new Set(n.map(K=>K.designer).filter(Boolean))).sort(),[n]),ne=J.useMemo(()=>M.filter(K=>(K.cargo||"")==="Designer").map(K=>K.username).filter(Boolean).sort(),[M]),Ee=J.useMemo(()=>Array.from(new Set([...ne,...Z])).sort(),[ne,Z]),Ue=J.useMemo(()=>Array.from(new Set(n.map(K=>K.campanha).filter(Boolean))).sort(),[n]),Se=(t==null?void 0:t.role)||"comum",tt=J.useMemo(()=>iD(n,g),[n,g]),$n=J.useMemo(()=>{if(Se==="admin"||Se==="gerente")return tt;const K=(t==null?void 0:t.username)||"";return tt.filter(B=>(B.designer||"")===K)},[tt,Se,t]),kn=J.useMemo(()=>Se==="admin"||Se==="gerente"?Ee:[t==null?void 0:t.username].filter(Boolean),[Ee,Se,t]),Ut=J.useMemo(()=>tt.slice().sort((K,B)=>{const Q=K.dataCriacao||"",ce=(B.dataCriacao||"").localeCompare(Q);if(ce!==0)return ce;const ee=K.id||0;return(B.id||0)-ee}),[tt]),Zt=J.useMemo(()=>Se==="admin"||Se==="gerente"?Ee:[t==null?void 0:t.username].filter(Boolean),[Ee,Se,t]),Ke=J.useMemo(()=>Se==="admin"||Se==="gerente"?Ut:Ut.filter(K=>(K.designer||"")===((t==null?void 0:t.username)||"")),[Ut,Se,t]);J.useMemo(()=>Ke.filter(K=>/revisar/i.test(String(K.status||""))).length,[Ke]),J.useMemo(()=>Ke.filter(K=>/aprovada/i.test(String(K.status||""))).length,[Ke]);const vn=J.useMemo(()=>{const K=Ke,B=Q=>String(Q||"").toLowerCase();return{Pendente:K.filter(Q=>hm(Q.status)).length,"Em produo":K.filter(Q=>fm(Q.status)).length,"Aguardando Feedback":K.filter(Q=>B(Q.status).includes("feedback")).length,Aprovada:K.filter(Q=>B(Q.status).includes("aprov")).length,Revisar:K.filter(Q=>B(Q.status).includes("revisar")).length,Concluida:K.filter(Q=>B(Q.status).includes("conclu")).length}},[Ke]),[Pe,$e]=J.useState(10),[ut,yn]=J.useState(new Date),[Kr,Tr]=J.useState("status"),Le=J.useMemo(()=>(t==null?void 0:t.name)||(t==null?void 0:t.username)||"Voc",[t]),rr=["dashboard","demandas","config","cadastros","relatorios","usuarios"],Nn=J.useMemo(()=>{const K=t==null?void 0:t.pages;return K?rr.filter(B=>K[B]!==!1):rr},[t]);J.useEffect(()=>{he||ZR(n)},[n,he]),J.useEffect(()=>{he||i(!1)},[he]),J.useEffect(()=>{he||Zr("cadStatus",A)},[A,he]),J.useEffect(()=>{he||Zr("cadTipos",R)},[R,he]),J.useEffect(()=>{he||Zr("appSettings",y)},[y,he]),J.useEffect(()=>{he||Zr("cadPlataformas",rt)},[rt,he]),J.useEffect(()=>{he||Zr("cadOrigens",Ge)},[Ge,he]),J.useEffect(()=>{he||Zr("cadStatusColors",z)},[z,he]),J.useEffect(()=>{if(!he){My();const K=Yl("localUser",null);K&&e(K)}},[he]),J.useEffect(()=>{if(!he||!cr)return;const K=cN(cr,async B=>{if(B){let Q=null;try{const ce=await ak(ln(he,"usuarios",B.uid));ce.exists()&&(Q=ce.data())}catch{}if(!Q)try{const ce=Hd(bn(he,"usuarios"),qd("email","==",B.email||""));(await Wd(ce)).forEach(ae=>{Q||(Q=ae.data())})}catch{}const G={username:(Q==null?void 0:Q.username)||(B.email||"").split("@")[0],name:(Q==null?void 0:Q.name)||B.displayName||B.email||"",role:(Q==null?void 0:Q.role)||"comum",pages:(Q==null?void 0:Q.pages)||null,actions:(Q==null?void 0:Q.actions)||null,cargo:(Q==null?void 0:Q.cargo)||""};e(G)}else e(null)});return()=>{try{K()}catch{}}},[he,cr]),J.useEffect(()=>{Object.entries(F||{}).forEach(([K,B])=>{try{document.documentElement.style.setProperty(`--${K}`,B)}catch{}}),Zr("themeVars",F)},[F]),J.useEffect(()=>{if(he&&t){let K=null,B=null,Q=null,G=null,ce=null,ee=null;try{const ae=(t==null?void 0:t.username)||"",re=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="gerente",de=bn(he,"demandas"),ge=re?de:Hd(de,qd("designer","==",ae));K=Qs(ge,Re=>{const He=[];Re.forEach(st=>He.push({id:st.id,...st.data()})),r(He),i(!1)})}catch{}try{B=Qs(bn(he,"cad_status"),ae=>{const re=[];ae.forEach(de=>{var ge;return re.push(((ge=de.data())==null?void 0:ge.name)||de.id)}),k(re)})}catch{}try{Q=Qs(bn(he,"cad_tipos"),ae=>{const re=[];ae.forEach(de=>{var ge;return re.push(((ge=de.data())==null?void 0:ge.name)||de.id)}),x(re)})}catch{}try{ee=Qs(bn(he,"usuarios"),ae=>{const re=[];ae.forEach(de=>re.push({id:de.id,...de.data()})),b(re)})}catch{}try{G=Qs(bn(he,"cad_plataformas"),ae=>{const re=[];ae.forEach(de=>{var ge;return re.push(((ge=de.data())==null?void 0:ge.name)||de.id)}),At(re)})}catch{}try{ce=Qs(bn(he,"cad_origens"),ae=>{const re=[];ae.forEach(de=>{var ge;return re.push(((ge=de.data())==null?void 0:ge.name)||de.id)}),et(re)})}catch{}return()=>{try{K&&K()}catch{}try{B&&B()}catch{}try{Q&&Q()}catch{}try{ee&&ee()}catch{}try{G&&G()}catch{}try{ce&&ce()}catch{}}}else!he&&QR&&(en.listDemandas().then(K=>{Array.isArray(K)&&r(K)}),en.listCadastros("status").then(K=>Array.isArray(K)&&k(K)),en.listCadastros("tipos").then(K=>Array.isArray(K)&&x(K)),en.listCadastros("plataformas").then(K=>Array.isArray(K)&&At(K)),en.listCadastros("origens").then(K=>Array.isArray(K)&&et(K)))},[he,t]),J.useEffect(()=>{t&&!Nn.includes(p)&&m(Nn[0]),!t&&p!=="dashboard"&&p!=="demandas"&&p!=="config"&&p!=="cadastros"&&p!=="relatorios"&&p!=="usuarios"&&m("dashboard")},[t,Nn,p]);const sr=async()=>{try{await uN(cr)}catch{}try{localStorage.removeItem("localUser")}catch{}e(null)},ir=async(K,B)=>{var ce;const Q=String(K||"").trim();if(!Q||!B)throw new Error("Credenciais ausentes");if(!cr||!he){My();const ae=ls().find(de=>de.username===Q&&de.password===B);if(!ae)throw new Error("Firebase no configurado ou usurio local invlido");const re={username:ae.username,name:ae.name||ae.username,role:ae.role||"comum",pages:ae.pages||null,actions:ae.actions||null,cargo:ae.cargo||""};try{Zr("localUser",re)}catch{}e(re);return}let G=Q;if(!/@/.test(Q))try{const ee=Hd(bn(he,"usuarios"),qd("username","==",Q)),ae=await Wd(ee);let re=null;ae.forEach(de=>{const ge=de.data();!re&&(ge!=null&&ge.email)&&(re=ge.email)}),G=re||`${Q}@betaki.bet.br`}catch{G=`${Q}@betaki.bet.br`}try{await iN(cr,G,B)}catch(ee){const ae=(ee==null?void 0:ee.code)||"";try{if(ae==="auth/invalid-credential"||ae==="auth/user-not-found"){const re=await uT(cr,G,B),de=((ce=re==null?void 0:re.user)==null?void 0:ce.email)||G,ge=Q;try{await na(ln(he,"usuarios",ge),{username:Q,email:de},{merge:!0})}catch{}}else throw ee}catch(re){throw re}}},T=((Rn=t==null?void 0:t.actions)==null?void 0:Rn.criar)!==!1,D=((Dn=t==null?void 0:t.actions)==null?void 0:Dn.excluir)!==!1,U=((Ae=t==null?void 0:t.actions)==null?void 0:Ae.visualizar)!==!1,ie=()=>{!t||!T||(S("create"),N(null),C(!0))},L=K=>{!t||!U||(S("edit"),N(K),C(!0))},fe=async K=>{const B={...K,id:void 0,status:"Aberta",dataSolicitacao:kt(),dataCriacao:kt()};{const Q=await en.createDemanda(B);r(G=>[...G,{...B,id:(Q==null?void 0:Q.id)??Ly(G)}])}},ve=async(K,B)=>{const Q=kt();r(ce=>ce.map(ee=>{if(String(ee.id)!==String(K))return ee;const ae=ee.status!==B,re=String(ee.status||"").toLowerCase().includes("produ")||String(ee.status||"").toLowerCase().includes("progresso"),de=String(B||"").toLowerCase().includes("produ")||String(B||"").toLowerCase().includes("progresso"),ge=Date.now();let Re=Number(ee.tempoProducaoMs||0),He=ee.startedAt||null,st=ee.finishedAt||null;const dt=String(B||"").toLowerCase().includes("feedback"),on=String(ee.status||"").toLowerCase().includes("feedback");let vt=ee.slaStartAt||null,yt=ee.slaStopAt||null,ht=Number(ee.slaPauseMs||0),ft=ee.pauseStartedAt||null;if(ae){if(re&&!de&&He){const Qe=Date.parse(He);isNaN(Qe)||(Re+=Math.max(0,ge-Qe)),He=null}if(!re&&de&&!He&&(He=new Date(ge).toISOString(),vt||(vt=He)),!on&&dt&&!ft&&(ft=new Date(ge).toISOString()),on&&!dt&&ft){const Qe=Date.parse(ft);isNaN(Qe)||(ht+=Math.max(0,ge-Qe)),ft=null}}const zt=String(B||"").toLowerCase().includes("revisar"),Ir=ae&&zt?(ee.revisoes||0)+1:ee.revisoes||0,Hn=String(B||"").toLowerCase().includes("concluida")||B==="Concluda",jn=Hn?ee.dataConclusao||Q:ee.dataConclusao,_n=Hn?ee.dataCriacao||Q:ee.dataCriacao;ae&&Hn&&(st=new Date(ge).toISOString(),yt=st);const qn=(ee.historico||[]).find(Qe=>Qe.tipo==="status"),Ao=qn!=null&&qn.data_hora_evento?Date.parse(qn.data_hora_evento):qn!=null&&qn.data?Date.parse(`${qn.data}T00:00:00Z`):null,zs=new Date(ge).toISOString(),Co=ae&&Ao?Math.round((ge-Ao)/6e4):null,xo=ae?{tipo:"status",autor:Le,data:Q,data_hora_evento:zs,status_anterior:ee.status,status_novo:B,duracao_em_minutos:Co,responsavel:Le,id_demanda:ee.id,de:ee.status,para:B}:null,Po=(()=>{if(!ee.prazo)return null;const[Qe,Bt,$s]=String(ee.prazo).split("-").map(Number),No=new Date(Qe,(Bt||1)-1,$s||1);No.setHours(0,0,0,0);const pl=new Date;return pl.setHours(0,0,0,0),No-pl})(),td=!!(ee.prazo&&!Hn&&typeof Po=="number"&&Po<=864e5),Bs=ae&&td?{tipo:"alerta",autor:Le,data:Q,data_hora_evento:zs,mensagem:"Prazo menor que 24h",id_demanda:ee.id}:null,Ii=!!(ae&&(String(B||"").toLowerCase().includes("aprov")||String(B||"").toLowerCase().includes("conclu"))&&y.autoPostMLabs)?{tipo:"mlabs",autor:Le,data:Q,data_hora_evento:zs,mensagem:"Postagem agendada via mLabs",id_demanda:ee.id}:null,Sr=xo?[xo,...Bs?[Bs]:[],...Ii?[Ii]:[],...ee.historico||[]]:ee.historico||[],Ar=ae&&dt&&!ee.dataFeedback?Q:ee.dataFeedback,ko=(Sr||[]).filter(Qe=>Qe.tipo==="status"&&Qe.duracao_em_minutos!=null).reduce((Qe,Bt)=>Qe+(Bt.duracao_em_minutos||0),0),rd=(()=>{const Qe={};return(Sr||[]).forEach(Bt=>{if(Bt.tipo==="status"&&Bt.duracao_em_minutos!=null){const $s=Bt.status_anterior||Bt.de||"Aberta";Qe[$s]=(Qe[$s]||0)+(Bt.duracao_em_minutos||0)}}),Qe})(),dl=(()=>{if(!vt)return 0;const Qe=yt?Date.parse(yt):ge,Bt=Date.parse(vt);return isNaN(Bt)||isNaN(Qe)?0:Math.max(0,Qe-Bt-ht)})(),hl=(()=>{if(!jn||!ee.prazo)return null;try{return String(jn)<=String(ee.prazo)}catch{return null}})(),fl=vf(ce,{...ee});return{...ee,status:B,revisoes:Ir,dataConclusao:jn,dataCriacao:_n,dataFeedback:Ar,historico:Sr,tempoProducaoMs:Re,startedAt:He,finishedAt:st,previsaoIA:fl,fxBounceAt:ae?ge:ee.fxBounceAt||0,slaStartAt:vt,slaStopAt:yt,slaPauseMs:ht,pauseStartedAt:ft,slaNetMs:dl,slaOk:hl,leadTotalMin:ko,leadPorFase:rd}}));const G=n.find(ce=>String(ce.id)===String(K));if(G){const ce=(G.historico||[]).find(vt=>vt.tipo==="status"),ee=ce!=null&&ce.data_hora_evento?Date.parse(ce.data_hora_evento):ce!=null&&ce.data?Date.parse(`${ce.data}T00:00:00Z`):null,ae=new Date().toISOString(),re=G.status!==B&&ee?Math.round((Date.now()-ee)/6e4):null,de=(()=>{if(!G.prazo)return null;const[vt,yt,ht]=String(G.prazo).split("-").map(Number),ft=new Date(vt,(yt||1)-1,ht||1);ft.setHours(0,0,0,0);const zt=new Date;return zt.setHours(0,0,0,0),ft-zt})(),ge=!!(G.prazo&&!(String(B||"").toLowerCase().includes("concluida")||B==="Concluda")&&typeof de=="number"&&de<=864e5),Re={tipo:"status",autor:Le,data:Q,data_hora_evento:ae,status_anterior:G.status,status_novo:B,duracao_em_minutos:re,responsavel:Le,id_demanda:G.id,de:G.status,para:B},He=ge?{tipo:"alerta",autor:Le,data:Q,data_hora_evento:ae,mensagem:"Prazo menor que 24h",id_demanda:G.id}:null,dt=!!((String(B||"").toLowerCase().includes("aprov")||String(B||"").toLowerCase().includes("conclu"))&&y.autoPostMLabs)?{tipo:"mlabs",autor:Le,data:Q,data_hora_evento:ae,mensagem:"Postagem agendada via mLabs",id_demanda:G.id}:null,on=[Re,...He?[He]:[],...dt?[dt]:[],...G.historico||[]];await en.updateDemanda(String(K),{...G,status:B,dataCriacao:String(B||"").toLowerCase().includes("concluida")||B==="Concluda"?G.dataCriacao||Q:G.dataCriacao,dataConclusao:String(B||"").toLowerCase().includes("concluida")||B==="Concluda"?G.dataConclusao||Q:G.dataConclusao,dataFeedback:G.status!==B&&String(B||"").toLowerCase().includes("feedback")&&!G.dataFeedback?Q:G.dataFeedback,revisoes:(G.revisoes||0)+(G.status!==B&&String(B||"").toLowerCase().includes("revisar")?1:0),historico:on,tempoProducaoMs:G.tempoProducaoMs,startedAt:G.startedAt,finishedAt:String(B||"").toLowerCase().includes("concluida")||B==="Concluda"?new Date().toISOString():G.finishedAt,slaStartAt:G.slaStartAt,slaStopAt:String(B||"").toLowerCase().includes("concluida")||B==="Concluda"?new Date().toISOString():G.slaStopAt,slaPauseMs:G.slaPauseMs,pauseStartedAt:G.pauseStartedAt,slaNetMs:G.slaNetMs,slaOk:G.slaOk,leadTotalMin:G.leadTotalMin,leadPorFase:G.leadPorFase});try{await cy(bn(he,"historico_status"),Re)}catch{}}else if(he&&G)try{const ce=(G.historico||[]).find(vt=>vt.tipo==="status"),ee=ce!=null&&ce.data_hora_evento?Date.parse(ce.data_hora_evento):ce!=null&&ce.data?Date.parse(`${ce.data}T00:00:00Z`):null,ae=new Date().toISOString(),re=G.status!==B&&ee?Math.round((Date.now()-ee)/6e4):null,de=(()=>{if(!G.prazo)return null;const[vt,yt,ht]=String(G.prazo).split("-").map(Number),ft=new Date(vt,(yt||1)-1,ht||1);ft.setHours(0,0,0,0);const zt=new Date;return zt.setHours(0,0,0,0),ft-zt})(),ge=!!(G.prazo&&!(String(B||"").toLowerCase().includes("concluida")||B==="Concluda")&&typeof de=="number"&&de<=864e5),Re={tipo:"status",autor:Le,data:Q,data_hora_evento:ae,status_anterior:G.status,status_novo:B,duracao_em_minutos:re,responsavel:Le,id_demanda:G.id,de:G.status,para:B},He=ge?{tipo:"alerta",autor:Le,data:Q,data_hora_evento:ae,mensagem:"Prazo menor que 24h",id_demanda:G.id}:null,dt=!!((String(B||"").toLowerCase().includes("aprov")||String(B||"").toLowerCase().includes("conclu"))&&y.autoPostMLabs)?{tipo:"mlabs",autor:Le,data:Q,data_hora_evento:ae,mensagem:"Postagem agendada via mLabs",id_demanda:G.id}:null,on=[Re,...He?[He]:[],...dt?[dt]:[],...G.historico||[]];await ya(ln(he,"demandas",String(K)),{...G,status:B,dataCriacao:String(B||"").toLowerCase().includes("concluida")||B==="Concluda"?G.dataCriacao||Q:G.dataCriacao,dataConclusao:String(B||"").toLowerCase().includes("concluida")||B==="Concluda"?G.dataConclusao||Q:G.dataConclusao,dataFeedback:G.status!==B&&String(B||"").toLowerCase().includes("feedback")&&!G.dataFeedback?Q:G.dataFeedback,revisoes:(G.revisoes||0)+(G.status!==B&&String(B||"").toLowerCase().includes("revisar")?1:0),historico:on,tempoProducaoMs:G.tempoProducaoMs,startedAt:G.startedAt,finishedAt:String(B||"").toLowerCase().includes("concluida")||B==="Concluda"?new Date().toISOString():G.finishedAt,slaStartAt:G.slaStartAt,slaStopAt:String(B||"").toLowerCase().includes("concluida")||B==="Concluda"?new Date().toISOString():G.slaStopAt,slaPauseMs:G.slaPauseMs,pauseStartedAt:G.pauseStartedAt,slaNetMs:G.slaNetMs,slaOk:G.slaOk,leadTotalMin:G.leadTotalMin,leadPorFase:G.leadPorFase});try{await cy(bn(he,"historico_status"),Re)}catch{}}catch{}},Ie=async(K,B,Q)=>{r(ce=>ce.map(ee=>{if(String(ee.id)!==String(K))return ee;const ae=[B,...ee.comentarios||[]],re=Array.isArray(B.mentions)&&B.mentions.length>0?{tipo:"notificacao",autor:Le,data:B.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:B.mentions,id_demanda:ee.id}:null,de=re?[re,Q,...ee.historico||[]]:[Q,...ee.historico||[]];return{...ee,comentarios:ae,historico:de,fxSavedAt:Date.now()}}));const G=n.find(ce=>String(ce.id)===String(K));if(G){const ce=[B,...G.comentarios||[]],ee=Array.isArray(B.mentions)&&B.mentions.length>0?{tipo:"notificacao",autor:Le,data:B.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:B.mentions,id_demanda:G.id}:null,ae=ee?[ee,Q,...G.historico||[]]:[Q,...G.historico||[]];await en.updateDemanda(String(K),{...G,comentarios:ce,historico:ae})}else if(he&&G)try{const ce=Array.isArray(B.mentions)&&B.mentions.length>0?{tipo:"notificacao",autor:Le,data:B.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:B.mentions,id_demanda:G.id}:null,ee=ce?[ce,Q,...G.historico||[]]:[Q,...G.historico||[]];await ya(ln(he,"demandas",String(K)),{comentarios:[B,...G.comentarios||[]],historico:ee})}catch{}},ue=async K=>{r(B=>B.map(Q=>Q.id===K?{...Q,fxDeleting:!0}:Q)),setTimeout(()=>{r(B=>B.filter(Q=>Q.id!==K))},180),await en.deleteDemanda(K)},pe=async(K,B)=>{const Q=kt();let G=null;r(ee=>ee.map(ae=>{if(ae.id!==K)return ae;if((ae.historico||[]).some(Re=>Re.tipo==="alerta"&&Re.data===Q&&Re.mensagem===B))return G=ae,ae;const de={tipo:"alerta",autor:Le,data:Q,data_hora_evento:new Date().toISOString(),mensagem:B,id_demanda:ae.id},ge={...ae,historico:[de,...ae.historico||[]]};return G=ge,ge}));const ce=G||n.find(ee=>ee.id===K);if(ce){const ee={tipo:"alerta",autor:Le,data:Q,data_hora_evento:new Date().toISOString(),mensagem:B,id_demanda:ce.id};await en.updateDemanda(K,{...ce,historico:[ee,...ce.historico||[]]})}};J.useEffect(()=>{const K=setInterval(()=>{kt();const B=n.filter(re=>!br(re.status)),Q=B.reduce((re,de)=>{const ge=de.designer||"";return re[ge]=(re[ge]||0)+1,re},{});B.forEach(re=>{if(re.prazo)try{const[st,dt,on]=String(re.prazo).split("-").map(Number),vt=new Date(st,(dt||1)-1,on||1);vt.setHours(0,0,0,0);const yt=new Date;yt.setHours(0,0,0,0),vt-yt<=864e5&&pe(re.id,"Prazo menor que 24h")}catch{}const de=(re.historico||[]).find(st=>st.tipo==="status");if(de!=null&&de.data_hora_evento||de!=null&&de.data){const st=de.data_hora_evento?Date.parse(de.data_hora_evento):Date.parse(`${de.data}T00:00:00Z`);!isNaN(st)&&Date.now()-st>=1728e5&&pe(re.id,"Demanda estagnada h 48h")}const ge=re.designer||"",Re=Q[ge]||0,He=Math.min(100,Math.round(Re/4*100));He>=100?pe(re.id,`Capacidade 100% para ${ge}  Risco mximo`):He>=85&&pe(re.id,`Designer ${ge} est com ${He}% da capacidade utilizada. Risco de atraso.`),(re.revisoes||0)>=2&&pe(re.id,"Retrabalho acima do limite")});const G=n.filter(re=>br(re.status)),ce=G.filter(re=>re.prazo&&re.dataConclusao&&re.dataConclusao<=re.prazo).length,ee=G.filter(re=>re.prazo&&re.dataConclusao).length;Math.round(100*(ce/Math.max(1,ee)))<80&&B.forEach(re=>pe(re.id,"SLA geral abaixo de 80%"))},6e4);return()=>clearInterval(K)},[n]);const De=async({designer:K,tipoMidia:B,titulo:Q,link:G,arquivoNome:ce,dataSolic:ee,dataCriacao:ae,dataFeedback:re,plataforma:de,arquivos:ge,descricao:Re,prazo:He,comentarios:st,historico:dt,origem:on,campanha:vt})=>{const yt=async()=>{if(he){try{B&&await na(ln(he,"cad_tipos",String(B)),{name:B},{merge:!0})}catch{}try{de&&await na(ln(he,"cad_plataformas",String(de)),{name:de},{merge:!0})}catch{}try{if(dt&&Array.isArray(dt)){const ht=dt[0],ft=(ht==null?void 0:ht.para)||(ht==null?void 0:ht.de)||"Aberta";ft&&await na(ln(he,"cad_status",String(ft)),{name:ft},{merge:!0})}}catch{}}};if(E==="edit"&&j){const ht={...j,designer:K,tipoMidia:B,titulo:Q,link:G,descricao:Re,comentarios:st??j.comentarios,historico:dt??j.historico,arquivos:ge&&ge.length?ge:j.arquivos,arquivoNome:ce||j.arquivoNome,dataSolicitacao:ee||j.dataSolicitacao,dataCriacao:ae||j.dataCriacao,dataFeedback:re||j.dataFeedback,plataforma:de,prazo:He,origem:on,campanha:vt},ft={...ht,fxSavedAt:Date.now()};r(zt=>zt.map(Ir=>Ir.id===j.id?ft:Ir)),await en.updateDemanda(j.id,ht),await yt()}else{const ht=kt(),ft=new Date().toISOString(),zt={tipo:"status",autor:Le,data:ht,data_hora_evento:ft,status_anterior:"",status_novo:"Aberta",duracao_em_minutos:null,responsavel:Le,id_demanda:null,de:"",para:"Aberta"},Ir=vf(n,{designer:K,tipoMidia:B,plataforma:de,origem:on}),Hn={designer:K,tipoMidia:B,titulo:Q,link:G,descricao:Re,comentarios:[],historico:[zt],arquivos:ge||[],arquivoNome:ce,plataforma:de,origem:on,campanha:vt,dataSolicitacao:ee,dataCriacao:ht,dataFeedback:void 0,status:"Aberta",prazo:He,tempoProducaoMs:0,startedAt:null,finishedAt:null,revisoes:0,createdBy:Le,previsaoIA:Ir,slaStartAt:null,slaStopAt:null,slaPauseMs:0,pauseStartedAt:null,slaNetMs:0,slaOk:null,leadTotalMin:0,leadPorFase:{}};{const jn=await en.createDemanda(Hn);r(_n=>[..._n,{...Hn,id:(jn==null?void 0:jn.id)??Ly(_n),fxNewAt:Date.now()}])}await yt()}C(!1)},Oe=async()=>{if(!window.confirm("Confirmar: apagar TODAS as demandas e limpar relatrios?"))return;const K=[...n];r([]);try{localStorage.removeItem("demandas")}catch{}try{w({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""})}catch{}if(K.length)try{await Promise.all(K.map(B=>en.deleteDemanda(B.id)))}catch{}if(he)try{const B=await Wd(bn(he,"demandas")),Q=[];B.forEach(G=>Q.push(LE(ln(he,"demandas",G.id)))),Q.length&&await Promise.all(Q)}catch{}};return l.jsxs("div",{className:"layout",children:[t?l.jsx(dD,{route:p,setRoute:m,allowedRoutes:Nn}):null,l.jsx("div",{className:`content ${t?"":"no-sidebar"} page`,children:l.jsxs("div",{className:"app",children:[t?l.jsx(tD,{onNew:ie,view:o,setView:c,showNew:!!t,user:t,onLogout:sr,setRoute:m}):null,!t&&l.jsx(rD,{onLogin:ir}),t&&p==="dashboard"&&l.jsx(mD,{demandas:n,items:$n,designers:kn,setView:c,onEdit:L,onStatus:ve,cadStatus:A,onDelete:ue,onDuplicate:fe,compact:u,calRef:ut,setCalRef:yn,loading:s}),t&&p==="demandas"&&l.jsxs("div",{className:"demandas-layout",children:[l.jsx("div",{className:"sidebar-col",children:l.jsx(pD,{filtros:g,setFiltros:w,designers:Zt,showSearch:!1,statusCounts:vn})}),l.jsxs("div",{className:"content-col",children:[l.jsxs("div",{className:"top-search",children:[l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:g.q||"",onChange:K=>w(B=>({...B,q:K.target.value}))}),l.jsxs("button",{className:"primary",onClick:ie,disabled:!T,children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto"},children:l.jsx(nD,{view:o,setView:c})})]}),o==="table"&&l.jsx("div",{className:"table-scroll",children:l.jsx(oD,{items:Ke.slice(0,Pe),onEdit:L,onStatus:ve,cadStatus:A,onDelete:ue,onDuplicate:fe,hasMore:Ke.length>Pe,showMore:()=>$e(K=>Math.min(K+10,Ke.length)),canCollapse:Pe>10,showLess:()=>$e(10),shown:Math.min(Pe,Ke.length),total:Ke.length,compact:u,canEdit:!!t,loading:s})}),o==="calendar"&&l.jsx(aD,{items:Ke,refDate:ut}),l.jsx(lD,{open:$,mode:E,onClose:()=>C(!1),onSubmit:De,initial:j,cadTipos:R,designers:Zt,cadPlataformas:rt,onDelete:ue,userLabel:Le,canDelete:D,onAddComment:Ie,cadOrigens:Ge}),l.jsx(sD,{open:P,filtros:g,setFiltros:w,designers:Zt,onClose:()=>O(!1),cadStatus:A,cadTipos:R,origens:Ge,campanhas:Ue})]})]}),t&&p==="config"&&l.jsx(fD,{themeVars:F,setThemeVars:v,onReset:Oe,appSettings:y,setAppSettings:I}),t&&p==="cadastros"&&l.jsx(cD,{cadStatus:A,setCadStatus:k,cadTipos:R,setCadTipos:x,cadOrigens:Ge,setCadOrigens:et,cadStatusColors:z,setCadStatusColors:q}),t&&p==="relatorios"&&l.jsx(gD,{demandas:n,items:Ke,designers:Zt,filtros:g,setFiltros:w,loading:s}),t&&p==="usuarios"&&l.jsx(hD,{users:ls(),onCreate:K=>{const B=ls();_c([...B,K])},onDelete:K=>{const B=ls().filter(Q=>Q.username!==K);_c(B)},onUpdate:(K,B)=>{const Q=ls().map(G=>G.username===K?{...G,...B}:G);_c(Q)},role:Se})]})})]})}function dD({route:t,setRoute:e,allowedRoutes:n}){return l.jsx("aside",{className:"sidebar",children:l.jsx("nav",{children:l.jsx("ul",{className:"nav-list",children:n.map(r=>l.jsx("li",{children:l.jsxs("a",{href:"#",className:`nav-link ${t===r?"active":""}`,onClick:s=>{s.preventDefault(),e(r)},children:[l.jsx("span",{className:"nav-ico",children:r==="dashboard"?l.jsx(Ve,{name:"dashboard"}):r==="demandas"?l.jsx(Ve,{name:"demandas"}):r==="config"?l.jsx(Ve,{name:"config"}):r==="cadastros"?l.jsx(Ve,{name:"cadastros"}):r==="relatorios"?l.jsx(Ve,{name:"relatorios"}):l.jsx(Ve,{name:"usuarios"})}),l.jsx("span",{children:r==="dashboard"?"Dashboard":r==="demandas"?"Demandas":r==="config"?"Configuraes":r==="cadastros"?"Cadastros":r==="relatorios"?"Relatrios":"Usurios"})]})},r))})})})}function hD({users:t,onCreate:e,onDelete:n,onUpdate:r,role:s}){const[i,o]=J.useState(""),[c,u]=J.useState(""),[d,p]=J.useState(""),[m,g]=J.useState(""),[w,P]=J.useState("comum"),[O,$]=J.useState("Designer"),[C,E]=J.useState([]),S=J.useMemo(()=>ky?qR(ky):null,[]),[j,N]=J.useState({});J.useEffect(()=>{if(he){const M=Qs(bn(he,"usuarios"),b=>{const z=[];b.forEach(q=>z.push({id:q.id,...q.data()})),E(z)});return()=>{try{M()}catch{}}}else E(ls())},[]);const F=()=>E(ls()),[v,y]=J.useState({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),[I,A]=J.useState({criar:!0,excluir:!0,visualizar:!0}),k=(M,b)=>M(z=>({...z,[b]:!z[b]})),R=async()=>{const M=i.trim(),b=m.trim()||`${M}@betaki.bet.br`;if(!M||!d)return;const z={username:M,name:c||M,role:w,cargo:O,pages:v,actions:I,email:b};if(he)try{try{await uT(cr,b,d)}catch(q){if((q==null?void 0:q.code)!=="auth/email-already-in-use")throw q}await na(ln(he,"usuarios",M),z)}catch{}else e({...z,password:d}),F();o(""),u(""),p(""),g(""),P("comum"),$("Designer"),y({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),A({criar:!0,excluir:!0,visualizar:!0})},x=async M=>{if((M.username||M.id)!=="admin")if(he)try{await LE(ln(he,"usuarios",M.username||M.id)),E(b=>b.filter(z=>(z.username||z.id)!==(M.username||M.id)))}catch{}else n(M.username),F()},rt=async M=>{const b=String(j[M.username||M.id]||"").trim();if(b&&S)try{await GR(S,"updateUserPassword")({username:M.username||M.id,password:b,email:M.email||void 0}),N(q=>({...q,[M.username||M.id]:""}))}catch{}},At=async(M,b)=>{const z=M.pages||{},q={pages:{...z,[b]:z[b]===!1}};if(he)try{await ya(ln(he,"usuarios",M.username||M.id),q),E(Z=>Z.map(ne=>ne.username===M.username||ne.id===M.id?{...ne,...q}:ne))}catch{}else r(M.username,q),F()},Ge=async(M,b)=>{const z=M.actions||{},q={actions:{...z,[b]:z[b]===!1}};if(he)try{await ya(ln(he,"usuarios",M.username||M.id),q),E(Z=>Z.map(ne=>ne.username===M.username||ne.id===M.id?{...ne,...q}:ne))}catch{}else r(M.username,q),F()},et=async(M,b)=>{const z={cargo:b};if(he)try{await ya(ln(he,"usuarios",M.username||M.id),z),E(q=>q.map(Z=>Z.username===M.username||Z.id===M.id?{...Z,...z}:Z))}catch{}else r(M.username,z),F()};return l.jsxs("div",{className:"panel users-panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Usurios"})}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Usurio"}),l.jsx("input",{value:i,onChange:M=>o(M.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Nome"}),l.jsx("input",{value:c,onChange:M=>u(M.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Senha"}),l.jsx("input",{type:"password",value:d,onChange:M=>p(M.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",value:m,onChange:M=>g(M.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Perfil"}),l.jsxs("select",{value:w,onChange:M=>P(M.target.value),children:[l.jsx("option",{value:"comum",children:"Comum"}),l.jsx("option",{value:"gerente",children:"Gerente"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Cargo"}),l.jsxs("select",{value:O,onChange:M=>$(M.target.value),children:[l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Pginas"}),l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(M=>l.jsxs("button",{className:`btn-md ${v[M]?"active":""}`,type:"button",onClick:()=>k(y,M),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:M==="dashboard"?"dashboard":M==="demandas"?"demandas":M==="config"?"config":M==="cadastros"?"cadastros":M==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:M==="dashboard"?"Dashboard":M==="demandas"?"Demandas":M==="config"?"Configuraes":M==="cadastros"?"Cadastros":M==="relatorios"?"Relatrios":"Usurios"})]},M))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Aes"}),l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([M,b,z])=>l.jsxs("button",{className:`btn-md ${I[M]?"active":""}`,type:"button",onClick:()=>k(A,M),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:b})}),l.jsx("span",{children:z})]},M))})]}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"primary",type:"button",onClick:R,children:"Criar usurio"})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usurio"}),l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Perfil"}),l.jsx("th",{children:"Cargo"}),l.jsx("th",{children:"Pginas"}),l.jsx("th",{children:"Aes"}),l.jsx("th",{children:"Senha"}),l.jsx("th",{children:"Gerenciar"})]})}),l.jsx("tbody",{children:(C||[]).map(M=>l.jsxs("tr",{children:[l.jsx("td",{children:M.username}),l.jsx("td",{children:M.name||M.username}),l.jsx("td",{children:M.role||"comum"}),l.jsx("td",{children:l.jsxs("select",{value:M.cargo||"",onChange:b=>et(M,b.target.value),children:[l.jsx("option",{value:"",children:"Selecione"}),l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(b=>{var z;return l.jsxs("button",{className:`btn-md ${((z=M.pages)==null?void 0:z[b])!==!1?"active":""}`,type:"button",onClick:()=>At(M,b),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:b==="dashboard"?"dashboard":b==="demandas"?"demandas":b==="config"?"config":b==="cadastros"?"cadastros":b==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:b==="dashboard"?"Dashboard":b==="demandas"?"Demandas":b==="config"?"Configuraes":b==="cadastros"?"Cadastros":b==="relatorios"?"Relatrios":"Usurios"})]},b)})})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([b,z,q])=>{var Z;return l.jsxs("button",{className:`btn-md ${((Z=M.actions)==null?void 0:Z[b])!==!1?"active":""}`,type:"button",onClick:()=>Ge(M,b),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:z})}),l.jsx("span",{children:q})]},b)})})}),l.jsx("td",{children:l.jsxs("div",{className:"form-row",children:[l.jsx("input",{type:"password",placeholder:"Nova senha",value:j[M.username||M.id]||"",onChange:b=>N(z=>({...z,[M.username||M.id]:b.target.value}))}),l.jsx("button",{className:"primary",type:"button",onClick:()=>rt(M),children:"Salvar"})]})}),l.jsx("td",{children:l.jsxs("button",{className:"icon",onClick:()=>x(M),disabled:M.username==="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"trash"})}),l.jsx("span",{children:"Excluir"})]})})]},M.username))})]})]})}function fD({themeVars:t,setThemeVars:e,onReset:n,appSettings:r,setAppSettings:s}){const[i,o]=J.useState(t||{}),[c,u]=J.useState(""),[d,p]=J.useState("");J.useEffect(()=>{o(t||{})},[t]);const m=v=>/^#[0-9a-fA-F]{6}$/.test(v||""),g=v=>/^#[0-9a-fA-F]{8}$/.test(v||""),w=v=>/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0|1|0?\.\d+)\)$/.exec(v||""),P=v=>Math.max(0,Math.min(255,v|0)).toString(16).padStart(2,"0"),O=v=>({r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16)}),$=v=>{if(m(v))return{fmt:"hex6",base:v,a:1};if(g(v))return{fmt:"hex8",base:"#"+v.slice(1,7),a:parseInt(v.slice(7,9),16)/255};const y=w(v);return y?{fmt:"rgba",base:"#"+P(+y[1])+P(+y[2])+P(+y[3]),a:parseFloat(y[4])}:{fmt:"other",base:v,a:1}},C=(v,y,I)=>{const A=v==="hover"?"rgba":v==="border"||v==="btnBorder"?"hex8":"hex6";if(A==="hex6"||I>=1)return y;if(A==="hex8")return y+P(Math.round(I*255));const{r:k,g:R,b:x}=O(y);return`rgba(${k},${R},${x},${I})`},E=(v,y)=>{const I={...i,[v]:y};o(I),e(I)},S=(v,y)=>{const I=$(i[v]||""),A=Math.max(0,Math.min(100,Number(y)||0))/100,k=C(v,I.base,A);E(v,k)},j=()=>{if(!c)return;const v={...i,[c]:d||""};o(v),e(v),u(""),p("")},N=()=>e(AT),F=[{title:"Base",keys:["bg","panel","accent"]},{title:"Texto",keys:["text","muted"]},{title:"Traado",keys:["border"]},{title:"Botes",keys:["btnBg","btnText","btnHoverBg","btnBorder"]},{title:"Hover/Efeitos",keys:["hover","shadow"]},{title:"Extras",keys:["green","yellow","red","chart"]}];return l.jsxs("div",{className:"panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Tema"})}),l.jsxs("div",{className:"config-grid",children:[F.map(v=>l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"title",children:v.title}),v.keys.map(y=>{const I=i[y]||"",A=$(I),k=A.fmt!=="other",R=y==="hover"||y==="border"||y==="btnBorder";return l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:y}),l.jsxs("div",{className:"color-row",children:[k?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"color",value:A.base,onChange:x=>E(y,C(y,x.target.value,A.a))}),R&&l.jsx("input",{className:"alpha",type:"range",min:"0",max:"100",step:"1",value:Math.round(A.a*100),onChange:x=>S(y,x.target.value),title:`Alpha ${Math.round(A.a*100)}%`})]}):l.jsx("input",{value:I,onChange:x=>E(y,x.target.value)}),l.jsx("div",{className:"swatch",style:{background:I}})]})]},y)})]},v.title)),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Adicionar varivel"}),l.jsxs("div",{className:"color-row",children:[l.jsx("input",{placeholder:"nome",value:c,onChange:v=>u(v.target.value)}),l.jsx("input",{placeholder:"valor",value:d,onChange:v=>p(v.target.value)}),l.jsx("button",{className:"primary",type:"button",onClick:j,children:"Adicionar"})]})]}),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Integraes"}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Autopost via mLabs"}),l.jsx("input",{type:"checkbox",checked:!!r.autoPostMLabs,onChange:v=>s(y=>({...y,autoPostMLabs:v.target.checked}))})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"danger",type:"button",onClick:n,children:"Resetar sistema"}),l.jsx("button",{className:"primary",type:"button",onClick:N,children:"Restaurar padro"})]})]})}function pD({filtros:t,setFiltros:e,designers:n,showSearch:r,statusCounts:s}){const[i,o]=J.useState("today");J.useEffect(()=>{const w=new Date,P=N=>{const F=v=>String(v).padStart(2,"0");return`${N.getFullYear()}-${F(N.getMonth()+1)}-${F(N.getDate())}`},O=N=>{const F=new Date(N),v=F.getDay()||7;return F.setDate(F.getDate()-(v-1)),new Date(F.getFullYear(),F.getMonth(),F.getDate())},$=N=>{const F=O(N),v=new Date(F);return v.setDate(v.getDate()+6),v},C=new Date(w.getFullYear(),w.getMonth(),1),E=new Date(w.getFullYear(),w.getMonth()+1,0),S=new Date(w.getFullYear(),w.getMonth()-1,1),j=new Date(w.getFullYear(),w.getMonth(),0);if(i==="today"&&e(N=>({...N,sIni:P(w),sFim:P(w),cIni:"",cFim:""})),i==="week"){const N=O(w),F=$(w);e(v=>({...v,sIni:P(N),sFim:P(F),cIni:"",cFim:""}))}if(i==="month"&&e(N=>({...N,sIni:P(C),sFim:P(E),cIni:"",cFim:""})),i==="lastmonth"&&e(N=>({...N,sIni:P(S),sFim:P(j),cIni:"",cFim:""})),i==="last30"){const N=new Date(w);N.setDate(N.getDate()-29),e(F=>({...F,sIni:P(N),sFim:P(w),cIni:"",cFim:""}))}},[i]);const c=w=>e(P=>({...P,designer:w==="Todos"?"":w})),u=["Hoje","Semana","Ms","Ms passado","ltimos 30 dias"],d=w=>w==="Hoje"?"today":w==="Semana"?"week":w==="Ms"?"month":w==="Ms passado"?"lastmonth":"last30",p=["Todos",...n],m=w=>w==="Pendente"?"gray":w==="Em produo"?"yellow":w==="Revisar"?"red":w==="Aguardando Feedback"?"purple":w==="Aprovada"?"green-approve":w==="Concluida"||w==="Concluda"?"green-dark":"",g=w=>w==="Pendente"?"":w==="Em produo"?"":w==="Aguardando Feedback"?"":w==="Revisar"?"":w==="Aprovada"?"":w==="Concluida"||w==="Concluda"?"":"";return l.jsxs("div",{className:"filterbar",children:[r!==!1&&l.jsx("div",{className:"seg",style:{flex:1,minWidth:220},children:l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:t.q||"",onChange:w=>e(P=>({...P,q:w.target.value}))})}),l.jsxs("div",{className:"filters-row",children:[l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Perodo"}),u.map(w=>l.jsxs("button",{className:`btn-md ${i===d(w)?"active":""}`,onClick:()=>o(d(w)),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"calendar"})}),l.jsx("span",{children:w})]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Designer"}),p.map(w=>l.jsxs("button",{className:`btn-md ${(t.designer||"")===w||w==="Todos"&&!t.designer?"active":""}`,onClick:()=>c(w),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"usuarios"})}),l.jsx("span",{children:w})]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Status"}),Wa.map(w=>l.jsxs("button",{className:`btn-md ${m(w)} ${(t.status||"")===w?"active":""}`,onClick:()=>e(P=>({...P,status:P.status===w?void 0:w})),children:[l.jsx("span",{className:"emoji",children:g(w)}),l.jsx("span",{children:w}),(s==null?void 0:s[w])>0?l.jsx("span",{className:"alert-count",children:s[w]}):null]},w))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Data"}),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"calendar"})}),l.jsx("input",{type:"date",value:t.cIni||"",onChange:w=>e(P=>({...P,cIni:w.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:t.cFim||"",onChange:w=>e(P=>({...P,cFim:w.target.value}))})]})]})]})]})}function mD({demandas:t,items:e,designers:n,setView:r,onEdit:s,onStatus:i,cadStatus:o,onDelete:c,onDuplicate:u,compact:d,calRef:p,setCalRef:m,loading:g}){const w=e.length,P=e.filter(b=>br(b.status)),O=P.length,$=e.filter(b=>!br(b.status)).length,C=e.reduce((b,z)=>b+(z.revisoes||0),0),E=Math.round(100*(e.filter(b=>(b.revisoes||0)>0).length/Math.max(1,w))),S=(()=>{const b=P.filter(q=>q.prazo&&q.dataConclusao&&q.dataConclusao<=q.prazo).length,z=P.filter(q=>q.prazo&&q.dataConclusao).length;return Math.round(100*(b/Math.max(1,z)))})(),j=(()=>{const b=ne=>{if(!ne)return null;const[Ee,Ue,Se]=String(ne).split("-").map(Number);return new Date(Ee,Ue-1,Se)},z=e.map(ne=>b(ne.dataCriacao||ne.dataSolicitacao)).filter(Boolean).sort((ne,Ee)=>ne-Ee);if(!z.length)return 0;const q=z[0],Z=z[z.length-1];return Math.max(1,Math.round((Z-q)/864e5)+1)})(),N=4,F=n.length*N*j,v=(()=>{const b=F;return b?Math.round(100*(O/b)):0})(),y=e.filter(b=>fm(b.status)).length,I=e.filter(b=>hm(b.status)).length,A=(()=>{const b={};P.forEach(q=>{const Z=q.designer||"";b[Z]=(b[Z]||0)+1});const z=N*j;return n.map(q=>{const Z=b[q]||0,ne=z?Math.round(100*(Z/z)):0,Ee=z===0||ne<=90?"Verde":ne<=110?"Amarelo":"Vermelho";return{designer:q,ideal:z,real:Z,used:ne,status:Ee}})})(),k=(()=>{const b={};return e.forEach(z=>{if(!br(z.status)){const q=z.designer||"";b[q]=(b[q]||0)+1}}),b})(),R=(()=>{const b=[];return A.forEach(q=>{q.used>=110?b.push(`Designer ${q.designer} sobrecarregado (${q.used}%)  risco de atraso`):q.used>=90&&b.push(`Designer ${q.designer} com carga alta (${q.used}%)  monitorar prazos`);const Z=k[q.designer]||0;Z>=N*2&&b.push(`Designer ${q.designer} com ${Z} demandas ativas  priorizar distribuio`)}),e.filter(q=>{if(br(q.status)||!q.prazo)return!1;const[Z,ne,Ee]=String(q.prazo).split("-").map(Number),Ue=new Date(Z,(ne||1)-1,Ee||1),Se=new Date;return Se.setHours(0,0,0,0),Ue.setHours(0,0,0,0),Ue-Se<=864e5}).slice(0,5).forEach(q=>b.push(`Prazo crtico: ${q.titulo} (${q.designer||""})`)),b})(),x=(()=>{const b=new Map;return P.forEach(z=>b.set(z.designer||"",(b.get(z.designer||"")||0)+1)),Array.from(b.entries()).map(([z,q])=>({designer:z,qty:q}))})(),rt=(()=>{const b=(q,Z)=>{const ne=Ee=>{const[Ue,Se,tt]=String(Ee).split("-").map(Number);return new Date(Ue,Se-1,tt)};return!q||!Z?null:Math.max(0,Math.round((ne(Z)-ne(q))/864e5))},z={};return e.forEach(q=>{if(q.dataConclusao){const Z=q.designer||"",ne=b(q.dataCriacao||q.dataSolicitacao,q.dataConclusao);if(ne!=null){const Ee=z[Z]||{cnt:0,sum:0,min:9999,max:0};z[Z]={cnt:Ee.cnt+1,sum:Ee.sum+ne,min:Math.min(Ee.min,ne),max:Math.max(Ee.max,ne)}}}}),Object.entries(z).map(([q,Z])=>({designer:q,media:Z.sum/Z.cnt||0}))})(),At=(()=>{const b={};return e.forEach(z=>{if(z.prazo&&z.dataConclusao){const q=z.designer||"",Z=z.dataConclusao<=z.prazo,ne=b[q]||{ok:0,total:0};b[q]={ok:ne.ok+(Z?1:0),total:ne.total+1}}}),Object.entries(b).map(([z,q])=>({designer:z,pct:Math.round(100*(q.ok/(q.total||1)))}))})(),Ge=(()=>{const b={};return e.forEach(z=>{const q=z.designer||"",Z=z.revisoes||0,ne=b[q]||{rTot:0,cnt:0};b[q]={rTot:ne.rTot+Z,cnt:ne.cnt+1}}),Object.entries(b).map(([z,q])=>({designer:z,porPeca:+(q.rTot/(q.cnt||1)).toFixed(2)}))})(),et=(()=>{const b=x.reduce((Pe,{designer:$e,qty:ut})=>(Pe[$e]=ut,Pe),{}),z=At.reduce((Pe,{designer:$e,pct:ut})=>(Pe[$e]=ut,Pe),{}),q=rt.reduce((Pe,{designer:$e,media:ut})=>(Pe[$e]=ut,Pe),{}),Z=Ge.reduce((Pe,{designer:$e,porPeca:ut})=>(Pe[$e]=ut,Pe),{}),ne=Array.from(new Set([...Object.keys(b),...Object.keys(z),...Object.keys(q),...Object.keys(Z)])).filter(Boolean),Ee=(Pe,$e,ut)=>ut===$e?1:Math.max(0,Math.min(1,(Pe-$e)/(ut-$e))),Ue=Math.max(...Object.values(b||{_:-1}),0),Se=Math.min(...Object.values(b||{_:-1}),0),tt=100,$n=0,kn=Math.max(...Object.values(q||{_:-1}),0),Ut=Math.min(...Object.values(q||{_:-1}),0),Zt=Math.max(...Object.values(Z||{_:-1}),0),Ke=Math.min(...Object.values(Z||{_:-1}),0);return ne.map(Pe=>{const $e=Ee(b[Pe]||0,Se,Ue),ut=Ee(z[Pe]||0,$n,tt),yn=1-Ee(q[Pe]||0,Ut,kn),Kr=1-Ee(Z[Pe]||0,Ke,Zt),Tr=Math.round(($e*.4+ut*.3+yn*.2+Kr*.1)*100);return{designer:Pe,score:Tr,sla:z[Pe]||0,retrab:Z[Pe]||0}}).sort((Pe,$e)=>$e.score-Pe.score).slice(0,5)})(),M=(()=>{const b=Array.from({length:11},(q,Z)=>Z+8),z={};return n.forEach(q=>z[q]=b.map(Z=>0)),e.forEach(q=>{if(q.startedAt)try{const ne=new Date(q.startedAt).getHours();if(ne>=8&&ne<=18){const Ee=q.designer||"",Ue=ne-8;z[Ee]&&z[Ee][Ue]++}}catch{}}),{horas:b,per:z}})();return g?l.jsxs("div",{className:"dashboard",children:[l.jsx("div",{className:"exec-summary",children:Array.from({length:5}).map((b,z)=>l.jsx("div",{className:"skeleton row"},z))}),l.jsx("div",{className:"section-grid",children:Array.from({length:2}).map((b,z)=>l.jsx("div",{className:"skeleton card",style:{height:160}},z))})]}):l.jsxs("div",{className:"dashboard",children:[l.jsxs("div",{className:"exec-summary",children:[l.jsx("div",{className:"exec-title",children:"RESUMO EXECUTIVO DO PERODO"}),l.jsxs("div",{className:"exec-grid",children:[l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Produo total"}),l.jsx("div",{className:"exec-value",children:O})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"SLA geral"}),l.jsxs("div",{className:"exec-value",style:{color:S>=90?"#BCD200":S>=70?"#FFE55C":"#FF5E5E"},children:[S,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"% retrabalho"}),l.jsxs("div",{className:"exec-value",children:[E,"%"]})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Backlog atual"}),l.jsx("div",{className:"exec-value",children:$})]}),l.jsxs("div",{className:"exec-metric",children:[l.jsx("div",{className:"exec-label",children:"Capacidade usada"}),l.jsxs("div",{className:"exec-value",children:[v,"%"]}),l.jsx("div",{className:"progress",children:l.jsx("div",{className:"progress-fill",style:{width:`${v}%`,background:"#BCD200"}})})]})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PRODUO"}),l.jsxs("div",{className:"badge-grid",children:[l.jsxs("div",{className:"badge blue",children:[l.jsx("div",{children:"Criadas"}),l.jsx("div",{children:w})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"Concludas"}),l.jsx("div",{children:O})]}),l.jsxs("div",{className:"badge yellow",children:[l.jsx("div",{children:"Em produo"}),l.jsx("div",{children:y})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"Pendentes"}),l.jsx("div",{children:I})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"QUALIDADE"}),l.jsxs("div",{className:"badge-group",children:[l.jsxs("div",{className:"badge purple",children:[l.jsx("div",{children:"Revises"}),l.jsx("div",{children:C})]}),l.jsxs("div",{className:"badge",children:[l.jsx("div",{children:"% Retrabalho"}),l.jsxs("div",{children:[E,"%"]})]}),l.jsxs("div",{className:"badge green",children:[l.jsx("div",{children:"SLA"}),l.jsxs("div",{children:[S,"%"]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"PESSOAS"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Score"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"%Retrab"})]})}),l.jsx("tbody",{children:et.map((b,z)=>l.jsxs("tr",{children:[l.jsx("td",{children:z+1}),l.jsx("td",{children:b.designer}),l.jsx("td",{children:b.score}),l.jsxs("td",{children:[b.sla,"%"]}),l.jsx("td",{children:Math.round((b.retrab||0)*100)/100})]},b.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"OPERAO"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Capacidade ideal"}),l.jsx("th",{children:"Produo real"}),l.jsx("th",{children:"Capacidade usada"}),l.jsx("th",{children:"Status"})]})}),l.jsx("tbody",{children:A.map(b=>l.jsxs("tr",{children:[l.jsx("td",{children:b.designer}),l.jsx("td",{children:b.ideal}),l.jsx("td",{children:b.real}),l.jsxs("td",{children:[b.used,"%"]}),l.jsx("td",{style:{color:b.status==="Verde"?"#00C58E":b.status==="Amarelo"?"#FFE55C":"#FF5E5E"},children:b.status})]},b.designer))})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"ASSISTENTE IA"}),l.jsx("div",{className:"insights-grid",children:R.map((b,z)=>l.jsxs("div",{className:"insight-card",style:{opacity:0,animation:"pageIn .6s forwards"},children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:b})]},z))})]})]}),l.jsxs("div",{className:"section-grid",children:[l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"HEATMAP DE PRODUTIVIDADE POR HORRIO"}),l.jsxs("div",{className:"heatmap",children:[l.jsxs("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:[l.jsx("div",{className:"chart-label",style:{width:120}}),M.horas.map(b=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(b).padStart(2,"0"),"h"]},b))]}),n.map(b=>l.jsxs("div",{className:"heat-row",style:{alignItems:"center"},children:[l.jsx("div",{className:"chart-label",style:{width:120},children:b}),M.horas.map((z,q)=>{const Z=(M.per[b]||[])[q]||0,ne=Z===0?"#222":Z<2?"#4DA3FF33":"#4DA3FF";return l.jsx("div",{className:"heat-cell",style:{background:ne,width:24,height:24},title:`${b} ${String(z).padStart(2,"0")}h: ${Z}`},z)})]},b))]})]}),l.jsxs("div",{className:"section-card",children:[l.jsx("div",{className:"widget-title",children:"LINHA DO TEMPO DE PRODUO MENSAL"}),l.jsx("div",{className:"chips",children:x.map(({designer:b,qty:z})=>l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[l.jsx("span",{className:"chip",children:b}),l.jsx(eD,{series:[Math.max(1,z-1),z,z+1],color:"#4DA3FF"})]},b))})]})]})]})}function gD({demandas:t,items:e,designers:n,filtros:r,setFiltros:s,loading:i}){var Nn,sr,ir;const o=["Hoje","Semana","Ms","Ms passado"],c=T=>T==="Hoje"?"today":T==="Semana"?"week":T==="Ms"?"month":"lastmonth",[u,d]=J.useState("month"),[p,m]=J.useState(n[0]||""),[g,w]=J.useState(n[1]||"");J.useEffect(()=>{const T=new Date,D=ue=>{const pe=De=>String(De).padStart(2,"0");return`${ue.getFullYear()}-${pe(ue.getMonth()+1)}-${pe(ue.getDate())}`},U=ue=>{const pe=new Date(ue),De=pe.getDay()||7;return pe.setDate(pe.getDate()-(De-1)),new Date(pe.getFullYear(),pe.getMonth(),pe.getDate())},ie=ue=>{const pe=U(ue),De=new Date(pe);return De.setDate(De.getDate()+6),De},L=new Date(T.getFullYear(),T.getMonth(),1),fe=new Date(T.getFullYear(),T.getMonth()+1,0),ve=new Date(T.getFullYear(),T.getMonth()-1,1),Ie=new Date(T.getFullYear(),T.getMonth(),0);if(u==="today"&&s(ue=>({...ue,cIni:D(T),cFim:D(T)})),u==="week"){const ue=U(T),pe=ie(T);s(De=>({...De,cIni:D(ue),cFim:D(pe)}))}u==="month"&&s(ue=>({...ue,cIni:D(L),cFim:D(fe)})),u==="lastmonth"&&s(ue=>({...ue,cIni:D(ve),cFim:D(Ie)}))},[u]);const P=["Todos",...n],O=T=>s(D=>({...D,designer:T==="Todos"?"":T})),$=["Todos",...Array.from(new Set(t.map(T=>T.tipoMidia).filter(Boolean)))],C=T=>s(D=>({...D,tipoMidia:T==="Todos"?"":T})),E=["Todos",...dm],S=T=>s(D=>({...D,origem:T==="Todos"?"":T})),j=["Todos",...Array.from(new Set(t.map(T=>T.campanha).filter(Boolean)))],N=T=>s(D=>({...D,campanha:T==="Todos"?"":T})),F=["Todos",...Wa],v=T=>s(D=>({...D,status:T==="Todos"?"":T})),y=(()=>{const T=ie=>{if(!ie)return null;const[L,fe,ve]=ie.split("-").map(Number);return new Date(L,fe-1,ve)},D=T(r.cIni),U=T(r.cFim);return!D||!U?1:Math.max(1,Math.round((U-D)/864e5)+1)})(),I=e.filter(T=>br(T.status));e.filter(T=>hm(T.status)),e.filter(T=>fm(T.status)),e.reduce((T,D)=>T+(D.revisoes||0),0),I.length/y;const A=e.filter(T=>!br(T.status)),k=T=>{if(!T)return null;const[D,U,ie]=String(T).split("-").map(Number),L=new Date(D,(U||1)-1,ie||1),fe=new Date;return fe.setHours(0,0,0,0),L.setHours(0,0,0,0),Math.round((L-fe)/864e5)},R=A.filter(T=>{const D=k(T.prazo);return D!=null&&D<=2}),x=(()=>{const T=A.map(U=>k(U.prazo)).filter(U=>U!=null);return+(T.reduce((U,ie)=>U+ie,0)/(T.length||1)).toFixed(1)})(),At=(()=>{const T=A.filter(U=>{const ie=k(U.prazo);return ie!=null&&ie<0}).length,D=A.length||1;return Math.round(100*(T/D))})()>30?"Acumulando atraso":"Saudvel",Ge=(T,D)=>{const U=ie=>{const[L,fe,ve]=String(ie).split("-").map(Number);return new Date(L,fe-1,ve)};return!T||!D?null:Math.max(0,Math.round((U(D)-U(T))/864e5))},et=I.map(T=>Ge(T.dataCriacao||T.dataSolicitacao,T.dataConclusao)).filter(T=>T!=null),M=+(et.reduce((T,D)=>T+D,0)/(et.length||1)).toFixed(1),b=(()=>{const T={};return I.forEach(D=>{const U=D.tipoMidia||"Outro",ie=Ge(D.dataCriacao||D.dataSolicitacao,D.dataConclusao);if(ie!=null){const L=T[U]||{cnt:0,sum:0};T[U]={cnt:L.cnt+1,sum:L.sum+ie}}}),Object.entries(T).map(([D,U])=>({tipo:D,media:+(U.sum/U.cnt).toFixed(1)}))})(),z=(()=>{const T={};return I.forEach(D=>{const U=D.designer||"",ie=Ge(D.dataCriacao||D.dataSolicitacao,D.dataConclusao);if(ie!=null){const L=T[U]||{cnt:0,sum:0};T[U]={cnt:L.cnt+1,sum:L.sum+ie}}}),Object.entries(T).map(([D,U])=>({designer:D,media:+(U.sum/U.cnt).toFixed(1)}))})(),q=new Date,Z=new Date(q.getFullYear(),q.getMonth()-1,1),ne=(T,D)=>{if(!T)return!1;const[U,ie,L]=T.split("-").map(Number),fe=new Date(U,ie-1,L);return fe.getMonth()===D.getMonth()&&fe.getFullYear()===D.getFullYear()},Ee=I.filter(T=>ne(T.dataConclusao,q)).map(T=>Ge(T.dataCriacao||T.dataSolicitacao,T.dataConclusao)).filter(T=>T!=null),Ue=I.filter(T=>ne(T.dataConclusao,Z)).map(T=>Ge(T.dataCriacao||T.dataSolicitacao,T.dataConclusao)).filter(T=>T!=null),Se=+(Ee.reduce((T,D)=>T+D,0)/(Ee.length||1)).toFixed(1),tt=+(Ue.reduce((T,D)=>T+D,0)/(Ue.length||1)).toFixed(1),$n=T=>{const D=I.filter(U=>(U.designer||"")===T).map(U=>Ge(U.dataCriacao||U.dataSolicitacao,U.dataConclusao)).filter(U=>U!=null);return+(D.reduce((U,ie)=>U+ie,0)/(D.length||1)).toFixed(1)},kn=(()=>{const T=I.map(L=>L.revisoes||0),D=T.length||1,U=L=>Math.round(100*(T.filter(fe=>fe===L).length/D)),ie=L=>Math.round(100*(T.filter(L).length/D));return{sRev:U(0),umaRev:U(1),duasMais:ie(L=>L>=2)}})(),Ut=(()=>{const T={};return e.forEach(D=>{const U=D.designer||"",ie=D.revisoes||0,L=T[U]||{rTot:0,cnt:0};T[U]={rTot:L.rTot+ie,cnt:L.cnt+1}}),Object.entries(T).map(([D,U])=>({designer:D,porPeca:+(U.rTot/(U.cnt||1)).toFixed(2)})).sort((D,U)=>U.porPeca-D.porPeca)})(),Zt=(()=>{const T={};return e.forEach(D=>{const U=D.tipoMidia||"Outro",ie=D.revisoes||0,L=T[U]||{rTot:0,cnt:0};T[U]={rTot:L.rTot+ie,cnt:L.cnt+1}}),Object.entries(T).map(([D,U])=>({tipo:D,porPeca:+(U.rTot/(U.cnt||1)).toFixed(2)})).sort((D,U)=>U.porPeca-D.porPeca)})(),Ke=(()=>{const T={};e.forEach(U=>{const ie=U.origem||"Outros";T[ie]=(T[ie]||0)+1});const D=e.length||1;return Object.entries(T).map(([U,ie])=>({origem:U,q:ie,pct:Math.round(100*(ie/D))}))})(),vn=(()=>{const T={};return e.forEach(D=>{const U=D.origem||"Outros",ie=D.revisoes||0,L=T[U]||{rTot:0,cnt:0};T[U]={rTot:L.rTot+ie,cnt:L.cnt+1}}),Object.entries(T).map(([D,U])=>({origem:D,porPeca:+(U.rTot/(U.cnt||1)).toFixed(2)})).sort((D,U)=>U.porPeca-D.porPeca)})(),Pe=(()=>{const T={};return I.forEach(D=>{const U=D.origem||"Outros";T[U]=(T[U]||0)+1}),Object.entries(T).map(([D,U])=>({origem:D,q:U})).sort((D,U)=>U.q-D.q)})(),$e=(()=>{const T={};return I.forEach(D=>{const U=D.finishedAt;if(!U)return;const ie=new Date(U).getHours();T[ie]=(T[ie]||0)+1}),T})(),ut=(()=>{const T=I.map(ie=>Number(ie.tempoProducaoMs||0)).filter(ie=>ie>0),D=T.reduce((ie,L)=>ie+L,0)/(T.length||1);return+(ie=>ie/36e5)(D).toFixed(2)})(),yn=(()=>{const T={};return I.forEach(D=>{const U=D.designer||"",ie=Number(D.tempoProducaoMs||0),L=T[U]||{cnt:0,sum:0};T[U]={cnt:L.cnt+1,sum:L.sum+ie}}),Object.entries(T).map(([D,U])=>({designer:D,horas:+(U.sum/(U.cnt||1)/36e5).toFixed(2)})).sort((D,U)=>D.horas-U.horas)})(),Kr=Ut.slice().sort((T,D)=>T.porPeca-D.porPeca),Tr=(()=>{const T={};return e.forEach(D=>{const U=D.campanha||"";T[U]=(T[U]||0)+1}),Object.entries(T).map(([D,U])=>({campanha:D,q:U})).sort((D,U)=>U.q-D.q)})(),Le=(()=>{const T={};return e.forEach(D=>{const U=D.campanha||"",ie=D.revisoes||0,L=T[U]||{rTot:0,cnt:0};T[U]={rTot:L.rTot+ie,cnt:L.cnt+1}}),Object.entries(T).map(([D,U])=>({campanha:D,porPeca:+(U.rTot/(U.cnt||1)).toFixed(2)})).sort((D,U)=>U.porPeca-D.porPeca)})(),rr=(()=>{const T={};return e.forEach(D=>{if(D.campanha){const U=D.campanha,ie=!!(D.prazo&&D.dataConclusao&&D.dataConclusao<=D.prazo),L=!!(D.prazo&&D.dataConclusao),fe=T[U]||{ok:0,total:0};T[U]={ok:fe.ok+(ie?1:0),total:fe.total+(L?1:0)}}}),Object.entries(T).map(([D,U])=>({campanha:D,sla:Math.round(100*(U.ok/(U.total||1)))}))})();return i?l.jsxs("div",{className:"reports",children:[l.jsx("div",{className:"reports-toolbar",children:l.jsx("div",{className:"skeleton row",style:{width:"50%"}})}),l.jsx("div",{className:"reports-grid",children:Array.from({length:3}).map((T,D)=>l.jsx("div",{className:"skeleton card",style:{height:180}},D))})]}):l.jsxs("div",{className:"reports",children:[l.jsxs("div",{className:"reports-toolbar",children:[l.jsxs("div",{className:"chips",children:[o.map(T=>l.jsxs("button",{className:`btn-md ${u===c(T)?"active":""}`,onClick:()=>d(c(T)),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"calendar"})}),l.jsx("span",{children:T})]},T)),l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"calendar"})}),l.jsx("input",{type:"date",value:r.cIni||"",onChange:T=>s(D=>({...D,cIni:T.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:r.cFim||"",onChange:T=>s(D=>({...D,cFim:T.target.value}))})]})]}),l.jsxs("div",{className:"chips",children:[P.map(T=>l.jsxs("button",{className:`btn-md ${(r.designer||"")===T||T==="Todos"&&!r.designer?"active":""}`,onClick:()=>O(T),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"usuarios"})}),l.jsx("span",{children:T})]},T)),$.map(T=>l.jsxs("button",{className:`btn-md ${(r.tipoMidia||"")===T||T==="Todos"&&!r.tipoMidia?"active":""}`,onClick:()=>C(T),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"tag"})}),l.jsx("span",{children:T})]},T)),E.map(T=>l.jsxs("button",{className:`btn-md ${(r.origem||"")===T||T==="Todos"&&!r.origem?"active":""}`,onClick:()=>S(T),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"link"})}),l.jsx("span",{children:T})]},T)),j.map(T=>l.jsxs("button",{className:`btn-md ${(r.campanha||"")===T||T==="Todos"&&!r.campanha?"active":""}`,onClick:()=>N(T),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"tag"})}),l.jsx("span",{children:T})]},T)),F.map(T=>l.jsxs("button",{className:`btn-md ${(r.status||"")===T||T==="Todos"&&!r.status?"active":""}`,onClick:()=>v(T),children:[l.jsx("span",{className:"icon",children:l.jsx(Ve,{name:"dot"})}),l.jsx("span",{children:T})]},T))]})]}),l.jsxs("div",{className:"reports-grid",children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Backlog"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Backlog total: ",A.length]}),l.jsxs("span",{className:"chip",children:["Em risco (48h): ",R.length]}),l.jsxs("span",{className:"chip",children:["Prazo mdio: ",x,"d"]}),l.jsxs("span",{className:"chip",children:["Estado: ",At]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(A.reduce((T,D)=>{const U=D.tipoMidia||"Outro";return T[U]=(T[U]||0)+1,T},{})).map(([T,D])=>l.jsxs("tr",{children:[l.jsx("td",{children:T}),l.jsx("td",{children:D})]},T))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qtd"})]})}),l.jsx("tbody",{children:Object.entries(A.reduce((T,D)=>{const U=D.designer||"";return T[U]=(T[U]||0)+1,T},{})).map(([T,D])=>l.jsxs("tr",{children:[l.jsx("td",{children:T}),l.jsx("td",{children:D})]},T))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Lead Time"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mdio geral: ",M,"d"]}),l.jsxs("span",{className:"chip",children:["Este ms: ",Se,"d"]}),l.jsxs("span",{className:"chip",children:["Ms passado: ",tt,"d"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:b.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.tipo}),l.jsxs("td",{children:[T.media,"d"]})]},T.tipo))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Lead Time mdio"})]})}),l.jsx("tbody",{children:z.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.designer}),l.jsxs("td",{children:[T.media,"d"]})]},T.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"chips",children:[l.jsx("span",{className:"chip",children:"Designer A"}),l.jsx("select",{value:p,onChange:T=>m(T.target.value),children:n.map(T=>l.jsx("option",{value:T,children:T},T))}),l.jsx("span",{className:"chip",children:"Designer B"}),l.jsx("select",{value:g,onChange:T=>w(T.target.value),children:n.map(T=>l.jsx("option",{value:T,children:T},T))}),l.jsxs("span",{className:"chip",children:["A: ",$n(p),"d"]}),l.jsxs("span",{className:"chip",children:["B: ",$n(g),"d"]})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Eficincia e Retrabalho"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Sem reviso: ",kn.sRev,"%"]}),l.jsxs("span",{className:"chip",children:["1 reviso: ",kn.umaRev,"%"]}),l.jsxs("span",{className:"chip",children:["2+ revises: ",kn.duasMais,"%"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:Ut.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.designer}),l.jsx("td",{children:T.porPeca})]},T.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:Zt.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.tipo}),l.jsx("td",{children:T.porPeca})]},T.tipo))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Demanda por Canal"}),l.jsx("div",{className:"chips",children:Ke.map(T=>l.jsxs("span",{className:"chip",children:[T.origem,": ",T.pct,"%"]},T.origem))}),l.jsx("div",{className:"section-divider"}),(()=>{const T=Ke.reduce((ve,Ie)=>ve+Ie.q,0)||1;let D=0;const U=50,ie=60,L=60,fe=Ke.slice(0,5).map((ve,Ie)=>{const ue=ve.q/T,pe=D*2*Math.PI,De=(D+ue)*2*Math.PI;D+=ue;const Oe=ie+U*Math.cos(pe),Rn=L+U*Math.sin(pe),Dn=ie+U*Math.cos(De),Ae=L+U*Math.sin(De),K=ue>.5?1:0,B=`M ${ie} ${L} L ${Oe} ${Rn} A ${U} ${U} 0 ${K} 1 ${Dn} ${Ae} Z`,Q=["#4DA3FF","#BCD200","#FF5E5E","#9B59B6","#2ECC71"];return{path:B,color:Q[Ie%Q.length],label:`${ve.origem} ${ve.pct}%`}});return l.jsxs("div",{className:"pie-wrap",children:[l.jsx("svg",{width:"140",height:"140",className:"pie-chart",children:fe.map((ve,Ie)=>l.jsx("path",{d:ve.path,fill:ve.color},Ie))}),l.jsx("div",{className:"pie-legend",children:fe.map((ve,Ie)=>l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot",style:{background:ve.color}}),ve.label]},Ie))})]})})(),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Revises/pea"})]})}),l.jsx("tbody",{children:vn.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.origem}),l.jsx("td",{children:T.porPeca})]},T.origem))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Canal"}),l.jsx("th",{children:"Concludas"})]})}),l.jsx("tbody",{children:Pe.map(T=>l.jsxs("tr",{children:[l.jsx("td",{children:T.origem}),l.jsx("td",{children:T.q})]},T.origem))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Produtividade por Hora (Avanado)"}),l.jsx("div",{className:"chips",children:l.jsxs("span",{className:"chip",children:["Tempo mdio real/pea: ",ut,"h"]})}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"heatmap",children:[l.jsx("div",{className:"heat-row",style:{gap:6,color:"var(--muted)"},children:Array.from({length:11},(T,D)=>D+8).map(T=>l.jsxs("div",{style:{width:24,textAlign:"center"},children:[String(T).padStart(2,"0"),"h"]},T))}),l.jsx("div",{className:"heat-row",children:Array.from({length:11},(T,D)=>D+8).map(T=>{const D=$e[T]||0,U=D===0?"#222":D<2?"#00C58E33":"#00C58E";return l.jsx("div",{className:"heat-cell",style:{background:U},title:`${String(T).padStart(2,"0")}h: ${D}`},T)})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Velocidade mdia (h)"})]})}),l.jsx("tbody",{children:yn.map((T,D)=>l.jsxs("tr",{children:[l.jsx("td",{children:D+1}),l.jsx("td",{children:T.designer}),l.jsx("td",{children:T.horas})]},T.designer))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"#"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Qualidade (menos retrabalho)"})]})}),l.jsx("tbody",{children:Kr.map((T,D)=>l.jsxs("tr",{children:[l.jsx("td",{children:D+1}),l.jsx("td",{children:T.designer}),l.jsx("td",{children:T.porPeca})]},T.designer))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Relatrio de Campanhas"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Mais demandada: ",((Nn=Tr[0])==null?void 0:Nn.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Maior retrabalho: ",((sr=Le[0])==null?void 0:sr.campanha)||""]}),l.jsxs("span",{className:"chip",children:["Melhor SLA: ",((ir=rr.sort((T,D)=>D.sla-T.sla)[0])==null?void 0:ir.campanha)||""]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Campanha"}),l.jsx("th",{children:"Produo (concludas)"}),l.jsx("th",{children:"SLA%"}),l.jsx("th",{children:"Retrabalho/pea"})]})}),l.jsx("tbody",{children:Array.from(new Set(e.map(T=>T.campanha).filter(Boolean))).map(T=>{var L,fe;const D=I.filter(ve=>ve.campanha===T).length,U=((L=rr.find(ve=>ve.campanha===T))==null?void 0:L.sla)||0,ie=((fe=Le.find(ve=>ve.campanha===T))==null?void 0:fe.porPeca)||0;return l.jsxs("tr",{children:[l.jsx("td",{children:T}),l.jsx("td",{children:D}),l.jsxs("td",{style:{color:U>=90?"#BCD200":U>=70?"#FFE55C":"#FF5E5E"},children:[U,"%"]}),l.jsx("td",{children:ie})]},T)})})]})]})]})]})}J0(document.getElementById("root")).render(l.jsx(sI.StrictMode,{children:l.jsx(uD,{})}));
