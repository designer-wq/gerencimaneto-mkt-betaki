(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function VE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kv={exports:{}},tu={},Gv={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qa=Symbol.for("react.element"),FE=Symbol.for("react.portal"),UE=Symbol.for("react.fragment"),zE=Symbol.for("react.strict_mode"),BE=Symbol.for("react.profiler"),$E=Symbol.for("react.provider"),qE=Symbol.for("react.context"),HE=Symbol.for("react.forward_ref"),WE=Symbol.for("react.suspense"),KE=Symbol.for("react.memo"),GE=Symbol.for("react.lazy"),fm=Symbol.iterator;function QE(t){return t===null||typeof t!="object"?null:(t=fm&&t[fm]||t["@@iterator"],typeof t=="function"?t:null)}var Qv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yv=Object.assign,Xv={};function uo(t,e,n){this.props=t,this.context=e,this.refs=Xv,this.updater=n||Qv}uo.prototype.isReactComponent={};uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jv(){}Jv.prototype=uo.prototype;function Qh(t,e,n){this.props=t,this.context=e,this.refs=Xv,this.updater=n||Qv}var Yh=Qh.prototype=new Jv;Yh.constructor=Qh;Yv(Yh,uo.prototype);Yh.isPureReactComponent=!0;var pm=Array.isArray,Zv=Object.prototype.hasOwnProperty,Xh={current:null},ey={key:!0,ref:!0,__self:!0,__source:!0};function ty(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Zv.call(e,r)&&!ey.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:qa,type:t,key:i,ref:o,props:s,_owner:Xh.current}}function YE(t,e){return{$$typeof:qa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jh(t){return typeof t=="object"&&t!==null&&t.$$typeof===qa}function XE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var mm=/\/+/g;function Gu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XE(""+t.key):e.toString(36)}function Gl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qa:case FE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Gu(o,0):r,pm(s)?(n="",t!=null&&(n=t.replace(mm,"$&/")+"/"),Gl(s,e,n,"",function(h){return h})):s!=null&&(Jh(s)&&(s=YE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(mm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",pm(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Gu(i,c);o+=Gl(i,e,n,u,s)}else if(u=QE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Gu(i,c++),o+=Gl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Il(t,e,n){if(t==null)return t;var r=[],s=0;return Gl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function JE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kn={current:null},Ql={transition:null},ZE={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:Ql,ReactCurrentOwner:Xh};function ny(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Il,forEach:function(t,e,n){Il(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Il(t,function(){e++}),e},toArray:function(t){return Il(t,function(e){return e})||[]},only:function(t){if(!Jh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=uo;ze.Fragment=UE;ze.Profiler=BE;ze.PureComponent=Qh;ze.StrictMode=zE;ze.Suspense=WE;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZE;ze.act=ny;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Yv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Zv.call(e,u)&&!ey.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:qa,type:t.type,key:s,ref:i,props:r,_owner:o}};ze.createContext=function(t){return t={$$typeof:qE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$E,_context:t},t.Consumer=t};ze.createElement=ty;ze.createFactory=function(t){var e=ty.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:HE,render:t}};ze.isValidElement=Jh;ze.lazy=function(t){return{$$typeof:GE,_payload:{_status:-1,_result:t},_init:JE}};ze.memo=function(t,e){return{$$typeof:KE,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=Ql.transition;Ql.transition={};try{t()}finally{Ql.transition=e}};ze.unstable_act=ny;ze.useCallback=function(t,e){return kn.current.useCallback(t,e)};ze.useContext=function(t){return kn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return kn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return kn.current.useEffect(t,e)};ze.useId=function(){return kn.current.useId()};ze.useImperativeHandle=function(t,e,n){return kn.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return kn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return kn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return kn.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return kn.current.useReducer(t,e,n)};ze.useRef=function(t){return kn.current.useRef(t)};ze.useState=function(t){return kn.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return kn.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return kn.current.useTransition()};ze.version="18.3.1";Gv.exports=ze;var X=Gv.exports;const Qs=VE(X);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS=X,tS=Symbol.for("react.element"),nS=Symbol.for("react.fragment"),rS=Object.prototype.hasOwnProperty,sS=eS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iS={key:!0,ref:!0,__self:!0,__source:!0};function ry(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rS.call(e,r)&&!iS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:tS,type:t,key:i,ref:o,props:s,_owner:sS.current}}tu.Fragment=nS;tu.jsx=ry;tu.jsxs=ry;Kv.exports=tu;var l=Kv.exports,sy={exports:{}},Kn={},iy={exports:{}},oy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,ne){var oe=V.length;V.push(ne);e:for(;0<oe;){var Se=oe-1>>>1,we=V[Se];if(0<s(we,ne))V[Se]=ne,V[oe]=we,oe=Se;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var ne=V[0],oe=V.pop();if(oe!==ne){V[0]=oe;e:for(var Se=0,we=V.length,Ae=we>>>1;Se<Ae;){var it=2*(Se+1)-1,gt=V[it],nt=it+1,Fe=V[nt];if(0>s(gt,oe))nt<we&&0>s(Fe,gt)?(V[Se]=Fe,V[nt]=oe,Se=nt):(V[Se]=gt,V[it]=oe,Se=it);else if(nt<we&&0>s(Fe,oe))V[Se]=Fe,V[nt]=oe,Se=nt;else break e}}return ne}function s(V,ne){var oe=V.sortIndex-ne.sortIndex;return oe!==0?oe:V.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],p=1,g=null,_=3,j=!1,b=!1,R=!1,z=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(V){for(var ne=n(h);ne!==null;){if(ne.callback===null)r(h);else if(ne.startTime<=V)r(h),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(h)}}function O(V){if(R=!1,A(V),!b)if(n(u)!==null)b=!0,mt($);else{var ne=n(h);ne!==null&&It(O,ne.startTime-V)}}function $(V,ne){b=!1,R&&(R=!1,N(y),y=-1),j=!0;var oe=_;try{for(A(ne),g=n(u);g!==null&&(!(g.expirationTime>ne)||V&&!k());){var Se=g.callback;if(typeof Se=="function"){g.callback=null,_=g.priorityLevel;var we=Se(g.expirationTime<=ne);ne=t.unstable_now(),typeof we=="function"?g.callback=we:g===n(u)&&r(u),A(ne)}else r(u);g=n(u)}if(g!==null)var Ae=!0;else{var it=n(h);it!==null&&It(O,it.startTime-ne),Ae=!1}return Ae}finally{g=null,_=oe,j=!1}}var K=!1,v=null,y=-1,T=5,E=-1;function k(){return!(t.unstable_now()-E<T)}function P(){if(v!==null){var V=t.unstable_now();E=V;var ne=!0;try{ne=v(!0,V)}finally{ne?I():(K=!1,v=null)}}else K=!1}var I;if(typeof w=="function")I=function(){w(P)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Ve=Ce.port2;Ce.port1.onmessage=P,I=function(){Ve.postMessage(null)}}else I=function(){z(P,0)};function mt(V){v=V,K||(K=!0,I())}function It(V,ne){y=z(function(){V(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){b||j||(b=!0,mt($))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(_){case 1:case 2:case 3:var ne=3;break;default:ne=_}var oe=_;_=ne;try{return V()}finally{_=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,ne){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var oe=_;_=V;try{return ne()}finally{_=oe}},t.unstable_scheduleCallback=function(V,ne,oe){var Se=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Se+oe:Se):oe=Se,V){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=oe+we,V={id:p++,callback:ne,priorityLevel:V,startTime:oe,expirationTime:we,sortIndex:-1},oe>Se?(V.sortIndex=oe,e(h,V),n(u)===null&&V===n(h)&&(R?(N(y),y=-1):R=!0,It(O,oe-Se))):(V.sortIndex=we,e(u,V),b||j||(b=!0,mt($))),V},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(V){var ne=_;return function(){var oe=_;_=ne;try{return V.apply(this,arguments)}finally{_=oe}}}})(oy);iy.exports=oy;var oS=iy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS=X,Wn=oS;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ay=new Set,ha={};function ui(t,e){Yi(t,e),Yi(t+"Capture",e)}function Yi(t,e){for(ha[t]=e,t=0;t<e.length;t++)ay.add(e[t])}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rd=Object.prototype.hasOwnProperty,lS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gm={},vm={};function cS(t){return Rd.call(vm,t)?!0:Rd.call(gm,t)?!1:lS.test(t)?vm[t]=!0:(gm[t]=!0,!1)}function uS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dS(t,e,n,r){if(e===null||typeof e>"u"||uS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dn[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dn[e]=new Nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dn[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dn[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dn[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dn[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dn[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dn[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dn[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zh=/[\-:]([a-z])/g;function ef(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zh,ef);dn[e]=new Nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zh,ef);dn[e]=new Nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zh,ef);dn[e]=new Nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});dn.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function tf(t,e,n,r){var s=dn.hasOwnProperty(e)?dn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dS(e,n,s,r)&&(n=null),r||s===null?cS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xr=aS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cl=Symbol.for("react.element"),Ci=Symbol.for("react.portal"),xi=Symbol.for("react.fragment"),nf=Symbol.for("react.strict_mode"),jd=Symbol.for("react.profiler"),ly=Symbol.for("react.provider"),cy=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),Dd=Symbol.for("react.suspense"),bd=Symbol.for("react.suspense_list"),sf=Symbol.for("react.memo"),ns=Symbol.for("react.lazy"),uy=Symbol.for("react.offscreen"),ym=Symbol.iterator;function Po(t){return t===null||typeof t!="object"?null:(t=ym&&t[ym]||t["@@iterator"],typeof t=="function"?t:null)}var Rt=Object.assign,Qu;function zo(t){if(Qu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qu=e&&e[1]||""}return`
`+Qu+t}var Yu=!1;function Xu(t,e){if(!t||Yu)return"";Yu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Yu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zo(t):""}function hS(t){switch(t.tag){case 5:return zo(t.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return t=Xu(t.type,!1),t;case 11:return t=Xu(t.type.render,!1),t;case 1:return t=Xu(t.type,!0),t;default:return""}}function Md(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xi:return"Fragment";case Ci:return"Portal";case jd:return"Profiler";case nf:return"StrictMode";case Dd:return"Suspense";case bd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cy:return(t.displayName||"Context")+".Consumer";case ly:return(t._context.displayName||"Context")+".Provider";case rf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sf:return e=t.displayName||null,e!==null?e:Md(t.type)||"Memo";case ns:e=t._payload,t=t._init;try{return Md(t(e))}catch{}}return null}function fS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Md(e);case 8:return e===nf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pS(t){var e=dy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xl(t){t._valueTracker||(t._valueTracker=pS(t))}function hy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Od(t,e){var n=e.checked;return Rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _m(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fy(t,e){e=e.checked,e!=null&&tf(t,"checked",e,!1)}function Ld(t,e){fy(t,e);var n=xs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vd(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vd(t,e,n){(e!=="number"||mc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bo=Array.isArray;function Vi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Em(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(Bo(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function py(t,e){var n=xs(e.value),r=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function my(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ud(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?my(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Al,gy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Al=Al||document.createElement("div"),Al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Al.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mS=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(t){mS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xo[e]=Xo[t]})});function vy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xo.hasOwnProperty(t)&&Xo[t]?(""+e).trim():e+"px"}function yy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var gS=Rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zd(t,e){if(e){if(gS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function Bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $d=null;function of(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qd=null,Fi=null,Ui=null;function Tm(t){if(t=Ka(t)){if(typeof qd!="function")throw Error(le(280));var e=t.stateNode;e&&(e=ou(e),qd(t.stateNode,t.type,e))}}function _y(t){Fi?Ui?Ui.push(t):Ui=[t]:Fi=t}function wy(){if(Fi){var t=Fi,e=Ui;if(Ui=Fi=null,Tm(t),e)for(t=0;t<e.length;t++)Tm(e[t])}}function Ey(t,e){return t(e)}function Sy(){}var Ju=!1;function Ty(t,e,n){if(Ju)return t(e,n);Ju=!0;try{return Ey(t,e,n)}finally{Ju=!1,(Fi!==null||Ui!==null)&&(Sy(),wy())}}function pa(t,e){var n=t.stateNode;if(n===null)return null;var r=ou(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var Hd=!1;if(Br)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Hd=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Hd=!1}function vS(t,e,n,r,s,i,o,c,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Jo=!1,gc=null,vc=!1,Wd=null,yS={onError:function(t){Jo=!0,gc=t}};function _S(t,e,n,r,s,i,o,c,u){Jo=!1,gc=null,vS.apply(yS,arguments)}function wS(t,e,n,r,s,i,o,c,u){if(_S.apply(this,arguments),Jo){if(Jo){var h=gc;Jo=!1,gc=null}else throw Error(le(198));vc||(vc=!0,Wd=h)}}function di(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Iy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Im(t){if(di(t)!==t)throw Error(le(188))}function ES(t){var e=t.alternate;if(!e){if(e=di(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Im(s),t;if(i===r)return Im(s),e;i=i.sibling}throw Error(le(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function Cy(t){return t=ES(t),t!==null?xy(t):null}function xy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xy(t);if(e!==null)return e;t=t.sibling}return null}var Ay=Wn.unstable_scheduleCallback,Cm=Wn.unstable_cancelCallback,SS=Wn.unstable_shouldYield,TS=Wn.unstable_requestPaint,Ut=Wn.unstable_now,IS=Wn.unstable_getCurrentPriorityLevel,af=Wn.unstable_ImmediatePriority,ky=Wn.unstable_UserBlockingPriority,yc=Wn.unstable_NormalPriority,CS=Wn.unstable_LowPriority,Ny=Wn.unstable_IdlePriority,nu=null,Er=null;function xS(t){if(Er&&typeof Er.onCommitFiberRoot=="function")try{Er.onCommitFiberRoot(nu,t,void 0,(t.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:NS,AS=Math.log,kS=Math.LN2;function NS(t){return t>>>=0,t===0?32:31-(AS(t)/kS|0)|0}var kl=64,Nl=4194304;function $o(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _c(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=$o(c):(i&=o,i!==0&&(r=$o(i)))}else o=n&~s,o!==0?r=$o(o):i!==0&&(r=$o(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dr(e),s=1<<n,r|=t[n],e&=~s;return r}function PS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-dr(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=PS(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Kd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Py(){var t=kl;return kl<<=1,!(kl&4194240)&&(kl=64),t}function Zu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ha(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dr(e),t[e]=n}function jS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-dr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var lt=0;function Ry(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jy,cf,Dy,by,My,Gd=!1,Pl=[],ps=null,ms=null,gs=null,ma=new Map,ga=new Map,ss=[],DS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xm(t,e){switch(t){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":ma.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ga.delete(e.pointerId)}}function jo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ka(e),e!==null&&cf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function bS(t,e,n,r,s){switch(e){case"focusin":return ps=jo(ps,t,e,n,r,s),!0;case"dragenter":return ms=jo(ms,t,e,n,r,s),!0;case"mouseover":return gs=jo(gs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ma.set(i,jo(ma.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ga.set(i,jo(ga.get(i)||null,t,e,n,r,s)),!0}return!1}function Oy(t){var e=Hs(t.target);if(e!==null){var n=di(e);if(n!==null){if(e=n.tag,e===13){if(e=Iy(n),e!==null){t.blockedOn=e,My(t.priority,function(){Dy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$d=r,n.target.dispatchEvent(r),$d=null}else return e=Ka(n),e!==null&&cf(e),t.blockedOn=n,!1;e.shift()}return!0}function Am(t,e,n){Yl(t)&&n.delete(e)}function MS(){Gd=!1,ps!==null&&Yl(ps)&&(ps=null),ms!==null&&Yl(ms)&&(ms=null),gs!==null&&Yl(gs)&&(gs=null),ma.forEach(Am),ga.forEach(Am)}function Do(t,e){t.blockedOn===e&&(t.blockedOn=null,Gd||(Gd=!0,Wn.unstable_scheduleCallback(Wn.unstable_NormalPriority,MS)))}function va(t){function e(s){return Do(s,t)}if(0<Pl.length){Do(Pl[0],t);for(var n=1;n<Pl.length;n++){var r=Pl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ps!==null&&Do(ps,t),ms!==null&&Do(ms,t),gs!==null&&Do(gs,t),ma.forEach(e),ga.forEach(e),n=0;n<ss.length;n++)r=ss[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ss.length&&(n=ss[0],n.blockedOn===null);)Oy(n),n.blockedOn===null&&ss.shift()}var zi=Xr.ReactCurrentBatchConfig,wc=!0;function OS(t,e,n,r){var s=lt,i=zi.transition;zi.transition=null;try{lt=1,uf(t,e,n,r)}finally{lt=s,zi.transition=i}}function LS(t,e,n,r){var s=lt,i=zi.transition;zi.transition=null;try{lt=4,uf(t,e,n,r)}finally{lt=s,zi.transition=i}}function uf(t,e,n,r){if(wc){var s=Qd(t,e,n,r);if(s===null)cd(t,e,r,Ec,n),xm(t,r);else if(bS(s,t,e,n,r))r.stopPropagation();else if(xm(t,r),e&4&&-1<DS.indexOf(t)){for(;s!==null;){var i=Ka(s);if(i!==null&&jy(i),i=Qd(t,e,n,r),i===null&&cd(t,e,r,Ec,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else cd(t,e,r,null,n)}}var Ec=null;function Qd(t,e,n,r){if(Ec=null,t=of(r),t=Hs(t),t!==null)if(e=di(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Iy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ec=t,null}function Ly(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IS()){case af:return 1;case ky:return 4;case yc:case CS:return 16;case Ny:return 536870912;default:return 16}default:return 16}}var us=null,df=null,Xl=null;function Vy(){if(Xl)return Xl;var t,e=df,n=e.length,r,s="value"in us?us.value:us.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xl=s.slice(t,1<r?1-r:void 0)}function Jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function km(){return!1}function Gn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Rl:km,this.isPropagationStopped=km,this}return Rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),e}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=Gn(ho),Wa=Rt({},ho,{view:0,detail:0}),VS=Gn(Wa),ed,td,bo,ru=Rt({},Wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ff,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bo&&(bo&&t.type==="mousemove"?(ed=t.screenX-bo.screenX,td=t.screenY-bo.screenY):td=ed=0,bo=t),ed)},movementY:function(t){return"movementY"in t?t.movementY:td}}),Nm=Gn(ru),FS=Rt({},ru,{dataTransfer:0}),US=Gn(FS),zS=Rt({},Wa,{relatedTarget:0}),nd=Gn(zS),BS=Rt({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),$S=Gn(BS),qS=Rt({},ho,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HS=Gn(qS),WS=Rt({},ho,{data:0}),Pm=Gn(WS),KS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QS[t])?!!e[t]:!1}function ff(){return YS}var XS=Rt({},Wa,{key:function(t){if(t.key){var e=KS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ff,charCode:function(t){return t.type==="keypress"?Jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JS=Gn(XS),ZS=Rt({},ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rm=Gn(ZS),eT=Rt({},Wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ff}),tT=Gn(eT),nT=Rt({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),rT=Gn(nT),sT=Rt({},ru,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iT=Gn(sT),oT=[9,13,27,32],pf=Br&&"CompositionEvent"in window,Zo=null;Br&&"documentMode"in document&&(Zo=document.documentMode);var aT=Br&&"TextEvent"in window&&!Zo,Fy=Br&&(!pf||Zo&&8<Zo&&11>=Zo),jm=" ",Dm=!1;function Uy(t,e){switch(t){case"keyup":return oT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ai=!1;function lT(t,e){switch(t){case"compositionend":return zy(e);case"keypress":return e.which!==32?null:(Dm=!0,jm);case"textInput":return t=e.data,t===jm&&Dm?null:t;default:return null}}function cT(t,e){if(Ai)return t==="compositionend"||!pf&&Uy(t,e)?(t=Vy(),Xl=df=us=null,Ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fy&&e.locale!=="ko"?null:e.data;default:return null}}var uT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uT[t.type]:e==="textarea"}function By(t,e,n,r){_y(r),e=Sc(e,"onChange"),0<e.length&&(n=new hf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ea=null,ya=null;function dT(t){Zy(t,0)}function su(t){var e=Pi(t);if(hy(e))return t}function hT(t,e){if(t==="change")return e}var $y=!1;if(Br){var rd;if(Br){var sd="oninput"in document;if(!sd){var Mm=document.createElement("div");Mm.setAttribute("oninput","return;"),sd=typeof Mm.oninput=="function"}rd=sd}else rd=!1;$y=rd&&(!document.documentMode||9<document.documentMode)}function Om(){ea&&(ea.detachEvent("onpropertychange",qy),ya=ea=null)}function qy(t){if(t.propertyName==="value"&&su(ya)){var e=[];By(e,ya,t,of(t)),Ty(dT,e)}}function fT(t,e,n){t==="focusin"?(Om(),ea=e,ya=n,ea.attachEvent("onpropertychange",qy)):t==="focusout"&&Om()}function pT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return su(ya)}function mT(t,e){if(t==="click")return su(e)}function gT(t,e){if(t==="input"||t==="change")return su(e)}function vT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:vT;function _a(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rd.call(e,s)||!fr(t[s],e[s]))return!1}return!0}function Lm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vm(t,e){var n=Lm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lm(n)}}function Hy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wy(){for(var t=window,e=mc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mc(t.document)}return e}function mf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yT(t){var e=Wy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hy(n.ownerDocument.documentElement,n)){if(r!==null&&mf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Vm(n,i);var o=Vm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _T=Br&&"documentMode"in document&&11>=document.documentMode,ki=null,Yd=null,ta=null,Xd=!1;function Fm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xd||ki==null||ki!==mc(r)||(r=ki,"selectionStart"in r&&mf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ta&&_a(ta,r)||(ta=r,r=Sc(Yd,"onSelect"),0<r.length&&(e=new hf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ki)))}function jl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ni={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionend:jl("Transition","TransitionEnd")},id={},Ky={};Br&&(Ky=document.createElement("div").style,"AnimationEvent"in window||(delete Ni.animationend.animation,delete Ni.animationiteration.animation,delete Ni.animationstart.animation),"TransitionEvent"in window||delete Ni.transitionend.transition);function iu(t){if(id[t])return id[t];if(!Ni[t])return t;var e=Ni[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ky)return id[t]=e[n];return t}var Gy=iu("animationend"),Qy=iu("animationiteration"),Yy=iu("animationstart"),Xy=iu("transitionend"),Jy=new Map,Um="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function js(t,e){Jy.set(t,e),ui(e,[t])}for(var od=0;od<Um.length;od++){var ad=Um[od],wT=ad.toLowerCase(),ET=ad[0].toUpperCase()+ad.slice(1);js(wT,"on"+ET)}js(Gy,"onAnimationEnd");js(Qy,"onAnimationIteration");js(Yy,"onAnimationStart");js("dblclick","onDoubleClick");js("focusin","onFocus");js("focusout","onBlur");js(Xy,"onTransitionEnd");Yi("onMouseEnter",["mouseout","mouseover"]);Yi("onMouseLeave",["mouseout","mouseover"]);Yi("onPointerEnter",["pointerout","pointerover"]);Yi("onPointerLeave",["pointerout","pointerover"]);ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ST=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function zm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wS(r,e,void 0,t),t.currentTarget=null}function Zy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;zm(s,c,h),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,h=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;zm(s,c,h),i=u}}}if(vc)throw t=Wd,vc=!1,Wd=null,t}function Et(t,e){var n=e[nh];n===void 0&&(n=e[nh]=new Set);var r=t+"__bubble";n.has(r)||(e_(e,t,2,!1),n.add(r))}function ld(t,e,n){var r=0;e&&(r|=4),e_(n,t,r,e)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function wa(t){if(!t[Dl]){t[Dl]=!0,ay.forEach(function(n){n!=="selectionchange"&&(ST.has(n)||ld(n,!1,t),ld(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dl]||(e[Dl]=!0,ld("selectionchange",!1,e))}}function e_(t,e,n,r){switch(Ly(e)){case 1:var s=OS;break;case 4:s=LS;break;default:s=uf}n=s.bind(null,e,n,t),s=void 0,!Hd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function cd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Hs(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Ty(function(){var h=i,p=of(n),g=[];e:{var _=Jy.get(t);if(_!==void 0){var j=hf,b=t;switch(t){case"keypress":if(Jl(n)===0)break e;case"keydown":case"keyup":j=JS;break;case"focusin":b="focus",j=nd;break;case"focusout":b="blur",j=nd;break;case"beforeblur":case"afterblur":j=nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=US;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=tT;break;case Gy:case Qy:case Yy:j=$S;break;case Xy:j=rT;break;case"scroll":j=VS;break;case"wheel":j=iT;break;case"copy":case"cut":case"paste":j=HS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Rm}var R=(e&4)!==0,z=!R&&t==="scroll",N=R?_!==null?_+"Capture":null:_;R=[];for(var w=h,A;w!==null;){A=w;var O=A.stateNode;if(A.tag===5&&O!==null&&(A=O,N!==null&&(O=pa(w,N),O!=null&&R.push(Ea(w,O,A)))),z)break;w=w.return}0<R.length&&(_=new j(_,b,null,n,p),g.push({event:_,listeners:R}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",_&&n!==$d&&(b=n.relatedTarget||n.fromElement)&&(Hs(b)||b[$r]))break e;if((j||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,j?(b=n.relatedTarget||n.toElement,j=h,b=b?Hs(b):null,b!==null&&(z=di(b),b!==z||b.tag!==5&&b.tag!==6)&&(b=null)):(j=null,b=h),j!==b)){if(R=Nm,O="onMouseLeave",N="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(R=Rm,O="onPointerLeave",N="onPointerEnter",w="pointer"),z=j==null?_:Pi(j),A=b==null?_:Pi(b),_=new R(O,w+"leave",j,n,p),_.target=z,_.relatedTarget=A,O=null,Hs(p)===h&&(R=new R(N,w+"enter",b,n,p),R.target=A,R.relatedTarget=z,O=R),z=O,j&&b)t:{for(R=j,N=b,w=0,A=R;A;A=Ei(A))w++;for(A=0,O=N;O;O=Ei(O))A++;for(;0<w-A;)R=Ei(R),w--;for(;0<A-w;)N=Ei(N),A--;for(;w--;){if(R===N||N!==null&&R===N.alternate)break t;R=Ei(R),N=Ei(N)}R=null}else R=null;j!==null&&Bm(g,_,j,R,!1),b!==null&&z!==null&&Bm(g,z,b,R,!0)}}e:{if(_=h?Pi(h):window,j=_.nodeName&&_.nodeName.toLowerCase(),j==="select"||j==="input"&&_.type==="file")var $=hT;else if(bm(_))if($y)$=gT;else{$=pT;var K=fT}else(j=_.nodeName)&&j.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&($=mT);if($&&($=$(t,h))){By(g,$,n,p);break e}K&&K(t,_,h),t==="focusout"&&(K=_._wrapperState)&&K.controlled&&_.type==="number"&&Vd(_,"number",_.value)}switch(K=h?Pi(h):window,t){case"focusin":(bm(K)||K.contentEditable==="true")&&(ki=K,Yd=h,ta=null);break;case"focusout":ta=Yd=ki=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,Fm(g,n,p);break;case"selectionchange":if(_T)break;case"keydown":case"keyup":Fm(g,n,p)}var v;if(pf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ai?Uy(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Fy&&n.locale!=="ko"&&(Ai||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ai&&(v=Vy()):(us=p,df="value"in us?us.value:us.textContent,Ai=!0)),K=Sc(h,y),0<K.length&&(y=new Pm(y,t,null,n,p),g.push({event:y,listeners:K}),v?y.data=v:(v=zy(n),v!==null&&(y.data=v)))),(v=aT?lT(t,n):cT(t,n))&&(h=Sc(h,"onBeforeInput"),0<h.length&&(p=new Pm("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:h}),p.data=v))}Zy(g,e)})}function Ea(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=pa(t,n),i!=null&&r.unshift(Ea(t,i,s)),i=pa(t,e),i!=null&&r.push(Ea(t,i,s))),t=t.return}return r}function Ei(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,s?(u=pa(n,i),u!=null&&o.unshift(Ea(n,u,c))):s||(u=pa(n,i),u!=null&&o.push(Ea(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var TT=/\r\n?/g,IT=/\u0000|\uFFFD/g;function $m(t){return(typeof t=="string"?t:""+t).replace(TT,`
`).replace(IT,"")}function bl(t,e,n){if(e=$m(e),$m(t)!==e&&n)throw Error(le(425))}function Tc(){}var Jd=null,Zd=null;function eh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var th=typeof setTimeout=="function"?setTimeout:void 0,CT=typeof clearTimeout=="function"?clearTimeout:void 0,qm=typeof Promise=="function"?Promise:void 0,xT=typeof queueMicrotask=="function"?queueMicrotask:typeof qm<"u"?function(t){return qm.resolve(null).then(t).catch(AT)}:th;function AT(t){setTimeout(function(){throw t})}function ud(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),va(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);va(e)}function vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Hm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fo=Math.random().toString(36).slice(2),_r="__reactFiber$"+fo,Sa="__reactProps$"+fo,$r="__reactContainer$"+fo,nh="__reactEvents$"+fo,kT="__reactListeners$"+fo,NT="__reactHandles$"+fo;function Hs(t){var e=t[_r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$r]||n[_r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Hm(t);t!==null;){if(n=t[_r])return n;t=Hm(t)}return e}t=n,n=t.parentNode}return null}function Ka(t){return t=t[_r]||t[$r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function ou(t){return t[Sa]||null}var rh=[],Ri=-1;function Ds(t){return{current:t}}function Tt(t){0>Ri||(t.current=rh[Ri],rh[Ri]=null,Ri--)}function vt(t,e){Ri++,rh[Ri]=t.current,t.current=e}var As={},Sn=Ds(As),Ln=Ds(!1),Zs=As;function Xi(t,e){var n=t.type.contextTypes;if(!n)return As;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Vn(t){return t=t.childContextTypes,t!=null}function Ic(){Tt(Ln),Tt(Sn)}function Wm(t,e,n){if(Sn.current!==As)throw Error(le(168));vt(Sn,e),vt(Ln,n)}function t_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(le(108,fS(t)||"Unknown",s));return Rt({},n,r)}function Cc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||As,Zs=Sn.current,vt(Sn,t),vt(Ln,Ln.current),!0}function Km(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=t_(t,e,Zs),r.__reactInternalMemoizedMergedChildContext=t,Tt(Ln),Tt(Sn),vt(Sn,t)):Tt(Ln),vt(Ln,n)}var Dr=null,au=!1,dd=!1;function n_(t){Dr===null?Dr=[t]:Dr.push(t)}function PT(t){au=!0,n_(t)}function bs(){if(!dd&&Dr!==null){dd=!0;var t=0,e=lt;try{var n=Dr;for(lt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dr=null,au=!1}catch(s){throw Dr!==null&&(Dr=Dr.slice(t+1)),Ay(af,bs),s}finally{lt=e,dd=!1}}return null}var ji=[],Di=0,xc=null,Ac=0,Xn=[],Jn=0,ei=null,br=1,Mr="";function zs(t,e){ji[Di++]=Ac,ji[Di++]=xc,xc=t,Ac=e}function r_(t,e,n){Xn[Jn++]=br,Xn[Jn++]=Mr,Xn[Jn++]=ei,ei=t;var r=br;t=Mr;var s=32-dr(r)-1;r&=~(1<<s),n+=1;var i=32-dr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,br=1<<32-dr(e)+s|n<<s|r,Mr=i+t}else br=1<<i|n<<s|r,Mr=t}function gf(t){t.return!==null&&(zs(t,1),r_(t,1,0))}function vf(t){for(;t===xc;)xc=ji[--Di],ji[Di]=null,Ac=ji[--Di],ji[Di]=null;for(;t===ei;)ei=Xn[--Jn],Xn[Jn]=null,Mr=Xn[--Jn],Xn[Jn]=null,br=Xn[--Jn],Xn[Jn]=null}var qn=null,Bn=null,At=!1,ur=null;function s_(t,e){var n=er(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Gm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qn=t,Bn=vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qn=t,Bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ei!==null?{id:br,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=er(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qn=t,Bn=null,!0):!1;default:return!1}}function sh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ih(t){if(At){var e=Bn;if(e){var n=e;if(!Gm(t,e)){if(sh(t))throw Error(le(418));e=vs(n.nextSibling);var r=qn;e&&Gm(t,e)?s_(r,n):(t.flags=t.flags&-4097|2,At=!1,qn=t)}}else{if(sh(t))throw Error(le(418));t.flags=t.flags&-4097|2,At=!1,qn=t}}}function Qm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qn=t}function Ml(t){if(t!==qn)return!1;if(!At)return Qm(t),At=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eh(t.type,t.memoizedProps)),e&&(e=Bn)){if(sh(t))throw i_(),Error(le(418));for(;e;)s_(t,e),e=vs(e.nextSibling)}if(Qm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bn=vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bn=null}}else Bn=qn?vs(t.stateNode.nextSibling):null;return!0}function i_(){for(var t=Bn;t;)t=vs(t.nextSibling)}function Ji(){Bn=qn=null,At=!1}function yf(t){ur===null?ur=[t]:ur.push(t)}var RT=Xr.ReactCurrentBatchConfig;function Mo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function Ol(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ym(t){var e=t._init;return e(t._payload)}function o_(t){function e(N,w){if(t){var A=N.deletions;A===null?(N.deletions=[w],N.flags|=16):A.push(w)}}function n(N,w){if(!t)return null;for(;w!==null;)e(N,w),w=w.sibling;return null}function r(N,w){for(N=new Map;w!==null;)w.key!==null?N.set(w.key,w):N.set(w.index,w),w=w.sibling;return N}function s(N,w){return N=Es(N,w),N.index=0,N.sibling=null,N}function i(N,w,A){return N.index=A,t?(A=N.alternate,A!==null?(A=A.index,A<w?(N.flags|=2,w):A):(N.flags|=2,w)):(N.flags|=1048576,w)}function o(N){return t&&N.alternate===null&&(N.flags|=2),N}function c(N,w,A,O){return w===null||w.tag!==6?(w=yd(A,N.mode,O),w.return=N,w):(w=s(w,A),w.return=N,w)}function u(N,w,A,O){var $=A.type;return $===xi?p(N,w,A.props.children,O,A.key):w!==null&&(w.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===ns&&Ym($)===w.type)?(O=s(w,A.props),O.ref=Mo(N,w,A),O.return=N,O):(O=ic(A.type,A.key,A.props,null,N.mode,O),O.ref=Mo(N,w,A),O.return=N,O)}function h(N,w,A,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=_d(A,N.mode,O),w.return=N,w):(w=s(w,A.children||[]),w.return=N,w)}function p(N,w,A,O,$){return w===null||w.tag!==7?(w=Xs(A,N.mode,O,$),w.return=N,w):(w=s(w,A),w.return=N,w)}function g(N,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=yd(""+w,N.mode,A),w.return=N,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Cl:return A=ic(w.type,w.key,w.props,null,N.mode,A),A.ref=Mo(N,null,w),A.return=N,A;case Ci:return w=_d(w,N.mode,A),w.return=N,w;case ns:var O=w._init;return g(N,O(w._payload),A)}if(Bo(w)||Po(w))return w=Xs(w,N.mode,A,null),w.return=N,w;Ol(N,w)}return null}function _(N,w,A,O){var $=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return $!==null?null:c(N,w,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Cl:return A.key===$?u(N,w,A,O):null;case Ci:return A.key===$?h(N,w,A,O):null;case ns:return $=A._init,_(N,w,$(A._payload),O)}if(Bo(A)||Po(A))return $!==null?null:p(N,w,A,O,null);Ol(N,A)}return null}function j(N,w,A,O,$){if(typeof O=="string"&&O!==""||typeof O=="number")return N=N.get(A)||null,c(w,N,""+O,$);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Cl:return N=N.get(O.key===null?A:O.key)||null,u(w,N,O,$);case Ci:return N=N.get(O.key===null?A:O.key)||null,h(w,N,O,$);case ns:var K=O._init;return j(N,w,A,K(O._payload),$)}if(Bo(O)||Po(O))return N=N.get(A)||null,p(w,N,O,$,null);Ol(w,O)}return null}function b(N,w,A,O){for(var $=null,K=null,v=w,y=w=0,T=null;v!==null&&y<A.length;y++){v.index>y?(T=v,v=null):T=v.sibling;var E=_(N,v,A[y],O);if(E===null){v===null&&(v=T);break}t&&v&&E.alternate===null&&e(N,v),w=i(E,w,y),K===null?$=E:K.sibling=E,K=E,v=T}if(y===A.length)return n(N,v),At&&zs(N,y),$;if(v===null){for(;y<A.length;y++)v=g(N,A[y],O),v!==null&&(w=i(v,w,y),K===null?$=v:K.sibling=v,K=v);return At&&zs(N,y),$}for(v=r(N,v);y<A.length;y++)T=j(v,N,y,A[y],O),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?y:T.key),w=i(T,w,y),K===null?$=T:K.sibling=T,K=T);return t&&v.forEach(function(k){return e(N,k)}),At&&zs(N,y),$}function R(N,w,A,O){var $=Po(A);if(typeof $!="function")throw Error(le(150));if(A=$.call(A),A==null)throw Error(le(151));for(var K=$=null,v=w,y=w=0,T=null,E=A.next();v!==null&&!E.done;y++,E=A.next()){v.index>y?(T=v,v=null):T=v.sibling;var k=_(N,v,E.value,O);if(k===null){v===null&&(v=T);break}t&&v&&k.alternate===null&&e(N,v),w=i(k,w,y),K===null?$=k:K.sibling=k,K=k,v=T}if(E.done)return n(N,v),At&&zs(N,y),$;if(v===null){for(;!E.done;y++,E=A.next())E=g(N,E.value,O),E!==null&&(w=i(E,w,y),K===null?$=E:K.sibling=E,K=E);return At&&zs(N,y),$}for(v=r(N,v);!E.done;y++,E=A.next())E=j(v,N,y,E.value,O),E!==null&&(t&&E.alternate!==null&&v.delete(E.key===null?y:E.key),w=i(E,w,y),K===null?$=E:K.sibling=E,K=E);return t&&v.forEach(function(P){return e(N,P)}),At&&zs(N,y),$}function z(N,w,A,O){if(typeof A=="object"&&A!==null&&A.type===xi&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Cl:e:{for(var $=A.key,K=w;K!==null;){if(K.key===$){if($=A.type,$===xi){if(K.tag===7){n(N,K.sibling),w=s(K,A.props.children),w.return=N,N=w;break e}}else if(K.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===ns&&Ym($)===K.type){n(N,K.sibling),w=s(K,A.props),w.ref=Mo(N,K,A),w.return=N,N=w;break e}n(N,K);break}else e(N,K);K=K.sibling}A.type===xi?(w=Xs(A.props.children,N.mode,O,A.key),w.return=N,N=w):(O=ic(A.type,A.key,A.props,null,N.mode,O),O.ref=Mo(N,w,A),O.return=N,N=O)}return o(N);case Ci:e:{for(K=A.key;w!==null;){if(w.key===K)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(N,w.sibling),w=s(w,A.children||[]),w.return=N,N=w;break e}else{n(N,w);break}else e(N,w);w=w.sibling}w=_d(A,N.mode,O),w.return=N,N=w}return o(N);case ns:return K=A._init,z(N,w,K(A._payload),O)}if(Bo(A))return b(N,w,A,O);if(Po(A))return R(N,w,A,O);Ol(N,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(N,w.sibling),w=s(w,A),w.return=N,N=w):(n(N,w),w=yd(A,N.mode,O),w.return=N,N=w),o(N)):n(N,w)}return z}var Zi=o_(!0),a_=o_(!1),kc=Ds(null),Nc=null,bi=null,_f=null;function wf(){_f=bi=Nc=null}function Ef(t){var e=kc.current;Tt(kc),t._currentValue=e}function oh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bi(t,e){Nc=t,_f=bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(On=!0),t.firstContext=null)}function rr(t){var e=t._currentValue;if(_f!==t)if(t={context:t,memoizedValue:e,next:null},bi===null){if(Nc===null)throw Error(le(308));bi=t,Nc.dependencies={lanes:0,firstContext:t}}else bi=bi.next=t;return e}var Ws=null;function Sf(t){Ws===null?Ws=[t]:Ws.push(t)}function l_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Sf(e)):(n.next=s.next,s.next=n),e.interleaved=n,qr(t,r)}function qr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rs=!1;function Tf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ys(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Qe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qr(t,n)}return s=r.interleaved,s===null?(e.next=e,Sf(r)):(e.next=s.next,s.next=e),r.interleaved=e,qr(t,n)}function Zl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}function Xm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pc(t,e,n,r){var s=t.updateQueue;rs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=h:c.next=h,p.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;o=0,p=h=u=null,c=i;do{var _=c.lane,j=c.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:j,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=t,R=c;switch(_=e,j=n,R.tag){case 1:if(b=R.payload,typeof b=="function"){g=b.call(j,g,_);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=R.payload,_=typeof b=="function"?b.call(j,g,_):b,_==null)break e;g=Rt({},g,_);break e;case 2:rs=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[c]:_.push(c))}else j={eventTime:j,lane:_,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(h=p=j,u=g):p=p.next=j,o|=_;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;_=c,c=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(p===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ni|=o,t.lanes=o,t.memoizedState=g}}function Jm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(le(191,s));s.call(r)}}}var Ga={},Sr=Ds(Ga),Ta=Ds(Ga),Ia=Ds(Ga);function Ks(t){if(t===Ga)throw Error(le(174));return t}function If(t,e){switch(vt(Ia,e),vt(Ta,t),vt(Sr,Ga),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ud(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ud(e,t)}Tt(Sr),vt(Sr,e)}function eo(){Tt(Sr),Tt(Ta),Tt(Ia)}function u_(t){Ks(Ia.current);var e=Ks(Sr.current),n=Ud(e,t.type);e!==n&&(vt(Ta,t),vt(Sr,n))}function Cf(t){Ta.current===t&&(Tt(Sr),Tt(Ta))}var Nt=Ds(0);function Rc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hd=[];function xf(){for(var t=0;t<hd.length;t++)hd[t]._workInProgressVersionPrimary=null;hd.length=0}var ec=Xr.ReactCurrentDispatcher,fd=Xr.ReactCurrentBatchConfig,ti=0,Pt=null,Gt=null,tn=null,jc=!1,na=!1,Ca=0,jT=0;function gn(){throw Error(le(321))}function Af(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fr(t[n],e[n]))return!1;return!0}function kf(t,e,n,r,s,i){if(ti=i,Pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ec.current=t===null||t.memoizedState===null?OT:LT,t=n(r,s),na){i=0;do{if(na=!1,Ca=0,25<=i)throw Error(le(301));i+=1,tn=Gt=null,e.updateQueue=null,ec.current=VT,t=n(r,s)}while(na)}if(ec.current=Dc,e=Gt!==null&&Gt.next!==null,ti=0,tn=Gt=Pt=null,jc=!1,e)throw Error(le(300));return t}function Nf(){var t=Ca!==0;return Ca=0,t}function yr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Pt.memoizedState=tn=t:tn=tn.next=t,tn}function sr(){if(Gt===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=Gt.next;var e=tn===null?Pt.memoizedState:tn.next;if(e!==null)tn=e,Gt=t;else{if(t===null)throw Error(le(310));Gt=t,t={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},tn===null?Pt.memoizedState=tn=t:tn=tn.next=t}return tn}function xa(t,e){return typeof e=="function"?e(t):e}function pd(t){var e=sr(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=Gt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,h=i;do{var p=h.lane;if((ti&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=g,o=r):u=u.next=g,Pt.lanes|=p,ni|=p}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=c,fr(r,e.memoizedState)||(On=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pt.lanes|=i,ni|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function md(t){var e=sr(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);fr(i,e.memoizedState)||(On=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function d_(){}function h_(t,e){var n=Pt,r=sr(),s=e(),i=!fr(r.memoizedState,s);if(i&&(r.memoizedState=s,On=!0),r=r.queue,Pf(m_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||tn!==null&&tn.memoizedState.tag&1){if(n.flags|=2048,Aa(9,p_.bind(null,n,r,s,e),void 0,null),nn===null)throw Error(le(349));ti&30||f_(n,e,s)}return s}function f_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function p_(t,e,n,r){e.value=n,e.getSnapshot=r,g_(e)&&v_(t)}function m_(t,e,n){return n(function(){g_(e)&&v_(t)})}function g_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fr(t,n)}catch{return!0}}function v_(t){var e=qr(t,1);e!==null&&hr(e,t,1,-1)}function Zm(t){var e=yr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},e.queue=t,t=t.dispatch=MT.bind(null,Pt,t),[e.memoizedState,t]}function Aa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function y_(){return sr().memoizedState}function tc(t,e,n,r){var s=yr();Pt.flags|=t,s.memoizedState=Aa(1|e,n,void 0,r===void 0?null:r)}function lu(t,e,n,r){var s=sr();r=r===void 0?null:r;var i=void 0;if(Gt!==null){var o=Gt.memoizedState;if(i=o.destroy,r!==null&&Af(r,o.deps)){s.memoizedState=Aa(e,n,i,r);return}}Pt.flags|=t,s.memoizedState=Aa(1|e,n,i,r)}function eg(t,e){return tc(8390656,8,t,e)}function Pf(t,e){return lu(2048,8,t,e)}function __(t,e){return lu(4,2,t,e)}function w_(t,e){return lu(4,4,t,e)}function E_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function S_(t,e,n){return n=n!=null?n.concat([t]):null,lu(4,4,E_.bind(null,e,t),n)}function Rf(){}function T_(t,e){var n=sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Af(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function I_(t,e){var n=sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Af(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function C_(t,e,n){return ti&21?(fr(n,e)||(n=Py(),Pt.lanes|=n,ni|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,On=!0),t.memoizedState=n)}function DT(t,e){var n=lt;lt=n!==0&&4>n?n:4,t(!0);var r=fd.transition;fd.transition={};try{t(!1),e()}finally{lt=n,fd.transition=r}}function x_(){return sr().memoizedState}function bT(t,e,n){var r=ws(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A_(t))k_(e,n);else if(n=l_(t,e,n,r),n!==null){var s=An();hr(n,t,r,s),N_(n,e,r)}}function MT(t,e,n){var r=ws(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A_(t))k_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,fr(c,o)){var u=e.interleaved;u===null?(s.next=s,Sf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=l_(t,e,s,r),n!==null&&(s=An(),hr(n,t,r,s),N_(n,e,r))}}function A_(t){var e=t.alternate;return t===Pt||e!==null&&e===Pt}function k_(t,e){na=jc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function N_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}var Dc={readContext:rr,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useInsertionEffect:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useSyncExternalStore:gn,useId:gn,unstable_isNewReconciler:!1},OT={readContext:rr,useCallback:function(t,e){return yr().memoizedState=[t,e===void 0?null:e],t},useContext:rr,useEffect:eg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tc(4194308,4,E_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tc(4194308,4,t,e)},useInsertionEffect:function(t,e){return tc(4,2,t,e)},useMemo:function(t,e){var n=yr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bT.bind(null,Pt,t),[r.memoizedState,t]},useRef:function(t){var e=yr();return t={current:t},e.memoizedState=t},useState:Zm,useDebugValue:Rf,useDeferredValue:function(t){return yr().memoizedState=t},useTransition:function(){var t=Zm(!1),e=t[0];return t=DT.bind(null,t[1]),yr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pt,s=yr();if(At){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),nn===null)throw Error(le(349));ti&30||f_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,eg(m_.bind(null,r,i,t),[t]),r.flags|=2048,Aa(9,p_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=yr(),e=nn.identifierPrefix;if(At){var n=Mr,r=br;n=(r&~(1<<32-dr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ca++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LT={readContext:rr,useCallback:T_,useContext:rr,useEffect:Pf,useImperativeHandle:S_,useInsertionEffect:__,useLayoutEffect:w_,useMemo:I_,useReducer:pd,useRef:y_,useState:function(){return pd(xa)},useDebugValue:Rf,useDeferredValue:function(t){var e=sr();return C_(e,Gt.memoizedState,t)},useTransition:function(){var t=pd(xa)[0],e=sr().memoizedState;return[t,e]},useMutableSource:d_,useSyncExternalStore:h_,useId:x_,unstable_isNewReconciler:!1},VT={readContext:rr,useCallback:T_,useContext:rr,useEffect:Pf,useImperativeHandle:S_,useInsertionEffect:__,useLayoutEffect:w_,useMemo:I_,useReducer:md,useRef:y_,useState:function(){return md(xa)},useDebugValue:Rf,useDeferredValue:function(t){var e=sr();return Gt===null?e.memoizedState=t:C_(e,Gt.memoizedState,t)},useTransition:function(){var t=md(xa)[0],e=sr().memoizedState;return[t,e]},useMutableSource:d_,useSyncExternalStore:h_,useId:x_,unstable_isNewReconciler:!1};function lr(t,e){if(t&&t.defaultProps){e=Rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ah(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cu={isMounted:function(t){return(t=t._reactInternals)?di(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=An(),s=ws(t),i=Fr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ys(t,i,s),e!==null&&(hr(e,t,s,r),Zl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=An(),s=ws(t),i=Fr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ys(t,i,s),e!==null&&(hr(e,t,s,r),Zl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=An(),r=ws(t),s=Fr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ys(t,s,r),e!==null&&(hr(e,t,r,n),Zl(e,t,r))}};function tg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!_a(n,r)||!_a(s,i):!0}function P_(t,e,n){var r=!1,s=As,i=e.contextType;return typeof i=="object"&&i!==null?i=rr(i):(s=Vn(e)?Zs:Sn.current,r=e.contextTypes,i=(r=r!=null)?Xi(t,s):As),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ng(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cu.enqueueReplaceState(e,e.state,null)}function lh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Tf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rr(i):(i=Vn(e)?Zs:Sn.current,s.context=Xi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ah(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&cu.enqueueReplaceState(s,s.state,null),Pc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function to(t,e){try{var n="",r=e;do n+=hS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function gd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ch(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FT=typeof WeakMap=="function"?WeakMap:Map;function R_(t,e,n){n=Fr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mc||(Mc=!0,_h=r),ch(t,e)},n}function j_(t,e,n){n=Fr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ch(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ch(t,e),typeof r!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function rg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new FT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ZT.bind(null,t,e,n),e.then(t,t))}function sg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ig(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fr(-1,1),e.tag=2,ys(n,e,1))),n.lanes|=1),t)}var UT=Xr.ReactCurrentOwner,On=!1;function xn(t,e,n,r){e.child=t===null?a_(e,null,n,r):Zi(e,t.child,n,r)}function og(t,e,n,r,s){n=n.render;var i=e.ref;return Bi(e,s),r=kf(t,e,n,r,i,s),n=Nf(),t!==null&&!On?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hr(t,e,s)):(At&&n&&gf(e),e.flags|=1,xn(t,e,r,s),e.child)}function ag(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ff(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,D_(t,e,i,r,s)):(t=ic(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_a,n(o,r)&&t.ref===e.ref)return Hr(t,e,s)}return e.flags|=1,t=Es(i,r),t.ref=e.ref,t.return=e,e.child=t}function D_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_a(i,r)&&t.ref===e.ref)if(On=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(On=!0);else return e.lanes=t.lanes,Hr(t,e,s)}return uh(t,e,n,r,s)}function b_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Oi,zn),zn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,vt(Oi,zn),zn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,vt(Oi,zn),zn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,vt(Oi,zn),zn|=r;return xn(t,e,s,n),e.child}function M_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uh(t,e,n,r,s){var i=Vn(n)?Zs:Sn.current;return i=Xi(e,i),Bi(e,s),n=kf(t,e,n,r,i,s),r=Nf(),t!==null&&!On?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hr(t,e,s)):(At&&r&&gf(e),e.flags|=1,xn(t,e,n,s),e.child)}function lg(t,e,n,r,s){if(Vn(n)){var i=!0;Cc(e)}else i=!1;if(Bi(e,s),e.stateNode===null)nc(t,e),P_(e,n,r),lh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=rr(h):(h=Vn(n)?Zs:Sn.current,h=Xi(e,h));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==h)&&ng(e,o,r,h),rs=!1;var _=e.memoizedState;o.state=_,Pc(e,r,o,s),u=e.memoizedState,c!==r||_!==u||Ln.current||rs?(typeof p=="function"&&(ah(e,n,p,r),u=e.memoizedState),(c=rs||tg(e,n,c,r,_,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,c_(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:lr(e.type,c),o.props=h,g=e.pendingProps,_=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rr(u):(u=Vn(n)?Zs:Sn.current,u=Xi(e,u));var j=n.getDerivedStateFromProps;(p=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==g||_!==u)&&ng(e,o,r,u),rs=!1,_=e.memoizedState,o.state=_,Pc(e,r,o,s);var b=e.memoizedState;c!==g||_!==b||Ln.current||rs?(typeof j=="function"&&(ah(e,n,j,r),b=e.memoizedState),(h=rs||tg(e,n,h,r,_,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return dh(t,e,n,r,i,s)}function dh(t,e,n,r,s,i){M_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Km(e,n,!1),Hr(t,e,i);r=e.stateNode,UT.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zi(e,t.child,null,i),e.child=Zi(e,null,c,i)):xn(t,e,c,i),e.memoizedState=r.state,s&&Km(e,n,!0),e.child}function O_(t){var e=t.stateNode;e.pendingContext?Wm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wm(t,e.context,!1),If(t,e.containerInfo)}function cg(t,e,n,r,s){return Ji(),yf(s),e.flags|=256,xn(t,e,n,r),e.child}var hh={dehydrated:null,treeContext:null,retryLane:0};function fh(t){return{baseLanes:t,cachePool:null,transitions:null}}function L_(t,e,n){var r=e.pendingProps,s=Nt.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),vt(Nt,s&1),t===null)return ih(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=hu(o,r,0,null),t=Xs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fh(n),e.memoizedState=hh,t):jf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return zT(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Es(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Es(c,i):(i=Xs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?fh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hh,r}return i=t.child,t=i.sibling,r=Es(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jf(t,e){return e=hu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ll(t,e,n,r){return r!==null&&yf(r),Zi(e,t.child,null,n),t=jf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=gd(Error(le(422))),Ll(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=hu({mode:"visible",children:r.children},s,0,null),i=Xs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Zi(e,t.child,null,o),e.child.memoizedState=fh(o),e.memoizedState=hh,i);if(!(e.mode&1))return Ll(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(le(419)),r=gd(i,r,void 0),Ll(t,e,o,r)}if(c=(o&t.childLanes)!==0,On||c){if(r=nn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qr(t,s),hr(r,t,s,-1))}return Vf(),r=gd(Error(le(421))),Ll(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Bn=vs(s.nextSibling),qn=e,At=!0,ur=null,t!==null&&(Xn[Jn++]=br,Xn[Jn++]=Mr,Xn[Jn++]=ei,br=t.id,Mr=t.overflow,ei=e),e=jf(e,r.children),e.flags|=4096,e)}function ug(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oh(t.return,e,n)}function vd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function V_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xn(t,e,r.children,n),r=Nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ug(t,n,e);else if(t.tag===19)ug(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(vt(Nt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Rc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Rc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vd(e,!0,n,null,i);break;case"together":vd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ni|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=Es(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Es(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BT(t,e,n){switch(e.tag){case 3:O_(e),Ji();break;case 5:u_(e);break;case 1:Vn(e.type)&&Cc(e);break;case 4:If(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;vt(kc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(vt(Nt,Nt.current&1),e.flags|=128,null):n&e.child.childLanes?L_(t,e,n):(vt(Nt,Nt.current&1),t=Hr(t,e,n),t!==null?t.sibling:null);vt(Nt,Nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return V_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),vt(Nt,Nt.current),r)break;return null;case 22:case 23:return e.lanes=0,b_(t,e,n)}return Hr(t,e,n)}var F_,ph,U_,z_;F_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ph=function(){};U_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ks(Sr.current);var i=null;switch(n){case"input":s=Od(t,s),r=Od(t,r),i=[];break;case"select":s=Rt({},s,{value:void 0}),r=Rt({},r,{value:void 0}),i=[];break;case"textarea":s=Fd(t,s),r=Fd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Tc)}zd(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var c=s[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ha.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(c=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ha.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Et("scroll",t),i||c===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};z_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Oo(t,e){if(!At)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $T(t,e,n){var r=e.pendingProps;switch(vf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return Vn(e.type)&&Ic(),vn(e),null;case 3:return r=e.stateNode,eo(),Tt(Ln),Tt(Sn),xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ur!==null&&(Sh(ur),ur=null))),ph(t,e),vn(e),null;case 5:Cf(e);var s=Ks(Ia.current);if(n=e.type,t!==null&&e.stateNode!=null)U_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return vn(e),null}if(t=Ks(Sr.current),Ml(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_r]=e,r[Sa]=i,t=(e.mode&1)!==0,n){case"dialog":Et("cancel",r),Et("close",r);break;case"iframe":case"object":case"embed":Et("load",r);break;case"video":case"audio":for(s=0;s<qo.length;s++)Et(qo[s],r);break;case"source":Et("error",r);break;case"img":case"image":case"link":Et("error",r),Et("load",r);break;case"details":Et("toggle",r);break;case"input":_m(r,i),Et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Et("invalid",r);break;case"textarea":Em(r,i),Et("invalid",r)}zd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,c,t),s=["children",""+c]):ha.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Et("scroll",r)}switch(n){case"input":xl(r),wm(r,i,!0);break;case"textarea":xl(r),Sm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Tc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=my(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_r]=e,t[Sa]=r,F_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bd(n,r),n){case"dialog":Et("cancel",t),Et("close",t),s=r;break;case"iframe":case"object":case"embed":Et("load",t),s=r;break;case"video":case"audio":for(s=0;s<qo.length;s++)Et(qo[s],t);s=r;break;case"source":Et("error",t),s=r;break;case"img":case"image":case"link":Et("error",t),Et("load",t),s=r;break;case"details":Et("toggle",t),s=r;break;case"input":_m(t,r),s=Od(t,r),Et("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Rt({},r,{value:void 0}),Et("invalid",t);break;case"textarea":Em(t,r),s=Fd(t,r),Et("invalid",t);break;default:s=r}zd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?yy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&gy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&fa(t,u):typeof u=="number"&&fa(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ha.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Et("scroll",t):u!=null&&tf(t,i,u,o))}switch(n){case"input":xl(t),wm(t,r,!1);break;case"textarea":xl(t),Sm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Vi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Vi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Tc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(t&&e.stateNode!=null)z_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=Ks(Ia.current),Ks(Sr.current),Ml(e)){if(r=e.stateNode,n=e.memoizedProps,r[_r]=e,(i=r.nodeValue!==n)&&(t=qn,t!==null))switch(t.tag){case 3:bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_r]=e,e.stateNode=r}return vn(e),null;case 13:if(Tt(Nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(At&&Bn!==null&&e.mode&1&&!(e.flags&128))i_(),Ji(),e.flags|=98560,i=!1;else if(i=Ml(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(le(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[_r]=e}else Ji(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),i=!1}else ur!==null&&(Sh(ur),ur=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Nt.current&1?Qt===0&&(Qt=3):Vf())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return eo(),ph(t,e),t===null&&wa(e.stateNode.containerInfo),vn(e),null;case 10:return Ef(e.type._context),vn(e),null;case 17:return Vn(e.type)&&Ic(),vn(e),null;case 19:if(Tt(Nt),i=e.memoizedState,i===null)return vn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Oo(i,!1);else{if(Qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rc(t),o!==null){for(e.flags|=128,Oo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return vt(Nt,Nt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ut()>no&&(e.flags|=128,r=!0,Oo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Rc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!At)return vn(e),null}else 2*Ut()-i.renderingStartTime>no&&n!==1073741824&&(e.flags|=128,r=!0,Oo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ut(),e.sibling=null,n=Nt.current,vt(Nt,r?n&1|2:n&1),e):(vn(e),null);case 22:case 23:return Lf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zn&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function qT(t,e){switch(vf(e),e.tag){case 1:return Vn(e.type)&&Ic(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return eo(),Tt(Ln),Tt(Sn),xf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cf(e),null;case 13:if(Tt(Nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));Ji()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Tt(Nt),null;case 4:return eo(),null;case 10:return Ef(e.type._context),null;case 22:case 23:return Lf(),null;case 24:return null;default:return null}}var Vl=!1,_n=!1,HT=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ot(t,e,r)}else n.current=null}function mh(t,e,n){try{n()}catch(r){Ot(t,e,r)}}var dg=!1;function WT(t,e){if(Jd=wc,t=Wy(),mf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,h=0,p=0,g=t,_=null;t:for(;;){for(var j;g!==n||s!==0&&g.nodeType!==3||(c=o+s),g!==i||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(j=g.firstChild)!==null;)_=g,g=j;for(;;){if(g===t)break t;if(_===n&&++h===s&&(c=o),_===i&&++p===r&&(u=o),(j=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=j}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zd={focusedElem:t,selectionRange:n},wc=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var R=b.memoizedProps,z=b.memoizedState,N=e.stateNode,w=N.getSnapshotBeforeUpdate(e.elementType===e.type?R:lr(e.type,R),z);N.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(O){Ot(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return b=dg,dg=!1,b}function ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&mh(e,n,i)}s=s.next}while(s!==r)}}function uu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function B_(t){var e=t.alternate;e!==null&&(t.alternate=null,B_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_r],delete e[Sa],delete e[nh],delete e[kT],delete e[NT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $_(t){return t.tag===5||t.tag===3||t.tag===4}function hg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Tc));else if(r!==4&&(t=t.child,t!==null))for(vh(t,e,n),t=t.sibling;t!==null;)vh(t,e,n),t=t.sibling}function yh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yh(t,e,n),t=t.sibling;t!==null;)yh(t,e,n),t=t.sibling}var on=null,cr=!1;function es(t,e,n){for(n=n.child;n!==null;)q_(t,e,n),n=n.sibling}function q_(t,e,n){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(nu,n)}catch{}switch(n.tag){case 5:_n||Mi(n,e);case 6:var r=on,s=cr;on=null,es(t,e,n),on=r,cr=s,on!==null&&(cr?(t=on,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):on.removeChild(n.stateNode));break;case 18:on!==null&&(cr?(t=on,n=n.stateNode,t.nodeType===8?ud(t.parentNode,n):t.nodeType===1&&ud(t,n),va(t)):ud(on,n.stateNode));break;case 4:r=on,s=cr,on=n.stateNode.containerInfo,cr=!0,es(t,e,n),on=r,cr=s;break;case 0:case 11:case 14:case 15:if(!_n&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&mh(n,e,o),s=s.next}while(s!==r)}es(t,e,n);break;case 1:if(!_n&&(Mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ot(n,e,c)}es(t,e,n);break;case 21:es(t,e,n);break;case 22:n.mode&1?(_n=(r=_n)||n.memoizedState!==null,es(t,e,n),_n=r):es(t,e,n);break;default:es(t,e,n)}}function fg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HT),e.forEach(function(r){var s=tI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ar(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:on=c.stateNode,cr=!1;break e;case 3:on=c.stateNode.containerInfo,cr=!0;break e;case 4:on=c.stateNode.containerInfo,cr=!0;break e}c=c.return}if(on===null)throw Error(le(160));q_(i,o,s),on=null,cr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Ot(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)H_(e,t),e=e.sibling}function H_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ar(e,t),vr(t),r&4){try{ra(3,t,t.return),uu(3,t)}catch(R){Ot(t,t.return,R)}try{ra(5,t,t.return)}catch(R){Ot(t,t.return,R)}}break;case 1:ar(e,t),vr(t),r&512&&n!==null&&Mi(n,n.return);break;case 5:if(ar(e,t),vr(t),r&512&&n!==null&&Mi(n,n.return),t.flags&32){var s=t.stateNode;try{fa(s,"")}catch(R){Ot(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&fy(s,i),Bd(c,o);var h=Bd(c,i);for(o=0;o<u.length;o+=2){var p=u[o],g=u[o+1];p==="style"?yy(s,g):p==="dangerouslySetInnerHTML"?gy(s,g):p==="children"?fa(s,g):tf(s,p,g,h)}switch(c){case"input":Ld(s,i);break;case"textarea":py(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var j=i.value;j!=null?Vi(s,!!i.multiple,j,!1):_!==!!i.multiple&&(i.defaultValue!=null?Vi(s,!!i.multiple,i.defaultValue,!0):Vi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Sa]=i}catch(R){Ot(t,t.return,R)}}break;case 6:if(ar(e,t),vr(t),r&4){if(t.stateNode===null)throw Error(le(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Ot(t,t.return,R)}}break;case 3:if(ar(e,t),vr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{va(e.containerInfo)}catch(R){Ot(t,t.return,R)}break;case 4:ar(e,t),vr(t);break;case 13:ar(e,t),vr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Mf=Ut())),r&4&&fg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(_n=(h=_n)||p,ar(e,t),_n=h):ar(e,t),vr(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(_e=t,p=t.child;p!==null;){for(g=_e=p;_e!==null;){switch(_=_e,j=_.child,_.tag){case 0:case 11:case 14:case 15:ra(4,_,_.return);break;case 1:Mi(_,_.return);var b=_.stateNode;if(typeof b.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(R){Ot(r,n,R)}}break;case 5:Mi(_,_.return);break;case 22:if(_.memoizedState!==null){mg(g);continue}}j!==null?(j.return=_,_e=j):mg(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=vy("display",o))}catch(R){Ot(t,t.return,R)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(R){Ot(t,t.return,R)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ar(e,t),vr(t),r&4&&fg(t);break;case 21:break;default:ar(e,t),vr(t)}}function vr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($_(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fa(s,""),r.flags&=-33);var i=hg(t);yh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=hg(t);vh(t,c,o);break;default:throw Error(le(161))}}catch(u){Ot(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function KT(t,e,n){_e=t,W_(t)}function W_(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var s=_e,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Vl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||_n;c=Vl;var h=_n;if(Vl=o,(_n=u)&&!h)for(_e=s;_e!==null;)o=_e,u=o.child,o.tag===22&&o.memoizedState!==null?gg(s):u!==null?(u.return=o,_e=u):gg(s);for(;i!==null;)_e=i,W_(i),i=i.sibling;_e=s,Vl=c,_n=h}pg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,_e=i):pg(t)}}function pg(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_n||uu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_n)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:lr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Jm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Jm(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&va(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}_n||e.flags&512&&gh(e)}catch(_){Ot(e,e.return,_)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function mg(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function gg(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uu(4,e)}catch(u){Ot(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ot(e,s,u)}}var i=e.return;try{gh(e)}catch(u){Ot(e,i,u)}break;case 5:var o=e.return;try{gh(e)}catch(u){Ot(e,o,u)}}}catch(u){Ot(e,e.return,u)}if(e===t){_e=null;break}var c=e.sibling;if(c!==null){c.return=e.return,_e=c;break}_e=e.return}}var GT=Math.ceil,bc=Xr.ReactCurrentDispatcher,Df=Xr.ReactCurrentOwner,tr=Xr.ReactCurrentBatchConfig,Qe=0,nn=null,qt=null,cn=0,zn=0,Oi=Ds(0),Qt=0,ka=null,ni=0,du=0,bf=0,sa=null,Dn=null,Mf=0,no=1/0,jr=null,Mc=!1,_h=null,_s=null,Fl=!1,ds=null,Oc=0,ia=0,wh=null,rc=-1,sc=0;function An(){return Qe&6?Ut():rc!==-1?rc:rc=Ut()}function ws(t){return t.mode&1?Qe&2&&cn!==0?cn&-cn:RT.transition!==null?(sc===0&&(sc=Py()),sc):(t=lt,t!==0||(t=window.event,t=t===void 0?16:Ly(t.type)),t):1}function hr(t,e,n,r){if(50<ia)throw ia=0,wh=null,Error(le(185));Ha(t,n,r),(!(Qe&2)||t!==nn)&&(t===nn&&(!(Qe&2)&&(du|=n),Qt===4&&is(t,cn)),Fn(t,r),n===1&&Qe===0&&!(e.mode&1)&&(no=Ut()+500,au&&bs()))}function Fn(t,e){var n=t.callbackNode;RS(t,e);var r=_c(t,t===nn?cn:0);if(r===0)n!==null&&Cm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cm(n),e===1)t.tag===0?PT(vg.bind(null,t)):n_(vg.bind(null,t)),xT(function(){!(Qe&6)&&bs()}),n=null;else{switch(Ry(r)){case 1:n=af;break;case 4:n=ky;break;case 16:n=yc;break;case 536870912:n=Ny;break;default:n=yc}n=e0(n,K_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function K_(t,e){if(rc=-1,sc=0,Qe&6)throw Error(le(327));var n=t.callbackNode;if($i()&&t.callbackNode!==n)return null;var r=_c(t,t===nn?cn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lc(t,r);else{e=r;var s=Qe;Qe|=2;var i=Q_();(nn!==t||cn!==e)&&(jr=null,no=Ut()+500,Ys(t,e));do try{XT();break}catch(c){G_(t,c)}while(!0);wf(),bc.current=i,Qe=s,qt!==null?e=0:(nn=null,cn=0,e=Qt)}if(e!==0){if(e===2&&(s=Kd(t),s!==0&&(r=s,e=Eh(t,s))),e===1)throw n=ka,Ys(t,0),is(t,r),Fn(t,Ut()),n;if(e===6)is(t,r);else{if(s=t.current.alternate,!(r&30)&&!QT(s)&&(e=Lc(t,r),e===2&&(i=Kd(t),i!==0&&(r=i,e=Eh(t,i))),e===1))throw n=ka,Ys(t,0),is(t,r),Fn(t,Ut()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:Bs(t,Dn,jr);break;case 3:if(is(t,r),(r&130023424)===r&&(e=Mf+500-Ut(),10<e)){if(_c(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){An(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=th(Bs.bind(null,t,Dn,jr),e);break}Bs(t,Dn,jr);break;case 4:if(is(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-dr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GT(r/1960))-r,10<r){t.timeoutHandle=th(Bs.bind(null,t,Dn,jr),r);break}Bs(t,Dn,jr);break;case 5:Bs(t,Dn,jr);break;default:throw Error(le(329))}}}return Fn(t,Ut()),t.callbackNode===n?K_.bind(null,t):null}function Eh(t,e){var n=sa;return t.current.memoizedState.isDehydrated&&(Ys(t,e).flags|=256),t=Lc(t,e),t!==2&&(e=Dn,Dn=n,e!==null&&Sh(e)),t}function Sh(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function QT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!fr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function is(t,e){for(e&=~bf,e&=~du,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dr(e),r=1<<n;t[n]=-1,e&=~r}}function vg(t){if(Qe&6)throw Error(le(327));$i();var e=_c(t,0);if(!(e&1))return Fn(t,Ut()),null;var n=Lc(t,e);if(t.tag!==0&&n===2){var r=Kd(t);r!==0&&(e=r,n=Eh(t,r))}if(n===1)throw n=ka,Ys(t,0),is(t,e),Fn(t,Ut()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bs(t,Dn,jr),Fn(t,Ut()),null}function Of(t,e){var n=Qe;Qe|=1;try{return t(e)}finally{Qe=n,Qe===0&&(no=Ut()+500,au&&bs())}}function ri(t){ds!==null&&ds.tag===0&&!(Qe&6)&&$i();var e=Qe;Qe|=1;var n=tr.transition,r=lt;try{if(tr.transition=null,lt=1,t)return t()}finally{lt=r,tr.transition=n,Qe=e,!(Qe&6)&&bs()}}function Lf(){zn=Oi.current,Tt(Oi)}function Ys(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,CT(n)),qt!==null)for(n=qt.return;n!==null;){var r=n;switch(vf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ic();break;case 3:eo(),Tt(Ln),Tt(Sn),xf();break;case 5:Cf(r);break;case 4:eo();break;case 13:Tt(Nt);break;case 19:Tt(Nt);break;case 10:Ef(r.type._context);break;case 22:case 23:Lf()}n=n.return}if(nn=t,qt=t=Es(t.current,null),cn=zn=e,Qt=0,ka=null,bf=du=ni=0,Dn=sa=null,Ws!==null){for(e=0;e<Ws.length;e++)if(n=Ws[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ws=null}return t}function G_(t,e){do{var n=qt;try{if(wf(),ec.current=Dc,jc){for(var r=Pt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jc=!1}if(ti=0,tn=Gt=Pt=null,na=!1,Ca=0,Df.current=null,n===null||n.return===null){Qt=1,ka=e,qt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=cn,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=c,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var j=sg(o);if(j!==null){j.flags&=-257,ig(j,o,c,i,e),j.mode&1&&rg(i,h,e),e=j,u=h;var b=e.updateQueue;if(b===null){var R=new Set;R.add(u),e.updateQueue=R}else b.add(u);break e}else{if(!(e&1)){rg(i,h,e),Vf();break e}u=Error(le(426))}}else if(At&&c.mode&1){var z=sg(o);if(z!==null){!(z.flags&65536)&&(z.flags|=256),ig(z,o,c,i,e),yf(to(u,c));break e}}i=u=to(u,c),Qt!==4&&(Qt=2),sa===null?sa=[i]:sa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var N=R_(i,u,e);Xm(i,N);break e;case 1:c=u;var w=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(_s===null||!_s.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=j_(i,c,e);Xm(i,O);break e}}i=i.return}while(i!==null)}X_(n)}catch($){e=$,qt===n&&n!==null&&(qt=n=n.return);continue}break}while(!0)}function Q_(){var t=bc.current;return bc.current=Dc,t===null?Dc:t}function Vf(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),nn===null||!(ni&268435455)&&!(du&268435455)||is(nn,cn)}function Lc(t,e){var n=Qe;Qe|=2;var r=Q_();(nn!==t||cn!==e)&&(jr=null,Ys(t,e));do try{YT();break}catch(s){G_(t,s)}while(!0);if(wf(),Qe=n,bc.current=r,qt!==null)throw Error(le(261));return nn=null,cn=0,Qt}function YT(){for(;qt!==null;)Y_(qt)}function XT(){for(;qt!==null&&!SS();)Y_(qt)}function Y_(t){var e=Z_(t.alternate,t,zn);t.memoizedProps=t.pendingProps,e===null?X_(t):qt=e,Df.current=null}function X_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qT(n,e),n!==null){n.flags&=32767,qt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qt=6,qt=null;return}}else if(n=$T(n,e,zn),n!==null){qt=n;return}if(e=e.sibling,e!==null){qt=e;return}qt=e=t}while(e!==null);Qt===0&&(Qt=5)}function Bs(t,e,n){var r=lt,s=tr.transition;try{tr.transition=null,lt=1,JT(t,e,n,r)}finally{tr.transition=s,lt=r}return null}function JT(t,e,n,r){do $i();while(ds!==null);if(Qe&6)throw Error(le(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jS(t,i),t===nn&&(qt=nn=null,cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,e0(yc,function(){return $i(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tr.transition,tr.transition=null;var o=lt;lt=1;var c=Qe;Qe|=4,Df.current=null,WT(t,n),H_(n,t),yT(Zd),wc=!!Jd,Zd=Jd=null,t.current=n,KT(n),TS(),Qe=c,lt=o,tr.transition=i}else t.current=n;if(Fl&&(Fl=!1,ds=t,Oc=s),i=t.pendingLanes,i===0&&(_s=null),xS(n.stateNode),Fn(t,Ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mc)throw Mc=!1,t=_h,_h=null,t;return Oc&1&&t.tag!==0&&$i(),i=t.pendingLanes,i&1?t===wh?ia++:(ia=0,wh=t):ia=0,bs(),null}function $i(){if(ds!==null){var t=Ry(Oc),e=tr.transition,n=lt;try{if(tr.transition=null,lt=16>t?16:t,ds===null)var r=!1;else{if(t=ds,ds=null,Oc=0,Qe&6)throw Error(le(331));var s=Qe;for(Qe|=4,_e=t.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(_e=h;_e!==null;){var p=_e;switch(p.tag){case 0:case 11:case 15:ra(8,p,i)}var g=p.child;if(g!==null)g.return=p,_e=g;else for(;_e!==null;){p=_e;var _=p.sibling,j=p.return;if(B_(p),p===h){_e=null;break}if(_!==null){_.return=j,_e=_;break}_e=j}}}var b=i.alternate;if(b!==null){var R=b.child;if(R!==null){b.child=null;do{var z=R.sibling;R.sibling=null,R=z}while(R!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ra(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,_e=N;break e}_e=i.return}}var w=t.current;for(_e=w;_e!==null;){o=_e;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,_e=A;else e:for(o=w;_e!==null;){if(c=_e,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:uu(9,c)}}catch($){Ot(c,c.return,$)}if(c===o){_e=null;break e}var O=c.sibling;if(O!==null){O.return=c.return,_e=O;break e}_e=c.return}}if(Qe=s,bs(),Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(nu,t)}catch{}r=!0}return r}finally{lt=n,tr.transition=e}}return!1}function yg(t,e,n){e=to(n,e),e=R_(t,e,1),t=ys(t,e,1),e=An(),t!==null&&(Ha(t,1,e),Fn(t,e))}function Ot(t,e,n){if(t.tag===3)yg(t,t,n);else for(;e!==null;){if(e.tag===3){yg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_s===null||!_s.has(r))){t=to(n,t),t=j_(e,t,1),e=ys(e,t,1),t=An(),e!==null&&(Ha(e,1,t),Fn(e,t));break}}e=e.return}}function ZT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=An(),t.pingedLanes|=t.suspendedLanes&n,nn===t&&(cn&n)===n&&(Qt===4||Qt===3&&(cn&130023424)===cn&&500>Ut()-Mf?Ys(t,0):bf|=n),Fn(t,e)}function J_(t,e){e===0&&(t.mode&1?(e=Nl,Nl<<=1,!(Nl&130023424)&&(Nl=4194304)):e=1);var n=An();t=qr(t,e),t!==null&&(Ha(t,e,n),Fn(t,n))}function eI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),J_(t,n)}function tI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),J_(t,n)}var Z_;Z_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ln.current)On=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return On=!1,BT(t,e,n);On=!!(t.flags&131072)}else On=!1,At&&e.flags&1048576&&r_(e,Ac,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nc(t,e),t=e.pendingProps;var s=Xi(e,Sn.current);Bi(e,n),s=kf(null,e,r,t,s,n);var i=Nf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vn(r)?(i=!0,Cc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tf(e),s.updater=cu,e.stateNode=s,s._reactInternals=e,lh(e,r,t,n),e=dh(null,e,r,!0,i,n)):(e.tag=0,At&&i&&gf(e),xn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rI(r),t=lr(r,t),s){case 0:e=uh(null,e,r,t,n);break e;case 1:e=lg(null,e,r,t,n);break e;case 11:e=og(null,e,r,t,n);break e;case 14:e=ag(null,e,r,lr(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),uh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),lg(t,e,r,s,n);case 3:e:{if(O_(e),t===null)throw Error(le(387));r=e.pendingProps,i=e.memoizedState,s=i.element,c_(t,e),Pc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=to(Error(le(423)),e),e=cg(t,e,r,n,s);break e}else if(r!==s){s=to(Error(le(424)),e),e=cg(t,e,r,n,s);break e}else for(Bn=vs(e.stateNode.containerInfo.firstChild),qn=e,At=!0,ur=null,n=a_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ji(),r===s){e=Hr(t,e,n);break e}xn(t,e,r,n)}e=e.child}return e;case 5:return u_(e),t===null&&ih(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,eh(r,s)?o=null:i!==null&&eh(r,i)&&(e.flags|=32),M_(t,e),xn(t,e,o,n),e.child;case 6:return t===null&&ih(e),null;case 13:return L_(t,e,n);case 4:return If(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zi(e,null,r,n):xn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),og(t,e,r,s,n);case 7:return xn(t,e,e.pendingProps,n),e.child;case 8:return xn(t,e,e.pendingProps.children,n),e.child;case 12:return xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,vt(kc,r._currentValue),r._currentValue=o,i!==null)if(fr(i.value,o)){if(i.children===s.children&&!Ln.current){e=Hr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Fr(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),oh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(le(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),oh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}xn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Bi(e,n),s=rr(s),r=r(s),e.flags|=1,xn(t,e,r,n),e.child;case 14:return r=e.type,s=lr(r,e.pendingProps),s=lr(r.type,s),ag(t,e,r,s,n);case 15:return D_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),nc(t,e),e.tag=1,Vn(r)?(t=!0,Cc(e)):t=!1,Bi(e,n),P_(e,r,s),lh(e,r,s,n),dh(null,e,r,!0,t,n);case 19:return V_(t,e,n);case 22:return b_(t,e,n)}throw Error(le(156,e.tag))};function e0(t,e){return Ay(t,e)}function nI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(t,e,n,r){return new nI(t,e,n,r)}function Ff(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rI(t){if(typeof t=="function")return Ff(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rf)return 11;if(t===sf)return 14}return 2}function Es(t,e){var n=t.alternate;return n===null?(n=er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ic(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ff(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xi:return Xs(n.children,s,i,e);case nf:o=8,s|=8;break;case jd:return t=er(12,n,e,s|2),t.elementType=jd,t.lanes=i,t;case Dd:return t=er(13,n,e,s),t.elementType=Dd,t.lanes=i,t;case bd:return t=er(19,n,e,s),t.elementType=bd,t.lanes=i,t;case uy:return hu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ly:o=10;break e;case cy:o=9;break e;case rf:o=11;break e;case sf:o=14;break e;case ns:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=er(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xs(t,e,n,r){return t=er(7,t,r,e),t.lanes=n,t}function hu(t,e,n,r){return t=er(22,t,r,e),t.elementType=uy,t.lanes=n,t.stateNode={isHidden:!1},t}function yd(t,e,n){return t=er(6,t,null,e),t.lanes=n,t}function _d(t,e,n){return e=er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zu(0),this.expirationTimes=Zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uf(t,e,n,r,s,i,o,c,u){return t=new sI(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=er(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tf(i),t}function iI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ci,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function t0(t){if(!t)return As;t=t._reactInternals;e:{if(di(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Vn(n))return t_(t,n,e)}return e}function n0(t,e,n,r,s,i,o,c,u){return t=Uf(n,r,!0,t,s,i,o,c,u),t.context=t0(null),n=t.current,r=An(),s=ws(n),i=Fr(r,s),i.callback=e??null,ys(n,i,s),t.current.lanes=s,Ha(t,s,r),Fn(t,r),t}function fu(t,e,n,r){var s=e.current,i=An(),o=ws(s);return n=t0(n),e.context===null?e.context=n:e.pendingContext=n,e=Fr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ys(s,e,o),t!==null&&(hr(t,s,o,i),Zl(t,s,o)),o}function Vc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _g(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zf(t,e){_g(t,e),(t=t.alternate)&&_g(t,e)}function oI(){return null}var r0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bf(t){this._internalRoot=t}pu.prototype.render=Bf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));fu(t,e,null,null)};pu.prototype.unmount=Bf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ri(function(){fu(null,t,null,null)}),e[$r]=null}};function pu(t){this._internalRoot=t}pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=by();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ss.length&&e!==0&&e<ss[n].priority;n++);ss.splice(n,0,t),n===0&&Oy(t)}};function $f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wg(){}function aI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Vc(o);i.call(h)}}var o=n0(e,r,t,0,null,!1,!1,"",wg);return t._reactRootContainer=o,t[$r]=o.current,wa(t.nodeType===8?t.parentNode:t),ri(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var h=Vc(u);c.call(h)}}var u=Uf(t,0,!1,null,null,!1,!1,"",wg);return t._reactRootContainer=u,t[$r]=u.current,wa(t.nodeType===8?t.parentNode:t),ri(function(){fu(e,u,n,r)}),u}function gu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Vc(o);c.call(u)}}fu(e,o,t,s)}else o=aI(n,e,t,s,r);return Vc(o)}jy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$o(e.pendingLanes);n!==0&&(lf(e,n|1),Fn(e,Ut()),!(Qe&6)&&(no=Ut()+500,bs()))}break;case 13:ri(function(){var r=qr(t,1);if(r!==null){var s=An();hr(r,t,1,s)}}),zf(t,1)}};cf=function(t){if(t.tag===13){var e=qr(t,134217728);if(e!==null){var n=An();hr(e,t,134217728,n)}zf(t,134217728)}};Dy=function(t){if(t.tag===13){var e=ws(t),n=qr(t,e);if(n!==null){var r=An();hr(n,t,e,r)}zf(t,e)}};by=function(){return lt};My=function(t,e){var n=lt;try{return lt=t,e()}finally{lt=n}};qd=function(t,e,n){switch(e){case"input":if(Ld(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ou(r);if(!s)throw Error(le(90));hy(r),Ld(r,s)}}}break;case"textarea":py(t,n);break;case"select":e=n.value,e!=null&&Vi(t,!!n.multiple,e,!1)}};Ey=Of;Sy=ri;var lI={usingClientEntryPoint:!1,Events:[Ka,Pi,ou,_y,wy,Of]},Lo={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cI={bundleType:Lo.bundleType,version:Lo.version,rendererPackageName:Lo.rendererPackageName,rendererConfig:Lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cy(t),t===null?null:t.stateNode},findFiberByHostInstance:Lo.findFiberByHostInstance||oI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{nu=Ul.inject(cI),Er=Ul}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lI;Kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$f(e))throw Error(le(200));return iI(t,e,null,n)};Kn.createRoot=function(t,e){if(!$f(t))throw Error(le(299));var n=!1,r="",s=r0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uf(t,1,!1,null,null,n,!1,r,s),t[$r]=e.current,wa(t.nodeType===8?t.parentNode:t),new Bf(e)};Kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=Cy(e),t=t===null?null:t.stateNode,t};Kn.flushSync=function(t){return ri(t)};Kn.hydrate=function(t,e,n){if(!mu(e))throw Error(le(200));return gu(null,t,e,!0,n)};Kn.hydrateRoot=function(t,e,n){if(!$f(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=r0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=n0(e,null,t,1,n??null,s,!1,i,o),t[$r]=e.current,wa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new pu(e)};Kn.render=function(t,e,n){if(!mu(e))throw Error(le(200));return gu(null,t,e,!1,n)};Kn.unmountComponentAtNode=function(t){if(!mu(t))throw Error(le(40));return t._reactRootContainer?(ri(function(){gu(null,null,t,!1,function(){t._reactRootContainer=null,t[$r]=null})}),!0):!1};Kn.unstable_batchedUpdates=Of;Kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mu(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return gu(t,e,n,!1,r)};Kn.version="18.3.1-next-f1338f8080-20240426";function s0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s0)}catch(t){console.error(t)}}s0(),sy.exports=Kn;var uI=sy.exports,i0,Eg=uI;i0=Eg.createRoot,Eg.hydrateRoot;var Sg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},a0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,g=(i&3)<<4|c>>4;let _=(c&15)<<2|h>>6,j=h&63;u||(j=64,o||(_=64)),r.push(n[p],n[g],n[_],n[j])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||g==null)throw new hI;const _=i<<2|c>>4;if(r.push(_),h!==64){const j=c<<4&240|h>>2;if(r.push(j),g!==64){const b=h<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fI=function(t){const e=o0(t);return a0.encodeByteArray(e,!0)},l0=function(t){return fI(t).replace(/\./g,"")},c0=function(t){try{return a0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=()=>pI().__FIREBASE_DEFAULTS__,gI=()=>{if(typeof process>"u"||typeof Sg>"u")return;const t=Sg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&c0(t[1]);return e&&JSON.parse(e)},vu=()=>{try{return mI()||gI()||vI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},u0=t=>{var e,n;return(n=(e=vu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yI=t=>{const e=u0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},d0=()=>{var t;return(t=vu())===null||t===void 0?void 0:t.config},h0=t=>{var e;return(e=vu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function EI(){var t;const e=(t=vu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function II(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CI(){const t=Tn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xI(){return!EI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AI(){try{return typeof indexedDB=="object"}catch{return!1}}function kI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="FirebaseError";class Nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NI,Object.setPrototypeOf(this,Nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qa.prototype.create)}}class Qa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?PI(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Nr(s,c,r)}}function PI(t,e){return t.replace(RI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const RI=/\{\$([^}]+)}/g;function jI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Na(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Tg(i)&&Tg(o)){if(!Na(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Tg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ho(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Wo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DI(t,e){const n=new bI(t,e);return n.subscribe.bind(n)}class bI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=wd),s.error===void 0&&(s.error=wd),s.complete===void 0&&(s.complete=wd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class ks{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _I;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VI(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LI(t){return t===$s?void 0:t}function VI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const UI={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},zI=qe.INFO,BI={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},$I=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=BI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qf{constructor(e){this.name=e,this._logLevel=zI,this._logHandler=$I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const qI=(t,e)=>e.some(n=>t instanceof n);let Ig,Cg;function HI(){return Ig||(Ig=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WI(){return Cg||(Cg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const f0=new WeakMap,Th=new WeakMap,p0=new WeakMap,Ed=new WeakMap,Hf=new WeakMap;function KI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ss(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&f0.set(n,t)}).catch(()=>{}),Hf.set(e,t),e}function GI(t){if(Th.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Th.set(t,e)}let Ih={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Th.get(t);if(e==="objectStoreNames")return t.objectStoreNames||p0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ss(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QI(t){Ih=t(Ih)}function YI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Sd(this),e,...n);return p0.set(r,e.sort?e.sort():[e]),Ss(r)}:WI().includes(t)?function(...e){return t.apply(Sd(this),e),Ss(f0.get(this))}:function(...e){return Ss(t.apply(Sd(this),e))}}function XI(t){return typeof t=="function"?YI(t):(t instanceof IDBTransaction&&GI(t),qI(t,HI())?new Proxy(t,Ih):t)}function Ss(t){if(t instanceof IDBRequest)return KI(t);if(Ed.has(t))return Ed.get(t);const e=XI(t);return e!==t&&(Ed.set(t,e),Hf.set(e,t)),e}const Sd=t=>Hf.get(t);function JI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Ss(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ss(o.result),u.oldVersion,u.newVersion,Ss(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const ZI=["get","getKey","getAll","getAllKeys","count"],e1=["put","add","delete","clear"],Td=new Map;function xg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Td.get(e))return Td.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=e1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ZI.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return Td.set(e,i),i}QI(t=>({...t,get:(e,n,r)=>xg(e,n)||t.get(e,n,r),has:(e,n)=>!!xg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(n1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function n1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ch="@firebase/app",Ag="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new qf("@firebase/app"),r1="@firebase/app-compat",s1="@firebase/analytics-compat",i1="@firebase/analytics",o1="@firebase/app-check-compat",a1="@firebase/app-check",l1="@firebase/auth",c1="@firebase/auth-compat",u1="@firebase/database",d1="@firebase/data-connect",h1="@firebase/database-compat",f1="@firebase/functions",p1="@firebase/functions-compat",m1="@firebase/installations",g1="@firebase/installations-compat",v1="@firebase/messaging",y1="@firebase/messaging-compat",_1="@firebase/performance",w1="@firebase/performance-compat",E1="@firebase/remote-config",S1="@firebase/remote-config-compat",T1="@firebase/storage",I1="@firebase/storage-compat",C1="@firebase/firestore",x1="@firebase/vertexai-preview",A1="@firebase/firestore-compat",k1="firebase",N1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh="[DEFAULT]",P1={[Ch]:"fire-core",[r1]:"fire-core-compat",[i1]:"fire-analytics",[s1]:"fire-analytics-compat",[a1]:"fire-app-check",[o1]:"fire-app-check-compat",[l1]:"fire-auth",[c1]:"fire-auth-compat",[u1]:"fire-rtdb",[d1]:"fire-data-connect",[h1]:"fire-rtdb-compat",[f1]:"fire-fn",[p1]:"fire-fn-compat",[m1]:"fire-iid",[g1]:"fire-iid-compat",[v1]:"fire-fcm",[y1]:"fire-fcm-compat",[_1]:"fire-perf",[w1]:"fire-perf-compat",[E1]:"fire-rc",[S1]:"fire-rc-compat",[T1]:"fire-gcs",[I1]:"fire-gcs-compat",[C1]:"fire-fst",[A1]:"fire-fst-compat",[x1]:"fire-vertex","fire-js":"fire-js",[k1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new Map,R1=new Map,Ah=new Map;function kg(t,e){try{t.container.addComponent(e)}catch(n){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function si(t){const e=t.name;if(Ah.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;Ah.set(e,t);for(const n of Fc.values())kg(n,t);for(const n of R1.values())kg(n,t);return!0}function yu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new Qa("app","Firebase",j1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=N1;function m0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ts.create("bad-app-name",{appName:String(s)});if(n||(n=d0()),!n)throw Ts.create("no-options");const i=Fc.get(s);if(i){if(Na(n,i.options)&&Na(r,i.config))return i;throw Ts.create("duplicate-app",{appName:s})}const o=new FI(s);for(const u of Ah.values())o.addComponent(u);const c=new D1(n,r,o);return Fc.set(s,c),c}function g0(t=xh){const e=Fc.get(t);if(!e&&t===xh&&d0())return m0();if(!e)throw Ts.create("no-app",{appName:t});return e}function Tr(t,e,n){var r;let s=(r=P1[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(c.join(" "));return}si(new ks(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firebase-heartbeat-database",M1=1,Pa="firebase-heartbeat-store";let Id=null;function v0(){return Id||(Id=JI(b1,M1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ts.create("idb-open",{originalErrorMessage:t.message})})),Id}async function O1(t){try{const n=(await v0()).transaction(Pa),r=await n.objectStore(Pa).get(y0(t));return await n.done,r}catch(e){if(e instanceof Nr)Wr.warn(e.message);else{const n=Ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wr.warn(n.message)}}}async function Ng(t,e){try{const r=(await v0()).transaction(Pa,"readwrite");await r.objectStore(Pa).put(e,y0(t)),await r.done}catch(n){if(n instanceof Nr)Wr.warn(n.message);else{const r=Ts.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wr.warn(r.message)}}}function y0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=1024,V1=30*24*60*60*1e3;class F1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new z1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Pg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=V1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Pg(),{heartbeatsToSend:r,unsentEntries:s}=U1(this._heartbeatsCache.heartbeats),i=l0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Wr.warn(n),""}}}function Pg(){return new Date().toISOString().substring(0,10)}function U1(t,e=L1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Rg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class z1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AI()?kI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await O1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Rg(t){return l0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t){si(new ks("platform-logger",e=>new t1(e),"PRIVATE")),si(new ks("heartbeat",e=>new F1(e),"PRIVATE")),Tr(Ch,Ag,t),Tr(Ch,Ag,"esm2017"),Tr("fire-js","")}B1("");var $1="firebase",q1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr($1,q1,"app");var jg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Js,_0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function T(){}T.prototype=y.prototype,v.D=y.prototype,v.prototype=new T,v.prototype.constructor=v,v.C=function(E,k,P){for(var I=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)I[Ce-2]=arguments[Ce];return y.prototype[k].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,T){T||(T=0);var E=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)E[k]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(k=0;16>k;++k)E[k]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=v.g[0],T=v.g[1],k=v.g[2];var P=v.g[3],I=y+(P^T&(k^P))+E[0]+3614090360&4294967295;y=T+(I<<7&4294967295|I>>>25),I=P+(k^y&(T^k))+E[1]+3905402710&4294967295,P=y+(I<<12&4294967295|I>>>20),I=k+(T^P&(y^T))+E[2]+606105819&4294967295,k=P+(I<<17&4294967295|I>>>15),I=T+(y^k&(P^y))+E[3]+3250441966&4294967295,T=k+(I<<22&4294967295|I>>>10),I=y+(P^T&(k^P))+E[4]+4118548399&4294967295,y=T+(I<<7&4294967295|I>>>25),I=P+(k^y&(T^k))+E[5]+1200080426&4294967295,P=y+(I<<12&4294967295|I>>>20),I=k+(T^P&(y^T))+E[6]+2821735955&4294967295,k=P+(I<<17&4294967295|I>>>15),I=T+(y^k&(P^y))+E[7]+4249261313&4294967295,T=k+(I<<22&4294967295|I>>>10),I=y+(P^T&(k^P))+E[8]+1770035416&4294967295,y=T+(I<<7&4294967295|I>>>25),I=P+(k^y&(T^k))+E[9]+2336552879&4294967295,P=y+(I<<12&4294967295|I>>>20),I=k+(T^P&(y^T))+E[10]+4294925233&4294967295,k=P+(I<<17&4294967295|I>>>15),I=T+(y^k&(P^y))+E[11]+2304563134&4294967295,T=k+(I<<22&4294967295|I>>>10),I=y+(P^T&(k^P))+E[12]+1804603682&4294967295,y=T+(I<<7&4294967295|I>>>25),I=P+(k^y&(T^k))+E[13]+4254626195&4294967295,P=y+(I<<12&4294967295|I>>>20),I=k+(T^P&(y^T))+E[14]+2792965006&4294967295,k=P+(I<<17&4294967295|I>>>15),I=T+(y^k&(P^y))+E[15]+1236535329&4294967295,T=k+(I<<22&4294967295|I>>>10),I=y+(k^P&(T^k))+E[1]+4129170786&4294967295,y=T+(I<<5&4294967295|I>>>27),I=P+(T^k&(y^T))+E[6]+3225465664&4294967295,P=y+(I<<9&4294967295|I>>>23),I=k+(y^T&(P^y))+E[11]+643717713&4294967295,k=P+(I<<14&4294967295|I>>>18),I=T+(P^y&(k^P))+E[0]+3921069994&4294967295,T=k+(I<<20&4294967295|I>>>12),I=y+(k^P&(T^k))+E[5]+3593408605&4294967295,y=T+(I<<5&4294967295|I>>>27),I=P+(T^k&(y^T))+E[10]+38016083&4294967295,P=y+(I<<9&4294967295|I>>>23),I=k+(y^T&(P^y))+E[15]+3634488961&4294967295,k=P+(I<<14&4294967295|I>>>18),I=T+(P^y&(k^P))+E[4]+3889429448&4294967295,T=k+(I<<20&4294967295|I>>>12),I=y+(k^P&(T^k))+E[9]+568446438&4294967295,y=T+(I<<5&4294967295|I>>>27),I=P+(T^k&(y^T))+E[14]+3275163606&4294967295,P=y+(I<<9&4294967295|I>>>23),I=k+(y^T&(P^y))+E[3]+4107603335&4294967295,k=P+(I<<14&4294967295|I>>>18),I=T+(P^y&(k^P))+E[8]+1163531501&4294967295,T=k+(I<<20&4294967295|I>>>12),I=y+(k^P&(T^k))+E[13]+2850285829&4294967295,y=T+(I<<5&4294967295|I>>>27),I=P+(T^k&(y^T))+E[2]+4243563512&4294967295,P=y+(I<<9&4294967295|I>>>23),I=k+(y^T&(P^y))+E[7]+1735328473&4294967295,k=P+(I<<14&4294967295|I>>>18),I=T+(P^y&(k^P))+E[12]+2368359562&4294967295,T=k+(I<<20&4294967295|I>>>12),I=y+(T^k^P)+E[5]+4294588738&4294967295,y=T+(I<<4&4294967295|I>>>28),I=P+(y^T^k)+E[8]+2272392833&4294967295,P=y+(I<<11&4294967295|I>>>21),I=k+(P^y^T)+E[11]+1839030562&4294967295,k=P+(I<<16&4294967295|I>>>16),I=T+(k^P^y)+E[14]+4259657740&4294967295,T=k+(I<<23&4294967295|I>>>9),I=y+(T^k^P)+E[1]+2763975236&4294967295,y=T+(I<<4&4294967295|I>>>28),I=P+(y^T^k)+E[4]+1272893353&4294967295,P=y+(I<<11&4294967295|I>>>21),I=k+(P^y^T)+E[7]+4139469664&4294967295,k=P+(I<<16&4294967295|I>>>16),I=T+(k^P^y)+E[10]+3200236656&4294967295,T=k+(I<<23&4294967295|I>>>9),I=y+(T^k^P)+E[13]+681279174&4294967295,y=T+(I<<4&4294967295|I>>>28),I=P+(y^T^k)+E[0]+3936430074&4294967295,P=y+(I<<11&4294967295|I>>>21),I=k+(P^y^T)+E[3]+3572445317&4294967295,k=P+(I<<16&4294967295|I>>>16),I=T+(k^P^y)+E[6]+76029189&4294967295,T=k+(I<<23&4294967295|I>>>9),I=y+(T^k^P)+E[9]+3654602809&4294967295,y=T+(I<<4&4294967295|I>>>28),I=P+(y^T^k)+E[12]+3873151461&4294967295,P=y+(I<<11&4294967295|I>>>21),I=k+(P^y^T)+E[15]+530742520&4294967295,k=P+(I<<16&4294967295|I>>>16),I=T+(k^P^y)+E[2]+3299628645&4294967295,T=k+(I<<23&4294967295|I>>>9),I=y+(k^(T|~P))+E[0]+4096336452&4294967295,y=T+(I<<6&4294967295|I>>>26),I=P+(T^(y|~k))+E[7]+1126891415&4294967295,P=y+(I<<10&4294967295|I>>>22),I=k+(y^(P|~T))+E[14]+2878612391&4294967295,k=P+(I<<15&4294967295|I>>>17),I=T+(P^(k|~y))+E[5]+4237533241&4294967295,T=k+(I<<21&4294967295|I>>>11),I=y+(k^(T|~P))+E[12]+1700485571&4294967295,y=T+(I<<6&4294967295|I>>>26),I=P+(T^(y|~k))+E[3]+2399980690&4294967295,P=y+(I<<10&4294967295|I>>>22),I=k+(y^(P|~T))+E[10]+4293915773&4294967295,k=P+(I<<15&4294967295|I>>>17),I=T+(P^(k|~y))+E[1]+2240044497&4294967295,T=k+(I<<21&4294967295|I>>>11),I=y+(k^(T|~P))+E[8]+1873313359&4294967295,y=T+(I<<6&4294967295|I>>>26),I=P+(T^(y|~k))+E[15]+4264355552&4294967295,P=y+(I<<10&4294967295|I>>>22),I=k+(y^(P|~T))+E[6]+2734768916&4294967295,k=P+(I<<15&4294967295|I>>>17),I=T+(P^(k|~y))+E[13]+1309151649&4294967295,T=k+(I<<21&4294967295|I>>>11),I=y+(k^(T|~P))+E[4]+4149444226&4294967295,y=T+(I<<6&4294967295|I>>>26),I=P+(T^(y|~k))+E[11]+3174756917&4294967295,P=y+(I<<10&4294967295|I>>>22),I=k+(y^(P|~T))+E[2]+718787259&4294967295,k=P+(I<<15&4294967295|I>>>17),I=T+(P^(k|~y))+E[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,v.g[2]=v.g[2]+k&4294967295,v.g[3]=v.g[3]+P&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var T=y-this.blockSize,E=this.B,k=this.h,P=0;P<y;){if(k==0)for(;P<=T;)s(this,v,P),P+=this.blockSize;if(typeof v=="string"){for(;P<y;)if(E[k++]=v.charCodeAt(P++),k==this.blockSize){s(this,E),k=0;break}}else for(;P<y;)if(E[k++]=v[P++],k==this.blockSize){s(this,E),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var T=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=T&255,T/=256;for(this.u(v),v=Array(16),y=T=0;4>y;++y)for(var E=0;32>E;E+=8)v[T++]=this.g[y]>>>E&255;return v};function i(v,y){var T=c;return Object.prototype.hasOwnProperty.call(T,v)?T[v]:T[v]=y(v)}function o(v,y){this.h=y;for(var T=[],E=!0,k=v.length-1;0<=k;k--){var P=v[k]|0;E&&P==y||(T[k]=P,E=!1)}this.g=T}var c={};function u(v){return-128<=v&&128>v?i(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return g;if(0>v)return z(h(-v));for(var y=[],T=1,E=0;v>=T;E++)y[E]=v/T|0,T*=4294967296;return new o(y,0)}function p(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return z(p(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(y,8)),E=g,k=0;k<v.length;k+=8){var P=Math.min(8,v.length-k),I=parseInt(v.substring(k,k+P),y);8>P?(P=h(Math.pow(y,P)),E=E.j(P).add(h(I))):(E=E.j(T),E=E.add(h(I)))}return E}var g=u(0),_=u(1),j=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-z(this).m();for(var v=0,y=1,T=0;T<this.g.length;T++){var E=this.i(T);v+=(0<=E?E:4294967296+E)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b(this))return"0";if(R(this))return"-"+z(this).toString(v);for(var y=h(Math.pow(v,6)),T=this,E="";;){var k=O(T,y).g;T=N(T,k.j(y));var P=((0<T.g.length?T.g[0]:T.h)>>>0).toString(v);if(T=k,b(T))return P+E;for(;6>P.length;)P="0"+P;E=P+E}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function b(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function R(v){return v.h==-1}t.l=function(v){return v=N(this,v),R(v)?-1:b(v)?0:1};function z(v){for(var y=v.g.length,T=[],E=0;E<y;E++)T[E]=~v.g[E];return new o(T,~v.h).add(_)}t.abs=function(){return R(this)?z(this):this},t.add=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],E=0,k=0;k<=y;k++){var P=E+(this.i(k)&65535)+(v.i(k)&65535),I=(P>>>16)+(this.i(k)>>>16)+(v.i(k)>>>16);E=I>>>16,P&=65535,I&=65535,T[k]=I<<16|P}return new o(T,T[T.length-1]&-2147483648?-1:0)};function N(v,y){return v.add(z(y))}t.j=function(v){if(b(this)||b(v))return g;if(R(this))return R(v)?z(this).j(z(v)):z(z(this).j(v));if(R(v))return z(this.j(z(v)));if(0>this.l(j)&&0>v.l(j))return h(this.m()*v.m());for(var y=this.g.length+v.g.length,T=[],E=0;E<2*y;E++)T[E]=0;for(E=0;E<this.g.length;E++)for(var k=0;k<v.g.length;k++){var P=this.i(E)>>>16,I=this.i(E)&65535,Ce=v.i(k)>>>16,Ve=v.i(k)&65535;T[2*E+2*k]+=I*Ve,w(T,2*E+2*k),T[2*E+2*k+1]+=P*Ve,w(T,2*E+2*k+1),T[2*E+2*k+1]+=I*Ce,w(T,2*E+2*k+1),T[2*E+2*k+2]+=P*Ce,w(T,2*E+2*k+2)}for(E=0;E<y;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=y;E<2*y;E++)T[E]=0;return new o(T,0)};function w(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function A(v,y){this.g=v,this.h=y}function O(v,y){if(b(y))throw Error("division by zero");if(b(v))return new A(g,g);if(R(v))return y=O(z(v),y),new A(z(y.g),z(y.h));if(R(y))return y=O(v,z(y)),new A(z(y.g),y.h);if(30<v.g.length){if(R(v)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var T=_,E=y;0>=E.l(v);)T=$(T),E=$(E);var k=K(T,1),P=K(E,1);for(E=K(E,2),T=K(T,2);!b(E);){var I=P.add(E);0>=I.l(v)&&(k=k.add(T),P=I),E=K(E,1),T=K(T,1)}return y=N(v,k.j(y)),new A(k,y)}for(k=g;0<=v.l(y);){for(T=Math.max(1,Math.floor(v.m()/y.m())),E=Math.ceil(Math.log(T)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),P=h(T),I=P.j(y);R(I)||0<I.l(v);)T-=E,P=h(T),I=P.j(y);b(P)&&(P=_),k=k.add(P),v=N(v,I)}return new A(k,v)}t.A=function(v){return O(this,v).h},t.and=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],E=0;E<y;E++)T[E]=this.i(E)&v.i(E);return new o(T,this.h&v.h)},t.or=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],E=0;E<y;E++)T[E]=this.i(E)|v.i(E);return new o(T,this.h|v.h)},t.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),T=[],E=0;E<y;E++)T[E]=this.i(E)^v.i(E);return new o(T,this.h^v.h)};function $(v){for(var y=v.g.length+1,T=[],E=0;E<y;E++)T[E]=v.i(E)<<1|v.i(E-1)>>>31;return new o(T,v.h)}function K(v,y){var T=y>>5;y%=32;for(var E=v.g.length-T,k=[],P=0;P<E;P++)k[P]=0<y?v.i(P+T)>>>y|v.i(P+T+1)<<32-y:v.i(P+T);return new o(k,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Js=o}).apply(typeof jg<"u"?jg:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var w0,Ko,E0,oc,kh,S0,T0,I0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var S=0;S<a.length-1;S++){var q=a[S];if(!(q in f))break e;f=f[q]}a=a[a.length-1],S=f[a],d=d(S),d!=S&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,S=!1,q={next:function(){if(!S&&f<a.length){var Q=f++;return{value:d(Q,a[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function g(a,d,f){if(!a)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),a.apply(d,q)}}return function(){return a.apply(d,arguments)}}function _(a,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,_.apply(null,arguments)}function j(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var S=f.slice();return S.push.apply(S,arguments),a.apply(this,S)}}function b(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(S,q,Q){for(var he=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)he[pt-2]=arguments[pt];return d.prototype[q].apply(S,he)}}function R(a){const d=a.length;if(0<d){const f=Array(d);for(let S=0;S<d;S++)f[S]=a[S];return f}return[]}function z(a,d){for(let f=1;f<arguments.length;f++){const S=arguments[f];if(u(S)){const q=a.length||0,Q=S.length||0;a.length=q+Q;for(let he=0;he<Q;he++)a[q+he]=S[he]}else a.push(S)}}class N{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function O(a){return O[" "](a),a}O[" "]=function(){};var $=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function K(a,d,f){for(const S in a)d.call(f,a[S],S,a)}function v(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function y(a){const d={};for(const f in a)d[f]=a[f];return d}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let f,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(f in S)a[f]=S[f];for(let Q=0;Q<T.length;Q++)f=T[Q],Object.prototype.hasOwnProperty.call(S,f)&&(a[f]=S[f])}}function k(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function P(a){c.setTimeout(()=>{throw a},0)}function I(){var a=ne;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Ce{constructor(){this.h=this.g=null}add(d,f){const S=Ve.get();S.set(d,f),this.h?this.h.next=S:this.g=S,this.h=S}}var Ve=new N(()=>new mt,a=>a.reset());class mt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let It,V=!1,ne=new Ce,oe=()=>{const a=c.Promise.resolve(void 0);It=()=>{a.then(Se)}};var Se=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){P(f)}var d=Ve;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}V=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var it=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function gt(a,d){if(Ae.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,S=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if($){e:{try{O(d.nodeName);var q=!0;break e}catch{}q=!1}q||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:nt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&gt.aa.h.call(this)}}b(gt,Ae);var nt={2:"touch",3:"pen",4:"mouse"};gt.prototype.h=function(){gt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function Xt(a,d,f,S,q){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!S,this.ha=q,this.key=++Ue,this.da=this.fa=!1}function ut(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Je(a){this.src=a,this.g={},this.h=0}Je.prototype.add=function(a,d,f,S,q){var Q=a.toString();a=this.g[Q],a||(a=this.g[Q]=[],this.h++);var he=Dt(a,d,S,q);return-1<he?(d=a[he],f||(d.fa=!1)):(d=new Xt(d,this.src,Q,!!S,q),d.fa=f,a.push(d)),d};function rn(a,d){var f=d.type;if(f in a.g){var S=a.g[f],q=Array.prototype.indexOf.call(S,d,void 0),Q;(Q=0<=q)&&Array.prototype.splice.call(S,q,1),Q&&(ut(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Dt(a,d,f,S){for(var q=0;q<a.length;++q){var Q=a[q];if(!Q.da&&Q.listener==d&&Q.capture==!!f&&Q.ha==S)return q}return-1}var zt="closure_lm_"+(1e6*Math.random()|0),rt={};function st(a,d,f,S,q){if(Array.isArray(d)){for(var Q=0;Q<d.length;Q++)st(a,d[Q],f,S,q);return null}return f=G(f),a&&a[Fe]?a.K(d,f,h(S)?!!S.capture:!1,q):Wt(a,d,f,!1,S,q)}function Wt(a,d,f,S,q,Q){if(!d)throw Error("Invalid event type");var he=h(q)?!!q.capture:!!q,pt=D(a);if(pt||(a[zt]=pt=new Je(a)),f=pt.add(d,f,S,he,Q),f.proxy)return f;if(S=M(),f.proxy=S,S.src=a,S.listener=f,a.addEventListener)it||(q=he),q===void 0&&(q=!1),a.addEventListener(d.toString(),S,q);else if(a.attachEvent)a.attachEvent(ee(d.toString()),S);else if(a.addListener&&a.removeListener)a.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return f}function M(){function a(f){return d.call(a.src,a.listener,f)}const d=pe;return a}function Y(a,d,f,S,q){if(Array.isArray(d))for(var Q=0;Q<d.length;Q++)Y(a,d[Q],f,S,q);else S=h(S)?!!S.capture:!!S,f=G(f),a&&a[Fe]?(a=a.i,d=String(d).toString(),d in a.g&&(Q=a.g[d],f=Dt(Q,f,S,q),-1<f&&(ut(Q[f]),Array.prototype.splice.call(Q,f,1),Q.length==0&&(delete a.g[d],a.h--)))):a&&(a=D(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Dt(d,f,S,q)),(f=-1<a?d[a]:null)&&U(f))}function U(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Fe])rn(d.i,a);else{var f=a.type,S=a.proxy;d.removeEventListener?d.removeEventListener(f,S,a.capture):d.detachEvent?d.detachEvent(ee(f),S):d.addListener&&d.removeListener&&d.removeListener(S),(f=D(d))?(rn(f,a),f.h==0&&(f.src=null,d[zt]=null)):ut(a)}}}function ee(a){return a in rt?rt[a]:rt[a]="on"+a}function pe(a,d){if(a.da)a=!0;else{d=new gt(d,this);var f=a.listener,S=a.ha||a.src;a.fa&&U(a),a=f.call(S,d)}return a}function D(a){return a=a[zt],a instanceof Je?a:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function G(a){return typeof a=="function"?a:(a[J]||(a[J]=function(d){return a.handleEvent(d)}),a[J])}function fe(){we.call(this),this.i=new Je(this),this.M=this,this.F=null}b(fe,we),fe.prototype[Fe]=!0,fe.prototype.removeEventListener=function(a,d,f,S){Y(this,a,d,f,S)};function me(a,d){var f,S=a.F;if(S)for(f=[];S;S=S.F)f.push(S);if(a=a.M,S=d.type||d,typeof d=="string")d=new Ae(d,a);else if(d instanceof Ae)d.target=d.target||a;else{var q=d;d=new Ae(S,a),E(d,q)}if(q=!0,f)for(var Q=f.length-1;0<=Q;Q--){var he=d.g=f[Q];q=Te(he,S,!0,d)&&q}if(he=d.g=a,q=Te(he,S,!0,d)&&q,q=Te(he,S,!1,d)&&q,f)for(Q=0;Q<f.length;Q++)he=d.g=f[Q],q=Te(he,S,!1,d)&&q}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],S=0;S<f.length;S++)ut(f[S]);delete a.g[d],a.h--}}this.F=null},fe.prototype.K=function(a,d,f,S){return this.i.add(String(a),d,!1,f,S)},fe.prototype.L=function(a,d,f,S){return this.i.add(String(a),d,!0,f,S)};function Te(a,d,f,S){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var q=!0,Q=0;Q<d.length;++Q){var he=d[Q];if(he&&!he.da&&he.capture==f){var pt=he.listener,sn=he.ha||he.src;he.fa&&rn(a.i,he),q=pt.call(sn,S)!==!1&&q}}return q&&!S.defaultPrevented}function ke(a,d,f){if(typeof a=="function")f&&(a=_(a,f));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function Oe(a){a.g=ke(()=>{a.g=null,a.i&&(a.i=!1,Oe(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Ze extends we{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ge(a){we.call(this),this.h=a,this.g={}}b(Ge,we);var Ie=[];function ot(a){K(a.g,function(d,f){this.g.hasOwnProperty(f)&&U(d)},a),a.g={}}Ge.prototype.N=function(){Ge.aa.N.call(this),ot(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var m=c.JSON.stringify,x=c.JSON.parse,C=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function W(){}W.prototype.h=null;function ue(a){return a.h||(a.h=a.i())}function je(){}var We={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ct(){Ae.call(this,"d")}b(Ct,Ae);function dt(){Ae.call(this,"c")}b(dt,Ae);var et={},Be=null;function B(){return Be=Be||new fe}et.La="serverreachability";function ye(a){Ae.call(this,et.La,a)}b(ye,Ae);function H(a){const d=B();me(d,new ye(d))}et.STAT_EVENT="statevent";function F(a,d){Ae.call(this,et.STAT_EVENT,a),this.stat=d}b(F,Ae);function L(a){const d=B();me(d,new F(d,a))}et.Ma="timingevent";function re(a,d){Ae.call(this,et.Ma,a),this.size=d}b(re,Ae);function Z(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function de(){this.g=!0}de.prototype.xa=function(){this.g=!1};function se(a,d,f,S,q,Q){a.info(function(){if(a.g)if(Q)for(var he="",pt=Q.split("&"),sn=0;sn<pt.length;sn++){var Ye=pt[sn].split("=");if(1<Ye.length){var pn=Ye[0];Ye=Ye[1];var mn=pn.split("_");he=2<=mn.length&&mn[1]=="type"?he+(pn+"="+Ye+"&"):he+(pn+"=redacted&")}}else he=null;else he=Q;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+d+`
`+f+`
`+he})}function ie(a,d,f,S,q,Q,he){a.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+d+`
`+f+`
`+Q+" "+he})}function ce(a,d,f,S){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+De(a,f)+(S?" "+S:"")})}function Ne(a,d){a.info(function(){return"TIMEOUT: "+d})}de.prototype.info=function(){};function De(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var S=f[a];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var Q=q[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var he=1;he<q.length;he++)q[he]=""}}}}return m(f)}catch{return d}}var yt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bt;function _t(){}b(_t,W),_t.prototype.g=function(){return new XMLHttpRequest},_t.prototype.i=function(){return{}},Bt=new _t;function Lt(a,d,f,S){this.j=a,this.i=d,this.l=f,this.R=S||1,this.U=new Ge(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fn}function fn(){this.i=null,this.g="",this.h=!1}var Qn={},Kt={};function ft(a,d,f){a.L=1,a.v=ml(bt(d)),a.m=f,a.P=!0,xt(a,null)}function xt(a,d){a.F=Date.now(),Jt(a),a.A=bt(a.v);var f=a.A,S=a.R;Array.isArray(S)||(S=[String(S)]),Hp(f.i,"t",S),a.C=0,f=a.j.J,a.h=new fn,a.g=cm(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Ze(_(a.Y,a,a.g),a.O)),d=a.U,f=a.g,S=a.ca;var q="readystatechange";Array.isArray(q)||(q&&(Ie[0]=q.toString()),q=Ie);for(var Q=0;Q<q.length;Q++){var he=st(f,q[Q],S||d.handleEvent,!1,d.h||d);if(!he)break;d.g[he.key]=he}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),H(),se(a.i,a.u,a.A,a.l,a.R,a.m)}Lt.prototype.ca=function(a){a=a.target;const d=this.M;d&&Rr(a)==3?d.j():this.Y(a)},Lt.prototype.Y=function(a){try{if(a==this.g)e:{const mn=Rr(this.g);var d=this.g.Ba();const wi=this.g.Z();if(!(3>mn)&&(mn!=3||this.g&&(this.h.h||this.g.oa()||Jp(this.g)))){this.J||mn!=4||d==7||(d==8||0>=wi?H(3):H(2)),tt(this);var f=this.g.Z();this.X=f;t:if(Pn(this)){var S=Jp(this.g);a="";var q=S.length,Q=Rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ir(this),Yn(this);var he="";break t}this.h.i=new c.TextDecoder}for(d=0;d<q;d++)this.h.h=!0,a+=this.h.i.decode(S[d],{stream:!(Q&&d==q-1)});S.length=0,this.h.g+=a,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=f==200,ie(this.i,this.u,this.A,this.l,this.R,mn,f),this.o){if(this.T&&!this.K){t:{if(this.g){var pt,sn=this.g;if((pt=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(pt)){var Ye=pt;break t}}Ye=null}if(f=Ye)ce(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_o(this,f);else{this.o=!1,this.s=3,L(12),ir(this),Yn(this);break e}}if(this.P){f=!0;let or;for(;!this.J&&this.C<he.length;)if(or=Rn(this,he),or==Kt){mn==4&&(this.s=4,L(14),f=!1),ce(this.i,this.l,null,"[Incomplete Response]");break}else if(or==Qn){this.s=4,L(15),ce(this.i,this.l,he,"[Invalid Chunk]"),f=!1;break}else ce(this.i,this.l,or,null),_o(this,or);if(Pn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mn!=4||he.length!=0||this.h.h||(this.s=1,L(16),f=!1),this.o=this.o&&f,!f)ce(this.i,this.l,he,"[Invalid Chunked Response]"),ir(this),Yn(this);else if(0<he.length&&!this.W){this.W=!0;var pn=this.j;pn.g==this&&pn.ba&&!pn.M&&(pn.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Wu(pn),pn.M=!0,L(11))}}else ce(this.i,this.l,he,null),_o(this,he);mn==4&&ir(this),this.o&&!this.J&&(mn==4?im(this.j,this):(this.o=!1,Jt(this)))}else OE(this.g),f==400&&0<he.indexOf("Unknown SID")?(this.s=3,L(12)):(this.s=0,L(13)),ir(this),Yn(this)}}}catch{}finally{}};function Pn(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Rn(a,d){var f=a.C,S=d.indexOf(`
`,f);return S==-1?Kt:(f=Number(d.substring(f,S)),isNaN(f)?Qn:(S+=1,S+f>d.length?Kt:(d=d.slice(S,S+f),a.C=S+f,d)))}Lt.prototype.cancel=function(){this.J=!0,ir(this)};function Jt(a){a.S=Date.now()+a.I,gr(a,a.I)}function gr(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Z(_(a.ba,a),d)}function tt(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Lt.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Ne(this.i,this.A),this.L!=2&&(H(),L(17)),ir(this),this.s=2,Yn(this)):gr(this,this.S-a)};function Yn(a){a.j.G==0||a.J||im(a.j,a)}function ir(a){tt(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,ot(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function _o(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||dl(f.h,a))){if(!a.K&&dl(f.h,a)&&f.G==3){try{var S=f.Da.g.parse(d)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)El(f),_l(f);else break e;Hu(f),L(18)}}else f.za=q[1],0<f.za-f.T&&37500>q[2]&&f.F&&f.v==0&&!f.C&&(f.C=Z(_(f.Za,f),6e3));if(1>=Eo(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Fs(f,11)}else if((a.K||f.g==a)&&El(f),!w(d))for(q=f.Da.g.parse(d),d=0;d<q.length;d++){let Ye=q[d];if(f.T=Ye[0],Ye=Ye[1],f.G==2)if(Ye[0]=="c"){f.K=Ye[1],f.ia=Ye[2];const pn=Ye[3];pn!=null&&(f.la=pn,f.j.info("VER="+f.la));const mn=Ye[4];mn!=null&&(f.Aa=mn,f.j.info("SVER="+f.Aa));const wi=Ye[5];wi!=null&&typeof wi=="number"&&0<wi&&(S=1.5*wi,f.L=S,f.j.info("backChannelRequestTimeoutMs_="+S)),S=f;const or=a.g;if(or){const Tl=or.g?or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tl){var Q=S.h;Q.g||Tl.indexOf("spdy")==-1&&Tl.indexOf("quic")==-1&&Tl.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(gi(Q,Q.h),Q.h=null))}if(S.D){const Ku=or.g?or.g.getResponseHeader("X-HTTP-Session-Id"):null;Ku&&(S.ya=Ku,wt(S.I,S.D,Ku))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),S=f;var he=a;if(S.qa=lm(S,S.J?S.ia:null,S.W),he.K){vi(S.h,he);var pt=he,sn=S.L;sn&&(pt.I=sn),pt.B&&(tt(pt),Jt(pt)),S.g=he}else rm(S);0<f.i.length&&wl(f)}else Ye[0]!="stop"&&Ye[0]!="close"||Fs(f,7);else f.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Fs(f,7):qu(f):Ye[0]!="noop"&&f.l&&f.l.ta(Ye),f.v=0)}}H(4)}catch{}}var cl=class{constructor(a,d){this.g=a,this.map=d}};function wo(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ul(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Eo(a){return a.h?1:a.g?a.g.size:0}function dl(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function gi(a,d){a.g?a.g.add(d):a.h=d}function vi(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}wo.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function hl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return R(a.i)}function Uu(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,S=0;S<f;S++)d.push(a[S]);return d}d=[],f=0;for(S in a)d[f++]=a[S];return d}function zu(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const S in a)d[f++]=S;return d}}}function fl(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=zu(a),S=Uu(a),q=S.length,Q=0;Q<q;Q++)d.call(void 0,S[Q],f&&f[Q],a)}var pl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bu(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var S=a[f].indexOf("="),q=null;if(0<=S){var Q=a[f].substring(0,S);q=a[f].substring(S+1)}else Q=a[f];d(Q,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function at(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof at){this.h=a.h,Pr(this,a.j),this.o=a.o,this.g=a.g,Vs(this,a.s),this.l=a.l;var d=a.i,f=new Co;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),So(this,f),this.m=a.m}else a&&(d=String(a).match(pl))?(this.h=!1,Pr(this,d[1]||"",!0),this.o=To(d[2]||""),this.g=To(d[3]||"",!0),Vs(this,d[4]),this.l=To(d[5]||"",!0),So(this,d[6]||"",!0),this.m=To(d[7]||"")):(this.h=!1,this.i=new Co(null,this.h))}at.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Io(d,Bp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Io(d,Bp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Io(f,f.charAt(0)=="/"?xE:CE,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Io(f,kE)),a.join("")};function bt(a){return new at(a)}function Pr(a,d,f){a.j=f?To(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Vs(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function So(a,d,f){d instanceof Co?(a.i=d,NE(a.i,a.h)):(f||(d=Io(d,AE)),a.i=new Co(d,a.h))}function wt(a,d,f){a.i.set(d,f)}function ml(a){return wt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function To(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Io(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,IE),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function IE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Bp=/[#\/\?@]/g,CE=/[#\?:]/g,xE=/[#\?]/g,AE=/[#\?@]/g,kE=/#/g;function Co(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Jr(a){a.g||(a.g=new Map,a.h=0,a.i&&Bu(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Co.prototype,t.add=function(a,d){Jr(this),this.i=null,a=yi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function $p(a,d){Jr(a),d=yi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function qp(a,d){return Jr(a),d=yi(a,d),a.g.has(d)}t.forEach=function(a,d){Jr(this),this.g.forEach(function(f,S){f.forEach(function(q){a.call(d,q,S,this)},this)},this)},t.na=function(){Jr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let S=0;S<d.length;S++){const q=a[S];for(let Q=0;Q<q.length;Q++)f.push(d[S])}return f},t.V=function(a){Jr(this);let d=[];if(typeof a=="string")qp(this,a)&&(d=d.concat(this.g.get(yi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Jr(this),this.i=null,a=yi(this,a),qp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Hp(a,d,f){$p(a,d),0<f.length&&(a.i=null,a.g.set(yi(a,d),R(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var S=d[f];const Q=encodeURIComponent(String(S)),he=this.V(S);for(S=0;S<he.length;S++){var q=Q;he[S]!==""&&(q+="="+encodeURIComponent(String(he[S]))),a.push(q)}}return this.i=a.join("&")};function yi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function NE(a,d){d&&!a.j&&(Jr(a),a.i=null,a.g.forEach(function(f,S){var q=S.toLowerCase();S!=q&&($p(this,S),Hp(this,q,f))},a)),a.j=d}function PE(a,d){const f=new de;if(c.Image){const S=new Image;S.onload=j(Zr,f,"TestLoadImage: loaded",!0,d,S),S.onerror=j(Zr,f,"TestLoadImage: error",!1,d,S),S.onabort=j(Zr,f,"TestLoadImage: abort",!1,d,S),S.ontimeout=j(Zr,f,"TestLoadImage: timeout",!1,d,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=a}else d(!1)}function RE(a,d){const f=new de,S=new AbortController,q=setTimeout(()=>{S.abort(),Zr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:S.signal}).then(Q=>{clearTimeout(q),Q.ok?Zr(f,"TestPingServer: ok",!0,d):Zr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(q),Zr(f,"TestPingServer: error",!1,d)})}function Zr(a,d,f,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(f)}catch{}}function jE(){this.g=new C}function DE(a,d,f){const S=f||"";try{fl(a,function(q,Q){let he=q;h(q)&&(he=m(q)),d.push(S+Q+"="+encodeURIComponent(he))})}catch(q){throw d.push(S+"type="+encodeURIComponent("_badmap")),q}}function gl(a){this.l=a.Ub||null,this.j=a.eb||!1}b(gl,W),gl.prototype.g=function(){return new vl(this.l,this.j)},gl.prototype.i=function(a){return function(){return a}}({});function vl(a,d){fe.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(vl,fe),t=vl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ao(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?xo(this):Ao(this),this.readyState==3&&Wp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,xo(this))},t.Qa=function(a){this.g&&(this.response=a,xo(this))},t.ga=function(){this.g&&xo(this)};function xo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ao(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ao(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Kp(a){let d="";return K(a,function(f,S){d+=S,d+=":",d+=f,d+=`\r
`}),d}function $u(a,d,f){e:{for(S in f){var S=!1;break e}S=!0}S||(f=Kp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):wt(a,d,f))}function Mt(a){fe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Mt,fe);var bE=/^https?$/i,ME=["POST","PUT"];t=Mt.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bt.g(),this.v=this.o?ue(this.o):ue(Bt),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(Q){Gp(this,Q);return}if(a=f||"",f=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)f.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())f.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(f.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ME,d,void 0))||S||q||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,he]of f)this.g.setRequestHeader(Q,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xp(this),this.u=!0,this.g.send(a),this.u=!1}catch(Q){Gp(this,Q)}};function Gp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Qp(a),yl(a)}function Qp(a){a.A||(a.A=!0,me(a,"complete"),me(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,me(this,"complete"),me(this,"abort"),yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),Mt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yp(this):this.bb())},t.bb=function(){Yp(this)};function Yp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Rr(a)!=4||a.Z()!=2)){if(a.u&&Rr(a)==4)ke(a.Ea,0,a);else if(me(a,"readystatechange"),Rr(a)==4){a.h=!1;try{const he=a.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var S;if(S=he===0){var q=String(a.D).match(pl)[1]||null;!q&&c.self&&c.self.location&&(q=c.self.location.protocol.slice(0,-1)),S=!bE.test(q?q.toLowerCase():"")}f=S}if(f)me(a,"complete"),me(a,"success");else{a.m=6;try{var Q=2<Rr(a)?a.g.statusText:""}catch{Q=""}a.l=Q+" ["+a.Z()+"]",Qp(a)}}finally{yl(a)}}}}function yl(a,d){if(a.g){Xp(a);const f=a.g,S=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||me(a,"ready");try{f.onreadystatechange=S}catch{}}}function Xp(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Rr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Rr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),x(d)}};function Jp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function OE(a){const d={};a=(a.g&&2<=Rr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<a.length;S++){if(w(a[S]))continue;var f=k(a[S]);const q=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const Q=d[q]||[];d[q]=Q,Q.push(f)}v(d,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ko(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Zp(a){this.Aa=0,this.i=[],this.j=new de,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ko("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ko("baseRetryDelayMs",5e3,a),this.cb=ko("retryDelaySeedMs",1e4,a),this.Wa=ko("forwardChannelMaxRetries",2,a),this.wa=ko("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new wo(a&&a.concurrentRequestLimit),this.Da=new jE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,S){L(0),this.W=a,this.H=d||{},f&&S!==void 0&&(this.H.OSID=f,this.H.OAID=S),this.F=this.X,this.I=lm(this,null,this.W),wl(this)};function qu(a){if(em(a),a.G==3){var d=a.U++,f=bt(a.I);if(wt(f,"SID",a.K),wt(f,"RID",d),wt(f,"TYPE","terminate"),No(a,f),d=new Lt(a,a.j,d),d.L=2,d.v=ml(bt(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=cm(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Jt(d)}am(a)}function _l(a){a.g&&(Wu(a),a.g.cancel(),a.g=null)}function em(a){_l(a),a.u&&(c.clearTimeout(a.u),a.u=null),El(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function wl(a){if(!ul(a.h)&&!a.s){a.s=!0;var d=a.Ga;It||oe(),V||(It(),V=!0),ne.add(d,a),a.B=0}}function LE(a,d){return Eo(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Z(_(a.Ga,a,d),om(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const q=new Lt(this,this.j,a);let Q=this.o;if(this.S&&(Q?(Q=y(Q),E(Q,this.S)):Q=this.S),this.m!==null||this.O||(q.H=Q,Q=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var S=this.i[f];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(d+=S,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=nm(this,q,d),f=bt(this.I),wt(f,"RID",a),wt(f,"CVER",22),this.D&&wt(f,"X-HTTP-Session-Id",this.D),No(this,f),Q&&(this.O?d="headers="+encodeURIComponent(String(Kp(Q)))+"&"+d:this.m&&$u(f,this.m,Q)),gi(this.h,q),this.Ua&&wt(f,"TYPE","init"),this.P?(wt(f,"$req",d),wt(f,"SID","null"),q.T=!0,ft(q,f,null)):ft(q,f,d),this.G=2}}else this.G==3&&(a?tm(this,a):this.i.length==0||ul(this.h)||tm(this))};function tm(a,d){var f;d?f=d.l:f=a.U++;const S=bt(a.I);wt(S,"SID",a.K),wt(S,"RID",f),wt(S,"AID",a.T),No(a,S),a.m&&a.o&&$u(S,a.m,a.o),f=new Lt(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=nm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),gi(a.h,f),ft(f,S,d)}function No(a,d){a.H&&K(a.H,function(f,S){wt(d,S,f)}),a.l&&fl({},function(f,S){wt(d,S,f)})}function nm(a,d,f){f=Math.min(a.i.length,f);var S=a.l?_(a.l.Na,a.l,a):null;e:{var q=a.i;let Q=-1;for(;;){const he=["count="+f];Q==-1?0<f?(Q=q[0].g,he.push("ofs="+Q)):Q=0:he.push("ofs="+Q);let pt=!0;for(let sn=0;sn<f;sn++){let Ye=q[sn].g;const pn=q[sn].map;if(Ye-=Q,0>Ye)Q=Math.max(0,q[sn].g-100),pt=!1;else try{DE(pn,he,"req"+Ye+"_")}catch{S&&S(pn)}}if(pt){S=he.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,S}function rm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;It||oe(),V||(It(),V=!0),ne.add(d,a),a.v=0}}function Hu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Z(_(a.Fa,a),om(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,sm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Z(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,L(10),_l(this),sm(this))};function Wu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function sm(a){a.g=new Lt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=bt(a.qa);wt(d,"RID","rpc"),wt(d,"SID",a.K),wt(d,"AID",a.T),wt(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&wt(d,"TO",a.ja),wt(d,"TYPE","xmlhttp"),No(a,d),a.m&&a.o&&$u(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=ml(bt(d)),f.m=null,f.P=!0,xt(f,a)}t.Za=function(){this.C!=null&&(this.C=null,_l(this),Hu(this),L(19))};function El(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function im(a,d){var f=null;if(a.g==d){El(a),Wu(a),a.g=null;var S=2}else if(dl(a.h,d))f=d.D,vi(a.h,d),S=1;else return;if(a.G!=0){if(d.o)if(S==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var q=a.B;S=B(),me(S,new re(S,f)),wl(a)}else rm(a);else if(q=d.s,q==3||q==0&&0<d.X||!(S==1&&LE(a,d)||S==2&&Hu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),q){case 1:Fs(a,5);break;case 4:Fs(a,10);break;case 3:Fs(a,6);break;default:Fs(a,2)}}}function om(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Fs(a,d){if(a.j.info("Error code "+d),d==2){var f=_(a.fb,a),S=a.Xa;const q=!S;S=new at(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pr(S,"https"),ml(S),q?PE(S.toString(),f):RE(S.toString(),f)}else L(2);a.G=0,a.l&&a.l.sa(d),am(a),em(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),L(2)):(this.j.info("Failed to ping google.com"),L(1))};function am(a){if(a.G=0,a.ka=[],a.l){const d=hl(a.h);(d.length!=0||a.i.length!=0)&&(z(a.ka,d),z(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function lm(a,d,f){var S=f instanceof at?bt(f):new at(f);if(S.g!="")d&&(S.g=d+"."+S.g),Vs(S,S.s);else{var q=c.location;S=q.protocol,d=d?d+"."+q.hostname:q.hostname,q=+q.port;var Q=new at(null);S&&Pr(Q,S),d&&(Q.g=d),q&&Vs(Q,q),f&&(Q.l=f),S=Q}return f=a.D,d=a.ya,f&&d&&wt(S,f,d),wt(S,"VER",a.la),No(a,S),S}function cm(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Mt(new gl({eb:f})):new Mt(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function um(){}t=um.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sl(){}Sl.prototype.g=function(a,d){return new Un(a,d)};function Un(a,d){fe.call(this),this.g=new Zp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new _i(this)}b(Un,fe),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){qu(this.g)},Un.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=m(a),a=f);d.i.push(new cl(d.Ya++,a)),d.G==3&&wl(d)},Un.prototype.N=function(){this.g.l=null,delete this.j,qu(this.g),delete this.g,Un.aa.N.call(this)};function dm(a){Ct.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}b(dm,Ct);function hm(){dt.call(this),this.status=1}b(hm,dt);function _i(a){this.g=a}b(_i,um),_i.prototype.ua=function(){me(this.g,"a")},_i.prototype.ta=function(a){me(this.g,new dm(a))},_i.prototype.sa=function(a){me(this.g,new hm)},_i.prototype.ra=function(){me(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,I0=function(){return new Sl},T0=function(){return B()},S0=et,kh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yt.NO_ERROR=0,yt.TIMEOUT=8,yt.HTTP_ERROR=6,oc=yt,ht.COMPLETE="complete",E0=ht,je.EventType=We,We.OPEN="a",We.CLOSE="b",We.ERROR="c",We.MESSAGE="d",fe.prototype.listen=fe.prototype.K,Ko=je,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,w0=Mt}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const Dg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new qf("@firebase/firestore");function Vo(){return ii.logLevel}function Ee(t,...e){if(ii.logLevel<=qe.DEBUG){const n=e.map(Wf);ii.debug(`Firestore (${mo}): ${t}`,...n)}}function Kr(t,...e){if(ii.logLevel<=qe.ERROR){const n=e.map(Wf);ii.error(`Firestore (${mo}): ${t}`,...n)}}function Ra(t,...e){if(ii.logLevel<=qe.WARN){const n=e.map(Wf);ii.warn(`Firestore (${mo}): ${t}`,...n)}}function Wf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t="Unexpected state"){const e=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: `+t;throw Kr(e),new Error(e)}function ct(t,e){t||Re()}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jn.UNAUTHENTICATED))}shutdown(){}}class K1{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ur,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ur)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new H1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string"),new jn(e)}}class G1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Q1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new G1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Y1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ct(this.o===void 0);const r=i=>{i.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string"),this.R=n.token,new Y1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=J1(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Xe(t,e){return t<e?-1:t>e?1:0}function ro(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ve(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Yt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new Yt(0,0))}static max(){return new be(new Yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,r){n===void 0?n=0:n>e.length&&Re(),r===void 0?r=e.length-n:r>e.length-n&&Re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ja.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ja?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class St extends ja{construct(e,n,r){return new St(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new St(n)}static emptyPath(){return new St([])}}const Z1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends ja{construct(e,n,r){return new ln(e,n,r)}static isValidIdentifier(e){return Z1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ln(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ve(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ve(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ve(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new ve(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(n)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(St.fromString(e))}static fromName(e){return new xe(St.fromString(e).popFirst(5))}static empty(){return new xe(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return St.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new St(e.slice()))}}function eC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=be.fromTimestamp(r===1e9?new Yt(n+1,0):new Yt(n,r));return new Ns(s,xe.empty(),e)}function tC(t){return new Ns(t.readTime,t.key,-1)}class Ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ns(be.min(),xe.empty(),-1)}static max(){return new Ns(be.max(),xe.empty(),-1)}}function nC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xe.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==rC)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.reject(n)}static resolve(e){return new ae((n,r)=>{n(e)})}static reject(e){return new ae((n,r)=>{r(e)})}static waitFor(e){return new ae((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=ae.resolve(!1);for(const r of e)n=n.next(s=>s?ae.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ae((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++c,c===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new ae((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function iC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ja(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Kf.oe=-1;function _u(t){return t==null}function Uc(t){return t===0&&1/t==-1/0}function oC(t){return typeof t=="number"&&Number.isInteger(t)&&!Uc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function x0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.comparator=e,this.root=n||an.EMPTY}insert(e,n){return new jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??an.RED,this.left=s??an.EMPTY,this.right=i??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new an(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return an.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,n,r,s,i){return this}insert(e,n,r){return new an(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mg(this.data.getIterator())}getIteratorFrom(e){return new Mg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new un(this.comparator);return n.data=e,n}}class Mg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new $n([])}unionWith(e){let n=new un(ln.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new A0("Invalid base64 string: "+i):i}}(e);return new hn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const aC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(ct(!!t),typeof t=="string"){let e=0;const n=aC.exec(t);if(ct(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ft(t.seconds),nanos:Ft(t.nanos)}}function Ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oi(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qf(t){const e=t.mapValue.fields.__previous_value__;return Gf(e)?Qf(e):e}function Da(t){const e=Ps(t.mapValue.fields.__local_write_time__.timestampValue);return new Yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n,r,s,i,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class ba{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l={mapValue:{}};function ai(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gf(t)?4:uC(t)?9007199254740991:cC(t)?10:11:Re()}function kr(t,e){if(t===e)return!0;const n=ai(t);if(n!==ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Da(t).isEqual(Da(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ps(s.timestampValue),c=Ps(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return oi(s.bytesValue).isEqual(oi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ft(s.geoPointValue.latitude)===Ft(i.geoPointValue.latitude)&&Ft(s.geoPointValue.longitude)===Ft(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ft(s.integerValue)===Ft(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ft(s.doubleValue),c=Ft(i.doubleValue);return o===c?Uc(o)===Uc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return ro(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(bg(o)!==bg(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!kr(o[u],c[u])))return!1;return!0}(t,e);default:return Re()}}function Ma(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function so(t,e){if(t===e)return 0;const n=ai(t),r=ai(e);if(n!==r)return Xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Ft(i.integerValue||i.doubleValue),u=Ft(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Og(t.timestampValue,e.timestampValue);case 4:return Og(Da(t),Da(e));case 5:return Xe(t.stringValue,e.stringValue);case 6:return function(i,o){const c=oi(i),u=oi(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=Xe(c[h],u[h]);if(p!==0)return p}return Xe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Xe(Ft(i.latitude),Ft(o.latitude));return c!==0?c:Xe(Ft(i.longitude),Ft(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,h,p;const g=i.fields||{},_=o.fields||{},j=(c=g.value)===null||c===void 0?void 0:c.arrayValue,b=(u=_.value)===null||u===void 0?void 0:u.arrayValue,R=Xe(((h=j==null?void 0:j.values)===null||h===void 0?void 0:h.length)||0,((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0);return R!==0?R:Lg(j,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$l.mapValue&&o===$l.mapValue)return 0;if(i===$l.mapValue)return 1;if(o===$l.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const _=Xe(u[g],p[g]);if(_!==0)return _;const j=so(c[u[g]],h[p[g]]);if(j!==0)return j}return Xe(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Re()}}function Og(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=Ps(t),r=Ps(e),s=Xe(n.seconds,r.seconds);return s!==0?s:Xe(n.nanos,r.nanos)}function Lg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=so(n[s],r[s]);if(i)return i}return Xe(n.length,r.length)}function io(t){return Nh(t)}function Nh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ps(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return xe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Nh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Nh(n.fields[o])}`;return s+"}"}(t.mapValue):Re()}function Vg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ph(t){return!!t&&"integerValue"in t}function Yf(t){return!!t&&"arrayValue"in t}function Fg(t){return!!t&&"nullValue"in t}function Ug(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ac(t){return!!t&&"mapValue"in t}function cC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function oa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=oa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ac(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oa(n)}setAll(e){let n=ln.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=oa(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ac(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ac(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){hi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bn(oa(this.value))}}function k0(t){const e=[];return hi(t.fields,(n,r)=>{const s=new ln([n]);if(ac(r)){const i=k0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new wn(e,0,be.min(),be.min(),be.min(),bn.empty(),0)}static newFoundDocument(e,n,r,s){return new wn(e,1,n,be.min(),r,s,0)}static newNoDocument(e,n){return new wn(e,2,n,be.min(),be.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,be.min(),be.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n){this.position=e,this.inclusive=n}}function zg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=xe.comparator(xe.fromName(o.referenceValue),n.key):r=so(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n="asc"){this.field=e,this.dir=n}}function dC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{}class Ht extends N0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fC(e,n,r):n==="array-contains"?new gC(e,r):n==="in"?new vC(e,r):n==="not-in"?new yC(e,r):n==="array-contains-any"?new _C(e,r):new Ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pC(e,r):new mC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(so(n,this.value)):n!==null&&ai(this.value)===ai(n)&&this.matchesComparison(so(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends N0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new pr(e,n)}matches(e){return P0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function P0(t){return t.op==="and"}function R0(t){return hC(t)&&P0(t)}function hC(t){for(const e of t.filters)if(e instanceof pr)return!1;return!0}function Rh(t){if(t instanceof Ht)return t.field.canonicalString()+t.op.toString()+io(t.value);if(R0(t))return t.filters.map(e=>Rh(e)).join(",");{const e=t.filters.map(n=>Rh(n)).join(",");return`${t.op}(${e})`}}function j0(t,e){return t instanceof Ht?function(r,s){return s instanceof Ht&&r.op===s.op&&r.field.isEqual(s.field)&&kr(r.value,s.value)}(t,e):t instanceof pr?function(r,s){return s instanceof pr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&j0(o,s.filters[c]),!0):!1}(t,e):void Re()}function D0(t){return t instanceof Ht?function(n){return`${n.field.canonicalString()} ${n.op} ${io(n.value)}`}(t):t instanceof pr?function(n){return n.op.toString()+" {"+n.getFilters().map(D0).join(" ,")+"}"}(t):"Filter"}class fC extends Ht{constructor(e,n,r){super(e,n,r),this.key=xe.fromName(r.referenceValue)}matches(e){const n=xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class pC extends Ht{constructor(e,n){super(e,"in",n),this.keys=b0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mC extends Ht{constructor(e,n){super(e,"not-in",n),this.keys=b0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function b0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>xe.fromName(r.referenceValue))}class gC extends Ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yf(n)&&Ma(n.arrayValue,this.value)}}class vC extends Ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ma(this.value.arrayValue,n)}}class yC extends Ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ma(this.value.arrayValue,n)}}class _C extends Ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ma(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function $g(t,e=null,n=[],r=[],s=null,i=null,o=null){return new wC(t,e,n,r,s,i,o)}function Xf(t){const e=Me(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>io(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>io(r)).join(",")),e.ue=n}return e.ue}function Jf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!j0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bg(t.startAt,e.startAt)&&Bg(t.endAt,e.endAt)}function jh(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function EC(t,e,n,r,s,i,o,c){return new Za(t,e,n,r,s,i,o,c)}function wu(t){return new Za(t)}function qg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M0(t){return t.collectionGroup!==null}function aa(t){const e=Me(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new un(ln.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Bc(i,r))}),n.has(ln.keyField().canonicalString())||e.ce.push(new Bc(ln.keyField(),r))}return e.ce}function Ir(t){const e=Me(t);return e.le||(e.le=SC(e,aa(t))),e.le}function SC(t,e){if(t.limitType==="F")return $g(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Bc(s.field,i)});const n=t.endAt?new zc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zc(t.startAt.position,t.startAt.inclusive):null;return $g(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dh(t,e){const n=t.filters.concat([e]);return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bh(t,e,n){return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eu(t,e){return Jf(Ir(t),Ir(e))&&t.limitType===e.limitType}function O0(t){return`${Xf(Ir(t))}|lt:${t.limitType}`}function Si(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>D0(s)).join(", ")}]`),_u(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>io(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>io(s)).join(",")),`Target(${r})`}(Ir(t))}; limitType=${t.limitType})`}function Su(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):xe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of aa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const h=zg(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,aa(r),s)||r.endAt&&!function(o,c,u){const h=zg(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,aa(r),s))}(t,e)}function TC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function L0(t){return(e,n)=>{let r=!1;for(const s of aa(t)){const i=IC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function IC(t,e,n){const r=t.field.isKeyField()?xe.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),h=c.data.field(i);return u!==null&&h!==null?so(u,h):Re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return x0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new jt(xe.comparator);function Gr(){return CC}const V0=new jt(xe.comparator);function Go(...t){let e=V0;for(const n of t)e=e.insert(n.key,n);return e}function F0(t){let e=V0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gs(){return la()}function U0(){return la()}function la(){return new go(t=>t.toString(),(t,e)=>t.isEqual(e))}const xC=new jt(xe.comparator),AC=new un(xe.comparator);function $e(...t){let e=AC;for(const n of t)e=e.add(n);return e}const kC=new un(Xe);function NC(){return kC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function z0(t){return{integerValue:""+t}}function PC(t,e){return oC(e)?z0(e):Zf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(){this._=void 0}}function RC(t,e,n){return t instanceof Oa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Gf(i)&&(i=Qf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof La?$0(t,e):t instanceof Va?q0(t,e):function(s,i){const o=B0(s,i),c=Hg(o)+Hg(s.Pe);return Ph(o)&&Ph(s.Pe)?z0(c):Zf(s.serializer,c)}(t,e)}function jC(t,e,n){return t instanceof La?$0(t,e):t instanceof Va?q0(t,e):n}function B0(t,e){return t instanceof $c?function(r){return Ph(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Oa extends Tu{}class La extends Tu{constructor(e){super(),this.elements=e}}function $0(t,e){const n=H0(e);for(const r of t.elements)n.some(s=>kr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Va extends Tu{constructor(e){super(),this.elements=e}}function q0(t,e){let n=H0(e);for(const r of t.elements)n=n.filter(s=>!kr(s,r));return{arrayValue:{values:n}}}class $c extends Tu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Hg(t){return Ft(t.integerValue||t.doubleValue)}function H0(t){return Yf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.field=e,this.transform=n}}function bC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof La&&s instanceof La||r instanceof Va&&s instanceof Va?ro(r.elements,s.elements,kr):r instanceof $c&&s instanceof $c?kr(r.Pe,s.Pe):r instanceof Oa&&s instanceof Oa}(t.transform,e.transform)}class MC{constructor(e,n){this.version=e,this.transformResults=n}}class nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Iu{}function W0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ep(t.key,nr.none()):new el(t.key,t.data,nr.none());{const n=t.data,r=bn.empty();let s=new un(ln.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ms(t.key,r,new $n(s.toArray()),nr.none())}}function OC(t,e,n){t instanceof el?function(s,i,o){const c=s.value.clone(),u=Kg(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ms?function(s,i,o){if(!lc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Kg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(K0(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ca(t,e,n,r){return t instanceof el?function(i,o,c,u){if(!lc(i.precondition,o))return c;const h=i.value.clone(),p=Gg(i.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ms?function(i,o,c,u){if(!lc(i.precondition,o))return c;const h=Gg(i.fieldTransforms,u,o),p=o.data;return p.setAll(K0(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,c){return lc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function LC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=B0(r.transform,s||null);i!=null&&(n===null&&(n=bn.empty()),n.set(r.field,i))}return n||null}function Wg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ro(r,s,(i,o)=>bC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class el extends Iu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ms extends Iu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function K0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Kg(t,e,n){const r=new Map;ct(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,jC(o,c,n[s]))}return r}function Gg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,RC(i,o,e))}return r}class ep extends Iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VC extends Iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&OC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=U0();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=W0(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$e())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,(n,r)=>Wg(n,r))&&ro(this.baseMutations,e.baseMutations,(n,r)=>Wg(n,r))}}class tp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ct(e.mutations.length===r.length);let s=function(){return xC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new tp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,Ke;function BC(t){switch(t){default:return Re();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function G0(t){if(t===void 0)return Kr("GRPC error has no .code"),te.UNKNOWN;switch(t){case $t.OK:return te.OK;case $t.CANCELLED:return te.CANCELLED;case $t.UNKNOWN:return te.UNKNOWN;case $t.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case $t.INTERNAL:return te.INTERNAL;case $t.UNAVAILABLE:return te.UNAVAILABLE;case $t.UNAUTHENTICATED:return te.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case $t.NOT_FOUND:return te.NOT_FOUND;case $t.ALREADY_EXISTS:return te.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return te.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case $t.ABORTED:return te.ABORTED;case $t.OUT_OF_RANGE:return te.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return te.UNIMPLEMENTED;case $t.DATA_LOSS:return te.DATA_LOSS;default:return Re()}}(Ke=$t||($t={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new Js([4294967295,4294967295],0);function Qg(t){const e=$C().encode(t),n=new _0;return n.update(e),new Uint8Array(n.digest())}function Yg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Js([n,r],0),new Js([s,i],0)]}class np{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qo(`Invalid padding: ${n}`);if(r<0)throw new Qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Js.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Js.fromNumber(r)));return s.compare(qC)===1&&(s=new Js([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Qg(e),[r,s]=Yg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new np(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=Qg(e),[r,s]=Yg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,tl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cu(be.min(),s,new jt(Xe),Gr(),$e())}}class tl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tl(r,n,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Q0{constructor(e,n){this.targetId=e,this.me=n}}class Y0{constructor(e,n,r=hn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Xg{constructor(){this.fe=0,this.ge=Zg(),this.pe=hn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$e(),n=$e(),r=$e();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Re()}}),new tl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Zg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class HC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gr(),this.qe=Jg(),this.Qe=new jt(Xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(jh(i))if(r===0){const o=new xe(i.path);this.Ue(n,o,wn.newNoDocument(o,be.min()))}else ct(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=oi(r).toUint8Array()}catch(u){if(u instanceof A0)return Ra("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new np(o,s,i)}catch(u){return Ra(u instanceof Qo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&jh(c.target)){const u=new xe(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,wn.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=$e();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Cu(e,n,this.Qe,this.ke,r);return this.ke=Gr(),this.qe=Jg(),this.Qe=new jt(Xe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Xg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new un(Xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Jg(){return new jt(xe.comparator)}function Zg(){return new jt(xe.comparator)}const WC={asc:"ASCENDING",desc:"DESCENDING"},KC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GC={and:"AND",or:"OR"};class QC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mh(t,e){return t.useProto3Json||_u(e)?e:{value:e}}function qc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function X0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YC(t,e){return qc(t,e.toTimestamp())}function Cr(t){return ct(!!t),be.fromTimestamp(function(n){const r=Ps(n);return new Yt(r.seconds,r.nanos)}(t))}function rp(t,e){return Oh(t,e).canonicalString()}function Oh(t,e){const n=function(s){return new St(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function J0(t){const e=St.fromString(t);return ct(rw(e)),e}function Lh(t,e){return rp(t.databaseId,e.path)}function Cd(t,e){const n=J0(e);if(n.get(1)!==t.databaseId.projectId)throw new ve(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ve(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xe(ew(n))}function Z0(t,e){return rp(t.databaseId,e)}function XC(t){const e=J0(t);return e.length===4?St.emptyPath():ew(e)}function Vh(t){return new St(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ew(t){return ct(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ev(t,e,n){return{name:Lh(t,e),fields:n.value.mapValue.fields}}function JC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(ct(p===void 0||typeof p=="string"),hn.fromBase64String(p||"")):(ct(p===void 0||p instanceof Buffer||p instanceof Uint8Array),hn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const p=h.code===void 0?te.UNKNOWN:G0(h.code);return new ve(p,h.message||"")}(o);n=new Y0(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Cd(t,r.document.name),i=Cr(r.document.updateTime),o=r.document.createTime?Cr(r.document.createTime):be.min(),c=new bn({mapValue:{fields:r.document.fields}}),u=wn.newFoundDocument(s,i,o,c),h=r.targetIds||[],p=r.removedTargetIds||[];n=new cc(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Cd(t,r.document),i=r.readTime?Cr(r.readTime):be.min(),o=wn.newNoDocument(s,i),c=r.removedTargetIds||[];n=new cc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Cd(t,r.document),i=r.removedTargetIds||[];n=new cc([],i,s,null)}else{if(!("filter"in e))return Re();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new zC(s,i),c=r.targetId;n=new Q0(c,o)}}return n}function ZC(t,e){let n;if(e instanceof el)n={update:ev(t,e.key,e.value)};else if(e instanceof ep)n={delete:Lh(t,e.key)};else if(e instanceof Ms)n={update:ev(t,e.key,e.data),updateMask:lx(e.fieldMask)};else{if(!(e instanceof VC))return Re();n={verify:Lh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Oa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof La)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Va)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof $c)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:YC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Re()}(t,e.precondition)),n}function ex(t,e){return t&&t.length>0?(ct(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Cr(s.updateTime):Cr(i);return o.isEqual(be.min())&&(o=Cr(i)),new MC(o,s.transformResults||[])}(n,e))):[]}function tx(t,e){return{documents:[Z0(t,e.path)]}}function nx(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Z0(t,s);const i=function(h){if(h.length!==0)return nw(pr.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(_){return{field:Ti(_.field),direction:ix(_.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Mh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function rx(t){let e=XC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ct(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(g){const _=tw(g);return _ instanceof pr&&R0(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(_=>function(b){return new Bc(Ii(b.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(_))}(n.orderBy));let c=null;n.limit&&(c=function(g){let _;return _=typeof g=="object"?g.value:g,_u(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(g){const _=!!g.before,j=g.values||[];return new zc(j,_)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const _=!g.before,j=g.values||[];return new zc(j,_)}(n.endAt)),EC(e,s,o,i,c,"F",u,h)}function sx(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ii(n.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ii(n.unaryFilter.field);return Ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ii(n.unaryFilter.field);return Ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ii(n.unaryFilter.field);return Ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(t):t.fieldFilter!==void 0?function(n){return Ht.create(Ii(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pr.create(n.compositeFilter.filters.map(r=>tw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Re()}}(n.compositeFilter.op))}(t):Re()}function ix(t){return WC[t]}function ox(t){return KC[t]}function ax(t){return GC[t]}function Ti(t){return{fieldPath:t.canonicalString()}}function Ii(t){return ln.fromServerFormat(t.fieldPath)}function nw(t){return t instanceof Ht?function(n){if(n.op==="=="){if(Ug(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NAN"}};if(Fg(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ug(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NAN"}};if(Fg(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ti(n.field),op:ox(n.op),value:n.value}}}(t):t instanceof pr?function(n){const r=n.getFilters().map(s=>nw(s));return r.length===1?r[0]:{compositeFilter:{op:ax(n.op),filters:r}}}(t):Re()}function lx(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,r,s,i=be.min(),o=be.min(),c=hn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.ct=e}}function ux(t){const e=rx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.un=new hx}addToCollectionParentIndex(e,n){return this.un.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(Ns.min())}updateCollectionGroup(e,n,r){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class hx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new un(St.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new un(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new oo(0)}static kn(){return new oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.changes=new go(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ca(r.mutation,s,$n.empty(),Yt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=$e()){const s=Gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Go();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,$e()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=Gr();const o=la(),c=function(){return la()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Ms)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),ca(p.mutation,h,p.mutation.getFieldMask(),Yt.now())):o.set(h.key,$n.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var g;return c.set(h,new px(p,(g=o.get(h))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){const r=la();let s=new jt((o,c)=>o-c),i=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||$n.empty();p=c.applyToLocalView(h,p),r.set(u,p);const g=(s.get(c.batchId)||$e()).add(u);s=s.insert(c.batchId,g)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,g=U0();p.forEach(_=>{if(!i.has(_)){const j=W0(n.get(_),r.get(_));j!==null&&g.set(_,j),i=i.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return ae.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return xe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ae.resolve(Gs());let c=-1,u=i;return o.next(h=>ae.forEach(h,(p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),i.get(p)?ae.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{u=u.insert(p,_)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,$e())).next(p=>({batchId:c,changes:F0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xe(n)).next(r=>{let s=Go();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Go();return this.indexManager.getCollectionParents(e,i).next(c=>ae.forEach(c,u=>{const h=function(g,_){return new Za(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,wn.newInvalidDocument(p)))});let c=Go();return o.forEach((u,h)=>{const p=i.get(u);p!==void 0&&ca(p.mutation,h,$n.empty(),Yt.now()),Su(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ae.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Cr(s.createTime)}}(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:ux(s.bundledQuery),readTime:Cr(s.readTime)}}(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.overlays=new jt(xe.comparator),this.Ir=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gs();return ae.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),ae.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),ae.resolve()}getOverlaysForCollection(e,n,r){const s=Gs(),i=n.length+1,o=new xe(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new jt((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Gs(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Gs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=s)););return ae.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UC(n,r));let i=this.Ir.get(n);i===void 0&&(i=$e(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.Tr=new un(en.Er),this.dr=new un(en.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new en(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new en(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new xe(new St([])),r=new en(n,e),s=new en(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new xe(new St([])),r=new en(n,e),s=new en(n,e+1);let i=$e();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new en(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class en{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return xe.comparator(e.key,n.key)||Xe(e.wr,n.wr)}static Ar(e,n){return Xe(e.wr,n.wr)||xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new un(en.Er)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FC(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new en(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ae.resolve(o)}lookupMutationBatch(e,n){return ae.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return ae.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new en(n,0),s=new en(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);i.push(c)}),ae.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new un(Xe);return n.forEach(s=>{const i=new en(s,0),o=new en(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{r=r.add(c.wr)})}),ae.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;xe.isDocumentKey(i)||(i=i.child(""));const o=new en(new xe(i),0);let c=new un(Xe);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.wr)),!0)},o),ae.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ct(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ae.forEach(n.mutations,s=>{const i=new en(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new en(n,0),s=this.br.firstAfterOrEqual(r);return ae.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.Mr=e,this.docs=function(){return new jt(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ae.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let r=Gr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wn.newInvalidDocument(s))}),ae.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Gr();const o=n.path,c=new xe(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||nC(tC(p),r)<=0||(s.has(p.key)||Su(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Re()}Or(e,n){return ae.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ex(this)}getSize(e){return ae.resolve(this.size)}}class Ex extends fx{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),ae.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.persistence=e,this.Nr=new go(n=>Xf(n),Jf),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sp,this.targetCount=0,this.kr=oo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ae.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new oo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Kn(n),ae.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),ae.waitFor(i).next(()=>s)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ae.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ae.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ae.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ae.resolve(r)}containsKey(e,n){return ae.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Kf(0),this.Kr=!1,this.Kr=!0,this.$r=new yx,this.referenceDelegate=e(this),this.Ur=new Sx(this),this.indexManager=new dx,this.remoteDocumentCache=function(s){return new wx(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new cx(n),this.Gr=new gx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new _x(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ee("MemoryPersistence","Starting transaction:",e);const s=new Ix(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return ae.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Ix extends sC{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Jr=new sp,this.Yr=null}static Zr(e){return new ip(e)}get Xr(){if(this.Yr)return this.Yr;throw Re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ae.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Xr,r=>{const s=xe.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,be.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ae.or([()=>ae.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=$e(),s=$e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new op(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xI()?8:iC(Tn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Cx;return this.Xi(e,n,o).next(c=>{if(i.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Vo()<=qe.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",Si(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ae.resolve()):(Vo()<=qe.DEBUG&&Ee("QueryEngine","Query:",Si(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Vo()<=qe.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",Si(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ir(n))):ae.resolve())}Yi(e,n){if(qg(n))return ae.resolve(null);let r=Ir(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=bh(n,null,"F"),r=Ir(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=$e(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,c);return this.ns(n,h,o,u.readTime)?this.Yi(e,bh(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return qg(n)||s.isEqual(be.min())?ae.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?ae.resolve(null):(Vo()<=qe.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Si(n)),this.rs(e,o,n,eC(s,-1)).next(c=>c))})}ts(e,n){let r=new un(L0(e));return n.forEach((s,i)=>{Su(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Vo()<=qe.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",Si(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ns.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new jt(Xe),this._s=new go(i=>Xf(i),Jf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mx(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function kx(t,e,n,r){return new Ax(t,e,n,r)}async function sw(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=$e();for(const h of s){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})}function Nx(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,p){const g=h.batch,_=g.keys();let j=ae.resolve();return _.forEach(b=>{j=j.next(()=>p.getEntry(u,b)).next(R=>{const z=h.docVersions.get(b);ct(z!==null),R.version.compareTo(z)<0&&(g.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),p.addEntry(R)))})}),j.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=$e();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function iw(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Px(t,e){const n=Me(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((p,g)=>{const _=s.get(g);if(!_)return;c.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,g)));let j=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?j=j.withResumeToken(hn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):p.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(p.resumeToken,r)),s=s.insert(g,j),function(R,z,N){return R.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(_,j,p)&&c.push(n.Ur.updateTargetData(i,j))});let u=Gr(),h=$e();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(Rx(i,o,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(be.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return ae.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function Rx(t,e,n){let r=$e(),s=$e();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Gr();return n.forEach((c,u)=>{const h=i.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(be.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Ee("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function jx(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dx(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,ae.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new hs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Fh(t,e,n){const r=Me(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ja(o))throw o;Ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function tv(t,e,n){const r=Me(t);let s=be.min(),i=$e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const g=Me(u),_=g._s.get(p);return _!==void 0?ae.resolve(g.os.get(_)):g.Ur.getTargetData(h,p)}(r,o,Ir(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:be.min(),n?i:$e())).next(c=>(bx(r,TC(e),c),{documents:c,Ts:i})))}function bx(t,e,n){let r=t.us.get(e)||be.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class nv{constructor(){this.activeTargetIds=NC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mx{constructor(){this.so=new nv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function xd(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class Fx extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const c=xd(),u=this.xo(n,r.toUriEncodedString());Ee("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,u,h,s).then(p=>(Ee("RestConnection",`Received RPC '${n}' ${c}: `,p),p),p=>{throw Ra("RestConnection",`RPC '${n}' ${c} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,c){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=Lx[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=xd();return new Promise((o,c)=>{const u=new w0;u.setWithCredentials(!0),u.listenOnce(E0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case oc.NO_ERROR:const p=u.getResponseJson();Ee(yn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case oc.TIMEOUT:Ee(yn,`RPC '${e}' ${i} timed out`),c(new ve(te.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:const g=u.getStatus();if(Ee(yn,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const j=_==null?void 0:_.error;if(j&&j.status&&j.message){const b=function(z){const N=z.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(N)>=0?N:te.UNKNOWN}(j.status);c(new ve(b,j.message))}else c(new ve(te.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ve(te.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{Ee(yn,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);Ee(yn,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=xd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I0(),c=T0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");Ee(yn,`Creating RPC '${e}' stream ${s}: ${p}`,u);const g=o.createWebChannel(p,u);let _=!1,j=!1;const b=new Vx({Io:z=>{j?Ee(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,z):(_||(Ee(yn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),_=!0),Ee(yn,`RPC '${e}' stream ${s} sending:`,z),g.send(z))},To:()=>g.close()}),R=(z,N,w)=>{z.listen(N,A=>{try{w(A)}catch(O){setTimeout(()=>{throw O},0)}})};return R(g,Ko.EventType.OPEN,()=>{j||(Ee(yn,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),R(g,Ko.EventType.CLOSE,()=>{j||(j=!0,Ee(yn,`RPC '${e}' stream ${s} transport closed`),b.So())}),R(g,Ko.EventType.ERROR,z=>{j||(j=!0,Ra(yn,`RPC '${e}' stream ${s} transport errored:`,z),b.So(new ve(te.UNAVAILABLE,"The operation could not be completed")))}),R(g,Ko.EventType.MESSAGE,z=>{var N;if(!j){const w=z.data[0];ct(!!w);const A=w,O=A.error||((N=A[0])===null||N===void 0?void 0:N.error);if(O){Ee(yn,`RPC '${e}' stream ${s} received error:`,O);const $=O.status;let K=function(T){const E=$t[T];if(E!==void 0)return G0(E)}($),v=O.message;K===void 0&&(K=te.INTERNAL,v="Unknown error status: "+$+" with message "+O.message),j=!0,b.So(new ve(K,v)),g.close()}else Ee(yn,`RPC '${e}' stream ${s} received:`,w),b.bo(w)}}),R(c,S0.STAT_EVENT,z=>{z.stat===kh.PROXY?Ee(yn,`RPC '${e}' stream ${s} detected buffering proxy`):z.stat===kh.NOPROXY&&Ee(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Ad(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){return new QC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n,r,s,i,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ow(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Kr(n.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ve(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ux extends aw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=JC(this.serializer,e),r=function(i){if(!("targetChange"in i))return be.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?be.min():o.readTime?Cr(o.readTime):be.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Vh(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=jh(u)?{documents:tx(i,u)}:{query:nx(i,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=X0(i,o.resumeToken);const h=Mh(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(be.min())>0){c.readTime=qc(i,o.snapshotVersion.toTimestamp());const h=Mh(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=sx(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Vh(this.serializer),n.removeTarget=e,this.a_(n)}}class zx extends aw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ct(!!e.streamToken),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ex(e.writeResults,e.commitTime),r=Cr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Vh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ZC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ve(te.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Oh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ve(te.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Oh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(te.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class $x{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kr(n),this.D_=!1):Ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{fi(this)&&(Ee("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=Me(u);h.L_.add(4),await nl(h),h.q_.set("Unknown"),h.L_.delete(4),await Au(h)}(this))})}),this.q_=new $x(r,s)}}async function Au(t){if(fi(t))for(const e of t.B_)await e(!0)}async function nl(t){for(const e of t.B_)await e(!1)}function lw(t,e){const n=Me(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),up(n)?cp(n):vo(n).r_()&&lp(n,e))}function ap(t,e){const n=Me(t),r=vo(n);n.N_.delete(e),r.r_()&&cw(n,e),n.N_.size===0&&(r.r_()?r.o_():fi(n)&&n.q_.set("Unknown"))}function lp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vo(t).A_(e)}function cw(t,e){t.Q_.xe(e),vo(t).R_(e)}function cp(t){t.Q_=new HC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),vo(t).start(),t.q_.v_()}function up(t){return fi(t)&&!vo(t).n_()&&t.N_.size>0}function fi(t){return Me(t).L_.size===0}function uw(t){t.Q_=void 0}async function Hx(t){t.q_.set("Online")}async function Wx(t){t.N_.forEach((e,n)=>{lp(t,e)})}async function Kx(t,e){uw(t),up(t)?(t.q_.M_(e),cp(t)):t.q_.set("Unknown")}async function Gx(t,e,n){if(t.q_.set("Online"),e instanceof Y0&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){Ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hc(t,r)}else if(e instanceof cc?t.Q_.Ke(e):e instanceof Q0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(be.min()))try{const r=await iw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(hn.EMPTY_BYTE_STRING,p.snapshotVersion)),cw(i,u);const g=new hs(p.target,u,h,p.sequenceNumber);lp(i,g)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Ee("RemoteStore","Failed to raise snapshot:",r),await Hc(t,r)}}async function Hc(t,e,n){if(!Ja(e))throw e;t.L_.add(1),await nl(t),t.q_.set("Offline"),n||(n=()=>iw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Au(t)})}function dw(t,e){return e().catch(n=>Hc(t,n,e))}async function ku(t){const e=Me(t),n=Rs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Qx(e);)try{const s=await jx(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Yx(e,s)}catch(s){await Hc(e,s)}hw(e)&&fw(e)}function Qx(t){return fi(t)&&t.O_.length<10}function Yx(t,e){t.O_.push(e);const n=Rs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function hw(t){return fi(t)&&!Rs(t).n_()&&t.O_.length>0}function fw(t){Rs(t).start()}async function Xx(t){Rs(t).p_()}async function Jx(t){const e=Rs(t);for(const n of t.O_)e.m_(n.mutations)}async function Zx(t,e,n){const r=t.O_.shift(),s=tp.from(r,e,n);await dw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ku(t)}async function eA(t,e){e&&Rs(t).V_&&await async function(r,s){if(function(o){return BC(o)&&o!==te.ABORTED}(s.code)){const i=r.O_.shift();Rs(r).s_(),await dw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ku(r)}}(t,e),hw(t)&&fw(t)}async function sv(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),Ee("RemoteStore","RemoteStore received new credentials");const r=fi(n);n.L_.add(3),await nl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Au(n)}async function tA(t,e){const n=Me(t);e?(n.L_.delete(2),await Au(n)):e||(n.L_.add(2),await nl(n),n.q_.set("Unknown"))}function vo(t){return t.K_||(t.K_=function(n,r,s){const i=Me(n);return i.w_(),new Ux(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Hx.bind(null,t),Ro:Wx.bind(null,t),mo:Kx.bind(null,t),d_:Gx.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),up(t)?cp(t):t.q_.set("Unknown")):(await t.K_.stop(),uw(t))})),t.K_}function Rs(t){return t.U_||(t.U_=function(n,r,s){const i=Me(n);return i.w_(),new zx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Xx.bind(null,t),mo:eA.bind(null,t),f_:Jx.bind(null,t),g_:Zx.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ku(t)):(await t.U_.stop(),t.O_.length>0&&(Ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new dp(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(t,e){if(Kr("AsyncQueue",`${e}: ${t}`),Ja(t))return new ve(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||xe.comparator(n.key,r.key):(n,r)=>xe.comparator(n.key,r.key),this.keyedMap=Go(),this.sortedSet=new jt(this.comparator)}static emptySet(e){return new qi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.W_=new jt(xe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ao{constructor(e,n,r,s,i,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new ao(e,n,qi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class rA{constructor(){this.queries=ov(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Me(n),i=s.queries;s.queries=ov(),i.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new ve(te.ABORTED,"Firestore shutting down"))}}function ov(){return new go(t=>O0(t),Eu)}async function fp(t,e){const n=Me(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new nA,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=hp(o,`Initialization of query '${Si(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&mp(n)}async function pp(t,e){const n=Me(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sA(t,e){const n=Me(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&mp(n)}function iA(t,e,n){const r=Me(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function mp(t){t.Y_.forEach(e=>{e.next()})}var Uh,av;(av=Uh||(Uh={})).ea="default",av.Cache="cache";class gp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Uh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this.key=e}}class mw{constructor(e){this.key=e}}class oA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=$e(),this.mutatedKeys=$e(),this.Aa=L0(e),this.Ra=new qi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new iv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,g)=>{const _=s.get(p),j=Su(this.query,g)?g:null,b=!!_&&this.mutatedKeys.has(_.key),R=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let z=!1;_&&j?_.data.isEqual(j.data)?b!==R&&(r.track({type:3,doc:j}),z=!0):this.ga(_,j)||(r.track({type:2,doc:j}),z=!0,(u&&this.Aa(j,u)>0||h&&this.Aa(j,h)<0)&&(c=!0)):!_&&j?(r.track({type:0,doc:j}),z=!0):_&&!j&&(r.track({type:1,doc:_}),z=!0,(u||h)&&(c=!0)),z&&(j?(o=o.add(j),i=R?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,g)=>function(j,b){const R=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return R(j)-R(b)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new ao(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=$e(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new mw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new pw(r))}),n}ba(e){this.Ta=e.Ts,this.da=$e();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class aA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class lA{constructor(e){this.key=e,this.va=!1}}class cA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new go(c=>O0(c),Eu),this.Ma=new Map,this.xa=new Set,this.Oa=new jt(xe.comparator),this.Na=new Map,this.La=new sp,this.Ba={},this.ka=new Map,this.qa=oo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uA(t,e,n=!0){const r=Ew(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await gw(r,e,n,!0),s}async function dA(t,e){const n=Ew(t);await gw(n,e,!0,!1)}async function gw(t,e,n,r){const s=await Dx(t.localStore,Ir(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await hA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&lw(t.remoteStore,s),c}async function hA(t,e,n,r,s){t.Ka=(g,_,j)=>async function(R,z,N,w){let A=z.view.ma(N);A.ns&&(A=await tv(R.localStore,z.query,!1).then(({documents:v})=>z.view.ma(v,A)));const O=w&&w.targetChanges.get(z.targetId),$=w&&w.targetMismatches.get(z.targetId)!=null,K=z.view.applyChanges(A,R.isPrimaryClient,O,$);return cv(R,z.targetId,K.wa),K.snapshot}(t,g,_,j);const i=await tv(t.localStore,e,!0),o=new oA(e,i.Ts),c=o.ma(i.documents),u=tl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(c,t.isPrimaryClient,u);cv(t,n,h.wa);const p=new aA(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function fA(t,e,n){const r=Me(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Eu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ap(r.remoteStore,s.targetId),zh(r,s.targetId)}).catch(Xa)):(zh(r,s.targetId),await Fh(r.localStore,s.targetId,!0))}async function pA(t,e){const n=Me(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ap(n.remoteStore,r.targetId))}async function mA(t,e,n){const r=SA(t);try{const s=await function(o,c){const u=Me(o),h=Yt.now(),p=c.reduce((j,b)=>j.add(b.key),$e());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",j=>{let b=Gr(),R=$e();return u.cs.getEntries(j,p).next(z=>{b=z,b.forEach((N,w)=>{w.isValidDocument()||(R=R.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(j,b)).next(z=>{g=z;const N=[];for(const w of c){const A=LC(w,g.get(w.key).overlayedDocument);A!=null&&N.push(new Ms(w.key,A,k0(A.value.mapValue),nr.exists(!0)))}return u.mutationQueue.addMutationBatch(j,h,N,c)}).next(z=>{_=z;const N=z.applyToLocalDocumentSet(g,R);return u.documentOverlayCache.saveOverlays(j,z.batchId,N)})}).then(()=>({batchId:_.batchId,changes:F0(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new jt(Xe)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await rl(r,s.changes),await ku(r.remoteStore)}catch(s){const i=hp(s,"Failed to persist write");n.reject(i)}}async function vw(t,e){const n=Me(t);try{const r=await Px(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ct(o.va):s.removedDocuments.size>0&&(ct(o.va),o.va=!1))}),await rl(n,r,e)}catch(r){await Xa(r)}}function lv(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=Me(o);u.onlineState=c;let h=!1;u.queries.forEach((p,g)=>{for(const _ of g.j_)_.Z_(c)&&(h=!0)}),h&&mp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gA(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new jt(xe.comparator);o=o.insert(i,wn.newNoDocument(i,be.min()));const c=$e().add(i),u=new Cu(be.min(),new Map,new jt(Xe),o,c);await vw(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),vp(r)}else await Fh(r.localStore,e,!1).then(()=>zh(r,e,n)).catch(Xa)}async function vA(t,e){const n=Me(t),r=e.batch.batchId;try{const s=await Nx(n.localStore,e);_w(n,r,null),yw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rl(n,s)}catch(s){await Xa(s)}}async function yA(t,e,n){const r=Me(t);try{const s=await function(o,c){const u=Me(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next(g=>(ct(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);_w(r,e,n),yw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rl(r,s)}catch(s){await Xa(s)}}function yw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function _w(t,e,n){const r=Me(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function zh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ww(t,r)})}function ww(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ap(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vp(t))}function cv(t,e,n){for(const r of n)r instanceof pw?(t.La.addReference(r.key,e),_A(t,r)):r instanceof mw?(Ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ww(t,r.key)):Re()}function _A(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),vp(t))}function vp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new xe(St.fromString(e)),r=t.qa.next();t.Na.set(r,new lA(n)),t.Oa=t.Oa.insert(n,r),lw(t.remoteStore,new hs(Ir(wu(n.path)),r,"TargetPurposeLimboResolution",Kf.oe))}}async function rl(t,e,n){const r=Me(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=op.Wi(u.targetId,h);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const p=Me(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>ae.forEach(h,_=>ae.forEach(_.$i,j=>p.persistence.referenceDelegate.addReference(g,_.targetId,j)).next(()=>ae.forEach(_.Ui,j=>p.persistence.referenceDelegate.removeReference(g,_.targetId,j)))))}catch(g){if(!Ja(g))throw g;Ee("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const j=p.os.get(_),b=j.snapshotVersion,R=j.withLastLimboFreeSnapshotVersion(b);p.os=p.os.insert(_,R)}}}(r.localStore,i))}async function wA(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){Ee("SyncEngine","User change. New user:",e.toKey());const r=await sw(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new ve(te.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rl(n,r.hs)}}function EA(t,e){const n=Me(t),r=n.Na.get(e);if(r&&r.va)return $e().add(r.key);{let s=$e();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function Ew(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gA.bind(null,e),e.Ca.d_=sA.bind(null,e.eventManager),e.Ca.$a=iA.bind(null,e.eventManager),e}function SA(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yA.bind(null,e),e}class Fa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return kx(this.persistence,new xx,e.initialUser,this.serializer)}Ga(e){return new Tx(ip.Zr,this.serializer)}Wa(e){return new Mx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fa.provider={build:()=>new Fa};class Wc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wA.bind(null,this.syncEngine),await tA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rA}()}createDatastore(e){const n=xu(e.databaseInfo.databaseId),r=function(i){return new Fx(i)}(e.databaseInfo);return function(i,o,c,u){return new Bx(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new qx(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>lv(this.syncEngine,n,0),function(){return rv.D()?new rv:new Ox}())}createSyncEngine(e,n){return function(s,i,o,c,u,h,p){const g=new cA(s,i,o,c,u,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Me(s);Ee("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await nl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Wc.provider={build:()=>new Wc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=jn.UNAUTHENTICATED,this.clientId=C0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kd(t,e){t.asyncQueue.verifyOperationInProgress(),Ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await sw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IA(t);Ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>sv(e.remoteStore,s)),t._onlineComponents=e}async function IA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await kd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ra("Error using user provided cache. Falling back to memory cache: "+n),await kd(t,new Fa)}}else Ee("FirestoreClient","Using default OfflineComponentProvider"),await kd(t,new Fa);return t._offlineComponents}async function Sw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee("FirestoreClient","Using user provided OnlineComponentProvider"),await uv(t,t._uninitializedComponentsProvider._online)):(Ee("FirestoreClient","Using default OnlineComponentProvider"),await uv(t,new Wc))),t._onlineComponents}function CA(t){return Sw(t).then(e=>e.syncEngine)}async function Kc(t){const e=await Sw(t),n=e.eventManager;return n.onListen=uA.bind(null,e.syncEngine),n.onUnlisten=fA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pA.bind(null,e.syncEngine),n}function xA(t,e,n={}){const r=new Ur;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,h){const p=new yp({next:_=>{p.Za(),o.enqueueAndForget(()=>pp(i,g));const j=_.docs.has(c);!j&&_.fromCache?h.reject(new ve(te.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&_.fromCache&&u&&u.source==="server"?h.reject(new ve(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new gp(wu(c.path),p,{includeMetadataChanges:!0,_a:!0});return fp(i,g)}(await Kc(t),t.asyncQueue,e,n,r)),r.promise}function AA(t,e,n={}){const r=new Ur;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,h){const p=new yp({next:_=>{p.Za(),o.enqueueAndForget(()=>pp(i,g)),_.fromCache&&u.source==="server"?h.reject(new ve(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new gp(c,p,{includeMetadataChanges:!0,_a:!0});return fp(i,g)}(await Kc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t,e,n){if(!n)throw new ve(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kA(t,e,n,r){if(e===!0&&r===!0)throw new ve(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hv(t){if(!xe.isDocumentKey(t))throw new ve(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fv(t){if(xe.isDocumentKey(t))throw new ve(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re()}function Hn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nu(t);throw new ve(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _p{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new W1;switch(r.type){case"firstParty":return new Q1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=dv.get(n);r&&(Ee("ComponentProvider","Removing Datastore"),dv.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pi(this.firestore,e,this._query)}}class En{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class Is extends pi{constructor(e,n,r){super(e,n,wu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new xe(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function Zt(t,e,...n){if(t=kt(t),Iw("collection","path",e),t instanceof _p){const r=St.fromString(e,...n);return fv(r),new Is(t,null,r)}{if(!(t instanceof En||t instanceof Is))throw new ve(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(St.fromString(e,...n));return fv(r),new Is(t.firestore,null,r)}}function Vt(t,e,...n){if(t=kt(t),arguments.length===1&&(e=C0.newId()),Iw("doc","path",e),t instanceof _p){const r=St.fromString(e,...n);return hv(r),new En(t,null,new xe(r))}{if(!(t instanceof En||t instanceof Is))throw new ve(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(St.fromString(e,...n));return hv(r),new En(t.firestore,t instanceof Is?t.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ow(this,"async_queue_retry"),this.Vu=()=>{const r=Ad();r&&Ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ad();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ad();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ur;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ja(e))throw e;Ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Kr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=dp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function gv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Qr extends _p{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new mv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mv(e),this._firestoreClient=void 0,await e}}}function NA(t,e,n){n||(n="(default)");const r=yu(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Na(i,e))return s;throw new ve(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ve(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Pu(t){if(t._terminated)throw new ve(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PA(t),t._firestoreClient}function PA(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,h,p){return new lC(c,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Tw(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new TA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lo(hn.fromBase64String(e))}catch(n){throw new ve(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new lo(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=/^__.*__$/;class jA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new el(e,this.data,n,this.fieldTransforms)}}class Cw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Sp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xw(this.Cu)&&RA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class DA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xu(e)}Qu(e,n,r,s=!1){return new Sp({Cu:e,methodName:n,qu:r,path:ln.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Du(t){const e=t._freezeSettings(),n=xu(t._databaseId);return new DA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Aw(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Ip("Data must be an object, but it was:",o,r);const c=kw(r,o);let u,h;if(i.merge)u=new $n(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const g of i.mergeFields){const _=Bh(e,g,n);if(!o.contains(_))throw new ve(te.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Pw(p,_)||p.push(_)}u=new $n(p),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new jA(new bn(c),u,h)}class bu extends ju{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bu}}class Tp extends ju{_toFieldTransform(e){return new DC(e.path,new Oa)}isEqual(e){return e instanceof Tp}}function bA(t,e,n,r){const s=t.Qu(1,e,n);Ip("Data must be an object, but it was:",s,r);const i=[],o=bn.empty();hi(r,(u,h)=>{const p=Cp(e,u,n);h=kt(h);const g=s.Nu(p);if(h instanceof bu)i.push(p);else{const _=sl(h,g);_!=null&&(i.push(p),o.set(p,_))}});const c=new $n(i);return new Cw(o,c,s.fieldTransforms)}function MA(t,e,n,r,s,i){const o=t.Qu(1,e,n),c=[Bh(e,r,n)],u=[s];if(i.length%2!=0)throw new ve(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<i.length;_+=2)c.push(Bh(e,i[_])),u.push(i[_+1]);const h=[],p=bn.empty();for(let _=c.length-1;_>=0;--_)if(!Pw(h,c[_])){const j=c[_];let b=u[_];b=kt(b);const R=o.Nu(j);if(b instanceof bu)h.push(j);else{const z=sl(b,R);z!=null&&(h.push(j),p.set(j,z))}}const g=new $n(h);return new Cw(p,g,o.fieldTransforms)}function OA(t,e,n,r=!1){return sl(n,t.Qu(r?4:3,e))}function sl(t,e){if(Nw(t=kt(t)))return Ip("Unsupported field value:",e,t),kw(t,e);if(t instanceof ju)return function(r,s){if(!xw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=sl(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Yt.fromDate(r);return{timestampValue:qc(s.serializer,i)}}if(r instanceof Yt){const i=new Yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qc(s.serializer,i)}}if(r instanceof wp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lo)return{bytesValue:X0(s.serializer,r._byteString)};if(r instanceof En){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ep)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Zf(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Nu(r)}`)}(t,e)}function kw(t,e){const n={};return x0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(t,(r,s)=>{const i=sl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Nw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Yt||t instanceof wp||t instanceof lo||t instanceof En||t instanceof ju||t instanceof Ep)}function Ip(t,e,n){if(!Nw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Nu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Bh(t,e,n){if((e=kt(e))instanceof Ru)return e._internalPath;if(typeof e=="string")return Cp(t,e);throw Gc("Field path arguments must be of type string or ",t,!1,void 0,n)}const LA=new RegExp("[~\\*/\\[\\]]");function Cp(t,e,n){if(e.search(LA)>=0)throw Gc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ru(...e.split("."))._internalPath}catch{throw Gc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new ve(te.INVALID_ARGUMENT,c+t+u)}function Pw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VA extends Rw{data(){return super.data()}}function xp(t,e){return typeof e=="string"?Cp(t,e):e instanceof Ru?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ve(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}class FA extends Ap{}function Fo(t,e,...n){let r=[];e instanceof Ap&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof kp).length,c=i.filter(u=>u instanceof Mu).length;if(o>1||o>0&&c>0)throw new ve(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Mu extends FA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mu(e,n,r)}_apply(e){const n=this._parse(e);return Dw(e._query,n),new pi(e.firestore,e.converter,Dh(e._query,n))}_parse(e){const n=Du(e.firestore);return function(i,o,c,u,h,p,g){let _;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ve(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){yv(g,p);const j=[];for(const b of g)j.push(vv(u,i,b));_={arrayValue:{values:j}}}else _=vv(u,i,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||yv(g,p),_=OA(c,o,g,p==="in"||p==="not-in");return Ht.create(h,p,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Uo(t,e,n){const r=e,s=xp("where",t);return Mu._create(s,r,n)}class kp extends Ap{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)Dw(o,u),o=Dh(o,u)}(e._query,n),new pi(e.firestore,e.converter,Dh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function vv(t,e,n){if(typeof(n=kt(n))=="string"){if(n==="")throw new ve(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M0(e)&&n.indexOf("/")!==-1)throw new ve(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(St.fromString(n));if(!xe.isDocumentKey(r))throw new ve(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vg(t,new xe(r))}if(n instanceof En)return Vg(t,n._key);throw new ve(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nu(n)}.`)}function yv(t,e){if(!Array.isArray(t)||t.length===0)throw new ve(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dw(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ve(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UA{convertValue(e,n="none"){switch(ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ft(o.doubleValue));return new Ep(i)}convertGeoPoint(e){return new wp(Ft(e.latitude),Ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Da(e));default:return null}}convertTimestamp(e){const n=Ps(e);return new Yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=St.fromString(e);ct(rw(r));const s=new ba(r.get(1),r.get(3)),i=new xe(r.popFirst(5));return s.isEqual(n)||Kr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mw extends Rw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class uc extends Mw{data(e={}){return super.data(e)}}class Ow{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Yo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new uc(this._firestore,this._userDataWriter,r.key,r,new Yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new uc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Yo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new uc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Yo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:zA(c.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){t=Hn(t,En);const e=Hn(t.firestore,Qr);return xA(Pu(e),t._key).then(n=>Lw(e,t,n))}class Np extends UA{constructor(e){super(),this.firestore=e}convertBytes(e){return new lo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function Us(t){t=Hn(t,pi);const e=Hn(t.firestore,Qr),n=Pu(e),r=new Np(e);return jw(t._query),AA(n,t._query).then(s=>new Ow(e,r,t,s))}function ua(t,e,n){t=Hn(t,En);const r=Hn(t.firestore,Qr),s=bw(t.converter,e,n);return Ou(r,[Aw(Du(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,nr.none())])}function fs(t,e,n,...r){t=Hn(t,En);const s=Hn(t.firestore,Qr),i=Du(s);let o;return o=typeof(e=kt(e))=="string"||e instanceof Ru?MA(i,"updateDoc",t._key,e,n,r):bA(i,"updateDoc",t._key,e),Ou(s,[o.toMutation(t._key,nr.exists(!0))])}function Hi(t){return Ou(Hn(t.firestore,Qr),[new ep(t._key,nr.none())])}function Hl(t,e){const n=Hn(t.firestore,Qr),r=Vt(t),s=bw(t.converter,e);return Ou(n,[Aw(Du(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}function qs(t,...e){var n,r,s;t=kt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||gv(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(gv(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,h,p;if(t instanceof En)h=Hn(t.firestore,Qr),p=wu(t._key.path),u={next:g=>{e[o]&&e[o](Lw(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=Hn(t,pi);h=Hn(g.firestore,Qr),p=g._query;const _=new Np(h);u={next:j=>{e[o]&&e[o](new Ow(h,_,g,j))},error:e[o+1],complete:e[o+2]},jw(t._query)}return function(_,j,b,R){const z=new yp(R),N=new gp(j,z,b);return _.asyncQueue.enqueueAndForget(async()=>fp(await Kc(_),N)),()=>{z.Za(),_.asyncQueue.enqueueAndForget(async()=>pp(await Kc(_),N))}}(Pu(h),p,c,u)}function Ou(t,e){return function(r,s){const i=new Ur;return r.asyncQueue.enqueueAndForget(async()=>mA(await CA(r),s,i)),i.promise}(Pu(t),e)}function Lw(t,e,n){const r=n.docs.get(e._key),s=new Np(t);return new Mw(t,s,e._key,r,new Yo(n.hasPendingWrites,n.fromCache),e.converter)}class $A{constructor(e){this.kind="memory",this._onlineComponentProvider=Wc.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Fa.provider}toJSON(){return{kind:this.kind}}}function qA(t){return new $A(t)}function _v(){return new Tp("serverTimestamp")}(function(e,n=!0){(function(s){mo=s})(po),si(new ks("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Qr(new K1(r.getProvider("auth-internal")),new X1(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ve(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Tr(Dg,"4.7.3",e),Tr(Dg,"4.7.3","esm2017")})();function Pp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HA=Vw,Fw=new Qa("auth","Firebase",Vw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new qf("@firebase/auth");function WA(t,...e){Qc.logLevel<=qe.WARN&&Qc.warn(`Auth (${po}): ${t}`,...e)}function dc(t,...e){Qc.logLevel<=qe.ERROR&&Qc.error(`Auth (${po}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,...e){throw Rp(t,...e)}function xr(t,...e){return Rp(t,...e)}function Uw(t,e,n){const r=Object.assign(Object.assign({},HA()),{[e]:n});return new Qa("auth","Firebase",r).create(e,{appName:t.name})}function zr(t){return Uw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Fw.create(t,...e)}function Pe(t,e,...n){if(!t)throw Rp(e,...n)}function Or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dc(e),new Error(e)}function Yr(t,e){t||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function KA(){return wv()==="http:"||wv()==="https:"}function wv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KA()||TI()||"connection"in navigator)?navigator.onLine:!0}function QA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yr(n>e,"Short delay should be less than long delay!"),this.isMobile=wI()||II()}get(){return GA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t,e){Yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new il(3e4,6e4);function Os(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ls(t,e,n,r,s={}){return Bw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Ya(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return SI()||(h.referrerPolicy="no-referrer"),zw.fetch()($w(t,t.config.apiHost,n,c),h)})}async function Bw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},YA),e);try{const s=new ZA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Wl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Wl(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Uw(t,p,h);mr(t,p)}}catch(s){if(s instanceof Nr)throw s;mr(t,"network-request-failed",{message:String(s)})}}async function ol(t,e,n,r,s={}){const i=await Ls(t,e,n,r,s);return"mfaPendingCredential"in i&&mr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function $w(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?jp(t.config,s):`${t.config.apiScheme}://${s}`}function JA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xr(this.auth,"network-request-failed")),XA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=xr(t,e,r);return s.customData._tokenResponse=n,s}function Ev(t){return t!==void 0&&t.enterprise!==void 0}class ek{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return JA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function tk(t,e){return Ls(t,"GET","/v2/recaptchaConfig",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(t,e){return Ls(t,"POST","/v1/accounts:delete",e)}async function qw(t,e){return Ls(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rk(t,e=!1){const n=kt(t),r=await n.getIdToken(e),s=Dp(r);Pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:da(Nd(s.auth_time)),issuedAtTime:da(Nd(s.iat)),expirationTime:da(Nd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Nd(t){return Number(t)*1e3}function Dp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dc("JWT malformed, contained fewer than 3 sections"),null;try{const s=c0(n);return s?JSON.parse(s):(dc("Failed to decode base64 JWT payload"),null)}catch(s){return dc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Sv(t){const e=Dp(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Nr&&sk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=da(this.lastLoginAt),this.creationTime=da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ua(t,qw(n,{idToken:r}));Pe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Hw(i.providerUserInfo):[],c=ak(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new qh(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function ok(t){const e=kt(t);await Yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ak(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Hw(t){return t.map(e=>{var{providerId:n}=e,r=Pp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(t,e){const n=await Bw(t,{},async()=>{const r=Ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=$w(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",zw.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ck(t,e){return Ls(t,"POST","/v2/accounts:revokeToken",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=Sv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await lk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Wi;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wi,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Lr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Pp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ik(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ua(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rk(this,e)}reload(){return ok(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wr(this.auth.app))return Promise.reject(zr(this.auth));const e=await this.getIdToken();return await Ua(this,nk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,h,p;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(s=n.email)!==null&&s!==void 0?s:void 0,j=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,z=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,N=(h=n.createdAt)!==null&&h!==void 0?h:void 0,w=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:A,emailVerified:O,isAnonymous:$,providerData:K,stsTokenManager:v}=n;Pe(A&&v,e,"internal-error");const y=Wi.fromJSON(this.name,v);Pe(typeof A=="string",e,"internal-error"),ts(g,e.name),ts(_,e.name),Pe(typeof O=="boolean",e,"internal-error"),Pe(typeof $=="boolean",e,"internal-error"),ts(j,e.name),ts(b,e.name),ts(R,e.name),ts(z,e.name),ts(N,e.name),ts(w,e.name);const T=new Lr({uid:A,auth:e,email:_,emailVerified:O,displayName:g,isAnonymous:$,photoURL:b,phoneNumber:j,tenantId:R,stsTokenManager:y,createdAt:N,lastLoginAt:w});return K&&Array.isArray(K)&&(T.providerData=K.map(E=>Object.assign({},E))),z&&(T._redirectEventId=z),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new Wi;s.updateFromServerResponse(n);const i=new Lr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Yc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Hw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Wi;c.updateFromIdToken(r);const u=new Lr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new qh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Map;function Vr(t){Yr(t instanceof Function,"Expected a class definition");let e=Tv.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ww.type="NONE";const Iv=Ww;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ki{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=hc(this.userKey,s.apiKey,i),this.fullPersistenceKey=hc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Lr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ki(Vr(Iv),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Vr(Iv);const o=hc(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const p=await h._get(o);if(p){const g=Lr._fromJSON(e,p);h!==i&&(c=g),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ki(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ki(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jw(e))return"Blackberry";if(Zw(e))return"Webos";if(Gw(e))return"Safari";if((e.includes("chrome/")||Qw(e))&&!e.includes("edge/"))return"Chrome";if(Xw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Kw(t=Tn()){return/firefox\//i.test(t)}function Gw(t=Tn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qw(t=Tn()){return/crios\//i.test(t)}function Yw(t=Tn()){return/iemobile/i.test(t)}function Xw(t=Tn()){return/android/i.test(t)}function Jw(t=Tn()){return/blackberry/i.test(t)}function Zw(t=Tn()){return/webos/i.test(t)}function bp(t=Tn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uk(t=Tn()){var e;return bp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dk(){return CI()&&document.documentMode===10}function eE(t=Tn()){return bp(t)||Xw(t)||Zw(t)||Jw(t)||/windows phone/i.test(t)||Yw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e=[]){let n;switch(t){case"Browser":n=Cv(Tn());break;case"Worker":n=`${Cv(Tn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${po}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e={}){return Ls(t,"GET","/v2/passwordPolicy",Os(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=6;class mk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xv(this),this.idTokenSubscription=new xv(this),this.beforeStateQueue=new hk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ki.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qw(this,{idToken:e}),r=await Lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wr(this.app))return Promise.reject(zr(this));const n=e?kt(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wr(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wr(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fk(this),n=new mk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ck(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vr(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Ki.create(this,[Vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&WA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function mi(t){return kt(t)}class xv{constructor(e){this.auth=e,this.observer=null,this.addObserver=DI(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vk(t){Lu=t}function nE(t){return Lu.loadJS(t)}function yk(){return Lu.recaptchaEnterpriseScript}function _k(){return Lu.gapiScript}function wk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Ek="recaptcha-enterprise",Sk="NO_RECAPTCHA";class Tk{constructor(e){this.type=Ek,this.auth=mi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{tk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new ek(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;Ev(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(Sk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Ev(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=yk();u.length!==0&&(u+=c),nE(u).then(()=>{s(c,i,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function Av(t,e,n,r=!1){const s=new Tk(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Hh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Av(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Av(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e){const n=yu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Na(i,e??{}))return s;mr(s,"already-initialized")}return n.initialize({options:e})}function Ck(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function xk(t,e,n){const r=mi(t);Pe(r._canInitEmulator,r,"emulator-config-failed"),Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=rE(e),{host:o,port:c}=Ak(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),kk()}function rE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ak(t){const e=rE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:kv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:kv(o)}}}function kv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,n){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function Nk(t,e){return Ls(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(t,e){return ol(t,"POST","/v1/accounts:signInWithPassword",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(t,e){return ol(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}async function jk(t,e){return ol(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends Mp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new za(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new za(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hh(e,n,"signInWithPassword",Pk);case"emailLink":return Rk(e,{email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hh(e,r,"signUpPassword",Nk);case"emailLink":return jk(e,{idToken:n,email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(t,e){return ol(t,"POST","/v1/accounts:signInWithIdp",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="http://localhost";class li extends Mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new li(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Pp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new li(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gi(e,n)}buildRequest(){const e={requestUri:Dk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ya(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Mk(t){const e=Ho(Wo(t)).link,n=e?Ho(Wo(e)).deep_link_id:null,r=Ho(Wo(t)).deep_link_id;return(r?Ho(Wo(r)).link:null)||r||n||e||t}class Op{constructor(e){var n,r,s,i,o,c;const u=Ho(Wo(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,g=bk((s=u.mode)!==null&&s!==void 0?s:null);Pe(h&&p&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=p,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=Mk(e);try{return new Op(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.providerId=yo.PROVIDER_ID}static credential(e,n){return za._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Op.parseLink(n);return Pe(r,"argument-error"),za._fromEmailAndCode(e,r.code,r.tenantId)}}yo.PROVIDER_ID="password";yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends sE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends al{constructor(){super("facebook.com")}static credential(e){return li._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return li._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return as.credential(n,r)}catch{return null}}}as.GOOGLE_SIGN_IN_METHOD="google.com";as.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends al{constructor(){super("github.com")}static credential(e){return li._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.GITHUB_SIGN_IN_METHOD="github.com";ls.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends al{constructor(){super("twitter.com")}static credential(e,n){return li._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return cs.credential(n,r)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(t,e){return ol(t,"POST","/v1/accounts:signUp",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Lr._fromIdTokenResponse(e,r,s),o=Nv(r);return new ci({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Nv(r);return new ci({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Nv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends Nr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Xc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Xc(e,n,r,s)}}function iE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Xc._fromErrorAndOperation(t,i,e,r):i})}async function Lk(t,e,n=!1){const r=await Ua(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ci._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(t,e,n=!1){const{auth:r}=t;if(wr(r.app))return Promise.reject(zr(r));const s="reauthenticate";try{const i=await Ua(t,iE(r,s,e,t),n);Pe(i.idToken,r,"internal-error");const o=Dp(i.idToken);Pe(o,r,"internal-error");const{sub:c}=o;return Pe(t.uid===c,r,"user-mismatch"),ci._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(t,e,n=!1){if(wr(t.app))return Promise.reject(zr(t));const r="signIn",s=await iE(t,r,e),i=await ci._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Fk(t,e){return oE(mi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(t){const e=mi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Pv(t,e,n){if(wr(t.app))return Promise.reject(zr(t));const r=mi(t),o=await Hh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ok).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&aE(t),u}),c=await ci._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function Kl(t,e,n){return wr(t.app)?Promise.reject(zr(t)):Fk(kt(t),yo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&aE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t,e){return kt(t).setPersistence(e)}function zk(t,e,n,r){return kt(t).onIdTokenChanged(e,n,r)}function Bk(t,e,n){return kt(t).beforeAuthStateChanged(e,n)}function $k(t,e,n,r){return kt(t).onAuthStateChanged(e,n,r)}function qk(t){return kt(t).signOut()}const Jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jc,"1"),this.storage.removeItem(Jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=1e3,Wk=10;class cE extends lE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);dk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Wk):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cE.type="LOCAL";const uE=cE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE extends lE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dE.type="SESSION";const hE=dE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Vu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async h=>h(n.origin,i)),u=await Kk(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const h=Lp("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(_.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function Qk(t){Ar().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function Yk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Jk(){return fE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firebaseLocalStorageDb",Zk=1,Zc="firebaseLocalStorage",mE="fbase_key";class ll{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fu(t,e){return t.transaction([Zc],e?"readwrite":"readonly").objectStore(Zc)}function eN(){const t=indexedDB.deleteDatabase(pE);return new ll(t).toPromise()}function Wh(){const t=indexedDB.open(pE,Zk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zc,{keyPath:mE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zc)?e(r):(r.close(),await eN(),e(await Wh()))})})}async function Rv(t,e,n){const r=Fu(t,!0).put({[mE]:e,value:n});return new ll(r).toPromise()}async function tN(t,e){const n=Fu(t,!1).get(e),r=await new ll(n).toPromise();return r===void 0?null:r.value}function jv(t,e){const n=Fu(t,!0).delete(e);return new ll(n).toPromise()}const nN=800,rN=3;class gE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vu._getInstance(Jk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Yk(),!this.activeServiceWorker)return;this.sender=new Gk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wh();return await Rv(e,Jc,"1"),await jv(e,Jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Fu(s,!1).getAll();return new ll(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gE.type="LOCAL";const sN=gE;new il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t,e){return e?Vr(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oN(t){return oE(t.auth,new Vp(t),t.bypassAuthState)}function aN(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),Vk(n,new Vp(t),t.bypassAuthState)}async function lN(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),Lk(n,new Vp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oN;case"linkViaPopup":case"linkViaRedirect":return lN;case"reauthViaPopup":case"reauthViaRedirect":return aN;default:mr(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new il(2e3,1e4);class Li extends vE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Li.currentPopupAction&&Li.currentPopupAction.cancel(),Li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=Lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cN.get())};e()}}Li.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="pendingRedirect",fc=new Map;class dN extends vE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fc.get(this.auth._key());if(!e){try{const r=await hN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fc.set(this.auth._key(),e)}return this.bypassAuthState||fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hN(t,e){const n=mN(e),r=pN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function fN(t,e){fc.set(t._key(),e)}function pN(t){return Vr(t._redirectPersistence)}function mN(t){return hc(uN,t.config.apiKey,t.name)}async function gN(t,e,n=!1){if(wr(t.app))return Promise.reject(zr(t));const r=mi(t),s=iN(r,e),o=await new dN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=10*60*1e3;class yN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_N(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(e))}saveEventToCache(e){this.cachedEventUids.add(Dv(e)),this.lastProcessedEventTime=Date.now()}}function Dv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _N(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e={}){return Ls(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SN=/^https?/;async function TN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wN(t);for(const n of e)try{if(IN(n))return}catch{}mr(t,"unauthorized-domain")}function IN(t){const e=$h(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!SN.test(n))return!1;if(EN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new il(3e4,6e4);function bv(){const t=Ar().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xN(t){return new Promise((e,n)=>{var r,s,i;function o(){bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bv(),n(xr(t,"network-request-failed"))},timeout:CN.get()})}if(!((s=(r=Ar().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ar().gapi)===null||i===void 0)&&i.load)o();else{const c=wk("iframefcb");return Ar()[c]=()=>{gapi.load?o():n(xr(t,"network-request-failed"))},nE(`${_k()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw pc=null,e})}let pc=null;function AN(t){return pc=pc||xN(t),pc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new il(5e3,15e3),NN="__/auth/iframe",PN="emulator/auth/iframe",RN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DN(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jp(e,PN):`https://${t.config.authDomain}/${NN}`,r={apiKey:e.apiKey,appName:t.name,v:po},s=jN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ya(r).slice(1)}`}async function bN(t){const e=await AN(t),n=Ar().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:DN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=xr(t,"network-request-failed"),c=Ar().setTimeout(()=>{i(o)},kN.get());function u(){Ar().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ON=500,LN=600,VN="_blank",FN="http://localhost";class Mv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UN(t,e,n,r=ON,s=LN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},MN),{width:r.toString(),height:s.toString(),top:i,left:o}),h=Tn().toLowerCase();n&&(c=Qw(h)?VN:n),Kw(h)&&(e=e||FN,u.scrollbars="yes");const p=Object.entries(u).reduce((_,[j,b])=>`${_}${j}=${b},`,"");if(uk(h)&&c!=="_self")return zN(e||"",c),new Mv(null);const g=window.open(e||"",c,p);Pe(g,t,"popup-blocked");try{g.focus()}catch{}return new Mv(g)}function zN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="__/auth/handler",$N="emulator/auth/handler",qN=encodeURIComponent("fac");async function Ov(t,e,n,r,s,i){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:po,eventId:s};if(e instanceof sE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof al){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),h=u?`#${qN}=${encodeURIComponent(u)}`:"";return`${HN(t)}?${Ya(c).slice(1)}${h}`}function HN({config:t}){return t.emulator?jp(t,$N):`https://${t.authDomain}/${BN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="webStorageSupport";class WN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hE,this._completeRedirectFn=gN,this._overrideRedirectResult=fN}async _openPopup(e,n,r,s){var i;Yr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Ov(e,n,r,$h(),s);return UN(e,o,Lp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Ov(e,n,r,$h(),s);return Qk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Yr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bN(e),r=new yN(e);return n.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pd,{type:Pd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Pd];o!==void 0&&n(!!o),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eE()||Gw()||bp()}}const KN=WN;var Lv="@firebase/auth",Vv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YN(t){si(new ks("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tE(t)},h=new gk(r,s,i,u);return Ck(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),si(new ks("auth-internal",e=>{const n=mi(e.getProvider("auth").getImmediate());return(r=>new GN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(Lv,Vv,QN(t)),Tr(Lv,Vv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=5*60,JN=h0("authIdTokenMaxAge")||XN;let Fv=null;const ZN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JN)return;const s=n==null?void 0:n.token;Fv!==s&&(Fv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function eP(t=g0()){const e=yu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ik(t,{popupRedirectResolver:KN,persistence:[sN,uE,hE]}),r=h0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=ZN(i.toString());Bk(n,o,()=>o(n.currentUser)),zk(n,c=>o(c))}}const s=u0("auth");return s&&xk(n,`http://${s}`),n}function tP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=xr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",tP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YN("Browser");const nP={apiKey:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",authDomain:"mkt-betaki.firebaseapp.com",projectId:"mkt-betaki",storageBucket:"mkt-betaki.firebasestorage.app",messagingSenderId:"992627837568",appId:"1:992627837568:web:48019ba22070fd9af03465"};let co=null;try{co=m0(nP)}catch{}const ge=co?NA(co,{localCache:qA(),experimentalForceLongPolling:!0,useFetchStreams:!1}):null,Cn=co?eP(co):null;if(Cn)try{Uk(Cn,uE).catch(()=>{})}catch{}const Uv=co;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="type.googleapis.com/google.protobuf.Int64Value",sP="type.googleapis.com/google.protobuf.UInt64Value";function _E(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Kh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Kh(e));if(typeof t=="function"||typeof t=="object")return _E(t,e=>Kh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function eu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case rP:case sP:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>eu(e)):typeof t=="function"||typeof t=="object"?_E(t,e=>eu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qi extends Nr{constructor(e,n,r){super(`${Fp}/${e}`,n||""),this.details=r}}function iP(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function oP(t,e){let n=iP(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!zv[o])return new Qi("internal","internal");n=zv[o],r=o}const c=i.message;typeof c=="string"&&(r=c),s=i.details,s!==void 0&&(s=eu(s))}}catch{}return n==="ok"?null:new Qi(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="us-central1";function lP(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Qi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class cP{constructor(e,n,r,s,i=Gh,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new aP(n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Gh}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function uP(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function dP(t,e,n){return r=>pP(t,e,r,{})}function hP(t,e,n){return r=>wE(t,e,r,{})}async function fP(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function pP(t,e,n,r){const s=t._url(e);return wE(t,s,n,r)}async function wE(t,e,n,r){n=Kh(n);const s={data:n},i={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const c=r.timeout||7e4,u=lP(c),h=await Promise.race([fP(e,s,i,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!h)throw new Qi("cancelled","Firebase Functions instance was deleted.");const p=oP(h.status,h.json);if(p)throw p;if(!h.json)throw new Qi("internal","Response is not valid JSON object.");let g=h.json.data;if(typeof g>"u"&&(g=h.json.result),typeof g>"u")throw new Qi("internal","Response is missing data field.");return{data:eu(g)}}const Bv="@firebase/functions",$v="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="auth-internal",gP="app-check-internal",vP="messaging-internal";function yP(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),o=r.getProvider(mP),c=r.getProvider(vP),u=r.getProvider(gP);return new cP(i,o,c,u,s,t)};si(new ks(Fp,n,"PUBLIC").setMultipleInstances(!0)),Tr(Bv,$v,e),Tr(Bv,$v,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t=g0(),e=Gh){const r=yu(kt(t),Fp).getImmediate({identifier:e}),s=yI("functions");return s&&wP(r,...s),r}function wP(t,e,n){uP(kt(t),e,n)}function qv(t,e,n){return dP(kt(t),e)}function EP(t,e,n){return hP(kt(t),e)}yP(fetch.bind(self));const SP={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://gerencimaneto-mkt-betaki.onrender.com",VITE_FIREBASE_API_KEY:"AIzaSyDLyfUo2DJYstogALIZbCz2qEg5IMC53gM",VITE_FIREBASE_APP_ID:"1:992627837568:web:48019ba22070fd9af03465",VITE_FIREBASE_AUTH_DOMAIN:"mkt-betaki.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"992627837568",VITE_FIREBASE_PROJECT_ID:"mkt-betaki",VITE_FIREBASE_STORAGE_BUCKET:"mkt-betaki.firebasestorage.app"},Ba=["Pendente","Em produo","Aguardando Feedback","Aprovada","Revisar","Concluida"],EE=["Instagram","Trfego Pago","CRM","Influencers","Site","Branding","Outros"],In="demandas_v2",TP=t=>t==="Aberta"?"Aberta":t==="Em Progresso"?"Em Progresso":t==="Concluda"?"Concluda":t,Up=t=>TP(t),SE=t=>{const e=(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")?"st-pending":e.includes("progresso")||e.includes("produo")?"st-progress":e.includes("feedback")?"st-feedback":e.includes("revisar")?"st-review":e.includes("aprov")?"st-approved":e.includes("conclu")?"st-concluded":e.includes("atras")?"st-late":""},$a=t=>{const e=String(t||"").toLowerCase();return e.includes("pendente")||e.includes("aberta")||t==="Aberta"||t==="Pendente"},Cs=t=>{const e=String(t||"").toLowerCase();return e.includes("produo")||e.includes("progresso")||t==="Em Progresso"||t==="Em produo"},Le=t=>{const e=String(t||"").toLowerCase();return e.includes("conclu")||e.includes("aprov")||t==="Concluda"||t==="Aprovada"},IP=t=>{const e=String(t||"").match(/@([a-zA-Z0-9_]+)/g);return e?e.map(n=>n.slice(1)):[]},Hv=t=>{if(t==null)return"";const e=Math.max(0,Math.round(t)),n=Math.floor(e/60),r=e%60;return n>0?`${n}h ${r}m`:`${r}m`},Wv=(t,e)=>{const n=t.filter($=>String($.status||"").toLowerCase().includes("conclu")||$.status==="Concluda"),r=n.filter($=>($.designer||"")===(e.designer||"")),s=n.filter($=>($.tipoMidia||"")===(e.tipoMidia||"")),i=n.filter($=>($.origem||"")===(e.origem||"")),o=n.filter($=>($.plataforma||"")===(e.plataforma||"")),c=($,K)=>{const v=E=>{const[k,P,I]=String(E||"").split("-").map(Number);return k?new Date(k,P-1,I):null},y=v($),T=v(K);return!y||!T?null:Math.max(0,Math.round((T-y)/864e5))},u=(()=>{const $=n.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),K=$.reduce((v,y)=>v+y,0)/($.length||1);return Math.max(1,Math.round(K))})(),h=(()=>{const $=r.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),K=$.reduce((v,y)=>v+y,0)/($.length||1);return $.length?Math.max(1,Math.round(K)):null})(),p=(()=>{const $=s.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),K=$.reduce((v,y)=>v+y,0)/($.length||1);return $.length?Math.max(1,Math.round(K)):null})(),g=(()=>{const $=i.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),K=$.reduce((v,y)=>v+y,0)/($.length||1);return $.length?Math.max(1,Math.round(K)):null})(),_=(()=>{const $=o.map(v=>c(v.dataCriacao||v.dataSolicitacao,v.dataConclusao)).filter(v=>v!=null),K=$.reduce((v,y)=>v+y,0)/($.length||1);return $.length?Math.max(1,Math.round(K)):null})(),j=(()=>{const $=r.map(v=>v.revisoes||0),K=$.reduce((v,y)=>v+y,0)/($.length||1);return Math.round(K)})(),b=t.filter($=>($.designer||"")===(e.designer||"")&&!/conclu/i.test(String($.status||""))).length,z=Math.min(100,Math.round(b/4*100)),N=h??p??_??g??u,w=(z>=80?1:0)+(j>=2?1:0),A=Math.max(1,N+w),O=[];return O.push(`Estimativa: ${A} dia${A>1?"s":""} teis`),z>=80&&O.push("Alta probabilidade de atraso devido  carga acima de 80%"),A===1&&O.push("Pea deve ser concluda ainda hoje  Hoje at s 17h"),j>=2&&O.push("Revises esperadas acima da mdia para este designer"),O.join("  ")},TE={bg:"#070707",panel:"#0E0E0E",text:"#F2F2F2",muted:"#BDBDBD",border:"#ffffff1a",accent:"#BCD200",hover:"rgba(255,255,255,0.03)",btnBg:"#BCD200",btnText:"#111111",btnHoverBg:"#C7DB00",btnBorder:"#ffffff1a",shadow:"0 10px 30px rgba(0,0,0,.15)",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",chart:"#3b82f6"},Mn=()=>{try{return new Intl.DateTimeFormat("en-CA",{timeZone:"America/Sao_Paulo",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date)}catch{const t=new Date,e=n=>String(n).padStart(2,"0");return`${t.getFullYear()}-${e(t.getMonth()+1)}-${e(t.getDate())}`}};function He({name:t,size:e=18}){const n={width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};return t==="dashboard"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"}),l.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"})]}):t==="demandas"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M8 3h8"}),l.jsx("path",{d:"M8 7h8"}),l.jsx("rect",{x:"5",y:"3",width:"14",height:"18",rx:"2"})]}):t==="config"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.7 1.7 0 0 0 .3 1.8l.1.1-1.5 2.6-.1.1a1.8 1.8 0 0 0-2.2.8h-.2l-3-.4h-.2a1.8 1.8 0 0 0-1.6 0h-.2l-3 .4h-.2a1.8 1.8 0 0 0-2.2-.8l-.1-.1-1.5-2.6.1-.1a1.8 1.8 0 0 0 .3-1.8v-.2l-.4-3v-.2a1.8 1.8 0 0 0 0-1.6v-.2l.4-3v-.2a1.7 1.7 0 0 0-.3-1.8l-.1-.1L4.4 4l.1-.1a1.8 1.8 0 0 0 2.2-.8h.2l3 .4h.2a1.8 1.8 0 0 0 1.6 0h.2l3-.4h.2a1.8 1.8 0 0 0 2.2.8l.1.1 1.5 2.6-.1.1a1.8 1.8 0 0 0-.3 1.8v.2l.4 3v.2a1.8 1.8 0 0 0 0 1.6v.2Z"})]}):t==="cadastros"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M4 6h16"}),l.jsx("path",{d:"M4 12h10"}),l.jsx("path",{d:"M4 18h7"})]}):t==="relatorios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 20h18"}),l.jsx("rect",{x:"6",y:"14",width:"3",height:"6"}),l.jsx("rect",{x:"11",y:"10",width:"3",height:"10"}),l.jsx("rect",{x:"16",y:"6",width:"3",height:"14"})]}):t==="usuarios"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"3"}),l.jsx("path",{d:"M19 8v6"}),l.jsx("path",{d:"M22 11h-6"})]}):t==="filter"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"11",cy:"11",r:"7"}),l.jsx("path",{d:"M20 20l-3.5-3.5"})]}):t==="table"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M3 10h18"}),l.jsx("path",{d:"M10 4v16"})]}):t==="board"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"10",y:"4",width:"5",height:"16",rx:"2"}),l.jsx("rect",{x:"17",y:"4",width:"4",height:"16",rx:"2"})]}):t==="calendar"?l.jsxs("svg",{...n,children:[l.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M16 3v4"}),l.jsx("path",{d:"M8 3v4"}),l.jsx("path",{d:"M3 11h18"})]}):t==="close"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M18 6L6 18"}),l.jsx("path",{d:"M6 6l12 12"})]}):t==="clock"?l.jsxs("svg",{...n,children:[l.jsx("circle",{cx:"12",cy:"12",r:"9"}),l.jsx("path",{d:"M12 7v5l3 3"})]}):t==="paperclip"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21.44 11.05 12.5 20a5 5 0 1 1-7.07-7.07L14.36 4a3.5 3.5 0 0 1 4.95 4.95l-9.19 9.19"})}):t==="chat"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4Z"})}):t==="check"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M20 6 9 17l-5-5"})}):t==="plus"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"})]}):t==="dot"?l.jsx("svg",{...n,children:l.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor",stroke:"none"})}):t==="alert"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"}),l.jsx("path",{d:"M12 9v4"}),l.jsx("path",{d:"M12 17h.01"})]}):t==="trash"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M3 6h18"}),l.jsx("path",{d:"M8 6V4h8v2"}),l.jsx("rect",{x:"5",y:"6",width:"14",height:"14",rx:"2"})]}):t==="logout"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("path",{d:"M16 17l5-5-5-5"}),l.jsx("path",{d:"M21 12H9"})]}):t==="link"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 1 0-7.07-7.07L10 4"}),l.jsx("path",{d:"M14 11a5 5 0 0 1-7.07 0L3.39 7.46a5 5 0 1 1 7.07-7.07L14 4"})]}):t==="tag"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M20 10V4H14L4 14l6 6 10-10Z"}),l.jsx("circle",{cx:"16.5",cy:"7.5",r:"1.5"})]}):t==="edit"?l.jsxs("svg",{...n,children:[l.jsx("path",{d:"M4 13v4h4"}),l.jsx("path",{d:"M14.5 3.5l6 6"}),l.jsx("path",{d:"M12 6l6 6L9 21H4v-5z"})]}):t==="minus"?l.jsx("svg",{...n,children:l.jsx("path",{d:"M5 12h14"})}):null}function CP({onNew:t,view:e,setView:n,showNew:r,user:s,onLogout:i,mentions:o,onOpenDemanda:c}){const[u,h]=X.useState(!1);return l.jsxs("div",{className:"topbar",children:[l.jsx("div",{className:"topbar-left",children:l.jsx("div",{className:"team",children:"Equipe de Marketing"})}),l.jsx("div",{className:"topbar-right",children:s?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{className:"chip",children:s.name||s.username}),l.jsxs("button",{className:"icon notif-btn",onClick:()=>h(p=>!p),title:"Menes",children:[l.jsx("span",{className:"icon",children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2Z"}),l.jsx("path",{d:"M18 8a6 6 0 0 0-12 0c0 7-3 7-3 7h18s-3 0-3-7Z"})]})}),Array.isArray(o)&&o.length>0?l.jsx("span",{className:"notif-dot",children:o.length}):null]}),u?l.jsxs("div",{className:"notif-dropdown",onMouseLeave:()=>h(!1),children:[(o||[]).slice(0,6).map(p=>l.jsxs("button",{className:"notif-item",type:"button",onClick:()=>{c&&c(p.id),h(!1)},children:[l.jsx("span",{className:"title",children:p.titulo}),l.jsx("span",{className:"msg",children:p.msg})]},`${p.id}-${p.quando||""}`)),!o||o.length===0?l.jsx("div",{className:"notif-empty",children:"Sem menes"}):null]}):null,l.jsxs("button",{className:"primary",onClick:i,children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"logout"})}),l.jsx("span",{children:"Sair"})]})]}):null})]})}function xP({view:t,setView:e}){return l.jsxs("div",{className:"tabs-inline",children:[l.jsxs("button",{className:`tab-btn ${t==="table"?"active":""}`,onClick:()=>e("table"),children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"table"})}),l.jsx("span",{children:"Table"})]}),l.jsxs("button",{className:`tab-btn ${t==="calendar"?"active":""}`,onClick:()=>e("calendar"),children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"calendar"})}),l.jsx("span",{children:"Calendar"})]})]})}function AP({onLogin:t}){const[e,n]=X.useState(""),[r,s]=X.useState(""),[i,o]=X.useState(!1),[c,u]=X.useState(""),h=async p=>{if(p.preventDefault(),!i){u(""),o(!0);try{await t(e,r)}catch(g){const j=String((g==null?void 0:g.code)||"")==="auth/operation-not-allowed"?"Domnio no autorizado no Firebase Auth. Adicione o domnio do site nas configuraes.":g&&(g.code||g.message)||"Falha ao entrar";u(String(j))}finally{o(!1)}}};return l.jsxs("div",{className:"login-wrap",children:[l.jsx("div",{className:"login-banner",children:"BANNER TELA LOGIN"}),l.jsxs("div",{className:"login-card",children:[l.jsx("div",{className:"login-title",children:"Gerenciamento Mkt!"}),l.jsxs("form",{onSubmit:h,className:"login-form",children:[l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",placeholder:"Usurio",value:e,onChange:p=>n(p.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"8",r:"4"}),l.jsx("path",{d:"M4 20c0-4 4-6 8-6s8 2 8 6"})]})})]}),l.jsxs("div",{className:"input-with-icon",children:[l.jsx("input",{className:"login-input",type:"password",placeholder:"Insira sua senha",value:r,onChange:p=>s(p.target.value),required:!0}),l.jsx("span",{className:"input-icon",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),c?l.jsx("div",{className:"login-error",role:"alert",children:c}):null,l.jsx("div",{className:"login-links",children:l.jsx("a",{href:"#",onClick:p=>p.preventDefault(),children:"Esqueceu sua senha?"})}),l.jsx("button",{className:"primary btn-lg",type:"submit",disabled:i,children:i?"Entrando...":"Entrar"})]})]})]})}function kP({open:t,filtros:e,setFiltros:n,designers:r,onClose:s,cadStatus:i,cadTipos:o,origens:c,campanhas:u}){const h=(g,_)=>n(j=>({...j,[g]:_})),p=()=>n({designer:"",status:"",cIni:"",cFim:"",sIni:"",sFim:""});return t?l.jsx("div",{className:"modal",onClick:s,children:l.jsxs("div",{className:"modal-dialog",onClick:g=>g.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"filter"})}),l.jsx("span",{children:"Filtros"})]}),l.jsx("button",{className:"icon",onClick:s,children:l.jsx(He,{name:"close"})})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Comparativo Mensal"}),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Produo"})}),(()=>{const g=concluidos.filter(N=>inMonth(N.dataConclusao,mesAtual)).length,_=concluidos.filter(N=>inMonth(N.dataConclusao,mesPassado)).length,j=Math.max(g,_,1),b=220,R=80,z=(N,w)=>l.jsx("rect",{x:w,y:R-N/j*R,width:"40",height:N/j*R,rx:"6"});return l.jsxs("svg",{width:b,height:R,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:z(g,40)}),l.jsx("g",{fill:"#4DA3FF",children:z(_,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Qualidade (retrabalho)"})}),(()=>{const g=concluidos.filter(A=>inMonth(A.dataConclusao,mesAtual)).map(A=>A.revisoes||0),_=concluidos.filter(A=>inMonth(A.dataConclusao,mesPassado)).map(A=>A.revisoes||0),j=+(g.reduce((A,O)=>A+O,0)/(g.length||1)).toFixed(2),b=+(_.reduce((A,O)=>A+O,0)/(_.length||1)).toFixed(2),R=Math.max(j,b,1),z=220,N=80,w=(A,O)=>l.jsx("rect",{x:O,y:N-A/R*N,width:"40",height:A/R*N,rx:"6"});return l.jsxs("svg",{width:z,height:N,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:w(j,40)}),l.jsx("g",{fill:"#FF5E5E",children:w(b,140)})]})})(),l.jsx("div",{className:"chips",children:l.jsx("span",{className:"chip",children:"Lead-time"})}),(()=>{const g=compMesAtual,_=compMesPassado,j=Math.max(g,_,1),b=220,R=80,z=(N,w)=>l.jsx("rect",{x:w,y:R-N/j*R,width:"40",height:N/j*R,rx:"6"});return l.jsxs("svg",{width:b,height:R,className:"bar-compare",children:[l.jsx("g",{fill:"#BCD200",children:z(g,40)}),l.jsx("g",{fill:"#9B59B6",children:z(_,140)})]})})()]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Insights Automticos"}),l.jsx("div",{className:"insights-grid",children:(()=>{const g=(()=>{const N={};return concluidos.forEach(A=>{const O=A.designer||"",$=A.prazo&&A.dataConclusao&&A.dataConclusao<=A.prazo,K=A.prazo&&A.dataConclusao,v=N[O]||{ok:0,total:0};N[O]={ok:v.ok+($?1:0),total:v.total+(K?1:0)}}),Object.entries(N).map(([A,O])=>({designer:A,pct:Math.round(100*(O.ok/(O.total||1)))})).sort((A,O)=>O.pct-A.pct)[0]})(),_=(()=>{const N={};return items.forEach(A=>{const O=A.origem||"Outros";N[O]=(N[O]||0)+1}),Object.entries(N).map(([A,O])=>({origem:A,q:O})).sort((A,O)=>O.q-A.q)[0]})(),j=concluidos.filter(N=>(N.revisoes||0)===0).length===concluidos.length,b=compMesAtual<=compMesPassado,R=(()=>{const N=concluidos.filter(A=>/stor/i.test(String(A.tipoMidia||""))),w=+(N.reduce((A,O)=>A+(O.revisoes||0),0)/(N.length||1)).toFixed(2);return{qtd:N.length,avg:w}})(),z=[];return g&&z.push(`O designer ${g.designer} teve o melhor SLA do ms (${g.pct}%)`),_&&z.push(`${_.origem} foi o canal mais solicitado`),j&&z.push("Nenhuma demanda apresentou retrabalho neste ms"),b&&z.push("Seu lead-time melhorou em relao ao ms anterior"),R.qtd>0&&z.push("A categoria Stories teve o maior retrabalho do ms"),z})().map((g,_)=>l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:g})]},_))})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:e.designer,onChange:g=>h("designer",g.target.value),children:[l.jsx("option",{value:"",children:"Designer"}),r.map(g=>l.jsx("option",{value:g,children:g},g))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{className:"status-select",value:e.status,onChange:g=>h("status",g.target.value),children:[l.jsx("option",{value:"",children:"Status"}),Ba.map(g=>l.jsx("option",{value:g,children:Up(g)},g))]}),l.jsx("div",{className:"chips",children:Ba.map(g=>l.jsx("button",{className:`chip ${e.status===g?"active":""}`,onClick:()=>h("status",e.status===g?"":g),children:g},g))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("div",{className:"chips",children:o.map(g=>l.jsx("button",{className:`chip ${e.tipoMidia===g?"active":""}`,onClick:()=>h("tipoMidia",e.tipoMidia===g?"":g),children:g},g))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem"}),l.jsx("div",{className:"chips",children:(c||EE).map(g=>l.jsx("button",{className:`chip ${e.origem===g?"active":""}`,onClick:()=>h("origem",e.origem===g?"":g),children:g},g))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsxs("select",{value:e.campanha||"",onChange:g=>h("campanha",g.target.value),children:[l.jsx("option",{value:"",children:"Campanha"}),(u||[]).map(g=>l.jsx("option",{value:g,children:g},g))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.cIni,onChange:g=>h("cIni",g.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.cFim,onChange:g=>h("cFim",g.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsxs("div",{className:"range",children:[l.jsx("input",{type:"date",value:e.sIni,onChange:g=>h("sIni",g.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"date",value:e.sFim,onChange:g=>h("sFim",g.target.value)})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsxs("button",{className:"icon",onClick:p,children:[l.jsx(He,{name:"close"}),l.jsx("span",{children:"Limpar"})]}),l.jsx("button",{className:"primary",onClick:s,children:"Aplicar"})]})]})}):null}function NP(t,e){return t.filter(n=>!(e.q&&!(n.titulo||"").toLowerCase().includes(e.q.toLowerCase())||e.designer&&n.designer!==e.designer||e.status&&n.status!==e.status||e.tipoMidia&&n.tipoMidia!==e.tipoMidia||e.plataforma&&(n.plataforma||"")!==e.plataforma||e.origem&&(n.origem||"")!==e.origem||e.campanha&&(n.campanha||"")!==e.campanha||e.cIni&&n.prazo&&n.prazo<e.cIni||e.cFim&&n.prazo&&n.prazo>e.cFim||e.sIni&&n.prazo&&n.prazo<e.sIni||e.sFim&&n.prazo&&n.prazo>e.sFim))}function PP({items:t,onEdit:e,onStatus:n,cadStatus:r,onDelete:s,onDuplicate:i,hasMore:o,showMore:c,canCollapse:u,showLess:h,shown:p,total:g,compact:_,canEdit:j,loading:b}){const[R,z]=X.useState(null),N=k=>String(k).padStart(2,"0");(k=>{const P=new Date(Date.UTC(k.getFullYear(),k.getMonth(),k.getDate())),I=P.getUTCDay()||7;P.setUTCDate(P.getUTCDate()+4-I);const Ce=new Date(Date.UTC(P.getUTCFullYear(),0,1)),Ve=Math.ceil(((P-Ce)/864e5+1)/7);return`${P.getUTCFullYear()}-W${N(Ve)}`})(new Date);const A=k=>{if(!k)return"";const[P,I,Ce]=String(k).split("-").map(Number),Ve=String(Ce).padStart(2,"0"),mt=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"][Math.max(0,Math.min(11,I-1||0))];return`${Ve}.${mt}`},[O,$]=X.useState("created"),[K,v]=X.useState("desc"),y=(k,P)=>{if(P==="created"){const Ce=k.createdAt,Ve=Ce&&typeof Ce=="object"&&"seconds"in Ce?(Ce.seconds||0)*1e3+(Ce.nanoseconds||0)/1e6:Ce?Date.parse(Ce):0,mt=Date.parse(k.dataCriacao||"")||0,It=Date.parse(k.dataSolicitacao||"")||0;return Ve||mt||It||0}if(P==="prazo"||P==="dataCriacao"||P==="dataSolicitacao")return Date.parse(k[P]||"")||0;if(P==="drive")return k.linkDrive?1:0;const I=k[P];return typeof I=="string"?I.toLowerCase():I||""},T=X.useMemo(()=>(Array.isArray(t)?t.slice():[]).sort((P,I)=>{const Ce=y(P,O),Ve=y(I,O);if(typeof Ce=="number"&&typeof Ve=="number")return K==="desc"?Ve-Ce:Ce-Ve;const mt=String(Ve||"").localeCompare(String(Ce||""));return K==="desc"?mt:-mt}),[t,O,K]),E=(k,P)=>l.jsxs("th",{onClick:()=>{O===P?v(I=>I==="desc"?"asc":"desc"):($(P),v("desc"))},children:[k," ",O===P?K==="desc"?"":"":""]});return b?l.jsxs("div",{className:`table ${_?"compact":""}`,children:[l.jsx("div",{className:"skeleton row",style:{width:"60%"}}),Array.from({length:8}).map((k,P)=>l.jsx("div",{className:"skeleton row",style:{width:`${90-P*6}%`}},P))]}):l.jsxs("div",{className:`table ${_?"compact":""}`,children:[l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[E("Nome","titulo"),E("Designer","designer"),E("Status","status"),E("Data de Solicitao","dataSolicitacao"),E("Data de Criao","created"),E("Prazo","prazo"),E("Tipo","tipoMidia"),E("Origem","origem"),E("Drive","drive")]})}),l.jsx("tbody",{children:T.map(k=>l.jsxs("tr",{className:"row-clickable",onClick:()=>e(k),children:[l.jsx("td",{className:"name",children:k.titulo}),l.jsx("td",{children:l.jsx("div",{children:k.designer})}),l.jsx("td",{children:l.jsx("select",{className:`status-select ${SE(k.status)}`,value:k.status,onChange:P=>n(k.id,P.target.value),onClick:P=>P.stopPropagation(),disabled:!j,children:Ba.map(P=>l.jsx("option",{value:P,children:Up(P)},P))})}),l.jsx("td",{children:A(k.dataSolicitacao)}),l.jsx("td",{children:A(k.dataCriacao)}),l.jsx("td",{children:A(k.prazo)}),l.jsx("td",{children:k.tipoMidia}),l.jsx("td",{children:k.origem||""}),l.jsx("td",{children:k.linkDrive?l.jsx("a",{href:k.linkDrive,target:"_blank",rel:"noreferrer",onClick:P=>P.stopPropagation(),children:"Abrir Drive"}):""}),l.jsx("td",{children:Array.isArray(k.arquivos)&&k.arquivos.length?l.jsx("div",{className:"files",children:k.arquivos.slice(0,5).map(P=>l.jsx("a",{href:P.url,target:"_blank",rel:"noreferrer",title:P.name,onClick:I=>I.stopPropagation(),children:l.jsx("img",{className:"file-thumb",src:P.url,alt:P.name})},P.name))}):k.arquivoNome||""})]},k.id))})]}),l.jsxs("div",{className:"table-footer",children:[o&&l.jsx("button",{className:"primary",onClick:c,children:"Mostrar mais demandas"}),u&&l.jsx("button",{className:"tertiary",onClick:h,children:"Mostrar menos demandas"})]})]})}function RP({items:t,refDate:e}){const n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0),s=n.getDay(),i=r.getDate(),o={};t.forEach(u=>{const h=u.dataSolicitacao,p=new Date(h);p.getMonth()===e.getMonth()&&p.getFullYear()===e.getFullYear()&&(o[h]||(o[h]=[])).push(u)});const c=[];for(let u=0;u<s;u++)c.push(null);for(let u=1;u<=i;u++)c.push(u);return l.jsxs("div",{className:"calendar",children:[l.jsx("div",{className:"cal-head",children:l.jsx("div",{className:"month",children:e.toLocaleString("pt-BR",{month:"long",year:"numeric"})})}),l.jsxs("div",{className:"cal-grid",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(u=>l.jsx("div",{className:"cal-cell head",children:u},u)),c.map((u,h)=>{if(!u)return l.jsx("div",{className:"cal-cell"},h);const p=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`,g=o[p]||[];return l.jsxs("div",{className:"cal-cell",children:[l.jsx("div",{className:"day",children:u}),g.map(_=>l.jsxs("div",{className:"cal-item",children:[_.titulo," (",_.designer,")"]},_.id))]},h)})]})]})}function jP({open:t,mode:e,onClose:n,onSubmit:r,initial:s,cadTipos:i,designers:o,cadPlataformas:c,onDelete:u,userLabel:h,canDelete:p,onAddComment:g,cadOrigens:_,currentUser:j,usersAll:b,canEdit:R,displayUser:z,onStatus:N}){const[w,A]=X.useState((s==null?void 0:s.designer)||j||""),[O,$]=X.useState((s==null?void 0:s.tipoMidia)||"Post"),[K,v]=X.useState((s==null?void 0:s.titulo)||""),[y,T]=X.useState((s==null?void 0:s.link)||""),[E,k]=X.useState((s==null?void 0:s.linkDrive)||""),[P,I]=X.useState(""),[Ce,Ve]=X.useState((s==null?void 0:s.dataSolicitacao)||Mn()),[mt,It]=X.useState((s==null?void 0:s.plataforma)||""),[V,ne]=X.useState((s==null?void 0:s.arquivos)||[]),[oe,Se]=X.useState((s==null?void 0:s.dataCriacao)||""),[we,Ae]=X.useState((s==null?void 0:s.dataFeedback)||""),[it,gt]=X.useState((s==null?void 0:s.descricao)||""),[nt,Fe]=X.useState((s==null?void 0:s.prazo)||""),[Ue,Xt]=X.useState((s==null?void 0:s.comentarios)||[]),[ut,Je]=X.useState(""),[rn,Dt]=X.useState(""),[zt,rt]=X.useState(!1),[st,Wt]=X.useState([]),M=X.useRef(null),[Y,U]=X.useState(!1),[ee,pe]=X.useState((s==null?void 0:s.historico)||[]),[D,J]=X.useState((s==null?void 0:s.origem)||""),[G,fe]=X.useState((s==null?void 0:s.campanha)||""),[me,Te]=X.useState(""),[ke,Oe]=X.useState(!1);X.useEffect(()=>{A((s==null?void 0:s.designer)||j||""),$((s==null?void 0:s.tipoMidia)||"Post"),v((s==null?void 0:s.titulo)||""),T((s==null?void 0:s.link)||""),k((s==null?void 0:s.linkDrive)||""),I(""),Ve((s==null?void 0:s.dataSolicitacao)??(e==="create"?Mn():"")),It((s==null?void 0:s.plataforma)||(c==null?void 0:c[0])||""),ne((s==null?void 0:s.arquivos)||[]),Se((s==null?void 0:s.dataCriacao)||""),Ae((s==null?void 0:s.dataFeedback)||""),gt((s==null?void 0:s.descricao)||""),Fe((s==null?void 0:s.prazo)||""),Xt((s==null?void 0:s.comentarios)||[]),Je(""),pe((s==null?void 0:s.historico)||[]),J((s==null?void 0:s.origem)||""),fe((s==null?void 0:s.campanha)||"")},[s,t,o,i,c,_]);const Ze=B=>{B.preventDefault(),r({designer:w,tipoMidia:O,titulo:K,link:y,linkDrive:E,arquivoNome:P,dataSolic:Ce,dataCriacao:oe,dataFeedback:we,plataforma:mt,arquivos:V,descricao:it,prazo:nt,comentarios:Ue,historico:ee,origem:D,campanha:G})},Ge=()=>{const B=ut.trim();if(!B)return;const ye=IP(B),H={texto:B,data:Mn(),mentions:ye,autor:h},F={tipo:"comentario",autor:h,data:H.data,texto:B,mentions:ye};Xt(L=>[H,...L]),pe(L=>[F,...L]),Je("");try{g&&g(s==null?void 0:s.id,H,F)}catch{}},Ie=B=>{if(!B)return"";try{return new Date(B).toLocaleString("pt-BR",{timeZone:"America/Sao_Paulo",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return B}},[ot,m]=X.useState(Date.now());X.useEffect(()=>{const B=setInterval(()=>m(Date.now()),1e3);return()=>clearInterval(B)},[]);const x=B=>{if(!B||B<=0)return"00:00:00";const ye=Math.floor(B/1e3),H=String(Math.floor(ye/3600)).padStart(2,"0"),F=String(Math.floor(ye%3600/60)).padStart(2,"0"),L=String(ye%60).padStart(2,"0");return`${H}:${F}:${L}`},C=Number((s==null?void 0:s.tempoProducaoMs)||0),W=s!=null&&s.startedAt?Date.parse(s.startedAt):null,ue=/produ|progresso/i.test(String((s==null?void 0:s.status)||"")),je=X.useRef(null);X.useEffect(()=>{!W&&ue&&!je.current&&(je.current=Date.now()),(W||!ue)&&(je.current=null)},[W,ue]);const We=W??je.current,Ct=C+(We?Math.max(0,ot-We):0),[dt,et]=X.useState(null),Be=B=>String(B||"").replace(/[&<>]/g,L=>L==="&"?"&amp;":L==="<"?"&lt;":"&gt;").replace(/((https?:\/\/|www\.)[^\s]+)/gi,L=>`<a href="${/^https?:\/\//i.test(L)?L:`https://${L}`}" target="_blank" rel="noreferrer">${L}</a>`).replace(/\n/g,"<br/>");return t?l.jsx("div",{className:"modal",children:l.jsxs("div",{className:`modal-dialog ${e!=="create"?"tall":""}`,onClick:B=>B.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[e==="create"?l.jsxs("div",{className:"title",children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}):l.jsx("input",{className:"title editable",type:"text",dir:"ltr",placeholder:"Sem ttulo",value:K,onChange:B=>v(B.target.value)}),l.jsx("button",{className:"icon",onClick:n,children:l.jsx(He,{name:"close"})})]}),l.jsxs("div",{className:"modal-actions-inline",children:[l.jsx("button",{className:"action-btn",type:"button",onClick:()=>Oe(B=>!B),children:""}),ke&&l.jsx("div",{className:"context-menu",onClick:B=>B.stopPropagation(),children:e==="edit"&&p&&l.jsx("button",{className:"tertiary",type:"button",onClick:()=>{Oe(!1),window.confirm("Confirmar excluso desta demanda?")&&(u(s.id),n())},children:"Excluir demanda"})})]}),l.jsxs("div",{className:`status-bar ${SE((s==null?void 0:s.status)||"Aberta")}`,children:[l.jsx("div",{children:(s==null?void 0:s.status)||"Aberta"}),e!=="create"&&l.jsx("select",{value:(s==null?void 0:s.status)||"Aberta",onChange:B=>{try{N&&N(s==null?void 0:s.id,B.target.value)}catch{}},disabled:!R,style:{marginLeft:8},children:Ba.map(B=>l.jsx("option",{value:B,children:Up(B)},B))}),e!=="create"&&l.jsxs("div",{className:"timer",children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"clock"})}),l.jsx("span",{children:x(Ct)})]})]}),l.jsx("form",{id:"modalForm",className:"modal-body",onSubmit:Ze,children:l.jsxs("div",{className:`modal-columns ${e==="create"?"single":"cols3"}`,children:[l.jsxs("div",{className:"modal-main",children:[l.jsxs("div",{className:e==="create"?"form-grid":"form-stack",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Designer"}),l.jsxs("select",{value:w,onChange:B=>A(B.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Designer"}),(o||[]).map(B=>l.jsx("option",{value:B,children:B},B))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Tipo"}),l.jsx("select",{value:O,onChange:B=>$(B.target.value),children:(i||["Post","Story","Banner","Vdeo","Outro"]).map(B=>l.jsx("option",{value:B,children:B},B))})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Titulo"}),l.jsx("input",{value:K,onChange:B=>v(B.target.value),required:!0})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link de Referncia"}),l.jsx("input",{type:"url",value:y,onChange:B=>T(B.target.value),placeholder:"https://"})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Origem da Demanda"}),l.jsxs("select",{value:D,onChange:B=>J(B.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Origem"}),(_||EE).map(B=>l.jsx("option",{value:B,children:B},B))]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Campanha"}),l.jsx("input",{value:G,onChange:B=>fe(B.target.value),placeholder:"Ex: Black Friday"})]}),e!=="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link de Referncia"}),l.jsx("input",{type:"url",value:y,onChange:B=>T(B.target.value),placeholder:"https://"}),y?l.jsx("div",{style:{marginTop:6},children:l.jsx("a",{href:y,target:"_blank",rel:"noreferrer",children:"Abrir link"})}):null]}),e!=="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Link do Drive"}),l.jsx("input",{type:"url",value:E,onChange:B=>k(B.target.value),placeholder:"https://"}),E?l.jsx("div",{style:{marginTop:6},children:l.jsx("a",{href:E,target:"_blank",rel:"noreferrer",children:"Abrir Drive"})}):null]}),e==="create"?l.jsxs("div",{className:"row-2",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsx("input",{type:"date",value:Ce,onChange:B=>Ve(B.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:nt,onChange:B=>Fe(B.target.value)})]})]}):l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Arquivo"}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:B=>{const H=Array.from(B.target.files||[]).filter(re=>(re.size||0)<=1048576).slice(0,5),F=new Date().toISOString(),L=H.map(re=>new Promise(Z=>{const de=new FileReader;de.onload=()=>Z({name:re.name,url:de.result,addedBy:h,addedAt:F}),de.readAsDataURL(re)}));Promise.all(L).then(re=>{ne(re),pe(de=>[{tipo:"arquivo",autor:h,data:Mn(),arquivos:re},...de]);const Z=re.map(de=>de.name).join(", ");Xt(de=>[{texto:`Arquivos anexados: ${Z||re.length}`,data:Mn()},...de])})}}),Array.isArray(V)&&V.length>0&&l.jsx("div",{className:"thumbs",children:V.map((B,ye)=>l.jsxs("div",{className:"file-item",children:[l.jsx("img",{className:"file-thumb",src:B.url,alt:B.name}),l.jsxs("div",{className:"file-meta",children:[B.name,B.addedBy?`  ${B.addedBy}`:""]}),l.jsxs("div",{className:"file-actions",children:[l.jsx("a",{href:B.url,download:!0,target:"_blank",rel:"noreferrer",children:"Baixar"}),l.jsxs("label",{className:"replace-btn",children:["Substituir",l.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:H=>{var Z;const F=(Z=H.target.files)==null?void 0:Z[0];if(!F)return;const L=new FileReader,re=new Date().toISOString();L.onload=()=>{const de={name:F.name,url:L.result,addedBy:h,addedAt:re};ne(se=>se.map((ie,ce)=>ce===ye?de:ie))},L.readAsDataURL(F)}})]}),l.jsx("button",{type:"button",onClick:()=>ne(H=>H.filter((F,L)=>L!==ye)),children:"Excluir"})]})]},B.name+ye))})]})]}),e==="create"&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:8,className:"desc-input",value:it,onChange:B=>gt(B.target.value)}),/(https?:\/\/|www\.)/i.test(String(it||""))?l.jsx("div",{className:"desc-preview",dangerouslySetInnerHTML:{__html:Be(it)}}):null]}),e==="create"&&l.jsxs("div",{className:"activity",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Comentrios"}),l.jsx("input",{ref:M,placeholder:"Escreva um comentrio use @ para mencionar",value:ut,onChange:B=>{const ye=B.target.value,H=B.target.selectionStart||ye.length;Je(ye);const F=ye.lastIndexOf("@",(H||ye.length)-1);if(F>=0){const L=ye.slice(F+1),re=L.indexOf(" "),Z=L.indexOf(`
`),de=re>=0&&Z>=0?Math.min(re,Z):re>=0?re:Z>=0?Z:-1,se=de>=0?L.slice(0,de):L.slice(0,H-(F+1)),ie=String(se||"").trim();if(Dt(ie),ie.length>0){const ce=ie.toLowerCase(),Ne=(b||[]).filter(De=>String(De.username||"").toLowerCase().includes(ce)||String(De.name||"").toLowerCase().includes(ce)).slice(0,6);Wt(Ne),rt(Ne.length>0)}else rt(!1),Wt([])}else rt(!1),Wt([])},onBlur:()=>setTimeout(()=>rt(!1),80)}),zt&&st.length>0&&l.jsx("div",{className:"mentions-suggest",children:st.map(B=>l.jsxs("div",{className:"suggest-item",onMouseDown:ye=>{ye.preventDefault();const H=M.current,F=String(ut||""),L=H&&H.selectionStart||F.length,re=F.lastIndexOf("@",(L||F.length)-1),Z=F.slice(0,re),de=F.slice(re+1),se=de.indexOf(" "),ie=de.indexOf(`
`),ce=se>=0&&ie>=0?Math.min(se,ie):se>=0?se:ie>=0?ie:-1,Ne=ce>=0?re+1+ce:L,De=F.slice(Ne),yt=`@${B.username||B.name}`,ht=`${Z}${yt} ${De}`;Je(ht),rt(!1),Wt([]),Dt(""),setTimeout(()=>{try{const Bt=M.current;if(Bt){const _t=Z.length+yt.length+1;Bt.focus(),Bt.setSelectionRange(_t,_t)}}catch{}},0)},children:["@",B.username||"","  ",B.name||B.username]},B.id||B.username))}),ut.trim().length>0&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:l.jsx("button",{className:"primary",type:"button",onClick:Ge,children:"Adicionar"})})]}),l.jsxs("div",{className:"activity-list",children:[(Ue||[]).length===0?l.jsx("div",{className:"empty",children:"Sem comentrios"}):(Y?Ue||[]:(Ue||[]).slice(0,2)).map((B,ye)=>l.jsx("div",{className:"activity-item",children:l.jsxs("div",{className:"activity-entry",children:[l.jsx("div",{className:"avatar",children:"V"}),l.jsxs("div",{className:"entry-content",children:[l.jsx("div",{className:"entry-title",children:l.jsxs("span",{children:[l.jsx("strong",{children:z(B.autor||"")})," comentou: ",B.texto]})}),l.jsx("div",{className:"entry-time",children:Ie(B.data)}),Array.isArray(B.mentions)&&B.mentions.length>0&&l.jsx("div",{className:"mentions-row",children:B.mentions.map(H=>l.jsxs("span",{className:`mention-pill ${String(h||"").toLowerCase()===String(H||"").toLowerCase()?"you":""}`,children:["@",H,String(h||"").toLowerCase()===String(H||"").toLowerCase()?"  Voc foi mencionado":""]},H))})]})]})},ye)),(Ue||[]).length>2&&l.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:l.jsx("button",{className:"tertiary",type:"button",onClick:()=>U(B=>!B),children:Y?"Mostrar menos":`Ver todos os comentrios (${(Ue||[]).length-2} mais)`})})]})]})]}),e!=="create"&&l.jsxs("div",{className:"modal-center",children:[l.jsxs("div",{className:"date-row",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Solicitao"}),l.jsx("input",{type:"date",value:Ce,onChange:B=>Ve(B.target.value),disabled:!R})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Criao"}),l.jsx("input",{type:"date",value:oe,onChange:B=>Se(B.target.value),disabled:!R})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Prazo"}),l.jsx("input",{type:"date",value:nt,onChange:B=>Fe(B.target.value)})]}),String((s==null?void 0:s.status)||"").toLowerCase().includes("feedback")&&l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Data de Feedback"}),l.jsx("input",{type:"date",value:we,onChange:B=>Ae(B.target.value),disabled:!R})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{rows:12,className:"desc-input",value:it,onChange:B=>gt(B.target.value)}),/(https?:\/\/|www\.)/i.test(String(it||""))?l.jsx("div",{className:"desc-preview",dangerouslySetInnerHTML:{__html:Be(it)}}):null]}),l.jsxs("div",{className:"activity",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Comentrios"}),l.jsx("input",{ref:M,placeholder:"Escreva um comentrio use @ para mencionar",value:ut,onChange:B=>{const ye=B.target.value,H=B.target.selectionStart||ye.length;Je(ye);const F=ye.lastIndexOf("@",(H||ye.length)-1);if(F>=0){const L=ye.slice(F+1),re=L.indexOf(" "),Z=L.indexOf(`
`),de=re>=0&&Z>=0?Math.min(re,Z):re>=0?re:Z>=0?Z:-1,se=de>=0?L.slice(0,de):L.slice(0,H-(F+1)),ie=String(se||"").trim();if(Dt(ie),ie.length>0){const ce=ie.toLowerCase(),Ne=(b||[]).filter(De=>String(De.username||"").toLowerCase().includes(ce)||String(De.name||"").toLowerCase().includes(ce)).slice(0,6);Wt(Ne),rt(Ne.length>0)}else rt(!1),Wt([])}else rt(!1),Wt([])},onBlur:()=>setTimeout(()=>rt(!1),80)}),zt&&st.length>0&&l.jsx("div",{className:"mentions-suggest",children:st.map(B=>l.jsxs("div",{className:"suggest-item",onMouseDown:ye=>{ye.preventDefault();const H=M.current,F=String(ut||""),L=H&&H.selectionStart||F.length,re=F.lastIndexOf("@",(L||F.length)-1),Z=F.slice(0,re),de=F.slice(re+1),se=de.indexOf(" "),ie=de.indexOf(`
`),ce=se>=0&&ie>=0?Math.min(se,ie):se>=0?se:ie>=0?ie:-1,Ne=ce>=0?re+1+ce:L,De=F.slice(Ne),yt=`@${B.username||B.name}`,ht=`${Z}${yt} ${De}`;Je(ht),rt(!1),Wt([]),Dt(""),setTimeout(()=>{try{const Bt=M.current;if(Bt){const _t=Z.length+yt.length+1;Bt.focus(),Bt.setSelectionRange(_t,_t)}}catch{}},0)},children:["@",B.username||"","  ",B.name||B.username]},B.id||B.username))}),ut.trim().length>0&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:l.jsx("button",{className:"primary",type:"button",onClick:Ge,children:"Adicionar"})})]}),l.jsxs("div",{className:"activity-list",children:[(Ue||[]).length===0?l.jsx("div",{className:"empty",children:"Sem comentrios"}):(Y?Ue||[]:(Ue||[]).slice(0,2)).map((B,ye)=>l.jsx("div",{className:"activity-item",children:l.jsxs("div",{className:"activity-entry",children:[l.jsx("div",{className:"avatar",children:"V"}),l.jsxs("div",{className:"entry-content",children:[l.jsx("div",{className:"entry-title",children:l.jsxs("span",{children:[l.jsx("strong",{children:z(B.autor||"")})," comentou: ",B.texto]})}),l.jsx("div",{className:"entry-time",children:Ie(B.data)}),Array.isArray(B.mentions)&&B.mentions.length>0&&l.jsx("div",{className:"mentions-row",children:B.mentions.map(H=>l.jsxs("span",{className:`mention-pill ${String(h||"").toLowerCase()===String(H||"").toLowerCase()?"you":""}`,children:["@",H,String(h||"").toLowerCase()===String(H||"").toLowerCase()?"  Voc foi mencionado":""]},H))})]})]})},ye)),(Ue||[]).length>2&&l.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:l.jsx("button",{className:"tertiary",type:"button",onClick:()=>U(B=>!B),children:Y?"Mostrar menos":`Ver todos os comentrios (${(Ue||[]).length-2} mais)`})})]})]})]}),e!=="create"&&l.jsx("div",{className:"modal-side",children:l.jsxs("div",{className:"timeline",children:[l.jsx("div",{className:"form-row",children:l.jsx("label",{children:"Linha do tempo"})}),["Criado","Em produo","Aguardando Feedback","Revisar","Aprovada","Concluda","Postado"].map(B=>{const ye=(ce,Ne)=>{const De=String(ce.status_novo||ce.para||""||"").toLowerCase();return Ne==="Criado"?De==="aberta":Ne==="Em produo"?De.includes("produ")||De.includes("progresso"):Ne==="Aguardando Feedback"?De.includes("feedback"):Ne==="Revisar"?De.includes("revisar"):Ne==="Aprovada"?De.includes("aprov"):Ne==="Concluda"?De.includes("conclu"):!1};let F=B==="Postado"?(ee||[]).filter(ce=>ce.tipo==="mlabs"):(ee||[]).filter(ce=>ce.tipo==="status"&&ye(ce,B));if(B==="Concluda"&&(!F||F.length===0)&&String((s==null?void 0:s.status)||"").toLowerCase().includes("conclu")){const ce=(s==null?void 0:s.finishedAt)||(s!=null&&s.dataConclusao?`${s.dataConclusao}T00:00:00Z`:null);F=[{tipo:"status",autor:(s==null?void 0:s.autor)||h,data_hora_evento:ce,data:s==null?void 0:s.dataConclusao,status_novo:"Concluda",responsavel:(s==null?void 0:s.designer)||""}]}const L=F&&F.length?F[F.length-1]:null,re=(L==null?void 0:L.duracao_em_minutos)!=null?Hv(L.duracao_em_minutos):"",Z=L!=null&&L.data_hora_evento?Ie(L.data_hora_evento):Ie(L==null?void 0:L.data),de=z((L==null?void 0:L.responsavel)||(L==null?void 0:L.autor)||""),se=F.length,ie=dt===B;return l.jsxs("div",{className:"timeline-item",onClick:()=>et(ce=>ce===B?null:B),children:[l.jsx("div",{className:"timeline-left",children:l.jsx("span",{className:"timeline-icon",children:""})}),l.jsxs("div",{className:"timeline-body",children:[l.jsxs("div",{className:"timeline-title",children:[B,se>1?`  ${se}`:""]}),l.jsxs("div",{className:"timeline-meta",children:[Z,de?`  ${de}`:"",re?`  ${re}`:""]}),ie&&se>0&&l.jsx("div",{className:"timeline-details",children:F.map((ce,Ne)=>l.jsxs("div",{className:"timeline-detail-row",children:[l.jsx("div",{children:ce!=null&&ce.data_hora_evento?Ie(ce.data_hora_evento):Ie(ce==null?void 0:ce.data)}),l.jsx("div",{children:z((ce==null?void 0:ce.responsavel)||(ce==null?void 0:ce.autor)||"")}),l.jsx("div",{children:(ce==null?void 0:ce.duracao_em_minutos)!=null?Hv(ce.duracao_em_minutos):""})]},Ne))})]})]},B)})]})})]})}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"primary",type:"submit",form:"modalForm",children:"Salvar"})})]})}):null}function DP({cadStatus:t,setCadStatus:e,cadTipos:n,setCadTipos:r,cadPlataformas:s,setCadPlataformas:i,cadOrigens:o,setCadOrigens:c,cadStatusColors:u,setCadStatusColors:h}){const[p,g]=X.useState("tipo"),[_,j]=X.useState(""),[b,R]=X.useState("#f59e0b"),z=p==="status"?t:p==="tipo"?n:p==="plataforma"?s:o,N=E=>{p==="status"?e(E):p==="tipo"?r(E):p==="plataforma"?i(E):c(E)},[w,A]=X.useState({}),O=E=>A(k=>({...k,[E]:E})),$=E=>A(k=>{const P={...k};return delete P[E],P}),K=async E=>{const k=String(w[E]||"").trim();if(!k||k===E){$(E);return}const P=z.map(I=>I===E?k:I);if(N(P),p==="status"){const I=u[E];h(Ce=>{const Ve={...Ce};return I&&(delete Ve[E],Ve[k]=I),Ve})}if(ge){const I=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await ua(Vt(ge,I,k),{name:k,active:!0},{merge:!0});try{await Hi(Vt(ge,I,E))}catch{}}catch(Ce){try{window.alert(String((Ce==null?void 0:Ce.code)||(Ce==null?void 0:Ce.message)||"Falha ao renomear"))}catch{}}}$(E)},v=async()=>{const E=_.trim();if(!E||z.includes(E))return;const k=[...z,E];if(N(k),j(""),p==="status"&&h(P=>({...P,[E]:b})),ge){const P=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await ua(Vt(ge,P,E),{name:E,active:!0})}catch(I){try{window.alert(String((I==null?void 0:I.code)||(I==null?void 0:I.message)||"Falha ao gravar cadastro"))}catch{}}}},y=async E=>{const k=z.filter(P=>P!==E);if(N(k),ge){const P=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await Hi(Vt(ge,P,E))}catch(I){try{window.alert(String((I==null?void 0:I.code)||(I==null?void 0:I.message)||"Falha ao remover cadastro"))}catch{}}}},T=async E=>{if(!ge)return;const k=p==="status"?"cad_status":p==="tipo"?"cad_tipos":p==="plataforma"?"cad_plataformas":"cad_origens";try{await ua(Vt(ge,k,E),{active:!1},{merge:!0})}catch(P){try{window.alert(String((P==null?void 0:P.code)||(P==null?void 0:P.message)||"Falha ao desativar cadastro"))}catch{}}};return l.jsxs("div",{className:"panel",children:[l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${p==="tipo"?"active":""}`,onClick:()=>g("tipo"),children:"Tipo"}),l.jsx("button",{className:`tab ${p==="origem"?"active":""}`,onClick:()=>g("origem"),children:"Origem"})]}),l.jsxs("div",{className:"form-row",style:{marginTop:10},children:[l.jsx("label",{children:p==="status"?"Novo Status":p==="tipo"?"Novo Tipo":"Nova Origem"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{value:_,onChange:E=>j(E.target.value)}),p==="status"&&l.jsx("input",{type:"color",value:b,onChange:E=>R(E.target.value),title:"Cor"}),l.jsx("button",{className:"primary",onClick:v,children:"Adicionar"})]})]}),l.jsx("div",{className:"form-row",style:{marginTop:10},children:l.jsx("select",{children:z.map(E=>l.jsx("option",{value:E,children:E},E))})}),l.jsx("div",{className:"list",style:{marginTop:12},children:z.length===0?l.jsx("div",{className:"empty",children:"Sem itens"}):z.map(E=>l.jsxs("div",{className:"list-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",border:"1px solid var(--border)",borderRadius:8,background:"#0b0e12",marginBottom:6},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[p==="status"&&l.jsx("span",{className:"status-dot",style:{background:u[E]||"#3b82f6"}}),w[E]!=null?l.jsx("input",{value:w[E],onChange:k=>A(P=>({...P,[E]:k.target.value}))}):l.jsx("div",{children:E})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[p==="status"&&l.jsx("input",{type:"color",value:u[E]||"#3b82f6",onChange:k=>h(P=>({...P,[E]:k.target.value}))}),w[E]==null?l.jsx("button",{className:"icon",onClick:()=>O(E),title:"Editar",children:l.jsx(He,{name:"edit"})}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"icon",onClick:()=>K(E),title:"Salvar",children:l.jsx(He,{name:"check"})}),l.jsx("button",{className:"icon",onClick:()=>$(E),title:"Cancelar",children:l.jsx(He,{name:"close"})})]}),l.jsx("button",{className:"icon",onClick:()=>T(E),title:"Desativar",children:l.jsx(He,{name:"minus"})}),l.jsx("button",{className:"icon",onClick:()=>y(E),children:l.jsx(He,{name:"trash"})})]})]},E))})]})}function bP(){var Be,B,ye;const[t,e]=X.useState(null),[n,r]=X.useState([]),[s,i]=X.useState({}),[o,c]=X.useState(!0),[u,h]=X.useState("table"),[p,g]=X.useState(!1),[_,j]=X.useState("dashboard"),[b,R]=X.useState({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""}),[z,N]=X.useState(!1),[w,A]=X.useState(!1),[O,$]=X.useState("create"),[K,v]=X.useState(null),[y,T]=X.useState(TE),[E,k]=X.useState({autoPostMLabs:!1}),[P,I]=X.useState(["Aberta","Em Progresso","Concluda"]),[Ce,Ve]=X.useState(["Post","Story","Banner","Vdeo","Outro"]),[mt,It]=X.useState([]),[V,ne]=X.useState([]),[oe,Se]=X.useState([]),we=X.useMemo(()=>{const H={};return(oe||[]).forEach(F=>{const L=String(F.username||"").toLowerCase(),re=String(F.email||"").toLowerCase(),Z=F.name||L||"";L&&(H[L]=Z),re&&(H[re]=Z)}),H},[oe]),Ae=H=>{const F=String(H||"").toLowerCase();return we[F]||H||""},[it,gt]=X.useState({Aberta:"#f59e0b","Em Progresso":"#3b82f6",Concluda:"#10b981"}),nt=X.useMemo(()=>Array.from(new Set(n.map(H=>H.designer).filter(Boolean))).sort(),[n]),Fe=X.useMemo(()=>oe.filter(H=>(H.cargo||"")==="Designer").map(H=>H.username).filter(Boolean).sort(),[oe]),Ue=X.useMemo(()=>Array.from(new Set([...Fe,...nt])).sort(),[Fe,nt]),Xt=X.useMemo(()=>Array.from(new Set(n.map(H=>H.campanha).filter(Boolean))).sort(),[n]),ut=(t==null?void 0:t.role)||"comum",Je=X.useMemo(()=>NP(n,b),[n,b]),rn=X.useMemo(()=>n,[n]),Dt=X.useMemo(()=>Array.isArray(Ue)?Ue:[],[Ue]),zt=X.useMemo(()=>Array.isArray(Je)?Je.slice().sort((H,F)=>{const L=de=>{try{const se=de.createdAt,ie=se&&typeof se=="object"&&"seconds"in se?(se.seconds||0)*1e3+(se.nanoseconds||0)/1e6:se?Date.parse(se):0,ce=Date.parse(de.dataCriacao||"")||0,Ne=Date.parse(de.dataSolicitacao||"")||0,De=Date.parse(de.prazo||"")||0,yt=Number(de.id)||0;return ie||ce||Ne||De||yt}catch{return Number(de.id)||0}},re=L(H),Z=L(F);return Z!==re?Z-re:String(F.id||"").localeCompare(String(H.id||""))}):[],[Je]),rt=X.useMemo(()=>Array.isArray(Ue)?Ue:[],[Ue]),st=X.useMemo(()=>Array.isArray(zt)?zt:[],[zt]),Wt=X.useMemo(()=>{try{if(!t)return[];const H=new Set([String(t.username||"").toLowerCase(),String(t.name||"").toLowerCase()]),F=[](n||[]).forEach(L=>{(L.historico||[]).forEach(re=>{re.tipo==="notificacao"&&Array.isArray(re.mentions)&&re.mentions.some(de=>H.has(String(de||"").toLowerCase()))&&F.push({id:L.id,titulo:L.titulo||"(sem ttulo)",quando:re.data_hora_evento||re.data||"",msg:re.mensagem||"Voc foi mencionado"})})});return F.sort((L,re)=>String(re.quando||"").localeCompare(String(L.quando||"")))}catch{return[]}},[n,t]);X.useEffect(()=>{try{const H=localStorage.getItem("mk_filtros");if(H){const F=JSON.parse(H);F&&typeof F=="object"&&R(L=>({...L,...F}))}}catch{}},[]),X.useEffect(()=>{try{localStorage.setItem("mk_filtros",JSON.stringify(b))}catch{}},[b]);const M=X.useMemo(()=>st.filter(H=>/revisar/i.test(String(H.status||""))).length,[st]);X.useMemo(()=>st.filter(H=>/aprovada/i.test(String(H.status||""))).length,[st]);const Y=X.useMemo(()=>Array.from(new Set(st.filter(H=>/revisar/i.test(String(H.status||""))).map(H=>Ae(H.designer||"")))).filter(Boolean),[st,Ae]),U=X.useMemo(()=>{const H=st,F=L=>String(L||"").toLowerCase();return{Pendente:H.filter(L=>$a(L.status)).length,"Em produo":H.filter(L=>Cs(L.status)).length,"Aguardando Feedback":H.filter(L=>F(L.status).includes("feedback")).length,Aprovada:H.filter(L=>F(L.status).includes("aprov")).length,Revisar:H.filter(L=>F(L.status).includes("revisar")).length,Concluida:H.filter(L=>F(L.status).includes("conclu")).length}},[st]),[ee,pe]=X.useState(10),[D,J]=X.useState(new Date),[G,fe]=X.useState("status"),me=X.useMemo(()=>(t==null?void 0:t.name)||(t==null?void 0:t.username)||"Voc",[t]),Te=["executivo","dashboard","demandas","config","cadastros","relatorios","usuarios"],ke=X.useMemo(()=>{const H=t==null?void 0:t.pages,F=(t==null?void 0:t.role)||"comum";if(H&&typeof H=="object"){const L=Object.keys(H).filter(re=>H[re]);return Array.isArray(L)?F==="admin"?Te:L:F==="admin"?Te:["dashboard","demandas"]}return F==="admin"?Te:["dashboard","demandas"]},[t]);X.useEffect(()=>{},[n,ge]),X.useEffect(()=>{ge||c(!1)},[ge]),X.useEffect(()=>{(async()=>{try{const F=SP&&!1||typeof window<"u"&&new URLSearchParams(window.location.search).get("purge")==="1";if(!ge||!F||typeof window<"u"&&window.__PURGED__)return;if(typeof window<"u"&&(window.__PURGED__=!0),Cn)try{await Kl(Cn,"purger@betaki.bet.br","purge12345")}catch{try{await Pv(Cn,"purger@betaki.bet.br","purge12345"),await Kl(Cn,"purger@betaki.bet.br","purge12345")}catch{}}const L=["demandas_v2","demandas","cad_status","cad_tipos","cad_designers","cad_plataformas","cad_origens","historico_status","usuarios"];for(const re of L)try{const Z=await Us(Zt(ge,re)),de=[];Z.forEach(se=>de.push(Hi(Vt(ge,re,se.id)))),de.length&&await Promise.all(de)}catch{}try{window.alert("Purge Firebase concludo")}catch{}}catch{}})()},[ge,Cn]),X.useEffect(()=>{},[ge]),X.useEffect(()=>{if(!Cn)return;const H=$k(Cn,async F=>{if(F){let L=null;const re=F.email||"",Z=(re.split("@")[0]||"").trim();if(ge&&Z)try{const se=await BA(Vt(ge,"usuarios",Z));L=se.exists()?se.data():null}catch{}const de={username:(L==null?void 0:L.username)||Z,name:(L==null?void 0:L.name)||re,role:(L==null?void 0:L.role)||"comum",pages:(L==null?void 0:L.pages)||null,actions:(L==null?void 0:L.actions)||null,cargo:(L==null?void 0:L.cargo)||""};e(de),c(!1)}else e(null),c(!1)});return()=>{try{H()}catch{}}},[Cn,ge]),X.useEffect(()=>{Object.entries(y||{}).forEach(([H,F])=>{try{document.documentElement.style.setProperty(`--${H}`,F)}catch{}})},[y]),X.useEffect(()=>{if(!ge||!t)return;const H=qs(Zt(ge,In),se=>{const ie=[];se.forEach(ce=>ie.push({id:ce.data().id||ce.id,...ce.data()})),r(ie),c(!1)}),F=qs(Zt(ge,"usuarios"),se=>{const ie=[];se.forEach(ce=>ie.push({id:ce.id,...ce.data()})),Se(ie)}),L=qs(Zt(ge,"cad_status"),se=>I(se.docs.map(ie=>ie.data().name||ie.id))),re=qs(Zt(ge,"cad_tipos"),se=>Ve(se.docs.filter(ie=>ie.data().active!==!1).map(ie=>ie.data().name||ie.id))),Z=qs(Zt(ge,"cad_plataformas"),se=>It(se.docs.filter(ie=>ie.data().active!==!1).map(ie=>ie.data().name||ie.id))),de=qs(Zt(ge,"cad_origens"),se=>ne(se.docs.filter(ie=>ie.data().active!==!1).map(ie=>ie.data().name||ie.id)));return()=>{try{H()}catch{}try{F()}catch{}try{L()}catch{}try{re()}catch{}try{Z()}catch{}try{de()}catch{}}},[ge,t]),X.useEffect(()=>{t&&!ke.includes(_)&&j(ke[0]||"dashboard"),!t&&_!=="dashboard"&&_!=="demandas"&&_!=="config"&&_!=="cadastros"&&_!=="relatorios"&&_!=="usuarios"&&j("dashboard")},[t,ke,_]),X.useEffect(()=>{if(!w||!K)return;const H=n.find(F=>String(F.id)===String(K.id));if(H)try{v(H)}catch{}},[n,w,K]);const Oe=async()=>{try{await qk(Cn)}catch{}e(null)},Ze=async(H,F)=>{const L=String(H||"").trim();if(!L||!F)throw new Error("Credenciais ausentes");if(!Cn)throw new Error("Firebase no configurado");const re=/@/.test(L)?L:`${L}@betaki.bet.br`;try{await Kl(Cn,re,F)}catch{if(await Pv(Cn,re,F),await Kl(Cn,re,F),ge)try{await ua(Vt(ge,"usuarios",L),{username:L,email:re,name:L,role:"comum",cargo:"",pages:null,actions:null})}catch{}}},Ge=(t==null?void 0:t.role)==="admin",Ie=Ge||((Be=t==null?void 0:t.actions)==null?void 0:Be.criar)!==!1,ot=Ge||((B=t==null?void 0:t.actions)==null?void 0:B.excluir)!==!1,m=Ge||((ye=t==null?void 0:t.actions)==null?void 0:ye.visualizar)!==!1,x=()=>{!t||!Ie||($("create"),v(null),A(!0))},C=H=>{!t||!m||($("edit"),v(H),A(!0))},W=async H=>{const F={...H,status:"Aberta",dataSolicitacao:Mn(),dataCriacao:null};if(ge)try{const L=String(Date.now());await Hl(Zt(ge,In),{...F,id:L,createdAt:_v()})}catch{}},ue=async(H,F)=>{const L=Mn();let re=null;if(r(de=>de.map(se=>{if(String(se.id)!==String(H))return se;const ie=se.status!==F,ce=String(se.status||"").toLowerCase().includes("produ")||String(se.status||"").toLowerCase().includes("progresso"),Ne=String(F||"").toLowerCase().includes("produ")||String(F||"").toLowerCase().includes("progresso"),De=Date.now();let yt=Number(se.tempoProducaoMs||0),ht=se.startedAt||null,Bt=se.finishedAt||null;const _t=String(F||"").toLowerCase().includes("feedback"),Lt=String(se.status||"").toLowerCase().includes("feedback");let fn=se.slaStartAt||null,Qn=se.slaStopAt||null,Kt=Number(se.slaPauseMs||0),ft=se.pauseStartedAt||null;if(ie){if(ce&&!Ne&&ht){const at=Date.parse(ht);isNaN(at)||(yt+=Math.max(0,De-at)),ht=null}if(!ce&&Ne&&!ht&&(ht=new Date(De).toISOString(),fn||(fn=ht)),!Lt&&_t&&!ft&&(ft=new Date(De).toISOString()),Lt&&!_t&&ft){const at=Date.parse(ft);isNaN(at)||(Kt+=Math.max(0,De-at)),ft=null}}const xt=String(F||"").toLowerCase().includes("revisar"),Pn=ie&&xt?(se.revisoes||0)+1:se.revisoes||0,Rn=String(F||"").toLowerCase().includes("concluida")||F==="Concluda",Jt=Rn?se.dataConclusao||L:se.dataConclusao,gr=ie&&(_t||Rn)&&!se.dataCriacao?L:se.dataCriacao;ie&&Rn&&(Bt=new Date(De).toISOString(),Qn=Bt);const tt=(se.historico||[]).find(at=>at.tipo==="status"),Yn=tt!=null&&tt.data_hora_evento?Date.parse(tt.data_hora_evento):tt!=null&&tt.data?Date.parse(`${tt.data}T00:00:00Z`):null,ir=new Date(De).toISOString(),_o=ie&&Yn?Math.round((De-Yn)/6e4):null,cl=ie?{tipo:"status",autor:me,data:L,data_hora_evento:ir,status_anterior:se.status,status_novo:F,duracao_em_minutos:_o,responsavel:me,id_demanda:se.id,de:se.status,para:F}:null,wo=(()=>{if(!se.prazo)return null;const[at,bt,Pr]=String(se.prazo).split("-").map(Number),Vs=new Date(at,(bt||1)-1,Pr||1);Vs.setHours(0,0,0,0);const So=new Date;return So.setHours(0,0,0,0),Vs-So})(),ul=!!(se.prazo&&!Rn&&typeof wo=="number"&&wo<=864e5),Eo=ie&&ul?{tipo:"alerta",autor:me,data:L,data_hora_evento:ir,mensagem:"Prazo menor que 24h",id_demanda:se.id}:null,gi=!!(ie&&(String(F||"").toLowerCase().includes("aprov")||String(F||"").toLowerCase().includes("conclu"))&&E.autoPostMLabs)?{tipo:"mlabs",autor:me,data:L,data_hora_evento:ir,mensagem:"Postagem agendada via mLabs",id_demanda:se.id}:null,vi=cl?[cl,...Eo?[Eo]:[],...gi?[gi]:[],...se.historico||[]]:se.historico||[],hl=ie&&_t&&!se.dataFeedback?L:se.dataFeedback,Uu=(vi||[]).filter(at=>at.tipo==="status"&&at.duracao_em_minutos!=null).reduce((at,bt)=>at+(bt.duracao_em_minutos||0),0),zu=(()=>{const at={};return(vi||[]).forEach(bt=>{if(bt.tipo==="status"&&bt.duracao_em_minutos!=null){const Pr=bt.status_anterior||bt.de||"Aberta";at[Pr]=(at[Pr]||0)+(bt.duracao_em_minutos||0)}}),at})(),fl=(()=>{if(!fn)return 0;const at=Qn?Date.parse(Qn):De,bt=Date.parse(fn);return isNaN(bt)||isNaN(at)?0:Math.max(0,at-bt-Kt)})(),pl=(()=>{if(!Jt||!se.prazo)return null;try{return String(Jt)<=String(se.prazo)}catch{return null}})(),Bu=Wv(de,{...se});return re={...se,status:F,revisoes:Pn,dataConclusao:Jt,dataCriacao:gr,dataFeedback:hl,historico:vi,tempoProducaoMs:yt,startedAt:ht,finishedAt:Bt,previsaoIA:Bu,fxBounceAt:ie?De:se.fxBounceAt||0,slaStartAt:fn,slaStopAt:Qn,slaPauseMs:Kt,pauseStartedAt:ft,slaNetMs:fl,slaOk:pl,leadTotalMin:Uu,leadPorFase:zu},re})),K&&String(K.id)===String(H)&&re)try{v(re)}catch{}const Z=re;if(ge&&Z)try{const de=(Z.historico||[]).find(xt=>xt.tipo==="status"),se=de!=null&&de.data_hora_evento?Date.parse(de.data_hora_evento):de!=null&&de.data?Date.parse(`${de.data}T00:00:00Z`):null,ie=new Date().toISOString(),ce=Z.status!==F&&se?Math.round((Date.now()-se)/6e4):null,Ne=(()=>{if(!Z.prazo)return null;const[xt,Pn,Rn]=String(Z.prazo).split("-").map(Number),Jt=new Date(xt,(Pn||1)-1,Rn||1);Jt.setHours(0,0,0,0);const gr=new Date;return gr.setHours(0,0,0,0),Jt-gr})(),De=!!(Z.prazo&&!(String(F||"").toLowerCase().includes("concluida")||F==="Concluda")&&typeof Ne=="number"&&Ne<=864e5),yt={tipo:"status",autor:me,data:L,data_hora_evento:ie,status_anterior:Z.status,status_novo:F,duracao_em_minutos:ce,responsavel:me,id_demanda:Z.id,de:Z.status,para:F},ht=De?{tipo:"alerta",autor:me,data:L,data_hora_evento:ie,mensagem:"Prazo menor que 24h",id_demanda:Z.id}:null,_t=!!((String(F||"").toLowerCase().includes("aprov")||String(F||"").toLowerCase().includes("conclu"))&&E.autoPostMLabs)?{tipo:"mlabs",autor:me,data:L,data_hora_evento:ie,mensagem:"Postagem agendada via mLabs",id_demanda:Z.id}:null,Lt=[yt,...ht?[ht]:[],..._t?[_t]:[],...Z.historico||[]],fn=Fo(Zt(ge,In),Uo("id","==",String(H))),Qn=await Us(fn),Kt={...Z,status:F,dataCriacao:Z.status!==F&&(String(F||"").toLowerCase().includes("feedback")||String(F||"").toLowerCase().includes("conclu"))&&!Z.dataCriacao?L:Z.dataCriacao??null,dataConclusao:String(F||"").toLowerCase().includes("concluida")||F==="Concluda"?Z.dataConclusao||L:Z.dataConclusao||null,dataFeedback:Z.status!==F&&String(F||"").toLowerCase().includes("feedback")&&!Z.dataFeedback?L:Z.dataFeedback??null,revisoes:(Z.revisoes||0)+(Z.status!==F&&String(F||"").toLowerCase().includes("revisar")?1:0),historico:Lt,tempoProducaoMs:Z.tempoProducaoMs,startedAt:Z.startedAt,finishedAt:String(F||"").toLowerCase().includes("concluida")||F==="Concluda"?new Date().toISOString():Z.finishedAt||null,slaStartAt:Z.slaStartAt,slaStopAt:String(F||"").toLowerCase().includes("concluida")||F==="Concluda"?new Date().toISOString():Z.slaStopAt||null,slaPauseMs:Z.slaPauseMs,pauseStartedAt:Z.pauseStartedAt,slaNetMs:Z.slaNetMs,slaOk:Z.slaOk??null,leadTotalMin:Z.leadTotalMin,leadPorFase:Z.leadPorFase},ft=[];Qn.forEach(xt=>ft.push(fs(Vt(ge,In,xt.id),Kt))),ft.length&&await Promise.all(ft);try{await Hl(Zt(ge,"historico_status"),yt)}catch{}}catch{}},je=async(H,F,L)=>{r(Z=>Z.map(de=>{if(String(de.id)!==String(H))return de;const se=[F,...de.comentarios||[]],ie=Array.isArray(F.mentions)&&F.mentions.length>0?{tipo:"notificacao",autor:me,data:F.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:F.mentions,id_demanda:de.id}:null,ce=ie?[ie,L,...de.historico||[]]:[L,...de.historico||[]];return{...de,comentarios:se,historico:ce,fxSavedAt:Date.now()}})),v(Z=>Z&&String(Z.id)===String(H)?{...Z,comentarios:[F,...Z.comentarios||[]],historico:[L,...Z.historico||[]]}:Z);const re=n.find(Z=>String(Z.id)===String(H));if(ge&&re)try{const Z=Array.isArray(F.mentions)&&F.mentions.length>0?{tipo:"notificacao",autor:me,data:F.data,data_hora_evento:new Date().toISOString(),mensagem:"Voc foi mencionado",mentions:F.mentions,id_demanda:re.id}:null,de=Z?[Z,L,...re.historico||[]]:[L,...re.historico||[]],se=Fo(Zt(ge,In),Uo("id","==",String(H))),ie=await Us(se),ce=[];ie.forEach(Ne=>ce.push(fs(Vt(ge,In,Ne.id),{comentarios:[F,...re.comentarios||[]],historico:de}))),ce.length&&await Promise.all(ce)}catch{}},We=async H=>{if(r(F=>F.map(L=>L.id===H?{...L,fxDeleting:!0}:L)),setTimeout(()=>{r(F=>F.filter(L=>L.id!==H))},180),ge)try{const F=Fo(Zt(ge,In),Uo("id","==",String(H))),L=await Us(F),re=[];L.forEach(Z=>re.push(Hi(Vt(ge,In,Z.id)))),re.length&&await Promise.all(re)}catch{}},Ct=async(H,F)=>{const L=Mn();let re=null;r(de=>de.map(se=>{if(se.id!==H)return se;if((se.historico||[]).some(De=>De.tipo==="alerta"&&De.data===L&&De.mensagem===F))return re=se,se;const ce={tipo:"alerta",autor:me,data:L,data_hora_evento:new Date().toISOString(),mensagem:F,id_demanda:se.id},Ne={...se,historico:[ce,...se.historico||[]]};return re=Ne,Ne}));const Z=re||n.find(de=>de.id===H);if(Z&&ge)try{const de={tipo:"alerta",autor:me,data:L,data_hora_evento:new Date().toISOString(),mensagem:F,id_demanda:Z.id},se=Fo(Zt(ge,In),Uo("id","==",String(H))),ie=await Us(se),ce=[];ie.forEach(Ne=>ce.push(fs(Vt(ge,In,Ne.id),{...Z,historico:[de,...Z.historico||[]]}))),ce.length&&await Promise.all(ce)}catch{}};X.useEffect(()=>{const H=setInterval(()=>{Mn();const F=n.filter(ie=>!Le(ie.status)),L=F.reduce((ie,ce)=>{const Ne=ce.designer||"";return ie[Ne]=(ie[Ne]||0)+1,ie},{});F.forEach(ie=>{if(ie.prazo)try{const[ht,Bt,_t]=String(ie.prazo).split("-").map(Number),Lt=new Date(ht,(Bt||1)-1,_t||1);Lt.setHours(0,0,0,0);const fn=new Date;fn.setHours(0,0,0,0),Lt-fn<=864e5&&Ct(ie.id,"Prazo menor que 24h")}catch{}const ce=(ie.historico||[]).find(ht=>ht.tipo==="status");if(ce!=null&&ce.data_hora_evento||ce!=null&&ce.data){const ht=ce.data_hora_evento?Date.parse(ce.data_hora_evento):Date.parse(`${ce.data}T00:00:00Z`);!isNaN(ht)&&Date.now()-ht>=1728e5&&Ct(ie.id,"Demanda estagnada h 48h")}const Ne=ie.designer||"",De=L[Ne]||0,yt=Math.min(100,Math.round(De/4*100));yt>=100?Ct(ie.id,`Capacidade 100% para ${Ne}  Risco mximo`):yt>=85&&Ct(ie.id,`Designer ${Ne} est com ${yt}% da capacidade utilizada. Risco de atraso.`),(ie.revisoes||0)>=2&&Ct(ie.id,"Retrabalho acima do limite")});const re=n.filter(ie=>Le(ie.status)),Z=re.filter(ie=>ie.prazo&&ie.dataConclusao&&ie.dataConclusao<=ie.prazo).length,de=re.filter(ie=>ie.prazo&&ie.dataConclusao).length;Math.round(100*(Z/Math.max(1,de)))<80&&F.forEach(ie=>Ct(ie.id,"SLA geral abaixo de 80%"))},6e4);return()=>clearInterval(H)},[n]);const dt=async({designer:H,tipoMidia:F,titulo:L,link:re,linkDrive:Z,arquivoNome:de,dataSolic:se,dataCriacao:ie,dataFeedback:ce,plataforma:Ne,arquivos:De,descricao:yt,prazo:ht,comentarios:Bt,historico:_t,origem:Lt,campanha:fn})=>{const Qn=async()=>{if(!ge)return;const Kt=async(ft,xt)=>{if(xt)try{await ua(Vt(ge,ft,String(xt)),{name:xt,active:!0},{merge:!0})}catch{}};try{await Kt("cad_tipos",F)}catch{}try{await Kt("cad_plataformas",Ne)}catch{}try{await Kt("cad_origens",Lt)}catch{}try{if(_t&&Array.isArray(_t)){const ft=_t[0],xt=(ft==null?void 0:ft.para)||(ft==null?void 0:ft.de)||"Aberta";await Kt("cad_status",xt)}}catch{}};if(O==="edit"&&K){const Kt={...K,designer:H,tipoMidia:F,titulo:L,link:re,linkDrive:Z,descricao:yt,comentarios:Bt??K.comentarios,historico:_t??K.historico,arquivos:De&&De.length?De:K.arquivos,arquivoNome:de||K.arquivoNome,dataSolicitacao:se||K.dataSolicitacao,dataCriacao:ie||K.dataCriacao,dataFeedback:ce||K.dataFeedback,plataforma:Ne,prazo:ht,origem:Lt,campanha:fn},ft={...Kt,fxSavedAt:Date.now()};if(r(xt=>xt.map(Pn=>Pn.id===K.id?ft:Pn)),ge)try{const xt=Fo(Zt(ge,In),Uo("id","==",String(K.id))),Pn=await Us(xt),Rn=[];Pn.forEach(Jt=>Rn.push(fs(Vt(ge,In,Jt.id),Kt))),Rn.length&&await Promise.all(Rn)}catch{}await Qn();try{await Ct(K.id,"Demanda salva")}catch{}try{window.alert("Demanda salva com sucesso!")}catch{}}else{const Kt=Mn(),ft=new Date().toISOString(),xt=H||(t==null?void 0:t.username)||"",Pn={tipo:"status",autor:me,data:Kt,data_hora_evento:ft,status_anterior:"",status_novo:"Aberta",duracao_em_minutos:null,responsavel:xt,id_demanda:null,de:"",para:"Aberta"},Rn=Wv(n,{designer:xt,tipoMidia:F,plataforma:Ne,origem:Lt}),Jt=`tmp-${Date.now()}`,gr={id:Jt,designer:xt,tipoMidia:F,titulo:L,link:re,linkDrive:Z,descricao:yt,comentarios:[],historico:[Pn],arquivos:De||[],arquivoNome:de,plataforma:Ne,origem:Lt,campanha:fn,dataSolicitacao:se,dataCriacao:void 0,dataFeedback:void 0,status:"Aberta",prazo:ht,tempoProducaoMs:0,startedAt:null,finishedAt:null,revisoes:0,createdBy:me,previsaoIA:Rn,slaStartAt:null,slaStopAt:null,slaPauseMs:0,pauseStartedAt:null,slaNetMs:0,slaOk:null,leadTotalMin:0,leadPorFase:{}};if(r(tt=>[gr,...tt]),ge)try{const tt={...gr,id:String(Jt),createdAt:_v()};tt.dataSolicitacao===void 0&&(tt.dataSolicitacao=null),tt.dataCriacao===void 0&&(tt.dataCriacao=null),tt.dataFeedback===void 0&&(tt.dataFeedback=null),tt.arquivoNome===void 0&&(tt.arquivoNome=null),await Hl(Zt(ge,In),tt);const Yn={...Pn,id_demanda:Jt};try{await Hl(Zt(ge,"historico_status"),Yn)}catch{}}catch(tt){const Yn=(tt==null?void 0:tt.code)||(tt==null?void 0:tt.message)||"Falha ao gravar";try{window.alert(String(Yn))}catch{}}await Qn();try{await Ct(Jt,"Demanda salva")}catch{}try{window.alert("Demanda salva com sucesso!")}catch{}}A(!1),j("demandas")},et=async()=>{if(window.confirm("Confirmar: apagar TODAS as demandas e limpar relatrios?")){r([]);try{R({designer:"",status:"",plataforma:"",tipoMidia:"",origem:"",campanha:"",cIni:"",cFim:"",sIni:"",sFim:""})}catch{}if(ge)try{const H=await Us(Zt(ge,In)),F=[];H.forEach(L=>F.push(Hi(Vt(ge,In,L.id)))),F.length&&await Promise.all(F)}catch{}}};return l.jsxs("div",{className:"layout",children:[t?l.jsx(LP,{route:_,setRoute:j,allowedRoutes:ke}):null,l.jsx("div",{className:`content ${t?"":"no-sidebar"} page`,children:l.jsxs("div",{className:"app",children:[t?l.jsx(CP,{onNew:x,view:u,setView:h,showNew:!!t,user:t,onLogout:Oe,mentions:Wt,onOpenDemanda:H=>{const F=n.find(L=>String(L.id)===String(H));F&&(j("demandas"),C(F))}}):null,!t&&l.jsx(AP,{onLogin:Ze}),t&&_==="executivo"&&ke.includes("executivo")&&l.jsx($P,{demandas:n,designers:rt,filtros:b,setFiltros:R,loading:o,user:t,onEdit:C,setRoute:j,setView:h}),t&&_==="dashboard"&&ke.includes("dashboard")&&l.jsx(zP,{demandas:n,items:rn,designers:Dt,setView:h,onEdit:C,onStatus:ue,cadStatus:P,onDelete:We,onDuplicate:W,compact:p,calRef:D,setCalRef:J,loading:o,setRoute:j,setFiltros:R,user:t}),t&&_==="demandas"&&ke.includes("demandas")&&l.jsx("div",{className:"demandas-layout",children:l.jsxs("div",{className:"content-col",children:[l.jsx("div",{className:"top-filters",children:l.jsx(UP,{filtros:b,setFiltros:R,designers:rt,showSearch:!1,statusCounts:U})}),l.jsxs("div",{className:"top-search",children:[l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:b.q||"",onChange:H=>R(F=>({...F,q:H.target.value}))}),l.jsxs("button",{className:"primary",onClick:x,disabled:!Ie,children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"plus"})}),l.jsx("span",{children:"Nova demanda"})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto"},children:l.jsx(xP,{view:u,setView:h})})]}),M>0&&l.jsx("div",{className:"alert-banner",title:"Demandas em reviso",children:(()=>{const H=Y,F=H.length<=2?H.join(" e "):`${H.slice(0,H.length-1).join(", ")} e ${H[H.length-1]}`,L=H.length>1?"tm":"tem",re=M>1?"demandas":"demanda",Z=H.length?`Ateno ${F} ${L} ${M} ${re} com status para revisar  verifique e priorize`:`Ateno: ${M} ${re} com status para revisar  verifique e priorize`;return l.jsx("div",{className:"alert-text",children:Z})})()}),u==="table"&&l.jsx("div",{className:"table-scroll",children:l.jsx(PP,{items:st.slice(0,ee),onEdit:C,onStatus:ue,cadStatus:P,onDelete:We,onDuplicate:W,hasMore:st.length>ee,showMore:()=>pe(H=>Math.min(H+10,st.length)),canCollapse:ee>10,showLess:()=>pe(10),shown:Math.min(ee,st.length),total:st.length,compact:p,canEdit:!!t,loading:o})}),u==="calendar"&&l.jsx(RP,{items:st,refDate:D}),l.jsx(jP,{open:w,mode:O,onClose:()=>A(!1),onSubmit:dt,initial:K,cadTipos:Ce,designers:rt,cadPlataformas:mt,onDelete:We,userLabel:me,canDelete:ot,onAddComment:je,cadOrigens:V,currentUser:(t==null?void 0:t.username)||"",usersAll:oe,canEdit:(t==null?void 0:t.role)==="admin",displayUser:Ae,onStatus:ue}),l.jsx(kP,{open:z,filtros:b,setFiltros:R,designers:rt,onClose:()=>N(!1),cadStatus:P,cadTipos:Ce,origens:V,campanhas:Xt})]})}),t&&_==="config"&&ke.includes("config")&&l.jsx(FP,{themeVars:y,setThemeVars:T,onReset:et,appSettings:E,setAppSettings:k}),t&&_==="cadastros"&&ke.includes("cadastros")&&l.jsx(DP,{cadStatus:P,setCadStatus:I,cadTipos:Ce,setCadTipos:Ve,cadPlataformas:mt,setCadPlataformas:It,cadOrigens:V,setCadOrigens:ne,cadStatusColors:it,setCadStatusColors:gt}),t&&_==="relatorios"&&ke.includes("relatorios")&&l.jsx(BP,{demandas:n,items:st,designers:rt,filtros:b,setFiltros:R,loading:o,onEdit:C,setRoute:j,setView:h}),t&&_==="usuarios"&&ke.includes("usuarios")&&l.jsx(VP,{role:ut})]})})]})}class MP extends Qs.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){try{console.error(e,n)}catch{}}render(){return this.state.hasError?l.jsxs("div",{className:"page",style:{padding:20},children:[l.jsx("div",{className:"panel",role:"alert",children:"Ocorreu um erro na aplicao."}),l.jsx("button",{className:"primary",onClick:()=>{try{window.location.reload()}catch{}},children:"Recarregar"})]}):this.props.children}}function OP(){return l.jsx(MP,{children:l.jsx(bP,{})})}function LP({route:t,setRoute:e,allowedRoutes:n}){return l.jsx("aside",{className:"sidebar",children:l.jsx("nav",{children:l.jsx("ul",{className:"nav-list",children:n.map(r=>l.jsx("li",{children:l.jsxs("a",{href:"#",className:`nav-link ${t===r?"active":""}`,onClick:s=>{s.preventDefault(),e(r)},children:[l.jsx("span",{className:"nav-ico",children:r==="executivo"?l.jsx(He,{name:"dashboard"}):r==="dashboard"?l.jsx(He,{name:"dashboard"}):r==="demandas"?l.jsx(He,{name:"demandas"}):r==="config"?l.jsx(He,{name:"config"}):r==="cadastros"?l.jsx(He,{name:"cadastros"}):r==="relatorios"?l.jsx(He,{name:"relatorios"}):l.jsx(He,{name:"usuarios"})}),l.jsx("span",{children:r==="executivo"?"Executivo":r==="dashboard"?"Dashboard":r==="demandas"?"Demandas":r==="config"?"Configuraes":r==="cadastros"?"Cadastros":r==="relatorios"?"Relatrios":"Usurios"})]})},r))})})})}function VP({users:t,onCreate:e,onDelete:n,onUpdate:r,role:s}){const[i,o]=X.useState(""),[c,u]=X.useState(""),[h,p]=X.useState(""),[g,_]=X.useState(""),[j,b]=X.useState("comum"),[R,z]=X.useState("Designer"),[N,w]=X.useState([]),A=X.useMemo(()=>Uv?_P(Uv,"us-central1"):null,[]),[O,$]=X.useState({});X.useEffect(()=>{if(ge){const V=qs(Zt(ge,"usuarios"),ne=>{const oe=[];ne.forEach(Se=>oe.push({id:Se.id,...Se.data()})),w(oe)});return()=>{try{V()}catch{}}}else w([])},[]);const[K,v]=X.useState({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),[y,T]=X.useState({criar:!0,excluir:!0,visualizar:!0}),E=(V,ne)=>V(oe=>({...oe,[ne]:!oe[ne]})),k=async()=>{if(s!=="admin"){try{window.alert("Apenas usurios com perfil admin podem criar novos usurios.")}catch{}return}const V=i.trim(),ne=g.trim()||`${V}@betaki.bet.br`;if(!V||!h)return;const oe={name:c||V,role:j,cargo:R,pages:K,actions:y};try{if(A){await qv(A,"createUser")({username:V,password:h,email:ne,profile:oe});try{window.alert("Usurio criado com sucesso!")}catch{}}}catch(Se){try{if(A){await EP(A,"https://us-central1-mkt-betaki.cloudfunctions.net/createUser")({username:V,password:h,email:ne,profile:oe});try{window.alert("Usurio criado com sucesso!")}catch{}}else throw Se}catch(we){try{window.alert(String((we==null?void 0:we.code)||(we==null?void 0:we.message)||"Falha ao criar usurio"))}catch{}}}o(""),u(""),p(""),_(""),b("comum"),z("Designer"),v({dashboard:!0,demandas:!0,config:!0,cadastros:!0,relatorios:!0,usuarios:!0}),T({criar:!0,excluir:!0,visualizar:!0})},P=async V=>{if((V.username||V.id)!=="admin"&&ge)try{await Hi(Vt(ge,"usuarios",V.username||V.id)),w(ne=>ne.filter(oe=>(oe.username||oe.id)!==(V.username||V.id)))}catch{}},I=async V=>{const ne=String(O[V.username||V.id]||"").trim();if(ne&&A)try{await qv(A,"updateUserPassword")({username:V.username||V.id,password:ne,email:V.email||void 0}),$(Se=>({...Se,[V.username||V.id]:""}));try{window.alert("Senha atualizada com sucesso!")}catch{}}catch(oe){try{window.alert(String((oe==null?void 0:oe.code)||(oe==null?void 0:oe.message)||"Falha ao atualizar senha"))}catch{}}},Ce=async(V,ne)=>{const oe=V.pages||{},Se={pages:{...oe,[ne]:!oe[ne]}};if(ge)try{await fs(Vt(ge,"usuarios",V.username||V.id),Se),w(we=>we.map(Ae=>Ae.username===V.username||Ae.id===V.id?{...Ae,...Se}:Ae))}catch{}},Ve=async(V,ne)=>{const oe=V.actions||{},Se={actions:{...oe,[ne]:!oe[ne]}};if(ge)try{await fs(Vt(ge,"usuarios",V.username||V.id),Se),w(we=>we.map(Ae=>Ae.username===V.username||Ae.id===V.id?{...Ae,...Se}:Ae))}catch{}},mt=async(V,ne)=>{const oe={cargo:ne};if(ge)try{await fs(Vt(ge,"usuarios",V.username||V.id),oe),w(Se=>Se.map(we=>we.username===V.username||we.id===V.id?{...we,...oe}:we))}catch{}},It=async(V,ne)=>{const oe={role:ne};if(ge)try{await fs(Vt(ge,"usuarios",V.username||V.id),oe),w(Se=>Se.map(we=>we.username===V.username||we.id===V.id?{...we,...oe}:we))}catch{}};return l.jsxs("div",{className:"panel users-panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Usurios"})}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Usurio"}),l.jsx("input",{value:i,onChange:V=>o(V.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Nome"}),l.jsx("input",{value:c,onChange:V=>u(V.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Senha"}),l.jsx("input",{type:"password",value:h,onChange:V=>p(V.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",value:g,onChange:V=>_(V.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Perfil"}),l.jsxs("select",{value:j,onChange:V=>b(V.target.value),children:[l.jsx("option",{value:"comum",children:"Comum"}),l.jsx("option",{value:"gerente",children:"Gerente"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Cargo"}),l.jsxs("select",{value:R,onChange:V=>z(V.target.value),children:[l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Pginas"}),l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(V=>l.jsxs("button",{className:`btn-md ${K[V]?"active":""}`,type:"button",onClick:()=>E(v,V),children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:V==="dashboard"?"dashboard":V==="demandas"?"demandas":V==="config"?"config":V==="cadastros"?"cadastros":V==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:V==="dashboard"?"Dashboard":V==="demandas"?"Demandas":V==="config"?"Configuraes":V==="cadastros"?"Cadastros":V==="relatorios"?"Relatrios":"Usurios"})]},V))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Aes"}),l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([V,ne,oe])=>l.jsxs("button",{className:`btn-md ${y[V]?"active":""}`,type:"button",onClick:()=>E(T,V),children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:ne})}),l.jsx("span",{children:oe})]},V))})]}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"primary",type:"button",onClick:k,disabled:s!=="admin",children:"Criar usurio"})})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usurio"}),l.jsx("th",{children:"Nome"}),l.jsx("th",{children:"Perfil"}),l.jsx("th",{children:"Cargo"}),l.jsx("th",{children:"Pginas"}),l.jsx("th",{children:"Aes"}),l.jsx("th",{children:"Senha"}),l.jsx("th",{children:"Gerenciar"})]})}),l.jsx("tbody",{children:(N||[]).map(V=>l.jsxs("tr",{children:[l.jsx("td",{children:V.username}),l.jsx("td",{children:V.name||V.username}),l.jsx("td",{children:s==="admin"?l.jsxs("select",{value:V.role||"comum",onChange:ne=>It(V,ne.target.value),children:[l.jsx("option",{value:"comum",children:"Comum"}),l.jsx("option",{value:"gerente",children:"Gerente"}),l.jsx("option",{value:"admin",children:"Admin"})]}):V.role||"comum"}),l.jsx("td",{children:l.jsxs("select",{value:V.cargo||"",onChange:ne=>mt(V,ne.target.value),children:[l.jsx("option",{value:"",children:"Selecione"}),l.jsx("option",{value:"Designer",children:"Designer"}),l.jsx("option",{value:"Social Media",children:"Social Media"}),l.jsx("option",{value:"Gerente",children:"Gerente"}),l.jsx("option",{value:"Externo",children:"Externo"})]})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:["dashboard","demandas","config","cadastros","relatorios","usuarios"].map(ne=>{var oe;return l.jsxs("button",{className:`btn-md ${((oe=V.pages)==null?void 0:oe[ne])===!0?"active":""}`,type:"button",onClick:()=>Ce(V,ne),disabled:s!=="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:ne==="dashboard"?"dashboard":ne==="demandas"?"demandas":ne==="config"?"config":ne==="cadastros"?"cadastros":ne==="relatorios"?"relatorios":"usuarios"})}),l.jsx("span",{children:ne==="dashboard"?"Dashboard":ne==="demandas"?"Demandas":ne==="config"?"Configuraes":ne==="cadastros"?"Cadastros":ne==="relatorios"?"Relatrios":"Usurios"})]},ne)})})}),l.jsx("td",{children:l.jsx("div",{className:"chips",children:[["criar","plus","Criar"],["excluir","trash","Excluir"],["visualizar","table","Visualizar"]].map(([ne,oe,Se])=>{var we;return l.jsxs("button",{className:`btn-md ${((we=V.actions)==null?void 0:we[ne])===!0?"active":""}`,type:"button",onClick:()=>Ve(V,ne),disabled:s!=="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:oe})}),l.jsx("span",{children:Se})]},ne)})})}),l.jsx("td",{children:l.jsxs("div",{className:"form-row",children:[l.jsx("input",{type:"password",placeholder:"Nova senha",value:O[V.username||V.id]||"",onChange:ne=>$(oe=>({...oe,[V.username||V.id]:ne.target.value}))}),l.jsx("button",{className:"primary",type:"button",onClick:()=>I(V),children:"Salvar"})]})}),l.jsx("td",{children:l.jsxs("button",{className:"icon",onClick:()=>P(V),disabled:V.username==="admin",children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"trash"})}),l.jsx("span",{children:"Excluir"})]})})]},V.username))})]})]})}function FP({themeVars:t,setThemeVars:e,onReset:n,appSettings:r,setAppSettings:s}){const[i,o]=X.useState(t||{}),[c,u]=X.useState(""),[h,p]=X.useState("");X.useEffect(()=>{o(t||{})},[t]);const g=v=>/^#[0-9a-fA-F]{6}$/.test(v||""),_=v=>/^#[0-9a-fA-F]{8}$/.test(v||""),j=v=>/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0|1|0?\.\d+)\)$/.exec(v||""),b=v=>Math.max(0,Math.min(255,v|0)).toString(16).padStart(2,"0"),R=v=>({r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16)}),z=v=>{if(g(v))return{fmt:"hex6",base:v,a:1};if(_(v))return{fmt:"hex8",base:"#"+v.slice(1,7),a:parseInt(v.slice(7,9),16)/255};const y=j(v);return y?{fmt:"rgba",base:"#"+b(+y[1])+b(+y[2])+b(+y[3]),a:parseFloat(y[4])}:{fmt:"other",base:v,a:1}},N=(v,y,T)=>{const E=v==="hover"?"rgba":v==="border"||v==="btnBorder"?"hex8":"hex6";if(E==="hex6"||T>=1)return y;if(E==="hex8")return y+b(Math.round(T*255));const{r:k,g:P,b:I}=R(y);return`rgba(${k},${P},${I},${T})`},w=(v,y)=>{const T={...i,[v]:y};o(T),e(T)},A=(v,y)=>{const T=z(i[v]||""),E=Math.max(0,Math.min(100,Number(y)||0))/100,k=N(v,T.base,E);w(v,k)},O=()=>{if(!c)return;const v={...i,[c]:h||""};o(v),e(v),u(""),p("")},$=()=>e(TE),K=[{title:"Base",keys:["bg","panel","accent"]},{title:"Texto",keys:["text","muted"]},{title:"Traado",keys:["border"]},{title:"Botes",keys:["btnBg","btnText","btnHoverBg","btnBorder"]},{title:"Hover/Efeitos",keys:["hover","shadow"]},{title:"Extras",keys:["green","yellow","red","chart"]}];return l.jsxs("div",{className:"panel",children:[l.jsx("div",{className:"tabs",children:l.jsx("button",{className:"tab active",children:"Tema"})}),l.jsxs("div",{className:"config-grid",children:[K.map(v=>l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"title",children:v.title}),v.keys.map(y=>{const T=i[y]||"",E=z(T),k=E.fmt!=="other",P=y==="hover"||y==="border"||y==="btnBorder";return l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:y}),l.jsxs("div",{className:"color-row",children:[k?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"color",value:E.base,onChange:I=>w(y,N(y,I.target.value,E.a))}),P&&l.jsx("input",{className:"alpha",type:"range",min:"0",max:"100",step:"1",value:Math.round(E.a*100),onChange:I=>A(y,I.target.value),title:`Alpha ${Math.round(E.a*100)}%`})]}):l.jsx("input",{value:T,onChange:I=>w(y,I.target.value)}),l.jsx("div",{className:"swatch",style:{background:T}})]})]},y)})]},v.title)),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Adicionar varivel"}),l.jsxs("div",{className:"color-row",children:[l.jsx("input",{placeholder:"nome",value:c,onChange:v=>u(v.target.value)}),l.jsx("input",{placeholder:"valor",value:h,onChange:v=>p(v.target.value)}),l.jsx("button",{className:"primary",type:"button",onClick:O,children:"Adicionar"})]})]}),l.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[l.jsx("div",{className:"title",children:"Integraes"}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{children:"Autopost via mLabs"}),l.jsx("input",{type:"checkbox",checked:!!r.autoPostMLabs,onChange:v=>s(y=>({...y,autoPostMLabs:v.target.checked}))})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"danger",type:"button",onClick:n,children:"Resetar sistema"}),l.jsx("button",{className:"primary",type:"button",onClick:$,children:"Restaurar padro"})]})]})}function UP({filtros:t,setFiltros:e,designers:n,showSearch:r,statusCounts:s}){const[i,o]=X.useState("today"),[c,u]=X.useState(!1);X.useEffect(()=>{const R=new Date,z=v=>{const y=T=>String(T).padStart(2,"0");return`${v.getFullYear()}-${y(v.getMonth()+1)}-${y(v.getDate())}`},N=v=>{const y=new Date(v),T=y.getDay()||7;return y.setDate(y.getDate()-(T-1)),new Date(y.getFullYear(),y.getMonth(),y.getDate())},w=v=>{const y=N(v),T=new Date(y);return T.setDate(T.getDate()+6),T},A=new Date(R.getFullYear(),R.getMonth(),1),O=new Date(R.getFullYear(),R.getMonth()+1,0),$=new Date(R.getFullYear(),R.getMonth()-1,1),K=new Date(R.getFullYear(),R.getMonth(),0);if(i==="today"&&e(v=>({...v,sIni:z(R),sFim:z(R),cIni:"",cFim:""})),i==="week"){const v=N(R),y=w(R);e(T=>({...T,sIni:z(v),sFim:z(y),cIni:"",cFim:""}))}if(i==="nextweek"){const v=N(R);v.setDate(v.getDate()+7);const y=w(v);e(T=>({...T,sIni:z(v),sFim:z(y),cIni:"",cFim:""}))}if(i==="month"&&e(v=>({...v,sIni:z(A),sFim:z(O),cIni:"",cFim:""})),i==="lastmonth"&&e(v=>({...v,sIni:z($),sFim:z(K),cIni:"",cFim:""})),i==="last30"){const v=new Date(R);v.setDate(v.getDate()-29),e(y=>({...y,sIni:z(v),sFim:z(R),cIni:"",cFim:""}))}},[i]);const h=R=>e(z=>({...z,designer:R==="Todos"?"":R})),p=["Hoje","Semana","Prxima semana","Ms","Ms passado","Perodo customizado"],g=R=>R==="Hoje"?"today":R==="Semana"?"week":R==="Prxima semana"?"nextweek":R==="Ms"?"month":R==="Ms passado"?"lastmonth":"custom",_=["Todos",...n],j=R=>R==="Pendente"?"gray":R==="Em produo"?"yellow":R==="Revisar"?"red":R==="Aguardando Feedback"?"purple":R==="Aprovada"?"green-approve":R==="Concluida"||R==="Concluda"?"green-dark":"",b=R=>R==="Pendente"?"":R==="Em produo"?"":R==="Aguardando Feedback"?"":R==="Revisar"?"":R==="Aprovada"?"":R==="Concluida"||R==="Concluda"?"":"";return l.jsxs("div",{className:"filterbar",children:[r!==!1&&l.jsx("div",{className:"seg",style:{flex:1,minWidth:220},children:l.jsx("input",{className:"search",placeholder:"Pesquisar demandas...",value:t.q||"",onChange:R=>e(z=>({...z,q:R.target.value}))})}),l.jsxs("div",{className:"filters-row",children:[l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Perodo"}),p.map(R=>R==="Perodo customizado"?l.jsxs("div",{className:"date-pill",title:"Perodo customizado",children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"calendar"})}),l.jsx("input",{type:"date",value:t.cIni||"",onChange:z=>{e(N=>({...N,cIni:z.target.value})),o("custom")}}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:t.cFim||"",onChange:z=>{e(N=>({...N,cFim:z.target.value})),o("custom")}})]},R):l.jsxs("button",{className:`btn-md ${i===g(R)?"active":""}`,onClick:()=>o(g(R)),children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"calendar"})}),l.jsx("span",{children:R})]},R))]}),l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Designer"}),_.map(R=>l.jsxs("button",{className:`btn-md ${(t.designer||"")===R||R==="Todos"&&!t.designer?"active":""}`,onClick:()=>h(R),children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"usuarios"})}),l.jsx("span",{children:R})]},R))]}),l.jsx("div",{className:"seg",style:{marginLeft:"auto"},children:l.jsx("button",{className:"tertiary",type:"button",onClick:()=>u(R=>!R),children:c?"Ocultar Filtros Avanados":"Filtros Avanados"})})]}),c&&l.jsx("div",{className:"filters-row",children:l.jsxs("div",{className:"seg",children:[l.jsx("div",{className:"filter-title",children:"Status"}),Ba.map(R=>l.jsxs("button",{className:`btn-md ${j(R)} ${(t.status||"")===R?"active":""}`,onClick:()=>e(z=>({...z,status:z.status===R?void 0:R})),children:[l.jsx("span",{className:"emoji",children:b(R)}),l.jsx("span",{children:R}),(s==null?void 0:s[R])>0?l.jsx("span",{className:"alert-count",children:s[R]}):null]},R))]})})]})}function zP({demandas:t,items:e,designers:n,setView:r,onEdit:s,onStatus:i,cadStatus:o,onDelete:c,onDuplicate:u,compact:h,calRef:p,setCalRef:g,loading:_,setRoute:j,setFiltros:b,user:R}){const z=(R==null?void 0:R.role)==="admin",N=(R==null?void 0:R.username)||"",w=z?e||[]:(e||[]).filter(M=>(M.designer||"")===N),A=w.length,O=w.filter(M=>Le(M.status)),$=O.length;w.filter(M=>!Le(M.status)).length,w.reduce((M,Y)=>M+(Y.revisoes||0),0),Math.round(100*(w.filter(M=>(M.revisoes||0)>0).length/Math.max(1,A)));const K=(()=>{const M=O.filter(U=>U.prazo&&U.dataConclusao&&U.dataConclusao<=U.prazo).length,Y=O.filter(U=>U.prazo&&U.dataConclusao).length;return Math.round(100*(M/Math.max(1,Y)))})(),v=(()=>{const M=pe=>{if(!pe)return null;const[D,J,G]=String(pe).split("-").map(Number);return new Date(D,J-1,G)},Y=w.map(pe=>M(pe.dataCriacao||pe.dataSolicitacao)).filter(Boolean).sort((pe,D)=>pe-D);if(!Y.length)return 0;const U=Y[0],ee=Y[Y.length-1];return Math.max(1,Math.round((ee-U)/864e5)+1)})(),y=4,T=n.length*y*v,E=(()=>{const M=T;return M?Math.round(100*($/M)):0})();w.filter(M=>Cs(M.status)).length,w.filter(M=>$a(M.status)).length;const k=z?n:[N],P=(()=>{const M={};O.forEach(U=>{const ee=U.designer||"";M[ee]=(M[ee]||0)+1});const Y=y*v;return k.map(U=>{const ee=M[U]||0,pe=Y?Math.round(100*(ee/Y)):0,D=Y===0||pe<=90?"Verde":pe<=110?"Amarelo":"Vermelho";return{designer:U,ideal:Y,real:ee,used:pe,status:D}})})(),I=(()=>{const M={};return w.forEach(Y=>{if(!Le(Y.status)){const U=Y.designer||"";M[U]=(M[U]||0)+1}}),M})();(()=>{const M=[];return P.forEach(U=>{U.used>=110?M.push(`Designer ${U.designer} sobrecarregado (${U.used}%)  risco de atraso`):U.used>=90&&M.push(`Designer ${U.designer} com carga alta (${U.used}%)  monitorar prazos`);const ee=I[U.designer]||0;ee>=y*2&&M.push(`Designer ${U.designer} com ${ee} demandas ativas  priorizar distribuio`)}),w.filter(U=>{if(Le(U.status)||!U.prazo)return!1;const[ee,pe,D]=String(U.prazo).split("-").map(Number),J=new Date(ee,(pe||1)-1,D||1),G=new Date;return G.setHours(0,0,0,0),J.setHours(0,0,0,0),J-G<=864e5}).slice(0,5).forEach(U=>M.push(`Prazo crtico: ${U.titulo} (${U.designer||""})`)),M.length===0&&(E<=70&&M.push("Bom momento para antecipar demandas futuras."),M.push("Capacidade disponvel para novos projetos.")),M})();const Ce=(()=>{const M=new Map;return O.forEach(Y=>M.set(Y.designer||"",(M.get(Y.designer||"")||0)+1)),Array.from(M.entries()).map(([Y,U])=>({designer:Y,qty:U}))})(),Ve=(()=>{const M=(U,ee)=>{const pe=D=>{const[J,G,fe]=String(D).split("-").map(Number);return new Date(J,G-1,fe)};return!U||!ee?null:Math.max(0,Math.round((pe(ee)-pe(U))/864e5))},Y={};return w.forEach(U=>{if(U.dataConclusao){const ee=U.designer||"",pe=M(U.dataCriacao||U.dataSolicitacao,U.dataConclusao);if(pe!=null){const D=Y[ee]||{cnt:0,sum:0,min:9999,max:0};Y[ee]={cnt:D.cnt+1,sum:D.sum+pe,min:Math.min(D.min,pe),max:Math.max(D.max,pe)}}}}),Object.entries(Y).map(([U,ee])=>({designer:U,media:ee.sum/ee.cnt||0}))})(),mt=(()=>{const M={};return w.forEach(Y=>{if(Y.prazo&&Y.dataConclusao){const U=Y.designer||"",ee=Y.dataConclusao<=Y.prazo,pe=M[U]||{ok:0,total:0};M[U]={ok:pe.ok+(ee?1:0),total:pe.total+1}}}),Object.entries(M).map(([Y,U])=>({designer:Y,pct:Math.round(100*(U.ok/(U.total||1)))}))})(),It=(()=>{const M={};return w.forEach(Y=>{const U=Y.designer||"",ee=Y.revisoes||0,pe=M[U]||{rTot:0,cnt:0};M[U]={rTot:pe.rTot+ee,cnt:pe.cnt+1}}),Object.entries(M).map(([Y,U])=>({designer:Y,porPeca:+(U.rTot/(U.cnt||1)).toFixed(2)}))})();(()=>{const M=Ce.reduce((Ie,{designer:ot,qty:m})=>(Ie[ot]=m,Ie),{}),Y=mt.reduce((Ie,{designer:ot,pct:m})=>(Ie[ot]=m,Ie),{}),U=Ve.reduce((Ie,{designer:ot,media:m})=>(Ie[ot]=m,Ie),{}),ee=It.reduce((Ie,{designer:ot,porPeca:m})=>(Ie[ot]=m,Ie),{}),pe=Array.from(new Set([...Object.keys(M),...Object.keys(Y),...Object.keys(U),...Object.keys(ee)])).filter(Boolean),D=(Ie,ot,m)=>m===ot?1:Math.max(0,Math.min(1,(Ie-ot)/(m-ot))),J=Math.max(...Object.values(M||{_:-1}),0),G=Math.min(...Object.values(M||{_:-1}),0),fe=100,me=0,Te=Math.max(...Object.values(U||{_:-1}),0),ke=Math.min(...Object.values(U||{_:-1}),0),Oe=Math.max(...Object.values(ee||{_:-1}),0),Ze=Math.min(...Object.values(ee||{_:-1}),0);return pe.map(Ie=>{const ot=D(M[Ie]||0,G,J),m=D(Y[Ie]||0,me,fe),x=1-D(U[Ie]||0,ke,Te),C=1-D(ee[Ie]||0,Ze,Oe),W=Math.round((ot*.4+m*.3+x*.2+C*.1)*100);return{designer:Ie,score:W,sla:Y[Ie]||0,retrab:ee[Ie]||0}}).sort((Ie,ot)=>ot.score-Ie.score).slice(0,5)})(),(()=>{const M=Array.from({length:11},(U,ee)=>ee+8),Y={};return n.forEach(U=>Y[U]=M.map(ee=>0)),w.forEach(U=>{if(U.startedAt)try{const pe=new Date(U.startedAt).getHours();if(pe>=8&&pe<=18){const D=U.designer||"",J=pe-8;Y[D]&&Y[D][J]++}}catch{}}),{horas:M,per:Y}})();const V=new Date,ne=new Date(V.getFullYear(),V.getMonth(),1),oe=new Date(V.getFullYear(),V.getMonth()+1,0),Se=new Date(V.getFullYear(),V.getMonth()-1,1),we=new Date(V.getFullYear(),V.getMonth(),0),Ae=M=>{if(!M)return null;const[Y,U,ee]=String(M).split("-").map(Number);return Y?new Date(Y,U-1,ee):null},it=(M,Y,U)=>M?(M.setHours(0,0,0,0),M>=Y&&M<=U):!1,gt=w.filter(M=>Le(M.status)&&it(Ae(M.dataConclusao),ne,oe)),nt=w.filter(M=>Le(M.status)&&it(Ae(M.dataConclusao),Se,we)),Fe=w.filter(M=>it(Ae(M.dataCriacao||M.dataSolicitacao),ne,oe)),Ue=w.filter(M=>it(Ae(M.dataCriacao||M.dataSolicitacao),Se,we)),Xt=w.filter(M=>{if(Le(M.status)||!M.prazo)return!1;const Y=Ae(M.prazo),U=new Date;return U.setHours(0,0,0,0),Y&&Y<U});w.filter(M=>{if(Le(M.status)||!M.prazo)return!1;const Y=Ae(M.prazo),U=new Date;return U.setHours(0,0,0,0),Y?Y-U<=864e5:!1}).length;const ut=(()=>{const M=gt.filter(U=>U.prazo&&U.dataConclusao&&U.dataConclusao<=U.prazo).length,Y=gt.filter(U=>U.prazo&&U.dataConclusao).length;return Math.round(100*(M/Math.max(1,Y)))})();(()=>{const M=nt.filter(U=>U.prazo&&U.dataConclusao&&U.dataConclusao<=U.prazo).length,Y=nt.filter(U=>U.prazo&&U.dataConclusao).length;return Math.round(100*(M/Math.max(1,Y)))})();const Je=(M,Y)=>{const U=Ae(M),ee=Ae(Y);return!U||!ee?null:Math.max(0,Math.round((ee-U)/864e5))},rn=M=>{const Y=M.map(ee=>Je(ee.dataCriacao||ee.dataSolicitacao,ee.dataConclusao)).filter(ee=>ee!=null);return+(Y.reduce((ee,pe)=>ee+pe,0)/(Y.length||1)||0).toFixed(1)};rn(gt),rn(nt);const Dt=(()=>{const M=gt.length,Y=gt.filter(U=>(U.revisoes||0)>0).length;return Math.round(100*(Y/Math.max(1,M)))})();(()=>{const M=nt.length,Y=nt.filter(U=>(U.revisoes||0)>0).length;return Math.round(100*(Y/Math.max(1,M)))})();const zt=gt.length;nt.length,Fe.length,Ue.length;const rt=(M,Y)=>{const U=[],ee=new Date;for(let pe=M-1;pe>=0;pe--){const D=new Date(ee);D.setDate(D.getDate()-pe);const J=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}-${String(D.getDate()).padStart(2,"0")}`;U.push(Y(J,D))}return U};rt(30,(M,Y)=>{const U=w.filter(D=>String(D.dataConclusao||"")===String(M)),ee=U.filter(D=>D.prazo&&D.dataConclusao&&D.dataConclusao<=D.prazo).length,pe=U.filter(D=>D.prazo&&D.dataConclusao).length;return Math.round(100*(ee/Math.max(1,pe)))}),rt(30,(M,Y)=>{const ee=w.filter(D=>String(D.dataConclusao||"")===String(M)).map(D=>Je(D.dataCriacao||D.dataSolicitacao,D.dataConclusao)).filter(D=>D!=null),pe=ee.reduce((D,J)=>D+J,0)/(ee.length||1);return Math.round(pe||0)}),rt(30,(M,Y)=>w.filter(U=>String(U.dataConclusao||"")===String(M)).length),rt(30,(M,Y)=>Y.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})),(()=>{if(Xt.length>0)return{text:` Existem ${Xt.length} demandas atrasadas hoje.`,tone:"alert",onClick:()=>st({sFim:(()=>{const U=new Date;U.setDate(U.getDate()-1);const ee=pe=>String(pe).padStart(2,"0");return`${U.getFullYear()}-${ee(U.getMonth()+1)}-${ee(U.getDate())}`})(),status:""})};const Y=k.map(U=>{const ee=I[U]||0,pe=Math.min(100,Math.round(100*(ee/(y*2))));return{d:U,used:pe}}).sort((U,ee)=>ee.used-U.used).find(U=>U.used>=80);return Y?{text:` ${Y.d} est acima da capacidade ideal.`,tone:"warn",onClick:()=>st({designer:Y.d})}:{text:" Nenhuma ao necessria hoje.",tone:"ok",onClick:null}})();const st=M=>{j&&j("demandas"),r&&r("table"),b&&b(Y=>({...Y,...M}))};return(()=>{const M=w.length||1,Y=w.length,U=w.filter(J=>Cs(J.status)).length,ee=w.filter(J=>String(J.status||"").toLowerCase().includes("revis")).length,pe=O.length,D=J=>Math.round(100*(J/Math.max(1,M)));return[{label:"Criadas",q:Y,pct:D(Y),color:"#4DA3FF"},{label:"Em Produo",q:U,pct:D(U),color:"#9AA0A6"},{label:"Em Reviso",q:ee,pct:D(ee),color:"#FFE55C"},{label:"Concludas",q:pe,pct:D(pe),color:"#00C58E"}]})(),k.map(M=>{const Y=w.filter(Te=>(Te.designer||"")===M),U=O.filter(Te=>(Te.designer||"")===M),ee=U.length,pe=(()=>{const Te=U.filter(Oe=>Oe.prazo&&Oe.dataConclusao&&Oe.dataConclusao<=Oe.prazo).length,ke=U.filter(Oe=>Oe.prazo&&Oe.dataConclusao).length;return Math.round(100*(Te/Math.max(1,ke)))})(),D=(()=>{const Te=U.map(Oe=>Je(Oe.dataCriacao||Oe.dataSolicitacao,Oe.dataConclusao)).filter(Oe=>Oe!=null);return+(Te.reduce((Oe,Ze)=>Oe+Ze,0)/(Te.length||1)||0).toFixed(1)})(),J=(()=>{const Te=Y.length||1,ke=Y.filter(Oe=>(Oe.revisoes||0)>0).length;return Math.round(100*(ke/Math.max(1,Te)))})(),G=y*v,fe=I[M]||0,me=G?Math.min(100,Math.round(100*(fe/G))):0;return{designer:M,concl:ee,sla:pe,lead:D,ret:J,used:me}}).slice().sort((M,Y)=>Y.sla!==M.sla?Y.sla-M.sla:Y.concl!==M.concl?Y.concl-M.concl:Y.ret!==M.ret?M.ret-Y.ret:M.lead-Y.lead),(()=>{const M={};return w.forEach(U=>{if(!Le(U.status)&&U.prazo&&String(U.prazo)<String(Mn())){const ee=U.designer||"";M[ee]=(M[ee]||0)+1}}),Object.entries(M).map(([U,ee])=>({designer:U,q:ee})).sort((U,ee)=>ee.q-U.q)[0]||null})(),(()=>{const M={};return k.forEach(U=>{const ee=O.filter(D=>(D.designer||"")===U).map(D=>Je(D.dataCriacao||D.dataSolicitacao,D.dataConclusao)).filter(D=>D!=null),pe=ee.length?+(ee.reduce((D,J)=>D+J,0)/ee.length).toFixed(1):null;pe!=null&&(M[U]=pe)}),Object.entries(M).map(([U,ee])=>({designer:U,lead:ee})).sort((U,ee)=>ee.lead-U.lead)[0]||null})(),(()=>{const M={};return k.forEach(U=>{const ee=w.filter(D=>(D.designer||"")===U),pe=ee.length?+(ee.reduce((D,J)=>D+(J.revisoes||0),0)/ee.length).toFixed(2):null;pe!=null&&(M[U]=pe)}),Object.entries(M).map(([U,ee])=>({designer:U,ret:ee})).sort((U,ee)=>ee.ret-U.ret)[0]||null})(),_?l.jsxs("div",{className:"dashboard",children:[l.jsx("div",{className:"exec-summary",children:Array.from({length:5}).map((M,Y)=>l.jsx("div",{className:"skeleton row"},Y))}),l.jsx("div",{className:"section-grid",children:Array.from({length:2}).map((M,Y)=>l.jsx("div",{className:"skeleton card",style:{height:160}},Y))})]}):l.jsx("div",{className:"reports","data-loading":_?"true":"false",children:l.jsxs("div",{className:"reports-stack",style:{display:"block"},children:[l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32},children:[l.jsx("div",{className:"report-title",children:"Resumo Pessoal"}),l.jsxs("div",{className:"kpi-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(180px, 1fr))",gap:16},children:[l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",marginBottom:6},children:"Demandas atribudas"}),l.jsx("div",{className:"kpi-number",style:{fontSize:32,fontWeight:800},children:l.jsx(Zn,{value:A})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",marginBottom:6},children:"Demandas concludas"}),l.jsx("div",{className:"kpi-number",style:{fontSize:32,fontWeight:800},children:l.jsx(Zn,{value:$})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",marginBottom:6},children:"Demandas em andamento"}),l.jsx("div",{className:"kpi-number",style:{fontSize:32,fontWeight:800},children:l.jsx(Zn,{value:w.filter(M=>!Le(M.status)).length})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",marginBottom:6},children:"SLA pessoal"}),(()=>{const M=K>=90?"var(--status-success)":K>=70?"var(--status-warning)":"var(--status-danger)",Y=K>=90?"ok":K>=70?"warn":"danger";return l.jsx("div",{className:`progress sla ${Y}`,style:{height:16,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},title:"SLA pessoal",children:l.jsx("div",{className:"progress-fill",style:{width:`${K}%`,height:"100%",background:M}})})})()]})]})]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32},children:[l.jsx("div",{className:"report-title",children:"Funil Pessoal"}),l.jsx("div",{className:"section-divider"}),(()=>{const M=w.length||1,Y=w.length,U=w.filter(G=>Cs(G.status)).length,ee=w.filter(G=>String(G.status||"").toLowerCase().includes("revis")).length,pe=O.length,D=G=>Math.round(100*(G/Math.max(1,M))),J=[{label:"Criadas",q:Y,pct:D(Y),color:"var(--status-info)"},{label:"Em produo",q:U,pct:D(U),color:"var(--text-muted)"},{label:"Em reviso",q:ee,pct:D(ee),color:"var(--status-warning)"},{label:"Concludas",q:pe,pct:D(pe),color:"var(--status-success)"}];return l.jsx("div",{children:J.map((G,fe)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,margin:"10px 0"},children:[l.jsx("div",{style:{minWidth:160,color:"var(--muted)"},children:G.label}),l.jsx("div",{style:{flex:1,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},title:`${G.label}: ${G.q}`,children:l.jsx(zp,{pct:G.pct,color:G.color,height:18})}),l.jsx("div",{style:{minWidth:80,textAlign:"right"},children:G.q})]},fe))})})()]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32},children:[l.jsx("div",{className:"report-title",children:"Progresso Pessoal"}),l.jsx("div",{className:"section-divider"}),(()=>{const M=Fe.length||1,Y=Math.round(100*(zt/Math.max(1,M))),U=Dt,pe=ut>=90?"var(--status-success)":ut>=70?"var(--status-warning)":"var(--status-danger)",D=Y>=70?"var(--status-success)":Y>=40?"var(--status-warning)":"var(--status-danger)",J=U<=15?"var(--status-success)":U<=30?"var(--status-warning)":"var(--status-danger)";return l.jsxs("div",{className:"kpi-grid",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(220px, 1fr))",gap:16},children:[l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"Taxa de concluso no perodo"}),l.jsx("div",{className:"progress",style:{height:16,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},children:l.jsx("div",{className:"progress-fill",style:{width:`${Y}%`,height:"100%",background:D}})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"Retrabalho pessoal"}),l.jsx("div",{className:"progress",style:{height:16,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},children:l.jsx("div",{className:"progress-fill",style:{width:`${U}%`,height:"100%",background:J}})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"SLA pessoal vs meta"}),l.jsx("div",{className:"progress",style:{height:16,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},children:l.jsx("div",{className:"progress-fill",style:{width:`${ut}%`,height:"100%",background:pe}})})]})]})})()]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)"},children:[l.jsx("div",{className:"report-title",children:"Minhas Demandas"}),l.jsx("div",{className:"section-divider"}),w.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"table"})}),l.jsx("span",{children:"Nenhuma demanda atribuda."})]}):l.jsxs("table",{className:"report-matrix",style:{whiteSpace:"nowrap",tableLayout:"fixed",width:"100%"},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Demanda"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Prazo"}),l.jsx("th",{children:"SLA"})]})}),l.jsx("tbody",{children:w.map(M=>{const Y=!!(M.prazo&&M.dataConclusao&&M.dataConclusao<=M.prazo),U=Le(M.status)?Y?"No prazo":"Estourado":(M.prazo,"");return l.jsxs("tr",{className:"row-clickable",onClick:()=>s&&s(M),children:[l.jsx("td",{children:M.titulo||"(sem ttulo)"}),l.jsx("td",{children:M.status||""}),l.jsx("td",{children:M.tipoMidia||""}),l.jsx("td",{children:M.prazo||""}),l.jsx("td",{style:{color:Le(M.status)?Y?"#00C58E":"#FF5E5E":"var(--muted)"},children:U})]},M.id)})})]})]})]})})}function BP({demandas:t,items:e,designers:n,filtros:r,setFiltros:s,loading:i,onEdit:o,setRoute:c,setView:u}){const[h,p]=X.useState("month"),[g,_]=X.useState(n[0]||""),[j,b]=X.useState(n[1]||"");X.useEffect(()=>{const m=new Date,x=dt=>{const et=Be=>String(Be).padStart(2,"0");return`${dt.getFullYear()}-${et(dt.getMonth()+1)}-${et(dt.getDate())}`},C=dt=>{const et=new Date(dt),Be=et.getDay()||7;return et.setDate(et.getDate()-(Be-1)),new Date(et.getFullYear(),et.getMonth(),et.getDate())},W=dt=>{const et=C(dt),Be=new Date(et);return Be.setDate(Be.getDate()+6),Be},ue=new Date(m.getFullYear(),m.getMonth(),1),je=new Date(m.getFullYear(),m.getMonth()+1,0),We=new Date(m.getFullYear(),m.getMonth()-1,1),Ct=new Date(m.getFullYear(),m.getMonth(),0);if(h==="today"&&s(dt=>({...dt,cIni:x(m),cFim:x(m)})),h==="week"){const dt=C(m),et=W(m);s(Be=>({...Be,cIni:x(dt),cFim:x(et)}))}h==="month"&&s(dt=>({...dt,cIni:x(ue),cFim:x(je)})),h==="lastmonth"&&s(dt=>({...dt,cIni:x(We),cFim:x(Ct)}))},[h]);const R=["Todos",...n],z=m=>s(x=>({...x,designer:m==="Todos"?"":m})),[N,w]=X.useState(10),A=m=>{if(!m)return null;const[x,C,W]=String(m).split("-").map(Number);return x?new Date(x,C-1,W):null},O=(m,x)=>{const C=A(m),W=A(x);return!C||!W?null:Math.max(0,Math.round((W-C)/864e5))},$=X.useMemo(()=>Array.isArray(t)?t:[],[t]),K=$.length,v=$.filter(m=>Le(m.status)),y=(()=>{const m=v.filter(C=>C.prazo&&C.dataConclusao&&C.dataConclusao<=C.prazo).length,x=v.filter(C=>C.prazo&&C.dataConclusao).length;return Math.round(100*(m/Math.max(1,x)))})(),T=$.filter(m=>{if(Le(m.status)||!m.prazo)return!1;const x=A(m.prazo),C=new Date;return C.setHours(0,0,0,0),x&&x<C}),E=Math.round(100*(T.length/Math.max(1,K))),k=(()=>{const m=v.map(C=>O(C.dataCriacao||C.dataSolicitacao,C.dataConclusao)).filter(C=>C!=null);return+(m.reduce((C,W)=>C+W,0)/(m.length||1)||0).toFixed(1)})(),P=(()=>{const m=v.map(C=>C.revisoes||0);return+(m.reduce((C,W)=>C+W,0)/(m.length||1)||0).toFixed(2)})(),I=4,Ce=n.length||1,Ve=(()=>{const m=$.map(x=>A(x.dataCriacao||x.dataSolicitacao)).filter(Boolean).sort((x,C)=>x-C);return m.length?Math.max(1,Math.round((m[m.length-1]-m[0])/864e5)+1):1})(),mt=(()=>{const m=Ce*I*Ve,x=v.length;return Math.round(100*(x/Math.max(1,m)))})(),It=(()=>{const m={};$.forEach(C=>{const W=C.designer||"";m[W]=(m[W]||0)+1});const x=K||1;return Object.entries(m).map(([C,W])=>({designer:C,q:W,pct:Math.round(100*(W/x))})).sort((C,W)=>W.q-C.q)})(),V=(()=>{const m={};return $.forEach(x=>{const C=x.status||"";m[C]=(m[C]||0)+1}),Object.entries(m).map(([x,C])=>({status:x,q:C})).sort((x,C)=>C.q-x.q)})(),ne=(()=>{const m={};return $.forEach(x=>{const C=x.tipoMidia||"Outro";m[C]=(m[C]||0)+1}),Object.entries(m).map(([x,C])=>({tipo:x,q:C})).sort((x,C)=>C.q-x.q)})(),oe=(()=>{const m={};return $.forEach(x=>{const C=x.origem||"Outros";m[C]=(m[C]||0)+1}),Object.entries(m).map(([x,C])=>({origem:x,q:C})).sort((x,C)=>C.q-x.q)})(),Se=(()=>{const m={};return v.forEach(x=>{const C=x.designer||"",W=O(x.dataCriacao||x.dataSolicitacao,x.dataConclusao);if(W!=null){const ue=m[C]||{cnt:0,sum:0};m[C]={cnt:ue.cnt+1,sum:ue.sum+W}}}),Object.entries(m).map(([x,C])=>({designer:x,media:+(C.sum/(C.cnt||1)).toFixed(1)})).sort((x,C)=>x.media-C.media)})(),we=(()=>{const m={};return v.forEach(x=>{const C=x.tipoMidia||"Outro",W=x.revisoes||0,ue=m[C]||{rTot:0,cnt:0};m[C]={rTot:ue.rTot+W,cnt:ue.cnt+1}}),Object.entries(m).map(([x,C])=>({tipo:x,porPeca:+(C.rTot/(C.cnt||1)).toFixed(2)})).sort((x,C)=>C.porPeca-x.porPeca)})(),Ae=T.map(m=>{const x=A(m.prazo),C=new Date;C.setHours(0,0,0,0);const W=x?Math.max(0,Math.round((C-x)/864e5)):0;return{...m,atrasoDias:W}}).sort((m,x)=>x.atrasoDias-m.atrasoDias).slice(0,5),it=v.map(m=>{const x=O(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)||0;return{...m,leadDias:x}}).sort((m,x)=>x.leadDias-m.leadDias).slice(0,5),gt=v.slice().sort((m,x)=>(x.revisoes||0)-(m.revisoes||0)).slice(0,5),nt=(()=>{const m=W=>{if(!W)return null;const[ue,je,We]=W.split("-").map(Number);return new Date(ue,je-1,We)},x=m(r.cIni),C=m(r.cFim);return!x||!C?1:Math.max(1,Math.round((C-x)/864e5)+1)})(),Fe=$.filter(m=>Le(m.status));$.filter(m=>$a(m.status)),$.filter(m=>Cs(m.status)),$.reduce((m,x)=>m+(x.revisoes||0),0),Fe.length/nt;const Ue=$.filter(m=>!Le(m.status)),Xt=m=>{if(!m)return null;const[x,C,W]=String(m).split("-").map(Number),ue=new Date(x,(C||1)-1,W||1),je=new Date;return je.setHours(0,0,0,0),ue.setHours(0,0,0,0),Math.round((ue-je)/864e5)};Ue.filter(m=>{const x=Xt(m.prazo);return x!=null&&x<=2}),(()=>{const m=Ue.map(C=>Xt(C.prazo)).filter(C=>C!=null);return+(m.reduce((C,W)=>C+W,0)/(m.length||1)).toFixed(1)})(),(()=>{const m=Ue.filter(C=>{const W=Xt(C.prazo);return W!=null&&W<0}).length,x=Ue.length||1;return Math.round(100*(m/x))})();const ut=Fe.map(m=>O(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)).filter(m=>m!=null);+(ut.reduce((m,x)=>m+x,0)/(ut.length||1)).toFixed(1),(()=>{const m={};return Fe.forEach(x=>{const C=x.tipoMidia||"Outro",W=O(x.dataCriacao||x.dataSolicitacao,x.dataConclusao);if(W!=null){const ue=m[C]||{cnt:0,sum:0};m[C]={cnt:ue.cnt+1,sum:ue.sum+W}}}),Object.entries(m).map(([x,C])=>({tipo:x,media:+(C.sum/C.cnt).toFixed(1)}))})(),(()=>{const m={};return Fe.forEach(x=>{const C=x.designer||"",W=O(x.dataCriacao||x.dataSolicitacao,x.dataConclusao);if(W!=null){const ue=m[C]||{cnt:0,sum:0};m[C]={cnt:ue.cnt+1,sum:ue.sum+W}}}),Object.entries(m).map(([x,C])=>({designer:x,media:+(C.sum/C.cnt).toFixed(1)}))})();const Je=new Date,rn=new Date(Je.getFullYear(),Je.getMonth()-1,1),Dt=(m,x)=>{if(!m)return!1;const[C,W,ue]=m.split("-").map(Number),je=new Date(C,W-1,ue);return je.getMonth()===x.getMonth()&&je.getFullYear()===x.getFullYear()},zt=Fe.filter(m=>Dt(m.dataConclusao,Je)).map(m=>O(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)).filter(m=>m!=null),rt=Fe.filter(m=>Dt(m.dataConclusao,rn)).map(m=>O(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)).filter(m=>m!=null);+(zt.reduce((m,x)=>m+x,0)/(zt.length||1)).toFixed(1),+(rt.reduce((m,x)=>m+x,0)/(rt.length||1)).toFixed(1),(()=>{const m=Fe.map(ue=>ue.revisoes||0),x=m.length||1,C=ue=>Math.round(100*(m.filter(je=>je===ue).length/x)),W=ue=>Math.round(100*(m.filter(ue).length/x));return{sRev:C(0),umaRev:C(1),duasMais:W(ue=>ue>=2)}})();const st=(()=>{const m={};return $.forEach(x=>{const C=x.designer||"",W=x.revisoes||0,ue=m[C]||{rTot:0,cnt:0};m[C]={rTot:ue.rTot+W,cnt:ue.cnt+1}}),Object.entries(m).map(([x,C])=>({designer:x,porPeca:+(C.rTot/(C.cnt||1)).toFixed(2)})).sort((x,C)=>C.porPeca-x.porPeca)})();(()=>{const m={};return $.forEach(x=>{const C=x.tipoMidia||"Outro",W=x.revisoes||0,ue=m[C]||{rTot:0,cnt:0};m[C]={rTot:ue.rTot+W,cnt:ue.cnt+1}}),Object.entries(m).map(([x,C])=>({tipo:x,porPeca:+(C.rTot/(C.cnt||1)).toFixed(2)})).sort((x,C)=>C.porPeca-x.porPeca)})(),(()=>{const m={};$.forEach(C=>{const W=C.origem||"Outros";m[W]=(m[W]||0)+1});const x=K||1;return Object.entries(m).map(([C,W])=>({origem:C,q:W,pct:Math.round(100*(W/x))}))})(),(()=>{const m={};return $.forEach(x=>{const C=x.origem||"Outros",W=x.revisoes||0,ue=m[C]||{rTot:0,cnt:0};m[C]={rTot:ue.rTot+W,cnt:ue.cnt+1}}),Object.entries(m).map(([x,C])=>({origem:x,porPeca:+(C.rTot/(C.cnt||1)).toFixed(2)})).sort((x,C)=>C.porPeca-x.porPeca)})(),(()=>{const m={};return v.forEach(x=>{const C=x.origem||"Outros";m[C]=(m[C]||0)+1}),Object.entries(m).map(([x,C])=>({origem:x,q:C})).sort((x,C)=>C.q-x.q)})(),(()=>{const m={};return Fe.forEach(x=>{const C=x.finishedAt;if(!C)return;const W=new Date(C).getHours();m[W]=(m[W]||0)+1}),m})(),(()=>{const m=Fe.map(W=>Number(W.tempoProducaoMs||0)).filter(W=>W>0),x=m.reduce((W,ue)=>W+ue,0)/(m.length||1);return+(W=>W/36e5)(x).toFixed(2)})(),(()=>{const m={};return Fe.forEach(x=>{const C=x.designer||"",W=Number(x.tempoProducaoMs||0),ue=m[C]||{cnt:0,sum:0};m[C]={cnt:ue.cnt+1,sum:ue.sum+W}}),Object.entries(m).map(([x,C])=>({designer:x,horas:+(C.sum/(C.cnt||1)/36e5).toFixed(2)})).sort((x,C)=>x.horas-C.horas)})(),st.slice().sort((m,x)=>m.porPeca-x.porPeca),(()=>{const m={};return $.forEach(x=>{const C=x.campanha||"";m[C]=(m[C]||0)+1}),Object.entries(m).map(([x,C])=>({campanha:x,q:C})).sort((x,C)=>C.q-x.q)})(),(()=>{const m={};return $.forEach(x=>{const C=x.campanha||"",W=x.revisoes||0,ue=m[C]||{rTot:0,cnt:0};m[C]={rTot:ue.rTot+W,cnt:ue.cnt+1}}),Object.entries(m).map(([x,C])=>({campanha:x,porPeca:+(C.rTot/(C.cnt||1)).toFixed(2)})).sort((x,C)=>C.porPeca-x.porPeca)})(),(()=>{const m={};return $.forEach(x=>{if(x.campanha){const C=x.campanha,W=!!(x.prazo&&x.dataConclusao&&x.dataConclusao<=x.prazo),ue=!!(x.prazo&&x.dataConclusao),je=m[C]||{ok:0,total:0};m[C]={ok:je.ok+(W?1:0),total:je.total+(ue?1:0)}}}),Object.entries(m).map(([x,C])=>({campanha:x,sla:Math.round(100*(C.ok/(C.total||1)))}))})();const Wt=m=>{if(!m)return!1;const[x,C,W]=String(m).split("-").map(Number);if(!x)return!1;const ue=new Date(x,C-1,W),je=A(r.cIni),We=A(r.cFim);return!je||!We?!0:(ue.setHours(0,0,0,0),je.setHours(0,0,0,0),We.setHours(0,0,0,0),ue>=je&&ue<=We)},M=$.filter(m=>Wt(m.prazo)),Y=M.length,U=M.filter(m=>{const x=String(m.status||"").toLowerCase();return $a(m.status)||Cs(m.status)||x.includes("feedback")}).length,ee=M.filter(m=>String(m.status||"").toLowerCase().includes("revisar")).length,pe=$.filter(m=>Le(m.status)&&Wt(m.prazo)).length,D=(()=>{const m={};M.forEach(C=>{const W=C.status||"";m[W]=(m[W]||0)+1});const x=M.length||1;return Object.entries(m).map(([C,W])=>({status:C,q:W,pct:Math.round(100*(W/x))})).sort((C,W)=>W.q-C.q)})(),J=(()=>{const m={};M.forEach(C=>{const W=C.designer||"";m[W]=(m[W]||0)+1});const x=M.length||1;return Object.entries(m).map(([C,W])=>({designer:C,q:W,pct:Math.round(100*(W/x))})).sort((C,W)=>W.q-C.q)})(),G=(()=>{const m={};M.forEach(C=>{const W=C.tipoMidia||"Outro";m[W]=(m[W]||0)+1});const x=M.length||1;return Object.entries(m).map(([C,W])=>({tipo:C,q:W,pct:Math.round(100*(W/x))})).sort((C,W)=>W.q-C.q)})(),fe=(()=>{const m=M.length||1,x=M.length,C=U,W=ee,ue=$.filter(We=>Le(We.status)&&Wt(We.prazo)).length,je=We=>Math.round(100*(We/Math.max(1,m)));return[{label:"Criadas",q:x,pct:je(x),color:"#4DA3FF"},{label:"Em andamento",q:C,pct:je(C),color:"#3b82f6"},{label:"Reviso",q:W,pct:je(W),color:"#9B59B6"},{label:"Concludas",q:ue,pct:je(ue),color:"#10b981"}]})();(()=>{const m=new Date;return m.setHours(0,0,0,0),M.filter(x=>{if(Le(x.status)||!x.prazo)return!1;const[C,W,ue]=String(x.prazo).split("-").map(Number),je=new Date(C,W-1,ue);return je.setHours(0,0,0,0),je<m}).map(x=>{const[C,W,ue]=String(x.prazo).split("-").map(Number),je=new Date(C,W-1,ue);je.setHours(0,0,0,0);const We=Math.max(0,Math.round((m-je)/864e5));return{...x,atrasoDias:We}}).sort((x,C)=>C.atrasoDias-x.atrasoDias).slice(0,5)})(),M.filter(x=>Le(x.status)).map(x=>({...x,leadDias:O(x.dataCriacao||x.dataSolicitacao,x.dataConclusao)||0})).sort((x,C)=>C.leadDias-x.leadDias).slice(0,5),M.slice().sort((m,x)=>(x.revisoes||0)-(m.revisoes||0)).slice(0,5);const me=$.filter(m=>Le(m.status)&&Dt(m.dataConclusao,Je)),Te=$.filter(m=>Le(m.status)&&Dt(m.dataConclusao,rn));me.length,Te.length,(()=>{const m=me.filter(C=>C.prazo&&C.dataConclusao&&C.dataConclusao<=C.prazo).length,x=me.filter(C=>C.prazo&&C.dataConclusao).length;return Math.round(100*(m/Math.max(1,x)))})(),(()=>{const m=Te.filter(C=>C.prazo&&C.dataConclusao&&C.dataConclusao<=C.prazo).length,x=Te.filter(C=>C.prazo&&C.dataConclusao).length;return Math.round(100*(m/Math.max(1,x)))})(),(()=>{const m=me.map(C=>O(C.dataCriacao||C.dataSolicitacao,C.dataConclusao)).filter(C=>C!=null);return+(m.reduce((C,W)=>C+W,0)/(m.length||1)||0).toFixed(1)})(),(()=>{const m=Te.map(C=>O(C.dataCriacao||C.dataSolicitacao,C.dataConclusao)).filter(C=>C!=null);return+(m.reduce((C,W)=>C+W,0)/(m.length||1)||0).toFixed(1)})(),(()=>{const m=me.length||1;return+(me.reduce((C,W)=>C+(W.revisoes||0),0)/m).toFixed(2)})(),(()=>{const m=Te.length||1;return+(Te.reduce((C,W)=>C+(W.revisoes||0),0)/m).toFixed(2)})(),(()=>{const x=[],C=new Date;for(let W=13;W>=0;W--){const ue=new Date(C);ue.setDate(ue.getDate()-W);const je=`${ue.getFullYear()}-${String(ue.getMonth()+1).padStart(2,"0")}-${String(ue.getDate()).padStart(2,"0")}`;x.push($.filter(We=>String(We.dataConclusao||"")===je).length)}return x})();const ke=(()=>{const m=A(r.cIni),x=A(r.cFim);return!m||!x?1:Math.max(1,Math.round((x-m)/864e5)+1)})(),Oe=(()=>{const m={};return M.forEach(x=>{if(!Le(x.status)){const C=x.designer||"";m[C]=(m[C]||0)+1}}),m})(),Ze=n.map(m=>{const x=M.filter(Be=>(Be.designer||"")===m),C=x.filter(Be=>Le(Be.status)),W=C.length,ue=(()=>{const Be=C.filter(ye=>ye.prazo&&ye.dataConclusao&&ye.dataConclusao<=ye.prazo).length,B=C.filter(ye=>ye.prazo&&ye.dataConclusao).length;return Math.round(100*(Be/Math.max(1,B)))})(),je=(()=>{const Be=C.map(ye=>O(ye.dataCriacao||ye.dataSolicitacao,ye.dataConclusao)).filter(ye=>ye!=null);return+(Be.reduce((ye,H)=>ye+H,0)/(Be.length||1)||0).toFixed(1)})(),We=(()=>{const Be=x.length||1,B=x.filter(ye=>(ye.revisoes||0)>0).length;return Math.round(100*(B/Math.max(1,Be)))})(),Ct=I*ke,dt=Oe[m]||0,et=Ct?Math.min(100,Math.round(100*(dt/Ct))):0;return{designer:m,concl:W,sla:ue,lead:je,ret:We,used:et}}),[Ge,Ie]=X.useState("concl"),ot=Ze.slice().sort((m,x)=>Ge==="sla"?x.sla-m.sla:Ge==="lead"?m.lead-x.lead:Ge==="ret"?m.ret-x.ret:x.concl-m.concl);return i?l.jsxs("div",{className:"reports",children:[l.jsx("div",{className:"reports-toolbar",children:l.jsx("div",{className:"skeleton row",style:{width:"50%"}})}),l.jsxs("div",{className:"reports-grid",id:"master-report",children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Dashboard Analtico 360"}),l.jsxs("div",{className:"chips",children:[l.jsxs("span",{className:"chip",children:["Total: ",total]}),l.jsxs("span",{className:"chip",children:["SLA: ",y,"%"]}),l.jsxs("span",{className:"chip",children:["Atrasadas: ",E,"%"]}),l.jsxs("span",{className:"chip",children:["Lead mdio: ",k,"d"]}),l.jsxs("span",{className:"chip",children:["Retrabalho mdio: ",retrabahoMedio??P]}),l.jsxs("span",{className:"chip",children:["Capacidade mdia: ",mt,"%"]})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{className:"reports-grid",children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Distribuies"}),l.jsx("div",{className:"chips",children:It.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.designer,": ",m.pct,"%"]},m.designer))}),l.jsx("div",{className:"chips",children:V.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.status,": ",m.q]},m.status))}),l.jsx("div",{className:"chips",children:ne.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.tipo,": ",m.q]},m.tipo))}),l.jsx("div",{className:"chips",children:oe.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.origem,": ",m.q]},m.origem))}),l.jsx("div",{className:"chips",children:Se.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.designer,": ",m.media,"d"]},m.designer))}),l.jsx("div",{className:"chips",children:we.slice(0,6).map(m=>l.jsxs("span",{className:"chip",children:[m.tipo,": ",m.porPeca]},m.tipo))})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Alertas Operacionais"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Mais atrasadas"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Atraso(d)"})]})}),l.jsx("tbody",{children:Ae.map(m=>l.jsxs("tr",{children:[l.jsx("td",{children:m.titulo}),l.jsx("td",{children:m.designer||""}),l.jsx("td",{style:{color:"#FF5E5E"},children:m.atrasoDias})]},m.id))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Maiores lead times"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Lead(d)"})]})}),l.jsx("tbody",{children:it.map(m=>l.jsxs("tr",{children:[l.jsx("td",{children:m.titulo}),l.jsx("td",{children:m.designer||""}),l.jsx("td",{children:m.leadDias})]},m.id))})]}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Mais revises"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Revises"})]})}),l.jsx("tbody",{children:gt.map(m=>l.jsxs("tr",{children:[l.jsx("td",{children:m.titulo}),l.jsx("td",{children:m.designer||""}),l.jsx("td",{children:m.revisoes||0})]},m.id))})]})]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Tabela Resumida"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Ttulo"}),l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Prazo"}),l.jsx("th",{children:"Atraso(d)"}),l.jsx("th",{children:"Lead(d)"}),l.jsx("th",{children:"Revises"})]})}),l.jsx("tbody",{children:e.slice(0,N).map(m=>{const x=!Le(m.status)&&m.prazo&&String(m.prazo)<String(Mn())?Math.max(0,Math.round((new Date().setHours(0,0,0,0)-A(m.prazo).setHours(0,0,0,0))/864e5)):0,C=Le(m.status)?O(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)||0:null;return l.jsxs("tr",{className:"row-clickable",onClick:()=>{var W;try{(W=document.getElementById("master-report"))==null||W.scrollIntoView({behavior:"smooth"})}catch{}},children:[l.jsx("td",{children:m.titulo||"(sem ttulo)"}),l.jsx("td",{children:m.designer||""}),l.jsx("td",{children:m.status||""}),l.jsx("td",{children:m.prazo||""}),l.jsx("td",{style:{color:x>0?"#FF5E5E":"var(--muted)"},children:x||0}),l.jsx("td",{children:C??""}),l.jsx("td",{children:m.revisoes||0})]},m.id)})})]}),l.jsxs("div",{className:"table-footer",children:[e.length>N&&l.jsx("button",{className:"primary",type:"button",onClick:()=>w(m=>Math.min(m+10,e.length)),children:"Mostrar mais"}),N>10&&l.jsx("button",{className:"tertiary",type:"button",onClick:()=>w(10),children:"Mostrar menos"})]})]})]})]}),Array.from({length:3}).map((m,x)=>l.jsx("div",{className:"skeleton card",style:{height:180}},x))]})]}):(K>0&&e.length,l.jsxs("div",{className:"reports","data-loading":i?"true":"false",children:[l.jsxs("div",{className:"reports-toolbar",children:[l.jsx("div",{className:"chips",children:l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"calendar"})}),l.jsx("input",{type:"date",value:r.cIni||"",onChange:m=>s(x=>({...x,cIni:m.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:r.cFim||"",onChange:m=>s(x=>({...x,cFim:m.target.value}))})]})}),l.jsx("div",{className:"chips",children:R.map(m=>l.jsxs("button",{className:`btn-md ${(r.designer||"")===m||m==="Todos"&&!r.designer?"active":""}`,onClick:()=>z(m),children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"usuarios"})}),l.jsx("span",{children:m})]},m))})]}),l.jsxs("div",{className:"reports-stack",style:{display:"block"},children:[l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"Resumo Geral das Demandas"}),l.jsxs("div",{className:"kpi-grid",style:{display:"grid",gridTemplateColumns:"repeat(6, minmax(160px, 1fr))",gap:16},children:[l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(Zn,{value:Y})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Perodo selecionado"})]}),l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(Zn,{value:U})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Perodo selecionado"})]}),l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(Zn,{value:ee})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Perodo selecionado"})]}),l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(Zn,{value:pe})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Perodo selecionado"})]}),l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(Zn,{value:y,suffix:"%"})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"SLA geral"})]}),l.jsxs("div",{className:"kpi-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"icon",style:{fontSize:20},children:""}),l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:l.jsx(Zn,{value:k,suffix:"d"})}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Lead Time mdio"})]})]})]}),l.jsxs("div",{className:"report-card",style:{gridColumn:"1",padding:24,borderRadius:8,boxShadow:"0 6px 16px rgba(0,0,0,0.12)"},children:[l.jsx("div",{className:"report-title",children:"Funil de Status"}),l.jsx("div",{className:"section-divider"}),l.jsx("div",{children:fe.map((m,x)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,margin:"6px 0"},children:[l.jsx("div",{style:{minWidth:140,color:"var(--muted)"},children:m.label}),l.jsx("div",{style:{flex:1,background:"#222",borderRadius:6,overflow:"hidden"},title:`${m.label}: ${m.q} (${m.pct}%)`,children:l.jsx(zp,{pct:m.pct,color:m.color,height:14})}),l.jsxs("div",{style:{minWidth:80,textAlign:"right"},children:[m.q,"  ",m.pct,"%"]})]},x))})]}),l.jsxs("div",{className:"report-card",style:{gridColumn:"2",padding:24,borderRadius:8,boxShadow:"0 6px 16px rgba(0,0,0,0.12)"},children:[l.jsx("div",{className:"report-title",children:"Scorecard por Designer"}),l.jsx("div",{className:"section-divider"}),l.jsxs("table",{className:"report-matrix",style:{whiteSpace:"nowrap",tableLayout:"fixed",width:"100%"},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Designer"}),l.jsx("th",{children:"Concludas"}),l.jsx("th",{children:"SLA %"}),l.jsx("th",{children:"Lead Time(d)"}),l.jsx("th",{children:"Retrabalho %"})]})}),l.jsx("tbody",{children:ot.map(m=>l.jsxs("tr",{children:[l.jsx("td",{children:m.designer}),l.jsx("td",{children:m.concl}),l.jsx("td",{style:{color:m.sla>=90?"#00C58E":m.sla>=70?"#FFE55C":"#FF5E5E"},children:m.sla}),l.jsx("td",{style:{color:m.lead<=2?"#00C58E":"var(--muted)"},children:m.lead}),l.jsx("td",{children:m.ret>=30?l.jsxs("span",{style:{background:"#FF5E5E22",color:"#FF5E5E",padding:"2px 6px",borderRadius:8},children:[m.ret,"%"]}):l.jsxs("span",{children:[m.ret,"%"]})})]},m.designer))})]})]}),l.jsxs("div",{className:"report-card",style:{gridColumn:"2",padding:24,borderRadius:8,boxShadow:"0 6px 16px rgba(0,0,0,0.12)"},children:[l.jsx("div",{className:"report-title",children:"Visualizaes"}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:16},children:[l.jsxs("div",{children:[l.jsx("div",{className:"widget-title",children:"Demandas por Status"}),(()=>{const m=D.slice(0,6).map(x=>{const C=String(x.status||"").toLowerCase(),W=C.includes("pendente")||C.includes("aberta")?"#f59e0b":C.includes("progresso")||C.includes("produo")?"#3b82f6":C.includes("feedback")?"#FFE55C":C.includes("revis")?"#9B59B6":C.includes("aprov")||C.includes("conclu")?"#10b981":"#4DA3FF";return{pct:x.pct,color:W,label:`${x.status} ${x.q}`}});return l.jsxs("div",{children:[l.jsx("div",{className:"stacked-bar",style:{display:"flex",height:18,overflow:"hidden",borderRadius:6},children:m.map((x,C)=>l.jsx("div",{style:{width:`${x.pct}%`,background:x.color},title:x.label},C))}),l.jsx("div",{className:"pie-legend",style:{marginTop:8},children:m.map((x,C)=>l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot",style:{background:x.color}}),x.label]},C))})]})})()]}),l.jsxs("div",{children:[l.jsx("div",{className:"widget-title",children:"Demandas por Designer"}),l.jsx("div",{children:J.slice(0,6).map(m=>l.jsxs("div",{className:"bar-row",style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[l.jsx("div",{style:{minWidth:80,color:"var(--muted)"},children:m.designer}),l.jsx("div",{style:{flex:1,background:"#222",borderRadius:6,overflow:"hidden"},title:`${m.designer}: ${m.q}`,children:l.jsx("div",{style:{width:`${m.pct}%`,height:12,background:"#4DA3FF"}})}),l.jsx("div",{style:{minWidth:28,textAlign:"right"},children:m.q})]},m.designer))})]}),l.jsxs("div",{children:[l.jsx("div",{className:"widget-title",children:"Demandas por Tipo"}),l.jsx("div",{children:G.slice(0,6).map(m=>l.jsxs("div",{className:"bar-row",style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[l.jsx("div",{style:{minWidth:80,color:"var(--muted)"},children:m.tipo}),l.jsx("div",{style:{flex:1,background:"#222",borderRadius:6,overflow:"hidden"},title:`${m.tipo}: ${m.q}`,children:l.jsx("div",{style:{width:`${m.pct}%`,height:12,background:"#9B59B6"}})}),l.jsx("div",{style:{minWidth:28,textAlign:"right"},children:m.q})]},m.tipo))})]})]})]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:8,boxShadow:"0 6px 16px rgba(0,0,0,0.12)"},children:[l.jsx("div",{className:"report-title",children:"Relatrio de Backlog"}),l.jsx("div",{className:"section-divider"}),(()=>{const m=Ue.filter(W=>{const ue=String(W.status||"").toLowerCase();return Cs(W.status)||ue.includes("feedback")}).length,x=Ue.filter(W=>String(W.status||"").toLowerCase().includes("revis")).length,C=Ue.filter(W=>{const ue=Xt(W.prazo);return ue!=null&&ue<0}).length;return l.jsxs("div",{className:"kpi-grid",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(160px, 1fr))",gap:16},children:[l.jsxs("div",{className:"kpi-card",style:{padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:m}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Em andamento"}),l.jsx("div",{style:{marginTop:8,color:m===0?"var(--status-success)":"var(--status-warning)"},children:m===0?"Controlado":"Ateno"})]}),l.jsxs("div",{className:"kpi-card",style:{padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:x}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"Em reviso"}),l.jsx("div",{style:{marginTop:8,color:x===0?"var(--status-success)":"var(--status-warning)"},children:x===0?"Controlado":"Ateno"})]}),l.jsxs("div",{className:"kpi-card",style:{padding:24,border:"1px solid var(--border)",borderRadius:12,height:160,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-number",style:{fontSize:28,fontWeight:700},children:C}),l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:12},children:"SLA estourado"}),l.jsx("div",{style:{marginTop:8,color:C===0?"var(--status-success)":"var(--status-danger)"},children:C===0?"Controlado":"Crtico"})]})]})})()]}),l.jsxs("div",{className:"report-card",children:[l.jsx("div",{className:"report-title",children:"O que aprendemos neste perodo"}),l.jsx("div",{className:"insights-grid",children:(()=>{const m=new Date,x=new Date(m.getFullYear(),m.getMonth(),1),C=new Date(m.getFullYear(),m.getMonth()+1,0),W=B=>{if(!B)return null;const[ye,H,F]=String(B).split("-").map(Number);return ye?new Date(ye,H-1,F):null},ue=B=>B?(B.setHours(0,0,0,0),B>=x&&B<=C):!1,je=e.filter(B=>Le(B.status)&&ue(W(B.dataConclusao))),We=(()=>{const B={};return je.forEach(H=>{const F=H.designer||"",L=H.prazo&&H.dataConclusao&&H.dataConclusao<=H.prazo,re=H.prazo&&H.dataConclusao,Z=B[F]||{ok:0,total:0};B[F]={ok:Z.ok+(L?1:0),total:Z.total+(re?1:0)}}),Object.entries(B).map(([H,F])=>({designer:H,pct:Math.round(100*(F.ok/(F.total||1)))})).sort((H,F)=>F.pct-H.pct)[0]})(),Ct=(()=>{const B={};e.forEach(L=>{const re=L.tipoMidia||"";B[re]=(B[re]||0)+1});const ye=Object.entries(B).map(([L,re])=>({tipo:L,q:re})).sort((L,re)=>re.q-L.q),H=ye.reduce((L,re)=>L+re.q,0)||1,F=ye[0];return F?{tipo:F.tipo,pct:Math.round(100*(F.q/H))}:null})(),dt=e.filter(B=>!Le(B.status)&&B.prazo&&String(B.prazo)<String(Mn())).length===0,et=(()=>{const ye=n.length||1,H=e.map(Z=>W(Z.dataCriacao||Z.dataSolicitacao)).filter(Boolean).sort((Z,de)=>Z-de),F=H.length?Math.max(1,Math.round((H[H.length-1]-H[0])/864e5)+1):1,L=ye*4*F,re=e.filter(Z=>Le(Z.status)).length;return Math.round(100*(re/Math.max(1,L)))})(),Be=[];return et>=80?Be.push({msg:`Capacidade mdia do time est em ${et}%`,act:"Considere redistribuir demandas."}):Be.push({msg:`Capacidade mdia do time est em ${et}%`,act:"Antecipe demandas futuras."}),dt&&Be.push({msg:"Nenhuma demanda apresentou atraso.",act:"Mantenha o ritmo atual de capacidade."}),We&&Be.push({msg:`O designer ${We.designer} teve o melhor SLA do perodo.`,act:"Priorize peas complexas com ele."}),Ct&&Be.push({msg:`${Ct.tipo} representa ${Ct.pct}% das demandas.`,act:`Ajuste prioridades para ${Ct.tipo}.`}),Be.slice(0,3)})().map((m,x)=>l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-ico",children:""}),l.jsx("div",{className:"insight-text",children:m.msg}),l.jsxs("div",{className:"insight-text",style:{color:"var(--muted)"},children:[" ",m.act]})]},x))})]})]})]}))}function Zn({value:t,duration:e=200,suffix:n=""}){const[r,s]=Qs.useState(0);Qs.useEffect(()=>{const o=Number(r)||0,u=(Number(t)||0)-o,h=performance.now();let p;const g=_=>{const j=Math.min(1,(_-h)/(e||200)),b=o+u*j;s(b),j<1&&(p=requestAnimationFrame(g))};return p=requestAnimationFrame(g),()=>{try{cancelAnimationFrame(p)}catch{}}},[t,e]);const i=Math.round(Number(r)||0);return Qs.createElement("span",null,`${i}${n}`)}function zp({pct:t,color:e,height:n=18}){const[r,s]=Qs.useState(0);return Qs.useEffect(()=>{const i=setTimeout(()=>s(Math.max(0,Math.min(100,t||0))),10);return()=>clearTimeout(i)},[t]),l.jsx("div",{style:{width:`${r}%`,height:n,background:e}})}function $P({demandas:t,designers:e,filtros:n,setFiltros:r,loading:s,user:i,onEdit:o,setRoute:c,setView:u}){const h=(i==null?void 0:i.role)==="admin",p=(i==null?void 0:i.username)||"",g=X.useMemo(()=>Array.isArray(t)?t:[],[t]);[...e],X.useMemo(()=>["Todos",...Array.from(new Set(g.map(D=>D.status||""))).filter(Boolean)],[g]),X.useMemo(()=>["Todos",...Array.from(new Set(g.map(D=>D.tipoMidia||""))).filter(Boolean)],[g]);const[_,j]=X.useState("month");X.useEffect(()=>{const D=new Date,J=Ze=>{const Ge=Ie=>String(Ie).padStart(2,"0");return`${Ze.getFullYear()}-${Ge(Ze.getMonth()+1)}-${Ge(Ze.getDate())}`},G=Ze=>{const Ge=new Date(Ze),Ie=Ge.getDay()||7;return Ge.setDate(Ge.getDate()-(Ie-1)),new Date(Ge.getFullYear(),Ge.getMonth(),Ge.getDate())},fe=Ze=>{const Ge=G(Ze),Ie=new Date(Ge);return Ie.setDate(Ie.getDate()+6),Ie},me=new Date(D.getFullYear(),D.getMonth(),1),Te=new Date(D.getFullYear(),D.getMonth()+1,0),ke=new Date(D.getFullYear(),D.getMonth()-1,1),Oe=new Date(D.getFullYear(),D.getMonth(),0);if(_==="today"&&r(Ze=>({...Ze,cIni:J(D),cFim:J(D)})),_==="week"){const Ze=G(D),Ge=fe(D);r(Ie=>({...Ie,cIni:J(Ze),cFim:J(Ge)}))}_==="month"&&r(Ze=>({...Ze,cIni:J(me),cFim:J(Te)})),_==="lastmonth"&&r(Ze=>({...Ze,cIni:J(ke),cFim:J(Oe)}))},[_]);const b=D=>{if(!D)return null;const[J,G,fe]=String(D).split("-").map(Number);return J?new Date(J,G-1,fe):null},R=D=>{if(!D)return!1;const[J,G,fe]=String(D).split("-").map(Number);if(!J)return!1;const me=new Date(J,G-1,fe),Te=b(n.cIni),ke=b(n.cFim);return!Te||!ke?!0:(me.setHours(0,0,0,0),Te.setHours(0,0,0,0),ke.setHours(0,0,0,0),me>=Te&&me<=ke)},z=D=>R(D.prazo),w=g.filter(z),A=w.length,O=w.filter(D=>{const J=String(D.status||"").toLowerCase();return $a(D.status)||Cs(D.status)||J.includes("feedback")}).length,$=w.filter(D=>String(D.status||"").toLowerCase().includes("revisar")).length,K=g.filter(D=>Le(D.status)&&R(D.prazo)).length,v=D=>{if(!D)return null;const[J,G,fe]=String(D).split("-").map(Number),me=new Date(J,(G||1)-1,fe||1),Te=new Date;return Te.setHours(0,0,0,0),me.setHours(0,0,0,0),Math.round((me-Te)/864e5)},y=w.filter(D=>{const J=v(D.prazo);return!Le(D.status)&&J!=null&&J<=2}).length,T=(D,J)=>{const G=b(D),fe=b(J);return!G||!fe?null:Math.max(0,Math.round((fe-G)/864e5))},E=g.filter(D=>z(D)&&Le(D.status)),k=(()=>{const D=E.filter(G=>G.prazo&&G.dataConclusao&&G.dataConclusao<=G.prazo).length,J=E.filter(G=>G.prazo&&G.dataConclusao).length;return Math.round(100*(D/Math.max(1,J)))})(),P=(()=>{const D=E.map(G=>T(G.dataCriacao||G.dataSolicitacao,G.dataConclusao)).filter(G=>G!=null);return+(D.reduce((G,fe)=>G+fe,0)/(D.length||1)||0).toFixed(1)})(),I=(()=>{const D=E.length||1,J=E.filter(G=>(G.revisoes||0)>0).length;return Math.round(100*(J/Math.max(1,D)))})(),Ce=(()=>{const D=w.length||1,J=A,G=O,fe=$,me=K,Te=ke=>Math.round(100*(ke/Math.max(1,D)));return[{label:"Criadas",q:J,pct:Te(J),color:"var(--status-info)"},{label:"Em Produo",q:G,pct:Te(G),color:"var(--text-muted)"},{label:"Em Reviso",q:fe,pct:Te(fe),color:"var(--status-warning)"},{label:"Concludas",q:me,pct:Te(me),color:"var(--status-success)"}]})(),Ve=4,mt=(()=>{const D=b(n.cIni),J=b(n.cFim);return!D||!J?1:Math.max(1,Math.round((J-D)/864e5)+1)})(),It=(()=>{const D={};return w.forEach(J=>{if(!Le(J.status)){const G=J.designer||"";D[G]=(D[G]||0)+1}}),D})(),V=h&&e.length||1,ne=w.filter(D=>!Le(D.status)).length,oe=Ve*mt*V,Se=oe?Math.min(100,Math.round(100*(ne/oe))):0;(h?e:[p]).map(D=>{const J=w.filter(Ie=>(Ie.designer||"")===D),G=E.filter(Ie=>(Ie.designer||"")===D),fe=G.length,me=(()=>{const Ie=G.filter(m=>m.prazo&&m.dataConclusao&&m.dataConclusao<=m.prazo).length,ot=G.filter(m=>m.prazo&&m.dataConclusao).length;return Math.round(100*(Ie/Math.max(1,ot)))})(),Te=(()=>{const Ie=G.map(m=>T(m.dataCriacao||m.dataSolicitacao,m.dataConclusao)).filter(m=>m!=null);return+(Ie.reduce((m,x)=>m+x,0)/(Ie.length||1)||0).toFixed(1)})(),ke=(()=>{const Ie=J.length||1,ot=J.filter(m=>(m.revisoes||0)>0).length;return Math.round(100*(ot/Math.max(1,Ie)))})(),Oe=Ve*mt,Ze=It[D]||0,Ge=Oe?Math.min(100,Math.round(100*(Ze/Oe))):0;return{designer:D,concl:fe,sla:me,lead:Te,ret:ke,used:Ge}}).slice().sort((D,J)=>J.sla!==D.sla?J.sla-D.sla:J.concl!==D.concl?J.concl-D.concl:J.ret!==D.ret?D.ret-J.ret:D.lead-J.lead);const Ae=h?e:[p];(()=>{const D={};return w.forEach(G=>{if(!Le(G.status)&&G.prazo&&String(G.prazo)<String(Mn())){const fe=G.designer||"";D[fe]=(D[fe]||0)+1}}),Object.entries(D).map(([G,fe])=>({designer:G,q:fe})).sort((G,fe)=>fe.q-G.q)[0]||null})(),(()=>{const D={};return Ae.forEach(G=>{const me=E.filter(ke=>(ke.designer||"")===G&&R(ke.prazo)).map(ke=>T(ke.dataCriacao||ke.dataSolicitacao,ke.dataConclusao)).filter(ke=>ke!=null),Te=me.length?+(me.reduce((ke,Oe)=>ke+Oe,0)/me.length).toFixed(1):null;Te!=null&&(D[G]=Te)}),Object.entries(D).map(([G,fe])=>({designer:G,lead:fe})).sort((G,fe)=>fe.lead-G.lead)[0]||null})();const it=(()=>{const D={};return Ae.forEach(G=>{const fe=w.filter(Te=>(Te.designer||"")===G),me=fe.length?+(fe.reduce((Te,ke)=>Te+(ke.revisoes||0),0)/fe.length).toFixed(2):null;me!=null&&(D[G]=me)}),Object.entries(D).map(([G,fe])=>({designer:G,ret:fe})).sort((G,fe)=>fe.ret-G.ret)[0]||null})(),gt=D=>(h?n.designer?(D.designer||"")===n.designer:!0:(D.designer||"")===p)&&(n.status?(D.status||"")===n.status:!0)&&(n.tipoMidia?(D.tipoMidia||"")===n.tipoMidia:!0)&&(n.origem?(D.origem||"")===n.origem:!0)&&(n.campanha?(D.campanha||"")===n.campanha:!0),nt=g.filter(gt),Fe=b(n.cIni),Ue=b(n.cFim),Xt=Fe&&Ue?Math.max(1,Math.round((Ue-Fe)/864e5)+1):0,ut=Fe?new Date(Fe):null,Je=Ue?new Date(Ue):null;ut&&ut.setDate(ut.getDate()-Xt),Je&&Je.setDate(Je.getDate()-Xt);const rn=(D,J,G)=>!D||!J||!G?!1:(D.setHours(0,0,0,0),J.setHours(0,0,0,0),G.setHours(0,0,0,0),D>=J&&D<=G),Dt=nt.filter(D=>Le(D.status)&&rn(b(D.prazo),Fe,Ue)),zt=nt.filter(D=>Le(D.status)&&rn(b(D.prazo),ut,Je)),rt=Dt.length,st=zt.length;(()=>{const D=Dt.filter(G=>G.prazo&&G.dataConclusao&&G.dataConclusao<=G.prazo).length,J=Dt.filter(G=>G.prazo&&G.dataConclusao).length;return Math.round(100*(D/Math.max(1,J)))})(),(()=>{const D=zt.filter(G=>G.prazo&&G.dataConclusao&&G.dataConclusao<=G.prazo).length,J=zt.filter(G=>G.prazo&&G.dataConclusao).length;return Math.round(100*(D/Math.max(1,J)))})();const Wt=(()=>{const D=Dt.map(G=>T(G.dataCriacao||G.dataSolicitacao,G.dataConclusao)).filter(G=>G!=null);return+(D.reduce((G,fe)=>G+fe,0)/(D.length||1)||0).toFixed(1)})(),M=(()=>{const D=zt.map(G=>T(G.dataCriacao||G.dataSolicitacao,G.dataConclusao)).filter(G=>G!=null);return+(D.reduce((G,fe)=>G+fe,0)/(D.length||1)||0).toFixed(1)})(),Y=nt.filter(D=>rn(b(D.prazo),Fe,Ue)),U=nt.filter(D=>rn(b(D.prazo),ut,Je));+(Y.reduce((D,J)=>D+(J.revisoes||0),0)/Math.max(1,Y.length)).toFixed(2),+(U.reduce((D,J)=>D+(J.revisoes||0),0)/Math.max(1,U.length)).toFixed(2);const[ee,pe]=X.useState(10);return s?l.jsx("div",{className:"dashboard",children:l.jsx("div",{className:"exec-summary",children:Array.from({length:6}).map((D,J)=>l.jsx("div",{className:"skeleton row"},J))})}):l.jsxs("div",{className:"reports","data-loading":s?"true":"false",children:[l.jsx("div",{className:"reports-toolbar",children:l.jsx("div",{className:"chips",children:l.jsxs("div",{className:"date-pill",children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"calendar"})}),l.jsx("input",{type:"date",value:n.cIni||"",onChange:D=>r(J=>({...J,cIni:D.target.value}))}),l.jsx("span",{style:{color:"var(--muted)"},children:""}),l.jsx("input",{type:"date",value:n.cFim||"",onChange:D=>r(J=>({...J,cFim:D.target.value}))})]})})}),l.jsxs("div",{className:"reports-stack",style:{display:"block"},children:[l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32},children:[l.jsx("div",{className:"report-title",children:"Sade Geral"}),(()=>{const D=+(Wt-M).toFixed(1),J=D>0,G=D<0,fe=G?"var(--status-success)":J?"var(--status-danger)":"var(--muted)",me=k>=90?"var(--status-success)":k>=70?"var(--status-warning)":"var(--status-danger)",Te=k>=90?"ok":k>=70?"warn":"danger";return l.jsxs("div",{className:"kpi-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(220px, 1fr))",gap:20},children:[l.jsxs("div",{className:"kpi-card",style:{padding:28,border:"1px solid var(--border)",borderRadius:16,height:180,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:13,marginBottom:8},children:"Concludas"}),l.jsx("div",{className:"kpi-number",style:{fontSize:40,fontWeight:800},children:l.jsx(Zn,{value:K})})]}),l.jsxs("div",{className:"kpi-card",style:{padding:28,border:"1px solid var(--border)",borderRadius:16,height:180,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:13,marginBottom:8},children:"SLA geral"}),l.jsx("div",{className:`progress sla ${Te}`,style:{height:18,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},title:"Percentual de entregas no prazo",children:l.jsx("div",{className:"progress-fill",style:{width:`${k}%`,height:"100%",background:me}})}),Te==="danger"?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:"var(--status-danger)"},children:[l.jsx("span",{className:"icon",children:l.jsx(He,{name:"alert"})}),l.jsx("span",{children:"SLA em risco"})]}):null]}),l.jsxs("div",{className:"kpi-card",style:{padding:28,border:"1px solid var(--border)",borderRadius:16,height:180,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:13,marginBottom:8},children:"Lead Time mdio"}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:10},children:[l.jsx("div",{className:"kpi-number",style:{fontSize:40,fontWeight:800},children:l.jsx(Zn,{value:P,suffix:"d"})}),l.jsx("div",{style:{fontSize:16,color:fe},children:J?"":G?"":""})]})]}),l.jsxs("div",{className:"kpi-card",style:{padding:28,border:"1px solid var(--border)",borderRadius:16,height:180,overflow:"hidden",whiteSpace:"nowrap"},children:[l.jsx("div",{className:"kpi-subtext",style:{color:"var(--muted)",fontSize:13,marginBottom:8},children:"Backlog em risco"}),l.jsx("div",{className:"kpi-number",style:{fontSize:32,fontWeight:800,color:y>0?"var(--status-danger)":"var(--status-success)"},children:y>0?l.jsx(Zn,{value:y}):"Nenhum risco"})]})]})})()]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32,minHeight:140},children:[l.jsx("div",{className:"report-title",children:"Funil de Status"}),l.jsx("div",{className:"section-divider"}),l.jsx("div",{children:Ce.map((D,J)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,margin:"10px 0"},children:[l.jsx("div",{style:{minWidth:160,color:"var(--muted)"},children:D.label}),l.jsx("div",{style:{flex:1,background:"var(--bg-secondary)",borderRadius:10,overflow:"hidden"},title:`${D.label}: ${D.q}`,children:l.jsx(zp,{pct:D.pct,color:D.color,height:18})}),l.jsx("div",{style:{minWidth:80,textAlign:"right"},children:D.q})]},J))})]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32,minHeight:140},children:[l.jsx("div",{className:"report-title",children:"Prioridades do Perodo"}),l.jsx("div",{className:"section-divider"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(220px, 1fr))",gap:16},children:[l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"Risco atual"}),l.jsx("div",{style:{fontSize:18,fontWeight:700,color:y>0?"#FF5E5E":"#00C58E"},children:y>0?`${y} demandas em risco`:"Nenhuma demanda crtica"})]}),l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"Maior retrabalho"}),l.jsx("div",{style:{fontSize:18,fontWeight:700},children:it?it.designer:"Nenhum"})]}),(()=>{const J=[{k:"Em Produo",q:O},{k:"Reviso",q:$},{k:"Criadas",q:A}].sort((fe,me)=>me.q-fe.q)[0],G=J.q>0;return l.jsxs("div",{className:"kpi-card",style:{padding:20,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{style:{color:"var(--muted)",marginBottom:6},children:"Gargalo atual"}),l.jsx("div",{style:{fontSize:18,fontWeight:700},children:G?`Foco em ${J.k}`:"Nenhum gargalo"})]})})()]})]}),l.jsxs("div",{className:"report-card",style:{padding:24,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",marginBottom:32},children:[l.jsx("div",{className:"report-title",children:"O que aprendemos neste perodo"}),l.jsx("div",{className:"section-divider"}),l.jsx("div",{className:"insights-grid",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(220px, 1fr))",gap:16},children:(()=>{const D=[],J=Se>=110?"Redistribuir cargas para aliviar capacidade.":Se>=90?"Monitorar capacidade e priorizar entregas.":"Aproveitar capacidade para antecipar demandas.";D.push({t:Se>=90?`Ajustar capacidade (${Se}%)`:`Planejar capacidade (${Se}%)`,a:J});const G=I>=30?"Padronizar revises e reduzir retrabalho.":I>=15?"Refinar briefing para diminuir revises.":"Manter qualidade consistente.";D.push({t:I>=15?`Reduzir retrabalho (${I}%)`:`Manter qualidade (${I}%)`,a:G});const fe=rt-st,me=fe>0,Te=fe<0,ke=Te?"Remover bloqueios e acelerar fluxo.":me?"Manter ritmo e consolidar ganhos.":"Estabilizar fluxo de produo.";return D.push({t:Te?"Acelerar ritmo":me?"Sustentar ritmo":"Estabilizar ritmo",a:ke}),D.slice(0,3).map((Oe,Ze)=>l.jsxs("div",{className:"insight-card",style:{padding:18,border:"1px solid var(--border)",borderRadius:12},children:[l.jsx("div",{className:"insight-text",style:{fontSize:16,fontWeight:700},children:Oe.t}),l.jsxs("div",{className:"insight-text",style:{color:"var(--muted)"},children:[" ",Oe.a]})]},Ze))})()})]})]})]})}i0(document.getElementById("root")).render(l.jsx(Qs.StrictMode,{children:l.jsx(OP,{})}));
